{"version":3,"file":"6de13d4a-ad7801ca43fbc5a5fb00.js","mappings":"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","sources":["webpack://project-site/./node_modules/@google/model-viewer/dist/model-viewer.js"],"sourcesContent":["import _slicedToArray from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _assertThisInitialized from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/get\";\nimport _asyncToGenerator from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _inherits from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _toConsumableArray from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createClass from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nvar _ENCODINGS;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"C:/Users/redba/Desktop/site/project-site/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e6) { throw _e6; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e7) { didErr = true; err = _e7; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * True if the custom elements polyfill is in use.\n */\nvar isCEPolyfill = typeof window !== 'undefined' && window.customElements != null && window.customElements.polyfillWrapFlushCallback !== undefined;\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\n\nvar removeNodes = function removeNodes(container, start) {\n  var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  while (start !== end) {\n    var _n = start.nextSibling;\n    container.removeChild(start);\n    start = _n;\n  }\n};\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\n\n\nvar marker = \"{{lit-\".concat(String(Math.random()).slice(2), \"}}\");\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\n\nvar nodeMarker = \"<!--\".concat(marker, \"-->\");\nvar markerRegex = new RegExp(\"\".concat(marker, \"|\").concat(nodeMarker));\n/**\n * Suffix appended to all bound attribute names.\n */\n\nvar boundAttributeSuffix = '$lit$';\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\n\nvar Template = function Template(result, element) {\n  _classCallCheck(this, Template);\n\n  this.parts = [];\n  this.element = element;\n  var nodesToRemove = [];\n  var stack = []; // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n\n  var walker = document.createTreeWalker(element.content, 133\n  /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */\n  , null, false); // Keeps track of the last index associated with a part. We try to delete\n  // unnecessary nodes, but we never want to associate two different parts\n  // to the same index. They must have a constant node between.\n\n  var lastPartIndex = 0;\n  var index = -1;\n  var partIndex = 0;\n  var strings = result.strings,\n      length = result.values.length;\n\n  while (partIndex < length) {\n    var node = walker.nextNode();\n\n    if (node === null) {\n      // We've exhausted the content inside a nested template element.\n      // Because we still have parts (the outer for-loop), we know:\n      // - There is a template in the stack\n      // - The walker will find a nextNode outside the template\n      walker.currentNode = stack.pop();\n      continue;\n    }\n\n    index++;\n\n    if (node.nodeType === 1\n    /* Node.ELEMENT_NODE */\n    ) {\n      if (node.hasAttributes()) {\n        var attributes = node.attributes;\n        var _length = attributes.length; // Per\n        // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n        // attributes are not guaranteed to be returned in document order.\n        // In particular, Edge/IE can return them out of order, so we cannot\n        // assume a correspondence between part index and attribute index.\n\n        var count = 0;\n\n        for (var _i = 0; _i < _length; _i++) {\n          if (endsWith(attributes[_i].name, boundAttributeSuffix)) {\n            count++;\n          }\n        }\n\n        while (count-- > 0) {\n          // Get the template literal section leading up to the first\n          // expression in this attribute\n          var stringForPart = strings[partIndex]; // Find the attribute name\n\n          var name = lastAttributeNameRegex.exec(stringForPart)[2]; // Find the corresponding attribute\n          // All bound attributes have had a suffix added in\n          // TemplateResult#getHTML to opt out of special attribute\n          // handling. To look up the attribute value we also need to add\n          // the suffix.\n\n          var attributeLookupName = name.toLowerCase() + boundAttributeSuffix;\n          var attributeValue = node.getAttribute(attributeLookupName);\n          node.removeAttribute(attributeLookupName);\n          var statics = attributeValue.split(markerRegex);\n          this.parts.push({\n            type: 'attribute',\n            index: index,\n            name: name,\n            strings: statics\n          });\n          partIndex += statics.length - 1;\n        }\n      }\n\n      if (node.tagName === 'TEMPLATE') {\n        stack.push(node);\n        walker.currentNode = node.content;\n      }\n    } else if (node.nodeType === 3\n    /* Node.TEXT_NODE */\n    ) {\n      var data = node.data;\n\n      if (data.indexOf(marker) >= 0) {\n        var parent = node.parentNode;\n\n        var _strings = data.split(markerRegex);\n\n        var lastIndex = _strings.length - 1; // Generate a new text node for each literal section\n        // These nodes are also used as the markers for node parts\n\n        for (var _i2 = 0; _i2 < lastIndex; _i2++) {\n          var insert = void 0;\n          var _s2 = _strings[_i2];\n\n          if (_s2 === '') {\n            insert = createMarker();\n          } else {\n            var match = lastAttributeNameRegex.exec(_s2);\n\n            if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n              _s2 = _s2.slice(0, match.index) + match[1] + match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n            }\n\n            insert = document.createTextNode(_s2);\n          }\n\n          parent.insertBefore(insert, node);\n          this.parts.push({\n            type: 'node',\n            index: ++index\n          });\n        } // If there's no text, we must insert a comment to mark our place.\n        // Else, we can trust it will stick around after cloning.\n\n\n        if (_strings[lastIndex] === '') {\n          parent.insertBefore(createMarker(), node);\n          nodesToRemove.push(node);\n        } else {\n          node.data = _strings[lastIndex];\n        } // We have a part for each match found\n\n\n        partIndex += lastIndex;\n      }\n    } else if (node.nodeType === 8\n    /* Node.COMMENT_NODE */\n    ) {\n      if (node.data === marker) {\n        var _parent = node.parentNode; // Add a new marker node to be the startNode of the Part if any of\n        // the following are true:\n        //  * We don't have a previousSibling\n        //  * The previousSibling is already the start of a previous part\n\n        if (node.previousSibling === null || index === lastPartIndex) {\n          index++;\n\n          _parent.insertBefore(createMarker(), node);\n        }\n\n        lastPartIndex = index;\n        this.parts.push({\n          type: 'node',\n          index: index\n        }); // If we don't have a nextSibling, keep this node so we have an end.\n        // Else, we can remove it to save future costs.\n\n        if (node.nextSibling === null) {\n          node.data = '';\n        } else {\n          nodesToRemove.push(node);\n          index--;\n        }\n\n        partIndex++;\n      } else {\n        var _i3 = -1;\n\n        while ((_i3 = node.data.indexOf(marker, _i3 + 1)) !== -1) {\n          // Comment node has a binding marker inside, make an inactive part\n          // The binding won't work, but subsequent bindings will\n          // TODO (justinfagnani): consider whether it's even worth it to\n          // make bindings in comments work\n          this.parts.push({\n            type: 'node',\n            index: -1\n          });\n          partIndex++;\n        }\n      }\n    }\n  } // Remove text binding nodes after the walk to not disturb the TreeWalker\n\n\n  for (var _i4 = 0, _nodesToRemove = nodesToRemove; _i4 < _nodesToRemove.length; _i4++) {\n    var _n2 = _nodesToRemove[_i4];\n\n    _n2.parentNode.removeChild(_n2);\n  }\n};\n\nvar endsWith = function endsWith(str, suffix) {\n  var index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\nvar isTemplatePartActive = function isTemplatePartActive(part) {\n  return part.index !== -1;\n}; // Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\n\n\nvar createMarker = function createMarker() {\n  return document.createComment('');\n};\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\n\n\nvar lastAttributeNameRegex = // eslint-disable-next-line no-control-regex\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nvar walkerNodeFilter = 133\n/* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */\n;\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\n\nfunction removeNodesFromTemplate(template, nodesToRemove) {\n  var content = template.element.content,\n      parts = template.parts;\n  var walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n  var partIndex = nextActiveIndexInTemplateParts(parts);\n  var part = parts[partIndex];\n  var nodeIndex = -1;\n  var removeCount = 0;\n  var nodesToRemoveInTemplate = [];\n  var currentRemovingNode = null;\n\n  while (walker.nextNode()) {\n    nodeIndex++;\n    var node = walker.currentNode; // End removal if stepped past the removing node\n\n    if (node.previousSibling === currentRemovingNode) {\n      currentRemovingNode = null;\n    } // A node to remove was found in the template\n\n\n    if (nodesToRemove.has(node)) {\n      nodesToRemoveInTemplate.push(node); // Track node we're removing\n\n      if (currentRemovingNode === null) {\n        currentRemovingNode = node;\n      }\n    } // When removing, increment count by which to adjust subsequent part indices\n\n\n    if (currentRemovingNode !== null) {\n      removeCount++;\n    }\n\n    while (part !== undefined && part.index === nodeIndex) {\n      // If part is in a removed node deactivate it by setting index to -1 or\n      // adjust the index as needed.\n      part.index = currentRemovingNode !== null ? -1 : part.index - removeCount; // go to the next active part.\n\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n      part = parts[partIndex];\n    }\n  }\n\n  nodesToRemoveInTemplate.forEach(function (n) {\n    return n.parentNode.removeChild(n);\n  });\n}\n\nvar countNodes = function countNodes(node) {\n  var count = node.nodeType === 11\n  /* Node.DOCUMENT_FRAGMENT_NODE */\n  ? 0 : 1;\n  var walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n\n  while (walker.nextNode()) {\n    count++;\n  }\n\n  return count;\n};\n\nvar nextActiveIndexInTemplateParts = function nextActiveIndexInTemplateParts(parts) {\n  var startIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n  for (var _i5 = startIndex + 1; _i5 < parts.length; _i5++) {\n    var part = parts[_i5];\n\n    if (isTemplatePartActive(part)) {\n      return _i5;\n    }\n  }\n\n  return -1;\n};\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\n\n\nfunction insertNodeIntoTemplate(template, node) {\n  var refNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var content = template.element.content,\n      parts = template.parts; // If there's no refNode, then put node at end of template.\n  // No part indices need to be shifted in this case.\n\n  if (refNode === null || refNode === undefined) {\n    content.appendChild(node);\n    return;\n  }\n\n  var walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n  var partIndex = nextActiveIndexInTemplateParts(parts);\n  var insertCount = 0;\n  var walkerIndex = -1;\n\n  while (walker.nextNode()) {\n    walkerIndex++;\n    var walkerNode = walker.currentNode;\n\n    if (walkerNode === refNode) {\n      insertCount = countNodes(node);\n      refNode.parentNode.insertBefore(node, refNode);\n    }\n\n    while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n      // If we've inserted the node, simply adjust all subsequent parts\n      if (insertCount > 0) {\n        while (partIndex !== -1) {\n          parts[partIndex].index += insertCount;\n          partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n\n        return;\n      }\n\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n    }\n  }\n}\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n\nvar directives = new WeakMap();\n\nvar isDirective = function isDirective(o) {\n  return typeof o === 'function' && directives.has(o);\n};\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\n\n\nvar noChange = {};\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\n\nvar nothing = {};\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\n\nvar TemplateInstance = /*#__PURE__*/function () {\n  function TemplateInstance(template, processor, options) {\n    _classCallCheck(this, TemplateInstance);\n\n    this.__parts = [];\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  _createClass(TemplateInstance, [{\n    key: \"update\",\n    value: function update(values) {\n      var i = 0;\n\n      var _iterator = _createForOfIteratorHelper(this.__parts),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var part = _step.value;\n\n          if (part !== undefined) {\n            part.setValue(values[i]);\n          }\n\n          i++;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(this.__parts),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _part = _step2.value;\n\n          if (_part !== undefined) {\n            _part.commit();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"_clone\",\n    value: function _clone() {\n      // There are a number of steps in the lifecycle of a template instance's\n      // DOM fragment:\n      //  1. Clone - create the instance fragment\n      //  2. Adopt - adopt into the main document\n      //  3. Process - find part markers and create parts\n      //  4. Upgrade - upgrade custom elements\n      //  5. Update - set node, attribute, property, etc., values\n      //  6. Connect - connect to the document. Optional and outside of this\n      //     method.\n      //\n      // We have a few constraints on the ordering of these steps:\n      //  * We need to upgrade before updating, so that property values will pass\n      //    through any property setters.\n      //  * We would like to process before upgrading so that we're sure that the\n      //    cloned fragment is inert and not disturbed by self-modifying DOM.\n      //  * We want custom elements to upgrade even in disconnected fragments.\n      //\n      // Given these constraints, with full custom elements support we would\n      // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n      //\n      // But Safari does not implement CustomElementRegistry#upgrade, so we\n      // can not implement that order and still have upgrade-before-update and\n      // upgrade disconnected fragments. So we instead sacrifice the\n      // process-before-upgrade constraint, since in Custom Elements v1 elements\n      // must not modify their light DOM in the constructor. We still have issues\n      // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n      // that don't strictly adhere to the no-modification rule because shadow\n      // DOM, which may be created in the constructor, is emulated by being placed\n      // in the light DOM.\n      //\n      // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n      // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n      // in one step.\n      //\n      // The Custom Elements v1 polyfill supports upgrade(), so the order when\n      // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n      // Connect.\n      var fragment = isCEPolyfill ? this.template.element.content.cloneNode(true) : document.importNode(this.template.element.content, true);\n      var stack = [];\n      var parts = this.template.parts; // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n\n      var walker = document.createTreeWalker(fragment, 133\n      /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */\n      , null, false);\n      var partIndex = 0;\n      var nodeIndex = 0;\n      var part;\n      var node = walker.nextNode(); // Loop through all the nodes and parts of a template\n\n      while (partIndex < parts.length) {\n        part = parts[partIndex];\n\n        if (!isTemplatePartActive(part)) {\n          this.__parts.push(undefined);\n\n          partIndex++;\n          continue;\n        } // Progress the tree walker until we find our next part's node.\n        // Note that multiple parts may share the same node (attribute parts\n        // on a single element), so this loop may not run at all.\n\n\n        while (nodeIndex < part.index) {\n          nodeIndex++;\n\n          if (node.nodeName === 'TEMPLATE') {\n            stack.push(node);\n            walker.currentNode = node.content;\n          }\n\n          if ((node = walker.nextNode()) === null) {\n            // We've exhausted the content inside a nested template element.\n            // Because we still have parts (the outer for-loop), we know:\n            // - There is a template in the stack\n            // - The walker will find a nextNode outside the template\n            walker.currentNode = stack.pop();\n            node = walker.nextNode();\n          }\n        } // We've arrived at our part's node.\n\n\n        if (part.type === 'node') {\n          var _part2 = this.processor.handleTextExpression(this.options);\n\n          _part2.insertAfterNode(node.previousSibling);\n\n          this.__parts.push(_part2);\n        } else {\n          var _this$__parts;\n\n          (_this$__parts = this.__parts).push.apply(_this$__parts, _toConsumableArray(this.processor.handleAttributeExpressions(node, part.name, part.strings, this.options)));\n        }\n\n        partIndex++;\n      }\n\n      if (isCEPolyfill) {\n        document.adoptNode(fragment);\n        customElements.upgrade(fragment);\n      }\n\n      return fragment;\n    }\n  }]);\n\n  return TemplateInstance;\n}();\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\n\n\nvar policy = window.trustedTypes && trustedTypes.createPolicy('lit-html', {\n  createHTML: function createHTML(s) {\n    return s;\n  }\n});\nvar commentMarker = \" \".concat(marker, \" \");\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\n\nvar TemplateResult = /*#__PURE__*/function () {\n  function TemplateResult(strings, values, type, processor) {\n    _classCallCheck(this, TemplateResult);\n\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n\n\n  _createClass(TemplateResult, [{\n    key: \"getHTML\",\n    value: function getHTML() {\n      var l = this.strings.length - 1;\n      var html = '';\n      var isCommentBinding = false;\n\n      for (var _i6 = 0; _i6 < l; _i6++) {\n        var _s3 = this.strings[_i6]; // For each binding we want to determine the kind of marker to insert\n        // into the template source before it's parsed by the browser's HTML\n        // parser. The marker type is based on whether the expression is in an\n        // attribute, text, or comment position.\n        //   * For node-position bindings we insert a comment with the marker\n        //     sentinel as its text content, like <!--{{lit-guid}}-->.\n        //   * For attribute bindings we insert just the marker sentinel for the\n        //     first binding, so that we support unquoted attribute bindings.\n        //     Subsequent bindings can use a comment marker because multi-binding\n        //     attributes must be quoted.\n        //   * For comment bindings we insert just the marker sentinel so we don't\n        //     close the comment.\n        //\n        // The following code scans the template source, but is *not* an HTML\n        // parser. We don't need to track the tree structure of the HTML, only\n        // whether a binding is inside a comment, and if not, if it appears to be\n        // the first binding in an attribute.\n\n        var commentOpen = _s3.lastIndexOf('<!--'); // We're in comment position if we have a comment open with no following\n        // comment close. Because <-- can appear in an attribute value there can\n        // be false positives.\n\n\n        isCommentBinding = (commentOpen > -1 || isCommentBinding) && _s3.indexOf('-->', commentOpen + 1) === -1; // Check to see if we have an attribute-like sequence preceding the\n        // expression. This can match \"name=value\" like structures in text,\n        // comments, and attribute values, so there can be false-positives.\n\n        var attributeMatch = lastAttributeNameRegex.exec(_s3);\n\n        if (attributeMatch === null) {\n          // We're only in this branch if we don't have a attribute-like\n          // preceding sequence. For comments, this guards against unusual\n          // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n          // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n          // below.\n          html += _s3 + (isCommentBinding ? commentMarker : nodeMarker);\n        } else {\n          // For attributes we use just a marker sentinel, and also append a\n          // $lit$ suffix to the name to opt-out of attribute-specific parsing\n          // that IE and Edge do for style and certain SVG attributes.\n          html += _s3.substr(0, attributeMatch.index) + attributeMatch[1] + attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] + marker;\n        }\n      }\n\n      html += this.strings[l];\n      return html;\n    }\n  }, {\n    key: \"getTemplateElement\",\n    value: function getTemplateElement() {\n      var template = document.createElement('template');\n      var value = this.getHTML();\n\n      if (policy !== undefined) {\n        // this is secure because `this.strings` is a TemplateStringsArray.\n        // TODO: validate this when\n        // https://github.com/tc39/proposal-array-is-template-object is\n        // implemented.\n        value = policy.createHTML(value);\n      }\n\n      template.innerHTML = value;\n      return template;\n    }\n  }]);\n\n  return TemplateResult;\n}();\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n\nvar isPrimitive = function isPrimitive(value) {\n  return value === null || !(typeof value === 'object' || typeof value === 'function');\n};\n\nvar isIterable = function isIterable(value) {\n  return Array.isArray(value) || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  !!(value && value[Symbol.iterator]);\n};\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\n\n\nvar NodePart = /*#__PURE__*/function () {\n  function NodePart(options) {\n    _classCallCheck(this, NodePart);\n\n    this.value = undefined;\n    this.__pendingValue = undefined;\n    this.options = options;\n  }\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n\n\n  _createClass(NodePart, [{\n    key: \"appendInto\",\n    value: function appendInto(container) {\n      this.startNode = container.appendChild(createMarker());\n      this.endNode = container.appendChild(createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n     * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n     * such as those that appear in a literal section of a template.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n\n  }, {\n    key: \"insertAfterNode\",\n    value: function insertAfterNode(ref) {\n      this.startNode = ref;\n      this.endNode = ref.nextSibling;\n    }\n    /**\n     * Appends this part into a parent part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n\n  }, {\n    key: \"appendIntoPart\",\n    value: function appendIntoPart(part) {\n      part.__insert(this.startNode = createMarker());\n\n      part.__insert(this.endNode = createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n\n  }, {\n    key: \"insertAfterPart\",\n    value: function insertAfterPart(ref) {\n      ref.__insert(this.startNode = createMarker());\n\n      this.endNode = ref.endNode;\n      ref.endNode = this.startNode;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.__pendingValue = value;\n    }\n  }, {\n    key: \"commit\",\n    value: function commit() {\n      if (this.startNode.parentNode === null) {\n        return;\n      }\n\n      while (isDirective(this.__pendingValue)) {\n        var directive = this.__pendingValue;\n        this.__pendingValue = noChange;\n        directive(this);\n      }\n\n      var value = this.__pendingValue;\n\n      if (value === noChange) {\n        return;\n      }\n\n      if (isPrimitive(value)) {\n        if (value !== this.value) {\n          this.__commitText(value);\n        }\n      } else if (value instanceof TemplateResult) {\n        this.__commitTemplateResult(value);\n      } else if (value instanceof Node) {\n        this.__commitNode(value);\n      } else if (isIterable(value)) {\n        this.__commitIterable(value);\n      } else if (value === nothing) {\n        this.value = nothing;\n        this.clear();\n      } else {\n        // Fallback, will render the string representation\n        this.__commitText(value);\n      }\n    }\n  }, {\n    key: \"__insert\",\n    value: function __insert(node) {\n      this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n  }, {\n    key: \"__commitNode\",\n    value: function __commitNode(value) {\n      if (this.value === value) {\n        return;\n      }\n\n      this.clear();\n\n      this.__insert(value);\n\n      this.value = value;\n    }\n  }, {\n    key: \"__commitText\",\n    value: function __commitText(value) {\n      var node = this.startNode.nextSibling;\n      value = value == null ? '' : value; // If `value` isn't already a string, we explicitly convert it here in case\n      // it can't be implicitly converted - i.e. it's a symbol.\n\n      var valueAsString = typeof value === 'string' ? value : String(value);\n\n      if (node === this.endNode.previousSibling && node.nodeType === 3\n      /* Node.TEXT_NODE */\n      ) {\n        // If we only have a single text node between the markers, we can just\n        // set its value, rather than replacing it.\n        // TODO(justinfagnani): Can we just check if this.value is primitive?\n        node.data = valueAsString;\n      } else {\n        this.__commitNode(document.createTextNode(valueAsString));\n      }\n\n      this.value = value;\n    }\n  }, {\n    key: \"__commitTemplateResult\",\n    value: function __commitTemplateResult(value) {\n      var template = this.options.templateFactory(value);\n\n      if (this.value instanceof TemplateInstance && this.value.template === template) {\n        this.value.update(value.values);\n      } else {\n        // Make sure we propagate the template processor from the TemplateResult\n        // so that we use its syntax extension, etc. The template factory comes\n        // from the render function options so that it can control template\n        // caching and preprocessing.\n        var _instance = new TemplateInstance(template, value.processor, this.options);\n\n        var fragment = _instance._clone();\n\n        _instance.update(value.values);\n\n        this.__commitNode(fragment);\n\n        this.value = _instance;\n      }\n    }\n  }, {\n    key: \"__commitIterable\",\n    value: function __commitIterable(value) {\n      // For an Iterable, we create a new InstancePart per item, then set its\n      // value to the item. This is a little bit of overhead for every item in\n      // an Iterable, but it lets us recurse easily and efficiently update Arrays\n      // of TemplateResults that will be commonly returned from expressions like:\n      // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n      // If _value is an array, then the previous render was of an\n      // iterable and _value will contain the NodeParts from the previous\n      // render. If _value is not an array, clear this part and make a new\n      // array for NodeParts.\n      if (!Array.isArray(this.value)) {\n        this.value = [];\n        this.clear();\n      } // Lets us keep track of how many items we stamped so we can clear leftover\n      // items from a previous render\n\n\n      var itemParts = this.value;\n      var partIndex = 0;\n      var itemPart;\n\n      var _iterator3 = _createForOfIteratorHelper(value),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var item = _step3.value;\n          // Try to reuse an existing part\n          itemPart = itemParts[partIndex]; // If no existing part, create a new one\n\n          if (itemPart === undefined) {\n            itemPart = new NodePart(this.options);\n            itemParts.push(itemPart);\n\n            if (partIndex === 0) {\n              itemPart.appendIntoPart(this);\n            } else {\n              itemPart.insertAfterPart(itemParts[partIndex - 1]);\n            }\n          }\n\n          itemPart.setValue(item);\n          itemPart.commit();\n          partIndex++;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      if (partIndex < itemParts.length) {\n        // Truncate the parts array so _value reflects the current state\n        itemParts.length = partIndex;\n        this.clear(itemPart && itemPart.endNode);\n      }\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var startNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.startNode;\n      removeNodes(this.startNode.parentNode, startNode.nextSibling, this.endNode);\n    }\n  }]);\n\n  return NodePart;\n}(); // Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\n\n\nvar eventOptionsSupported = false; // Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n\n(function () {\n  try {\n    var options = {\n      get capture() {\n        eventOptionsSupported = true;\n        return false;\n      }\n\n    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    window.addEventListener('test', options, options); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    window.removeEventListener('test', options, options);\n  } catch (_e) {// event options not supported\n  }\n})();\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\n\n\nfunction templateFactory(result) {\n  var templateCache = templateCaches.get(result.type);\n\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap(),\n      keyString: new Map()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  var template = templateCache.stringsArray.get(result.strings);\n\n  if (template !== undefined) {\n    return template;\n  } // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n\n\n  var key = result.strings.join(marker); // Check if we already have a Template for this key\n\n  template = templateCache.keyString.get(key);\n\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement()); // Cache the Template for this key\n\n    templateCache.keyString.set(key, template);\n  } // Cache all future queries for this TemplateStringsArray\n\n\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\nvar templateCaches = new Map();\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nvar parts = new WeakMap();\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\n\nvar render$1 = function render$1(result, container, options) {\n  var part = parts.get(container);\n\n  if (part === undefined) {\n    removeNodes(container, container.firstChild);\n    parts.set(container, part = new NodePart(Object.assign({\n      templateFactory: templateFactory\n    }, options)));\n    part.appendInto(container);\n  }\n\n  part.setValue(result);\n  part.commit();\n};\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n\n\nif (typeof window !== 'undefined') {\n  (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.4.1');\n}\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// Get a key to lookup in `templateCaches`.\n\n\nvar getTemplateCacheKey = function getTemplateCacheKey(type, scopeName) {\n  return \"\".concat(type, \"--\").concat(scopeName);\n};\n\nvar compatibleShadyCSSVersion = true;\n\nif (typeof window.ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n  console.warn(\"Incompatible ShadyCSS version detected. \" + \"Please update to at least @webcomponents/webcomponentsjs@2.0.2 and \" + \"@webcomponents/shadycss@1.3.1.\");\n  compatibleShadyCSSVersion = false;\n}\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\n\n\nvar shadyTemplateFactory = function shadyTemplateFactory(scopeName) {\n  return function (result) {\n    var cacheKey = getTemplateCacheKey(result.type, scopeName);\n    var templateCache = templateCaches.get(cacheKey);\n\n    if (templateCache === undefined) {\n      templateCache = {\n        stringsArray: new WeakMap(),\n        keyString: new Map()\n      };\n      templateCaches.set(cacheKey, templateCache);\n    }\n\n    var template = templateCache.stringsArray.get(result.strings);\n\n    if (template !== undefined) {\n      return template;\n    }\n\n    var key = result.strings.join(marker);\n    template = templateCache.keyString.get(key);\n\n    if (template === undefined) {\n      var element = result.getTemplateElement();\n\n      if (compatibleShadyCSSVersion) {\n        window.ShadyCSS.prepareTemplateDom(element, scopeName);\n      }\n\n      template = new Template(result, element);\n      templateCache.keyString.set(key, template);\n    }\n\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n  };\n};\n\nvar TEMPLATE_TYPES = ['html', 'svg'];\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\n\nvar removeStylesFromLitTemplates = function removeStylesFromLitTemplates(scopeName) {\n  TEMPLATE_TYPES.forEach(function (type) {\n    var templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n\n    if (templates !== undefined) {\n      templates.keyString.forEach(function (template) {\n        var content = template.element.content; // IE 11 doesn't support the iterable param Set constructor\n\n        var styles = new Set();\n        Array.from(content.querySelectorAll('style')).forEach(function (s) {\n          styles.add(s);\n        });\n        removeNodesFromTemplate(template, styles);\n      });\n    }\n  });\n};\n\nvar shadyRenderSet = new Set();\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\n\nvar prepareTemplateStyles = function prepareTemplateStyles(scopeName, renderedDOM, template) {\n  shadyRenderSet.add(scopeName); // If `renderedDOM` is stamped from a Template, then we need to edit that\n  // Template's underlying template element. Otherwise, we create one here\n  // to give to ShadyCSS, which still requires one while scoping.\n\n  var templateElement = !!template ? template.element : document.createElement('template'); // Move styles out of rendered DOM and store.\n\n  var styles = renderedDOM.querySelectorAll('style');\n  var length = styles.length; // If there are no styles, skip unnecessary work\n\n  if (length === 0) {\n    // Ensure prepareTemplateStyles is called to support adding\n    // styles via `prepareAdoptedCssText` since that requires that\n    // `prepareTemplateStyles` is called.\n    //\n    // ShadyCSS will only update styles containing @apply in the template\n    // given to `prepareTemplateStyles`. If no lit Template was given,\n    // ShadyCSS will not be able to update uses of @apply in any relevant\n    // template. However, this is not a problem because we only create the\n    // template for the purpose of supporting `prepareAdoptedCssText`,\n    // which doesn't support @apply at all.\n    window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n    return;\n  }\n\n  var condensedStyle = document.createElement('style'); // Collect styles into a single style. This helps us make sure ShadyCSS\n  // manipulations will not prevent us from being able to fix up template\n  // part indices.\n  // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n  // currently does this anyway. When it does not, this should be changed.\n\n  for (var _i7 = 0; _i7 < length; _i7++) {\n    var _style = styles[_i7];\n\n    _style.parentNode.removeChild(_style);\n\n    condensedStyle.textContent += _style.textContent;\n  } // Remove styles from nested templates in this scope.\n\n\n  removeStylesFromLitTemplates(scopeName); // And then put the condensed style into the \"root\" template passed in as\n  // `template`.\n\n  var content = templateElement.content;\n\n  if (!!template) {\n    insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n  } else {\n    content.insertBefore(condensedStyle, content.firstChild);\n  } // Note, it's important that ShadyCSS gets the template that `lit-html`\n  // will actually render so that it can update the style inside when\n  // needed (e.g. @apply native Shadow DOM case).\n\n\n  window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n  var style = content.querySelector('style');\n\n  if (window.ShadyCSS.nativeShadow && style !== null) {\n    // When in native Shadow DOM, ensure the style created by ShadyCSS is\n    // included in initially rendered output (`renderedDOM`).\n    renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n  } else if (!!template) {\n    // When no style is left in the template, parts will be broken as a\n    // result. To fix this, we put back the style node ShadyCSS removed\n    // and then tell lit to remove that node from the template.\n    // There can be no style in the template in 2 cases (1) when Shady DOM\n    // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n    // is in use ShadyCSS removes the style if it contains no content.\n    // NOTE, ShadyCSS creates its own style so we can safely add/remove\n    // `condensedStyle` here.\n    content.insertBefore(condensedStyle, content.firstChild);\n    var removes = new Set();\n    removes.add(condensedStyle);\n    removeNodesFromTemplate(template, removes);\n  }\n};\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\n\n\nvar render = function render(result, container, options) {\n  if (!options || typeof options !== 'object' || !options.scopeName) {\n    throw new Error('The `scopeName` option is required.');\n  }\n\n  var scopeName = options.scopeName;\n  var hasRendered = parts.has(container);\n  var needsScoping = compatibleShadyCSSVersion && container.nodeType === 11\n  /* Node.DOCUMENT_FRAGMENT_NODE */\n  && !!container.host; // Handle first render to a scope specially...\n\n  var firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName); // On first scope render, render into a fragment; this cannot be a single\n  // fragment that is reused since nested renders can occur synchronously.\n\n  var renderContainer = firstScopeRender ? document.createDocumentFragment() : container;\n  render$1(result, renderContainer, Object.assign({\n    templateFactory: shadyTemplateFactory(scopeName)\n  }, options)); // When performing first scope render,\n  // (1) We've rendered into a fragment so that there's a chance to\n  // `prepareTemplateStyles` before sub-elements hit the DOM\n  // (which might cause them to render based on a common pattern of\n  // rendering in a custom element's `connectedCallback`);\n  // (2) Scope the template with ShadyCSS one time only for this scope.\n  // (3) Render the fragment into the container and make sure the\n  // container knows its `part` is the one we just rendered. This ensures\n  // DOM will be re-used on subsequent renders.\n\n  if (firstScopeRender) {\n    var part = parts.get(renderContainer);\n    parts.delete(renderContainer); // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n    // that should apply to `renderContainer` even if the rendered value is\n    // not a TemplateInstance. However, it will only insert scoped styles\n    // into the document if `prepareTemplateStyles` has already been called\n    // for the given scope name.\n\n    var _template = part.value instanceof TemplateInstance ? part.value.template : undefined;\n\n    prepareTemplateStyles(scopeName, renderContainer, _template);\n    removeNodes(container, container.firstChild);\n    container.appendChild(renderContainer);\n    parts.set(container, part);\n  } // After elements have hit the DOM, update styling if this is the\n  // initial render to this container.\n  // This is needed whenever dynamic changes are made so it would be\n  // safest to do every render; however, this would regress performance\n  // so we leave it up to the user to call `ShadyCSS.styleElement`\n  // for dynamic changes.\n\n\n  if (!hasRendered && needsScoping) {\n    window.ShadyCSS.styleElement(container.host);\n  }\n};\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n\nvar _a$b;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\n\n\nwindow.JSCompiler_renameProperty = function (prop, _obj) {\n  return prop;\n};\n\nvar defaultConverter = {\n  toAttribute: function toAttribute(value, type) {\n    switch (type) {\n      case Boolean:\n        return value ? '' : null;\n\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        return value == null ? value : JSON.stringify(value);\n    }\n\n    return value;\n  },\n  fromAttribute: function fromAttribute(value, type) {\n    switch (type) {\n      case Boolean:\n        return value !== null;\n\n      case Number:\n        return value === null ? null : Number(value);\n\n      case Object:\n      case Array:\n        // Type assert to adhere to Bazel's \"must type assert JSON parse\" rule.\n        return JSON.parse(value);\n    }\n\n    return value;\n  }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\n\nvar notEqual = function notEqual(value, old) {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nvar defaultPropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual\n};\nvar STATE_HAS_UPDATED = 1;\nvar STATE_UPDATE_REQUESTED = 1 << 2;\nvar STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nvar STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\n\nvar finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\n\nvar UpdatingElement = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(UpdatingElement, _HTMLElement);\n\n  var _super = _createSuper(UpdatingElement);\n\n  function UpdatingElement() {\n    var _this2;\n\n    _classCallCheck(this, UpdatingElement);\n\n    _this2 = _super.call(this);\n\n    _this2.initialize();\n\n    return _this2;\n  }\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   */\n\n\n  _createClass(UpdatingElement, [{\n    key: \"initialize\",\n    value:\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    function initialize() {\n      var _this3 = this;\n\n      this._updateState = 0;\n      this._updatePromise = new Promise(function (res) {\n        return _this3._enableUpdatingResolver = res;\n      });\n      this._changedProperties = new Map();\n\n      this._saveInstanceProperties(); // ensures first update will be caught by an early access of\n      // `updateComplete`\n\n\n      this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n\n  }, {\n    key: \"_saveInstanceProperties\",\n    value: function _saveInstanceProperties() {\n      var _this4 = this;\n\n      // Use forEach so this works even if for/of loops are compiled to for loops\n      // expecting arrays\n      this.constructor._classProperties.forEach(function (_v, p) {\n        if (_this4.hasOwnProperty(p)) {\n          var value = _this4[p];\n          delete _this4[p];\n\n          if (!_this4._instanceProperties) {\n            _this4._instanceProperties = new Map();\n          }\n\n          _this4._instanceProperties.set(p, value);\n        }\n      });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n\n  }, {\n    key: \"_applyInstanceProperties\",\n    value: function _applyInstanceProperties() {\n      var _this5 = this;\n\n      // Use forEach so this works even if for/of loops are compiled to for loops\n      // expecting arrays\n      // tslint:disable-next-line:no-any\n      this._instanceProperties.forEach(function (v, p) {\n        return _this5[p] = v;\n      });\n\n      this._instanceProperties = undefined;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      // Ensure first connection completes an update. Updates cannot complete\n      // before connection.\n      this.enableUpdating();\n    }\n  }, {\n    key: \"enableUpdating\",\n    value: function enableUpdating() {\n      if (this._enableUpdatingResolver !== undefined) {\n        this._enableUpdatingResolver();\n\n        this._enableUpdatingResolver = undefined;\n      }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {}\n    /**\n     * Synchronizes property values when attributes change.\n     */\n\n  }, {\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(name, old, value) {\n      if (old !== value) {\n        this._attributeToProperty(name, value);\n      }\n    }\n  }, {\n    key: \"_propertyToAttribute\",\n    value: function _propertyToAttribute(name, value) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultPropertyDeclaration;\n      var ctor = this.constructor;\n\n      var attr = ctor._attributeNameForProperty(name, options);\n\n      if (attr !== undefined) {\n        var attrValue = ctor._propertyValueToAttribute(value, options); // an undefined value does not change the attribute.\n\n\n        if (attrValue === undefined) {\n          return;\n        } // Track if the property is being reflected to avoid\n        // setting the property again via `attributeChangedCallback`. Note:\n        // 1. this takes advantage of the fact that the callback is synchronous.\n        // 2. will behave incorrectly if multiple attributes are in the reaction\n        // stack at time of calling. However, since we process attributes\n        // in `update` this should not be possible (or an extreme corner case\n        // that we'd like to discover).\n        // mark state reflecting\n\n\n        this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n\n        if (attrValue == null) {\n          this.removeAttribute(attr);\n        } else {\n          this.setAttribute(attr, attrValue);\n        } // mark state not reflecting\n\n\n        this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n      }\n    }\n  }, {\n    key: \"_attributeToProperty\",\n    value: function _attributeToProperty(name, value) {\n      // Use tracking info to avoid deserializing attribute value if it was\n      // just set from a property setter.\n      if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n        return;\n      }\n\n      var ctor = this.constructor; // Note, hint this as an `AttributeMap` so closure clearly understands\n      // the type; it has issues with tracking types through statics\n      // tslint:disable-next-line:no-unnecessary-type-assertion\n\n      var propName = ctor._attributeToPropertyMap.get(name);\n\n      if (propName !== undefined) {\n        var options = ctor.getPropertyOptions(propName); // mark state reflecting\n\n        this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n        this[propName] = // tslint:disable-next-line:no-any\n        ctor._propertyValueFromAttribute(value, options); // mark state not reflecting\n\n        this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n      }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n\n  }, {\n    key: \"requestUpdateInternal\",\n    value: function requestUpdateInternal(name, oldValue, options) {\n      var shouldRequestUpdate = true; // If we have a property key, perform property update steps.\n\n      if (name !== undefined) {\n        var ctor = this.constructor;\n        options = options || ctor.getPropertyOptions(name);\n\n        if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n          if (!this._changedProperties.has(name)) {\n            this._changedProperties.set(name, oldValue);\n          } // Add to reflecting properties set.\n          // Note, it's important that every change has a chance to add the\n          // property to `_reflectingProperties`. This ensures setting\n          // attribute + property reflects correctly.\n\n\n          if (options.reflect === true && !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n            if (this._reflectingProperties === undefined) {\n              this._reflectingProperties = new Map();\n            }\n\n            this._reflectingProperties.set(name, options);\n          }\n        } else {\n          // Abort the request if the property should not be considered changed.\n          shouldRequestUpdate = false;\n        }\n      }\n\n      if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n        this._updatePromise = this._enqueueUpdate();\n      }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n\n  }, {\n    key: \"requestUpdate\",\n    value: function requestUpdate(name, oldValue) {\n      this.requestUpdateInternal(name, oldValue);\n      return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n\n  }, {\n    key: \"_enqueueUpdate\",\n    value: function () {\n      var _enqueueUpdate2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this._updatePromise;\n\n              case 4:\n                _context2.next = 8;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n\n              case 8:\n                result = this.performUpdate(); // If `performUpdate` returns a Promise, we await it. This is done to\n                // enable coordinating updates with a scheduler. Note, the result is\n                // checked to avoid delaying an additional microtask unless we need to.\n\n                if (!(result != null)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                _context2.next = 12;\n                return result;\n\n              case 12:\n                return _context2.abrupt(\"return\", !this._hasRequestedUpdate);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this, [[1, 6]]);\n      }));\n\n      function _enqueueUpdate() {\n        return _enqueueUpdate2.apply(this, arguments);\n      }\n\n      return _enqueueUpdate;\n    }()\n  }, {\n    key: \"_hasRequestedUpdate\",\n    get: function get() {\n      return this._updateState & STATE_UPDATE_REQUESTED;\n    }\n  }, {\n    key: \"hasUpdated\",\n    get: function get() {\n      return this._updateState & STATE_HAS_UPDATED;\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n\n  }, {\n    key: \"performUpdate\",\n    value: function performUpdate() {\n      // Abort any update if one is not pending when this is called.\n      // This can happen if `performUpdate` is called early to \"flush\"\n      // the update.\n      if (!this._hasRequestedUpdate) {\n        return;\n      } // Mixin instance properties once, if they exist.\n\n\n      if (this._instanceProperties) {\n        this._applyInstanceProperties();\n      }\n\n      var shouldUpdate = false;\n      var changedProperties = this._changedProperties;\n\n      try {\n        shouldUpdate = this.shouldUpdate(changedProperties);\n\n        if (shouldUpdate) {\n          this.update(changedProperties);\n        } else {\n          this._markUpdated();\n        }\n      } catch (e) {\n        // Prevent `firstUpdated` and `updated` from running when there's an\n        // update exception.\n        shouldUpdate = false; // Ensure element can accept additional updates after an exception.\n\n        this._markUpdated();\n\n        throw e;\n      }\n\n      if (shouldUpdate) {\n        if (!(this._updateState & STATE_HAS_UPDATED)) {\n          this._updateState = this._updateState | STATE_HAS_UPDATED;\n          this.firstUpdated(changedProperties);\n        }\n\n        this.updated(changedProperties);\n      }\n    }\n  }, {\n    key: \"_markUpdated\",\n    value: function _markUpdated() {\n      this._changedProperties = new Map();\n      this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n\n  }, {\n    key: \"updateComplete\",\n    get: function get() {\n      return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     * @deprecated Override `getUpdateComplete()` instead for forward\n     *     compatibility with `lit-element` 3.0 / `@lit/reactive-element`.\n     */\n\n  }, {\n    key: \"_getUpdateComplete\",\n    value: function _getUpdateComplete() {\n      return this.getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async getUpdateComplete() {\n     *       await super.getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n\n  }, {\n    key: \"getUpdateComplete\",\n    value: function getUpdateComplete() {\n      return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n\n  }, {\n    key: \"shouldUpdate\",\n    value: function shouldUpdate(_changedProperties) {\n      return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(_changedProperties) {\n      var _this6 = this;\n\n      if (this._reflectingProperties !== undefined && this._reflectingProperties.size > 0) {\n        // Use forEach so this works even if for/of loops are compiled to for\n        // loops expecting arrays\n        this._reflectingProperties.forEach(function (v, k) {\n          return _this6._propertyToAttribute(k, _this6[k], v);\n        });\n\n        this._reflectingProperties = undefined;\n      }\n\n      this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n\n  }, {\n    key: \"updated\",\n    value: function updated(_changedProperties) {}\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n\n  }, {\n    key: \"firstUpdated\",\n    value: function firstUpdated(_changedProperties) {}\n  }], [{\n    key: \"observedAttributes\",\n    get: function get() {\n      var _this7 = this;\n\n      // note: piggy backing on this to ensure we're finalized.\n      this.finalize();\n      var attributes = []; // Use forEach so this works even if for/of loops are compiled to for loops\n      // expecting arrays\n\n      this._classProperties.forEach(function (v, p) {\n        var attr = _this7._attributeNameForProperty(p, v);\n\n        if (attr !== undefined) {\n          _this7._attributeToPropertyMap.set(attr, p);\n\n          attributes.push(attr);\n        }\n      });\n\n      return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n\n    /** @nocollapse */\n\n  }, {\n    key: \"_ensureClassProperties\",\n    value: function _ensureClassProperties() {\n      var _this8 = this;\n\n      // ensure private storage for property declarations.\n      if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n        this._classProperties = new Map(); // NOTE: Workaround IE11 not supporting Map constructor argument.\n\n        var superProperties = Object.getPrototypeOf(this)._classProperties;\n\n        if (superProperties !== undefined) {\n          superProperties.forEach(function (v, k) {\n            return _this8._classProperties.set(k, v);\n          });\n        }\n      }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n\n  }, {\n    key: \"createProperty\",\n    value: function createProperty(name) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultPropertyDeclaration;\n\n      // Note, since this can be called by the `@property` decorator which\n      // is called before `finalize`, we ensure storage exists for property\n      // metadata.\n      this._ensureClassProperties();\n\n      this._classProperties.set(name, options); // Do not generate an accessor if the prototype already has one, since\n      // it would be lost otherwise and that would never be the user's intention;\n      // Instead, we expect users to call `requestUpdate` themselves from\n      // user-defined accessors. Note that if the super has an accessor we will\n      // still overwrite it\n\n\n      if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n        return;\n      }\n\n      var key = typeof name === 'symbol' ? Symbol() : \"__\".concat(name);\n      var descriptor = this.getPropertyDescriptor(name, key, options);\n\n      if (descriptor !== undefined) {\n        Object.defineProperty(this.prototype, name, descriptor);\n      }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n\n  }, {\n    key: \"getPropertyDescriptor\",\n    value: function getPropertyDescriptor(name, key, options) {\n      return {\n        // tslint:disable-next-line:no-any no symbol in index\n        get: function get() {\n          return this[key];\n        },\n        set: function set(value) {\n          var oldValue = this[name];\n          this[key] = value;\n          this.requestUpdateInternal(name, oldValue, options);\n        },\n        configurable: true,\n        enumerable: true\n      };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n\n  }, {\n    key: \"getPropertyOptions\",\n    value: function getPropertyOptions(name) {\n      return this._classProperties && this._classProperties.get(name) || defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      // finalize any superclasses\n      var superCtor = Object.getPrototypeOf(this);\n\n      if (!superCtor.hasOwnProperty(finalized)) {\n        superCtor.finalize();\n      }\n\n      this[finalized] = true;\n\n      this._ensureClassProperties(); // initialize Map populated in observedAttributes\n\n\n      this._attributeToPropertyMap = new Map(); // make any properties\n      // Note, only process \"own\" properties since this element will inherit\n      // any properties defined on the superClass, and finalization ensures\n      // the entire prototype chain is finalized.\n\n      if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n        var props = this.properties; // support symbols in properties (IE11 does not support this)\n\n        var propKeys = [].concat(_toConsumableArray(Object.getOwnPropertyNames(props)), _toConsumableArray(typeof Object.getOwnPropertySymbols === 'function' ? Object.getOwnPropertySymbols(props) : [])); // This for/of is ok because propKeys is an array\n\n        var _iterator4 = _createForOfIteratorHelper(propKeys),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _p2 = _step4.value;\n            // note, use of `any` is due to TypeSript lack of support for symbol in\n            // index types\n            // tslint:disable-next-line:no-any no symbol in index\n            this.createProperty(_p2, props[_p2]);\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"_attributeNameForProperty\",\n    value: function _attributeNameForProperty(name, options) {\n      var attribute = options.attribute;\n      return attribute === false ? undefined : typeof attribute === 'string' ? attribute : typeof name === 'string' ? name.toLowerCase() : undefined;\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"_valueHasChanged\",\n    value: function _valueHasChanged(value, old) {\n      var hasChanged = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : notEqual;\n      return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"_propertyValueFromAttribute\",\n    value: function _propertyValueFromAttribute(value, options) {\n      var type = options.type;\n      var converter = options.converter || defaultConverter;\n      var fromAttribute = typeof converter === 'function' ? converter : converter.fromAttribute;\n      return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"_propertyValueToAttribute\",\n    value: function _propertyValueToAttribute(value, options) {\n      if (options.reflect === undefined) {\n        return;\n      }\n\n      var type = options.type;\n      var converter = options.converter;\n      var toAttribute = converter && converter.toAttribute || defaultConverter.toAttribute;\n      return toAttribute(value, type);\n    }\n  }]);\n\n  return UpdatingElement;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n_a$b = finalized;\n/**\n * Marks class as having finished creating properties.\n */\n\nUpdatingElement[_a$b] = true;\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nvar standardProperty = function standardProperty(options, element) {\n  // When decorating an accessor, pass it through and add property metadata.\n  // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n  // stomp over the user's accessor.\n  if (element.kind === 'method' && element.descriptor && !('value' in element.descriptor)) {\n    return Object.assign(Object.assign({}, element), {\n      finisher: function finisher(clazz) {\n        clazz.createProperty(element.key, options);\n      }\n    });\n  } else {\n    // createProperty() takes care of defining the property, but we still\n    // must return some kind of descriptor, so return a descriptor for an\n    // unused prototype field. The finisher calls createProperty().\n    return {\n      kind: 'field',\n      key: Symbol(),\n      placement: 'own',\n      descriptor: {},\n      // When @babel/plugin-proposal-decorators implements initializers,\n      // do this instead of the initializer below. See:\n      // https://github.com/babel/babel/issues/9260 extras: [\n      //   {\n      //     kind: 'initializer',\n      //     placement: 'own',\n      //     initializer: descriptor.initializer,\n      //   }\n      // ],\n      initializer: function initializer() {\n        if (typeof element.initializer === 'function') {\n          this[element.key] = element.initializer.call(this);\n        }\n      },\n      finisher: function finisher(clazz) {\n        clazz.createProperty(element.key, options);\n      }\n    };\n  }\n};\n\nvar legacyProperty = function legacyProperty(options, proto, name) {\n  proto.constructor.createProperty(name, options);\n};\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\n\n\nfunction property(options) {\n  // tslint:disable-next-line:no-any decorator\n  return function (protoOrDescriptor, name) {\n    return name !== undefined ? legacyProperty(options, protoOrDescriptor, name) : standardProperty(options, protoOrDescriptor);\n  };\n}\n/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\n\n\nvar supportsAdoptingStyleSheets = window.ShadowRoot && (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) && 'adoptedStyleSheets' in Document.prototype && 'replace' in CSSStyleSheet.prototype;\nvar constructionToken = Symbol();\n\nvar CSSResult = /*#__PURE__*/function () {\n  function CSSResult(cssText, safeToken) {\n    _classCallCheck(this, CSSResult);\n\n    if (safeToken !== constructionToken) {\n      throw new Error('CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n    }\n\n    this.cssText = cssText;\n  } // Note, this is a getter so that it's lazy. In practice, this means\n  // stylesheets are not created until the first element instance is made.\n\n\n  _createClass(CSSResult, [{\n    key: \"styleSheet\",\n    get: function get() {\n      if (this._styleSheet === undefined) {\n        // Note, if `supportsAdoptingStyleSheets` is true then we assume\n        // CSSStyleSheet is constructable.\n        if (supportsAdoptingStyleSheets) {\n          this._styleSheet = new CSSStyleSheet();\n\n          this._styleSheet.replaceSync(this.cssText);\n        } else {\n          this._styleSheet = null;\n        }\n      }\n\n      return this._styleSheet;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.cssText;\n    }\n  }]);\n\n  return CSSResult;\n}();\n/**\n * Wrap a value for interpolation in a [[`css`]] tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\n\n\nvar unsafeCSS = function unsafeCSS(value) {\n  return new CSSResult(String(value), constructionToken);\n};\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n\n\n(window['litElementVersions'] || (window['litElementVersions'] = [])).push('2.5.1');\n/**\n * Sentinal value used to avoid calling lit-html's render function when\n * subclasses do not implement `render`\n */\n\nvar renderNotImplemented = {};\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the [[`properties`]] property or the [[`property`]] decorator.\n */\n\nvar LitElement = /*#__PURE__*/function (_UpdatingElement) {\n  _inherits(LitElement, _UpdatingElement);\n\n  var _super2 = _createSuper(LitElement);\n\n  function LitElement() {\n    _classCallCheck(this, LitElement);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(LitElement, [{\n    key: \"initialize\",\n    value:\n    /**\n     * Performs element initialization. By default this calls\n     * [[`createRenderRoot`]] to create the element [[`renderRoot`]] node and\n     * captures any pre-set values for registered properties.\n     */\n    function initialize() {\n      _get(_getPrototypeOf(LitElement.prototype), \"initialize\", this).call(this);\n\n      this.constructor._getUniqueStyles();\n\n      this.renderRoot = this.createRenderRoot(); // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n      // element's getRootNode(). While this could be done, we're choosing not to\n      // support this now since it would require different logic around de-duping.\n\n      if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n        this.adoptStyles();\n      }\n    }\n    /**\n     * Returns the node into which the element should render and by default\n     * creates and returns an open shadowRoot. Implement to customize where the\n     * element's DOM is rendered. For example, to render into the element's\n     * childNodes, return `this`.\n     * @returns {Element|DocumentFragment} Returns a node into which to render.\n     */\n\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      return this.attachShadow(this.constructor.shadowRootOptions);\n    }\n    /**\n     * Applies styling to the element shadowRoot using the [[`styles`]]\n     * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n     * available and will fallback otherwise. When Shadow DOM is polyfilled,\n     * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n     * is available but `adoptedStyleSheets` is not, styles are appended to the\n     * end of the `shadowRoot` to [mimic spec\n     * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n     */\n\n  }, {\n    key: \"adoptStyles\",\n    value: function adoptStyles() {\n      var styles = this.constructor._styles;\n\n      if (styles.length === 0) {\n        return;\n      } // There are three separate cases here based on Shadow DOM support.\n      // (1) shadowRoot polyfilled: use ShadyCSS\n      // (2) shadowRoot.adoptedStyleSheets available: use it\n      // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n      // rendering\n\n\n      if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n        window.ShadyCSS.ScopingShim.prepareAdoptedCssText(styles.map(function (s) {\n          return s.cssText;\n        }), this.localName);\n      } else if (supportsAdoptingStyleSheets) {\n        this.renderRoot.adoptedStyleSheets = styles.map(function (s) {\n          return s instanceof CSSStyleSheet ? s : s.styleSheet;\n        });\n      } else {\n        // This must be done after rendering so the actual style insertion is done\n        // in `update`.\n        this._needsShimAdoptedStyleSheets = true;\n      }\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(LitElement.prototype), \"connectedCallback\", this).call(this); // Note, first update/render handles styleElement so we only call this if\n      // connected after first update.\n\n\n      if (this.hasUpdated && window.ShadyCSS !== undefined) {\n        window.ShadyCSS.styleElement(this);\n      }\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes\n     * and calls `render` to render DOM via lit-html. Setting properties inside\n     * this method will *not* trigger another update.\n     * @param _changedProperties Map of changed properties with old values\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(changedProperties) {\n      var _this9 = this;\n\n      // Setting properties in `render` should not trigger an update. Since\n      // updates are allowed after super.update, it's important to call `render`\n      // before that.\n      var templateResult = this.render();\n\n      _get(_getPrototypeOf(LitElement.prototype), \"update\", this).call(this, changedProperties); // If render is not implemented by the component, don't call lit-html render\n\n\n      if (templateResult !== renderNotImplemented) {\n        this.constructor.render(templateResult, this.renderRoot, {\n          scopeName: this.localName,\n          eventContext: this\n        });\n      } // When native Shadow DOM is used but adoptedStyles are not supported,\n      // insert styling after rendering to ensure adoptedStyles have highest\n      // priority.\n\n\n      if (this._needsShimAdoptedStyleSheets) {\n        this._needsShimAdoptedStyleSheets = false;\n\n        this.constructor._styles.forEach(function (s) {\n          var style = document.createElement('style');\n          style.textContent = s.cssText;\n\n          _this9.renderRoot.appendChild(style);\n        });\n      }\n    }\n    /**\n     * Invoked on each update to perform rendering tasks. This method may return\n     * any value renderable by lit-html's `NodePart` - typically a\n     * `TemplateResult`. Setting properties inside this method will *not* trigger\n     * the element to update.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return renderNotImplemented;\n    }\n  }], [{\n    key: \"getStyles\",\n    value:\n    /**\n     * Return the array of styles to apply to the element.\n     * Override this method to integrate into a style management system.\n     *\n     * @nocollapse\n     */\n    function getStyles() {\n      return this.styles;\n    }\n    /** @nocollapse */\n\n  }, {\n    key: \"_getUniqueStyles\",\n    value: function _getUniqueStyles() {\n      // Only gather styles once per class\n      if (this.hasOwnProperty(JSCompiler_renameProperty('_styles', this))) {\n        return;\n      } // Take care not to call `this.getStyles()` multiple times since this\n      // generates new CSSResults each time.\n      // TODO(sorvell): Since we do not cache CSSResults by input, any\n      // shared styles will generate new stylesheet objects, which is wasteful.\n      // This should be addressed when a browser ships constructable\n      // stylesheets.\n\n\n      var userStyles = this.getStyles();\n\n      if (Array.isArray(userStyles)) {\n        // De-duplicate styles preserving the _last_ instance in the set.\n        // This is a performance optimization to avoid duplicated styles that can\n        // occur especially when composing via subclassing.\n        // The last item is kept to try to preserve the cascade order with the\n        // assumption that it's most important that last added styles override\n        // previous styles.\n        var addStyles = function addStyles(styles, set) {\n          return styles.reduceRight(function (set, s) {\n            return (// Note: On IE set.add() does not return the set\n              Array.isArray(s) ? addStyles(s, set) : (set.add(s), set)\n            );\n          }, set);\n        }; // Array.from does not work on Set in IE, otherwise return\n        // Array.from(addStyles(userStyles, new Set<CSSResult>())).reverse()\n\n\n        var set = addStyles(userStyles, new Set());\n        var styles = [];\n        set.forEach(function (v) {\n          return styles.unshift(v);\n        });\n        this._styles = styles;\n      } else {\n        this._styles = userStyles === undefined ? [] : [userStyles];\n      } // Ensure that there are no invalid CSSStyleSheet instances here. They are\n      // invalid in two conditions.\n      // (1) the sheet is non-constructible (`sheet` of a HTMLStyleElement), but\n      //     this is impossible to check except via .replaceSync or use\n      // (2) the ShadyCSS polyfill is enabled (:. supportsAdoptingStyleSheets is\n      //     false)\n\n\n      this._styles = this._styles.map(function (s) {\n        if (s instanceof CSSStyleSheet && !supportsAdoptingStyleSheets) {\n          // Flatten the cssText from the passed constructible stylesheet (or\n          // undetectable non-constructible stylesheet). The user might have\n          // expected to update their stylesheets over time, but the alternative\n          // is a crash.\n          var cssText = Array.prototype.slice.call(s.cssRules).reduce(function (css, rule) {\n            return css + rule.cssText;\n          }, '');\n          return unsafeCSS(cssText);\n        }\n\n        return s;\n      });\n    }\n  }]);\n\n  return LitElement;\n}(UpdatingElement);\n/**\n * Ensure this class is marked as `finalized` as an optimization ensuring\n * it will not needlessly try to `finalize`.\n *\n * Note this property name is a string to prevent breaking Closure JS Compiler\n * optimizations. See updating-element.ts for more information.\n */\n\n\nLitElement['finalized'] = true;\n/**\n * Reference to the underlying library method used to render the element's\n * DOM. By default, points to the `render` method from lit-html's shady-render\n * module.\n *\n * **Most users will never need to touch this property.**\n *\n * This  property should not be confused with the `render` instance method,\n * which should be overridden to define a template for the element.\n *\n * Advanced users creating a new base class based on LitElement can override\n * this property to point to a custom render method with a signature that\n * matches [shady-render's `render`\n * method](https://lit-html.polymer-project.org/api/modules/shady_render.html#render).\n *\n * @nocollapse\n */\n\nLitElement.render = render;\n/** @nocollapse */\n\nLitElement.shadowRootOptions = {\n  mode: 'open'\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// NOTE(cdata): The HAS_WEBXR_* constants can be enabled in Chrome by turning on\n// the appropriate flags. However, just because we have the API does not\n// guarantee that AR will work.\n\nvar HAS_WEBXR_DEVICE_API = navigator.xr != null && self.XRSession != null && navigator.xr.isSessionSupported != null;\nvar HAS_WEBXR_HIT_TEST_API = HAS_WEBXR_DEVICE_API && self.XRSession.prototype.requestHitTestSource;\nvar HAS_RESIZE_OBSERVER = self.ResizeObserver != null;\nvar HAS_INTERSECTION_OBSERVER = self.IntersectionObserver != null;\nvar IS_WEBXR_AR_CANDIDATE = HAS_WEBXR_HIT_TEST_API;\n\n(function () {\n  var userAgent = navigator.userAgent || navigator.vendor || self.opera;\n  var check = false; // eslint-disable-next-line\n\n  if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(userAgent.substr(0, 4))) {\n    check = true;\n  }\n\n  return check;\n})();\n\n/\\bCrOS\\b/.test(navigator.userAgent);\nvar IS_ANDROID = /android/i.test(navigator.userAgent); // Prior to iOS 13, detecting iOS Safari was relatively straight-forward.\n// As of iOS 13, Safari on iPad (in its default configuration) reports the same\n// user-agent string as Safari on desktop MacOS. Strictly speaking, we only care\n// about iOS for the purposes if selecting for cases where Quick Look is known\n// to be supported. However, for API correctness purposes, we must rely on\n// known, detectable signals to distinguish iOS Safari from MacOS Safari. At the\n// time of this writing, there are no non-iOS/iPadOS Apple devices with\n// multi-touch displays.\n// @see https://stackoverflow.com/questions/57765958/how-to-detect-ipad-and-ipad-os-version-in-ios-13-and-up\n// @see https://forums.developer.apple.com/thread/119186\n// @see https://github.com/google/model-viewer/issues/758\n\nvar IS_IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1;\n\nvar IS_AR_QUICKLOOK_CANDIDATE = function () {\n  var tempAnchor = document.createElement('a');\n  return Boolean(tempAnchor.relList && tempAnchor.relList.supports && tempAnchor.relList.supports('ar'));\n}(); // @see https://developer.chrome.com/multidevice/user-agent\n\n\n/Safari\\//.test(navigator.userAgent);\nvar IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nvar IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nIS_IOS && /CriOS\\//.test(navigator.userAgent);\nvar IS_SCENEVIEWER_CANDIDATE = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar CloseIcon = \"\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24px\\\" height=\\\"24px\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"#000000\\\">\\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\\n         support for dynamic re-coloring of UI components -->\\n    <defs>\\n      <filter id=\\\"drop-shadow\\\" x=\\\"-100%\\\" y=\\\"-100%\\\" width=\\\"300%\\\" height=\\\"300%\\\">\\n        <feGaussianBlur in=\\\"SourceAlpha\\\" stdDeviation=\\\"1\\\"/>\\n        <feOffset dx=\\\"0\\\" dy=\\\"0\\\" result=\\\"offsetblur\\\"/>\\n        <feFlood flood-color=\\\"#000000\\\"/>\\n        <feComposite in2=\\\"offsetblur\\\" operator=\\\"in\\\"/>\\n        <feMerge>\\n          <feMergeNode/>\\n          <feMergeNode in=\\\"SourceGraphic\\\"/>\\n        </feMerge>\\n      </filter>\\n    </defs>\\n    <path filter=\\\"url(#drop-shadow)\\\" d=\\\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\\\"/>\\n    <path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/>\\n</svg>\";\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar ControlsPrompt = \"\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"25\\\" height=\\\"36\\\">\\n    <defs>\\n        <path id=\\\"A\\\" d=\\\"M.001.232h24.997V36H.001z\\\" />\\n    </defs>\\n    <g transform=\\\"translate(-11 -4)\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <path fill-opacity=\\\"0\\\" fill=\\\"#fff\\\" d=\\\"M0 0h44v44H0z\\\" />\\n        <g transform=\\\"translate(11 3)\\\">\\n            <path d=\\\"M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z\\\" fill-opacity=\\\".5\\\" fill=\\\"#e4e4e4\\\" />\\n            <path d=\\\"M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91\\\" fill-opacity=\\\".6\\\" fill=\\\"#000\\\" />\\n            <path d=\\\"M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z\\\" fill=\\\"#fff\\\" />\\n            <g transform=\\\"translate(0 .769)\\\">\\n                <mask id=\\\"B\\\" fill=\\\"#fff\\\">\\n                    <use xlink:href=\\\"#A\\\" />\\n                </mask>\\n                <path d=\\\"M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325\\\" fill-opacity=\\\".05\\\" fill=\\\"#000\\\" mask=\\\"url(#B)\\\" />\\n            </g>\\n        </g>\\n    </g>\\n</svg>\";\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar ARGlyph = \"\\n<svg version=\\\"1.1\\\" id=\\\"view_x5F_in_x5F_AR_x5F_icon\\\"\\n\\t xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"24px\\\" height=\\\"24px\\\"\\n\\t viewBox=\\\"0 0 24 24\\\" enable-background=\\\"new 0 0 24 24\\\" xml:space=\\\"preserve\\\">\\n<rect id=\\\"Bounding_Box\\\" x=\\\"0\\\" y=\\\"0\\\" fill=\\\"none\\\" width=\\\"24\\\" height=\\\"24\\\"/>\\n<g id=\\\"Art_layer\\\">\\n\\t<path d=\\\"M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z\\\"/>\\n\\t<path d=\\\"M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z\\\"/>\\n\\t<path d=\\\"M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z\\\"/>\\n\\t<path d=\\\"M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z\\\"/>\\n\\t<g>\\n\\t\\t<path d=\\\"M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\\n\\t\\t\\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\\n\\t\\t\\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z\\\"/>\\n\\t</g>\\n</g>\\n</svg>\";\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar template = document.createElement('template');\ntemplate.innerHTML = \"\\n<style>\\n:host {\\n  display: block;\\n  position: relative;\\n  contain: strict;\\n  width: 300px;\\n  height: 150px;\\n}\\n\\n/* NOTE: This ruleset is our integration surface area with the\\n * :focus-visible polyfill.\\n *\\n * @see https://github.com/WICG/focus-visible/pull/196 */\\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\\n  outline: none;\\n}\\n\\n.container {\\n  position: relative;\\n}\\n\\n.userInput {\\n  width: 100%;\\n  height: 100%;\\n  display: block;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\ncanvas {\\n  position: absolute;\\n  display: none;\\n  pointer-events: none;\\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\\n   * that causes our canvas not to display pixels unless it is\\n   * on its own render layer\\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\\n   */\\n  transform: translateZ(0);\\n}\\n\\ncanvas.show {\\n  display: block;\\n}\\n\\n/* Adapted from HTML5 Boilerplate\\n *\\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\\n.screen-reader-only {\\n  border: 0;\\n  clip: rect(0, 0, 0, 0);\\n  height: 1px;\\n  margin: -1px;\\n  overflow: hidden;\\n  padding: 0;\\n  position: absolute;\\n  white-space: nowrap;\\n  width: 1px;\\n}\\n\\n.slot {\\n  position: absolute;\\n  pointer-events: none;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.slot > * {\\n  pointer-events: initial;\\n}\\n\\n.annotation-wrapper ::slotted(*) {\\n  opacity: var(--max-hotspot-opacity, 1);\\n  transition: opacity 0.3s;\\n}\\n\\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\\n  pointer-events: none;\\n}\\n\\n.annotation-wrapper ::slotted(*) {\\n  pointer-events: initial;\\n}\\n\\n.annotation-wrapper.hide ::slotted(*) {\\n  opacity: var(--min-hotspot-opacity, 0.25);\\n}\\n\\n.slot.poster {\\n  opacity: 0;\\n  transition: opacity 0.3s 0.3s;\\n  background-color: inherit;\\n}\\n\\n.slot.poster.show {\\n  opacity: 1;\\n  transition: none;\\n}\\n\\n.slot.poster > * {\\n  pointer-events: initial;\\n}\\n\\n.slot.poster:not(.show) > * {\\n  pointer-events: none;\\n}\\n\\n#default-poster {\\n  width: 100%;\\n  height: 100%;\\n  /* The default poster is a <button> so we need to set display\\n   * to prevent it from being affected by text-align: */\\n  display: block;\\n  position: absolute;\\n  border: none;\\n  padding: 0;\\n  background-size: contain;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  background-color: var(--poster-color, #fff);\\n  background-image: var(--poster-image, none);\\n}\\n\\n#default-progress-bar {\\n  display: block;\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  overflow: hidden;\\n}\\n\\n#default-progress-bar > .mask {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: var(--progress-mask, #fff);\\n  transition: opacity 0.3s;\\n  opacity: 0.2;\\n}\\n\\n#default-progress-bar > .bar {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: var(--progress-bar-height, 5px);\\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\\n  transition: transform 0.09s;\\n  transform-origin: top left;\\n  transform: scaleX(0);\\n  overflow: hidden;\\n}\\n\\n#default-progress-bar > .bar.hide {\\n  transition: opacity 0.3s 1s;\\n  opacity: 0;\\n}\\n\\n.slot.interaction-prompt {\\n  display: var(--interaction-prompt-display, flex);\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  align-items: center;\\n  justify-content: center;\\n\\n  opacity: 0;\\n  will-change: opacity;\\n  overflow: hidden;\\n  transition: opacity 0.3s;\\n}\\n\\n.slot.interaction-prompt.visible {\\n  opacity: 1;\\n}\\n\\n.slot.interaction-prompt > .animated-container {\\n  will-change: transform, opacity;\\n}\\n\\n.slot.interaction-prompt > * {\\n  pointer-events: none;\\n}\\n\\n.slot.ar-button {\\n  -moz-user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n  user-select: none;\\n\\n  display: var(--ar-button-display, block);\\n}\\n\\n.slot.ar-button:not(.enabled) {\\n  display: none;\\n}\\n\\n.fab {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  box-sizing: border-box;\\n  width: 40px;\\n  height: 40px;\\n  cursor: pointer;\\n  background-color: #fff;\\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\\n  border-radius: 100px;\\n}\\n\\n.fab > * {\\n  opacity: 0.87;\\n}\\n\\n#default-ar-button {\\n  position: absolute;\\n  bottom: 16px;\\n  right: 16px;\\n  transform: scale(var(--ar-button-scale, 1));\\n  transform-origin: bottom right;\\n}\\n\\n.slot.default {\\n  pointer-events: none;\\n}\\n\\n.slot.progress-bar {\\n  pointer-events: none;\\n}\\n\\n.slot.exit-webxr-ar-button {\\n  pointer-events: none;\\n}\\n\\n.slot.exit-webxr-ar-button:not(.enabled) {\\n  display: none;\\n}\\n\\n#default-exit-webxr-ar-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: absolute;\\n  top: 16px;\\n  right: 16px;\\n  width: 40px;\\n  height: 40px;\\n  box-sizing: border-box;\\n}\\n\\n#default-exit-webxr-ar-button > svg {\\n  fill: #fff;\\n}\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"userInput\\\" tabindex=\\\"0\\\" role=\\\"img\\\"\\n      aria-label=\\\"A depiction of a 3D model\\\"\\n      aria-live=\\\"polite\\\">\\n      <div class=\\\"slot canvas\\\">\\n        <slot name=\\\"canvas\\\">\\n          <canvas></canvas>\\n        </slot>\\n      </div>\\n  </div>\\n\\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\\n        will have their <slot> elements removed by ShadyCSS -->\\n  <div class=\\\"slot poster\\\">\\n    <slot name=\\\"poster\\\">\\n      <button type=\\\"button\\\" id=\\\"default-poster\\\" aria-hidden=\\\"true\\\" aria-label=\\\"Activate to view in 3D!\\\"></button>\\n    </slot>\\n  </div>\\n\\n  <div class=\\\"slot ar-button\\\">\\n    <slot name=\\\"ar-button\\\">\\n      <a id=\\\"default-ar-button\\\" part=\\\"default-ar-button\\\" class=\\\"fab\\\"\\n          tabindex=\\\"2\\\"\\n          aria-label=\\\"View this 3D model up close\\\">\\n        \".concat(ARGlyph, \"\\n      </a>\\n    </slot>\\n  </div>\\n\\n  <div class=\\\"slot interaction-prompt\\\">\\n    <div class=\\\"animated-container\\\">\\n      <slot name=\\\"interaction-prompt\\\" aria-hidden=\\\"true\\\">\\n        \").concat(ControlsPrompt, \"\\n      </slot>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"slot default\\\">\\n    <slot></slot>\\n\\n    <div class=\\\"slot progress-bar\\\">\\n      <slot name=\\\"progress-bar\\\">\\n        <div id=\\\"default-progress-bar\\\" aria-hidden=\\\"true\\\">\\n          <div class=\\\"mask\\\" part=\\\"default-progress-mask\\\"></div>\\n          <div class=\\\"bar\\\" part=\\\"default-progress-bar\\\"></div>\\n        </div>\\n      </slot>\\n    </div>\\n    \\n    <div class=\\\"slot exit-webxr-ar-button\\\">\\n      <slot name=\\\"exit-webxr-ar-button\\\">\\n        <a id=\\\"default-exit-webxr-ar-button\\\" part=\\\"default-exit-webxr-ar-button\\\"\\n            tabindex=\\\"3\\\"\\n            aria-label=\\\"Exit AR\\\"\\n            aria-hidden=\\\"true\\\">\\n          \").concat(CloseIcon, \"\\n        </a>\\n      </slot>\\n    </div>\\n  </div>\\n</div>\");\n\nvar makeTemplate = function makeTemplate(tagName) {\n  var clone = document.createElement('template');\n  clone.innerHTML = template.innerHTML;\n\n  if (window.ShadyCSS) {\n    window.ShadyCSS.prepareTemplate(clone, tagName);\n  }\n\n  return clone;\n};\n/**\n * @license\n * Copyright 2010-2021 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\n\n\nvar REVISION = '131';\nvar CullFaceNone = 0;\nvar CullFaceBack = 1;\nvar CullFaceFront = 2;\nvar PCFShadowMap = 1;\nvar PCFSoftShadowMap = 2;\nvar VSMShadowMap = 3;\nvar FrontSide = 0;\nvar BackSide = 1;\nvar DoubleSide = 2;\nvar FlatShading = 1;\nvar NoBlending = 0;\nvar NormalBlending = 1;\nvar AdditiveBlending = 2;\nvar SubtractiveBlending = 3;\nvar MultiplyBlending = 4;\nvar CustomBlending = 5;\nvar AddEquation = 100;\nvar SubtractEquation = 101;\nvar ReverseSubtractEquation = 102;\nvar MinEquation = 103;\nvar MaxEquation = 104;\nvar ZeroFactor = 200;\nvar OneFactor = 201;\nvar SrcColorFactor = 202;\nvar OneMinusSrcColorFactor = 203;\nvar SrcAlphaFactor = 204;\nvar OneMinusSrcAlphaFactor = 205;\nvar DstAlphaFactor = 206;\nvar OneMinusDstAlphaFactor = 207;\nvar DstColorFactor = 208;\nvar OneMinusDstColorFactor = 209;\nvar SrcAlphaSaturateFactor = 210;\nvar NeverDepth = 0;\nvar AlwaysDepth = 1;\nvar LessDepth = 2;\nvar LessEqualDepth = 3;\nvar EqualDepth = 4;\nvar GreaterEqualDepth = 5;\nvar GreaterDepth = 6;\nvar NotEqualDepth = 7;\nvar MultiplyOperation = 0;\nvar MixOperation = 1;\nvar AddOperation = 2;\nvar NoToneMapping = 0;\nvar LinearToneMapping = 1;\nvar ReinhardToneMapping = 2;\nvar CineonToneMapping = 3;\nvar ACESFilmicToneMapping = 4;\nvar CustomToneMapping = 5;\nvar UVMapping = 300;\nvar CubeReflectionMapping = 301;\nvar CubeRefractionMapping = 302;\nvar EquirectangularReflectionMapping = 303;\nvar EquirectangularRefractionMapping = 304;\nvar CubeUVReflectionMapping = 306;\nvar CubeUVRefractionMapping = 307;\nvar RepeatWrapping = 1000;\nvar ClampToEdgeWrapping = 1001;\nvar MirroredRepeatWrapping = 1002;\nvar NearestFilter = 1003;\nvar NearestMipmapNearestFilter = 1004;\nvar NearestMipmapLinearFilter = 1005;\nvar LinearFilter = 1006;\nvar LinearMipmapNearestFilter = 1007;\nvar LinearMipmapLinearFilter = 1008;\nvar UnsignedByteType = 1009;\nvar ByteType = 1010;\nvar ShortType = 1011;\nvar UnsignedShortType = 1012;\nvar IntType = 1013;\nvar UnsignedIntType = 1014;\nvar FloatType = 1015;\nvar HalfFloatType = 1016;\nvar UnsignedShort4444Type = 1017;\nvar UnsignedShort5551Type = 1018;\nvar UnsignedShort565Type = 1019;\nvar UnsignedInt248Type = 1020;\nvar AlphaFormat = 1021;\nvar RGBFormat = 1022;\nvar RGBAFormat = 1023;\nvar LuminanceFormat = 1024;\nvar LuminanceAlphaFormat = 1025;\nvar RGBEFormat = RGBAFormat;\nvar DepthFormat = 1026;\nvar DepthStencilFormat = 1027;\nvar RedFormat = 1028;\nvar RedIntegerFormat = 1029;\nvar RGFormat = 1030;\nvar RGIntegerFormat = 1031;\nvar RGBIntegerFormat = 1032;\nvar RGBAIntegerFormat = 1033;\nvar RGB_S3TC_DXT1_Format = 33776;\nvar RGBA_S3TC_DXT1_Format = 33777;\nvar RGBA_S3TC_DXT3_Format = 33778;\nvar RGBA_S3TC_DXT5_Format = 33779;\nvar RGB_PVRTC_4BPPV1_Format = 35840;\nvar RGB_PVRTC_2BPPV1_Format = 35841;\nvar RGBA_PVRTC_4BPPV1_Format = 35842;\nvar RGBA_PVRTC_2BPPV1_Format = 35843;\nvar RGB_ETC1_Format = 36196;\nvar RGB_ETC2_Format = 37492;\nvar RGBA_ETC2_EAC_Format = 37496;\nvar RGBA_ASTC_4x4_Format = 37808;\nvar RGBA_ASTC_5x4_Format = 37809;\nvar RGBA_ASTC_5x5_Format = 37810;\nvar RGBA_ASTC_6x5_Format = 37811;\nvar RGBA_ASTC_6x6_Format = 37812;\nvar RGBA_ASTC_8x5_Format = 37813;\nvar RGBA_ASTC_8x6_Format = 37814;\nvar RGBA_ASTC_8x8_Format = 37815;\nvar RGBA_ASTC_10x5_Format = 37816;\nvar RGBA_ASTC_10x6_Format = 37817;\nvar RGBA_ASTC_10x8_Format = 37818;\nvar RGBA_ASTC_10x10_Format = 37819;\nvar RGBA_ASTC_12x10_Format = 37820;\nvar RGBA_ASTC_12x12_Format = 37821;\nvar RGBA_BPTC_Format = 36492;\nvar SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nvar SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nvar SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nvar SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nvar SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nvar SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nvar SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nvar SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nvar SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nvar SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nvar SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nvar SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nvar SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nvar SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nvar LoopOnce = 2200;\nvar LoopRepeat = 2201;\nvar LoopPingPong = 2202;\nvar InterpolateDiscrete = 2300;\nvar InterpolateLinear = 2301;\nvar InterpolateSmooth = 2302;\nvar ZeroCurvatureEnding = 2400;\nvar ZeroSlopeEnding = 2401;\nvar WrapAroundEnding = 2402;\nvar NormalAnimationBlendMode = 2500;\nvar AdditiveAnimationBlendMode = 2501;\nvar TrianglesDrawMode = 0;\nvar TriangleStripDrawMode = 1;\nvar TriangleFanDrawMode = 2;\nvar LinearEncoding = 3000;\nvar sRGBEncoding = 3001;\nvar GammaEncoding = 3007;\nvar RGBEEncoding = 3002;\nvar LogLuvEncoding = 3003;\nvar RGBM7Encoding = 3004;\nvar RGBM16Encoding = 3005;\nvar RGBDEncoding = 3006;\nvar BasicDepthPacking = 3200;\nvar RGBADepthPacking = 3201;\nvar TangentSpaceNormalMap = 0;\nvar ObjectSpaceNormalMap = 1;\nvar KeepStencilOp = 7680;\nvar AlwaysStencilFunc = 519;\nvar StaticDrawUsage = 35044;\nvar DynamicDrawUsage = 35048;\nvar GLSL3 = '300 es';\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nvar EventDispatcher = /*#__PURE__*/function () {\n  function EventDispatcher() {\n    _classCallCheck(this, EventDispatcher);\n  }\n\n  _createClass(EventDispatcher, [{\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener) {\n      if (this._listeners === undefined) this._listeners = {};\n      var listeners = this._listeners;\n\n      if (listeners[type] === undefined) {\n        listeners[type] = [];\n      }\n\n      if (listeners[type].indexOf(listener) === -1) {\n        listeners[type].push(listener);\n      }\n    }\n  }, {\n    key: \"hasEventListener\",\n    value: function hasEventListener(type, listener) {\n      if (this._listeners === undefined) return false;\n      var listeners = this._listeners;\n      return listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1;\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener) {\n      if (this._listeners === undefined) return;\n      var listeners = this._listeners;\n      var listenerArray = listeners[type];\n\n      if (listenerArray !== undefined) {\n        var index = listenerArray.indexOf(listener);\n\n        if (index !== -1) {\n          listenerArray.splice(index, 1);\n        }\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (this._listeners === undefined) return;\n      var listeners = this._listeners;\n      var listenerArray = listeners[event.type];\n\n      if (listenerArray !== undefined) {\n        event.target = this; // Make a copy, in case listeners are removed while iterating.\n\n        var array = listenerArray.slice(0);\n\n        for (var _i8 = 0, _l2 = array.length; _i8 < _l2; _i8++) {\n          array[_i8].call(this, event);\n        }\n\n        event.target = null;\n      }\n    }\n  }]);\n\n  return EventDispatcher;\n}();\n\nvar _lut = [];\n\nfor (var _i9 = 0; _i9 < 256; _i9++) {\n  _lut[_i9] = (_i9 < 16 ? '0' : '') + _i9.toString(16);\n}\n\nvar _seed = 1234567;\nvar DEG2RAD = Math.PI / 180;\nvar RAD2DEG = 180 / Math.PI; // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\nfunction generateUUID() {\n  var d0 = Math.random() * 0xffffffff | 0;\n  var d1 = Math.random() * 0xffffffff | 0;\n  var d2 = Math.random() * 0xffffffff | 0;\n  var d3 = Math.random() * 0xffffffff | 0;\n  var uuid = _lut[d0 & 0xff] + _lut[d0 >> 8 & 0xff] + _lut[d0 >> 16 & 0xff] + _lut[d0 >> 24 & 0xff] + '-' + _lut[d1 & 0xff] + _lut[d1 >> 8 & 0xff] + '-' + _lut[d1 >> 16 & 0x0f | 0x40] + _lut[d1 >> 24 & 0xff] + '-' + _lut[d2 & 0x3f | 0x80] + _lut[d2 >> 8 & 0xff] + '-' + _lut[d2 >> 16 & 0xff] + _lut[d2 >> 24 & 0xff] + _lut[d3 & 0xff] + _lut[d3 >> 8 & 0xff] + _lut[d3 >> 16 & 0xff] + _lut[d3 >> 24 & 0xff]; // .toUpperCase() here flattens concatenated strings to save heap memory space.\n\n  return uuid.toUpperCase();\n}\n\nfunction clamp$1(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n} // compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\n\n\nfunction euclideanModulo(n, m) {\n  return (n % m + m) % m;\n} // Linear mapping from range <a1, a2> to range <b1, b2>\n\n\nfunction mapLinear(x, a1, a2, b1, b2) {\n  return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n} // https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\n\n\nfunction inverseLerp(x, y, value) {\n  if (x !== y) {\n    return (value - x) / (y - x);\n  } else {\n    return 0;\n  }\n} // https://en.wikipedia.org/wiki/Linear_interpolation\n\n\nfunction lerp(x, y, t) {\n  return (1 - t) * x + t * y;\n} // http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n\n\nfunction damp(x, y, lambda, dt) {\n  return lerp(x, y, 1 - Math.exp(-lambda * dt));\n} // https://www.desmos.com/calculator/vcsjnyz7x4\n\n\nfunction pingpong(x) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return length - Math.abs(euclideanModulo(x, length * 2) - length);\n} // http://en.wikipedia.org/wiki/Smoothstep\n\n\nfunction smoothstep(x, min, max) {\n  if (x <= min) return 0;\n  if (x >= max) return 1;\n  x = (x - min) / (max - min);\n  return x * x * (3 - 2 * x);\n}\n\nfunction smootherstep(x, min, max) {\n  if (x <= min) return 0;\n  if (x >= max) return 1;\n  x = (x - min) / (max - min);\n  return x * x * x * (x * (x * 6 - 15) + 10);\n} // Random integer from <low, high> interval\n\n\nfunction randInt(low, high) {\n  return low + Math.floor(Math.random() * (high - low + 1));\n} // Random float from <low, high> interval\n\n\nfunction randFloat(low, high) {\n  return low + Math.random() * (high - low);\n} // Random float from <-range/2, range/2> interval\n\n\nfunction randFloatSpread(range) {\n  return range * (0.5 - Math.random());\n} // Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\nfunction seededRandom(s) {\n  if (s !== undefined) _seed = s % 2147483647; // Park-Miller algorithm\n\n  _seed = _seed * 16807 % 2147483647;\n  return (_seed - 1) / 2147483646;\n}\n\nfunction degToRad(degrees) {\n  return degrees * DEG2RAD;\n}\n\nfunction radToDeg(radians) {\n  return radians * RAD2DEG;\n}\n\nfunction isPowerOfTwo(value) {\n  return (value & value - 1) === 0 && value !== 0;\n}\n\nfunction ceilPowerOfTwo(value) {\n  return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n}\n\nfunction floorPowerOfTwo(value) {\n  return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n}\n\nfunction setQuaternionFromProperEuler(q, a, b, c, order) {\n  // Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n  // rotations are applied to the axes in the order specified by 'order'\n  // rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n  // angles are in radians\n  var cos = Math.cos;\n  var sin = Math.sin;\n  var c2 = cos(b / 2);\n  var s2 = sin(b / 2);\n  var c13 = cos((a + c) / 2);\n  var s13 = sin((a + c) / 2);\n  var c1_3 = cos((a - c) / 2);\n  var s1_3 = sin((a - c) / 2);\n  var c3_1 = cos((c - a) / 2);\n  var s3_1 = sin((c - a) / 2);\n\n  switch (order) {\n    case 'XYX':\n      q.set(c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13);\n      break;\n\n    case 'YZY':\n      q.set(s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13);\n      break;\n\n    case 'ZXZ':\n      q.set(s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13);\n      break;\n\n    case 'XZX':\n      q.set(c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13);\n      break;\n\n    case 'YXY':\n      q.set(s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13);\n      break;\n\n    case 'ZYZ':\n      q.set(s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13);\n      break;\n\n    default:\n      console.warn('THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order);\n  }\n}\n\nvar MathUtils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DEG2RAD: DEG2RAD,\n  RAD2DEG: RAD2DEG,\n  generateUUID: generateUUID,\n  clamp: clamp$1,\n  euclideanModulo: euclideanModulo,\n  mapLinear: mapLinear,\n  inverseLerp: inverseLerp,\n  lerp: lerp,\n  damp: damp,\n  pingpong: pingpong,\n  smoothstep: smoothstep,\n  smootherstep: smootherstep,\n  randInt: randInt,\n  randFloat: randFloat,\n  randFloatSpread: randFloatSpread,\n  seededRandom: seededRandom,\n  degToRad: degToRad,\n  radToDeg: radToDeg,\n  isPowerOfTwo: isPowerOfTwo,\n  ceilPowerOfTwo: ceilPowerOfTwo,\n  floorPowerOfTwo: floorPowerOfTwo,\n  setQuaternionFromProperEuler: setQuaternionFromProperEuler\n});\n\nvar Vector2 = /*#__PURE__*/function () {\n  function Vector2() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Vector2);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Vector2, [{\n    key: \"width\",\n    get: function get() {\n      return this.x;\n    },\n    set: function set(value) {\n      this.x = value;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.y;\n    },\n    set: function set(value) {\n      this.y = value;\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(scalar) {\n      this.x = scalar;\n      this.y = scalar;\n      return this;\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(x) {\n      this.x = x;\n      return this;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(y) {\n      this.y = y;\n      return this;\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(index, value) {\n      switch (index) {\n        case 0:\n          this.x = value;\n          break;\n\n        case 1:\n          this.y = value;\n          break;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(index) {\n      switch (index) {\n        case 0:\n          return this.x;\n\n        case 1:\n          return this.y;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.x, this.y);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(v) {\n      this.x = v.x;\n      this.y = v.y;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n        return this.addVectors(v, w);\n      }\n\n      this.x += v.x;\n      this.y += v.y;\n      return this;\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(s) {\n      this.x += s;\n      this.y += s;\n      return this;\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      this.x = a.x + b.x;\n      this.y = a.y + b.y;\n      return this;\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(v, s) {\n      this.x += v.x * s;\n      this.y += v.y * s;\n      return this;\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n        return this.subVectors(v, w);\n      }\n\n      this.x -= v.x;\n      this.y -= v.y;\n      return this;\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(s) {\n      this.x -= s;\n      this.y -= s;\n      return this;\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      this.x = a.x - b.x;\n      this.y = a.y - b.y;\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(v) {\n      this.x *= v.x;\n      this.y *= v.y;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      return this;\n    }\n  }, {\n    key: \"divide\",\n    value: function divide(v) {\n      this.x /= v.x;\n      this.y /= v.y;\n      return this;\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(scalar) {\n      return this.multiplyScalar(1 / scalar);\n    }\n  }, {\n    key: \"applyMatrix3\",\n    value: function applyMatrix3(m) {\n      var x = this.x,\n          y = this.y;\n      var e = m.elements;\n      this.x = e[0] * x + e[3] * y + e[6];\n      this.y = e[1] * x + e[4] * y + e[7];\n      return this;\n    }\n  }, {\n    key: \"min\",\n    value: function min(v) {\n      this.x = Math.min(this.x, v.x);\n      this.y = Math.min(this.y, v.y);\n      return this;\n    }\n  }, {\n    key: \"max\",\n    value: function max(v) {\n      this.x = Math.max(this.x, v.x);\n      this.y = Math.max(this.y, v.y);\n      return this;\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(min, max) {\n      // assumes min < max, componentwise\n      this.x = Math.max(min.x, Math.min(max.x, this.x));\n      this.y = Math.max(min.y, Math.min(max.y, this.y));\n      return this;\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(minVal, maxVal) {\n      this.x = Math.max(minVal, Math.min(maxVal, this.x));\n      this.y = Math.max(minVal, Math.min(maxVal, this.y));\n      return this;\n    }\n  }, {\n    key: \"clampLength\",\n    value: function clampLength(min, max) {\n      var length = this.length();\n      return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n    }\n  }, {\n    key: \"floor\",\n    value: function floor() {\n      this.x = Math.floor(this.x);\n      this.y = Math.floor(this.y);\n      return this;\n    }\n  }, {\n    key: \"ceil\",\n    value: function ceil() {\n      this.x = Math.ceil(this.x);\n      this.y = Math.ceil(this.y);\n      return this;\n    }\n  }, {\n    key: \"round\",\n    value: function round() {\n      this.x = Math.round(this.x);\n      this.y = Math.round(this.y);\n      return this;\n    }\n  }, {\n    key: \"roundToZero\",\n    value: function roundToZero() {\n      this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n      this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n      return this;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      this.x = -this.x;\n      this.y = -this.y;\n      return this;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(v) {\n      return this.x * v.x + this.y * v.y;\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(v) {\n      return this.x * v.y - this.y * v.x;\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.x * this.x + this.y * this.y;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n  }, {\n    key: \"manhattanLength\",\n    value: function manhattanLength() {\n      return Math.abs(this.x) + Math.abs(this.y);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      return this.divideScalar(this.length() || 1);\n    }\n  }, {\n    key: \"angle\",\n    value: function angle() {\n      // computes the angle in radians with respect to the positive x-axis\n      var angle = Math.atan2(-this.y, -this.x) + Math.PI;\n      return angle;\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(v) {\n      return Math.sqrt(this.distanceToSquared(v));\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(v) {\n      var dx = this.x - v.x,\n          dy = this.y - v.y;\n      return dx * dx + dy * dy;\n    }\n  }, {\n    key: \"manhattanDistanceTo\",\n    value: function manhattanDistanceTo(v) {\n      return Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\n    }\n  }, {\n    key: \"setLength\",\n    value: function setLength(length) {\n      return this.normalize().multiplyScalar(length);\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(v, alpha) {\n      this.x += (v.x - this.x) * alpha;\n      this.y += (v.y - this.y) * alpha;\n      return this;\n    }\n  }, {\n    key: \"lerpVectors\",\n    value: function lerpVectors(v1, v2, alpha) {\n      this.x = v1.x + (v2.x - v1.x) * alpha;\n      this.y = v1.y + (v2.y - v1.y) * alpha;\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v) {\n      return v.x === this.x && v.y === this.y;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.x = array[offset];\n      this.y = array[offset + 1];\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this.x;\n      array[offset + 1] = this.y;\n      return array;\n    }\n  }, {\n    key: \"fromBufferAttribute\",\n    value: function fromBufferAttribute(attribute, index, offset) {\n      if (offset !== undefined) {\n        console.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().');\n      }\n\n      this.x = attribute.getX(index);\n      this.y = attribute.getY(index);\n      return this;\n    }\n  }, {\n    key: \"rotateAround\",\n    value: function rotateAround(center, angle) {\n      var c = Math.cos(angle),\n          s = Math.sin(angle);\n      var x = this.x - center.x;\n      var y = this.y - center.y;\n      this.x = x * c - y * s + center.x;\n      this.y = x * s + y * c + center.y;\n      return this;\n    }\n  }, {\n    key: \"random\",\n    value: function random() {\n      this.x = Math.random();\n      this.y = Math.random();\n      return this;\n    }\n  }]);\n\n  return Vector2;\n}();\n\nVector2.prototype.isVector2 = true;\n\nvar Matrix3 = /*#__PURE__*/function () {\n  function Matrix3() {\n    _classCallCheck(this, Matrix3);\n\n    this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n    if (arguments.length > 0) {\n      console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.');\n    }\n  }\n\n  _createClass(Matrix3, [{\n    key: \"set\",\n    value: function set(n11, n12, n13, n21, n22, n23, n31, n32, n33) {\n      var te = this.elements;\n      te[0] = n11;\n      te[1] = n21;\n      te[2] = n31;\n      te[3] = n12;\n      te[4] = n22;\n      te[5] = n32;\n      te[6] = n13;\n      te[7] = n23;\n      te[8] = n33;\n      return this;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(m) {\n      var te = this.elements;\n      var me = m.elements;\n      te[0] = me[0];\n      te[1] = me[1];\n      te[2] = me[2];\n      te[3] = me[3];\n      te[4] = me[4];\n      te[5] = me[5];\n      te[6] = me[6];\n      te[7] = me[7];\n      te[8] = me[8];\n      return this;\n    }\n  }, {\n    key: \"extractBasis\",\n    value: function extractBasis(xAxis, yAxis, zAxis) {\n      xAxis.setFromMatrix3Column(this, 0);\n      yAxis.setFromMatrix3Column(this, 1);\n      zAxis.setFromMatrix3Column(this, 2);\n      return this;\n    }\n  }, {\n    key: \"setFromMatrix4\",\n    value: function setFromMatrix4(m) {\n      var me = m.elements;\n      this.set(me[0], me[4], me[8], me[1], me[5], me[9], me[2], me[6], me[10]);\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(m) {\n      return this.multiplyMatrices(this, m);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(m) {\n      return this.multiplyMatrices(m, this);\n    }\n  }, {\n    key: \"multiplyMatrices\",\n    value: function multiplyMatrices(a, b) {\n      var ae = a.elements;\n      var be = b.elements;\n      var te = this.elements;\n      var a11 = ae[0],\n          a12 = ae[3],\n          a13 = ae[6];\n      var a21 = ae[1],\n          a22 = ae[4],\n          a23 = ae[7];\n      var a31 = ae[2],\n          a32 = ae[5],\n          a33 = ae[8];\n      var b11 = be[0],\n          b12 = be[3],\n          b13 = be[6];\n      var b21 = be[1],\n          b22 = be[4],\n          b23 = be[7];\n      var b31 = be[2],\n          b32 = be[5],\n          b33 = be[8];\n      te[0] = a11 * b11 + a12 * b21 + a13 * b31;\n      te[3] = a11 * b12 + a12 * b22 + a13 * b32;\n      te[6] = a11 * b13 + a12 * b23 + a13 * b33;\n      te[1] = a21 * b11 + a22 * b21 + a23 * b31;\n      te[4] = a21 * b12 + a22 * b22 + a23 * b32;\n      te[7] = a21 * b13 + a22 * b23 + a23 * b33;\n      te[2] = a31 * b11 + a32 * b21 + a33 * b31;\n      te[5] = a31 * b12 + a32 * b22 + a33 * b32;\n      te[8] = a31 * b13 + a32 * b23 + a33 * b33;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(s) {\n      var te = this.elements;\n      te[0] *= s;\n      te[3] *= s;\n      te[6] *= s;\n      te[1] *= s;\n      te[4] *= s;\n      te[7] *= s;\n      te[2] *= s;\n      te[5] *= s;\n      te[8] *= s;\n      return this;\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      var te = this.elements;\n      var a = te[0],\n          b = te[1],\n          c = te[2],\n          d = te[3],\n          e = te[4],\n          f = te[5],\n          g = te[6],\n          h = te[7],\n          i = te[8];\n      return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      var te = this.elements,\n          n11 = te[0],\n          n21 = te[1],\n          n31 = te[2],\n          n12 = te[3],\n          n22 = te[4],\n          n32 = te[5],\n          n13 = te[6],\n          n23 = te[7],\n          n33 = te[8],\n          t11 = n33 * n22 - n32 * n23,\n          t12 = n32 * n13 - n33 * n12,\n          t13 = n23 * n12 - n22 * n13,\n          det = n11 * t11 + n21 * t12 + n31 * t13;\n      if (det === 0) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);\n      var detInv = 1 / det;\n      te[0] = t11 * detInv;\n      te[1] = (n31 * n23 - n33 * n21) * detInv;\n      te[2] = (n32 * n21 - n31 * n22) * detInv;\n      te[3] = t12 * detInv;\n      te[4] = (n33 * n11 - n31 * n13) * detInv;\n      te[5] = (n31 * n12 - n32 * n11) * detInv;\n      te[6] = t13 * detInv;\n      te[7] = (n21 * n13 - n23 * n11) * detInv;\n      te[8] = (n22 * n11 - n21 * n12) * detInv;\n      return this;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      var tmp;\n      var m = this.elements;\n      tmp = m[1];\n      m[1] = m[3];\n      m[3] = tmp;\n      tmp = m[2];\n      m[2] = m[6];\n      m[6] = tmp;\n      tmp = m[5];\n      m[5] = m[7];\n      m[7] = tmp;\n      return this;\n    }\n  }, {\n    key: \"getNormalMatrix\",\n    value: function getNormalMatrix(matrix4) {\n      return this.setFromMatrix4(matrix4).invert().transpose();\n    }\n  }, {\n    key: \"transposeIntoArray\",\n    value: function transposeIntoArray(r) {\n      var m = this.elements;\n      r[0] = m[0];\n      r[1] = m[3];\n      r[2] = m[6];\n      r[3] = m[1];\n      r[4] = m[4];\n      r[5] = m[7];\n      r[6] = m[2];\n      r[7] = m[5];\n      r[8] = m[8];\n      return this;\n    }\n  }, {\n    key: \"setUvTransform\",\n    value: function setUvTransform(tx, ty, sx, sy, rotation, cx, cy) {\n      var c = Math.cos(rotation);\n      var s = Math.sin(rotation);\n      this.set(sx * c, sx * s, -sx * (c * cx + s * cy) + cx + tx, -sy * s, sy * c, -sy * (-s * cx + c * cy) + cy + ty, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(sx, sy) {\n      var te = this.elements;\n      te[0] *= sx;\n      te[3] *= sx;\n      te[6] *= sx;\n      te[1] *= sy;\n      te[4] *= sy;\n      te[7] *= sy;\n      return this;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(theta) {\n      var c = Math.cos(theta);\n      var s = Math.sin(theta);\n      var te = this.elements;\n      var a11 = te[0],\n          a12 = te[3],\n          a13 = te[6];\n      var a21 = te[1],\n          a22 = te[4],\n          a23 = te[7];\n      te[0] = c * a11 + s * a21;\n      te[3] = c * a12 + s * a22;\n      te[6] = c * a13 + s * a23;\n      te[1] = -s * a11 + c * a21;\n      te[4] = -s * a12 + c * a22;\n      te[7] = -s * a13 + c * a23;\n      return this;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(tx, ty) {\n      var te = this.elements;\n      te[0] += tx * te[2];\n      te[3] += tx * te[5];\n      te[6] += tx * te[8];\n      te[1] += ty * te[2];\n      te[4] += ty * te[5];\n      te[7] += ty * te[8];\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(matrix) {\n      var te = this.elements;\n      var me = matrix.elements;\n\n      for (var _i10 = 0; _i10 < 9; _i10++) {\n        if (te[_i10] !== me[_i10]) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var _i11 = 0; _i11 < 9; _i11++) {\n        this.elements[_i11] = array[_i11 + offset];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var te = this.elements;\n      array[offset] = te[0];\n      array[offset + 1] = te[1];\n      array[offset + 2] = te[2];\n      array[offset + 3] = te[3];\n      array[offset + 4] = te[4];\n      array[offset + 5] = te[5];\n      array[offset + 6] = te[6];\n      array[offset + 7] = te[7];\n      array[offset + 8] = te[8];\n      return array;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().fromArray(this.elements);\n    }\n  }]);\n\n  return Matrix3;\n}();\n\nMatrix3.prototype.isMatrix3 = true;\n\nvar _canvas;\n\nvar ImageUtils = /*#__PURE__*/function () {\n  function ImageUtils() {\n    _classCallCheck(this, ImageUtils);\n  }\n\n  _createClass(ImageUtils, null, [{\n    key: \"getDataURL\",\n    value: function getDataURL(image) {\n      if (/^data:/i.test(image.src)) {\n        return image.src;\n      }\n\n      if (typeof HTMLCanvasElement == 'undefined') {\n        return image.src;\n      }\n\n      var canvas;\n\n      if (image instanceof HTMLCanvasElement) {\n        canvas = image;\n      } else {\n        if (_canvas === undefined) _canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n        _canvas.width = image.width;\n        _canvas.height = image.height;\n\n        var context = _canvas.getContext('2d');\n\n        if (image instanceof ImageData) {\n          context.putImageData(image, 0, 0);\n        } else {\n          context.drawImage(image, 0, 0, image.width, image.height);\n        }\n\n        canvas = _canvas;\n      }\n\n      if (canvas.width > 2048 || canvas.height > 2048) {\n        console.warn('THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image);\n        return canvas.toDataURL('image/jpeg', 0.6);\n      } else {\n        return canvas.toDataURL('image/png');\n      }\n    }\n  }]);\n\n  return ImageUtils;\n}();\n\nvar textureId = 0;\n\nvar Texture$1 = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(Texture$1, _EventDispatcher);\n\n  var _super3 = _createSuper(Texture$1);\n\n  function Texture$1() {\n    var _this10;\n\n    var image = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Texture$1.DEFAULT_IMAGE;\n    var mapping = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Texture$1.DEFAULT_MAPPING;\n    var wrapS = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ClampToEdgeWrapping;\n    var wrapT = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ClampToEdgeWrapping;\n    var magFilter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : LinearFilter;\n    var minFilter = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : LinearMipmapLinearFilter;\n    var format = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : RGBAFormat;\n    var type = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : UnsignedByteType;\n    var anisotropy = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 1;\n    var encoding = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : LinearEncoding;\n\n    _classCallCheck(this, Texture$1);\n\n    _this10 = _super3.call(this);\n    Object.defineProperty(_assertThisInitialized(_this10), 'id', {\n      value: textureId++\n    });\n    _this10.uuid = generateUUID();\n    _this10.name = '';\n    _this10.image = image;\n    _this10.mipmaps = [];\n    _this10.mapping = mapping;\n    _this10.wrapS = wrapS;\n    _this10.wrapT = wrapT;\n    _this10.magFilter = magFilter;\n    _this10.minFilter = minFilter;\n    _this10.anisotropy = anisotropy;\n    _this10.format = format;\n    _this10.internalFormat = null;\n    _this10.type = type;\n    _this10.offset = new Vector2(0, 0);\n    _this10.repeat = new Vector2(1, 1);\n    _this10.center = new Vector2(0, 0);\n    _this10.rotation = 0;\n    _this10.matrixAutoUpdate = true;\n    _this10.matrix = new Matrix3();\n    _this10.generateMipmaps = true;\n    _this10.premultiplyAlpha = false;\n    _this10.flipY = true;\n    _this10.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n    // Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n    //\n    // Also changing the encoding after already used by a Material will not automatically make the Material\n    // update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\n    _this10.encoding = encoding;\n    _this10.version = 0;\n    _this10.onUpdate = null;\n    _this10.isRenderTargetTexture = false;\n    return _this10;\n  }\n\n  _createClass(Texture$1, [{\n    key: \"updateMatrix\",\n    value: function updateMatrix() {\n      this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.name = source.name;\n      this.image = source.image;\n      this.mipmaps = source.mipmaps.slice(0);\n      this.mapping = source.mapping;\n      this.wrapS = source.wrapS;\n      this.wrapT = source.wrapT;\n      this.magFilter = source.magFilter;\n      this.minFilter = source.minFilter;\n      this.anisotropy = source.anisotropy;\n      this.format = source.format;\n      this.internalFormat = source.internalFormat;\n      this.type = source.type;\n      this.offset.copy(source.offset);\n      this.repeat.copy(source.repeat);\n      this.center.copy(source.center);\n      this.rotation = source.rotation;\n      this.matrixAutoUpdate = source.matrixAutoUpdate;\n      this.matrix.copy(source.matrix);\n      this.generateMipmaps = source.generateMipmaps;\n      this.premultiplyAlpha = source.premultiplyAlpha;\n      this.flipY = source.flipY;\n      this.unpackAlignment = source.unpackAlignment;\n      this.encoding = source.encoding;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var isRootObject = meta === undefined || typeof meta === 'string';\n\n      if (!isRootObject && meta.textures[this.uuid] !== undefined) {\n        return meta.textures[this.uuid];\n      }\n\n      var output = {\n        metadata: {\n          version: 4.5,\n          type: 'Texture',\n          generator: 'Texture.toJSON'\n        },\n        uuid: this.uuid,\n        name: this.name,\n        mapping: this.mapping,\n        repeat: [this.repeat.x, this.repeat.y],\n        offset: [this.offset.x, this.offset.y],\n        center: [this.center.x, this.center.y],\n        rotation: this.rotation,\n        wrap: [this.wrapS, this.wrapT],\n        format: this.format,\n        type: this.type,\n        encoding: this.encoding,\n        minFilter: this.minFilter,\n        magFilter: this.magFilter,\n        anisotropy: this.anisotropy,\n        flipY: this.flipY,\n        premultiplyAlpha: this.premultiplyAlpha,\n        unpackAlignment: this.unpackAlignment\n      };\n\n      if (this.image !== undefined) {\n        // TODO: Move to THREE.Image\n        var image = this.image;\n\n        if (image.uuid === undefined) {\n          image.uuid = generateUUID(); // UGH\n        }\n\n        if (!isRootObject && meta.images[image.uuid] === undefined) {\n          var url;\n\n          if (Array.isArray(image)) {\n            // process array of images e.g. CubeTexture\n            url = [];\n\n            for (var _i12 = 0, _l3 = image.length; _i12 < _l3; _i12++) {\n              // check cube texture with data textures\n              if (image[_i12].isDataTexture) {\n                url.push(serializeImage(image[_i12].image));\n              } else {\n                url.push(serializeImage(image[_i12]));\n              }\n            }\n          } else {\n            // process single image\n            url = serializeImage(image);\n          }\n\n          meta.images[image.uuid] = {\n            uuid: image.uuid,\n            url: url\n          };\n        }\n\n        output.image = image.uuid;\n      }\n\n      if (!isRootObject) {\n        meta.textures[this.uuid] = output;\n      }\n\n      return output;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }, {\n    key: \"transformUv\",\n    value: function transformUv(uv) {\n      if (this.mapping !== UVMapping) return uv;\n      uv.applyMatrix3(this.matrix);\n\n      if (uv.x < 0 || uv.x > 1) {\n        switch (this.wrapS) {\n          case RepeatWrapping:\n            uv.x = uv.x - Math.floor(uv.x);\n            break;\n\n          case ClampToEdgeWrapping:\n            uv.x = uv.x < 0 ? 0 : 1;\n            break;\n\n          case MirroredRepeatWrapping:\n            if (Math.abs(Math.floor(uv.x) % 2) === 1) {\n              uv.x = Math.ceil(uv.x) - uv.x;\n            } else {\n              uv.x = uv.x - Math.floor(uv.x);\n            }\n\n            break;\n        }\n      }\n\n      if (uv.y < 0 || uv.y > 1) {\n        switch (this.wrapT) {\n          case RepeatWrapping:\n            uv.y = uv.y - Math.floor(uv.y);\n            break;\n\n          case ClampToEdgeWrapping:\n            uv.y = uv.y < 0 ? 0 : 1;\n            break;\n\n          case MirroredRepeatWrapping:\n            if (Math.abs(Math.floor(uv.y) % 2) === 1) {\n              uv.y = Math.ceil(uv.y) - uv.y;\n            } else {\n              uv.y = uv.y - Math.floor(uv.y);\n            }\n\n            break;\n        }\n      }\n\n      if (this.flipY) {\n        uv.y = 1 - uv.y;\n      }\n\n      return uv;\n    }\n  }, {\n    key: \"needsUpdate\",\n    set: function set(value) {\n      if (value === true) this.version++;\n    }\n  }]);\n\n  return Texture$1;\n}(EventDispatcher);\n\nTexture$1.DEFAULT_IMAGE = undefined;\nTexture$1.DEFAULT_MAPPING = UVMapping;\nTexture$1.prototype.isTexture = true;\n\nfunction serializeImage(image) {\n  if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    // default images\n    return ImageUtils.getDataURL(image);\n  } else {\n    if (image.data) {\n      // images of DataTexture\n      return {\n        data: Array.prototype.slice.call(image.data),\n        width: image.width,\n        height: image.height,\n        type: image.data.constructor.name\n      };\n    } else {\n      console.warn('THREE.Texture: Unable to serialize Texture.');\n      return {};\n    }\n  }\n}\n\nvar Vector4 = /*#__PURE__*/function () {\n  function Vector4() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Vector4);\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n\n  _createClass(Vector4, [{\n    key: \"width\",\n    get: function get() {\n      return this.z;\n    },\n    set: function set(value) {\n      this.z = value;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.w;\n    },\n    set: function set(value) {\n      this.w = value;\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      this.w = w;\n      return this;\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(scalar) {\n      this.x = scalar;\n      this.y = scalar;\n      this.z = scalar;\n      this.w = scalar;\n      return this;\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(x) {\n      this.x = x;\n      return this;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(y) {\n      this.y = y;\n      return this;\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(z) {\n      this.z = z;\n      return this;\n    }\n  }, {\n    key: \"setW\",\n    value: function setW(w) {\n      this.w = w;\n      return this;\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(index, value) {\n      switch (index) {\n        case 0:\n          this.x = value;\n          break;\n\n        case 1:\n          this.y = value;\n          break;\n\n        case 2:\n          this.z = value;\n          break;\n\n        case 3:\n          this.w = value;\n          break;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(index) {\n      switch (index) {\n        case 0:\n          return this.x;\n\n        case 1:\n          return this.y;\n\n        case 2:\n          return this.z;\n\n        case 3:\n          return this.w;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.x, this.y, this.z, this.w);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(v) {\n      this.x = v.x;\n      this.y = v.y;\n      this.z = v.z;\n      this.w = v.w !== undefined ? v.w : 1;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n        return this.addVectors(v, w);\n      }\n\n      this.x += v.x;\n      this.y += v.y;\n      this.z += v.z;\n      this.w += v.w;\n      return this;\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(s) {\n      this.x += s;\n      this.y += s;\n      this.z += s;\n      this.w += s;\n      return this;\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      this.x = a.x + b.x;\n      this.y = a.y + b.y;\n      this.z = a.z + b.z;\n      this.w = a.w + b.w;\n      return this;\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(v, s) {\n      this.x += v.x * s;\n      this.y += v.y * s;\n      this.z += v.z * s;\n      this.w += v.w * s;\n      return this;\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n        return this.subVectors(v, w);\n      }\n\n      this.x -= v.x;\n      this.y -= v.y;\n      this.z -= v.z;\n      this.w -= v.w;\n      return this;\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(s) {\n      this.x -= s;\n      this.y -= s;\n      this.z -= s;\n      this.w -= s;\n      return this;\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      this.x = a.x - b.x;\n      this.y = a.y - b.y;\n      this.z = a.z - b.z;\n      this.w = a.w - b.w;\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(v) {\n      this.x *= v.x;\n      this.y *= v.y;\n      this.z *= v.z;\n      this.w *= v.w;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      this.z *= scalar;\n      this.w *= scalar;\n      return this;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(m) {\n      var x = this.x,\n          y = this.y,\n          z = this.z,\n          w = this.w;\n      var e = m.elements;\n      this.x = e[0] * x + e[4] * y + e[8] * z + e[12] * w;\n      this.y = e[1] * x + e[5] * y + e[9] * z + e[13] * w;\n      this.z = e[2] * x + e[6] * y + e[10] * z + e[14] * w;\n      this.w = e[3] * x + e[7] * y + e[11] * z + e[15] * w;\n      return this;\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(scalar) {\n      return this.multiplyScalar(1 / scalar);\n    }\n  }, {\n    key: \"setAxisAngleFromQuaternion\",\n    value: function setAxisAngleFromQuaternion(q) {\n      // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n      // q is assumed to be normalized\n      this.w = 2 * Math.acos(q.w);\n      var s = Math.sqrt(1 - q.w * q.w);\n\n      if (s < 0.0001) {\n        this.x = 1;\n        this.y = 0;\n        this.z = 0;\n      } else {\n        this.x = q.x / s;\n        this.y = q.y / s;\n        this.z = q.z / s;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setAxisAngleFromRotationMatrix\",\n    value: function setAxisAngleFromRotationMatrix(m) {\n      // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n      // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n      var angle, x, y, z; // variables for result\n\n      var epsilon = 0.01,\n          // margin to allow for rounding errors\n      epsilon2 = 0.1,\n          // margin to distinguish between 0 and 180 degrees\n      te = m.elements,\n          m11 = te[0],\n          m12 = te[4],\n          m13 = te[8],\n          m21 = te[1],\n          m22 = te[5],\n          m23 = te[9],\n          m31 = te[2],\n          m32 = te[6],\n          m33 = te[10];\n\n      if (Math.abs(m12 - m21) < epsilon && Math.abs(m13 - m31) < epsilon && Math.abs(m23 - m32) < epsilon) {\n        // singularity found\n        // first check for identity matrix which must have +1 for all terms\n        // in leading diagonal and zero in other terms\n        if (Math.abs(m12 + m21) < epsilon2 && Math.abs(m13 + m31) < epsilon2 && Math.abs(m23 + m32) < epsilon2 && Math.abs(m11 + m22 + m33 - 3) < epsilon2) {\n          // this singularity is identity matrix so angle = 0\n          this.set(1, 0, 0, 0);\n          return this; // zero angle, arbitrary axis\n        } // otherwise this singularity is angle = 180\n\n\n        angle = Math.PI;\n        var xx = (m11 + 1) / 2;\n        var yy = (m22 + 1) / 2;\n        var zz = (m33 + 1) / 2;\n        var xy = (m12 + m21) / 4;\n        var xz = (m13 + m31) / 4;\n        var yz = (m23 + m32) / 4;\n\n        if (xx > yy && xx > zz) {\n          // m11 is the largest diagonal term\n          if (xx < epsilon) {\n            x = 0;\n            y = 0.707106781;\n            z = 0.707106781;\n          } else {\n            x = Math.sqrt(xx);\n            y = xy / x;\n            z = xz / x;\n          }\n        } else if (yy > zz) {\n          // m22 is the largest diagonal term\n          if (yy < epsilon) {\n            x = 0.707106781;\n            y = 0;\n            z = 0.707106781;\n          } else {\n            y = Math.sqrt(yy);\n            x = xy / y;\n            z = yz / y;\n          }\n        } else {\n          // m33 is the largest diagonal term so base result on this\n          if (zz < epsilon) {\n            x = 0.707106781;\n            y = 0.707106781;\n            z = 0;\n          } else {\n            z = Math.sqrt(zz);\n            x = xz / z;\n            y = yz / z;\n          }\n        }\n\n        this.set(x, y, z, angle);\n        return this; // return 180 deg rotation\n      } // as we have reached here there are no singularities so we can handle normally\n\n\n      var s = Math.sqrt((m32 - m23) * (m32 - m23) + (m13 - m31) * (m13 - m31) + (m21 - m12) * (m21 - m12)); // used to normalize\n\n      if (Math.abs(s) < 0.001) s = 1; // prevent divide by zero, should not happen if matrix is orthogonal and should be\n      // caught by singularity test above, but I've left it in just in case\n\n      this.x = (m32 - m23) / s;\n      this.y = (m13 - m31) / s;\n      this.z = (m21 - m12) / s;\n      this.w = Math.acos((m11 + m22 + m33 - 1) / 2);\n      return this;\n    }\n  }, {\n    key: \"min\",\n    value: function min(v) {\n      this.x = Math.min(this.x, v.x);\n      this.y = Math.min(this.y, v.y);\n      this.z = Math.min(this.z, v.z);\n      this.w = Math.min(this.w, v.w);\n      return this;\n    }\n  }, {\n    key: \"max\",\n    value: function max(v) {\n      this.x = Math.max(this.x, v.x);\n      this.y = Math.max(this.y, v.y);\n      this.z = Math.max(this.z, v.z);\n      this.w = Math.max(this.w, v.w);\n      return this;\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(min, max) {\n      // assumes min < max, componentwise\n      this.x = Math.max(min.x, Math.min(max.x, this.x));\n      this.y = Math.max(min.y, Math.min(max.y, this.y));\n      this.z = Math.max(min.z, Math.min(max.z, this.z));\n      this.w = Math.max(min.w, Math.min(max.w, this.w));\n      return this;\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(minVal, maxVal) {\n      this.x = Math.max(minVal, Math.min(maxVal, this.x));\n      this.y = Math.max(minVal, Math.min(maxVal, this.y));\n      this.z = Math.max(minVal, Math.min(maxVal, this.z));\n      this.w = Math.max(minVal, Math.min(maxVal, this.w));\n      return this;\n    }\n  }, {\n    key: \"clampLength\",\n    value: function clampLength(min, max) {\n      var length = this.length();\n      return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n    }\n  }, {\n    key: \"floor\",\n    value: function floor() {\n      this.x = Math.floor(this.x);\n      this.y = Math.floor(this.y);\n      this.z = Math.floor(this.z);\n      this.w = Math.floor(this.w);\n      return this;\n    }\n  }, {\n    key: \"ceil\",\n    value: function ceil() {\n      this.x = Math.ceil(this.x);\n      this.y = Math.ceil(this.y);\n      this.z = Math.ceil(this.z);\n      this.w = Math.ceil(this.w);\n      return this;\n    }\n  }, {\n    key: \"round\",\n    value: function round() {\n      this.x = Math.round(this.x);\n      this.y = Math.round(this.y);\n      this.z = Math.round(this.z);\n      this.w = Math.round(this.w);\n      return this;\n    }\n  }, {\n    key: \"roundToZero\",\n    value: function roundToZero() {\n      this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n      this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n      this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z);\n      this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w);\n      return this;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      this.x = -this.x;\n      this.y = -this.y;\n      this.z = -this.z;\n      this.w = -this.w;\n      return this;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(v) {\n      return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    }\n  }, {\n    key: \"manhattanLength\",\n    value: function manhattanLength() {\n      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      return this.divideScalar(this.length() || 1);\n    }\n  }, {\n    key: \"setLength\",\n    value: function setLength(length) {\n      return this.normalize().multiplyScalar(length);\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(v, alpha) {\n      this.x += (v.x - this.x) * alpha;\n      this.y += (v.y - this.y) * alpha;\n      this.z += (v.z - this.z) * alpha;\n      this.w += (v.w - this.w) * alpha;\n      return this;\n    }\n  }, {\n    key: \"lerpVectors\",\n    value: function lerpVectors(v1, v2, alpha) {\n      this.x = v1.x + (v2.x - v1.x) * alpha;\n      this.y = v1.y + (v2.y - v1.y) * alpha;\n      this.z = v1.z + (v2.z - v1.z) * alpha;\n      this.w = v1.w + (v2.w - v1.w) * alpha;\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v) {\n      return v.x === this.x && v.y === this.y && v.z === this.z && v.w === this.w;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.x = array[offset];\n      this.y = array[offset + 1];\n      this.z = array[offset + 2];\n      this.w = array[offset + 3];\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this.x;\n      array[offset + 1] = this.y;\n      array[offset + 2] = this.z;\n      array[offset + 3] = this.w;\n      return array;\n    }\n  }, {\n    key: \"fromBufferAttribute\",\n    value: function fromBufferAttribute(attribute, index, offset) {\n      if (offset !== undefined) {\n        console.warn('THREE.Vector4: offset has been removed from .fromBufferAttribute().');\n      }\n\n      this.x = attribute.getX(index);\n      this.y = attribute.getY(index);\n      this.z = attribute.getZ(index);\n      this.w = attribute.getW(index);\n      return this;\n    }\n  }, {\n    key: \"random\",\n    value: function random() {\n      this.x = Math.random();\n      this.y = Math.random();\n      this.z = Math.random();\n      this.w = Math.random();\n      return this;\n    }\n  }]);\n\n  return Vector4;\n}();\n\nVector4.prototype.isVector4 = true;\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\n\nvar WebGLRenderTarget = /*#__PURE__*/function (_EventDispatcher2) {\n  _inherits(WebGLRenderTarget, _EventDispatcher2);\n\n  var _super4 = _createSuper(WebGLRenderTarget);\n\n  function WebGLRenderTarget(width, height) {\n    var _this11;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, WebGLRenderTarget);\n\n    _this11 = _super4.call(this);\n    _this11.width = width;\n    _this11.height = height;\n    _this11.depth = 1;\n    _this11.scissor = new Vector4(0, 0, width, height);\n    _this11.scissorTest = false;\n    _this11.viewport = new Vector4(0, 0, width, height);\n    _this11.texture = new Texture$1(undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding);\n    _this11.texture.isRenderTargetTexture = true;\n    _this11.texture.image = {\n      width: width,\n      height: height,\n      depth: 1\n    };\n    _this11.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n    _this11.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n    _this11.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n    _this11.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n    _this11.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n    return _this11;\n  }\n\n  _createClass(WebGLRenderTarget, [{\n    key: \"setTexture\",\n    value: function setTexture(texture) {\n      texture.image = {\n        width: this.width,\n        height: this.height,\n        depth: this.depth\n      };\n      this.texture = texture;\n    }\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n      if (this.width !== width || this.height !== height || this.depth !== depth) {\n        this.width = width;\n        this.height = height;\n        this.depth = depth;\n        this.texture.image.width = width;\n        this.texture.image.height = height;\n        this.texture.image.depth = depth;\n        this.dispose();\n      }\n\n      this.viewport.set(0, 0, width, height);\n      this.scissor.set(0, 0, width, height);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.width = source.width;\n      this.height = source.height;\n      this.depth = source.depth;\n      this.viewport.copy(source.viewport);\n      this.texture = source.texture.clone();\n      this.texture.image = _objectSpread({}, this.texture.image); // See #20328.\n\n      this.depthBuffer = source.depthBuffer;\n      this.stencilBuffer = source.stencilBuffer;\n      this.depthTexture = source.depthTexture;\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }]);\n\n  return WebGLRenderTarget;\n}(EventDispatcher);\n\nWebGLRenderTarget.prototype.isWebGLRenderTarget = true;\n\nvar WebGLMultipleRenderTargets = /*#__PURE__*/function (_WebGLRenderTarget) {\n  _inherits(WebGLMultipleRenderTargets, _WebGLRenderTarget);\n\n  var _super5 = _createSuper(WebGLMultipleRenderTargets);\n\n  function WebGLMultipleRenderTargets(width, height, count) {\n    var _this12;\n\n    _classCallCheck(this, WebGLMultipleRenderTargets);\n\n    _this12 = _super5.call(this, width, height);\n    var texture = _this12.texture;\n    _this12.texture = [];\n\n    for (var _i13 = 0; _i13 < count; _i13++) {\n      _this12.texture[_i13] = texture.clone();\n    }\n\n    return _this12;\n  }\n\n  _createClass(WebGLMultipleRenderTargets, [{\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n      if (this.width !== width || this.height !== height || this.depth !== depth) {\n        this.width = width;\n        this.height = height;\n        this.depth = depth;\n\n        for (var _i14 = 0, il = this.texture.length; _i14 < il; _i14++) {\n          this.texture[_i14].image.width = width;\n          this.texture[_i14].image.height = height;\n          this.texture[_i14].image.depth = depth;\n        }\n\n        this.dispose();\n      }\n\n      this.viewport.set(0, 0, width, height);\n      this.scissor.set(0, 0, width, height);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.dispose();\n      this.width = source.width;\n      this.height = source.height;\n      this.depth = source.depth;\n      this.viewport.set(0, 0, this.width, this.height);\n      this.scissor.set(0, 0, this.width, this.height);\n      this.depthBuffer = source.depthBuffer;\n      this.stencilBuffer = source.stencilBuffer;\n      this.depthTexture = source.depthTexture;\n      this.texture.length = 0;\n\n      for (var _i15 = 0, il = source.texture.length; _i15 < il; _i15++) {\n        this.texture[_i15] = source.texture[_i15].clone();\n      }\n\n      return this;\n    }\n  }]);\n\n  return WebGLMultipleRenderTargets;\n}(WebGLRenderTarget);\n\nWebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets = true;\n\nvar WebGLMultisampleRenderTarget = /*#__PURE__*/function (_WebGLRenderTarget2) {\n  _inherits(WebGLMultisampleRenderTarget, _WebGLRenderTarget2);\n\n  var _super6 = _createSuper(WebGLMultisampleRenderTarget);\n\n  function WebGLMultisampleRenderTarget(width, height, options) {\n    var _this13;\n\n    _classCallCheck(this, WebGLMultisampleRenderTarget);\n\n    _this13 = _super6.call(this, width, height, options);\n    _this13.samples = 4;\n    return _this13;\n  }\n\n  _createClass(WebGLMultisampleRenderTarget, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(WebGLMultisampleRenderTarget.prototype), \"copy\", this).call(this, source);\n\n      this.samples = source.samples;\n      return this;\n    }\n  }]);\n\n  return WebGLMultisampleRenderTarget;\n}(WebGLRenderTarget);\n\nWebGLMultisampleRenderTarget.prototype.isWebGLMultisampleRenderTarget = true;\n\nvar Quaternion = /*#__PURE__*/function () {\n  function Quaternion() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this._z;\n    },\n    set: function set(value) {\n      this._z = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this._w;\n    },\n    set: function set(value) {\n      this._w = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this._x = x;\n      this._y = y;\n      this._z = z;\n      this._w = w;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this._x, this._y, this._z, this._w);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(quaternion) {\n      this._x = quaternion.x;\n      this._y = quaternion.y;\n      this._z = quaternion.z;\n      this._w = quaternion.w;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"setFromEuler\",\n    value: function setFromEuler(euler, update) {\n      if (!(euler && euler.isEuler)) {\n        throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');\n      }\n\n      var x = euler._x,\n          y = euler._y,\n          z = euler._z,\n          order = euler._order; // http://www.mathworks.com/matlabcentral/fileexchange/\n      // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n      //\tcontent/SpinCalc.m\n\n      var cos = Math.cos;\n      var sin = Math.sin;\n      var c1 = cos(x / 2);\n      var c2 = cos(y / 2);\n      var c3 = cos(z / 2);\n      var s1 = sin(x / 2);\n      var s2 = sin(y / 2);\n      var s3 = sin(z / 2);\n\n      switch (order) {\n        case 'XYZ':\n          this._x = s1 * c2 * c3 + c1 * s2 * s3;\n          this._y = c1 * s2 * c3 - s1 * c2 * s3;\n          this._z = c1 * c2 * s3 + s1 * s2 * c3;\n          this._w = c1 * c2 * c3 - s1 * s2 * s3;\n          break;\n\n        case 'YXZ':\n          this._x = s1 * c2 * c3 + c1 * s2 * s3;\n          this._y = c1 * s2 * c3 - s1 * c2 * s3;\n          this._z = c1 * c2 * s3 - s1 * s2 * c3;\n          this._w = c1 * c2 * c3 + s1 * s2 * s3;\n          break;\n\n        case 'ZXY':\n          this._x = s1 * c2 * c3 - c1 * s2 * s3;\n          this._y = c1 * s2 * c3 + s1 * c2 * s3;\n          this._z = c1 * c2 * s3 + s1 * s2 * c3;\n          this._w = c1 * c2 * c3 - s1 * s2 * s3;\n          break;\n\n        case 'ZYX':\n          this._x = s1 * c2 * c3 - c1 * s2 * s3;\n          this._y = c1 * s2 * c3 + s1 * c2 * s3;\n          this._z = c1 * c2 * s3 - s1 * s2 * c3;\n          this._w = c1 * c2 * c3 + s1 * s2 * s3;\n          break;\n\n        case 'YZX':\n          this._x = s1 * c2 * c3 + c1 * s2 * s3;\n          this._y = c1 * s2 * c3 + s1 * c2 * s3;\n          this._z = c1 * c2 * s3 - s1 * s2 * c3;\n          this._w = c1 * c2 * c3 - s1 * s2 * s3;\n          break;\n\n        case 'XZY':\n          this._x = s1 * c2 * c3 - c1 * s2 * s3;\n          this._y = c1 * s2 * c3 - s1 * c2 * s3;\n          this._z = c1 * c2 * s3 + s1 * s2 * c3;\n          this._w = c1 * c2 * c3 + s1 * s2 * s3;\n          break;\n\n        default:\n          console.warn('THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order);\n      }\n\n      if (update !== false) this._onChangeCallback();\n      return this;\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, angle) {\n      // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n      // assumes axis is normalized\n      var halfAngle = angle / 2,\n          s = Math.sin(halfAngle);\n      this._x = axis.x * s;\n      this._y = axis.y * s;\n      this._z = axis.z * s;\n      this._w = Math.cos(halfAngle);\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"setFromRotationMatrix\",\n    value: function setFromRotationMatrix(m) {\n      // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n      // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n      var te = m.elements,\n          m11 = te[0],\n          m12 = te[4],\n          m13 = te[8],\n          m21 = te[1],\n          m22 = te[5],\n          m23 = te[9],\n          m31 = te[2],\n          m32 = te[6],\n          m33 = te[10],\n          trace = m11 + m22 + m33;\n\n      if (trace > 0) {\n        var _s4 = 0.5 / Math.sqrt(trace + 1.0);\n\n        this._w = 0.25 / _s4;\n        this._x = (m32 - m23) * _s4;\n        this._y = (m13 - m31) * _s4;\n        this._z = (m21 - m12) * _s4;\n      } else if (m11 > m22 && m11 > m33) {\n        var _s5 = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n\n        this._w = (m32 - m23) / _s5;\n        this._x = 0.25 * _s5;\n        this._y = (m12 + m21) / _s5;\n        this._z = (m13 + m31) / _s5;\n      } else if (m22 > m33) {\n        var _s6 = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n\n        this._w = (m13 - m31) / _s6;\n        this._x = (m12 + m21) / _s6;\n        this._y = 0.25 * _s6;\n        this._z = (m23 + m32) / _s6;\n      } else {\n        var _s7 = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n\n        this._w = (m21 - m12) / _s7;\n        this._x = (m13 + m31) / _s7;\n        this._y = (m23 + m32) / _s7;\n        this._z = 0.25 * _s7;\n      }\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"setFromUnitVectors\",\n    value: function setFromUnitVectors(vFrom, vTo) {\n      // assumes direction vectors vFrom and vTo are normalized\n      var r = vFrom.dot(vTo) + 1;\n\n      if (r < Number.EPSILON) {\n        // vFrom and vTo point in opposite directions\n        r = 0;\n\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          this._x = -vFrom.y;\n          this._y = vFrom.x;\n          this._z = 0;\n          this._w = r;\n        } else {\n          this._x = 0;\n          this._y = -vFrom.z;\n          this._z = vFrom.y;\n          this._w = r;\n        }\n      } else {\n        // crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n        this._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n        this._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n        this._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n        this._w = r;\n      }\n\n      return this.normalize();\n    }\n  }, {\n    key: \"angleTo\",\n    value: function angleTo(q) {\n      return 2 * Math.acos(Math.abs(clamp$1(this.dot(q), -1, 1)));\n    }\n  }, {\n    key: \"rotateTowards\",\n    value: function rotateTowards(q, step) {\n      var angle = this.angleTo(q);\n      if (angle === 0) return this;\n      var t = Math.min(1, step / angle);\n      this.slerp(q, t);\n      return this;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.set(0, 0, 0, 1);\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      // quaternion is assumed to have unit length\n      return this.conjugate();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      this._x *= -1;\n      this._y *= -1;\n      this._z *= -1;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(v) {\n      return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var l = this.length();\n\n      if (l === 0) {\n        this._x = 0;\n        this._y = 0;\n        this._z = 0;\n        this._w = 1;\n      } else {\n        l = 1 / l;\n        this._x = this._x * l;\n        this._y = this._y * l;\n        this._z = this._z * l;\n        this._w = this._w * l;\n      }\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(q, p) {\n      if (p !== undefined) {\n        console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.');\n        return this.multiplyQuaternions(q, p);\n      }\n\n      return this.multiplyQuaternions(this, q);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(q) {\n      return this.multiplyQuaternions(q, this);\n    }\n  }, {\n    key: \"multiplyQuaternions\",\n    value: function multiplyQuaternions(a, b) {\n      // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n      var qax = a._x,\n          qay = a._y,\n          qaz = a._z,\n          qaw = a._w;\n      var qbx = b._x,\n          qby = b._y,\n          qbz = b._z,\n          qbw = b._w;\n      this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n      this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n      this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n      this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(qb, t) {\n      if (t === 0) return this;\n      if (t === 1) return this.copy(qb);\n      var x = this._x,\n          y = this._y,\n          z = this._z,\n          w = this._w; // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n      var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n      if (cosHalfTheta < 0) {\n        this._w = -qb._w;\n        this._x = -qb._x;\n        this._y = -qb._y;\n        this._z = -qb._z;\n        cosHalfTheta = -cosHalfTheta;\n      } else {\n        this.copy(qb);\n      }\n\n      if (cosHalfTheta >= 1.0) {\n        this._w = w;\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        return this;\n      }\n\n      var sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n      if (sqrSinHalfTheta <= Number.EPSILON) {\n        var _s8 = 1 - t;\n\n        this._w = _s8 * w + t * this._w;\n        this._x = _s8 * x + t * this._x;\n        this._y = _s8 * y + t * this._y;\n        this._z = _s8 * z + t * this._z;\n        this.normalize();\n\n        this._onChangeCallback();\n\n        return this;\n      }\n\n      var sinHalfTheta = Math.sqrt(sqrSinHalfTheta);\n      var halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n      var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n          ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n      this._w = w * ratioA + this._w * ratioB;\n      this._x = x * ratioA + this._x * ratioB;\n      this._y = y * ratioA + this._y * ratioB;\n      this._z = z * ratioA + this._z * ratioB;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"slerpQuaternions\",\n    value: function slerpQuaternions(qa, qb, t) {\n      this.copy(qa).slerp(qb, t);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(quaternion) {\n      return quaternion._x === this._x && quaternion._y === this._y && quaternion._z === this._z && quaternion._w === this._w;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this._x = array[offset];\n      this._y = array[offset + 1];\n      this._z = array[offset + 2];\n      this._w = array[offset + 3];\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this._x;\n      array[offset + 1] = this._y;\n      array[offset + 2] = this._z;\n      array[offset + 3] = this._w;\n      return array;\n    }\n  }, {\n    key: \"fromBufferAttribute\",\n    value: function fromBufferAttribute(attribute, index) {\n      this._x = attribute.getX(index);\n      this._y = attribute.getY(index);\n      this._z = attribute.getZ(index);\n      this._w = attribute.getW(index);\n      return this;\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(callback) {\n      this._onChangeCallback = callback;\n      return this;\n    }\n  }, {\n    key: \"_onChangeCallback\",\n    value: function _onChangeCallback() {}\n  }], [{\n    key: \"slerp\",\n    value: function slerp(qa, qb, qm, t) {\n      console.warn('THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.');\n      return qm.slerpQuaternions(qa, qb, t);\n    }\n  }, {\n    key: \"slerpFlat\",\n    value: function slerpFlat(dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t) {\n      // fuzz-free, array-based Quaternion SLERP operation\n      var x0 = src0[srcOffset0 + 0],\n          y0 = src0[srcOffset0 + 1],\n          z0 = src0[srcOffset0 + 2],\n          w0 = src0[srcOffset0 + 3];\n      var x1 = src1[srcOffset1 + 0],\n          y1 = src1[srcOffset1 + 1],\n          z1 = src1[srcOffset1 + 2],\n          w1 = src1[srcOffset1 + 3];\n\n      if (t === 0) {\n        dst[dstOffset + 0] = x0;\n        dst[dstOffset + 1] = y0;\n        dst[dstOffset + 2] = z0;\n        dst[dstOffset + 3] = w0;\n        return;\n      }\n\n      if (t === 1) {\n        dst[dstOffset + 0] = x1;\n        dst[dstOffset + 1] = y1;\n        dst[dstOffset + 2] = z1;\n        dst[dstOffset + 3] = w1;\n        return;\n      }\n\n      if (w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1) {\n        var _s9 = 1 - t;\n\n        var cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n            dir = cos >= 0 ? 1 : -1,\n            sqrSin = 1 - cos * cos; // Skip the Slerp for tiny steps to avoid numeric problems:\n\n        if (sqrSin > Number.EPSILON) {\n          var sin = Math.sqrt(sqrSin),\n              len = Math.atan2(sin, cos * dir);\n          _s9 = Math.sin(_s9 * len) / sin;\n          t = Math.sin(t * len) / sin;\n        }\n\n        var tDir = t * dir;\n        x0 = x0 * _s9 + x1 * tDir;\n        y0 = y0 * _s9 + y1 * tDir;\n        z0 = z0 * _s9 + z1 * tDir;\n        w0 = w0 * _s9 + w1 * tDir; // Normalize in case we just did a lerp:\n\n        if (_s9 === 1 - t) {\n          var _f3 = 1 / Math.sqrt(x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0);\n\n          x0 *= _f3;\n          y0 *= _f3;\n          z0 *= _f3;\n          w0 *= _f3;\n        }\n      }\n\n      dst[dstOffset] = x0;\n      dst[dstOffset + 1] = y0;\n      dst[dstOffset + 2] = z0;\n      dst[dstOffset + 3] = w0;\n    }\n  }, {\n    key: \"multiplyQuaternionsFlat\",\n    value: function multiplyQuaternionsFlat(dst, dstOffset, src0, srcOffset0, src1, srcOffset1) {\n      var x0 = src0[srcOffset0];\n      var y0 = src0[srcOffset0 + 1];\n      var z0 = src0[srcOffset0 + 2];\n      var w0 = src0[srcOffset0 + 3];\n      var x1 = src1[srcOffset1];\n      var y1 = src1[srcOffset1 + 1];\n      var z1 = src1[srcOffset1 + 2];\n      var w1 = src1[srcOffset1 + 3];\n      dst[dstOffset] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n      dst[dstOffset + 1] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n      dst[dstOffset + 2] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n      dst[dstOffset + 3] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n      return dst;\n    }\n  }]);\n\n  return Quaternion;\n}();\n\nQuaternion.prototype.isQuaternion = true;\n\nvar Vector3 = /*#__PURE__*/function () {\n  function Vector3() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      if (z === undefined) z = this.z; // sprite.scale.set(x,y)\n\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(scalar) {\n      this.x = scalar;\n      this.y = scalar;\n      this.z = scalar;\n      return this;\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(x) {\n      this.x = x;\n      return this;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(y) {\n      this.y = y;\n      return this;\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(z) {\n      this.z = z;\n      return this;\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(index, value) {\n      switch (index) {\n        case 0:\n          this.x = value;\n          break;\n\n        case 1:\n          this.y = value;\n          break;\n\n        case 2:\n          this.z = value;\n          break;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(index) {\n      switch (index) {\n        case 0:\n          return this.x;\n\n        case 1:\n          return this.y;\n\n        case 2:\n          return this.z;\n\n        default:\n          throw new Error('index is out of range: ' + index);\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.x, this.y, this.z);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(v) {\n      this.x = v.x;\n      this.y = v.y;\n      this.z = v.z;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n        return this.addVectors(v, w);\n      }\n\n      this.x += v.x;\n      this.y += v.y;\n      this.z += v.z;\n      return this;\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(s) {\n      this.x += s;\n      this.y += s;\n      this.z += s;\n      return this;\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      this.x = a.x + b.x;\n      this.y = a.y + b.y;\n      this.z = a.z + b.z;\n      return this;\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(v, s) {\n      this.x += v.x * s;\n      this.y += v.y * s;\n      this.z += v.z * s;\n      return this;\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n        return this.subVectors(v, w);\n      }\n\n      this.x -= v.x;\n      this.y -= v.y;\n      this.z -= v.z;\n      return this;\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(s) {\n      this.x -= s;\n      this.y -= s;\n      this.z -= s;\n      return this;\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      this.x = a.x - b.x;\n      this.y = a.y - b.y;\n      this.z = a.z - b.z;\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');\n        return this.multiplyVectors(v, w);\n      }\n\n      this.x *= v.x;\n      this.y *= v.y;\n      this.z *= v.z;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      this.z *= scalar;\n      return this;\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      this.x = a.x * b.x;\n      this.y = a.y * b.y;\n      this.z = a.z * b.z;\n      return this;\n    }\n  }, {\n    key: \"applyEuler\",\n    value: function applyEuler(euler) {\n      if (!(euler && euler.isEuler)) {\n        console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.');\n      }\n\n      return this.applyQuaternion(_quaternion$4.setFromEuler(euler));\n    }\n  }, {\n    key: \"applyAxisAngle\",\n    value: function applyAxisAngle(axis, angle) {\n      return this.applyQuaternion(_quaternion$4.setFromAxisAngle(axis, angle));\n    }\n  }, {\n    key: \"applyMatrix3\",\n    value: function applyMatrix3(m) {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      var e = m.elements;\n      this.x = e[0] * x + e[3] * y + e[6] * z;\n      this.y = e[1] * x + e[4] * y + e[7] * z;\n      this.z = e[2] * x + e[5] * y + e[8] * z;\n      return this;\n    }\n  }, {\n    key: \"applyNormalMatrix\",\n    value: function applyNormalMatrix(m) {\n      return this.applyMatrix3(m).normalize();\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(m) {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      var e = m.elements;\n      var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n      this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n      this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n      this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n      return this;\n    }\n  }, {\n    key: \"applyQuaternion\",\n    value: function applyQuaternion(q) {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      var qx = q.x,\n          qy = q.y,\n          qz = q.z,\n          qw = q.w; // calculate quat * vector\n\n      var ix = qw * x + qy * z - qz * y;\n      var iy = qw * y + qz * x - qx * z;\n      var iz = qw * z + qx * y - qy * x;\n      var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n      this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n      this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n      this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n      return this;\n    }\n  }, {\n    key: \"project\",\n    value: function project(camera) {\n      return this.applyMatrix4(camera.matrixWorldInverse).applyMatrix4(camera.projectionMatrix);\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(camera) {\n      return this.applyMatrix4(camera.projectionMatrixInverse).applyMatrix4(camera.matrixWorld);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(m) {\n      // input: THREE.Matrix4 affine matrix\n      // vector interpreted as a direction\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      var e = m.elements;\n      this.x = e[0] * x + e[4] * y + e[8] * z;\n      this.y = e[1] * x + e[5] * y + e[9] * z;\n      this.z = e[2] * x + e[6] * y + e[10] * z;\n      return this.normalize();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide(v) {\n      this.x /= v.x;\n      this.y /= v.y;\n      this.z /= v.z;\n      return this;\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(scalar) {\n      return this.multiplyScalar(1 / scalar);\n    }\n  }, {\n    key: \"min\",\n    value: function min(v) {\n      this.x = Math.min(this.x, v.x);\n      this.y = Math.min(this.y, v.y);\n      this.z = Math.min(this.z, v.z);\n      return this;\n    }\n  }, {\n    key: \"max\",\n    value: function max(v) {\n      this.x = Math.max(this.x, v.x);\n      this.y = Math.max(this.y, v.y);\n      this.z = Math.max(this.z, v.z);\n      return this;\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(min, max) {\n      // assumes min < max, componentwise\n      this.x = Math.max(min.x, Math.min(max.x, this.x));\n      this.y = Math.max(min.y, Math.min(max.y, this.y));\n      this.z = Math.max(min.z, Math.min(max.z, this.z));\n      return this;\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(minVal, maxVal) {\n      this.x = Math.max(minVal, Math.min(maxVal, this.x));\n      this.y = Math.max(minVal, Math.min(maxVal, this.y));\n      this.z = Math.max(minVal, Math.min(maxVal, this.z));\n      return this;\n    }\n  }, {\n    key: \"clampLength\",\n    value: function clampLength(min, max) {\n      var length = this.length();\n      return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n    }\n  }, {\n    key: \"floor\",\n    value: function floor() {\n      this.x = Math.floor(this.x);\n      this.y = Math.floor(this.y);\n      this.z = Math.floor(this.z);\n      return this;\n    }\n  }, {\n    key: \"ceil\",\n    value: function ceil() {\n      this.x = Math.ceil(this.x);\n      this.y = Math.ceil(this.y);\n      this.z = Math.ceil(this.z);\n      return this;\n    }\n  }, {\n    key: \"round\",\n    value: function round() {\n      this.x = Math.round(this.x);\n      this.y = Math.round(this.y);\n      this.z = Math.round(this.z);\n      return this;\n    }\n  }, {\n    key: \"roundToZero\",\n    value: function roundToZero() {\n      this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n      this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n      this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z);\n      return this;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      this.x = -this.x;\n      this.y = -this.y;\n      this.z = -this.z;\n      return this;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(v) {\n      return this.x * v.x + this.y * v.y + this.z * v.z;\n    } // TODO lengthSquared?\n\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n  }, {\n    key: \"manhattanLength\",\n    value: function manhattanLength() {\n      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      return this.divideScalar(this.length() || 1);\n    }\n  }, {\n    key: \"setLength\",\n    value: function setLength(length) {\n      return this.normalize().multiplyScalar(length);\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(v, alpha) {\n      this.x += (v.x - this.x) * alpha;\n      this.y += (v.y - this.y) * alpha;\n      this.z += (v.z - this.z) * alpha;\n      return this;\n    }\n  }, {\n    key: \"lerpVectors\",\n    value: function lerpVectors(v1, v2, alpha) {\n      this.x = v1.x + (v2.x - v1.x) * alpha;\n      this.y = v1.y + (v2.y - v1.y) * alpha;\n      this.z = v1.z + (v2.z - v1.z) * alpha;\n      return this;\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(v, w) {\n      if (w !== undefined) {\n        console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');\n        return this.crossVectors(v, w);\n      }\n\n      return this.crossVectors(this, v);\n    }\n  }, {\n    key: \"crossVectors\",\n    value: function crossVectors(a, b) {\n      var ax = a.x,\n          ay = a.y,\n          az = a.z;\n      var bx = b.x,\n          by = b.y,\n          bz = b.z;\n      this.x = ay * bz - az * by;\n      this.y = az * bx - ax * bz;\n      this.z = ax * by - ay * bx;\n      return this;\n    }\n  }, {\n    key: \"projectOnVector\",\n    value: function projectOnVector(v) {\n      var denominator = v.lengthSq();\n      if (denominator === 0) return this.set(0, 0, 0);\n      var scalar = v.dot(this) / denominator;\n      return this.copy(v).multiplyScalar(scalar);\n    }\n  }, {\n    key: \"projectOnPlane\",\n    value: function projectOnPlane(planeNormal) {\n      _vector$c.copy(this).projectOnVector(planeNormal);\n\n      return this.sub(_vector$c);\n    }\n  }, {\n    key: \"reflect\",\n    value: function reflect(normal) {\n      // reflect incident vector off plane orthogonal to normal\n      // normal is assumed to have unit length\n      return this.sub(_vector$c.copy(normal).multiplyScalar(2 * this.dot(normal)));\n    }\n  }, {\n    key: \"angleTo\",\n    value: function angleTo(v) {\n      var denominator = Math.sqrt(this.lengthSq() * v.lengthSq());\n      if (denominator === 0) return Math.PI / 2;\n      var theta = this.dot(v) / denominator; // clamp, to handle numerical problems\n\n      return Math.acos(clamp$1(theta, -1, 1));\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(v) {\n      return Math.sqrt(this.distanceToSquared(v));\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(v) {\n      var dx = this.x - v.x,\n          dy = this.y - v.y,\n          dz = this.z - v.z;\n      return dx * dx + dy * dy + dz * dz;\n    }\n  }, {\n    key: \"manhattanDistanceTo\",\n    value: function manhattanDistanceTo(v) {\n      return Math.abs(this.x - v.x) + Math.abs(this.y - v.y) + Math.abs(this.z - v.z);\n    }\n  }, {\n    key: \"setFromSpherical\",\n    value: function setFromSpherical(s) {\n      return this.setFromSphericalCoords(s.radius, s.phi, s.theta);\n    }\n  }, {\n    key: \"setFromSphericalCoords\",\n    value: function setFromSphericalCoords(radius, phi, theta) {\n      var sinPhiRadius = Math.sin(phi) * radius;\n      this.x = sinPhiRadius * Math.sin(theta);\n      this.y = Math.cos(phi) * radius;\n      this.z = sinPhiRadius * Math.cos(theta);\n      return this;\n    }\n  }, {\n    key: \"setFromCylindrical\",\n    value: function setFromCylindrical(c) {\n      return this.setFromCylindricalCoords(c.radius, c.theta, c.y);\n    }\n  }, {\n    key: \"setFromCylindricalCoords\",\n    value: function setFromCylindricalCoords(radius, theta, y) {\n      this.x = radius * Math.sin(theta);\n      this.y = y;\n      this.z = radius * Math.cos(theta);\n      return this;\n    }\n  }, {\n    key: \"setFromMatrixPosition\",\n    value: function setFromMatrixPosition(m) {\n      var e = m.elements;\n      this.x = e[12];\n      this.y = e[13];\n      this.z = e[14];\n      return this;\n    }\n  }, {\n    key: \"setFromMatrixScale\",\n    value: function setFromMatrixScale(m) {\n      var sx = this.setFromMatrixColumn(m, 0).length();\n      var sy = this.setFromMatrixColumn(m, 1).length();\n      var sz = this.setFromMatrixColumn(m, 2).length();\n      this.x = sx;\n      this.y = sy;\n      this.z = sz;\n      return this;\n    }\n  }, {\n    key: \"setFromMatrixColumn\",\n    value: function setFromMatrixColumn(m, index) {\n      return this.fromArray(m.elements, index * 4);\n    }\n  }, {\n    key: \"setFromMatrix3Column\",\n    value: function setFromMatrix3Column(m, index) {\n      return this.fromArray(m.elements, index * 3);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v) {\n      return v.x === this.x && v.y === this.y && v.z === this.z;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.x = array[offset];\n      this.y = array[offset + 1];\n      this.z = array[offset + 2];\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this.x;\n      array[offset + 1] = this.y;\n      array[offset + 2] = this.z;\n      return array;\n    }\n  }, {\n    key: \"fromBufferAttribute\",\n    value: function fromBufferAttribute(attribute, index, offset) {\n      if (offset !== undefined) {\n        console.warn('THREE.Vector3: offset has been removed from .fromBufferAttribute().');\n      }\n\n      this.x = attribute.getX(index);\n      this.y = attribute.getY(index);\n      this.z = attribute.getZ(index);\n      return this;\n    }\n  }, {\n    key: \"random\",\n    value: function random() {\n      this.x = Math.random();\n      this.y = Math.random();\n      this.z = Math.random();\n      return this;\n    }\n  }]);\n\n  return Vector3;\n}();\n\nVector3.prototype.isVector3 = true;\n\nvar _vector$c = /*@__PURE__*/new Vector3();\n\nvar _quaternion$4 = /*@__PURE__*/new Quaternion();\n\nvar Box3 = /*#__PURE__*/function () {\n  function Box3() {\n    var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3(+Infinity, +Infinity, +Infinity);\n    var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3(-Infinity, -Infinity, -Infinity);\n\n    _classCallCheck(this, Box3);\n\n    this.min = min;\n    this.max = max;\n  }\n\n  _createClass(Box3, [{\n    key: \"set\",\n    value: function set(min, max) {\n      this.min.copy(min);\n      this.max.copy(max);\n      return this;\n    }\n  }, {\n    key: \"setFromArray\",\n    value: function setFromArray(array) {\n      var minX = +Infinity;\n      var minY = +Infinity;\n      var minZ = +Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      var maxZ = -Infinity;\n\n      for (var _i16 = 0, _l4 = array.length; _i16 < _l4; _i16 += 3) {\n        var _x2 = array[_i16];\n        var y = array[_i16 + 1];\n        var z = array[_i16 + 2];\n        if (_x2 < minX) minX = _x2;\n        if (y < minY) minY = y;\n        if (z < minZ) minZ = z;\n        if (_x2 > maxX) maxX = _x2;\n        if (y > maxY) maxY = y;\n        if (z > maxZ) maxZ = z;\n      }\n\n      this.min.set(minX, minY, minZ);\n      this.max.set(maxX, maxY, maxZ);\n      return this;\n    }\n  }, {\n    key: \"setFromBufferAttribute\",\n    value: function setFromBufferAttribute(attribute) {\n      var minX = +Infinity;\n      var minY = +Infinity;\n      var minZ = +Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      var maxZ = -Infinity;\n\n      for (var _i17 = 0, _l5 = attribute.count; _i17 < _l5; _i17++) {\n        var _x3 = attribute.getX(_i17);\n\n        var y = attribute.getY(_i17);\n        var z = attribute.getZ(_i17);\n        if (_x3 < minX) minX = _x3;\n        if (y < minY) minY = y;\n        if (z < minZ) minZ = z;\n        if (_x3 > maxX) maxX = _x3;\n        if (y > maxY) maxY = y;\n        if (z > maxZ) maxZ = z;\n      }\n\n      this.min.set(minX, minY, minZ);\n      this.max.set(maxX, maxY, maxZ);\n      return this;\n    }\n  }, {\n    key: \"setFromPoints\",\n    value: function setFromPoints(points) {\n      this.makeEmpty();\n\n      for (var _i18 = 0, il = points.length; _i18 < il; _i18++) {\n        this.expandByPoint(points[_i18]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setFromCenterAndSize\",\n    value: function setFromCenterAndSize(center, size) {\n      var halfSize = _vector$b.copy(size).multiplyScalar(0.5);\n\n      this.min.copy(center).sub(halfSize);\n      this.max.copy(center).add(halfSize);\n      return this;\n    }\n  }, {\n    key: \"setFromObject\",\n    value: function setFromObject(object) {\n      this.makeEmpty();\n      return this.expandByObject(object);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(box) {\n      this.min.copy(box.min);\n      this.max.copy(box.max);\n      return this;\n    }\n  }, {\n    key: \"makeEmpty\",\n    value: function makeEmpty() {\n      this.min.x = this.min.y = this.min.z = +Infinity;\n      this.max.x = this.max.y = this.max.z = -Infinity;\n      return this;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n      return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(target) {\n      return this.isEmpty() ? target.set(0, 0, 0) : target.addVectors(this.min, this.max).multiplyScalar(0.5);\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize(target) {\n      return this.isEmpty() ? target.set(0, 0, 0) : target.subVectors(this.max, this.min);\n    }\n  }, {\n    key: \"expandByPoint\",\n    value: function expandByPoint(point) {\n      this.min.min(point);\n      this.max.max(point);\n      return this;\n    }\n  }, {\n    key: \"expandByVector\",\n    value: function expandByVector(vector) {\n      this.min.sub(vector);\n      this.max.add(vector);\n      return this;\n    }\n  }, {\n    key: \"expandByScalar\",\n    value: function expandByScalar(scalar) {\n      this.min.addScalar(-scalar);\n      this.max.addScalar(scalar);\n      return this;\n    }\n  }, {\n    key: \"expandByObject\",\n    value: function expandByObject(object) {\n      // Computes the world-axis-aligned bounding box of an object (including its children),\n      // accounting for both the object's, and children's, world transforms\n      object.updateWorldMatrix(false, false);\n      var geometry = object.geometry;\n\n      if (geometry !== undefined) {\n        if (geometry.boundingBox === null) {\n          geometry.computeBoundingBox();\n        }\n\n        _box$3.copy(geometry.boundingBox);\n\n        _box$3.applyMatrix4(object.matrixWorld);\n\n        this.union(_box$3);\n      }\n\n      var children = object.children;\n\n      for (var _i19 = 0, _l6 = children.length; _i19 < _l6; _i19++) {\n        this.expandByObject(children[_i19]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"containsPoint\",\n    value: function containsPoint(point) {\n      return point.x < this.min.x || point.x > this.max.x || point.y < this.min.y || point.y > this.max.y || point.z < this.min.z || point.z > this.max.z ? false : true;\n    }\n  }, {\n    key: \"containsBox\",\n    value: function containsBox(box) {\n      return this.min.x <= box.min.x && box.max.x <= this.max.x && this.min.y <= box.min.y && box.max.y <= this.max.y && this.min.z <= box.min.z && box.max.z <= this.max.z;\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(point, target) {\n      // This can potentially have a divide by zero if the box\n      // has a size dimension of 0.\n      return target.set((point.x - this.min.x) / (this.max.x - this.min.x), (point.y - this.min.y) / (this.max.y - this.min.y), (point.z - this.min.z) / (this.max.z - this.min.z));\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      // using 6 splitting planes to rule out intersections.\n      return box.max.x < this.min.x || box.min.x > this.max.x || box.max.y < this.min.y || box.min.y > this.max.y || box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n    }\n  }, {\n    key: \"intersectsSphere\",\n    value: function intersectsSphere(sphere) {\n      // Find the point on the AABB closest to the sphere center.\n      this.clampPoint(sphere.center, _vector$b); // If that point is inside the sphere, the AABB and sphere intersect.\n\n      return _vector$b.distanceToSquared(sphere.center) <= sphere.radius * sphere.radius;\n    }\n  }, {\n    key: \"intersectsPlane\",\n    value: function intersectsPlane(plane) {\n      // We compute the minimum and maximum dot product values. If those values\n      // are on the same side (back or front) of the plane, then there is no intersection.\n      var min, max;\n\n      if (plane.normal.x > 0) {\n        min = plane.normal.x * this.min.x;\n        max = plane.normal.x * this.max.x;\n      } else {\n        min = plane.normal.x * this.max.x;\n        max = plane.normal.x * this.min.x;\n      }\n\n      if (plane.normal.y > 0) {\n        min += plane.normal.y * this.min.y;\n        max += plane.normal.y * this.max.y;\n      } else {\n        min += plane.normal.y * this.max.y;\n        max += plane.normal.y * this.min.y;\n      }\n\n      if (plane.normal.z > 0) {\n        min += plane.normal.z * this.min.z;\n        max += plane.normal.z * this.max.z;\n      } else {\n        min += plane.normal.z * this.max.z;\n        max += plane.normal.z * this.min.z;\n      }\n\n      return min <= -plane.constant && max >= -plane.constant;\n    }\n  }, {\n    key: \"intersectsTriangle\",\n    value: function intersectsTriangle(triangle) {\n      if (this.isEmpty()) {\n        return false;\n      } // compute box center and extents\n\n\n      this.getCenter(_center);\n\n      _extents.subVectors(this.max, _center); // translate triangle to aabb origin\n\n\n      _v0$2.subVectors(triangle.a, _center);\n\n      _v1$7.subVectors(triangle.b, _center);\n\n      _v2$3.subVectors(triangle.c, _center); // compute edge vectors for triangle\n\n\n      _f0.subVectors(_v1$7, _v0$2);\n\n      _f1.subVectors(_v2$3, _v1$7);\n\n      _f2.subVectors(_v0$2, _v2$3); // test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n      // make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n      // axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\n\n      var axes = [0, -_f0.z, _f0.y, 0, -_f1.z, _f1.y, 0, -_f2.z, _f2.y, _f0.z, 0, -_f0.x, _f1.z, 0, -_f1.x, _f2.z, 0, -_f2.x, -_f0.y, _f0.x, 0, -_f1.y, _f1.x, 0, -_f2.y, _f2.x, 0];\n\n      if (!satForAxes(axes, _v0$2, _v1$7, _v2$3, _extents)) {\n        return false;\n      } // test 3 face normals from the aabb\n\n\n      axes = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n      if (!satForAxes(axes, _v0$2, _v1$7, _v2$3, _extents)) {\n        return false;\n      } // finally testing the face normal of the triangle\n      // use already existing triangle edge vectors here\n\n\n      _triangleNormal.crossVectors(_f0, _f1);\n\n      axes = [_triangleNormal.x, _triangleNormal.y, _triangleNormal.z];\n      return satForAxes(axes, _v0$2, _v1$7, _v2$3, _extents);\n    }\n  }, {\n    key: \"clampPoint\",\n    value: function clampPoint(point, target) {\n      return target.copy(point).clamp(this.min, this.max);\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      var clampedPoint = _vector$b.copy(point).clamp(this.min, this.max);\n\n      return clampedPoint.sub(point).length();\n    }\n  }, {\n    key: \"getBoundingSphere\",\n    value: function getBoundingSphere(target) {\n      this.getCenter(target.center);\n      target.radius = this.getSize(_vector$b).length() * 0.5;\n      return target;\n    }\n  }, {\n    key: \"intersect\",\n    value: function intersect(box) {\n      this.min.max(box.min);\n      this.max.min(box.max); // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\n      if (this.isEmpty()) this.makeEmpty();\n      return this;\n    }\n  }, {\n    key: \"union\",\n    value: function union(box) {\n      this.min.min(box.min);\n      this.max.max(box.max);\n      return this;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix) {\n      // transform of empty box is an empty box.\n      if (this.isEmpty()) return this; // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\n      _points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n\n\n      _points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n\n\n      _points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n\n\n      _points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n\n\n      _points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n\n\n      _points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n\n\n      _points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n\n\n      _points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix); // 111\n\n\n      this.setFromPoints(_points);\n      return this;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(offset) {\n      this.min.add(offset);\n      this.max.add(offset);\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(box) {\n      return box.min.equals(this.min) && box.max.equals(this.max);\n    }\n  }]);\n\n  return Box3;\n}();\n\nBox3.prototype.isBox3 = true;\nvar _points = [/*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3(), /*@__PURE__*/new Vector3()];\n\nvar _vector$b = /*@__PURE__*/new Vector3();\n\nvar _box$3 = /*@__PURE__*/new Box3(); // triangle centered vertices\n\n\nvar _v0$2 = /*@__PURE__*/new Vector3();\n\nvar _v1$7 = /*@__PURE__*/new Vector3();\n\nvar _v2$3 = /*@__PURE__*/new Vector3(); // triangle edge vectors\n\n\nvar _f0 = /*@__PURE__*/new Vector3();\n\nvar _f1 = /*@__PURE__*/new Vector3();\n\nvar _f2 = /*@__PURE__*/new Vector3();\n\nvar _center = /*@__PURE__*/new Vector3();\n\nvar _extents = /*@__PURE__*/new Vector3();\n\nvar _triangleNormal = /*@__PURE__*/new Vector3();\n\nvar _testAxis = /*@__PURE__*/new Vector3();\n\nfunction satForAxes(axes, v0, v1, v2, extents) {\n  for (var _i20 = 0, j = axes.length - 3; _i20 <= j; _i20 += 3) {\n    _testAxis.fromArray(axes, _i20); // project the aabb onto the seperating axis\n\n\n    var _r2 = extents.x * Math.abs(_testAxis.x) + extents.y * Math.abs(_testAxis.y) + extents.z * Math.abs(_testAxis.z); // project all 3 vertices of the triangle onto the seperating axis\n\n\n    var p0 = v0.dot(_testAxis);\n    var p1 = v1.dot(_testAxis);\n    var p2 = v2.dot(_testAxis); // actual test, basically see if either of the most extreme of the triangle points intersects r\n\n    if (Math.max(-Math.max(p0, p1, p2), Math.min(p0, p1, p2)) > _r2) {\n      // points of the projected triangle are outside the projected half-length of the aabb\n      // the axis is seperating and we can exit\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar _box$2 = /*@__PURE__*/new Box3();\n\nvar _v1$6 = /*@__PURE__*/new Vector3();\n\nvar _toFarthestPoint = /*@__PURE__*/new Vector3();\n\nvar _toPoint = /*@__PURE__*/new Vector3();\n\nvar Sphere = /*#__PURE__*/function () {\n  function Sphere() {\n    var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var radius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n    _classCallCheck(this, Sphere);\n\n    this.center = center;\n    this.radius = radius;\n  }\n\n  _createClass(Sphere, [{\n    key: \"set\",\n    value: function set(center, radius) {\n      this.center.copy(center);\n      this.radius = radius;\n      return this;\n    }\n  }, {\n    key: \"setFromPoints\",\n    value: function setFromPoints(points, optionalCenter) {\n      var center = this.center;\n\n      if (optionalCenter !== undefined) {\n        center.copy(optionalCenter);\n      } else {\n        _box$2.setFromPoints(points).getCenter(center);\n      }\n\n      var maxRadiusSq = 0;\n\n      for (var _i21 = 0, il = points.length; _i21 < il; _i21++) {\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(points[_i21]));\n      }\n\n      this.radius = Math.sqrt(maxRadiusSq);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(sphere) {\n      this.center.copy(sphere.center);\n      this.radius = sphere.radius;\n      return this;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this.radius < 0;\n    }\n  }, {\n    key: \"makeEmpty\",\n    value: function makeEmpty() {\n      this.center.set(0, 0, 0);\n      this.radius = -1;\n      return this;\n    }\n  }, {\n    key: \"containsPoint\",\n    value: function containsPoint(point) {\n      return point.distanceToSquared(this.center) <= this.radius * this.radius;\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      return point.distanceTo(this.center) - this.radius;\n    }\n  }, {\n    key: \"intersectsSphere\",\n    value: function intersectsSphere(sphere) {\n      var radiusSum = this.radius + sphere.radius;\n      return sphere.center.distanceToSquared(this.center) <= radiusSum * radiusSum;\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      return box.intersectsSphere(this);\n    }\n  }, {\n    key: \"intersectsPlane\",\n    value: function intersectsPlane(plane) {\n      return Math.abs(plane.distanceToPoint(this.center)) <= this.radius;\n    }\n  }, {\n    key: \"clampPoint\",\n    value: function clampPoint(point, target) {\n      var deltaLengthSq = this.center.distanceToSquared(point);\n      target.copy(point);\n\n      if (deltaLengthSq > this.radius * this.radius) {\n        target.sub(this.center).normalize();\n        target.multiplyScalar(this.radius).add(this.center);\n      }\n\n      return target;\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(target) {\n      if (this.isEmpty()) {\n        // Empty sphere produces empty bounding box\n        target.makeEmpty();\n        return target;\n      }\n\n      target.set(this.center, this.center);\n      target.expandByScalar(this.radius);\n      return target;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix) {\n      this.center.applyMatrix4(matrix);\n      this.radius = this.radius * matrix.getMaxScaleOnAxis();\n      return this;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(offset) {\n      this.center.add(offset);\n      return this;\n    }\n  }, {\n    key: \"expandByPoint\",\n    value: function expandByPoint(point) {\n      // from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L649-L671\n      _toPoint.subVectors(point, this.center);\n\n      var lengthSq = _toPoint.lengthSq();\n\n      if (lengthSq > this.radius * this.radius) {\n        var length = Math.sqrt(lengthSq);\n        var missingRadiusHalf = (length - this.radius) * 0.5; // Nudge this sphere towards the target point. Add half the missing distance to radius,\n        // and the other half to position. This gives a tighter enclosure, instead of if\n        // the whole missing distance were just added to radius.\n\n        this.center.add(_toPoint.multiplyScalar(missingRadiusHalf / length));\n        this.radius += missingRadiusHalf;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"union\",\n    value: function union(sphere) {\n      // from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L759-L769\n      // To enclose another sphere into this sphere, we only need to enclose two points:\n      // 1) Enclose the farthest point on the other sphere into this sphere.\n      // 2) Enclose the opposite point of the farthest point into this sphere.\n      _toFarthestPoint.subVectors(sphere.center, this.center).normalize().multiplyScalar(sphere.radius);\n\n      this.expandByPoint(_v1$6.copy(sphere.center).add(_toFarthestPoint));\n      this.expandByPoint(_v1$6.copy(sphere.center).sub(_toFarthestPoint));\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(sphere) {\n      return sphere.center.equals(this.center) && sphere.radius === this.radius;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Sphere;\n}();\n\nvar _vector$a = /*@__PURE__*/new Vector3();\n\nvar _segCenter = /*@__PURE__*/new Vector3();\n\nvar _segDir = /*@__PURE__*/new Vector3();\n\nvar _diff = /*@__PURE__*/new Vector3();\n\nvar _edge1 = /*@__PURE__*/new Vector3();\n\nvar _edge2 = /*@__PURE__*/new Vector3();\n\nvar _normal$1 = /*@__PURE__*/new Vector3();\n\nvar Ray = /*#__PURE__*/function () {\n  function Ray() {\n    var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3(0, 0, -1);\n\n    _classCallCheck(this, Ray);\n\n    this.origin = origin;\n    this.direction = direction;\n  }\n\n  _createClass(Ray, [{\n    key: \"set\",\n    value: function set(origin, direction) {\n      this.origin.copy(origin);\n      this.direction.copy(direction);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(ray) {\n      this.origin.copy(ray.origin);\n      this.direction.copy(ray.direction);\n      return this;\n    }\n  }, {\n    key: \"at\",\n    value: function at(t, target) {\n      return target.copy(this.direction).multiplyScalar(t).add(this.origin);\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(v) {\n      this.direction.copy(v).sub(this.origin).normalize();\n      return this;\n    }\n  }, {\n    key: \"recast\",\n    value: function recast(t) {\n      this.origin.copy(this.at(t, _vector$a));\n      return this;\n    }\n  }, {\n    key: \"closestPointToPoint\",\n    value: function closestPointToPoint(point, target) {\n      target.subVectors(point, this.origin);\n      var directionDistance = target.dot(this.direction);\n\n      if (directionDistance < 0) {\n        return target.copy(this.origin);\n      }\n\n      return target.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      return Math.sqrt(this.distanceSqToPoint(point));\n    }\n  }, {\n    key: \"distanceSqToPoint\",\n    value: function distanceSqToPoint(point) {\n      var directionDistance = _vector$a.subVectors(point, this.origin).dot(this.direction); // point behind the ray\n\n\n      if (directionDistance < 0) {\n        return this.origin.distanceToSquared(point);\n      }\n\n      _vector$a.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);\n\n      return _vector$a.distanceToSquared(point);\n    }\n  }, {\n    key: \"distanceSqToSegment\",\n    value: function distanceSqToSegment(v0, v1, optionalPointOnRay, optionalPointOnSegment) {\n      // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n      // It returns the min distance between the ray and the segment\n      // defined by v0 and v1\n      // It can also set two optional targets :\n      // - The closest point on the ray\n      // - The closest point on the segment\n      _segCenter.copy(v0).add(v1).multiplyScalar(0.5);\n\n      _segDir.copy(v1).sub(v0).normalize();\n\n      _diff.copy(this.origin).sub(_segCenter);\n\n      var segExtent = v0.distanceTo(v1) * 0.5;\n      var a01 = -this.direction.dot(_segDir);\n\n      var b0 = _diff.dot(this.direction);\n\n      var b1 = -_diff.dot(_segDir);\n\n      var c = _diff.lengthSq();\n\n      var det = Math.abs(1 - a01 * a01);\n      var s0, s1, sqrDist, extDet;\n\n      if (det > 0) {\n        // The ray and segment are not parallel.\n        s0 = a01 * b1 - b0;\n        s1 = a01 * b0 - b1;\n        extDet = segExtent * det;\n\n        if (s0 >= 0) {\n          if (s1 >= -extDet) {\n            if (s1 <= extDet) {\n              // region 0\n              // Minimum at interior points of ray and segment.\n              var invDet = 1 / det;\n              s0 *= invDet;\n              s1 *= invDet;\n              sqrDist = s0 * (s0 + a01 * s1 + 2 * b0) + s1 * (a01 * s0 + s1 + 2 * b1) + c;\n            } else {\n              // region 1\n              s1 = segExtent;\n              s0 = Math.max(0, -(a01 * s1 + b0));\n              sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n            }\n          } else {\n            // region 5\n            s1 = -segExtent;\n            s0 = Math.max(0, -(a01 * s1 + b0));\n            sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n          }\n        } else {\n          if (s1 <= -extDet) {\n            // region 4\n            s0 = Math.max(0, -(-a01 * segExtent + b0));\n            s1 = s0 > 0 ? -segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n            sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n          } else if (s1 <= extDet) {\n            // region 3\n            s0 = 0;\n            s1 = Math.min(Math.max(-segExtent, -b1), segExtent);\n            sqrDist = s1 * (s1 + 2 * b1) + c;\n          } else {\n            // region 2\n            s0 = Math.max(0, -(a01 * segExtent + b0));\n            s1 = s0 > 0 ? segExtent : Math.min(Math.max(-segExtent, -b1), segExtent);\n            sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n          }\n        }\n      } else {\n        // Ray and segment are parallel.\n        s1 = a01 > 0 ? -segExtent : segExtent;\n        s0 = Math.max(0, -(a01 * s1 + b0));\n        sqrDist = -s0 * s0 + s1 * (s1 + 2 * b1) + c;\n      }\n\n      if (optionalPointOnRay) {\n        optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin);\n      }\n\n      if (optionalPointOnSegment) {\n        optionalPointOnSegment.copy(_segDir).multiplyScalar(s1).add(_segCenter);\n      }\n\n      return sqrDist;\n    }\n  }, {\n    key: \"intersectSphere\",\n    value: function intersectSphere(sphere, target) {\n      _vector$a.subVectors(sphere.center, this.origin);\n\n      var tca = _vector$a.dot(this.direction);\n\n      var d2 = _vector$a.dot(_vector$a) - tca * tca;\n      var radius2 = sphere.radius * sphere.radius;\n      if (d2 > radius2) return null;\n      var thc = Math.sqrt(radius2 - d2); // t0 = first intersect point - entrance on front of sphere\n\n      var t0 = tca - thc; // t1 = second intersect point - exit point on back of sphere\n\n      var t1 = tca + thc; // test to see if both t0 and t1 are behind the ray - if so, return null\n\n      if (t0 < 0 && t1 < 0) return null; // test to see if t0 is behind the ray:\n      // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n      // in order to always return an intersect point that is in front of the ray.\n\n      if (t0 < 0) return this.at(t1, target); // else t0 is in front of the ray, so return the first collision point scaled by t0\n\n      return this.at(t0, target);\n    }\n  }, {\n    key: \"intersectsSphere\",\n    value: function intersectsSphere(sphere) {\n      return this.distanceSqToPoint(sphere.center) <= sphere.radius * sphere.radius;\n    }\n  }, {\n    key: \"distanceToPlane\",\n    value: function distanceToPlane(plane) {\n      var denominator = plane.normal.dot(this.direction);\n\n      if (denominator === 0) {\n        // line is coplanar, return origin\n        if (plane.distanceToPoint(this.origin) === 0) {\n          return 0;\n        } // Null is preferable to undefined since undefined means.... it is undefined\n\n\n        return null;\n      }\n\n      var t = -(this.origin.dot(plane.normal) + plane.constant) / denominator; // Return if the ray never intersects the plane\n\n      return t >= 0 ? t : null;\n    }\n  }, {\n    key: \"intersectPlane\",\n    value: function intersectPlane(plane, target) {\n      var t = this.distanceToPlane(plane);\n\n      if (t === null) {\n        return null;\n      }\n\n      return this.at(t, target);\n    }\n  }, {\n    key: \"intersectsPlane\",\n    value: function intersectsPlane(plane) {\n      // check if the ray lies on the plane first\n      var distToPoint = plane.distanceToPoint(this.origin);\n\n      if (distToPoint === 0) {\n        return true;\n      }\n\n      var denominator = plane.normal.dot(this.direction);\n\n      if (denominator * distToPoint < 0) {\n        return true;\n      } // ray origin is behind the plane (and is pointing behind it)\n\n\n      return false;\n    }\n  }, {\n    key: \"intersectBox\",\n    value: function intersectBox(box, target) {\n      var tmin, tmax, tymin, tymax, tzmin, tzmax;\n      var invdirx = 1 / this.direction.x,\n          invdiry = 1 / this.direction.y,\n          invdirz = 1 / this.direction.z;\n      var origin = this.origin;\n\n      if (invdirx >= 0) {\n        tmin = (box.min.x - origin.x) * invdirx;\n        tmax = (box.max.x - origin.x) * invdirx;\n      } else {\n        tmin = (box.max.x - origin.x) * invdirx;\n        tmax = (box.min.x - origin.x) * invdirx;\n      }\n\n      if (invdiry >= 0) {\n        tymin = (box.min.y - origin.y) * invdiry;\n        tymax = (box.max.y - origin.y) * invdiry;\n      } else {\n        tymin = (box.max.y - origin.y) * invdiry;\n        tymax = (box.min.y - origin.y) * invdiry;\n      }\n\n      if (tmin > tymax || tymin > tmax) return null; // These lines also handle the case where tmin or tmax is NaN\n      // (result of 0 * Infinity). x !== x returns true if x is NaN\n\n      if (tymin > tmin || tmin !== tmin) tmin = tymin;\n      if (tymax < tmax || tmax !== tmax) tmax = tymax;\n\n      if (invdirz >= 0) {\n        tzmin = (box.min.z - origin.z) * invdirz;\n        tzmax = (box.max.z - origin.z) * invdirz;\n      } else {\n        tzmin = (box.max.z - origin.z) * invdirz;\n        tzmax = (box.min.z - origin.z) * invdirz;\n      }\n\n      if (tmin > tzmax || tzmin > tmax) return null;\n      if (tzmin > tmin || tmin !== tmin) tmin = tzmin;\n      if (tzmax < tmax || tmax !== tmax) tmax = tzmax; //return point closest to the ray (positive side)\n\n      if (tmax < 0) return null;\n      return this.at(tmin >= 0 ? tmin : tmax, target);\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      return this.intersectBox(box, _vector$a) !== null;\n    }\n  }, {\n    key: \"intersectTriangle\",\n    value: function intersectTriangle(a, b, c, backfaceCulling, target) {\n      // Compute the offset origin, edges, and normal.\n      // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n      _edge1.subVectors(b, a);\n\n      _edge2.subVectors(c, a);\n\n      _normal$1.crossVectors(_edge1, _edge2); // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n      // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n      //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n      //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n      //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\n\n      var DdN = this.direction.dot(_normal$1);\n      var sign;\n\n      if (DdN > 0) {\n        if (backfaceCulling) return null;\n        sign = 1;\n      } else if (DdN < 0) {\n        sign = -1;\n        DdN = -DdN;\n      } else {\n        return null;\n      }\n\n      _diff.subVectors(this.origin, a);\n\n      var DdQxE2 = sign * this.direction.dot(_edge2.crossVectors(_diff, _edge2)); // b1 < 0, no intersection\n\n      if (DdQxE2 < 0) {\n        return null;\n      }\n\n      var DdE1xQ = sign * this.direction.dot(_edge1.cross(_diff)); // b2 < 0, no intersection\n\n      if (DdE1xQ < 0) {\n        return null;\n      } // b1+b2 > 1, no intersection\n\n\n      if (DdQxE2 + DdE1xQ > DdN) {\n        return null;\n      } // Line intersects triangle, check if ray does.\n\n\n      var QdN = -sign * _diff.dot(_normal$1); // t < 0, no intersection\n\n\n      if (QdN < 0) {\n        return null;\n      } // Ray intersects triangle.\n\n\n      return this.at(QdN / DdN, target);\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix4) {\n      this.origin.applyMatrix4(matrix4);\n      this.direction.transformDirection(matrix4);\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(ray) {\n      return ray.origin.equals(this.origin) && ray.direction.equals(this.direction);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Ray;\n}();\n\nvar Matrix4 = /*#__PURE__*/function () {\n  function Matrix4() {\n    _classCallCheck(this, Matrix4);\n\n    this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\n    if (arguments.length > 0) {\n      console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.');\n    }\n  }\n\n  _createClass(Matrix4, [{\n    key: \"set\",\n    value: function set(n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n      var te = this.elements;\n      te[0] = n11;\n      te[4] = n12;\n      te[8] = n13;\n      te[12] = n14;\n      te[1] = n21;\n      te[5] = n22;\n      te[9] = n23;\n      te[13] = n24;\n      te[2] = n31;\n      te[6] = n32;\n      te[10] = n33;\n      te[14] = n34;\n      te[3] = n41;\n      te[7] = n42;\n      te[11] = n43;\n      te[15] = n44;\n      return this;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new Matrix4().fromArray(this.elements);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(m) {\n      var te = this.elements;\n      var me = m.elements;\n      te[0] = me[0];\n      te[1] = me[1];\n      te[2] = me[2];\n      te[3] = me[3];\n      te[4] = me[4];\n      te[5] = me[5];\n      te[6] = me[6];\n      te[7] = me[7];\n      te[8] = me[8];\n      te[9] = me[9];\n      te[10] = me[10];\n      te[11] = me[11];\n      te[12] = me[12];\n      te[13] = me[13];\n      te[14] = me[14];\n      te[15] = me[15];\n      return this;\n    }\n  }, {\n    key: \"copyPosition\",\n    value: function copyPosition(m) {\n      var te = this.elements,\n          me = m.elements;\n      te[12] = me[12];\n      te[13] = me[13];\n      te[14] = me[14];\n      return this;\n    }\n  }, {\n    key: \"setFromMatrix3\",\n    value: function setFromMatrix3(m) {\n      var me = m.elements;\n      this.set(me[0], me[3], me[6], 0, me[1], me[4], me[7], 0, me[2], me[5], me[8], 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"extractBasis\",\n    value: function extractBasis(xAxis, yAxis, zAxis) {\n      xAxis.setFromMatrixColumn(this, 0);\n      yAxis.setFromMatrixColumn(this, 1);\n      zAxis.setFromMatrixColumn(this, 2);\n      return this;\n    }\n  }, {\n    key: \"makeBasis\",\n    value: function makeBasis(xAxis, yAxis, zAxis) {\n      this.set(xAxis.x, yAxis.x, zAxis.x, 0, xAxis.y, yAxis.y, zAxis.y, 0, xAxis.z, yAxis.z, zAxis.z, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"extractRotation\",\n    value: function extractRotation(m) {\n      // this method does not support reflection matrices\n      var te = this.elements;\n      var me = m.elements;\n\n      var scaleX = 1 / _v1$5.setFromMatrixColumn(m, 0).length();\n\n      var scaleY = 1 / _v1$5.setFromMatrixColumn(m, 1).length();\n\n      var scaleZ = 1 / _v1$5.setFromMatrixColumn(m, 2).length();\n\n      te[0] = me[0] * scaleX;\n      te[1] = me[1] * scaleX;\n      te[2] = me[2] * scaleX;\n      te[3] = 0;\n      te[4] = me[4] * scaleY;\n      te[5] = me[5] * scaleY;\n      te[6] = me[6] * scaleY;\n      te[7] = 0;\n      te[8] = me[8] * scaleZ;\n      te[9] = me[9] * scaleZ;\n      te[10] = me[10] * scaleZ;\n      te[11] = 0;\n      te[12] = 0;\n      te[13] = 0;\n      te[14] = 0;\n      te[15] = 1;\n      return this;\n    }\n  }, {\n    key: \"makeRotationFromEuler\",\n    value: function makeRotationFromEuler(euler) {\n      if (!(euler && euler.isEuler)) {\n        console.error('THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');\n      }\n\n      var te = this.elements;\n      var x = euler.x,\n          y = euler.y,\n          z = euler.z;\n      var a = Math.cos(x),\n          b = Math.sin(x);\n      var c = Math.cos(y),\n          d = Math.sin(y);\n      var e = Math.cos(z),\n          f = Math.sin(z);\n\n      if (euler.order === 'XYZ') {\n        var ae = a * e,\n            af = a * f,\n            be = b * e,\n            bf = b * f;\n        te[0] = c * e;\n        te[4] = -c * f;\n        te[8] = d;\n        te[1] = af + be * d;\n        te[5] = ae - bf * d;\n        te[9] = -b * c;\n        te[2] = bf - ae * d;\n        te[6] = be + af * d;\n        te[10] = a * c;\n      } else if (euler.order === 'YXZ') {\n        var ce = c * e,\n            cf = c * f,\n            de = d * e,\n            df = d * f;\n        te[0] = ce + df * b;\n        te[4] = de * b - cf;\n        te[8] = a * d;\n        te[1] = a * f;\n        te[5] = a * e;\n        te[9] = -b;\n        te[2] = cf * b - de;\n        te[6] = df + ce * b;\n        te[10] = a * c;\n      } else if (euler.order === 'ZXY') {\n        var _ce = c * e,\n            _cf = c * f,\n            _de = d * e,\n            _df = d * f;\n\n        te[0] = _ce - _df * b;\n        te[4] = -a * f;\n        te[8] = _de + _cf * b;\n        te[1] = _cf + _de * b;\n        te[5] = a * e;\n        te[9] = _df - _ce * b;\n        te[2] = -a * d;\n        te[6] = b;\n        te[10] = a * c;\n      } else if (euler.order === 'ZYX') {\n        var _ae = a * e,\n            _af = a * f,\n            _be = b * e,\n            _bf = b * f;\n\n        te[0] = c * e;\n        te[4] = _be * d - _af;\n        te[8] = _ae * d + _bf;\n        te[1] = c * f;\n        te[5] = _bf * d + _ae;\n        te[9] = _af * d - _be;\n        te[2] = -d;\n        te[6] = b * c;\n        te[10] = a * c;\n      } else if (euler.order === 'YZX') {\n        var ac = a * c,\n            ad = a * d,\n            bc = b * c,\n            bd = b * d;\n        te[0] = c * e;\n        te[4] = bd - ac * f;\n        te[8] = bc * f + ad;\n        te[1] = f;\n        te[5] = a * e;\n        te[9] = -b * e;\n        te[2] = -d * e;\n        te[6] = ad * f + bc;\n        te[10] = ac - bd * f;\n      } else if (euler.order === 'XZY') {\n        var _ac = a * c,\n            _ad = a * d,\n            _bc = b * c,\n            _bd = b * d;\n\n        te[0] = c * e;\n        te[4] = -f;\n        te[8] = d * e;\n        te[1] = _ac * f + _bd;\n        te[5] = a * e;\n        te[9] = _ad * f - _bc;\n        te[2] = _bc * f - _ad;\n        te[6] = b * e;\n        te[10] = _bd * f + _ac;\n      } // bottom row\n\n\n      te[3] = 0;\n      te[7] = 0;\n      te[11] = 0; // last column\n\n      te[12] = 0;\n      te[13] = 0;\n      te[14] = 0;\n      te[15] = 1;\n      return this;\n    }\n  }, {\n    key: \"makeRotationFromQuaternion\",\n    value: function makeRotationFromQuaternion(q) {\n      return this.compose(_zero, q, _one);\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, target, up) {\n      var te = this.elements;\n\n      _z.subVectors(eye, target);\n\n      if (_z.lengthSq() === 0) {\n        // eye and target are in the same position\n        _z.z = 1;\n      }\n\n      _z.normalize();\n\n      _x.crossVectors(up, _z);\n\n      if (_x.lengthSq() === 0) {\n        // up and z are parallel\n        if (Math.abs(up.z) === 1) {\n          _z.x += 0.0001;\n        } else {\n          _z.z += 0.0001;\n        }\n\n        _z.normalize();\n\n        _x.crossVectors(up, _z);\n      }\n\n      _x.normalize();\n\n      _y.crossVectors(_z, _x);\n\n      te[0] = _x.x;\n      te[4] = _y.x;\n      te[8] = _z.x;\n      te[1] = _x.y;\n      te[5] = _y.y;\n      te[9] = _z.y;\n      te[2] = _x.z;\n      te[6] = _y.z;\n      te[10] = _z.z;\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(m, n) {\n      if (n !== undefined) {\n        console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\n        return this.multiplyMatrices(m, n);\n      }\n\n      return this.multiplyMatrices(this, m);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(m) {\n      return this.multiplyMatrices(m, this);\n    }\n  }, {\n    key: \"multiplyMatrices\",\n    value: function multiplyMatrices(a, b) {\n      var ae = a.elements;\n      var be = b.elements;\n      var te = this.elements;\n      var a11 = ae[0],\n          a12 = ae[4],\n          a13 = ae[8],\n          a14 = ae[12];\n      var a21 = ae[1],\n          a22 = ae[5],\n          a23 = ae[9],\n          a24 = ae[13];\n      var a31 = ae[2],\n          a32 = ae[6],\n          a33 = ae[10],\n          a34 = ae[14];\n      var a41 = ae[3],\n          a42 = ae[7],\n          a43 = ae[11],\n          a44 = ae[15];\n      var b11 = be[0],\n          b12 = be[4],\n          b13 = be[8],\n          b14 = be[12];\n      var b21 = be[1],\n          b22 = be[5],\n          b23 = be[9],\n          b24 = be[13];\n      var b31 = be[2],\n          b32 = be[6],\n          b33 = be[10],\n          b34 = be[14];\n      var b41 = be[3],\n          b42 = be[7],\n          b43 = be[11],\n          b44 = be[15];\n      te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n      te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n      te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n      te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n      te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n      te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n      te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n      te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n      te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n      te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n      te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n      te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n      te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n      te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n      te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n      te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(s) {\n      var te = this.elements;\n      te[0] *= s;\n      te[4] *= s;\n      te[8] *= s;\n      te[12] *= s;\n      te[1] *= s;\n      te[5] *= s;\n      te[9] *= s;\n      te[13] *= s;\n      te[2] *= s;\n      te[6] *= s;\n      te[10] *= s;\n      te[14] *= s;\n      te[3] *= s;\n      te[7] *= s;\n      te[11] *= s;\n      te[15] *= s;\n      return this;\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      var te = this.elements;\n      var n11 = te[0],\n          n12 = te[4],\n          n13 = te[8],\n          n14 = te[12];\n      var n21 = te[1],\n          n22 = te[5],\n          n23 = te[9],\n          n24 = te[13];\n      var n31 = te[2],\n          n32 = te[6],\n          n33 = te[10],\n          n34 = te[14];\n      var n41 = te[3],\n          n42 = te[7],\n          n43 = te[11],\n          n44 = te[15]; //TODO: make this more efficient\n      //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n      return n41 * (+n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34) + n42 * (+n11 * n23 * n34 - n11 * n24 * n33 + n14 * n21 * n33 - n13 * n21 * n34 + n13 * n24 * n31 - n14 * n23 * n31) + n43 * (+n11 * n24 * n32 - n11 * n22 * n34 - n14 * n21 * n32 + n12 * n21 * n34 + n14 * n22 * n31 - n12 * n24 * n31) + n44 * (-n13 * n22 * n31 - n11 * n23 * n32 + n11 * n22 * n33 + n13 * n21 * n32 - n12 * n21 * n33 + n12 * n23 * n31);\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      var te = this.elements;\n      var tmp;\n      tmp = te[1];\n      te[1] = te[4];\n      te[4] = tmp;\n      tmp = te[2];\n      te[2] = te[8];\n      te[8] = tmp;\n      tmp = te[6];\n      te[6] = te[9];\n      te[9] = tmp;\n      tmp = te[3];\n      te[3] = te[12];\n      te[12] = tmp;\n      tmp = te[7];\n      te[7] = te[13];\n      te[13] = tmp;\n      tmp = te[11];\n      te[11] = te[14];\n      te[14] = tmp;\n      return this;\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(x, y, z) {\n      var te = this.elements;\n\n      if (x.isVector3) {\n        te[12] = x.x;\n        te[13] = x.y;\n        te[14] = x.z;\n      } else {\n        te[12] = x;\n        te[13] = y;\n        te[14] = z;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n      var te = this.elements,\n          n11 = te[0],\n          n21 = te[1],\n          n31 = te[2],\n          n41 = te[3],\n          n12 = te[4],\n          n22 = te[5],\n          n32 = te[6],\n          n42 = te[7],\n          n13 = te[8],\n          n23 = te[9],\n          n33 = te[10],\n          n43 = te[11],\n          n14 = te[12],\n          n24 = te[13],\n          n34 = te[14],\n          n44 = te[15],\n          t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n          t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n          t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n          t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n      var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n      if (det === 0) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n      var detInv = 1 / det;\n      te[0] = t11 * detInv;\n      te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n      te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n      te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n      te[4] = t12 * detInv;\n      te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n      te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n      te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n      te[8] = t13 * detInv;\n      te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n      te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n      te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n      te[12] = t14 * detInv;\n      te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n      te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n      te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n      return this;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(v) {\n      var te = this.elements;\n      var x = v.x,\n          y = v.y,\n          z = v.z;\n      te[0] *= x;\n      te[4] *= y;\n      te[8] *= z;\n      te[1] *= x;\n      te[5] *= y;\n      te[9] *= z;\n      te[2] *= x;\n      te[6] *= y;\n      te[10] *= z;\n      te[3] *= x;\n      te[7] *= y;\n      te[11] *= z;\n      return this;\n    }\n  }, {\n    key: \"getMaxScaleOnAxis\",\n    value: function getMaxScaleOnAxis() {\n      var te = this.elements;\n      var scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n      var scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n      var scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n      return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      this.set(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(theta) {\n      var c = Math.cos(theta),\n          s = Math.sin(theta);\n      this.set(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeRotationY\",\n    value: function makeRotationY(theta) {\n      var c = Math.cos(theta),\n          s = Math.sin(theta);\n      this.set(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeRotationZ\",\n    value: function makeRotationZ(theta) {\n      var c = Math.cos(theta),\n          s = Math.sin(theta);\n      this.set(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeRotationAxis\",\n    value: function makeRotationAxis(axis, angle) {\n      // Based on http://www.gamedev.net/reference/articles/article1199.asp\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      var t = 1 - c;\n      var x = axis.x,\n          y = axis.y,\n          z = axis.z;\n      var tx = t * x,\n          ty = t * y;\n      this.set(tx * x + c, tx * y - s * z, tx * z + s * y, 0, tx * y + s * z, ty * y + c, ty * z - s * x, 0, tx * z - s * y, ty * z + s * x, t * z * z + c, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeScale\",\n    value: function makeScale(x, y, z) {\n      this.set(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"makeShear\",\n    value: function makeShear(xy, xz, yx, yz, zx, zy) {\n      this.set(1, yx, zx, 0, xy, 1, zy, 0, xz, yz, 1, 0, 0, 0, 0, 1);\n      return this;\n    }\n  }, {\n    key: \"compose\",\n    value: function compose(position, quaternion, scale) {\n      var te = this.elements;\n      var x = quaternion._x,\n          y = quaternion._y,\n          z = quaternion._z,\n          w = quaternion._w;\n      var x2 = x + x,\n          y2 = y + y,\n          z2 = z + z;\n      var xx = x * x2,\n          xy = x * y2,\n          xz = x * z2;\n      var yy = y * y2,\n          yz = y * z2,\n          zz = z * z2;\n      var wx = w * x2,\n          wy = w * y2,\n          wz = w * z2;\n      var sx = scale.x,\n          sy = scale.y,\n          sz = scale.z;\n      te[0] = (1 - (yy + zz)) * sx;\n      te[1] = (xy + wz) * sx;\n      te[2] = (xz - wy) * sx;\n      te[3] = 0;\n      te[4] = (xy - wz) * sy;\n      te[5] = (1 - (xx + zz)) * sy;\n      te[6] = (yz + wx) * sy;\n      te[7] = 0;\n      te[8] = (xz + wy) * sz;\n      te[9] = (yz - wx) * sz;\n      te[10] = (1 - (xx + yy)) * sz;\n      te[11] = 0;\n      te[12] = position.x;\n      te[13] = position.y;\n      te[14] = position.z;\n      te[15] = 1;\n      return this;\n    }\n  }, {\n    key: \"decompose\",\n    value: function decompose(position, quaternion, scale) {\n      var te = this.elements;\n\n      var sx = _v1$5.set(te[0], te[1], te[2]).length();\n\n      var sy = _v1$5.set(te[4], te[5], te[6]).length();\n\n      var sz = _v1$5.set(te[8], te[9], te[10]).length(); // if determine is negative, we need to invert one scale\n\n\n      var det = this.determinant();\n      if (det < 0) sx = -sx;\n      position.x = te[12];\n      position.y = te[13];\n      position.z = te[14]; // scale the rotation part\n\n      _m1$2.copy(this);\n\n      var invSX = 1 / sx;\n      var invSY = 1 / sy;\n      var invSZ = 1 / sz;\n      _m1$2.elements[0] *= invSX;\n      _m1$2.elements[1] *= invSX;\n      _m1$2.elements[2] *= invSX;\n      _m1$2.elements[4] *= invSY;\n      _m1$2.elements[5] *= invSY;\n      _m1$2.elements[6] *= invSY;\n      _m1$2.elements[8] *= invSZ;\n      _m1$2.elements[9] *= invSZ;\n      _m1$2.elements[10] *= invSZ;\n      quaternion.setFromRotationMatrix(_m1$2);\n      scale.x = sx;\n      scale.y = sy;\n      scale.z = sz;\n      return this;\n    }\n  }, {\n    key: \"makePerspective\",\n    value: function makePerspective(left, right, top, bottom, near, far) {\n      if (far === undefined) {\n        console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');\n      }\n\n      var te = this.elements;\n      var x = 2 * near / (right - left);\n      var y = 2 * near / (top - bottom);\n      var a = (right + left) / (right - left);\n      var b = (top + bottom) / (top - bottom);\n      var c = -(far + near) / (far - near);\n      var d = -2 * far * near / (far - near);\n      te[0] = x;\n      te[4] = 0;\n      te[8] = a;\n      te[12] = 0;\n      te[1] = 0;\n      te[5] = y;\n      te[9] = b;\n      te[13] = 0;\n      te[2] = 0;\n      te[6] = 0;\n      te[10] = c;\n      te[14] = d;\n      te[3] = 0;\n      te[7] = 0;\n      te[11] = -1;\n      te[15] = 0;\n      return this;\n    }\n  }, {\n    key: \"makeOrthographic\",\n    value: function makeOrthographic(left, right, top, bottom, near, far) {\n      var te = this.elements;\n      var w = 1.0 / (right - left);\n      var h = 1.0 / (top - bottom);\n      var p = 1.0 / (far - near);\n      var x = (right + left) * w;\n      var y = (top + bottom) * h;\n      var z = (far + near) * p;\n      te[0] = 2 * w;\n      te[4] = 0;\n      te[8] = 0;\n      te[12] = -x;\n      te[1] = 0;\n      te[5] = 2 * h;\n      te[9] = 0;\n      te[13] = -y;\n      te[2] = 0;\n      te[6] = 0;\n      te[10] = -2 * p;\n      te[14] = -z;\n      te[3] = 0;\n      te[7] = 0;\n      te[11] = 0;\n      te[15] = 1;\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(matrix) {\n      var te = this.elements;\n      var me = matrix.elements;\n\n      for (var _i22 = 0; _i22 < 16; _i22++) {\n        if (te[_i22] !== me[_i22]) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var _i23 = 0; _i23 < 16; _i23++) {\n        this.elements[_i23] = array[_i23 + offset];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var te = this.elements;\n      array[offset] = te[0];\n      array[offset + 1] = te[1];\n      array[offset + 2] = te[2];\n      array[offset + 3] = te[3];\n      array[offset + 4] = te[4];\n      array[offset + 5] = te[5];\n      array[offset + 6] = te[6];\n      array[offset + 7] = te[7];\n      array[offset + 8] = te[8];\n      array[offset + 9] = te[9];\n      array[offset + 10] = te[10];\n      array[offset + 11] = te[11];\n      array[offset + 12] = te[12];\n      array[offset + 13] = te[13];\n      array[offset + 14] = te[14];\n      array[offset + 15] = te[15];\n      return array;\n    }\n  }]);\n\n  return Matrix4;\n}();\n\nMatrix4.prototype.isMatrix4 = true;\n\nvar _v1$5 = /*@__PURE__*/new Vector3();\n\nvar _m1$2 = /*@__PURE__*/new Matrix4();\n\nvar _zero = /*@__PURE__*/new Vector3(0, 0, 0);\n\nvar _one = /*@__PURE__*/new Vector3(1, 1, 1);\n\nvar _x = /*@__PURE__*/new Vector3();\n\nvar _y = /*@__PURE__*/new Vector3();\n\nvar _z = /*@__PURE__*/new Vector3();\n\nvar _matrix$1 = /*@__PURE__*/new Matrix4();\n\nvar _quaternion$3 = /*@__PURE__*/new Quaternion();\n\nvar Euler = /*#__PURE__*/function () {\n  function Euler() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var order = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Euler.DefaultOrder;\n\n    _classCallCheck(this, Euler);\n\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._order = order;\n  }\n\n  _createClass(Euler, [{\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this._z;\n    },\n    set: function set(value) {\n      this._z = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"order\",\n    get: function get() {\n      return this._order;\n    },\n    set: function set(value) {\n      this._order = value;\n\n      this._onChangeCallback();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z) {\n      var order = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this._order;\n      this._x = x;\n      this._y = y;\n      this._z = z;\n      this._order = order;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this._x, this._y, this._z, this._order);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(euler) {\n      this._x = euler._x;\n      this._y = euler._y;\n      this._z = euler._z;\n      this._order = euler._order;\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"setFromRotationMatrix\",\n    value: function setFromRotationMatrix(m) {\n      var order = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._order;\n      var update = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n      var te = m.elements;\n      var m11 = te[0],\n          m12 = te[4],\n          m13 = te[8];\n      var m21 = te[1],\n          m22 = te[5],\n          m23 = te[9];\n      var m31 = te[2],\n          m32 = te[6],\n          m33 = te[10];\n\n      switch (order) {\n        case 'XYZ':\n          this._y = Math.asin(clamp$1(m13, -1, 1));\n\n          if (Math.abs(m13) < 0.9999999) {\n            this._x = Math.atan2(-m23, m33);\n            this._z = Math.atan2(-m12, m11);\n          } else {\n            this._x = Math.atan2(m32, m22);\n            this._z = 0;\n          }\n\n          break;\n\n        case 'YXZ':\n          this._x = Math.asin(-clamp$1(m23, -1, 1));\n\n          if (Math.abs(m23) < 0.9999999) {\n            this._y = Math.atan2(m13, m33);\n            this._z = Math.atan2(m21, m22);\n          } else {\n            this._y = Math.atan2(-m31, m11);\n            this._z = 0;\n          }\n\n          break;\n\n        case 'ZXY':\n          this._x = Math.asin(clamp$1(m32, -1, 1));\n\n          if (Math.abs(m32) < 0.9999999) {\n            this._y = Math.atan2(-m31, m33);\n            this._z = Math.atan2(-m12, m22);\n          } else {\n            this._y = 0;\n            this._z = Math.atan2(m21, m11);\n          }\n\n          break;\n\n        case 'ZYX':\n          this._y = Math.asin(-clamp$1(m31, -1, 1));\n\n          if (Math.abs(m31) < 0.9999999) {\n            this._x = Math.atan2(m32, m33);\n            this._z = Math.atan2(m21, m11);\n          } else {\n            this._x = 0;\n            this._z = Math.atan2(-m12, m22);\n          }\n\n          break;\n\n        case 'YZX':\n          this._z = Math.asin(clamp$1(m21, -1, 1));\n\n          if (Math.abs(m21) < 0.9999999) {\n            this._x = Math.atan2(-m23, m22);\n            this._y = Math.atan2(-m31, m11);\n          } else {\n            this._x = 0;\n            this._y = Math.atan2(m13, m33);\n          }\n\n          break;\n\n        case 'XZY':\n          this._z = Math.asin(-clamp$1(m12, -1, 1));\n\n          if (Math.abs(m12) < 0.9999999) {\n            this._x = Math.atan2(m32, m22);\n            this._y = Math.atan2(m13, m11);\n          } else {\n            this._x = Math.atan2(-m23, m33);\n            this._y = 0;\n          }\n\n          break;\n\n        default:\n          console.warn('THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order);\n      }\n\n      this._order = order;\n      if (update === true) this._onChangeCallback();\n      return this;\n    }\n  }, {\n    key: \"setFromQuaternion\",\n    value: function setFromQuaternion(q, order, update) {\n      _matrix$1.makeRotationFromQuaternion(q);\n\n      return this.setFromRotationMatrix(_matrix$1, order, update);\n    }\n  }, {\n    key: \"setFromVector3\",\n    value: function setFromVector3(v) {\n      var order = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._order;\n      return this.set(v.x, v.y, v.z, order);\n    }\n  }, {\n    key: \"reorder\",\n    value: function reorder(newOrder) {\n      // WARNING: this discards revolution information -bhouston\n      _quaternion$3.setFromEuler(this);\n\n      return this.setFromQuaternion(_quaternion$3, newOrder);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(euler) {\n      return euler._x === this._x && euler._y === this._y && euler._z === this._z && euler._order === this._order;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      this._x = array[0];\n      this._y = array[1];\n      this._z = array[2];\n      if (array[3] !== undefined) this._order = array[3];\n\n      this._onChangeCallback();\n\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this._x;\n      array[offset + 1] = this._y;\n      array[offset + 2] = this._z;\n      array[offset + 3] = this._order;\n      return array;\n    }\n  }, {\n    key: \"toVector3\",\n    value: function toVector3(optionalResult) {\n      if (optionalResult) {\n        return optionalResult.set(this._x, this._y, this._z);\n      } else {\n        return new Vector3(this._x, this._y, this._z);\n      }\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(callback) {\n      this._onChangeCallback = callback;\n      return this;\n    }\n  }, {\n    key: \"_onChangeCallback\",\n    value: function _onChangeCallback() {}\n  }]);\n\n  return Euler;\n}();\n\nEuler.prototype.isEuler = true;\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'];\n\nvar Layers = /*#__PURE__*/function () {\n  function Layers() {\n    _classCallCheck(this, Layers);\n\n    this.mask = 1 | 0;\n  }\n\n  _createClass(Layers, [{\n    key: \"set\",\n    value: function set(channel) {\n      this.mask = 1 << channel | 0;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(channel) {\n      this.mask |= 1 << channel | 0;\n    }\n  }, {\n    key: \"enableAll\",\n    value: function enableAll() {\n      this.mask = 0xffffffff | 0;\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle(channel) {\n      this.mask ^= 1 << channel | 0;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable(channel) {\n      this.mask &= ~(1 << channel | 0);\n    }\n  }, {\n    key: \"disableAll\",\n    value: function disableAll() {\n      this.mask = 0;\n    }\n  }, {\n    key: \"test\",\n    value: function test(layers) {\n      return (this.mask & layers.mask) !== 0;\n    }\n  }]);\n\n  return Layers;\n}();\n\nvar _object3DId = 0;\n\nvar _v1$4 = /*@__PURE__*/new Vector3();\n\nvar _q1 = /*@__PURE__*/new Quaternion();\n\nvar _m1$1 = /*@__PURE__*/new Matrix4();\n\nvar _target = /*@__PURE__*/new Vector3();\n\nvar _position$3 = /*@__PURE__*/new Vector3();\n\nvar _scale$2 = /*@__PURE__*/new Vector3();\n\nvar _quaternion$2 = /*@__PURE__*/new Quaternion();\n\nvar _xAxis = /*@__PURE__*/new Vector3(1, 0, 0);\n\nvar _yAxis = /*@__PURE__*/new Vector3(0, 1, 0);\n\nvar _zAxis = /*@__PURE__*/new Vector3(0, 0, 1);\n\nvar _addedEvent = {\n  type: 'added'\n};\nvar _removedEvent = {\n  type: 'removed'\n};\n\nvar Object3D = /*#__PURE__*/function (_EventDispatcher3) {\n  _inherits(Object3D, _EventDispatcher3);\n\n  var _super7 = _createSuper(Object3D);\n\n  function Object3D() {\n    var _this14;\n\n    _classCallCheck(this, Object3D);\n\n    _this14 = _super7.call(this);\n    Object.defineProperty(_assertThisInitialized(_this14), 'id', {\n      value: _object3DId++\n    });\n    _this14.uuid = generateUUID();\n    _this14.name = '';\n    _this14.type = 'Object3D';\n    _this14.parent = null;\n    _this14.children = [];\n    _this14.up = Object3D.DefaultUp.clone();\n    var position = new Vector3();\n    var rotation = new Euler();\n    var quaternion = new Quaternion();\n    var scale = new Vector3(1, 1, 1);\n\n    function onRotationChange() {\n      quaternion.setFromEuler(rotation, false);\n    }\n\n    function onQuaternionChange() {\n      rotation.setFromQuaternion(quaternion, undefined, false);\n    }\n\n    rotation._onChange(onRotationChange);\n\n    quaternion._onChange(onQuaternionChange);\n\n    Object.defineProperties(_assertThisInitialized(_this14), {\n      position: {\n        configurable: true,\n        enumerable: true,\n        value: position\n      },\n      rotation: {\n        configurable: true,\n        enumerable: true,\n        value: rotation\n      },\n      quaternion: {\n        configurable: true,\n        enumerable: true,\n        value: quaternion\n      },\n      scale: {\n        configurable: true,\n        enumerable: true,\n        value: scale\n      },\n      modelViewMatrix: {\n        value: new Matrix4()\n      },\n      normalMatrix: {\n        value: new Matrix3()\n      }\n    });\n    _this14.matrix = new Matrix4();\n    _this14.matrixWorld = new Matrix4();\n    _this14.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n    _this14.matrixWorldNeedsUpdate = false;\n    _this14.layers = new Layers();\n    _this14.visible = true;\n    _this14.castShadow = false;\n    _this14.receiveShadow = false;\n    _this14.frustumCulled = true;\n    _this14.renderOrder = 0;\n    _this14.animations = [];\n    _this14.userData = {};\n    return _this14;\n  }\n\n  _createClass(Object3D, [{\n    key: \"onBeforeRender\",\n    value: function onBeforeRender() {}\n  }, {\n    key: \"onAfterRender\",\n    value: function onAfterRender() {}\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix) {\n      if (this.matrixAutoUpdate) this.updateMatrix();\n      this.matrix.premultiply(matrix);\n      this.matrix.decompose(this.position, this.quaternion, this.scale);\n    }\n  }, {\n    key: \"applyQuaternion\",\n    value: function applyQuaternion(q) {\n      this.quaternion.premultiply(q);\n      return this;\n    }\n  }, {\n    key: \"setRotationFromAxisAngle\",\n    value: function setRotationFromAxisAngle(axis, angle) {\n      // assumes axis is normalized\n      this.quaternion.setFromAxisAngle(axis, angle);\n    }\n  }, {\n    key: \"setRotationFromEuler\",\n    value: function setRotationFromEuler(euler) {\n      this.quaternion.setFromEuler(euler, true);\n    }\n  }, {\n    key: \"setRotationFromMatrix\",\n    value: function setRotationFromMatrix(m) {\n      // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n      this.quaternion.setFromRotationMatrix(m);\n    }\n  }, {\n    key: \"setRotationFromQuaternion\",\n    value: function setRotationFromQuaternion(q) {\n      // assumes q is normalized\n      this.quaternion.copy(q);\n    }\n  }, {\n    key: \"rotateOnAxis\",\n    value: function rotateOnAxis(axis, angle) {\n      // rotate object on axis in object space\n      // axis is assumed to be normalized\n      _q1.setFromAxisAngle(axis, angle);\n\n      this.quaternion.multiply(_q1);\n      return this;\n    }\n  }, {\n    key: \"rotateOnWorldAxis\",\n    value: function rotateOnWorldAxis(axis, angle) {\n      // rotate object on axis in world space\n      // axis is assumed to be normalized\n      // method assumes no rotated parent\n      _q1.setFromAxisAngle(axis, angle);\n\n      this.quaternion.premultiply(_q1);\n      return this;\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(angle) {\n      return this.rotateOnAxis(_xAxis, angle);\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(angle) {\n      return this.rotateOnAxis(_yAxis, angle);\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(angle) {\n      return this.rotateOnAxis(_zAxis, angle);\n    }\n  }, {\n    key: \"translateOnAxis\",\n    value: function translateOnAxis(axis, distance) {\n      // translate object by distance along axis in object space\n      // axis is assumed to be normalized\n      _v1$4.copy(axis).applyQuaternion(this.quaternion);\n\n      this.position.add(_v1$4.multiplyScalar(distance));\n      return this;\n    }\n  }, {\n    key: \"translateX\",\n    value: function translateX(distance) {\n      return this.translateOnAxis(_xAxis, distance);\n    }\n  }, {\n    key: \"translateY\",\n    value: function translateY(distance) {\n      return this.translateOnAxis(_yAxis, distance);\n    }\n  }, {\n    key: \"translateZ\",\n    value: function translateZ(distance) {\n      return this.translateOnAxis(_zAxis, distance);\n    }\n  }, {\n    key: \"localToWorld\",\n    value: function localToWorld(vector) {\n      return vector.applyMatrix4(this.matrixWorld);\n    }\n  }, {\n    key: \"worldToLocal\",\n    value: function worldToLocal(vector) {\n      return vector.applyMatrix4(_m1$1.copy(this.matrixWorld).invert());\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(x, y, z) {\n      // This method does not support objects having non-uniformly-scaled parent(s)\n      if (x.isVector3) {\n        _target.copy(x);\n      } else {\n        _target.set(x, y, z);\n      }\n\n      var parent = this.parent;\n      this.updateWorldMatrix(true, false);\n\n      _position$3.setFromMatrixPosition(this.matrixWorld);\n\n      if (this.isCamera || this.isLight) {\n        _m1$1.lookAt(_position$3, _target, this.up);\n      } else {\n        _m1$1.lookAt(_target, _position$3, this.up);\n      }\n\n      this.quaternion.setFromRotationMatrix(_m1$1);\n\n      if (parent) {\n        _m1$1.extractRotation(parent.matrixWorld);\n\n        _q1.setFromRotationMatrix(_m1$1);\n\n        this.quaternion.premultiply(_q1.invert());\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(object) {\n      if (arguments.length > 1) {\n        for (var _i24 = 0; _i24 < arguments.length; _i24++) {\n          this.add(arguments[_i24]);\n        }\n\n        return this;\n      }\n\n      if (object === this) {\n        console.error('THREE.Object3D.add: object can\\'t be added as a child of itself.', object);\n        return this;\n      }\n\n      if (object && object.isObject3D) {\n        if (object.parent !== null) {\n          object.parent.remove(object);\n        }\n\n        object.parent = this;\n        this.children.push(object);\n        object.dispatchEvent(_addedEvent);\n      } else {\n        console.error('THREE.Object3D.add: object not an instance of THREE.Object3D.', object);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(object) {\n      if (arguments.length > 1) {\n        for (var _i25 = 0; _i25 < arguments.length; _i25++) {\n          this.remove(arguments[_i25]);\n        }\n\n        return this;\n      }\n\n      var index = this.children.indexOf(object);\n\n      if (index !== -1) {\n        object.parent = null;\n        this.children.splice(index, 1);\n        object.dispatchEvent(_removedEvent);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"removeFromParent\",\n    value: function removeFromParent() {\n      var parent = this.parent;\n\n      if (parent !== null) {\n        parent.remove(this);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      for (var _i26 = 0; _i26 < this.children.length; _i26++) {\n        var object = this.children[_i26];\n        object.parent = null;\n        object.dispatchEvent(_removedEvent);\n      }\n\n      this.children.length = 0;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(object) {\n      // adds object as a child of this, while maintaining the object's world transform\n      this.updateWorldMatrix(true, false);\n\n      _m1$1.copy(this.matrixWorld).invert();\n\n      if (object.parent !== null) {\n        object.parent.updateWorldMatrix(true, false);\n\n        _m1$1.multiply(object.parent.matrixWorld);\n      }\n\n      object.applyMatrix4(_m1$1);\n      this.add(object);\n      object.updateWorldMatrix(false, true);\n      return this;\n    }\n  }, {\n    key: \"getObjectById\",\n    value: function getObjectById(id) {\n      return this.getObjectByProperty('id', id);\n    }\n  }, {\n    key: \"getObjectByName\",\n    value: function getObjectByName(name) {\n      return this.getObjectByProperty('name', name);\n    }\n  }, {\n    key: \"getObjectByProperty\",\n    value: function getObjectByProperty(name, value) {\n      if (this[name] === value) return this;\n\n      for (var _i27 = 0, _l7 = this.children.length; _i27 < _l7; _i27++) {\n        var child = this.children[_i27];\n        var object = child.getObjectByProperty(name, value);\n\n        if (object !== undefined) {\n          return object;\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"getWorldPosition\",\n    value: function getWorldPosition(target) {\n      this.updateWorldMatrix(true, false);\n      return target.setFromMatrixPosition(this.matrixWorld);\n    }\n  }, {\n    key: \"getWorldQuaternion\",\n    value: function getWorldQuaternion(target) {\n      this.updateWorldMatrix(true, false);\n      this.matrixWorld.decompose(_position$3, target, _scale$2);\n      return target;\n    }\n  }, {\n    key: \"getWorldScale\",\n    value: function getWorldScale(target) {\n      this.updateWorldMatrix(true, false);\n      this.matrixWorld.decompose(_position$3, _quaternion$2, target);\n      return target;\n    }\n  }, {\n    key: \"getWorldDirection\",\n    value: function getWorldDirection(target) {\n      this.updateWorldMatrix(true, false);\n      var e = this.matrixWorld.elements;\n      return target.set(e[8], e[9], e[10]).normalize();\n    }\n  }, {\n    key: \"raycast\",\n    value: function raycast() {}\n  }, {\n    key: \"traverse\",\n    value: function traverse(callback) {\n      callback(this);\n      var children = this.children;\n\n      for (var _i28 = 0, _l8 = children.length; _i28 < _l8; _i28++) {\n        children[_i28].traverse(callback);\n      }\n    }\n  }, {\n    key: \"traverseVisible\",\n    value: function traverseVisible(callback) {\n      if (this.visible === false) return;\n      callback(this);\n      var children = this.children;\n\n      for (var _i29 = 0, _l9 = children.length; _i29 < _l9; _i29++) {\n        children[_i29].traverseVisible(callback);\n      }\n    }\n  }, {\n    key: \"traverseAncestors\",\n    value: function traverseAncestors(callback) {\n      var parent = this.parent;\n\n      if (parent !== null) {\n        callback(parent);\n        parent.traverseAncestors(callback);\n      }\n    }\n  }, {\n    key: \"updateMatrix\",\n    value: function updateMatrix() {\n      this.matrix.compose(this.position, this.quaternion, this.scale);\n      this.matrixWorldNeedsUpdate = true;\n    }\n  }, {\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      if (this.matrixAutoUpdate) this.updateMatrix();\n\n      if (this.matrixWorldNeedsUpdate || force) {\n        if (this.parent === null) {\n          this.matrixWorld.copy(this.matrix);\n        } else {\n          this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n        }\n\n        this.matrixWorldNeedsUpdate = false;\n        force = true;\n      } // update children\n\n\n      var children = this.children;\n\n      for (var _i30 = 0, _l10 = children.length; _i30 < _l10; _i30++) {\n        children[_i30].updateMatrixWorld(force);\n      }\n    }\n  }, {\n    key: \"updateWorldMatrix\",\n    value: function updateWorldMatrix(updateParents, updateChildren) {\n      var parent = this.parent;\n\n      if (updateParents === true && parent !== null) {\n        parent.updateWorldMatrix(true, false);\n      }\n\n      if (this.matrixAutoUpdate) this.updateMatrix();\n\n      if (this.parent === null) {\n        this.matrixWorld.copy(this.matrix);\n      } else {\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      } // update children\n\n\n      if (updateChildren === true) {\n        var children = this.children;\n\n        for (var _i31 = 0, _l11 = children.length; _i31 < _l11; _i31++) {\n          children[_i31].updateWorldMatrix(false, true);\n        }\n      }\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      // meta is a string when called from JSON.stringify\n      var isRootObject = meta === undefined || typeof meta === 'string';\n      var output = {}; // meta is a hash used to collect geometries, materials.\n      // not providing it implies that this is the root object\n      // being serialized.\n\n      if (isRootObject) {\n        // initialize meta obj\n        meta = {\n          geometries: {},\n          materials: {},\n          textures: {},\n          images: {},\n          shapes: {},\n          skeletons: {},\n          animations: {}\n        };\n        output.metadata = {\n          version: 4.5,\n          type: 'Object',\n          generator: 'Object3D.toJSON'\n        };\n      } // standard Object3D serialization\n\n\n      var object = {};\n      object.uuid = this.uuid;\n      object.type = this.type;\n      if (this.name !== '') object.name = this.name;\n      if (this.castShadow === true) object.castShadow = true;\n      if (this.receiveShadow === true) object.receiveShadow = true;\n      if (this.visible === false) object.visible = false;\n      if (this.frustumCulled === false) object.frustumCulled = false;\n      if (this.renderOrder !== 0) object.renderOrder = this.renderOrder;\n      if (JSON.stringify(this.userData) !== '{}') object.userData = this.userData;\n      object.layers = this.layers.mask;\n      object.matrix = this.matrix.toArray();\n      if (this.matrixAutoUpdate === false) object.matrixAutoUpdate = false; // object specific properties\n\n      if (this.isInstancedMesh) {\n        object.type = 'InstancedMesh';\n        object.count = this.count;\n        object.instanceMatrix = this.instanceMatrix.toJSON();\n        if (this.instanceColor !== null) object.instanceColor = this.instanceColor.toJSON();\n      } //\n\n\n      function serialize(library, element) {\n        if (library[element.uuid] === undefined) {\n          library[element.uuid] = element.toJSON(meta);\n        }\n\n        return element.uuid;\n      }\n\n      if (this.isScene) {\n        if (this.background) {\n          if (this.background.isColor) {\n            object.background = this.background.toJSON();\n          } else if (this.background.isTexture) {\n            object.background = this.background.toJSON(meta).uuid;\n          }\n        }\n\n        if (this.environment && this.environment.isTexture) {\n          object.environment = this.environment.toJSON(meta).uuid;\n        }\n      } else if (this.isMesh || this.isLine || this.isPoints) {\n        object.geometry = serialize(meta.geometries, this.geometry);\n        var parameters = this.geometry.parameters;\n\n        if (parameters !== undefined && parameters.shapes !== undefined) {\n          var shapes = parameters.shapes;\n\n          if (Array.isArray(shapes)) {\n            for (var _i32 = 0, _l12 = shapes.length; _i32 < _l12; _i32++) {\n              var shape = shapes[_i32];\n              serialize(meta.shapes, shape);\n            }\n          } else {\n            serialize(meta.shapes, shapes);\n          }\n        }\n      }\n\n      if (this.isSkinnedMesh) {\n        object.bindMode = this.bindMode;\n        object.bindMatrix = this.bindMatrix.toArray();\n\n        if (this.skeleton !== undefined) {\n          serialize(meta.skeletons, this.skeleton);\n          object.skeleton = this.skeleton.uuid;\n        }\n      }\n\n      if (this.material !== undefined) {\n        if (Array.isArray(this.material)) {\n          var uuids = [];\n\n          for (var _i33 = 0, _l13 = this.material.length; _i33 < _l13; _i33++) {\n            uuids.push(serialize(meta.materials, this.material[_i33]));\n          }\n\n          object.material = uuids;\n        } else {\n          object.material = serialize(meta.materials, this.material);\n        }\n      } //\n\n\n      if (this.children.length > 0) {\n        object.children = [];\n\n        for (var _i34 = 0; _i34 < this.children.length; _i34++) {\n          object.children.push(this.children[_i34].toJSON(meta).object);\n        }\n      } //\n\n\n      if (this.animations.length > 0) {\n        object.animations = [];\n\n        for (var _i35 = 0; _i35 < this.animations.length; _i35++) {\n          var animation = this.animations[_i35];\n          object.animations.push(serialize(meta.animations, animation));\n        }\n      }\n\n      if (isRootObject) {\n        var geometries = extractFromCache(meta.geometries);\n        var materials = extractFromCache(meta.materials);\n        var textures = extractFromCache(meta.textures);\n        var images = extractFromCache(meta.images);\n\n        var _shapes = extractFromCache(meta.shapes);\n\n        var skeletons = extractFromCache(meta.skeletons);\n        var animations = extractFromCache(meta.animations);\n        if (geometries.length > 0) output.geometries = geometries;\n        if (materials.length > 0) output.materials = materials;\n        if (textures.length > 0) output.textures = textures;\n        if (images.length > 0) output.images = images;\n        if (_shapes.length > 0) output.shapes = _shapes;\n        if (skeletons.length > 0) output.skeletons = skeletons;\n        if (animations.length > 0) output.animations = animations;\n      }\n\n      output.object = object;\n      return output; // extract data from the cache hash\n      // remove metadata on each item\n      // and return as array\n\n      function extractFromCache(cache) {\n        var values = [];\n\n        for (var key in cache) {\n          var data = cache[key];\n          delete data.metadata;\n          values.push(data);\n        }\n\n        return values;\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(recursive) {\n      return new this.constructor().copy(this, recursive);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.name = source.name;\n      this.up.copy(source.up);\n      this.position.copy(source.position);\n      this.rotation.order = source.rotation.order;\n      this.quaternion.copy(source.quaternion);\n      this.scale.copy(source.scale);\n      this.matrix.copy(source.matrix);\n      this.matrixWorld.copy(source.matrixWorld);\n      this.matrixAutoUpdate = source.matrixAutoUpdate;\n      this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n      this.layers.mask = source.layers.mask;\n      this.visible = source.visible;\n      this.castShadow = source.castShadow;\n      this.receiveShadow = source.receiveShadow;\n      this.frustumCulled = source.frustumCulled;\n      this.renderOrder = source.renderOrder;\n      this.userData = JSON.parse(JSON.stringify(source.userData));\n\n      if (recursive === true) {\n        for (var _i36 = 0; _i36 < source.children.length; _i36++) {\n          var child = source.children[_i36];\n          this.add(child.clone());\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return Object3D;\n}(EventDispatcher);\n\nObject3D.DefaultUp = new Vector3(0, 1, 0);\nObject3D.DefaultMatrixAutoUpdate = true;\nObject3D.prototype.isObject3D = true;\n\nvar _v0$1 = /*@__PURE__*/new Vector3();\n\nvar _v1$3 = /*@__PURE__*/new Vector3();\n\nvar _v2$2 = /*@__PURE__*/new Vector3();\n\nvar _v3$1 = /*@__PURE__*/new Vector3();\n\nvar _vab = /*@__PURE__*/new Vector3();\n\nvar _vac = /*@__PURE__*/new Vector3();\n\nvar _vbc = /*@__PURE__*/new Vector3();\n\nvar _vap = /*@__PURE__*/new Vector3();\n\nvar _vbp = /*@__PURE__*/new Vector3();\n\nvar _vcp = /*@__PURE__*/new Vector3();\n\nvar Triangle = /*#__PURE__*/function () {\n  function Triangle() {\n    var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n    var c = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector3();\n\n    _classCallCheck(this, Triangle);\n\n    this.a = a;\n    this.b = b;\n    this.c = c;\n  }\n\n  _createClass(Triangle, [{\n    key: \"set\",\n    value: function set(a, b, c) {\n      this.a.copy(a);\n      this.b.copy(b);\n      this.c.copy(c);\n      return this;\n    }\n  }, {\n    key: \"setFromPointsAndIndices\",\n    value: function setFromPointsAndIndices(points, i0, i1, i2) {\n      this.a.copy(points[i0]);\n      this.b.copy(points[i1]);\n      this.c.copy(points[i2]);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(triangle) {\n      this.a.copy(triangle.a);\n      this.b.copy(triangle.b);\n      this.c.copy(triangle.c);\n      return this;\n    }\n  }, {\n    key: \"getArea\",\n    value: function getArea() {\n      _v0$1.subVectors(this.c, this.b);\n\n      _v1$3.subVectors(this.a, this.b);\n\n      return _v0$1.cross(_v1$3).length() * 0.5;\n    }\n  }, {\n    key: \"getMidpoint\",\n    value: function getMidpoint(target) {\n      return target.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);\n    }\n  }, {\n    key: \"getNormal\",\n    value: function getNormal(target) {\n      return Triangle.getNormal(this.a, this.b, this.c, target);\n    }\n  }, {\n    key: \"getPlane\",\n    value: function getPlane(target) {\n      return target.setFromCoplanarPoints(this.a, this.b, this.c);\n    }\n  }, {\n    key: \"getBarycoord\",\n    value: function getBarycoord(point, target) {\n      return Triangle.getBarycoord(point, this.a, this.b, this.c, target);\n    }\n  }, {\n    key: \"getUV\",\n    value: function getUV(point, uv1, uv2, uv3, target) {\n      return Triangle.getUV(point, this.a, this.b, this.c, uv1, uv2, uv3, target);\n    }\n  }, {\n    key: \"containsPoint\",\n    value: function containsPoint(point) {\n      return Triangle.containsPoint(point, this.a, this.b, this.c);\n    }\n  }, {\n    key: \"isFrontFacing\",\n    value: function isFrontFacing(direction) {\n      return Triangle.isFrontFacing(this.a, this.b, this.c, direction);\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      return box.intersectsTriangle(this);\n    }\n  }, {\n    key: \"closestPointToPoint\",\n    value: function closestPointToPoint(p, target) {\n      var a = this.a,\n          b = this.b,\n          c = this.c;\n      var v, w; // algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n      // published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n      // under the accompanying license; see chapter 5.1.5 for detailed explanation.\n      // basically, we're distinguishing which of the voronoi regions of the triangle\n      // the point lies in with the minimum amount of redundant computation.\n\n      _vab.subVectors(b, a);\n\n      _vac.subVectors(c, a);\n\n      _vap.subVectors(p, a);\n\n      var d1 = _vab.dot(_vap);\n\n      var d2 = _vac.dot(_vap);\n\n      if (d1 <= 0 && d2 <= 0) {\n        // vertex region of A; barycentric coords (1, 0, 0)\n        return target.copy(a);\n      }\n\n      _vbp.subVectors(p, b);\n\n      var d3 = _vab.dot(_vbp);\n\n      var d4 = _vac.dot(_vbp);\n\n      if (d3 >= 0 && d4 <= d3) {\n        // vertex region of B; barycentric coords (0, 1, 0)\n        return target.copy(b);\n      }\n\n      var vc = d1 * d4 - d3 * d2;\n\n      if (vc <= 0 && d1 >= 0 && d3 <= 0) {\n        v = d1 / (d1 - d3); // edge region of AB; barycentric coords (1-v, v, 0)\n\n        return target.copy(a).addScaledVector(_vab, v);\n      }\n\n      _vcp.subVectors(p, c);\n\n      var d5 = _vab.dot(_vcp);\n\n      var d6 = _vac.dot(_vcp);\n\n      if (d6 >= 0 && d5 <= d6) {\n        // vertex region of C; barycentric coords (0, 0, 1)\n        return target.copy(c);\n      }\n\n      var vb = d5 * d2 - d1 * d6;\n\n      if (vb <= 0 && d2 >= 0 && d6 <= 0) {\n        w = d2 / (d2 - d6); // edge region of AC; barycentric coords (1-w, 0, w)\n\n        return target.copy(a).addScaledVector(_vac, w);\n      }\n\n      var va = d3 * d6 - d5 * d4;\n\n      if (va <= 0 && d4 - d3 >= 0 && d5 - d6 >= 0) {\n        _vbc.subVectors(c, b);\n\n        w = (d4 - d3) / (d4 - d3 + (d5 - d6)); // edge region of BC; barycentric coords (0, 1-w, w)\n\n        return target.copy(b).addScaledVector(_vbc, w); // edge region of BC\n      } // face region\n\n\n      var denom = 1 / (va + vb + vc); // u = va * denom\n\n      v = vb * denom;\n      w = vc * denom;\n      return target.copy(a).addScaledVector(_vab, v).addScaledVector(_vac, w);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(triangle) {\n      return triangle.a.equals(this.a) && triangle.b.equals(this.b) && triangle.c.equals(this.c);\n    }\n  }], [{\n    key: \"getNormal\",\n    value: function getNormal(a, b, c, target) {\n      target.subVectors(c, b);\n\n      _v0$1.subVectors(a, b);\n\n      target.cross(_v0$1);\n      var targetLengthSq = target.lengthSq();\n\n      if (targetLengthSq > 0) {\n        return target.multiplyScalar(1 / Math.sqrt(targetLengthSq));\n      }\n\n      return target.set(0, 0, 0);\n    } // static/instance method to calculate barycentric coordinates\n    // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\n  }, {\n    key: \"getBarycoord\",\n    value: function getBarycoord(point, a, b, c, target) {\n      _v0$1.subVectors(c, a);\n\n      _v1$3.subVectors(b, a);\n\n      _v2$2.subVectors(point, a);\n\n      var dot00 = _v0$1.dot(_v0$1);\n\n      var dot01 = _v0$1.dot(_v1$3);\n\n      var dot02 = _v0$1.dot(_v2$2);\n\n      var dot11 = _v1$3.dot(_v1$3);\n\n      var dot12 = _v1$3.dot(_v2$2);\n\n      var denom = dot00 * dot11 - dot01 * dot01; // collinear or singular triangle\n\n      if (denom === 0) {\n        // arbitrary location outside of triangle?\n        // not sure if this is the best idea, maybe should be returning undefined\n        return target.set(-2, -1, -1);\n      }\n\n      var invDenom = 1 / denom;\n      var u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n      var v = (dot00 * dot12 - dot01 * dot02) * invDenom; // barycentric coordinates must always sum to 1\n\n      return target.set(1 - u - v, v, u);\n    }\n  }, {\n    key: \"containsPoint\",\n    value: function containsPoint(point, a, b, c) {\n      this.getBarycoord(point, a, b, c, _v3$1);\n      return _v3$1.x >= 0 && _v3$1.y >= 0 && _v3$1.x + _v3$1.y <= 1;\n    }\n  }, {\n    key: \"getUV\",\n    value: function getUV(point, p1, p2, p3, uv1, uv2, uv3, target) {\n      this.getBarycoord(point, p1, p2, p3, _v3$1);\n      target.set(0, 0);\n      target.addScaledVector(uv1, _v3$1.x);\n      target.addScaledVector(uv2, _v3$1.y);\n      target.addScaledVector(uv3, _v3$1.z);\n      return target;\n    }\n  }, {\n    key: \"isFrontFacing\",\n    value: function isFrontFacing(a, b, c, direction) {\n      _v0$1.subVectors(c, b);\n\n      _v1$3.subVectors(a, b); // strictly front facing\n\n\n      return _v0$1.cross(_v1$3).dot(direction) < 0 ? true : false;\n    }\n  }]);\n\n  return Triangle;\n}();\n\nvar materialId = 0;\n\nvar Material$1 = /*#__PURE__*/function (_EventDispatcher4) {\n  _inherits(Material$1, _EventDispatcher4);\n\n  var _super8 = _createSuper(Material$1);\n\n  function Material$1() {\n    var _this15;\n\n    _classCallCheck(this, Material$1);\n\n    _this15 = _super8.call(this);\n    Object.defineProperty(_assertThisInitialized(_this15), 'id', {\n      value: materialId++\n    });\n    _this15.uuid = generateUUID();\n    _this15.name = '';\n    _this15.type = 'Material';\n    _this15.fog = true;\n    _this15.blending = NormalBlending;\n    _this15.side = FrontSide;\n    _this15.vertexColors = false;\n    _this15.opacity = 1;\n    _this15.transparent = false;\n    _this15.blendSrc = SrcAlphaFactor;\n    _this15.blendDst = OneMinusSrcAlphaFactor;\n    _this15.blendEquation = AddEquation;\n    _this15.blendSrcAlpha = null;\n    _this15.blendDstAlpha = null;\n    _this15.blendEquationAlpha = null;\n    _this15.depthFunc = LessEqualDepth;\n    _this15.depthTest = true;\n    _this15.depthWrite = true;\n    _this15.stencilWriteMask = 0xff;\n    _this15.stencilFunc = AlwaysStencilFunc;\n    _this15.stencilRef = 0;\n    _this15.stencilFuncMask = 0xff;\n    _this15.stencilFail = KeepStencilOp;\n    _this15.stencilZFail = KeepStencilOp;\n    _this15.stencilZPass = KeepStencilOp;\n    _this15.stencilWrite = false;\n    _this15.clippingPlanes = null;\n    _this15.clipIntersection = false;\n    _this15.clipShadows = false;\n    _this15.shadowSide = null;\n    _this15.colorWrite = true;\n    _this15.precision = null; // override the renderer's default precision for this material\n\n    _this15.polygonOffset = false;\n    _this15.polygonOffsetFactor = 0;\n    _this15.polygonOffsetUnits = 0;\n    _this15.dithering = false;\n    _this15.alphaTest = 0;\n    _this15.alphaToCoverage = false;\n    _this15.premultipliedAlpha = false;\n    _this15.visible = true;\n    _this15.toneMapped = true;\n    _this15.userData = {};\n    _this15.version = 0;\n    return _this15;\n  }\n\n  _createClass(Material$1, [{\n    key: \"onBuild\",\n    value: function onBuild() {}\n  }, {\n    key: \"onBeforeCompile\",\n    value: function onBeforeCompile() {}\n  }, {\n    key: \"customProgramCacheKey\",\n    value: function customProgramCacheKey() {\n      return this.onBeforeCompile.toString();\n    }\n  }, {\n    key: \"setValues\",\n    value: function setValues(values) {\n      if (values === undefined) return;\n\n      for (var key in values) {\n        var newValue = values[key];\n\n        if (newValue === undefined) {\n          console.warn('THREE.Material: \\'' + key + '\\' parameter is undefined.');\n          continue;\n        } // for backward compatability if shading is set in the constructor\n\n\n        if (key === 'shading') {\n          console.warn('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n          this.flatShading = newValue === FlatShading ? true : false;\n          continue;\n        }\n\n        var currentValue = this[key];\n\n        if (currentValue === undefined) {\n          console.warn('THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.');\n          continue;\n        }\n\n        if (currentValue && currentValue.isColor) {\n          currentValue.set(newValue);\n        } else if (currentValue && currentValue.isVector3 && newValue && newValue.isVector3) {\n          currentValue.copy(newValue);\n        } else {\n          this[key] = newValue;\n        }\n      }\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var isRoot = meta === undefined || typeof meta === 'string';\n\n      if (isRoot) {\n        meta = {\n          textures: {},\n          images: {}\n        };\n      }\n\n      var data = {\n        metadata: {\n          version: 4.5,\n          type: 'Material',\n          generator: 'Material.toJSON'\n        }\n      }; // standard Material serialization\n\n      data.uuid = this.uuid;\n      data.type = this.type;\n      if (this.name !== '') data.name = this.name;\n      if (this.color && this.color.isColor) data.color = this.color.getHex();\n      if (this.roughness !== undefined) data.roughness = this.roughness;\n      if (this.metalness !== undefined) data.metalness = this.metalness;\n      if (this.sheen && this.sheen.isColor) data.sheen = this.sheen.getHex();\n      if (this.emissive && this.emissive.isColor) data.emissive = this.emissive.getHex();\n      if (this.emissiveIntensity && this.emissiveIntensity !== 1) data.emissiveIntensity = this.emissiveIntensity;\n      if (this.specular && this.specular.isColor) data.specular = this.specular.getHex();\n      if (this.specularIntensity !== undefined) data.specularIntensity = this.specularIntensity;\n      if (this.specularTint && this.specularTint.isColor) data.specularTint = this.specularTint.getHex();\n      if (this.shininess !== undefined) data.shininess = this.shininess;\n      if (this.clearcoat !== undefined) data.clearcoat = this.clearcoat;\n      if (this.clearcoatRoughness !== undefined) data.clearcoatRoughness = this.clearcoatRoughness;\n\n      if (this.clearcoatMap && this.clearcoatMap.isTexture) {\n        data.clearcoatMap = this.clearcoatMap.toJSON(meta).uuid;\n      }\n\n      if (this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture) {\n        data.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(meta).uuid;\n      }\n\n      if (this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture) {\n        data.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(meta).uuid;\n        data.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n      }\n\n      if (this.map && this.map.isTexture) data.map = this.map.toJSON(meta).uuid;\n      if (this.matcap && this.matcap.isTexture) data.matcap = this.matcap.toJSON(meta).uuid;\n      if (this.alphaMap && this.alphaMap.isTexture) data.alphaMap = this.alphaMap.toJSON(meta).uuid;\n\n      if (this.lightMap && this.lightMap.isTexture) {\n        data.lightMap = this.lightMap.toJSON(meta).uuid;\n        data.lightMapIntensity = this.lightMapIntensity;\n      }\n\n      if (this.aoMap && this.aoMap.isTexture) {\n        data.aoMap = this.aoMap.toJSON(meta).uuid;\n        data.aoMapIntensity = this.aoMapIntensity;\n      }\n\n      if (this.bumpMap && this.bumpMap.isTexture) {\n        data.bumpMap = this.bumpMap.toJSON(meta).uuid;\n        data.bumpScale = this.bumpScale;\n      }\n\n      if (this.normalMap && this.normalMap.isTexture) {\n        data.normalMap = this.normalMap.toJSON(meta).uuid;\n        data.normalMapType = this.normalMapType;\n        data.normalScale = this.normalScale.toArray();\n      }\n\n      if (this.displacementMap && this.displacementMap.isTexture) {\n        data.displacementMap = this.displacementMap.toJSON(meta).uuid;\n        data.displacementScale = this.displacementScale;\n        data.displacementBias = this.displacementBias;\n      }\n\n      if (this.roughnessMap && this.roughnessMap.isTexture) data.roughnessMap = this.roughnessMap.toJSON(meta).uuid;\n      if (this.metalnessMap && this.metalnessMap.isTexture) data.metalnessMap = this.metalnessMap.toJSON(meta).uuid;\n      if (this.emissiveMap && this.emissiveMap.isTexture) data.emissiveMap = this.emissiveMap.toJSON(meta).uuid;\n      if (this.specularMap && this.specularMap.isTexture) data.specularMap = this.specularMap.toJSON(meta).uuid;\n      if (this.specularIntensityMap && this.specularIntensityMap.isTexture) data.specularIntensityMap = this.specularIntensityMap.toJSON(meta).uuid;\n      if (this.specularTintMap && this.specularTintMap.isTexture) data.specularTintMap = this.specularTintMap.toJSON(meta).uuid;\n\n      if (this.envMap && this.envMap.isTexture) {\n        data.envMap = this.envMap.toJSON(meta).uuid;\n        if (this.combine !== undefined) data.combine = this.combine;\n      }\n\n      if (this.envMapIntensity !== undefined) data.envMapIntensity = this.envMapIntensity;\n      if (this.reflectivity !== undefined) data.reflectivity = this.reflectivity;\n      if (this.refractionRatio !== undefined) data.refractionRatio = this.refractionRatio;\n\n      if (this.gradientMap && this.gradientMap.isTexture) {\n        data.gradientMap = this.gradientMap.toJSON(meta).uuid;\n      }\n\n      if (this.transmission !== undefined) data.transmission = this.transmission;\n      if (this.transmissionMap && this.transmissionMap.isTexture) data.transmissionMap = this.transmissionMap.toJSON(meta).uuid;\n      if (this.thickness !== undefined) data.thickness = this.thickness;\n      if (this.thicknessMap && this.thicknessMap.isTexture) data.thicknessMap = this.thicknessMap.toJSON(meta).uuid;\n      if (this.attenuationDistance !== undefined) data.attenuationDistance = this.attenuationDistance;\n      if (this.attenuationTint !== undefined) data.attenuationTint = this.attenuationTint.getHex();\n      if (this.size !== undefined) data.size = this.size;\n      if (this.shadowSide !== null) data.shadowSide = this.shadowSide;\n      if (this.sizeAttenuation !== undefined) data.sizeAttenuation = this.sizeAttenuation;\n      if (this.blending !== NormalBlending) data.blending = this.blending;\n      if (this.side !== FrontSide) data.side = this.side;\n      if (this.vertexColors) data.vertexColors = true;\n      if (this.opacity < 1) data.opacity = this.opacity;\n      if (this.transparent === true) data.transparent = this.transparent;\n      data.depthFunc = this.depthFunc;\n      data.depthTest = this.depthTest;\n      data.depthWrite = this.depthWrite;\n      data.colorWrite = this.colorWrite;\n      data.stencilWrite = this.stencilWrite;\n      data.stencilWriteMask = this.stencilWriteMask;\n      data.stencilFunc = this.stencilFunc;\n      data.stencilRef = this.stencilRef;\n      data.stencilFuncMask = this.stencilFuncMask;\n      data.stencilFail = this.stencilFail;\n      data.stencilZFail = this.stencilZFail;\n      data.stencilZPass = this.stencilZPass; // rotation (SpriteMaterial)\n\n      if (this.rotation && this.rotation !== 0) data.rotation = this.rotation;\n      if (this.polygonOffset === true) data.polygonOffset = true;\n      if (this.polygonOffsetFactor !== 0) data.polygonOffsetFactor = this.polygonOffsetFactor;\n      if (this.polygonOffsetUnits !== 0) data.polygonOffsetUnits = this.polygonOffsetUnits;\n      if (this.linewidth && this.linewidth !== 1) data.linewidth = this.linewidth;\n      if (this.dashSize !== undefined) data.dashSize = this.dashSize;\n      if (this.gapSize !== undefined) data.gapSize = this.gapSize;\n      if (this.scale !== undefined) data.scale = this.scale;\n      if (this.dithering === true) data.dithering = true;\n      if (this.alphaTest > 0) data.alphaTest = this.alphaTest;\n      if (this.alphaToCoverage === true) data.alphaToCoverage = this.alphaToCoverage;\n      if (this.premultipliedAlpha === true) data.premultipliedAlpha = this.premultipliedAlpha;\n      if (this.wireframe === true) data.wireframe = this.wireframe;\n      if (this.wireframeLinewidth > 1) data.wireframeLinewidth = this.wireframeLinewidth;\n      if (this.wireframeLinecap !== 'round') data.wireframeLinecap = this.wireframeLinecap;\n      if (this.wireframeLinejoin !== 'round') data.wireframeLinejoin = this.wireframeLinejoin;\n      if (this.flatShading === true) data.flatShading = this.flatShading;\n      if (this.visible === false) data.visible = false;\n      if (this.toneMapped === false) data.toneMapped = false;\n      if (JSON.stringify(this.userData) !== '{}') data.userData = this.userData; // TODO: Copied from Object3D.toJSON\n\n      function extractFromCache(cache) {\n        var values = [];\n\n        for (var key in cache) {\n          var _data = cache[key];\n          delete _data.metadata;\n          values.push(_data);\n        }\n\n        return values;\n      }\n\n      if (isRoot) {\n        var textures = extractFromCache(meta.textures);\n        var images = extractFromCache(meta.images);\n        if (textures.length > 0) data.textures = textures;\n        if (images.length > 0) data.images = images;\n      }\n\n      return data;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.name = source.name;\n      this.fog = source.fog;\n      this.blending = source.blending;\n      this.side = source.side;\n      this.vertexColors = source.vertexColors;\n      this.opacity = source.opacity;\n      this.transparent = source.transparent;\n      this.blendSrc = source.blendSrc;\n      this.blendDst = source.blendDst;\n      this.blendEquation = source.blendEquation;\n      this.blendSrcAlpha = source.blendSrcAlpha;\n      this.blendDstAlpha = source.blendDstAlpha;\n      this.blendEquationAlpha = source.blendEquationAlpha;\n      this.depthFunc = source.depthFunc;\n      this.depthTest = source.depthTest;\n      this.depthWrite = source.depthWrite;\n      this.stencilWriteMask = source.stencilWriteMask;\n      this.stencilFunc = source.stencilFunc;\n      this.stencilRef = source.stencilRef;\n      this.stencilFuncMask = source.stencilFuncMask;\n      this.stencilFail = source.stencilFail;\n      this.stencilZFail = source.stencilZFail;\n      this.stencilZPass = source.stencilZPass;\n      this.stencilWrite = source.stencilWrite;\n      var srcPlanes = source.clippingPlanes;\n      var dstPlanes = null;\n\n      if (srcPlanes !== null) {\n        var _n3 = srcPlanes.length;\n        dstPlanes = new Array(_n3);\n\n        for (var _i37 = 0; _i37 !== _n3; ++_i37) {\n          dstPlanes[_i37] = srcPlanes[_i37].clone();\n        }\n      }\n\n      this.clippingPlanes = dstPlanes;\n      this.clipIntersection = source.clipIntersection;\n      this.clipShadows = source.clipShadows;\n      this.shadowSide = source.shadowSide;\n      this.colorWrite = source.colorWrite;\n      this.precision = source.precision;\n      this.polygonOffset = source.polygonOffset;\n      this.polygonOffsetFactor = source.polygonOffsetFactor;\n      this.polygonOffsetUnits = source.polygonOffsetUnits;\n      this.dithering = source.dithering;\n      this.alphaTest = source.alphaTest;\n      this.alphaToCoverage = source.alphaToCoverage;\n      this.premultipliedAlpha = source.premultipliedAlpha;\n      this.visible = source.visible;\n      this.toneMapped = source.toneMapped;\n      this.userData = JSON.parse(JSON.stringify(source.userData));\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }, {\n    key: \"needsUpdate\",\n    set: function set(value) {\n      if (value === true) this.version++;\n    }\n  }]);\n\n  return Material$1;\n}(EventDispatcher);\n\nMaterial$1.prototype.isMaterial = true;\nvar _colorKeywords = {\n  'aliceblue': 0xF0F8FF,\n  'antiquewhite': 0xFAEBD7,\n  'aqua': 0x00FFFF,\n  'aquamarine': 0x7FFFD4,\n  'azure': 0xF0FFFF,\n  'beige': 0xF5F5DC,\n  'bisque': 0xFFE4C4,\n  'black': 0x000000,\n  'blanchedalmond': 0xFFEBCD,\n  'blue': 0x0000FF,\n  'blueviolet': 0x8A2BE2,\n  'brown': 0xA52A2A,\n  'burlywood': 0xDEB887,\n  'cadetblue': 0x5F9EA0,\n  'chartreuse': 0x7FFF00,\n  'chocolate': 0xD2691E,\n  'coral': 0xFF7F50,\n  'cornflowerblue': 0x6495ED,\n  'cornsilk': 0xFFF8DC,\n  'crimson': 0xDC143C,\n  'cyan': 0x00FFFF,\n  'darkblue': 0x00008B,\n  'darkcyan': 0x008B8B,\n  'darkgoldenrod': 0xB8860B,\n  'darkgray': 0xA9A9A9,\n  'darkgreen': 0x006400,\n  'darkgrey': 0xA9A9A9,\n  'darkkhaki': 0xBDB76B,\n  'darkmagenta': 0x8B008B,\n  'darkolivegreen': 0x556B2F,\n  'darkorange': 0xFF8C00,\n  'darkorchid': 0x9932CC,\n  'darkred': 0x8B0000,\n  'darksalmon': 0xE9967A,\n  'darkseagreen': 0x8FBC8F,\n  'darkslateblue': 0x483D8B,\n  'darkslategray': 0x2F4F4F,\n  'darkslategrey': 0x2F4F4F,\n  'darkturquoise': 0x00CED1,\n  'darkviolet': 0x9400D3,\n  'deeppink': 0xFF1493,\n  'deepskyblue': 0x00BFFF,\n  'dimgray': 0x696969,\n  'dimgrey': 0x696969,\n  'dodgerblue': 0x1E90FF,\n  'firebrick': 0xB22222,\n  'floralwhite': 0xFFFAF0,\n  'forestgreen': 0x228B22,\n  'fuchsia': 0xFF00FF,\n  'gainsboro': 0xDCDCDC,\n  'ghostwhite': 0xF8F8FF,\n  'gold': 0xFFD700,\n  'goldenrod': 0xDAA520,\n  'gray': 0x808080,\n  'green': 0x008000,\n  'greenyellow': 0xADFF2F,\n  'grey': 0x808080,\n  'honeydew': 0xF0FFF0,\n  'hotpink': 0xFF69B4,\n  'indianred': 0xCD5C5C,\n  'indigo': 0x4B0082,\n  'ivory': 0xFFFFF0,\n  'khaki': 0xF0E68C,\n  'lavender': 0xE6E6FA,\n  'lavenderblush': 0xFFF0F5,\n  'lawngreen': 0x7CFC00,\n  'lemonchiffon': 0xFFFACD,\n  'lightblue': 0xADD8E6,\n  'lightcoral': 0xF08080,\n  'lightcyan': 0xE0FFFF,\n  'lightgoldenrodyellow': 0xFAFAD2,\n  'lightgray': 0xD3D3D3,\n  'lightgreen': 0x90EE90,\n  'lightgrey': 0xD3D3D3,\n  'lightpink': 0xFFB6C1,\n  'lightsalmon': 0xFFA07A,\n  'lightseagreen': 0x20B2AA,\n  'lightskyblue': 0x87CEFA,\n  'lightslategray': 0x778899,\n  'lightslategrey': 0x778899,\n  'lightsteelblue': 0xB0C4DE,\n  'lightyellow': 0xFFFFE0,\n  'lime': 0x00FF00,\n  'limegreen': 0x32CD32,\n  'linen': 0xFAF0E6,\n  'magenta': 0xFF00FF,\n  'maroon': 0x800000,\n  'mediumaquamarine': 0x66CDAA,\n  'mediumblue': 0x0000CD,\n  'mediumorchid': 0xBA55D3,\n  'mediumpurple': 0x9370DB,\n  'mediumseagreen': 0x3CB371,\n  'mediumslateblue': 0x7B68EE,\n  'mediumspringgreen': 0x00FA9A,\n  'mediumturquoise': 0x48D1CC,\n  'mediumvioletred': 0xC71585,\n  'midnightblue': 0x191970,\n  'mintcream': 0xF5FFFA,\n  'mistyrose': 0xFFE4E1,\n  'moccasin': 0xFFE4B5,\n  'navajowhite': 0xFFDEAD,\n  'navy': 0x000080,\n  'oldlace': 0xFDF5E6,\n  'olive': 0x808000,\n  'olivedrab': 0x6B8E23,\n  'orange': 0xFFA500,\n  'orangered': 0xFF4500,\n  'orchid': 0xDA70D6,\n  'palegoldenrod': 0xEEE8AA,\n  'palegreen': 0x98FB98,\n  'paleturquoise': 0xAFEEEE,\n  'palevioletred': 0xDB7093,\n  'papayawhip': 0xFFEFD5,\n  'peachpuff': 0xFFDAB9,\n  'peru': 0xCD853F,\n  'pink': 0xFFC0CB,\n  'plum': 0xDDA0DD,\n  'powderblue': 0xB0E0E6,\n  'purple': 0x800080,\n  'rebeccapurple': 0x663399,\n  'red': 0xFF0000,\n  'rosybrown': 0xBC8F8F,\n  'royalblue': 0x4169E1,\n  'saddlebrown': 0x8B4513,\n  'salmon': 0xFA8072,\n  'sandybrown': 0xF4A460,\n  'seagreen': 0x2E8B57,\n  'seashell': 0xFFF5EE,\n  'sienna': 0xA0522D,\n  'silver': 0xC0C0C0,\n  'skyblue': 0x87CEEB,\n  'slateblue': 0x6A5ACD,\n  'slategray': 0x708090,\n  'slategrey': 0x708090,\n  'snow': 0xFFFAFA,\n  'springgreen': 0x00FF7F,\n  'steelblue': 0x4682B4,\n  'tan': 0xD2B48C,\n  'teal': 0x008080,\n  'thistle': 0xD8BFD8,\n  'tomato': 0xFF6347,\n  'turquoise': 0x40E0D0,\n  'violet': 0xEE82EE,\n  'wheat': 0xF5DEB3,\n  'white': 0xFFFFFF,\n  'whitesmoke': 0xF5F5F5,\n  'yellow': 0xFFFF00,\n  'yellowgreen': 0x9ACD32\n};\nvar _hslA = {\n  h: 0,\n  s: 0,\n  l: 0\n};\nvar _hslB = {\n  h: 0,\n  s: 0,\n  l: 0\n};\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * 6 * (2 / 3 - t);\n  return p;\n}\n\nfunction SRGBToLinear(c) {\n  return c < 0.04045 ? c * 0.0773993808 : Math.pow(c * 0.9478672986 + 0.0521327014, 2.4);\n}\n\nfunction LinearToSRGB(c) {\n  return c < 0.0031308 ? c * 12.92 : 1.055 * Math.pow(c, 0.41666) - 0.055;\n}\n\nvar Color = /*#__PURE__*/function () {\n  function Color(r, g, b) {\n    _classCallCheck(this, Color);\n\n    if (g === undefined && b === undefined) {\n      // r is THREE.Color, hex or string\n      return this.set(r);\n    }\n\n    return this.setRGB(r, g, b);\n  }\n\n  _createClass(Color, [{\n    key: \"set\",\n    value: function set(value) {\n      if (value && value.isColor) {\n        this.copy(value);\n      } else if (typeof value === 'number') {\n        this.setHex(value);\n      } else if (typeof value === 'string') {\n        this.setStyle(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(scalar) {\n      this.r = scalar;\n      this.g = scalar;\n      this.b = scalar;\n      return this;\n    }\n  }, {\n    key: \"setHex\",\n    value: function setHex(hex) {\n      hex = Math.floor(hex);\n      this.r = (hex >> 16 & 255) / 255;\n      this.g = (hex >> 8 & 255) / 255;\n      this.b = (hex & 255) / 255;\n      return this;\n    }\n  }, {\n    key: \"setRGB\",\n    value: function setRGB(r, g, b) {\n      this.r = r;\n      this.g = g;\n      this.b = b;\n      return this;\n    }\n  }, {\n    key: \"setHSL\",\n    value: function setHSL(h, s, l) {\n      // h,s,l ranges are in 0.0 - 1.0\n      h = euclideanModulo(h, 1);\n      s = clamp$1(s, 0, 1);\n      l = clamp$1(l, 0, 1);\n\n      if (s === 0) {\n        this.r = this.g = this.b = l;\n      } else {\n        var _p3 = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n\n        var q = 2 * l - _p3;\n        this.r = hue2rgb(q, _p3, h + 1 / 3);\n        this.g = hue2rgb(q, _p3, h);\n        this.b = hue2rgb(q, _p3, h - 1 / 3);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setStyle\",\n    value: function setStyle(style) {\n      function handleAlpha(string) {\n        if (string === undefined) return;\n\n        if (parseFloat(string) < 1) {\n          console.warn('THREE.Color: Alpha component of ' + style + ' will be ignored.');\n        }\n      }\n\n      var m;\n\n      if (m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec(style)) {\n        // rgb / hsl\n        var color;\n        var name = m[1];\n        var components = m[2];\n\n        switch (name) {\n          case 'rgb':\n          case 'rgba':\n            if (color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(components)) {\n              // rgb(255,0,0) rgba(255,0,0,0.5)\n              this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n              this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n              this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n              handleAlpha(color[4]);\n              return this;\n            }\n\n            if (color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(components)) {\n              // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n              this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n              this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n              this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n              handleAlpha(color[4]);\n              return this;\n            }\n\n            break;\n\n          case 'hsl':\n          case 'hsla':\n            if (color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(components)) {\n              // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n              var h = parseFloat(color[1]) / 360;\n\n              var _s10 = parseInt(color[2], 10) / 100;\n\n              var _l14 = parseInt(color[3], 10) / 100;\n\n              handleAlpha(color[4]);\n              return this.setHSL(h, _s10, _l14);\n            }\n\n            break;\n        }\n      } else if (m = /^\\#([A-Fa-f\\d]+)$/.exec(style)) {\n        // hex color\n        var hex = m[1];\n        var size = hex.length;\n\n        if (size === 3) {\n          // #ff0\n          this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n          this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n          this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n          return this;\n        } else if (size === 6) {\n          // #ff0000\n          this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n          this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n          this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n          return this;\n        }\n      }\n\n      if (style && style.length > 0) {\n        return this.setColorName(style);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setColorName\",\n    value: function setColorName(style) {\n      // color keywords\n      var hex = _colorKeywords[style.toLowerCase()];\n\n      if (hex !== undefined) {\n        // red\n        this.setHex(hex);\n      } else {\n        // unknown color\n        console.warn('THREE.Color: Unknown color ' + style);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.r, this.g, this.b);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(color) {\n      this.r = color.r;\n      this.g = color.g;\n      this.b = color.b;\n      return this;\n    }\n  }, {\n    key: \"copyGammaToLinear\",\n    value: function copyGammaToLinear(color) {\n      var gammaFactor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2.0;\n      this.r = Math.pow(color.r, gammaFactor);\n      this.g = Math.pow(color.g, gammaFactor);\n      this.b = Math.pow(color.b, gammaFactor);\n      return this;\n    }\n  }, {\n    key: \"copyLinearToGamma\",\n    value: function copyLinearToGamma(color) {\n      var gammaFactor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2.0;\n      var safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n      this.r = Math.pow(color.r, safeInverse);\n      this.g = Math.pow(color.g, safeInverse);\n      this.b = Math.pow(color.b, safeInverse);\n      return this;\n    }\n  }, {\n    key: \"convertGammaToLinear\",\n    value: function convertGammaToLinear(gammaFactor) {\n      this.copyGammaToLinear(this, gammaFactor);\n      return this;\n    }\n  }, {\n    key: \"convertLinearToGamma\",\n    value: function convertLinearToGamma(gammaFactor) {\n      this.copyLinearToGamma(this, gammaFactor);\n      return this;\n    }\n  }, {\n    key: \"copySRGBToLinear\",\n    value: function copySRGBToLinear(color) {\n      this.r = SRGBToLinear(color.r);\n      this.g = SRGBToLinear(color.g);\n      this.b = SRGBToLinear(color.b);\n      return this;\n    }\n  }, {\n    key: \"copyLinearToSRGB\",\n    value: function copyLinearToSRGB(color) {\n      this.r = LinearToSRGB(color.r);\n      this.g = LinearToSRGB(color.g);\n      this.b = LinearToSRGB(color.b);\n      return this;\n    }\n  }, {\n    key: \"convertSRGBToLinear\",\n    value: function convertSRGBToLinear() {\n      this.copySRGBToLinear(this);\n      return this;\n    }\n  }, {\n    key: \"convertLinearToSRGB\",\n    value: function convertLinearToSRGB() {\n      this.copyLinearToSRGB(this);\n      return this;\n    }\n  }, {\n    key: \"getHex\",\n    value: function getHex() {\n      return this.r * 255 << 16 ^ this.g * 255 << 8 ^ this.b * 255 << 0;\n    }\n  }, {\n    key: \"getHexString\",\n    value: function getHexString() {\n      return ('000000' + this.getHex().toString(16)).slice(-6);\n    }\n  }, {\n    key: \"getHSL\",\n    value: function getHSL(target) {\n      // h,s,l ranges are in 0.0 - 1.0\n      var r = this.r,\n          g = this.g,\n          b = this.b;\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var hue, saturation;\n      var lightness = (min + max) / 2.0;\n\n      if (min === max) {\n        hue = 0;\n        saturation = 0;\n      } else {\n        var delta = max - min;\n        saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n\n        switch (max) {\n          case r:\n            hue = (g - b) / delta + (g < b ? 6 : 0);\n            break;\n\n          case g:\n            hue = (b - r) / delta + 2;\n            break;\n\n          case b:\n            hue = (r - g) / delta + 4;\n            break;\n        }\n\n        hue /= 6;\n      }\n\n      target.h = hue;\n      target.s = saturation;\n      target.l = lightness;\n      return target;\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      return 'rgb(' + (this.r * 255 | 0) + ',' + (this.g * 255 | 0) + ',' + (this.b * 255 | 0) + ')';\n    }\n  }, {\n    key: \"offsetHSL\",\n    value: function offsetHSL(h, s, l) {\n      this.getHSL(_hslA);\n      _hslA.h += h;\n      _hslA.s += s;\n      _hslA.l += l;\n      this.setHSL(_hslA.h, _hslA.s, _hslA.l);\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(color) {\n      this.r += color.r;\n      this.g += color.g;\n      this.b += color.b;\n      return this;\n    }\n  }, {\n    key: \"addColors\",\n    value: function addColors(color1, color2) {\n      this.r = color1.r + color2.r;\n      this.g = color1.g + color2.g;\n      this.b = color1.b + color2.b;\n      return this;\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(s) {\n      this.r += s;\n      this.g += s;\n      this.b += s;\n      return this;\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(color) {\n      this.r = Math.max(0, this.r - color.r);\n      this.g = Math.max(0, this.g - color.g);\n      this.b = Math.max(0, this.b - color.b);\n      return this;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(color) {\n      this.r *= color.r;\n      this.g *= color.g;\n      this.b *= color.b;\n      return this;\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(s) {\n      this.r *= s;\n      this.g *= s;\n      this.b *= s;\n      return this;\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(color, alpha) {\n      this.r += (color.r - this.r) * alpha;\n      this.g += (color.g - this.g) * alpha;\n      this.b += (color.b - this.b) * alpha;\n      return this;\n    }\n  }, {\n    key: \"lerpColors\",\n    value: function lerpColors(color1, color2, alpha) {\n      this.r = color1.r + (color2.r - color1.r) * alpha;\n      this.g = color1.g + (color2.g - color1.g) * alpha;\n      this.b = color1.b + (color2.b - color1.b) * alpha;\n      return this;\n    }\n  }, {\n    key: \"lerpHSL\",\n    value: function lerpHSL(color, alpha) {\n      this.getHSL(_hslA);\n      color.getHSL(_hslB);\n      var h = lerp(_hslA.h, _hslB.h, alpha);\n      var s = lerp(_hslA.s, _hslB.s, alpha);\n      var l = lerp(_hslA.l, _hslB.l, alpha);\n      this.setHSL(h, s, l);\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(c) {\n      return c.r === this.r && c.g === this.g && c.b === this.b;\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.r = array[offset];\n      this.g = array[offset + 1];\n      this.b = array[offset + 2];\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      array[offset] = this.r;\n      array[offset + 1] = this.g;\n      array[offset + 2] = this.b;\n      return array;\n    }\n  }, {\n    key: \"fromBufferAttribute\",\n    value: function fromBufferAttribute(attribute, index) {\n      this.r = attribute.getX(index);\n      this.g = attribute.getY(index);\n      this.b = attribute.getZ(index);\n\n      if (attribute.normalized === true) {\n        // assuming Uint8Array\n        this.r /= 255;\n        this.g /= 255;\n        this.b /= 255;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.getHex();\n    }\n  }]);\n\n  return Color;\n}();\n\nColor.NAMES = _colorKeywords;\nColor.prototype.isColor = true;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n * }\n */\n\nvar MeshBasicMaterial = /*#__PURE__*/function (_Material$) {\n  _inherits(MeshBasicMaterial, _Material$);\n\n  var _super9 = _createSuper(MeshBasicMaterial);\n\n  function MeshBasicMaterial(parameters) {\n    var _this16;\n\n    _classCallCheck(this, MeshBasicMaterial);\n\n    _this16 = _super9.call(this);\n    _this16.type = 'MeshBasicMaterial';\n    _this16.color = new Color(0xffffff); // emissive\n\n    _this16.map = null;\n    _this16.lightMap = null;\n    _this16.lightMapIntensity = 1.0;\n    _this16.aoMap = null;\n    _this16.aoMapIntensity = 1.0;\n    _this16.specularMap = null;\n    _this16.alphaMap = null;\n    _this16.envMap = null;\n    _this16.combine = MultiplyOperation;\n    _this16.reflectivity = 1;\n    _this16.refractionRatio = 0.98;\n    _this16.wireframe = false;\n    _this16.wireframeLinewidth = 1;\n    _this16.wireframeLinecap = 'round';\n    _this16.wireframeLinejoin = 'round';\n\n    _this16.setValues(parameters);\n\n    return _this16;\n  }\n\n  _createClass(MeshBasicMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshBasicMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.map = source.map;\n      this.lightMap = source.lightMap;\n      this.lightMapIntensity = source.lightMapIntensity;\n      this.aoMap = source.aoMap;\n      this.aoMapIntensity = source.aoMapIntensity;\n      this.specularMap = source.specularMap;\n      this.alphaMap = source.alphaMap;\n      this.envMap = source.envMap;\n      this.combine = source.combine;\n      this.reflectivity = source.reflectivity;\n      this.refractionRatio = source.refractionRatio;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.wireframeLinecap = source.wireframeLinecap;\n      this.wireframeLinejoin = source.wireframeLinejoin;\n      return this;\n    }\n  }]);\n\n  return MeshBasicMaterial;\n}(Material$1);\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nvar _vector$9 = /*@__PURE__*/new Vector3();\n\nvar _vector2$1 = /*@__PURE__*/new Vector2();\n\nvar BufferAttribute = /*#__PURE__*/function () {\n  function BufferAttribute(array, itemSize, normalized) {\n    _classCallCheck(this, BufferAttribute);\n\n    if (Array.isArray(array)) {\n      throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');\n    }\n\n    this.name = '';\n    this.array = array;\n    this.itemSize = itemSize;\n    this.count = array !== undefined ? array.length / itemSize : 0;\n    this.normalized = normalized === true;\n    this.usage = StaticDrawUsage;\n    this.updateRange = {\n      offset: 0,\n      count: -1\n    };\n    this.version = 0;\n  }\n\n  _createClass(BufferAttribute, [{\n    key: \"onUploadCallback\",\n    value: function onUploadCallback() {}\n  }, {\n    key: \"needsUpdate\",\n    set: function set(value) {\n      if (value === true) this.version++;\n    }\n  }, {\n    key: \"setUsage\",\n    value: function setUsage(value) {\n      this.usage = value;\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.name = source.name;\n      this.array = new source.array.constructor(source.array);\n      this.itemSize = source.itemSize;\n      this.count = source.count;\n      this.normalized = source.normalized;\n      this.usage = source.usage;\n      return this;\n    }\n  }, {\n    key: \"copyAt\",\n    value: function copyAt(index1, attribute, index2) {\n      index1 *= this.itemSize;\n      index2 *= attribute.itemSize;\n\n      for (var _i38 = 0, _l15 = this.itemSize; _i38 < _l15; _i38++) {\n        this.array[index1 + _i38] = attribute.array[index2 + _i38];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"copyArray\",\n    value: function copyArray(array) {\n      this.array.set(array);\n      return this;\n    }\n  }, {\n    key: \"copyColorsArray\",\n    value: function copyColorsArray(colors) {\n      var array = this.array;\n      var offset = 0;\n\n      for (var _i39 = 0, _l16 = colors.length; _i39 < _l16; _i39++) {\n        var color = colors[_i39];\n\n        if (color === undefined) {\n          console.warn('THREE.BufferAttribute.copyColorsArray(): color is undefined', _i39);\n          color = new Color();\n        }\n\n        array[offset++] = color.r;\n        array[offset++] = color.g;\n        array[offset++] = color.b;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"copyVector2sArray\",\n    value: function copyVector2sArray(vectors) {\n      var array = this.array;\n      var offset = 0;\n\n      for (var _i40 = 0, _l17 = vectors.length; _i40 < _l17; _i40++) {\n        var vector = vectors[_i40];\n\n        if (vector === undefined) {\n          console.warn('THREE.BufferAttribute.copyVector2sArray(): vector is undefined', _i40);\n          vector = new Vector2();\n        }\n\n        array[offset++] = vector.x;\n        array[offset++] = vector.y;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"copyVector3sArray\",\n    value: function copyVector3sArray(vectors) {\n      var array = this.array;\n      var offset = 0;\n\n      for (var _i41 = 0, _l18 = vectors.length; _i41 < _l18; _i41++) {\n        var vector = vectors[_i41];\n\n        if (vector === undefined) {\n          console.warn('THREE.BufferAttribute.copyVector3sArray(): vector is undefined', _i41);\n          vector = new Vector3();\n        }\n\n        array[offset++] = vector.x;\n        array[offset++] = vector.y;\n        array[offset++] = vector.z;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"copyVector4sArray\",\n    value: function copyVector4sArray(vectors) {\n      var array = this.array;\n      var offset = 0;\n\n      for (var _i42 = 0, _l19 = vectors.length; _i42 < _l19; _i42++) {\n        var vector = vectors[_i42];\n\n        if (vector === undefined) {\n          console.warn('THREE.BufferAttribute.copyVector4sArray(): vector is undefined', _i42);\n          vector = new Vector4();\n        }\n\n        array[offset++] = vector.x;\n        array[offset++] = vector.y;\n        array[offset++] = vector.z;\n        array[offset++] = vector.w;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"applyMatrix3\",\n    value: function applyMatrix3(m) {\n      if (this.itemSize === 2) {\n        for (var _i43 = 0, _l20 = this.count; _i43 < _l20; _i43++) {\n          _vector2$1.fromBufferAttribute(this, _i43);\n\n          _vector2$1.applyMatrix3(m);\n\n          this.setXY(_i43, _vector2$1.x, _vector2$1.y);\n        }\n      } else if (this.itemSize === 3) {\n        for (var _i44 = 0, _l21 = this.count; _i44 < _l21; _i44++) {\n          _vector$9.fromBufferAttribute(this, _i44);\n\n          _vector$9.applyMatrix3(m);\n\n          this.setXYZ(_i44, _vector$9.x, _vector$9.y, _vector$9.z);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(m) {\n      for (var _i45 = 0, _l22 = this.count; _i45 < _l22; _i45++) {\n        _vector$9.x = this.getX(_i45);\n        _vector$9.y = this.getY(_i45);\n        _vector$9.z = this.getZ(_i45);\n\n        _vector$9.applyMatrix4(m);\n\n        this.setXYZ(_i45, _vector$9.x, _vector$9.y, _vector$9.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"applyNormalMatrix\",\n    value: function applyNormalMatrix(m) {\n      for (var _i46 = 0, _l23 = this.count; _i46 < _l23; _i46++) {\n        _vector$9.x = this.getX(_i46);\n        _vector$9.y = this.getY(_i46);\n        _vector$9.z = this.getZ(_i46);\n\n        _vector$9.applyNormalMatrix(m);\n\n        this.setXYZ(_i46, _vector$9.x, _vector$9.y, _vector$9.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(m) {\n      for (var _i47 = 0, _l24 = this.count; _i47 < _l24; _i47++) {\n        _vector$9.x = this.getX(_i47);\n        _vector$9.y = this.getY(_i47);\n        _vector$9.z = this.getZ(_i47);\n\n        _vector$9.transformDirection(m);\n\n        this.setXYZ(_i47, _vector$9.x, _vector$9.y, _vector$9.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"set\",\n    value: function set(value) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.array.set(value, offset);\n      return this;\n    }\n  }, {\n    key: \"getX\",\n    value: function getX(index) {\n      return this.array[index * this.itemSize];\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(index, x) {\n      this.array[index * this.itemSize] = x;\n      return this;\n    }\n  }, {\n    key: \"getY\",\n    value: function getY(index) {\n      return this.array[index * this.itemSize + 1];\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(index, y) {\n      this.array[index * this.itemSize + 1] = y;\n      return this;\n    }\n  }, {\n    key: \"getZ\",\n    value: function getZ(index) {\n      return this.array[index * this.itemSize + 2];\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(index, z) {\n      this.array[index * this.itemSize + 2] = z;\n      return this;\n    }\n  }, {\n    key: \"getW\",\n    value: function getW(index) {\n      return this.array[index * this.itemSize + 3];\n    }\n  }, {\n    key: \"setW\",\n    value: function setW(index, w) {\n      this.array[index * this.itemSize + 3] = w;\n      return this;\n    }\n  }, {\n    key: \"setXY\",\n    value: function setXY(index, x, y) {\n      index *= this.itemSize;\n      this.array[index + 0] = x;\n      this.array[index + 1] = y;\n      return this;\n    }\n  }, {\n    key: \"setXYZ\",\n    value: function setXYZ(index, x, y, z) {\n      index *= this.itemSize;\n      this.array[index + 0] = x;\n      this.array[index + 1] = y;\n      this.array[index + 2] = z;\n      return this;\n    }\n  }, {\n    key: \"setXYZW\",\n    value: function setXYZW(index, x, y, z, w) {\n      index *= this.itemSize;\n      this.array[index + 0] = x;\n      this.array[index + 1] = y;\n      this.array[index + 2] = z;\n      this.array[index + 3] = w;\n      return this;\n    }\n  }, {\n    key: \"onUpload\",\n    value: function onUpload(callback) {\n      this.onUploadCallback = callback;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.array, this.itemSize).copy(this);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = {\n        itemSize: this.itemSize,\n        type: this.array.constructor.name,\n        array: Array.prototype.slice.call(this.array),\n        normalized: this.normalized\n      };\n      if (this.name !== '') data.name = this.name;\n      if (this.usage !== StaticDrawUsage) data.usage = this.usage;\n      if (this.updateRange.offset !== 0 || this.updateRange.count !== -1) data.updateRange = this.updateRange;\n      return data;\n    }\n  }]);\n\n  return BufferAttribute;\n}();\n\nBufferAttribute.prototype.isBufferAttribute = true;\n\nvar Uint16BufferAttribute = /*#__PURE__*/function (_BufferAttribute) {\n  _inherits(Uint16BufferAttribute, _BufferAttribute);\n\n  var _super10 = _createSuper(Uint16BufferAttribute);\n\n  function Uint16BufferAttribute(array, itemSize, normalized) {\n    _classCallCheck(this, Uint16BufferAttribute);\n\n    return _super10.call(this, new Uint16Array(array), itemSize, normalized);\n  }\n\n  return Uint16BufferAttribute;\n}(BufferAttribute);\n\nvar Uint32BufferAttribute = /*#__PURE__*/function (_BufferAttribute2) {\n  _inherits(Uint32BufferAttribute, _BufferAttribute2);\n\n  var _super11 = _createSuper(Uint32BufferAttribute);\n\n  function Uint32BufferAttribute(array, itemSize, normalized) {\n    _classCallCheck(this, Uint32BufferAttribute);\n\n    return _super11.call(this, new Uint32Array(array), itemSize, normalized);\n  }\n\n  return Uint32BufferAttribute;\n}(BufferAttribute);\n\nvar Float16BufferAttribute = /*#__PURE__*/function (_BufferAttribute3) {\n  _inherits(Float16BufferAttribute, _BufferAttribute3);\n\n  var _super12 = _createSuper(Float16BufferAttribute);\n\n  function Float16BufferAttribute(array, itemSize, normalized) {\n    _classCallCheck(this, Float16BufferAttribute);\n\n    return _super12.call(this, new Uint16Array(array), itemSize, normalized);\n  }\n\n  return Float16BufferAttribute;\n}(BufferAttribute);\n\nFloat16BufferAttribute.prototype.isFloat16BufferAttribute = true;\n\nvar Float32BufferAttribute = /*#__PURE__*/function (_BufferAttribute4) {\n  _inherits(Float32BufferAttribute, _BufferAttribute4);\n\n  var _super13 = _createSuper(Float32BufferAttribute);\n\n  function Float32BufferAttribute(array, itemSize, normalized) {\n    _classCallCheck(this, Float32BufferAttribute);\n\n    return _super13.call(this, new Float32Array(array), itemSize, normalized);\n  }\n\n  return Float32BufferAttribute;\n}(BufferAttribute);\n\nfunction arrayMax(array) {\n  if (array.length === 0) return -Infinity;\n  var max = array[0];\n\n  for (var _i48 = 1, _l25 = array.length; _i48 < _l25; ++_i48) {\n    if (array[_i48] > max) max = array[_i48];\n  }\n\n  return max;\n}\n\nvar _id = 0;\n\nvar _m1 = /*@__PURE__*/new Matrix4();\n\nvar _obj = /*@__PURE__*/new Object3D();\n\nvar _offset = /*@__PURE__*/new Vector3();\n\nvar _box$1 = /*@__PURE__*/new Box3();\n\nvar _boxMorphTargets = /*@__PURE__*/new Box3();\n\nvar _vector$8 = /*@__PURE__*/new Vector3();\n\nvar BufferGeometry = /*#__PURE__*/function (_EventDispatcher5) {\n  _inherits(BufferGeometry, _EventDispatcher5);\n\n  var _super14 = _createSuper(BufferGeometry);\n\n  function BufferGeometry() {\n    var _this17;\n\n    _classCallCheck(this, BufferGeometry);\n\n    _this17 = _super14.call(this);\n    Object.defineProperty(_assertThisInitialized(_this17), 'id', {\n      value: _id++\n    });\n    _this17.uuid = generateUUID();\n    _this17.name = '';\n    _this17.type = 'BufferGeometry';\n    _this17.index = null;\n    _this17.attributes = {};\n    _this17.morphAttributes = {};\n    _this17.morphTargetsRelative = false;\n    _this17.groups = [];\n    _this17.boundingBox = null;\n    _this17.boundingSphere = null;\n    _this17.drawRange = {\n      start: 0,\n      count: Infinity\n    };\n    _this17.userData = {};\n    return _this17;\n  }\n\n  _createClass(BufferGeometry, [{\n    key: \"getIndex\",\n    value: function getIndex() {\n      return this.index;\n    }\n  }, {\n    key: \"setIndex\",\n    value: function setIndex(index) {\n      if (Array.isArray(index)) {\n        this.index = new (arrayMax(index) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(index, 1);\n      } else {\n        this.index = index;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      return this.attributes[name];\n    }\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(name, attribute) {\n      this.attributes[name] = attribute;\n      return this;\n    }\n  }, {\n    key: \"deleteAttribute\",\n    value: function deleteAttribute(name) {\n      delete this.attributes[name];\n      return this;\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(name) {\n      return this.attributes[name] !== undefined;\n    }\n  }, {\n    key: \"addGroup\",\n    value: function addGroup(start, count) {\n      var materialIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.groups.push({\n        start: start,\n        count: count,\n        materialIndex: materialIndex\n      });\n    }\n  }, {\n    key: \"clearGroups\",\n    value: function clearGroups() {\n      this.groups = [];\n    }\n  }, {\n    key: \"setDrawRange\",\n    value: function setDrawRange(start, count) {\n      this.drawRange.start = start;\n      this.drawRange.count = count;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix) {\n      var position = this.attributes.position;\n\n      if (position !== undefined) {\n        position.applyMatrix4(matrix);\n        position.needsUpdate = true;\n      }\n\n      var normal = this.attributes.normal;\n\n      if (normal !== undefined) {\n        var normalMatrix = new Matrix3().getNormalMatrix(matrix);\n        normal.applyNormalMatrix(normalMatrix);\n        normal.needsUpdate = true;\n      }\n\n      var tangent = this.attributes.tangent;\n\n      if (tangent !== undefined) {\n        tangent.transformDirection(matrix);\n        tangent.needsUpdate = true;\n      }\n\n      if (this.boundingBox !== null) {\n        this.computeBoundingBox();\n      }\n\n      if (this.boundingSphere !== null) {\n        this.computeBoundingSphere();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"applyQuaternion\",\n    value: function applyQuaternion(q) {\n      _m1.makeRotationFromQuaternion(q);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(angle) {\n      // rotate geometry around world x-axis\n      _m1.makeRotationX(angle);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(angle) {\n      // rotate geometry around world y-axis\n      _m1.makeRotationY(angle);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(angle) {\n      // rotate geometry around world z-axis\n      _m1.makeRotationZ(angle);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y, z) {\n      // translate geometry\n      _m1.makeTranslation(x, y, z);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(x, y, z) {\n      // scale geometry\n      _m1.makeScale(x, y, z);\n\n      this.applyMatrix4(_m1);\n      return this;\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(vector) {\n      _obj.lookAt(vector);\n\n      _obj.updateMatrix();\n\n      this.applyMatrix4(_obj.matrix);\n      return this;\n    }\n  }, {\n    key: \"center\",\n    value: function center() {\n      this.computeBoundingBox();\n      this.boundingBox.getCenter(_offset).negate();\n      this.translate(_offset.x, _offset.y, _offset.z);\n      return this;\n    }\n  }, {\n    key: \"setFromPoints\",\n    value: function setFromPoints(points) {\n      var position = [];\n\n      for (var _i49 = 0, _l26 = points.length; _i49 < _l26; _i49++) {\n        var point = points[_i49];\n        position.push(point.x, point.y, point.z || 0);\n      }\n\n      this.setAttribute('position', new Float32BufferAttribute(position, 3));\n      return this;\n    }\n  }, {\n    key: \"computeBoundingBox\",\n    value: function computeBoundingBox() {\n      if (this.boundingBox === null) {\n        this.boundingBox = new Box3();\n      }\n\n      var position = this.attributes.position;\n      var morphAttributesPosition = this.morphAttributes.position;\n\n      if (position && position.isGLBufferAttribute) {\n        console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this);\n        this.boundingBox.set(new Vector3(-Infinity, -Infinity, -Infinity), new Vector3(+Infinity, +Infinity, +Infinity));\n        return;\n      }\n\n      if (position !== undefined) {\n        this.boundingBox.setFromBufferAttribute(position); // process morph attributes if present\n\n        if (morphAttributesPosition) {\n          for (var _i50 = 0, il = morphAttributesPosition.length; _i50 < il; _i50++) {\n            var morphAttribute = morphAttributesPosition[_i50];\n\n            _box$1.setFromBufferAttribute(morphAttribute);\n\n            if (this.morphTargetsRelative) {\n              _vector$8.addVectors(this.boundingBox.min, _box$1.min);\n\n              this.boundingBox.expandByPoint(_vector$8);\n\n              _vector$8.addVectors(this.boundingBox.max, _box$1.max);\n\n              this.boundingBox.expandByPoint(_vector$8);\n            } else {\n              this.boundingBox.expandByPoint(_box$1.min);\n              this.boundingBox.expandByPoint(_box$1.max);\n            }\n          }\n        }\n      } else {\n        this.boundingBox.makeEmpty();\n      }\n\n      if (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) {\n        console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this);\n      }\n    }\n  }, {\n    key: \"computeBoundingSphere\",\n    value: function computeBoundingSphere() {\n      if (this.boundingSphere === null) {\n        this.boundingSphere = new Sphere();\n      }\n\n      var position = this.attributes.position;\n      var morphAttributesPosition = this.morphAttributes.position;\n\n      if (position && position.isGLBufferAttribute) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this);\n        this.boundingSphere.set(new Vector3(), Infinity);\n        return;\n      }\n\n      if (position) {\n        // first, find the center of the bounding sphere\n        var center = this.boundingSphere.center;\n\n        _box$1.setFromBufferAttribute(position); // process morph attributes if present\n\n\n        if (morphAttributesPosition) {\n          for (var _i51 = 0, il = morphAttributesPosition.length; _i51 < il; _i51++) {\n            var morphAttribute = morphAttributesPosition[_i51];\n\n            _boxMorphTargets.setFromBufferAttribute(morphAttribute);\n\n            if (this.morphTargetsRelative) {\n              _vector$8.addVectors(_box$1.min, _boxMorphTargets.min);\n\n              _box$1.expandByPoint(_vector$8);\n\n              _vector$8.addVectors(_box$1.max, _boxMorphTargets.max);\n\n              _box$1.expandByPoint(_vector$8);\n            } else {\n              _box$1.expandByPoint(_boxMorphTargets.min);\n\n              _box$1.expandByPoint(_boxMorphTargets.max);\n            }\n          }\n        }\n\n        _box$1.getCenter(center); // second, try to find a boundingSphere with a radius smaller than the\n        // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\n        var maxRadiusSq = 0;\n\n        for (var _i52 = 0, _il = position.count; _i52 < _il; _i52++) {\n          _vector$8.fromBufferAttribute(position, _i52);\n\n          maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector$8));\n        } // process morph attributes if present\n\n\n        if (morphAttributesPosition) {\n          for (var _i53 = 0, _il2 = morphAttributesPosition.length; _i53 < _il2; _i53++) {\n            var _morphAttribute = morphAttributesPosition[_i53];\n            var morphTargetsRelative = this.morphTargetsRelative;\n\n            for (var j = 0, jl = _morphAttribute.count; j < jl; j++) {\n              _vector$8.fromBufferAttribute(_morphAttribute, j);\n\n              if (morphTargetsRelative) {\n                _offset.fromBufferAttribute(position, j);\n\n                _vector$8.add(_offset);\n              }\n\n              maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector$8));\n            }\n          }\n        }\n\n        this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\n\n        if (isNaN(this.boundingSphere.radius)) {\n          console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this);\n        }\n      }\n    }\n  }, {\n    key: \"computeFaceNormals\",\n    value: function computeFaceNormals() {// backwards compatibility\n    }\n  }, {\n    key: \"computeTangents\",\n    value: function computeTangents() {\n      var index = this.index;\n      var attributes = this.attributes; // based on http://www.terathon.com/code/tangent.html\n      // (per vertex tangents)\n\n      if (index === null || attributes.position === undefined || attributes.normal === undefined || attributes.uv === undefined) {\n        console.error('THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)');\n        return;\n      }\n\n      var indices = index.array;\n      var positions = attributes.position.array;\n      var normals = attributes.normal.array;\n      var uvs = attributes.uv.array;\n      var nVertices = positions.length / 3;\n\n      if (attributes.tangent === undefined) {\n        this.setAttribute('tangent', new BufferAttribute(new Float32Array(4 * nVertices), 4));\n      }\n\n      var tangents = attributes.tangent.array;\n      var tan1 = [],\n          tan2 = [];\n\n      for (var _i54 = 0; _i54 < nVertices; _i54++) {\n        tan1[_i54] = new Vector3();\n        tan2[_i54] = new Vector3();\n      }\n\n      var vA = new Vector3(),\n          vB = new Vector3(),\n          vC = new Vector3(),\n          uvA = new Vector2(),\n          uvB = new Vector2(),\n          uvC = new Vector2(),\n          sdir = new Vector3(),\n          tdir = new Vector3();\n\n      function handleTriangle(a, b, c) {\n        vA.fromArray(positions, a * 3);\n        vB.fromArray(positions, b * 3);\n        vC.fromArray(positions, c * 3);\n        uvA.fromArray(uvs, a * 2);\n        uvB.fromArray(uvs, b * 2);\n        uvC.fromArray(uvs, c * 2);\n        vB.sub(vA);\n        vC.sub(vA);\n        uvB.sub(uvA);\n        uvC.sub(uvA);\n        var r = 1.0 / (uvB.x * uvC.y - uvC.x * uvB.y); // silently ignore degenerate uv triangles having coincident or colinear vertices\n\n        if (!isFinite(r)) return;\n        sdir.copy(vB).multiplyScalar(uvC.y).addScaledVector(vC, -uvB.y).multiplyScalar(r);\n        tdir.copy(vC).multiplyScalar(uvB.x).addScaledVector(vB, -uvC.x).multiplyScalar(r);\n        tan1[a].add(sdir);\n        tan1[b].add(sdir);\n        tan1[c].add(sdir);\n        tan2[a].add(tdir);\n        tan2[b].add(tdir);\n        tan2[c].add(tdir);\n      }\n\n      var groups = this.groups;\n\n      if (groups.length === 0) {\n        groups = [{\n          start: 0,\n          count: indices.length\n        }];\n      }\n\n      for (var _i55 = 0, il = groups.length; _i55 < il; ++_i55) {\n        var group = groups[_i55];\n        var start = group.start;\n        var count = group.count;\n\n        for (var j = start, jl = start + count; j < jl; j += 3) {\n          handleTriangle(indices[j + 0], indices[j + 1], indices[j + 2]);\n        }\n      }\n\n      var tmp = new Vector3(),\n          tmp2 = new Vector3();\n      var n = new Vector3(),\n          n2 = new Vector3();\n\n      function handleVertex(v) {\n        n.fromArray(normals, v * 3);\n        n2.copy(n);\n        var t = tan1[v]; // Gram-Schmidt orthogonalize\n\n        tmp.copy(t);\n        tmp.sub(n.multiplyScalar(n.dot(t))).normalize(); // Calculate handedness\n\n        tmp2.crossVectors(n2, t);\n        var test = tmp2.dot(tan2[v]);\n        var w = test < 0.0 ? -1.0 : 1.0;\n        tangents[v * 4] = tmp.x;\n        tangents[v * 4 + 1] = tmp.y;\n        tangents[v * 4 + 2] = tmp.z;\n        tangents[v * 4 + 3] = w;\n      }\n\n      for (var _i56 = 0, _il3 = groups.length; _i56 < _il3; ++_i56) {\n        var _group = groups[_i56];\n        var _start2 = _group.start;\n        var _count = _group.count;\n\n        for (var _j2 = _start2, _jl = _start2 + _count; _j2 < _jl; _j2 += 3) {\n          handleVertex(indices[_j2 + 0]);\n          handleVertex(indices[_j2 + 1]);\n          handleVertex(indices[_j2 + 2]);\n        }\n      }\n    }\n  }, {\n    key: \"computeVertexNormals\",\n    value: function computeVertexNormals() {\n      var index = this.index;\n      var positionAttribute = this.getAttribute('position');\n\n      if (positionAttribute !== undefined) {\n        var normalAttribute = this.getAttribute('normal');\n\n        if (normalAttribute === undefined) {\n          normalAttribute = new BufferAttribute(new Float32Array(positionAttribute.count * 3), 3);\n          this.setAttribute('normal', normalAttribute);\n        } else {\n          // reset existing normals to zero\n          for (var _i57 = 0, il = normalAttribute.count; _i57 < il; _i57++) {\n            normalAttribute.setXYZ(_i57, 0, 0, 0);\n          }\n        }\n\n        var pA = new Vector3(),\n            pB = new Vector3(),\n            pC = new Vector3();\n        var nA = new Vector3(),\n            nB = new Vector3(),\n            nC = new Vector3();\n        var cb = new Vector3(),\n            ab = new Vector3(); // indexed elements\n\n        if (index) {\n          for (var _i58 = 0, _il4 = index.count; _i58 < _il4; _i58 += 3) {\n            var vA = index.getX(_i58 + 0);\n            var vB = index.getX(_i58 + 1);\n            var vC = index.getX(_i58 + 2);\n            pA.fromBufferAttribute(positionAttribute, vA);\n            pB.fromBufferAttribute(positionAttribute, vB);\n            pC.fromBufferAttribute(positionAttribute, vC);\n            cb.subVectors(pC, pB);\n            ab.subVectors(pA, pB);\n            cb.cross(ab);\n            nA.fromBufferAttribute(normalAttribute, vA);\n            nB.fromBufferAttribute(normalAttribute, vB);\n            nC.fromBufferAttribute(normalAttribute, vC);\n            nA.add(cb);\n            nB.add(cb);\n            nC.add(cb);\n            normalAttribute.setXYZ(vA, nA.x, nA.y, nA.z);\n            normalAttribute.setXYZ(vB, nB.x, nB.y, nB.z);\n            normalAttribute.setXYZ(vC, nC.x, nC.y, nC.z);\n          }\n        } else {\n          // non-indexed elements (unconnected triangle soup)\n          for (var _i59 = 0, _il5 = positionAttribute.count; _i59 < _il5; _i59 += 3) {\n            pA.fromBufferAttribute(positionAttribute, _i59 + 0);\n            pB.fromBufferAttribute(positionAttribute, _i59 + 1);\n            pC.fromBufferAttribute(positionAttribute, _i59 + 2);\n            cb.subVectors(pC, pB);\n            ab.subVectors(pA, pB);\n            cb.cross(ab);\n            normalAttribute.setXYZ(_i59 + 0, cb.x, cb.y, cb.z);\n            normalAttribute.setXYZ(_i59 + 1, cb.x, cb.y, cb.z);\n            normalAttribute.setXYZ(_i59 + 2, cb.x, cb.y, cb.z);\n          }\n        }\n\n        this.normalizeNormals();\n        normalAttribute.needsUpdate = true;\n      }\n    }\n  }, {\n    key: \"merge\",\n    value: function merge(geometry, offset) {\n      if (!(geometry && geometry.isBufferGeometry)) {\n        console.error('THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry);\n        return;\n      }\n\n      if (offset === undefined) {\n        offset = 0;\n        console.warn('THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. ' + 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.');\n      }\n\n      var attributes = this.attributes;\n\n      for (var key in attributes) {\n        if (geometry.attributes[key] === undefined) continue;\n        var attribute1 = attributes[key];\n        var attributeArray1 = attribute1.array;\n        var attribute2 = geometry.attributes[key];\n        var attributeArray2 = attribute2.array;\n        var attributeOffset = attribute2.itemSize * offset;\n        var length = Math.min(attributeArray2.length, attributeArray1.length - attributeOffset);\n\n        for (var _i60 = 0, j = attributeOffset; _i60 < length; _i60++, j++) {\n          attributeArray1[j] = attributeArray2[_i60];\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"normalizeNormals\",\n    value: function normalizeNormals() {\n      var normals = this.attributes.normal;\n\n      for (var _i61 = 0, il = normals.count; _i61 < il; _i61++) {\n        _vector$8.fromBufferAttribute(normals, _i61);\n\n        _vector$8.normalize();\n\n        normals.setXYZ(_i61, _vector$8.x, _vector$8.y, _vector$8.z);\n      }\n    }\n  }, {\n    key: \"toNonIndexed\",\n    value: function toNonIndexed() {\n      function convertBufferAttribute(attribute, indices) {\n        var array = attribute.array;\n        var itemSize = attribute.itemSize;\n        var normalized = attribute.normalized;\n        var array2 = new array.constructor(indices.length * itemSize);\n        var index = 0,\n            index2 = 0;\n\n        for (var _i62 = 0, _l27 = indices.length; _i62 < _l27; _i62++) {\n          if (attribute.isInterleavedBufferAttribute) {\n            index = indices[_i62] * attribute.data.stride + attribute.offset;\n          } else {\n            index = indices[_i62] * itemSize;\n          }\n\n          for (var j = 0; j < itemSize; j++) {\n            array2[index2++] = array[index++];\n          }\n        }\n\n        return new BufferAttribute(array2, itemSize, normalized);\n      } //\n\n\n      if (this.index === null) {\n        console.warn('THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.');\n        return this;\n      }\n\n      var geometry2 = new BufferGeometry();\n      var indices = this.index.array;\n      var attributes = this.attributes; // attributes\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        var newAttribute = convertBufferAttribute(attribute, indices);\n        geometry2.setAttribute(name, newAttribute);\n      } // morph attributes\n\n\n      var morphAttributes = this.morphAttributes;\n\n      for (var _name in morphAttributes) {\n        var morphArray = [];\n        var morphAttribute = morphAttributes[_name]; // morphAttribute: array of Float32BufferAttributes\n\n        for (var _i63 = 0, il = morphAttribute.length; _i63 < il; _i63++) {\n          var _attribute = morphAttribute[_i63];\n\n          var _newAttribute = convertBufferAttribute(_attribute, indices);\n\n          morphArray.push(_newAttribute);\n        }\n\n        geometry2.morphAttributes[_name] = morphArray;\n      }\n\n      geometry2.morphTargetsRelative = this.morphTargetsRelative; // groups\n\n      var groups = this.groups;\n\n      for (var _i64 = 0, _l28 = groups.length; _i64 < _l28; _i64++) {\n        var group = groups[_i64];\n        geometry2.addGroup(group.start, group.count, group.materialIndex);\n      }\n\n      return geometry2;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = {\n        metadata: {\n          version: 4.5,\n          type: 'BufferGeometry',\n          generator: 'BufferGeometry.toJSON'\n        }\n      }; // standard BufferGeometry serialization\n\n      data.uuid = this.uuid;\n      data.type = this.type;\n      if (this.name !== '') data.name = this.name;\n      if (Object.keys(this.userData).length > 0) data.userData = this.userData;\n\n      if (this.parameters !== undefined) {\n        var parameters = this.parameters;\n\n        for (var key in parameters) {\n          if (parameters[key] !== undefined) data[key] = parameters[key];\n        }\n\n        return data;\n      } // for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\n      data.data = {\n        attributes: {}\n      };\n      var index = this.index;\n\n      if (index !== null) {\n        data.data.index = {\n          type: index.array.constructor.name,\n          array: Array.prototype.slice.call(index.array)\n        };\n      }\n\n      var attributes = this.attributes;\n\n      for (var _key in attributes) {\n        var attribute = attributes[_key];\n        data.data.attributes[_key] = attribute.toJSON(data.data);\n      }\n\n      var morphAttributes = {};\n      var hasMorphAttributes = false;\n\n      for (var _key2 in this.morphAttributes) {\n        var attributeArray = this.morphAttributes[_key2];\n        var array = [];\n\n        for (var _i65 = 0, il = attributeArray.length; _i65 < il; _i65++) {\n          var _attribute2 = attributeArray[_i65];\n          array.push(_attribute2.toJSON(data.data));\n        }\n\n        if (array.length > 0) {\n          morphAttributes[_key2] = array;\n          hasMorphAttributes = true;\n        }\n      }\n\n      if (hasMorphAttributes) {\n        data.data.morphAttributes = morphAttributes;\n        data.data.morphTargetsRelative = this.morphTargetsRelative;\n      }\n\n      var groups = this.groups;\n\n      if (groups.length > 0) {\n        data.data.groups = JSON.parse(JSON.stringify(groups));\n      }\n\n      var boundingSphere = this.boundingSphere;\n\n      if (boundingSphere !== null) {\n        data.data.boundingSphere = {\n          center: boundingSphere.center.toArray(),\n          radius: boundingSphere.radius\n        };\n      }\n\n      return data;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      /*\n       // Handle primitives\n      \t const parameters = this.parameters;\n      \t if ( parameters !== undefined ) {\n      \t const values = [];\n      \t for ( const key in parameters ) {\n      \t values.push( parameters[ key ] );\n      \t }\n      \t const geometry = Object.create( this.constructor.prototype );\n       this.constructor.apply( geometry, values );\n       return geometry;\n      \t }\n      \t return new this.constructor().copy( this );\n       */\n      return new BufferGeometry().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      // reset\n      this.index = null;\n      this.attributes = {};\n      this.morphAttributes = {};\n      this.groups = [];\n      this.boundingBox = null;\n      this.boundingSphere = null; // used for storing cloned, shared data\n\n      var data = {}; // name\n\n      this.name = source.name; // index\n\n      var index = source.index;\n\n      if (index !== null) {\n        this.setIndex(index.clone(data));\n      } // attributes\n\n\n      var attributes = source.attributes;\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        this.setAttribute(name, attribute.clone(data));\n      } // morph attributes\n\n\n      var morphAttributes = source.morphAttributes;\n\n      for (var _name2 in morphAttributes) {\n        var array = [];\n        var morphAttribute = morphAttributes[_name2]; // morphAttribute: array of Float32BufferAttributes\n\n        for (var _i66 = 0, _l29 = morphAttribute.length; _i66 < _l29; _i66++) {\n          array.push(morphAttribute[_i66].clone(data));\n        }\n\n        this.morphAttributes[_name2] = array;\n      }\n\n      this.morphTargetsRelative = source.morphTargetsRelative; // groups\n\n      var groups = source.groups;\n\n      for (var _i67 = 0, _l30 = groups.length; _i67 < _l30; _i67++) {\n        var group = groups[_i67];\n        this.addGroup(group.start, group.count, group.materialIndex);\n      } // bounding box\n\n\n      var boundingBox = source.boundingBox;\n\n      if (boundingBox !== null) {\n        this.boundingBox = boundingBox.clone();\n      } // bounding sphere\n\n\n      var boundingSphere = source.boundingSphere;\n\n      if (boundingSphere !== null) {\n        this.boundingSphere = boundingSphere.clone();\n      } // draw range\n\n\n      this.drawRange.start = source.drawRange.start;\n      this.drawRange.count = source.drawRange.count; // user data\n\n      this.userData = source.userData;\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }]);\n\n  return BufferGeometry;\n}(EventDispatcher);\n\nBufferGeometry.prototype.isBufferGeometry = true;\n\nvar _inverseMatrix$2 = /*@__PURE__*/new Matrix4();\n\nvar _ray$2 = /*@__PURE__*/new Ray();\n\nvar _sphere$3 = /*@__PURE__*/new Sphere();\n\nvar _vA$1 = /*@__PURE__*/new Vector3();\n\nvar _vB$1 = /*@__PURE__*/new Vector3();\n\nvar _vC$1 = /*@__PURE__*/new Vector3();\n\nvar _tempA = /*@__PURE__*/new Vector3();\n\nvar _tempB = /*@__PURE__*/new Vector3();\n\nvar _tempC = /*@__PURE__*/new Vector3();\n\nvar _morphA = /*@__PURE__*/new Vector3();\n\nvar _morphB = /*@__PURE__*/new Vector3();\n\nvar _morphC = /*@__PURE__*/new Vector3();\n\nvar _uvA$1 = /*@__PURE__*/new Vector2();\n\nvar _uvB$1 = /*@__PURE__*/new Vector2();\n\nvar _uvC$1 = /*@__PURE__*/new Vector2();\n\nvar _intersectionPoint = /*@__PURE__*/new Vector3();\n\nvar _intersectionPointWorld = /*@__PURE__*/new Vector3();\n\nvar Mesh = /*#__PURE__*/function (_Object3D) {\n  _inherits(Mesh, _Object3D);\n\n  var _super15 = _createSuper(Mesh);\n\n  function Mesh() {\n    var _this18;\n\n    var geometry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new BufferGeometry();\n    var material = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new MeshBasicMaterial();\n\n    _classCallCheck(this, Mesh);\n\n    _this18 = _super15.call(this);\n    _this18.type = 'Mesh';\n    _this18.geometry = geometry;\n    _this18.material = material;\n\n    _this18.updateMorphTargets();\n\n    return _this18;\n  }\n\n  _createClass(Mesh, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Mesh.prototype), \"copy\", this).call(this, source);\n\n      if (source.morphTargetInfluences !== undefined) {\n        this.morphTargetInfluences = source.morphTargetInfluences.slice();\n      }\n\n      if (source.morphTargetDictionary !== undefined) {\n        this.morphTargetDictionary = Object.assign({}, source.morphTargetDictionary);\n      }\n\n      this.material = source.material;\n      this.geometry = source.geometry;\n      return this;\n    }\n  }, {\n    key: \"updateMorphTargets\",\n    value: function updateMorphTargets() {\n      var geometry = this.geometry;\n\n      if (geometry.isBufferGeometry) {\n        var morphAttributes = geometry.morphAttributes;\n        var keys = Object.keys(morphAttributes);\n\n        if (keys.length > 0) {\n          var morphAttribute = morphAttributes[keys[0]];\n\n          if (morphAttribute !== undefined) {\n            this.morphTargetInfluences = [];\n            this.morphTargetDictionary = {};\n\n            for (var m = 0, ml = morphAttribute.length; m < ml; m++) {\n              var name = morphAttribute[m].name || String(m);\n              this.morphTargetInfluences.push(0);\n              this.morphTargetDictionary[name] = m;\n            }\n          }\n        }\n      } else {\n        var morphTargets = geometry.morphTargets;\n\n        if (morphTargets !== undefined && morphTargets.length > 0) {\n          console.error('THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n        }\n      }\n    }\n  }, {\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      var geometry = this.geometry;\n      var material = this.material;\n      var matrixWorld = this.matrixWorld;\n      if (material === undefined) return; // Checking boundingSphere distance to ray\n\n      if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n      _sphere$3.copy(geometry.boundingSphere);\n\n      _sphere$3.applyMatrix4(matrixWorld);\n\n      if (raycaster.ray.intersectsSphere(_sphere$3) === false) return; //\n\n      _inverseMatrix$2.copy(matrixWorld).invert();\n\n      _ray$2.copy(raycaster.ray).applyMatrix4(_inverseMatrix$2); // Check boundingBox before continuing\n\n\n      if (geometry.boundingBox !== null) {\n        if (_ray$2.intersectsBox(geometry.boundingBox) === false) return;\n      }\n\n      var intersection;\n\n      if (geometry.isBufferGeometry) {\n        var index = geometry.index;\n        var position = geometry.attributes.position;\n        var morphPosition = geometry.morphAttributes.position;\n        var morphTargetsRelative = geometry.morphTargetsRelative;\n        var uv = geometry.attributes.uv;\n        var uv2 = geometry.attributes.uv2;\n        var groups = geometry.groups;\n        var drawRange = geometry.drawRange;\n\n        if (index !== null) {\n          // indexed buffer geometry\n          if (Array.isArray(material)) {\n            for (var _i68 = 0, il = groups.length; _i68 < il; _i68++) {\n              var group = groups[_i68];\n              var groupMaterial = material[group.materialIndex];\n              var start = Math.max(group.start, drawRange.start);\n              var end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\n\n              for (var j = start, jl = end; j < jl; j += 3) {\n                var _a2 = index.getX(j);\n\n                var b = index.getX(j + 1);\n\n                var _c2 = index.getX(j + 2);\n\n                intersection = checkBufferGeometryIntersection(this, groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, _a2, b, _c2);\n\n                if (intersection) {\n                  intersection.faceIndex = Math.floor(j / 3); // triangle number in indexed buffer semantics\n\n                  intersection.face.materialIndex = group.materialIndex;\n                  intersects.push(intersection);\n                }\n              }\n            }\n          } else {\n            var _start3 = Math.max(0, drawRange.start);\n\n            var _end2 = Math.min(index.count, drawRange.start + drawRange.count);\n\n            for (var _i69 = _start3, _il6 = _end2; _i69 < _il6; _i69 += 3) {\n              var _a3 = index.getX(_i69);\n\n              var _b2 = index.getX(_i69 + 1);\n\n              var _c3 = index.getX(_i69 + 2);\n\n              intersection = checkBufferGeometryIntersection(this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, _a3, _b2, _c3);\n\n              if (intersection) {\n                intersection.faceIndex = Math.floor(_i69 / 3); // triangle number in indexed buffer semantics\n\n                intersects.push(intersection);\n              }\n            }\n          }\n        } else if (position !== undefined) {\n          // non-indexed buffer geometry\n          if (Array.isArray(material)) {\n            for (var _i70 = 0, _il7 = groups.length; _i70 < _il7; _i70++) {\n              var _group2 = groups[_i70];\n              var _groupMaterial = material[_group2.materialIndex];\n\n              var _start4 = Math.max(_group2.start, drawRange.start);\n\n              var _end3 = Math.min(_group2.start + _group2.count, drawRange.start + drawRange.count);\n\n              for (var _j3 = _start4, _jl2 = _end3; _j3 < _jl2; _j3 += 3) {\n                var _a4 = _j3;\n\n                var _b3 = _j3 + 1;\n\n                var _c4 = _j3 + 2;\n\n                intersection = checkBufferGeometryIntersection(this, _groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, _a4, _b3, _c4);\n\n                if (intersection) {\n                  intersection.faceIndex = Math.floor(_j3 / 3); // triangle number in non-indexed buffer semantics\n\n                  intersection.face.materialIndex = _group2.materialIndex;\n                  intersects.push(intersection);\n                }\n              }\n            }\n          } else {\n            var _start5 = Math.max(0, drawRange.start);\n\n            var _end4 = Math.min(position.count, drawRange.start + drawRange.count);\n\n            for (var _i71 = _start5, _il8 = _end4; _i71 < _il8; _i71 += 3) {\n              var _a5 = _i71;\n\n              var _b4 = _i71 + 1;\n\n              var _c5 = _i71 + 2;\n\n              intersection = checkBufferGeometryIntersection(this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, _a5, _b4, _c5);\n\n              if (intersection) {\n                intersection.faceIndex = Math.floor(_i71 / 3); // triangle number in non-indexed buffer semantics\n\n                intersects.push(intersection);\n              }\n            }\n          }\n        }\n      } else if (geometry.isGeometry) {\n        console.error('THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n    }\n  }]);\n\n  return Mesh;\n}(Object3D);\n\nMesh.prototype.isMesh = true;\n\nfunction checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n  var intersect;\n\n  if (material.side === BackSide) {\n    intersect = ray.intersectTriangle(pC, pB, pA, true, point);\n  } else {\n    intersect = ray.intersectTriangle(pA, pB, pC, material.side !== DoubleSide, point);\n  }\n\n  if (intersect === null) return null;\n\n  _intersectionPointWorld.copy(point);\n\n  _intersectionPointWorld.applyMatrix4(object.matrixWorld);\n\n  var distance = raycaster.ray.origin.distanceTo(_intersectionPointWorld);\n  if (distance < raycaster.near || distance > raycaster.far) return null;\n  return {\n    distance: distance,\n    point: _intersectionPointWorld.clone(),\n    object: object\n  };\n}\n\nfunction checkBufferGeometryIntersection(object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c) {\n  _vA$1.fromBufferAttribute(position, a);\n\n  _vB$1.fromBufferAttribute(position, b);\n\n  _vC$1.fromBufferAttribute(position, c);\n\n  var morphInfluences = object.morphTargetInfluences;\n\n  if (morphPosition && morphInfluences) {\n    _morphA.set(0, 0, 0);\n\n    _morphB.set(0, 0, 0);\n\n    _morphC.set(0, 0, 0);\n\n    for (var _i72 = 0, il = morphPosition.length; _i72 < il; _i72++) {\n      var influence = morphInfluences[_i72];\n      var morphAttribute = morphPosition[_i72];\n      if (influence === 0) continue;\n\n      _tempA.fromBufferAttribute(morphAttribute, a);\n\n      _tempB.fromBufferAttribute(morphAttribute, b);\n\n      _tempC.fromBufferAttribute(morphAttribute, c);\n\n      if (morphTargetsRelative) {\n        _morphA.addScaledVector(_tempA, influence);\n\n        _morphB.addScaledVector(_tempB, influence);\n\n        _morphC.addScaledVector(_tempC, influence);\n      } else {\n        _morphA.addScaledVector(_tempA.sub(_vA$1), influence);\n\n        _morphB.addScaledVector(_tempB.sub(_vB$1), influence);\n\n        _morphC.addScaledVector(_tempC.sub(_vC$1), influence);\n      }\n    }\n\n    _vA$1.add(_morphA);\n\n    _vB$1.add(_morphB);\n\n    _vC$1.add(_morphC);\n  }\n\n  if (object.isSkinnedMesh) {\n    object.boneTransform(a, _vA$1);\n    object.boneTransform(b, _vB$1);\n    object.boneTransform(c, _vC$1);\n  }\n\n  var intersection = checkIntersection(object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint);\n\n  if (intersection) {\n    if (uv) {\n      _uvA$1.fromBufferAttribute(uv, a);\n\n      _uvB$1.fromBufferAttribute(uv, b);\n\n      _uvC$1.fromBufferAttribute(uv, c);\n\n      intersection.uv = Triangle.getUV(_intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2());\n    }\n\n    if (uv2) {\n      _uvA$1.fromBufferAttribute(uv2, a);\n\n      _uvB$1.fromBufferAttribute(uv2, b);\n\n      _uvC$1.fromBufferAttribute(uv2, c);\n\n      intersection.uv2 = Triangle.getUV(_intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2());\n    }\n\n    var face = {\n      a: a,\n      b: b,\n      c: c,\n      normal: new Vector3(),\n      materialIndex: 0\n    };\n    Triangle.getNormal(_vA$1, _vB$1, _vC$1, face.normal);\n    intersection.face = face;\n  }\n\n  return intersection;\n}\n\nvar BoxGeometry = /*#__PURE__*/function (_BufferGeometry) {\n  _inherits(BoxGeometry, _BufferGeometry);\n\n  var _super16 = _createSuper(BoxGeometry);\n\n  function BoxGeometry() {\n    var _this19;\n\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var widthSegments = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var heightSegments = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n    var depthSegments = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n\n    _classCallCheck(this, BoxGeometry);\n\n    _this19 = _super16.call(this);\n    _this19.type = 'BoxGeometry';\n    _this19.parameters = {\n      width: width,\n      height: height,\n      depth: depth,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      depthSegments: depthSegments\n    };\n\n    var scope = _assertThisInitialized(_this19); // segments\n\n\n    widthSegments = Math.floor(widthSegments);\n    heightSegments = Math.floor(heightSegments);\n    depthSegments = Math.floor(depthSegments); // buffers\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = []; // helper variables\n\n    var numberOfVertices = 0;\n    var groupStart = 0; // build each side of the box geometry\n\n    buildPlane('z', 'y', 'x', -1, -1, depth, height, width, depthSegments, heightSegments, 0); // px\n\n    buildPlane('z', 'y', 'x', 1, -1, depth, height, -width, depthSegments, heightSegments, 1); // nx\n\n    buildPlane('x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2); // py\n\n    buildPlane('x', 'z', 'y', 1, -1, width, depth, -height, widthSegments, depthSegments, 3); // ny\n\n    buildPlane('x', 'y', 'z', 1, -1, width, height, depth, widthSegments, heightSegments, 4); // pz\n\n    buildPlane('x', 'y', 'z', -1, -1, width, height, -depth, widthSegments, heightSegments, 5); // nz\n    // build geometry\n\n    _this19.setIndex(indices);\n\n    _this19.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n\n    _this19.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n\n    _this19.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    function buildPlane(u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex) {\n      var segmentWidth = width / gridX;\n      var segmentHeight = height / gridY;\n      var widthHalf = width / 2;\n      var heightHalf = height / 2;\n      var depthHalf = depth / 2;\n      var gridX1 = gridX + 1;\n      var gridY1 = gridY + 1;\n      var vertexCounter = 0;\n      var groupCount = 0;\n      var vector = new Vector3(); // generate vertices, normals and uvs\n\n      for (var iy = 0; iy < gridY1; iy++) {\n        var y = iy * segmentHeight - heightHalf;\n\n        for (var ix = 0; ix < gridX1; ix++) {\n          var _x4 = ix * segmentWidth - widthHalf; // set values to correct vector component\n\n\n          vector[u] = _x4 * udir;\n          vector[v] = y * vdir;\n          vector[w] = depthHalf; // now apply vector to vertex buffer\n\n          vertices.push(vector.x, vector.y, vector.z); // set values to correct vector component\n\n          vector[u] = 0;\n          vector[v] = 0;\n          vector[w] = depth > 0 ? 1 : -1; // now apply vector to normal buffer\n\n          normals.push(vector.x, vector.y, vector.z); // uvs\n\n          uvs.push(ix / gridX);\n          uvs.push(1 - iy / gridY); // counters\n\n          vertexCounter += 1;\n        }\n      } // indices\n      // 1. you need three indices to draw a single face\n      // 2. a single segment consists of two faces\n      // 3. so we need to generate six (2*3) indices per segment\n\n\n      for (var _iy = 0; _iy < gridY; _iy++) {\n        for (var _ix = 0; _ix < gridX; _ix++) {\n          var _a6 = numberOfVertices + _ix + gridX1 * _iy;\n\n          var b = numberOfVertices + _ix + gridX1 * (_iy + 1);\n\n          var _c6 = numberOfVertices + (_ix + 1) + gridX1 * (_iy + 1);\n\n          var d = numberOfVertices + (_ix + 1) + gridX1 * _iy; // faces\n\n          indices.push(_a6, b, d);\n          indices.push(b, _c6, d); // increase counter\n\n          groupCount += 6;\n        }\n      } // add a group to the geometry. this will ensure multi material support\n\n\n      scope.addGroup(groupStart, groupCount, materialIndex); // calculate new start value for groups\n\n      groupStart += groupCount; // update total number of vertices\n\n      numberOfVertices += vertexCounter;\n    }\n\n    return _this19;\n  }\n\n  _createClass(BoxGeometry, null, [{\n    key: \"fromJSON\",\n    value: function fromJSON(data) {\n      return new BoxGeometry(data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments);\n    }\n  }]);\n\n  return BoxGeometry;\n}(BufferGeometry);\n/**\n * Uniform Utilities\n */\n\n\nfunction cloneUniforms(src) {\n  var dst = {};\n\n  for (var u in src) {\n    dst[u] = {};\n\n    for (var _p4 in src[u]) {\n      var _property = src[u][_p4];\n\n      if (_property && (_property.isColor || _property.isMatrix3 || _property.isMatrix4 || _property.isVector2 || _property.isVector3 || _property.isVector4 || _property.isTexture || _property.isQuaternion)) {\n        dst[u][_p4] = _property.clone();\n      } else if (Array.isArray(_property)) {\n        dst[u][_p4] = _property.slice();\n      } else {\n        dst[u][_p4] = _property;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction mergeUniforms(uniforms) {\n  var merged = {};\n\n  for (var u = 0; u < uniforms.length; u++) {\n    var _tmp = cloneUniforms(uniforms[u]);\n\n    for (var _p5 in _tmp) {\n      merged[_p5] = _tmp[_p5];\n    }\n  }\n\n  return merged;\n} // Legacy\n\n\nvar UniformsUtils = {\n  clone: cloneUniforms,\n  merge: mergeUniforms\n};\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>\n * }\n */\n\nvar ShaderMaterial = /*#__PURE__*/function (_Material$2) {\n  _inherits(ShaderMaterial, _Material$2);\n\n  var _super17 = _createSuper(ShaderMaterial);\n\n  function ShaderMaterial(parameters) {\n    var _this20;\n\n    _classCallCheck(this, ShaderMaterial);\n\n    _this20 = _super17.call(this);\n    _this20.type = 'ShaderMaterial';\n    _this20.defines = {};\n    _this20.uniforms = {};\n    _this20.vertexShader = default_vertex;\n    _this20.fragmentShader = default_fragment;\n    _this20.linewidth = 1;\n    _this20.wireframe = false;\n    _this20.wireframeLinewidth = 1;\n    _this20.fog = false; // set to use scene fog\n\n    _this20.lights = false; // set to use scene lights\n\n    _this20.clipping = false; // set to use user-defined clipping planes\n\n    _this20.extensions = {\n      derivatives: false,\n      // set to use derivatives\n      fragDepth: false,\n      // set to use fragment depth values\n      drawBuffers: false,\n      // set to use draw buffers\n      shaderTextureLOD: false // set to use shader texture LOD\n\n    }; // When rendered geometry doesn't include these attributes but the material does,\n    // use these default values in WebGL. This avoids errors when buffer data is missing.\n\n    _this20.defaultAttributeValues = {\n      'color': [1, 1, 1],\n      'uv': [0, 0],\n      'uv2': [0, 0]\n    };\n    _this20.index0AttributeName = undefined;\n    _this20.uniformsNeedUpdate = false;\n    _this20.glslVersion = null;\n\n    if (parameters !== undefined) {\n      if (parameters.attributes !== undefined) {\n        console.error('THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.');\n      }\n\n      _this20.setValues(parameters);\n    }\n\n    return _this20;\n  }\n\n  _createClass(ShaderMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(ShaderMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.fragmentShader = source.fragmentShader;\n      this.vertexShader = source.vertexShader;\n      this.uniforms = cloneUniforms(source.uniforms);\n      this.defines = Object.assign({}, source.defines);\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.lights = source.lights;\n      this.clipping = source.clipping;\n      this.extensions = Object.assign({}, source.extensions);\n      this.glslVersion = source.glslVersion;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(ShaderMaterial.prototype), \"toJSON\", this).call(this, meta);\n\n      data.glslVersion = this.glslVersion;\n      data.uniforms = {};\n\n      for (var name in this.uniforms) {\n        var uniform = this.uniforms[name];\n        var value = uniform.value;\n\n        if (value && value.isTexture) {\n          data.uniforms[name] = {\n            type: 't',\n            value: value.toJSON(meta).uuid\n          };\n        } else if (value && value.isColor) {\n          data.uniforms[name] = {\n            type: 'c',\n            value: value.getHex()\n          };\n        } else if (value && value.isVector2) {\n          data.uniforms[name] = {\n            type: 'v2',\n            value: value.toArray()\n          };\n        } else if (value && value.isVector3) {\n          data.uniforms[name] = {\n            type: 'v3',\n            value: value.toArray()\n          };\n        } else if (value && value.isVector4) {\n          data.uniforms[name] = {\n            type: 'v4',\n            value: value.toArray()\n          };\n        } else if (value && value.isMatrix3) {\n          data.uniforms[name] = {\n            type: 'm3',\n            value: value.toArray()\n          };\n        } else if (value && value.isMatrix4) {\n          data.uniforms[name] = {\n            type: 'm4',\n            value: value.toArray()\n          };\n        } else {\n          data.uniforms[name] = {\n            value: value\n          }; // note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n        }\n      }\n\n      if (Object.keys(this.defines).length > 0) data.defines = this.defines;\n      data.vertexShader = this.vertexShader;\n      data.fragmentShader = this.fragmentShader;\n      var extensions = {};\n\n      for (var key in this.extensions) {\n        if (this.extensions[key] === true) extensions[key] = true;\n      }\n\n      if (Object.keys(extensions).length > 0) data.extensions = extensions;\n      return data;\n    }\n  }]);\n\n  return ShaderMaterial;\n}(Material$1);\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nvar Camera = /*#__PURE__*/function (_Object3D2) {\n  _inherits(Camera, _Object3D2);\n\n  var _super18 = _createSuper(Camera);\n\n  function Camera() {\n    var _this21;\n\n    _classCallCheck(this, Camera);\n\n    _this21 = _super18.call(this);\n    _this21.type = 'Camera';\n    _this21.matrixWorldInverse = new Matrix4();\n    _this21.projectionMatrix = new Matrix4();\n    _this21.projectionMatrixInverse = new Matrix4();\n    return _this21;\n  }\n\n  _createClass(Camera, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(Camera.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.matrixWorldInverse.copy(source.matrixWorldInverse);\n      this.projectionMatrix.copy(source.projectionMatrix);\n      this.projectionMatrixInverse.copy(source.projectionMatrixInverse);\n      return this;\n    }\n  }, {\n    key: \"getWorldDirection\",\n    value: function getWorldDirection(target) {\n      this.updateWorldMatrix(true, false);\n      var e = this.matrixWorld.elements;\n      return target.set(-e[8], -e[9], -e[10]).normalize();\n    }\n  }, {\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      _get(_getPrototypeOf(Camera.prototype), \"updateMatrixWorld\", this).call(this, force);\n\n      this.matrixWorldInverse.copy(this.matrixWorld).invert();\n    }\n  }, {\n    key: \"updateWorldMatrix\",\n    value: function updateWorldMatrix(updateParents, updateChildren) {\n      _get(_getPrototypeOf(Camera.prototype), \"updateWorldMatrix\", this).call(this, updateParents, updateChildren);\n\n      this.matrixWorldInverse.copy(this.matrixWorld).invert();\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Camera;\n}(Object3D);\n\nCamera.prototype.isCamera = true;\n\nvar PerspectiveCamera = /*#__PURE__*/function (_Camera) {\n  _inherits(PerspectiveCamera, _Camera);\n\n  var _super19 = _createSuper(PerspectiveCamera);\n\n  function PerspectiveCamera() {\n    var _this22;\n\n    var fov = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 50;\n    var aspect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var near = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.1;\n    var far = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 2000;\n\n    _classCallCheck(this, PerspectiveCamera);\n\n    _this22 = _super19.call(this);\n    _this22.type = 'PerspectiveCamera';\n    _this22.fov = fov;\n    _this22.zoom = 1;\n    _this22.near = near;\n    _this22.far = far;\n    _this22.focus = 10;\n    _this22.aspect = aspect;\n    _this22.view = null;\n    _this22.filmGauge = 35; // width of the film (default in millimeters)\n\n    _this22.filmOffset = 0; // horizontal film offset (same unit as gauge)\n\n    _this22.updateProjectionMatrix();\n\n    return _this22;\n  }\n\n  _createClass(PerspectiveCamera, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(PerspectiveCamera.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.fov = source.fov;\n      this.zoom = source.zoom;\n      this.near = source.near;\n      this.far = source.far;\n      this.focus = source.focus;\n      this.aspect = source.aspect;\n      this.view = source.view === null ? null : Object.assign({}, source.view);\n      this.filmGauge = source.filmGauge;\n      this.filmOffset = source.filmOffset;\n      return this;\n    }\n    /**\n     * Sets the FOV by focal length in respect to the current .filmGauge.\n     *\n     * The default film gauge is 35, so that the focal length can be specified for\n     * a 35mm (full frame) camera.\n     *\n     * Values for focal length and film gauge must have the same unit.\n     */\n\n  }, {\n    key: \"setFocalLength\",\n    value: function setFocalLength(focalLength) {\n      /** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n      var vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n      this.fov = RAD2DEG * 2 * Math.atan(vExtentSlope);\n      this.updateProjectionMatrix();\n    }\n    /**\n     * Calculates the focal length from the current .fov and .filmGauge.\n     */\n\n  }, {\n    key: \"getFocalLength\",\n    value: function getFocalLength() {\n      var vExtentSlope = Math.tan(DEG2RAD * 0.5 * this.fov);\n      return 0.5 * this.getFilmHeight() / vExtentSlope;\n    }\n  }, {\n    key: \"getEffectiveFOV\",\n    value: function getEffectiveFOV() {\n      return RAD2DEG * 2 * Math.atan(Math.tan(DEG2RAD * 0.5 * this.fov) / this.zoom);\n    }\n  }, {\n    key: \"getFilmWidth\",\n    value: function getFilmWidth() {\n      // film not completely covered in portrait format (aspect < 1)\n      return this.filmGauge * Math.min(this.aspect, 1);\n    }\n  }, {\n    key: \"getFilmHeight\",\n    value: function getFilmHeight() {\n      // film not completely covered in landscape format (aspect > 1)\n      return this.filmGauge / Math.max(this.aspect, 1);\n    }\n    /**\n     * Sets an offset in a larger frustum. This is useful for multi-window or\n     * multi-monitor/multi-machine setups.\n     *\n     * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n     * the monitors are in grid like this\n     *\n     *   +---+---+---+\n     *   | A | B | C |\n     *   +---+---+---+\n     *   | D | E | F |\n     *   +---+---+---+\n     *\n     * then for each monitor you would call it like this\n     *\n     *   const w = 1920;\n     *   const h = 1080;\n     *   const fullWidth = w * 3;\n     *   const fullHeight = h * 2;\n     *\n     *   --A--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n     *   --B--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n     *   --C--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n     *   --D--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n     *   --E--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n     *   --F--\n     *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n     *\n     *   Note there is no reason monitors have to be the same size or in a grid.\n     */\n\n  }, {\n    key: \"setViewOffset\",\n    value: function setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n      this.aspect = fullWidth / fullHeight;\n\n      if (this.view === null) {\n        this.view = {\n          enabled: true,\n          fullWidth: 1,\n          fullHeight: 1,\n          offsetX: 0,\n          offsetY: 0,\n          width: 1,\n          height: 1\n        };\n      }\n\n      this.view.enabled = true;\n      this.view.fullWidth = fullWidth;\n      this.view.fullHeight = fullHeight;\n      this.view.offsetX = x;\n      this.view.offsetY = y;\n      this.view.width = width;\n      this.view.height = height;\n      this.updateProjectionMatrix();\n    }\n  }, {\n    key: \"clearViewOffset\",\n    value: function clearViewOffset() {\n      if (this.view !== null) {\n        this.view.enabled = false;\n      }\n\n      this.updateProjectionMatrix();\n    }\n  }, {\n    key: \"updateProjectionMatrix\",\n    value: function updateProjectionMatrix() {\n      var near = this.near;\n      var top = near * Math.tan(DEG2RAD * 0.5 * this.fov) / this.zoom;\n      var height = 2 * top;\n      var width = this.aspect * height;\n      var left = -0.5 * width;\n      var view = this.view;\n\n      if (this.view !== null && this.view.enabled) {\n        var fullWidth = view.fullWidth,\n            fullHeight = view.fullHeight;\n        left += view.offsetX * width / fullWidth;\n        top -= view.offsetY * height / fullHeight;\n        width *= view.width / fullWidth;\n        height *= view.height / fullHeight;\n      }\n\n      var skew = this.filmOffset;\n      if (skew !== 0) left += near * skew / this.getFilmWidth();\n      this.projectionMatrix.makePerspective(left, left + width, top, top - height, near, this.far);\n      this.projectionMatrixInverse.copy(this.projectionMatrix).invert();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(PerspectiveCamera.prototype), \"toJSON\", this).call(this, meta);\n\n      data.object.fov = this.fov;\n      data.object.zoom = this.zoom;\n      data.object.near = this.near;\n      data.object.far = this.far;\n      data.object.focus = this.focus;\n      data.object.aspect = this.aspect;\n      if (this.view !== null) data.object.view = Object.assign({}, this.view);\n      data.object.filmGauge = this.filmGauge;\n      data.object.filmOffset = this.filmOffset;\n      return data;\n    }\n  }]);\n\n  return PerspectiveCamera;\n}(Camera);\n\nPerspectiveCamera.prototype.isPerspectiveCamera = true;\nvar fov = 90,\n    aspect = 1;\n\nvar CubeCamera = /*#__PURE__*/function (_Object3D3) {\n  _inherits(CubeCamera, _Object3D3);\n\n  var _super20 = _createSuper(CubeCamera);\n\n  function CubeCamera(near, far, renderTarget) {\n    var _this23;\n\n    _classCallCheck(this, CubeCamera);\n\n    _this23 = _super20.call(this);\n    _this23.type = 'CubeCamera';\n\n    if (renderTarget.isWebGLCubeRenderTarget !== true) {\n      console.error('THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.');\n      return _possibleConstructorReturn(_this23);\n    }\n\n    _this23.renderTarget = renderTarget;\n    var cameraPX = new PerspectiveCamera(fov, aspect, near, far);\n    cameraPX.layers = _this23.layers;\n    cameraPX.up.set(0, -1, 0);\n    cameraPX.lookAt(new Vector3(1, 0, 0));\n\n    _this23.add(cameraPX);\n\n    var cameraNX = new PerspectiveCamera(fov, aspect, near, far);\n    cameraNX.layers = _this23.layers;\n    cameraNX.up.set(0, -1, 0);\n    cameraNX.lookAt(new Vector3(-1, 0, 0));\n\n    _this23.add(cameraNX);\n\n    var cameraPY = new PerspectiveCamera(fov, aspect, near, far);\n    cameraPY.layers = _this23.layers;\n    cameraPY.up.set(0, 0, 1);\n    cameraPY.lookAt(new Vector3(0, 1, 0));\n\n    _this23.add(cameraPY);\n\n    var cameraNY = new PerspectiveCamera(fov, aspect, near, far);\n    cameraNY.layers = _this23.layers;\n    cameraNY.up.set(0, 0, -1);\n    cameraNY.lookAt(new Vector3(0, -1, 0));\n\n    _this23.add(cameraNY);\n\n    var cameraPZ = new PerspectiveCamera(fov, aspect, near, far);\n    cameraPZ.layers = _this23.layers;\n    cameraPZ.up.set(0, -1, 0);\n    cameraPZ.lookAt(new Vector3(0, 0, 1));\n\n    _this23.add(cameraPZ);\n\n    var cameraNZ = new PerspectiveCamera(fov, aspect, near, far);\n    cameraNZ.layers = _this23.layers;\n    cameraNZ.up.set(0, -1, 0);\n    cameraNZ.lookAt(new Vector3(0, 0, -1));\n\n    _this23.add(cameraNZ);\n\n    return _this23;\n  }\n\n  _createClass(CubeCamera, [{\n    key: \"update\",\n    value: function update(renderer, scene) {\n      if (this.parent === null) this.updateMatrixWorld();\n      var renderTarget = this.renderTarget;\n\n      var _this$children = _slicedToArray(this.children, 6),\n          cameraPX = _this$children[0],\n          cameraNX = _this$children[1],\n          cameraPY = _this$children[2],\n          cameraNY = _this$children[3],\n          cameraPZ = _this$children[4],\n          cameraNZ = _this$children[5];\n\n      var currentXrEnabled = renderer.xr.enabled;\n      var currentRenderTarget = renderer.getRenderTarget();\n      renderer.xr.enabled = false;\n      var generateMipmaps = renderTarget.texture.generateMipmaps;\n      renderTarget.texture.generateMipmaps = false;\n      renderer.setRenderTarget(renderTarget, 0);\n      renderer.render(scene, cameraPX);\n      renderer.setRenderTarget(renderTarget, 1);\n      renderer.render(scene, cameraNX);\n      renderer.setRenderTarget(renderTarget, 2);\n      renderer.render(scene, cameraPY);\n      renderer.setRenderTarget(renderTarget, 3);\n      renderer.render(scene, cameraNY);\n      renderer.setRenderTarget(renderTarget, 4);\n      renderer.render(scene, cameraPZ);\n      renderTarget.texture.generateMipmaps = generateMipmaps;\n      renderer.setRenderTarget(renderTarget, 5);\n      renderer.render(scene, cameraNZ);\n      renderer.setRenderTarget(currentRenderTarget);\n      renderer.xr.enabled = currentXrEnabled;\n    }\n  }]);\n\n  return CubeCamera;\n}(Object3D);\n\nvar CubeTexture = /*#__PURE__*/function (_Texture$) {\n  _inherits(CubeTexture, _Texture$);\n\n  var _super21 = _createSuper(CubeTexture);\n\n  function CubeTexture(images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n    var _this24;\n\n    _classCallCheck(this, CubeTexture);\n\n    images = images !== undefined ? images : [];\n    mapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n    format = format !== undefined ? format : RGBFormat;\n    _this24 = _super21.call(this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n    _this24.flipY = false;\n    return _this24;\n  }\n\n  _createClass(CubeTexture, [{\n    key: \"images\",\n    get: function get() {\n      return this.image;\n    },\n    set: function set(value) {\n      this.image = value;\n    }\n  }]);\n\n  return CubeTexture;\n}(Texture$1);\n\nCubeTexture.prototype.isCubeTexture = true;\n\nvar WebGLCubeRenderTarget = /*#__PURE__*/function (_WebGLRenderTarget3) {\n  _inherits(WebGLCubeRenderTarget, _WebGLRenderTarget3);\n\n  var _super22 = _createSuper(WebGLCubeRenderTarget);\n\n  function WebGLCubeRenderTarget(size, options, dummy) {\n    var _this25;\n\n    _classCallCheck(this, WebGLCubeRenderTarget);\n\n    if (Number.isInteger(options)) {\n      console.warn('THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )');\n      options = dummy;\n    }\n\n    _this25 = _super22.call(this, size, size, options);\n    options = options || {}; // By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n    // in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n    // in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n    // three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n    // and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n    // as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n    _this25.texture = new CubeTexture(undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding);\n    _this25.texture.isRenderTargetTexture = true;\n    _this25.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n    _this25.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n    _this25.texture._needsFlipEnvMap = false;\n    return _this25;\n  }\n\n  _createClass(WebGLCubeRenderTarget, [{\n    key: \"fromEquirectangularTexture\",\n    value: function fromEquirectangularTexture(renderer, texture) {\n      this.texture.type = texture.type;\n      this.texture.format = RGBAFormat; // see #18859\n\n      this.texture.encoding = texture.encoding;\n      this.texture.generateMipmaps = texture.generateMipmaps;\n      this.texture.minFilter = texture.minFilter;\n      this.texture.magFilter = texture.magFilter;\n      var shader = {\n        uniforms: {\n          tEquirect: {\n            value: null\n          }\n        },\n        vertexShader:\n        /* glsl */\n        \"\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",\n        fragmentShader:\n        /* glsl */\n        \"\\n\\n\\t\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\t#include <common>\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\"\n      };\n      var geometry = new BoxGeometry(5, 5, 5);\n      var material = new ShaderMaterial({\n        name: 'CubemapFromEquirect',\n        uniforms: cloneUniforms(shader.uniforms),\n        vertexShader: shader.vertexShader,\n        fragmentShader: shader.fragmentShader,\n        side: BackSide,\n        blending: NoBlending\n      });\n      material.uniforms.tEquirect.value = texture;\n      var mesh = new Mesh(geometry, material);\n      var currentMinFilter = texture.minFilter; // Avoid blurred poles\n\n      if (texture.minFilter === LinearMipmapLinearFilter) texture.minFilter = LinearFilter;\n      var camera = new CubeCamera(1, 10, this);\n      camera.update(renderer, mesh);\n      texture.minFilter = currentMinFilter;\n      mesh.geometry.dispose();\n      mesh.material.dispose();\n      return this;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(renderer, color, depth, stencil) {\n      var currentRenderTarget = renderer.getRenderTarget();\n\n      for (var _i73 = 0; _i73 < 6; _i73++) {\n        renderer.setRenderTarget(this, _i73);\n        renderer.clear(color, depth, stencil);\n      }\n\n      renderer.setRenderTarget(currentRenderTarget);\n    }\n  }]);\n\n  return WebGLCubeRenderTarget;\n}(WebGLRenderTarget);\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nvar _vector1 = /*@__PURE__*/new Vector3();\n\nvar _vector2 = /*@__PURE__*/new Vector3();\n\nvar _normalMatrix = /*@__PURE__*/new Matrix3();\n\nvar Plane = /*#__PURE__*/function () {\n  function Plane() {\n    var normal = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3(1, 0, 0);\n    var constant = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Plane);\n\n    // normal is assumed to be normalized\n    this.normal = normal;\n    this.constant = constant;\n  }\n\n  _createClass(Plane, [{\n    key: \"set\",\n    value: function set(normal, constant) {\n      this.normal.copy(normal);\n      this.constant = constant;\n      return this;\n    }\n  }, {\n    key: \"setComponents\",\n    value: function setComponents(x, y, z, w) {\n      this.normal.set(x, y, z);\n      this.constant = w;\n      return this;\n    }\n  }, {\n    key: \"setFromNormalAndCoplanarPoint\",\n    value: function setFromNormalAndCoplanarPoint(normal, point) {\n      this.normal.copy(normal);\n      this.constant = -point.dot(this.normal);\n      return this;\n    }\n  }, {\n    key: \"setFromCoplanarPoints\",\n    value: function setFromCoplanarPoints(a, b, c) {\n      var normal = _vector1.subVectors(c, b).cross(_vector2.subVectors(a, b)).normalize(); // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\n      this.setFromNormalAndCoplanarPoint(normal, a);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(plane) {\n      this.normal.copy(plane.normal);\n      this.constant = plane.constant;\n      return this;\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      // Note: will lead to a divide by zero if the plane is invalid.\n      var inverseNormalLength = 1.0 / this.normal.length();\n      this.normal.multiplyScalar(inverseNormalLength);\n      this.constant *= inverseNormalLength;\n      return this;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      this.constant *= -1;\n      this.normal.negate();\n      return this;\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      return this.normal.dot(point) + this.constant;\n    }\n  }, {\n    key: \"distanceToSphere\",\n    value: function distanceToSphere(sphere) {\n      return this.distanceToPoint(sphere.center) - sphere.radius;\n    }\n  }, {\n    key: \"projectPoint\",\n    value: function projectPoint(point, target) {\n      return target.copy(this.normal).multiplyScalar(-this.distanceToPoint(point)).add(point);\n    }\n  }, {\n    key: \"intersectLine\",\n    value: function intersectLine(line, target) {\n      var direction = line.delta(_vector1);\n      var denominator = this.normal.dot(direction);\n\n      if (denominator === 0) {\n        // line is coplanar, return origin\n        if (this.distanceToPoint(line.start) === 0) {\n          return target.copy(line.start);\n        } // Unsure if this is the correct method to handle this case.\n\n\n        return null;\n      }\n\n      var t = -(line.start.dot(this.normal) + this.constant) / denominator;\n\n      if (t < 0 || t > 1) {\n        return null;\n      }\n\n      return target.copy(direction).multiplyScalar(t).add(line.start);\n    }\n  }, {\n    key: \"intersectsLine\",\n    value: function intersectsLine(line) {\n      // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n      var startSign = this.distanceToPoint(line.start);\n      var endSign = this.distanceToPoint(line.end);\n      return startSign < 0 && endSign > 0 || endSign < 0 && startSign > 0;\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      return box.intersectsPlane(this);\n    }\n  }, {\n    key: \"intersectsSphere\",\n    value: function intersectsSphere(sphere) {\n      return sphere.intersectsPlane(this);\n    }\n  }, {\n    key: \"coplanarPoint\",\n    value: function coplanarPoint(target) {\n      return target.copy(this.normal).multiplyScalar(-this.constant);\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(matrix, optionalNormalMatrix) {\n      var normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix(matrix);\n\n      var referencePoint = this.coplanarPoint(_vector1).applyMatrix4(matrix);\n      var normal = this.normal.applyMatrix3(normalMatrix).normalize();\n      this.constant = -referencePoint.dot(normal);\n      return this;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(offset) {\n      this.constant -= offset.dot(this.normal);\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(plane) {\n      return plane.normal.equals(this.normal) && plane.constant === this.constant;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Plane;\n}();\n\nPlane.prototype.isPlane = true;\n\nvar _sphere$2 = /*@__PURE__*/new Sphere();\n\nvar _vector$7 = /*@__PURE__*/new Vector3();\n\nvar Frustum = /*#__PURE__*/function () {\n  function Frustum() {\n    var p0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Plane();\n    var p1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Plane();\n    var p2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Plane();\n    var p3 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new Plane();\n    var p4 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new Plane();\n    var p5 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : new Plane();\n\n    _classCallCheck(this, Frustum);\n\n    this.planes = [p0, p1, p2, p3, p4, p5];\n  }\n\n  _createClass(Frustum, [{\n    key: \"set\",\n    value: function set(p0, p1, p2, p3, p4, p5) {\n      var planes = this.planes;\n      planes[0].copy(p0);\n      planes[1].copy(p1);\n      planes[2].copy(p2);\n      planes[3].copy(p3);\n      planes[4].copy(p4);\n      planes[5].copy(p5);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(frustum) {\n      var planes = this.planes;\n\n      for (var _i74 = 0; _i74 < 6; _i74++) {\n        planes[_i74].copy(frustum.planes[_i74]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setFromProjectionMatrix\",\n    value: function setFromProjectionMatrix(m) {\n      var planes = this.planes;\n      var me = m.elements;\n      var me0 = me[0],\n          me1 = me[1],\n          me2 = me[2],\n          me3 = me[3];\n      var me4 = me[4],\n          me5 = me[5],\n          me6 = me[6],\n          me7 = me[7];\n      var me8 = me[8],\n          me9 = me[9],\n          me10 = me[10],\n          me11 = me[11];\n      var me12 = me[12],\n          me13 = me[13],\n          me14 = me[14],\n          me15 = me[15];\n      planes[0].setComponents(me3 - me0, me7 - me4, me11 - me8, me15 - me12).normalize();\n      planes[1].setComponents(me3 + me0, me7 + me4, me11 + me8, me15 + me12).normalize();\n      planes[2].setComponents(me3 + me1, me7 + me5, me11 + me9, me15 + me13).normalize();\n      planes[3].setComponents(me3 - me1, me7 - me5, me11 - me9, me15 - me13).normalize();\n      planes[4].setComponents(me3 - me2, me7 - me6, me11 - me10, me15 - me14).normalize();\n      planes[5].setComponents(me3 + me2, me7 + me6, me11 + me10, me15 + me14).normalize();\n      return this;\n    }\n  }, {\n    key: \"intersectsObject\",\n    value: function intersectsObject(object) {\n      var geometry = object.geometry;\n      if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n      _sphere$2.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);\n\n      return this.intersectsSphere(_sphere$2);\n    }\n  }, {\n    key: \"intersectsSprite\",\n    value: function intersectsSprite(sprite) {\n      _sphere$2.center.set(0, 0, 0);\n\n      _sphere$2.radius = 0.7071067811865476;\n\n      _sphere$2.applyMatrix4(sprite.matrixWorld);\n\n      return this.intersectsSphere(_sphere$2);\n    }\n  }, {\n    key: \"intersectsSphere\",\n    value: function intersectsSphere(sphere) {\n      var planes = this.planes;\n      var center = sphere.center;\n      var negRadius = -sphere.radius;\n\n      for (var _i75 = 0; _i75 < 6; _i75++) {\n        var distance = planes[_i75].distanceToPoint(center);\n\n        if (distance < negRadius) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"intersectsBox\",\n    value: function intersectsBox(box) {\n      var planes = this.planes;\n\n      for (var _i76 = 0; _i76 < 6; _i76++) {\n        var plane = planes[_i76]; // corner at max distance\n\n        _vector$7.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n        _vector$7.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n        _vector$7.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n        if (plane.distanceToPoint(_vector$7) < 0) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"containsPoint\",\n    value: function containsPoint(point) {\n      var planes = this.planes;\n\n      for (var _i77 = 0; _i77 < 6; _i77++) {\n        if (planes[_i77].distanceToPoint(point) < 0) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Frustum;\n}();\n\nfunction WebGLAnimation() {\n  var context = null;\n  var isAnimating = false;\n  var animationLoop = null;\n  var requestId = null;\n\n  function onAnimationFrame(time, frame) {\n    animationLoop(time, frame);\n    requestId = context.requestAnimationFrame(onAnimationFrame);\n  }\n\n  return {\n    start: function start() {\n      if (isAnimating === true) return;\n      if (animationLoop === null) return;\n      requestId = context.requestAnimationFrame(onAnimationFrame);\n      isAnimating = true;\n    },\n    stop: function stop() {\n      context.cancelAnimationFrame(requestId);\n      isAnimating = false;\n    },\n    setAnimationLoop: function setAnimationLoop(callback) {\n      animationLoop = callback;\n    },\n    setContext: function setContext(value) {\n      context = value;\n    }\n  };\n}\n\nfunction WebGLAttributes(gl, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var buffers = new WeakMap();\n\n  function createBuffer(attribute, bufferType) {\n    var array = attribute.array;\n    var usage = attribute.usage;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(bufferType, buffer);\n    gl.bufferData(bufferType, array, usage);\n    attribute.onUploadCallback();\n    var type = 5126;\n\n    if (array instanceof Float32Array) {\n      type = 5126;\n    } else if (array instanceof Float64Array) {\n      console.warn('THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.');\n    } else if (array instanceof Uint16Array) {\n      if (attribute.isFloat16BufferAttribute) {\n        if (isWebGL2) {\n          type = 5131;\n        } else {\n          console.warn('THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.');\n        }\n      } else {\n        type = 5123;\n      }\n    } else if (array instanceof Int16Array) {\n      type = 5122;\n    } else if (array instanceof Uint32Array) {\n      type = 5125;\n    } else if (array instanceof Int32Array) {\n      type = 5124;\n    } else if (array instanceof Int8Array) {\n      type = 5120;\n    } else if (array instanceof Uint8Array) {\n      type = 5121;\n    } else if (array instanceof Uint8ClampedArray) {\n      type = 5121;\n    }\n\n    return {\n      buffer: buffer,\n      type: type,\n      bytesPerElement: array.BYTES_PER_ELEMENT,\n      version: attribute.version\n    };\n  }\n\n  function updateBuffer(buffer, attribute, bufferType) {\n    var array = attribute.array;\n    var updateRange = attribute.updateRange;\n    gl.bindBuffer(bufferType, buffer);\n\n    if (updateRange.count === -1) {\n      // Not using update ranges\n      gl.bufferSubData(bufferType, 0, array);\n    } else {\n      if (isWebGL2) {\n        gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array, updateRange.offset, updateRange.count);\n      } else {\n        gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n      }\n\n      updateRange.count = -1; // reset range\n    }\n  } //\n\n\n  function get(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    return buffers.get(attribute);\n  }\n\n  function remove(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data) {\n      gl.deleteBuffer(data.buffer);\n      buffers.delete(attribute);\n    }\n  }\n\n  function update(attribute, bufferType) {\n    if (attribute.isGLBufferAttribute) {\n      var cached = buffers.get(attribute);\n\n      if (!cached || cached.version < attribute.version) {\n        buffers.set(attribute, {\n          buffer: attribute.buffer,\n          type: attribute.type,\n          bytesPerElement: attribute.elementSize,\n          version: attribute.version\n        });\n      }\n\n      return;\n    }\n\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data === undefined) {\n      buffers.set(attribute, createBuffer(attribute, bufferType));\n    } else if (data.version < attribute.version) {\n      updateBuffer(data.buffer, attribute, bufferType);\n      data.version = attribute.version;\n    }\n  }\n\n  return {\n    get: get,\n    remove: remove,\n    update: update\n  };\n}\n\nvar PlaneGeometry = /*#__PURE__*/function (_BufferGeometry2) {\n  _inherits(PlaneGeometry, _BufferGeometry2);\n\n  var _super23 = _createSuper(PlaneGeometry);\n\n  function PlaneGeometry() {\n    var _this26;\n\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var widthSegments = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var heightSegments = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, PlaneGeometry);\n\n    _this26 = _super23.call(this);\n    _this26.type = 'PlaneGeometry';\n    _this26.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments\n    };\n    var width_half = width / 2;\n    var height_half = height / 2;\n    var gridX = Math.floor(widthSegments);\n    var gridY = Math.floor(heightSegments);\n    var gridX1 = gridX + 1;\n    var gridY1 = gridY + 1;\n    var segment_width = width / gridX;\n    var segment_height = height / gridY; //\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    for (var iy = 0; iy < gridY1; iy++) {\n      var y = iy * segment_height - height_half;\n\n      for (var ix = 0; ix < gridX1; ix++) {\n        var _x5 = ix * segment_width - width_half;\n\n        vertices.push(_x5, -y, 0);\n        normals.push(0, 0, 1);\n        uvs.push(ix / gridX);\n        uvs.push(1 - iy / gridY);\n      }\n    }\n\n    for (var _iy2 = 0; _iy2 < gridY; _iy2++) {\n      for (var _ix2 = 0; _ix2 < gridX; _ix2++) {\n        var _a7 = _ix2 + gridX1 * _iy2;\n\n        var b = _ix2 + gridX1 * (_iy2 + 1);\n\n        var _c7 = _ix2 + 1 + gridX1 * (_iy2 + 1);\n\n        var d = _ix2 + 1 + gridX1 * _iy2;\n        indices.push(_a7, b, d);\n        indices.push(b, _c7, d);\n      }\n    }\n\n    _this26.setIndex(indices);\n\n    _this26.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n\n    _this26.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n\n    _this26.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    return _this26;\n  }\n\n  _createClass(PlaneGeometry, null, [{\n    key: \"fromJSON\",\n    value: function fromJSON(data) {\n      return new PlaneGeometry(data.width, data.height, data.widthSegments, data.heightSegments);\n    }\n  }]);\n\n  return PlaneGeometry;\n}(BufferGeometry);\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn ( f90 - f0 ) * fresnel + f0;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\\n\\t\\tvec2 f = fract( uv );\\n\\t\\tuv += 0.5 - f;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x += texelSize;\\n\\t\\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.y += texelSize;\\n\\t\\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x -= texelSize;\\n\\t\\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\treturn mix( tm, bm, f.y );\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value ) {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\t#ifdef SPECULAR\\n\\t\\tvec3 specularIntensityFactor = vec3( specularIntensity );\\n\\t\\tvec3 specularTintFactor = specularTint;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARTINTMAP\\n\\t\\t\\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );\\n\\t#else\\n\\t\\tvec3 specularIntensityFactor = vec3( 1.0 );\\n\\t\\tvec3 specularTintFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularColorF90 = vec3( 1.0 );\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularColorF90 = vec3( 1.0 );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n\\tvec3 specularColorF90;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\";\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\";\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tfloat transmissionFactor = transmission;\\n\\tfloat thicknessFactor = thickness;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\\n\\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\\n\\t\\tn, v, roughnessFactor, material.diffuseColor, material.specularColor,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\\n\\t\\tattenuationTint, attenuationDistance );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\\n#endif\";\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec4 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\\n\\t\\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\\n\\t\\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\\n\\t\\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\\n\\t\\treturn normalize(refractionVector) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness(float roughness, float ior) {\\n\\t\\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\\n\\t}\\n\\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\\n\\t\\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\\n\\t\\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\\n\\t}\\n\\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\\n\\t\\tif (attenuationDistance == 0.0) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\\n\\t\\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\\n\\t\\tvec3 attenuationColor, float attenuationDistance) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\\n\\t\\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\\n\\t}\\n#endif\";\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t\\t#ifdef USE_TANGENT\\n\\t\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t\\t#endif\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationTint;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularTint;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARTINTMAP\\n\\t\\tuniform sampler2D specularTintMap;\\n\\t#endif\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <transmission_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec4 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition;\\n#endif\\n}\";\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\nvar ShaderChunk = {\n  alphamap_fragment: alphamap_fragment,\n  alphamap_pars_fragment: alphamap_pars_fragment,\n  alphatest_fragment: alphatest_fragment,\n  aomap_fragment: aomap_fragment,\n  aomap_pars_fragment: aomap_pars_fragment,\n  begin_vertex: begin_vertex,\n  beginnormal_vertex: beginnormal_vertex,\n  bsdfs: bsdfs,\n  bumpmap_pars_fragment: bumpmap_pars_fragment,\n  clipping_planes_fragment: clipping_planes_fragment,\n  clipping_planes_pars_fragment: clipping_planes_pars_fragment,\n  clipping_planes_pars_vertex: clipping_planes_pars_vertex,\n  clipping_planes_vertex: clipping_planes_vertex,\n  color_fragment: color_fragment,\n  color_pars_fragment: color_pars_fragment,\n  color_pars_vertex: color_pars_vertex,\n  color_vertex: color_vertex,\n  common: common,\n  cube_uv_reflection_fragment: cube_uv_reflection_fragment,\n  defaultnormal_vertex: defaultnormal_vertex,\n  displacementmap_pars_vertex: displacementmap_pars_vertex,\n  displacementmap_vertex: displacementmap_vertex,\n  emissivemap_fragment: emissivemap_fragment,\n  emissivemap_pars_fragment: emissivemap_pars_fragment,\n  encodings_fragment: encodings_fragment,\n  encodings_pars_fragment: encodings_pars_fragment,\n  envmap_fragment: envmap_fragment,\n  envmap_common_pars_fragment: envmap_common_pars_fragment,\n  envmap_pars_fragment: envmap_pars_fragment,\n  envmap_pars_vertex: envmap_pars_vertex,\n  envmap_physical_pars_fragment: envmap_physical_pars_fragment,\n  envmap_vertex: envmap_vertex,\n  fog_vertex: fog_vertex,\n  fog_pars_vertex: fog_pars_vertex,\n  fog_fragment: fog_fragment,\n  fog_pars_fragment: fog_pars_fragment,\n  gradientmap_pars_fragment: gradientmap_pars_fragment,\n  lightmap_fragment: lightmap_fragment,\n  lightmap_pars_fragment: lightmap_pars_fragment,\n  lights_lambert_vertex: lights_lambert_vertex,\n  lights_pars_begin: lights_pars_begin,\n  lights_toon_fragment: lights_toon_fragment,\n  lights_toon_pars_fragment: lights_toon_pars_fragment,\n  lights_phong_fragment: lights_phong_fragment,\n  lights_phong_pars_fragment: lights_phong_pars_fragment,\n  lights_physical_fragment: lights_physical_fragment,\n  lights_physical_pars_fragment: lights_physical_pars_fragment,\n  lights_fragment_begin: lights_fragment_begin,\n  lights_fragment_maps: lights_fragment_maps,\n  lights_fragment_end: lights_fragment_end,\n  logdepthbuf_fragment: logdepthbuf_fragment,\n  logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n  logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n  logdepthbuf_vertex: logdepthbuf_vertex,\n  map_fragment: map_fragment,\n  map_pars_fragment: map_pars_fragment,\n  map_particle_fragment: map_particle_fragment,\n  map_particle_pars_fragment: map_particle_pars_fragment,\n  metalnessmap_fragment: metalnessmap_fragment,\n  metalnessmap_pars_fragment: metalnessmap_pars_fragment,\n  morphnormal_vertex: morphnormal_vertex,\n  morphtarget_pars_vertex: morphtarget_pars_vertex,\n  morphtarget_vertex: morphtarget_vertex,\n  normal_fragment_begin: normal_fragment_begin,\n  normal_fragment_maps: normal_fragment_maps,\n  normalmap_pars_fragment: normalmap_pars_fragment,\n  clearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n  clearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n  clearcoat_pars_fragment: clearcoat_pars_fragment,\n  packing: packing,\n  premultiplied_alpha_fragment: premultiplied_alpha_fragment,\n  project_vertex: project_vertex,\n  dithering_fragment: dithering_fragment,\n  dithering_pars_fragment: dithering_pars_fragment,\n  roughnessmap_fragment: roughnessmap_fragment,\n  roughnessmap_pars_fragment: roughnessmap_pars_fragment,\n  shadowmap_pars_fragment: shadowmap_pars_fragment,\n  shadowmap_pars_vertex: shadowmap_pars_vertex,\n  shadowmap_vertex: shadowmap_vertex,\n  shadowmask_pars_fragment: shadowmask_pars_fragment,\n  skinbase_vertex: skinbase_vertex,\n  skinning_pars_vertex: skinning_pars_vertex,\n  skinning_vertex: skinning_vertex,\n  skinnormal_vertex: skinnormal_vertex,\n  specularmap_fragment: specularmap_fragment,\n  specularmap_pars_fragment: specularmap_pars_fragment,\n  tonemapping_fragment: tonemapping_fragment,\n  tonemapping_pars_fragment: tonemapping_pars_fragment,\n  transmission_fragment: transmission_fragment,\n  transmission_pars_fragment: transmission_pars_fragment,\n  uv_pars_fragment: uv_pars_fragment,\n  uv_pars_vertex: uv_pars_vertex,\n  uv_vertex: uv_vertex,\n  uv2_pars_fragment: uv2_pars_fragment,\n  uv2_pars_vertex: uv2_pars_vertex,\n  uv2_vertex: uv2_vertex,\n  worldpos_vertex: worldpos_vertex,\n  background_frag: background_frag,\n  background_vert: background_vert,\n  cube_frag: cube_frag,\n  cube_vert: cube_vert,\n  depth_frag: depth_frag,\n  depth_vert: depth_vert,\n  distanceRGBA_frag: distanceRGBA_frag,\n  distanceRGBA_vert: distanceRGBA_vert,\n  equirect_frag: equirect_frag,\n  equirect_vert: equirect_vert,\n  linedashed_frag: linedashed_frag,\n  linedashed_vert: linedashed_vert,\n  meshbasic_frag: meshbasic_frag,\n  meshbasic_vert: meshbasic_vert,\n  meshlambert_frag: meshlambert_frag,\n  meshlambert_vert: meshlambert_vert,\n  meshmatcap_frag: meshmatcap_frag,\n  meshmatcap_vert: meshmatcap_vert,\n  meshtoon_frag: meshtoon_frag,\n  meshtoon_vert: meshtoon_vert,\n  meshphong_frag: meshphong_frag,\n  meshphong_vert: meshphong_vert,\n  meshphysical_frag: meshphysical_frag,\n  meshphysical_vert: meshphysical_vert,\n  normal_frag: normal_frag,\n  normal_vert: normal_vert,\n  points_frag: points_frag,\n  points_vert: points_vert,\n  shadow_frag: shadow_frag,\n  shadow_vert: shadow_vert,\n  sprite_frag: sprite_frag,\n  sprite_vert: sprite_vert\n};\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n  common: {\n    diffuse: {\n      value: new Color(0xffffff)\n    },\n    opacity: {\n      value: 1.0\n    },\n    map: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    },\n    uv2Transform: {\n      value: new Matrix3()\n    },\n    alphaMap: {\n      value: null\n    }\n  },\n  specularmap: {\n    specularMap: {\n      value: null\n    }\n  },\n  envmap: {\n    envMap: {\n      value: null\n    },\n    flipEnvMap: {\n      value: -1\n    },\n    reflectivity: {\n      value: 1.0\n    },\n    refractionRatio: {\n      value: 0.98\n    },\n    maxMipLevel: {\n      value: 0\n    }\n  },\n  aomap: {\n    aoMap: {\n      value: null\n    },\n    aoMapIntensity: {\n      value: 1\n    }\n  },\n  lightmap: {\n    lightMap: {\n      value: null\n    },\n    lightMapIntensity: {\n      value: 1\n    }\n  },\n  emissivemap: {\n    emissiveMap: {\n      value: null\n    }\n  },\n  bumpmap: {\n    bumpMap: {\n      value: null\n    },\n    bumpScale: {\n      value: 1\n    }\n  },\n  normalmap: {\n    normalMap: {\n      value: null\n    },\n    normalScale: {\n      value: new Vector2(1, 1)\n    }\n  },\n  displacementmap: {\n    displacementMap: {\n      value: null\n    },\n    displacementScale: {\n      value: 1\n    },\n    displacementBias: {\n      value: 0\n    }\n  },\n  roughnessmap: {\n    roughnessMap: {\n      value: null\n    }\n  },\n  metalnessmap: {\n    metalnessMap: {\n      value: null\n    }\n  },\n  gradientmap: {\n    gradientMap: {\n      value: null\n    }\n  },\n  fog: {\n    fogDensity: {\n      value: 0.00025\n    },\n    fogNear: {\n      value: 1\n    },\n    fogFar: {\n      value: 2000\n    },\n    fogColor: {\n      value: new Color(0xffffff)\n    }\n  },\n  lights: {\n    ambientLightColor: {\n      value: []\n    },\n    lightProbe: {\n      value: []\n    },\n    directionalLights: {\n      value: [],\n      properties: {\n        direction: {},\n        color: {}\n      }\n    },\n    directionalLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowNormalBias: {},\n        shadowRadius: {},\n        shadowMapSize: {}\n      }\n    },\n    directionalShadowMap: {\n      value: []\n    },\n    directionalShadowMatrix: {\n      value: []\n    },\n    spotLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        direction: {},\n        distance: {},\n        coneCos: {},\n        penumbraCos: {},\n        decay: {}\n      }\n    },\n    spotLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowNormalBias: {},\n        shadowRadius: {},\n        shadowMapSize: {}\n      }\n    },\n    spotShadowMap: {\n      value: []\n    },\n    spotShadowMatrix: {\n      value: []\n    },\n    pointLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        decay: {},\n        distance: {}\n      }\n    },\n    pointLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowNormalBias: {},\n        shadowRadius: {},\n        shadowMapSize: {},\n        shadowCameraNear: {},\n        shadowCameraFar: {}\n      }\n    },\n    pointShadowMap: {\n      value: []\n    },\n    pointShadowMatrix: {\n      value: []\n    },\n    hemisphereLights: {\n      value: [],\n      properties: {\n        direction: {},\n        skyColor: {},\n        groundColor: {}\n      }\n    },\n    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n    rectAreaLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        width: {},\n        height: {}\n      }\n    },\n    ltc_1: {\n      value: null\n    },\n    ltc_2: {\n      value: null\n    }\n  },\n  points: {\n    diffuse: {\n      value: new Color(0xffffff)\n    },\n    opacity: {\n      value: 1.0\n    },\n    size: {\n      value: 1.0\n    },\n    scale: {\n      value: 1.0\n    },\n    map: {\n      value: null\n    },\n    alphaMap: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    }\n  },\n  sprite: {\n    diffuse: {\n      value: new Color(0xffffff)\n    },\n    opacity: {\n      value: 1.0\n    },\n    center: {\n      value: new Vector2(0.5, 0.5)\n    },\n    rotation: {\n      value: 0.0\n    },\n    map: {\n      value: null\n    },\n    alphaMap: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    }\n  }\n};\nvar ShaderLib = {\n  basic: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.fog]),\n    vertexShader: ShaderChunk.meshbasic_vert,\n    fragmentShader: ShaderChunk.meshbasic_frag\n  },\n  lambert: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      }\n    }]),\n    vertexShader: ShaderChunk.meshlambert_vert,\n    fragmentShader: ShaderChunk.meshlambert_frag\n  },\n  phong: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      },\n      specular: {\n        value: new Color(0x111111)\n      },\n      shininess: {\n        value: 30\n      }\n    }]),\n    vertexShader: ShaderChunk.meshphong_vert,\n    fragmentShader: ShaderChunk.meshphong_frag\n  },\n  standard: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.roughnessmap, UniformsLib.metalnessmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      },\n      roughness: {\n        value: 1.0\n      },\n      metalness: {\n        value: 0.0\n      },\n      envMapIntensity: {\n        value: 1\n      } // temporary\n\n    }]),\n    vertexShader: ShaderChunk.meshphysical_vert,\n    fragmentShader: ShaderChunk.meshphysical_frag\n  },\n  toon: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.gradientmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      }\n    }]),\n    vertexShader: ShaderChunk.meshtoon_vert,\n    fragmentShader: ShaderChunk.meshtoon_frag\n  },\n  matcap: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.fog, {\n      matcap: {\n        value: null\n      }\n    }]),\n    vertexShader: ShaderChunk.meshmatcap_vert,\n    fragmentShader: ShaderChunk.meshmatcap_frag\n  },\n  points: {\n    uniforms: mergeUniforms([UniformsLib.points, UniformsLib.fog]),\n    vertexShader: ShaderChunk.points_vert,\n    fragmentShader: ShaderChunk.points_frag\n  },\n  dashed: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.fog, {\n      scale: {\n        value: 1\n      },\n      dashSize: {\n        value: 1\n      },\n      totalSize: {\n        value: 2\n      }\n    }]),\n    vertexShader: ShaderChunk.linedashed_vert,\n    fragmentShader: ShaderChunk.linedashed_frag\n  },\n  depth: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.displacementmap]),\n    vertexShader: ShaderChunk.depth_vert,\n    fragmentShader: ShaderChunk.depth_frag\n  },\n  normal: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, {\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.normal_vert,\n    fragmentShader: ShaderChunk.normal_frag\n  },\n  sprite: {\n    uniforms: mergeUniforms([UniformsLib.sprite, UniformsLib.fog]),\n    vertexShader: ShaderChunk.sprite_vert,\n    fragmentShader: ShaderChunk.sprite_frag\n  },\n  background: {\n    uniforms: {\n      uvTransform: {\n        value: new Matrix3()\n      },\n      t2D: {\n        value: null\n      }\n    },\n    vertexShader: ShaderChunk.background_vert,\n    fragmentShader: ShaderChunk.background_frag\n  },\n\n  /* -------------------------------------------------------------------------\n  //\tCube map shader\n   ------------------------------------------------------------------------- */\n  cube: {\n    uniforms: mergeUniforms([UniformsLib.envmap, {\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.cube_vert,\n    fragmentShader: ShaderChunk.cube_frag\n  },\n  equirect: {\n    uniforms: {\n      tEquirect: {\n        value: null\n      }\n    },\n    vertexShader: ShaderChunk.equirect_vert,\n    fragmentShader: ShaderChunk.equirect_frag\n  },\n  distanceRGBA: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.displacementmap, {\n      referencePosition: {\n        value: new Vector3()\n      },\n      nearDistance: {\n        value: 1\n      },\n      farDistance: {\n        value: 1000\n      }\n    }]),\n    vertexShader: ShaderChunk.distanceRGBA_vert,\n    fragmentShader: ShaderChunk.distanceRGBA_frag\n  },\n  shadow: {\n    uniforms: mergeUniforms([UniformsLib.lights, UniformsLib.fog, {\n      color: {\n        value: new Color(0x00000)\n      },\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.shadow_vert,\n    fragmentShader: ShaderChunk.shadow_frag\n  }\n};\nShaderLib.physical = {\n  uniforms: mergeUniforms([ShaderLib.standard.uniforms, {\n    clearcoat: {\n      value: 0\n    },\n    clearcoatMap: {\n      value: null\n    },\n    clearcoatRoughness: {\n      value: 0\n    },\n    clearcoatRoughnessMap: {\n      value: null\n    },\n    clearcoatNormalScale: {\n      value: new Vector2(1, 1)\n    },\n    clearcoatNormalMap: {\n      value: null\n    },\n    sheen: {\n      value: new Color(0x000000)\n    },\n    transmission: {\n      value: 0\n    },\n    transmissionMap: {\n      value: null\n    },\n    transmissionSamplerSize: {\n      value: new Vector2()\n    },\n    transmissionSamplerMap: {\n      value: null\n    },\n    thickness: {\n      value: 0\n    },\n    thicknessMap: {\n      value: null\n    },\n    attenuationDistance: {\n      value: 0\n    },\n    attenuationTint: {\n      value: new Color(0x000000)\n    },\n    specularIntensity: {\n      value: 0\n    },\n    specularIntensityMap: {\n      value: null\n    },\n    specularTint: {\n      value: new Color(1, 1, 1)\n    },\n    specularTintMap: {\n      value: null\n    }\n  }]),\n  vertexShader: ShaderChunk.meshphysical_vert,\n  fragmentShader: ShaderChunk.meshphysical_frag\n};\n\nfunction WebGLBackground(renderer, cubemaps, state, objects, premultipliedAlpha) {\n  var clearColor = new Color(0x000000);\n  var clearAlpha = 0;\n  var planeMesh;\n  var boxMesh;\n  var currentBackground = null;\n  var currentBackgroundVersion = 0;\n  var currentTonemapping = null;\n\n  function render(renderList, scene) {\n    var forceClear = false;\n    var background = scene.isScene === true ? scene.background : null;\n\n    if (background && background.isTexture) {\n      background = cubemaps.get(background);\n    } // Ignore background in AR\n    // TODO: Reconsider this.\n\n\n    var xr = renderer.xr;\n    var session = xr.getSession && xr.getSession();\n\n    if (session && session.environmentBlendMode === 'additive') {\n      background = null;\n    }\n\n    if (background === null) {\n      setClear(clearColor, clearAlpha);\n    } else if (background && background.isColor) {\n      setClear(background, 1);\n      forceClear = true;\n    }\n\n    if (renderer.autoClear || forceClear) {\n      renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    }\n\n    if (background && (background.isCubeTexture || background.mapping === CubeUVReflectionMapping)) {\n      if (boxMesh === undefined) {\n        boxMesh = new Mesh(new BoxGeometry(1, 1, 1), new ShaderMaterial({\n          name: 'BackgroundCubeMaterial',\n          uniforms: cloneUniforms(ShaderLib.cube.uniforms),\n          vertexShader: ShaderLib.cube.vertexShader,\n          fragmentShader: ShaderLib.cube.fragmentShader,\n          side: BackSide,\n          depthTest: false,\n          depthWrite: false,\n          fog: false\n        }));\n        boxMesh.geometry.deleteAttribute('normal');\n        boxMesh.geometry.deleteAttribute('uv');\n\n        boxMesh.onBeforeRender = function (renderer, scene, camera) {\n          this.matrixWorld.copyPosition(camera.matrixWorld);\n        }; // enable code injection for non-built-in material\n\n\n        Object.defineProperty(boxMesh.material, 'envMap', {\n          get: function get() {\n            return this.uniforms.envMap.value;\n          }\n        });\n        objects.update(boxMesh);\n      }\n\n      boxMesh.material.uniforms.envMap.value = background;\n      boxMesh.material.uniforms.flipEnvMap.value = background.isCubeTexture && background.isRenderTargetTexture === false ? -1 : 1;\n\n      if (currentBackground !== background || currentBackgroundVersion !== background.version || currentTonemapping !== renderer.toneMapping) {\n        boxMesh.material.needsUpdate = true;\n        currentBackground = background;\n        currentBackgroundVersion = background.version;\n        currentTonemapping = renderer.toneMapping;\n      } // push to the pre-sorted opaque render list\n\n\n      renderList.unshift(boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null);\n    } else if (background && background.isTexture) {\n      if (planeMesh === undefined) {\n        planeMesh = new Mesh(new PlaneGeometry(2, 2), new ShaderMaterial({\n          name: 'BackgroundMaterial',\n          uniforms: cloneUniforms(ShaderLib.background.uniforms),\n          vertexShader: ShaderLib.background.vertexShader,\n          fragmentShader: ShaderLib.background.fragmentShader,\n          side: FrontSide,\n          depthTest: false,\n          depthWrite: false,\n          fog: false\n        }));\n        planeMesh.geometry.deleteAttribute('normal'); // enable code injection for non-built-in material\n\n        Object.defineProperty(planeMesh.material, 'map', {\n          get: function get() {\n            return this.uniforms.t2D.value;\n          }\n        });\n        objects.update(planeMesh);\n      }\n\n      planeMesh.material.uniforms.t2D.value = background;\n\n      if (background.matrixAutoUpdate === true) {\n        background.updateMatrix();\n      }\n\n      planeMesh.material.uniforms.uvTransform.value.copy(background.matrix);\n\n      if (currentBackground !== background || currentBackgroundVersion !== background.version || currentTonemapping !== renderer.toneMapping) {\n        planeMesh.material.needsUpdate = true;\n        currentBackground = background;\n        currentBackgroundVersion = background.version;\n        currentTonemapping = renderer.toneMapping;\n      } // push to the pre-sorted opaque render list\n\n\n      renderList.unshift(planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null);\n    }\n  }\n\n  function setClear(color, alpha) {\n    state.buffers.color.setClear(color.r, color.g, color.b, alpha, premultipliedAlpha);\n  }\n\n  return {\n    getClearColor: function getClearColor() {\n      return clearColor;\n    },\n    setClearColor: function setClearColor(color) {\n      var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      clearColor.set(color);\n      clearAlpha = alpha;\n      setClear(clearColor, clearAlpha);\n    },\n    getClearAlpha: function getClearAlpha() {\n      return clearAlpha;\n    },\n    setClearAlpha: function setClearAlpha(alpha) {\n      clearAlpha = alpha;\n      setClear(clearColor, clearAlpha);\n    },\n    render: render\n  };\n}\n\nfunction WebGLBindingStates(gl, extensions, attributes, capabilities) {\n  var maxVertexAttributes = gl.getParameter(34921);\n  var extension = capabilities.isWebGL2 ? null : extensions.get('OES_vertex_array_object');\n  var vaoAvailable = capabilities.isWebGL2 || extension !== null;\n  var bindingStates = {};\n  var defaultState = createBindingState(null);\n  var currentState = defaultState;\n\n  function setup(object, material, program, geometry, index) {\n    var updateBuffers = false;\n\n    if (vaoAvailable) {\n      var state = getBindingState(geometry, program, material);\n\n      if (currentState !== state) {\n        currentState = state;\n        bindVertexArrayObject(currentState.object);\n      }\n\n      updateBuffers = needsUpdate(geometry, index);\n      if (updateBuffers) saveCache(geometry, index);\n    } else {\n      var wireframe = material.wireframe === true;\n\n      if (currentState.geometry !== geometry.id || currentState.program !== program.id || currentState.wireframe !== wireframe) {\n        currentState.geometry = geometry.id;\n        currentState.program = program.id;\n        currentState.wireframe = wireframe;\n        updateBuffers = true;\n      }\n    }\n\n    if (object.isInstancedMesh === true) {\n      updateBuffers = true;\n    }\n\n    if (index !== null) {\n      attributes.update(index, 34963);\n    }\n\n    if (updateBuffers) {\n      setupVertexAttributes(object, material, program, geometry);\n\n      if (index !== null) {\n        gl.bindBuffer(34963, attributes.get(index).buffer);\n      }\n    }\n  }\n\n  function createVertexArrayObject() {\n    if (capabilities.isWebGL2) return gl.createVertexArray();\n    return extension.createVertexArrayOES();\n  }\n\n  function bindVertexArrayObject(vao) {\n    if (capabilities.isWebGL2) return gl.bindVertexArray(vao);\n    return extension.bindVertexArrayOES(vao);\n  }\n\n  function deleteVertexArrayObject(vao) {\n    if (capabilities.isWebGL2) return gl.deleteVertexArray(vao);\n    return extension.deleteVertexArrayOES(vao);\n  }\n\n  function getBindingState(geometry, program, material) {\n    var wireframe = material.wireframe === true;\n    var programMap = bindingStates[geometry.id];\n\n    if (programMap === undefined) {\n      programMap = {};\n      bindingStates[geometry.id] = programMap;\n    }\n\n    var stateMap = programMap[program.id];\n\n    if (stateMap === undefined) {\n      stateMap = {};\n      programMap[program.id] = stateMap;\n    }\n\n    var state = stateMap[wireframe];\n\n    if (state === undefined) {\n      state = createBindingState(createVertexArrayObject());\n      stateMap[wireframe] = state;\n    }\n\n    return state;\n  }\n\n  function createBindingState(vao) {\n    var newAttributes = [];\n    var enabledAttributes = [];\n    var attributeDivisors = [];\n\n    for (var _i78 = 0; _i78 < maxVertexAttributes; _i78++) {\n      newAttributes[_i78] = 0;\n      enabledAttributes[_i78] = 0;\n      attributeDivisors[_i78] = 0;\n    }\n\n    return {\n      // for backward compatibility on non-VAO support browser\n      geometry: null,\n      program: null,\n      wireframe: false,\n      newAttributes: newAttributes,\n      enabledAttributes: enabledAttributes,\n      attributeDivisors: attributeDivisors,\n      object: vao,\n      attributes: {},\n      index: null\n    };\n  }\n\n  function needsUpdate(geometry, index) {\n    var cachedAttributes = currentState.attributes;\n    var geometryAttributes = geometry.attributes;\n    var attributesNum = 0;\n\n    for (var key in geometryAttributes) {\n      var cachedAttribute = cachedAttributes[key];\n      var geometryAttribute = geometryAttributes[key];\n      if (cachedAttribute === undefined) return true;\n      if (cachedAttribute.attribute !== geometryAttribute) return true;\n      if (cachedAttribute.data !== geometryAttribute.data) return true;\n      attributesNum++;\n    }\n\n    if (currentState.attributesNum !== attributesNum) return true;\n    if (currentState.index !== index) return true;\n    return false;\n  }\n\n  function saveCache(geometry, index) {\n    var cache = {};\n    var attributes = geometry.attributes;\n    var attributesNum = 0;\n\n    for (var key in attributes) {\n      var attribute = attributes[key];\n      var data = {};\n      data.attribute = attribute;\n\n      if (attribute.data) {\n        data.data = attribute.data;\n      }\n\n      cache[key] = data;\n      attributesNum++;\n    }\n\n    currentState.attributes = cache;\n    currentState.attributesNum = attributesNum;\n    currentState.index = index;\n  }\n\n  function initAttributes() {\n    var newAttributes = currentState.newAttributes;\n\n    for (var _i79 = 0, il = newAttributes.length; _i79 < il; _i79++) {\n      newAttributes[_i79] = 0;\n    }\n  }\n\n  function enableAttribute(attribute) {\n    enableAttributeAndDivisor(attribute, 0);\n  }\n\n  function enableAttributeAndDivisor(attribute, meshPerAttribute) {\n    var newAttributes = currentState.newAttributes;\n    var enabledAttributes = currentState.enabledAttributes;\n    var attributeDivisors = currentState.attributeDivisors;\n    newAttributes[attribute] = 1;\n\n    if (enabledAttributes[attribute] === 0) {\n      gl.enableVertexAttribArray(attribute);\n      enabledAttributes[attribute] = 1;\n    }\n\n    if (attributeDivisors[attribute] !== meshPerAttribute) {\n      var _extension = capabilities.isWebGL2 ? gl : extensions.get('ANGLE_instanced_arrays');\n\n      _extension[capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE'](attribute, meshPerAttribute);\n\n      attributeDivisors[attribute] = meshPerAttribute;\n    }\n  }\n\n  function disableUnusedAttributes() {\n    var newAttributes = currentState.newAttributes;\n    var enabledAttributes = currentState.enabledAttributes;\n\n    for (var _i80 = 0, il = enabledAttributes.length; _i80 < il; _i80++) {\n      if (enabledAttributes[_i80] !== newAttributes[_i80]) {\n        gl.disableVertexAttribArray(_i80);\n        enabledAttributes[_i80] = 0;\n      }\n    }\n  }\n\n  function vertexAttribPointer(index, size, type, normalized, stride, offset) {\n    if (capabilities.isWebGL2 === true && (type === 5124 || type === 5125)) {\n      gl.vertexAttribIPointer(index, size, type, stride, offset);\n    } else {\n      gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n    }\n  }\n\n  function setupVertexAttributes(object, material, program, geometry) {\n    if (capabilities.isWebGL2 === false && (object.isInstancedMesh || geometry.isInstancedBufferGeometry)) {\n      if (extensions.get('ANGLE_instanced_arrays') === null) return;\n    }\n\n    initAttributes();\n    var geometryAttributes = geometry.attributes;\n    var programAttributes = program.getAttributes();\n    var materialDefaultAttributeValues = material.defaultAttributeValues;\n\n    for (var name in programAttributes) {\n      var programAttribute = programAttributes[name];\n\n      if (programAttribute >= 0) {\n        var geometryAttribute = geometryAttributes[name];\n\n        if (geometryAttribute !== undefined) {\n          var normalized = geometryAttribute.normalized;\n          var size = geometryAttribute.itemSize;\n          var attribute = attributes.get(geometryAttribute); // TODO Attribute may not be available on context restore\n\n          if (attribute === undefined) continue;\n          var buffer = attribute.buffer;\n          var type = attribute.type;\n          var bytesPerElement = attribute.bytesPerElement;\n\n          if (geometryAttribute.isInterleavedBufferAttribute) {\n            var data = geometryAttribute.data;\n            var stride = data.stride;\n            var offset = geometryAttribute.offset;\n\n            if (data && data.isInstancedInterleavedBuffer) {\n              enableAttributeAndDivisor(programAttribute, data.meshPerAttribute);\n\n              if (geometry._maxInstanceCount === undefined) {\n                geometry._maxInstanceCount = data.meshPerAttribute * data.count;\n              }\n            } else {\n              enableAttribute(programAttribute);\n            }\n\n            gl.bindBuffer(34962, buffer);\n            vertexAttribPointer(programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement);\n          } else {\n            if (geometryAttribute.isInstancedBufferAttribute) {\n              enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n\n              if (geometry._maxInstanceCount === undefined) {\n                geometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n              }\n            } else {\n              enableAttribute(programAttribute);\n            }\n\n            gl.bindBuffer(34962, buffer);\n            vertexAttribPointer(programAttribute, size, type, normalized, 0, 0);\n          }\n        } else if (name === 'instanceMatrix') {\n          var _attribute3 = attributes.get(object.instanceMatrix); // TODO Attribute may not be available on context restore\n\n\n          if (_attribute3 === undefined) continue;\n          var _buffer = _attribute3.buffer;\n          var _type = _attribute3.type;\n          enableAttributeAndDivisor(programAttribute + 0, 1);\n          enableAttributeAndDivisor(programAttribute + 1, 1);\n          enableAttributeAndDivisor(programAttribute + 2, 1);\n          enableAttributeAndDivisor(programAttribute + 3, 1);\n          gl.bindBuffer(34962, _buffer);\n          gl.vertexAttribPointer(programAttribute + 0, 4, _type, false, 64, 0);\n          gl.vertexAttribPointer(programAttribute + 1, 4, _type, false, 64, 16);\n          gl.vertexAttribPointer(programAttribute + 2, 4, _type, false, 64, 32);\n          gl.vertexAttribPointer(programAttribute + 3, 4, _type, false, 64, 48);\n        } else if (name === 'instanceColor') {\n          var _attribute4 = attributes.get(object.instanceColor); // TODO Attribute may not be available on context restore\n\n\n          if (_attribute4 === undefined) continue;\n          var _buffer2 = _attribute4.buffer;\n          var _type2 = _attribute4.type;\n          enableAttributeAndDivisor(programAttribute, 1);\n          gl.bindBuffer(34962, _buffer2);\n          gl.vertexAttribPointer(programAttribute, 3, _type2, false, 12, 0);\n        } else if (materialDefaultAttributeValues !== undefined) {\n          var value = materialDefaultAttributeValues[name];\n\n          if (value !== undefined) {\n            switch (value.length) {\n              case 2:\n                gl.vertexAttrib2fv(programAttribute, value);\n                break;\n\n              case 3:\n                gl.vertexAttrib3fv(programAttribute, value);\n                break;\n\n              case 4:\n                gl.vertexAttrib4fv(programAttribute, value);\n                break;\n\n              default:\n                gl.vertexAttrib1fv(programAttribute, value);\n            }\n          }\n        }\n      }\n    }\n\n    disableUnusedAttributes();\n  }\n\n  function dispose() {\n    reset();\n\n    for (var geometryId in bindingStates) {\n      var programMap = bindingStates[geometryId];\n\n      for (var programId in programMap) {\n        var stateMap = programMap[programId];\n\n        for (var wireframe in stateMap) {\n          deleteVertexArrayObject(stateMap[wireframe].object);\n          delete stateMap[wireframe];\n        }\n\n        delete programMap[programId];\n      }\n\n      delete bindingStates[geometryId];\n    }\n  }\n\n  function releaseStatesOfGeometry(geometry) {\n    if (bindingStates[geometry.id] === undefined) return;\n    var programMap = bindingStates[geometry.id];\n\n    for (var programId in programMap) {\n      var stateMap = programMap[programId];\n\n      for (var wireframe in stateMap) {\n        deleteVertexArrayObject(stateMap[wireframe].object);\n        delete stateMap[wireframe];\n      }\n\n      delete programMap[programId];\n    }\n\n    delete bindingStates[geometry.id];\n  }\n\n  function releaseStatesOfProgram(program) {\n    for (var geometryId in bindingStates) {\n      var programMap = bindingStates[geometryId];\n      if (programMap[program.id] === undefined) continue;\n      var stateMap = programMap[program.id];\n\n      for (var wireframe in stateMap) {\n        deleteVertexArrayObject(stateMap[wireframe].object);\n        delete stateMap[wireframe];\n      }\n\n      delete programMap[program.id];\n    }\n  }\n\n  function reset() {\n    resetDefaultState();\n    if (currentState === defaultState) return;\n    currentState = defaultState;\n    bindVertexArrayObject(currentState.object);\n  } // for backward-compatilibity\n\n\n  function resetDefaultState() {\n    defaultState.geometry = null;\n    defaultState.program = null;\n    defaultState.wireframe = false;\n  }\n\n  return {\n    setup: setup,\n    reset: reset,\n    resetDefaultState: resetDefaultState,\n    dispose: dispose,\n    releaseStatesOfGeometry: releaseStatesOfGeometry,\n    releaseStatesOfProgram: releaseStatesOfProgram,\n    initAttributes: initAttributes,\n    enableAttribute: enableAttribute,\n    disableUnusedAttributes: disableUnusedAttributes\n  };\n}\n\nfunction WebGLBufferRenderer(gl, extensions, info, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var mode;\n\n  function setMode(value) {\n    mode = value;\n  }\n\n  function render(start, count) {\n    gl.drawArrays(mode, start, count);\n    info.update(count, mode, 1);\n  }\n\n  function renderInstances(start, count, primcount) {\n    if (primcount === 0) return;\n    var extension, methodName;\n\n    if (isWebGL2) {\n      extension = gl;\n      methodName = 'drawArraysInstanced';\n    } else {\n      extension = extensions.get('ANGLE_instanced_arrays');\n      methodName = 'drawArraysInstancedANGLE';\n\n      if (extension === null) {\n        console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n        return;\n      }\n    }\n\n    extension[methodName](mode, start, count, primcount);\n    info.update(count, mode, primcount);\n  } //\n\n\n  this.setMode = setMode;\n  this.render = render;\n  this.renderInstances = renderInstances;\n}\n\nfunction WebGLCapabilities(gl, extensions, parameters) {\n  var maxAnisotropy;\n\n  function getMaxAnisotropy() {\n    if (maxAnisotropy !== undefined) return maxAnisotropy;\n\n    if (extensions.has('EXT_texture_filter_anisotropic') === true) {\n      var extension = extensions.get('EXT_texture_filter_anisotropic');\n      maxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n    } else {\n      maxAnisotropy = 0;\n    }\n\n    return maxAnisotropy;\n  }\n\n  function getMaxPrecision(precision) {\n    if (precision === 'highp') {\n      if (gl.getShaderPrecisionFormat(35633, 36338).precision > 0 && gl.getShaderPrecisionFormat(35632, 36338).precision > 0) {\n        return 'highp';\n      }\n\n      precision = 'mediump';\n    }\n\n    if (precision === 'mediump') {\n      if (gl.getShaderPrecisionFormat(35633, 36337).precision > 0 && gl.getShaderPrecisionFormat(35632, 36337).precision > 0) {\n        return 'mediump';\n      }\n    }\n\n    return 'lowp';\n  }\n  /* eslint-disable no-undef */\n\n\n  var isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext || typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext;\n  /* eslint-enable no-undef */\n\n  var precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n  var maxPrecision = getMaxPrecision(precision);\n\n  if (maxPrecision !== precision) {\n    console.warn('THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');\n    precision = maxPrecision;\n  }\n\n  var drawBuffers = isWebGL2 || extensions.has('WEBGL_draw_buffers');\n  var logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n  var maxTextures = gl.getParameter(34930);\n  var maxVertexTextures = gl.getParameter(35660);\n  var maxTextureSize = gl.getParameter(3379);\n  var maxCubemapSize = gl.getParameter(34076);\n  var maxAttributes = gl.getParameter(34921);\n  var maxVertexUniforms = gl.getParameter(36347);\n  var maxVaryings = gl.getParameter(36348);\n  var maxFragmentUniforms = gl.getParameter(36349);\n  var vertexTextures = maxVertexTextures > 0;\n  var floatFragmentTextures = isWebGL2 || extensions.has('OES_texture_float');\n  var floatVertexTextures = vertexTextures && floatFragmentTextures;\n  var maxSamples = isWebGL2 ? gl.getParameter(36183) : 0;\n  return {\n    isWebGL2: isWebGL2,\n    drawBuffers: drawBuffers,\n    getMaxAnisotropy: getMaxAnisotropy,\n    getMaxPrecision: getMaxPrecision,\n    precision: precision,\n    logarithmicDepthBuffer: logarithmicDepthBuffer,\n    maxTextures: maxTextures,\n    maxVertexTextures: maxVertexTextures,\n    maxTextureSize: maxTextureSize,\n    maxCubemapSize: maxCubemapSize,\n    maxAttributes: maxAttributes,\n    maxVertexUniforms: maxVertexUniforms,\n    maxVaryings: maxVaryings,\n    maxFragmentUniforms: maxFragmentUniforms,\n    vertexTextures: vertexTextures,\n    floatFragmentTextures: floatFragmentTextures,\n    floatVertexTextures: floatVertexTextures,\n    maxSamples: maxSamples\n  };\n}\n\nfunction WebGLClipping(properties) {\n  var scope = this;\n  var globalState = null,\n      numGlobalPlanes = 0,\n      localClippingEnabled = false,\n      renderingShadows = false;\n  var plane = new Plane(),\n      viewNormalMatrix = new Matrix3(),\n      uniform = {\n    value: null,\n    needsUpdate: false\n  };\n  this.uniform = uniform;\n  this.numPlanes = 0;\n  this.numIntersection = 0;\n\n  this.init = function (planes, enableLocalClipping, camera) {\n    var enabled = planes.length !== 0 || enableLocalClipping || // enable state of previous frame - the clipping code has to\n    // run another frame in order to reset the state:\n    numGlobalPlanes !== 0 || localClippingEnabled;\n    localClippingEnabled = enableLocalClipping;\n    globalState = projectPlanes(planes, camera, 0);\n    numGlobalPlanes = planes.length;\n    return enabled;\n  };\n\n  this.beginShadows = function () {\n    renderingShadows = true;\n    projectPlanes(null);\n  };\n\n  this.endShadows = function () {\n    renderingShadows = false;\n    resetGlobalState();\n  };\n\n  this.setState = function (material, camera, useCache) {\n    var planes = material.clippingPlanes,\n        clipIntersection = material.clipIntersection,\n        clipShadows = material.clipShadows;\n    var materialProperties = properties.get(material);\n\n    if (!localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && !clipShadows) {\n      // there's no local clipping\n      if (renderingShadows) {\n        // there's no global clipping\n        projectPlanes(null);\n      } else {\n        resetGlobalState();\n      }\n    } else {\n      var nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n          lGlobal = nGlobal * 4;\n      var dstArray = materialProperties.clippingState || null;\n      uniform.value = dstArray; // ensure unique state\n\n      dstArray = projectPlanes(planes, camera, lGlobal, useCache);\n\n      for (var _i81 = 0; _i81 !== lGlobal; ++_i81) {\n        dstArray[_i81] = globalState[_i81];\n      }\n\n      materialProperties.clippingState = dstArray;\n      this.numIntersection = clipIntersection ? this.numPlanes : 0;\n      this.numPlanes += nGlobal;\n    }\n  };\n\n  function resetGlobalState() {\n    if (uniform.value !== globalState) {\n      uniform.value = globalState;\n      uniform.needsUpdate = numGlobalPlanes > 0;\n    }\n\n    scope.numPlanes = numGlobalPlanes;\n    scope.numIntersection = 0;\n  }\n\n  function projectPlanes(planes, camera, dstOffset, skipTransform) {\n    var nPlanes = planes !== null ? planes.length : 0;\n    var dstArray = null;\n\n    if (nPlanes !== 0) {\n      dstArray = uniform.value;\n\n      if (skipTransform !== true || dstArray === null) {\n        var flatSize = dstOffset + nPlanes * 4,\n            viewMatrix = camera.matrixWorldInverse;\n        viewNormalMatrix.getNormalMatrix(viewMatrix);\n\n        if (dstArray === null || dstArray.length < flatSize) {\n          dstArray = new Float32Array(flatSize);\n        }\n\n        for (var _i82 = 0, i4 = dstOffset; _i82 !== nPlanes; ++_i82, i4 += 4) {\n          plane.copy(planes[_i82]).applyMatrix4(viewMatrix, viewNormalMatrix);\n          plane.normal.toArray(dstArray, i4);\n          dstArray[i4 + 3] = plane.constant;\n        }\n      }\n\n      uniform.value = dstArray;\n      uniform.needsUpdate = true;\n    }\n\n    scope.numPlanes = nPlanes;\n    scope.numIntersection = 0;\n    return dstArray;\n  }\n}\n\nfunction WebGLCubeMaps(renderer) {\n  var cubemaps = new WeakMap();\n\n  function mapTextureMapping(texture, mapping) {\n    if (mapping === EquirectangularReflectionMapping) {\n      texture.mapping = CubeReflectionMapping;\n    } else if (mapping === EquirectangularRefractionMapping) {\n      texture.mapping = CubeRefractionMapping;\n    }\n\n    return texture;\n  }\n\n  function get(texture) {\n    if (texture && texture.isTexture && texture.isRenderTargetTexture === false) {\n      var mapping = texture.mapping;\n\n      if (mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping) {\n        if (cubemaps.has(texture)) {\n          var cubemap = cubemaps.get(texture).texture;\n          return mapTextureMapping(cubemap, texture.mapping);\n        } else {\n          var image = texture.image;\n\n          if (image && image.height > 0) {\n            var currentRenderTarget = renderer.getRenderTarget();\n            var renderTarget = new WebGLCubeRenderTarget(image.height / 2);\n            renderTarget.fromEquirectangularTexture(renderer, texture);\n            cubemaps.set(texture, renderTarget);\n            renderer.setRenderTarget(currentRenderTarget);\n            texture.addEventListener('dispose', onTextureDispose);\n            return mapTextureMapping(renderTarget.texture, texture.mapping);\n          } else {\n            // image not yet ready. try the conversion next frame\n            return null;\n          }\n        }\n      }\n    }\n\n    return texture;\n  }\n\n  function onTextureDispose(event) {\n    var texture = event.target;\n    texture.removeEventListener('dispose', onTextureDispose);\n    var cubemap = cubemaps.get(texture);\n\n    if (cubemap !== undefined) {\n      cubemaps.delete(texture);\n      cubemap.dispose();\n    }\n  }\n\n  function dispose() {\n    cubemaps = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nvar OrthographicCamera = /*#__PURE__*/function (_Camera2) {\n  _inherits(OrthographicCamera, _Camera2);\n\n  var _super24 = _createSuper(OrthographicCamera);\n\n  function OrthographicCamera() {\n    var _this27;\n\n    var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n    var right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var top = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var bottom = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n    var near = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.1;\n    var far = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 2000;\n\n    _classCallCheck(this, OrthographicCamera);\n\n    _this27 = _super24.call(this);\n    _this27.type = 'OrthographicCamera';\n    _this27.zoom = 1;\n    _this27.view = null;\n    _this27.left = left;\n    _this27.right = right;\n    _this27.top = top;\n    _this27.bottom = bottom;\n    _this27.near = near;\n    _this27.far = far;\n\n    _this27.updateProjectionMatrix();\n\n    return _this27;\n  }\n\n  _createClass(OrthographicCamera, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(OrthographicCamera.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.left = source.left;\n      this.right = source.right;\n      this.top = source.top;\n      this.bottom = source.bottom;\n      this.near = source.near;\n      this.far = source.far;\n      this.zoom = source.zoom;\n      this.view = source.view === null ? null : Object.assign({}, source.view);\n      return this;\n    }\n  }, {\n    key: \"setViewOffset\",\n    value: function setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n      if (this.view === null) {\n        this.view = {\n          enabled: true,\n          fullWidth: 1,\n          fullHeight: 1,\n          offsetX: 0,\n          offsetY: 0,\n          width: 1,\n          height: 1\n        };\n      }\n\n      this.view.enabled = true;\n      this.view.fullWidth = fullWidth;\n      this.view.fullHeight = fullHeight;\n      this.view.offsetX = x;\n      this.view.offsetY = y;\n      this.view.width = width;\n      this.view.height = height;\n      this.updateProjectionMatrix();\n    }\n  }, {\n    key: \"clearViewOffset\",\n    value: function clearViewOffset() {\n      if (this.view !== null) {\n        this.view.enabled = false;\n      }\n\n      this.updateProjectionMatrix();\n    }\n  }, {\n    key: \"updateProjectionMatrix\",\n    value: function updateProjectionMatrix() {\n      var dx = (this.right - this.left) / (2 * this.zoom);\n      var dy = (this.top - this.bottom) / (2 * this.zoom);\n      var cx = (this.right + this.left) / 2;\n      var cy = (this.top + this.bottom) / 2;\n      var left = cx - dx;\n      var right = cx + dx;\n      var top = cy + dy;\n      var bottom = cy - dy;\n\n      if (this.view !== null && this.view.enabled) {\n        var scaleW = (this.right - this.left) / this.view.fullWidth / this.zoom;\n        var scaleH = (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n        left += scaleW * this.view.offsetX;\n        right = left + scaleW * this.view.width;\n        top -= scaleH * this.view.offsetY;\n        bottom = top - scaleH * this.view.height;\n      }\n\n      this.projectionMatrix.makeOrthographic(left, right, top, bottom, this.near, this.far);\n      this.projectionMatrixInverse.copy(this.projectionMatrix).invert();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(OrthographicCamera.prototype), \"toJSON\", this).call(this, meta);\n\n      data.object.zoom = this.zoom;\n      data.object.left = this.left;\n      data.object.right = this.right;\n      data.object.top = this.top;\n      data.object.bottom = this.bottom;\n      data.object.near = this.near;\n      data.object.far = this.far;\n      if (this.view !== null) data.object.view = Object.assign({}, this.view);\n      return data;\n    }\n  }]);\n\n  return OrthographicCamera;\n}(Camera);\n\nOrthographicCamera.prototype.isOrthographicCamera = true;\n\nvar RawShaderMaterial = /*#__PURE__*/function (_ShaderMaterial) {\n  _inherits(RawShaderMaterial, _ShaderMaterial);\n\n  var _super25 = _createSuper(RawShaderMaterial);\n\n  function RawShaderMaterial(parameters) {\n    var _this28;\n\n    _classCallCheck(this, RawShaderMaterial);\n\n    _this28 = _super25.call(this, parameters);\n    _this28.type = 'RawShaderMaterial';\n    return _this28;\n  }\n\n  return RawShaderMaterial;\n}(ShaderMaterial);\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\nvar LOD_MIN = 4;\nvar LOD_MAX = 8;\nvar SIZE_MAX = Math.pow(2, LOD_MAX); // The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\n\nvar EXTRA_LOD_SIGMA = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582];\nvar TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length; // The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\n\nvar MAX_SAMPLES = 20;\nvar ENCODINGS = (_ENCODINGS = {}, _defineProperty(_ENCODINGS, LinearEncoding, 0), _defineProperty(_ENCODINGS, sRGBEncoding, 1), _defineProperty(_ENCODINGS, RGBEEncoding, 2), _defineProperty(_ENCODINGS, RGBM7Encoding, 3), _defineProperty(_ENCODINGS, RGBM16Encoding, 4), _defineProperty(_ENCODINGS, RGBDEncoding, 5), _defineProperty(_ENCODINGS, GammaEncoding, 6), _ENCODINGS);\nvar backgroundMaterial = new MeshBasicMaterial({\n  side: BackSide,\n  depthWrite: false,\n  depthTest: false\n});\nvar backgroundBox = new Mesh(new BoxGeometry(), backgroundMaterial);\n\nvar _flatCamera$1 = /*@__PURE__*/new OrthographicCamera();\n\nvar _createPlanes2 = /*@__PURE__*/_createPlanes(),\n    _lodPlanes = _createPlanes2._lodPlanes,\n    _sizeLods = _createPlanes2._sizeLods,\n    _sigmas = _createPlanes2._sigmas;\n\nvar _clearColor = /*@__PURE__*/new Color();\n\nvar _oldTarget = null; // Golden Ratio\n\nvar PHI = (1 + Math.sqrt(5)) / 2;\nvar INV_PHI = 1 / PHI; // Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\n\nvar _axisDirections = [/*@__PURE__*/new Vector3(1, 1, 1), /*@__PURE__*/new Vector3(-1, 1, 1), /*@__PURE__*/new Vector3(1, 1, -1), /*@__PURE__*/new Vector3(-1, 1, -1), /*@__PURE__*/new Vector3(0, PHI, INV_PHI), /*@__PURE__*/new Vector3(0, PHI, -INV_PHI), /*@__PURE__*/new Vector3(INV_PHI, 0, PHI), /*@__PURE__*/new Vector3(-INV_PHI, 0, PHI), /*@__PURE__*/new Vector3(PHI, INV_PHI, 0), /*@__PURE__*/new Vector3(-PHI, INV_PHI, 0)];\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nfunction convertLinearToRGBE(color) {\n  var maxComponent = Math.max(color.r, color.g, color.b);\n  var fExp = Math.min(Math.max(Math.ceil(Math.log2(maxComponent)), -128.0), 127.0);\n  color.multiplyScalar(Math.pow(2.0, -fExp));\n  var alpha = (fExp + 128.0) / 255.0;\n  return alpha;\n}\n\nvar PMREMGenerator = /*#__PURE__*/function () {\n  function PMREMGenerator(renderer) {\n    _classCallCheck(this, PMREMGenerator);\n\n    this._renderer = renderer;\n    this._pingPongRenderTarget = null;\n    this._blurMaterial = _getBlurShader(MAX_SAMPLES);\n    this._equirectShader = null;\n    this._cubemapShader = null;\n\n    this._compileMaterial(this._blurMaterial);\n  }\n  /**\n   * Generates a PMREM from a supplied Scene, which can be faster than using an\n   * image if networking bandwidth is low. Optional sigma specifies a blur radius\n   * in radians to be applied to the scene before PMREM generation. Optional near\n   * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n   * is placed at the origin).\n   */\n\n\n  _createClass(PMREMGenerator, [{\n    key: \"fromScene\",\n    value: function fromScene(scene) {\n      var sigma = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var near = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.1;\n      var far = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 100;\n      _oldTarget = this._renderer.getRenderTarget();\n\n      var cubeUVRenderTarget = this._allocateTargets();\n\n      this._sceneToCubeUV(scene, near, far, cubeUVRenderTarget);\n\n      if (sigma > 0) {\n        this._blur(cubeUVRenderTarget, 0, 0, sigma);\n      }\n\n      this._applyPMREM(cubeUVRenderTarget);\n\n      this._cleanup(cubeUVRenderTarget);\n\n      return cubeUVRenderTarget;\n    }\n    /**\n     * Generates a PMREM from an equirectangular texture, which can be either LDR\n     * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n     * as this matches best with the 256 x 256 cubemap output.\n     */\n\n  }, {\n    key: \"fromEquirectangular\",\n    value: function fromEquirectangular(equirectangular) {\n      return this._fromTexture(equirectangular);\n    }\n    /**\n     * Generates a PMREM from an cubemap texture, which can be either LDR\n     * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n     * as this matches best with the 256 x 256 cubemap output.\n     */\n\n  }, {\n    key: \"fromCubemap\",\n    value: function fromCubemap(cubemap) {\n      return this._fromTexture(cubemap);\n    }\n    /**\n     * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n     * your texture's network fetch for increased concurrency.\n     */\n\n  }, {\n    key: \"compileCubemapShader\",\n    value: function compileCubemapShader() {\n      if (this._cubemapShader === null) {\n        this._cubemapShader = _getCubemapShader();\n\n        this._compileMaterial(this._cubemapShader);\n      }\n    }\n    /**\n     * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n     * your texture's network fetch for increased concurrency.\n     */\n\n  }, {\n    key: \"compileEquirectangularShader\",\n    value: function compileEquirectangularShader() {\n      if (this._equirectShader === null) {\n        this._equirectShader = _getEquirectShader();\n\n        this._compileMaterial(this._equirectShader);\n      }\n    }\n    /**\n     * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n     * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n     * one of them will cause any others to also become unusable.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._blurMaterial.dispose();\n\n      if (this._cubemapShader !== null) this._cubemapShader.dispose();\n      if (this._equirectShader !== null) this._equirectShader.dispose();\n\n      for (var _i83 = 0; _i83 < _lodPlanes.length; _i83++) {\n        _lodPlanes[_i83].dispose();\n      }\n    } // private interface\n\n  }, {\n    key: \"_cleanup\",\n    value: function _cleanup(outputTarget) {\n      this._pingPongRenderTarget.dispose();\n\n      this._renderer.setRenderTarget(_oldTarget);\n\n      outputTarget.scissorTest = false;\n\n      _setViewport(outputTarget, 0, 0, outputTarget.width, outputTarget.height);\n    }\n  }, {\n    key: \"_fromTexture\",\n    value: function _fromTexture(texture) {\n      _oldTarget = this._renderer.getRenderTarget();\n\n      var cubeUVRenderTarget = this._allocateTargets(texture);\n\n      this._textureToCubeUV(texture, cubeUVRenderTarget);\n\n      this._applyPMREM(cubeUVRenderTarget);\n\n      this._cleanup(cubeUVRenderTarget);\n\n      return cubeUVRenderTarget;\n    }\n  }, {\n    key: \"_allocateTargets\",\n    value: function _allocateTargets(texture) {\n      // warning: null texture is valid\n      var params = {\n        magFilter: NearestFilter,\n        minFilter: NearestFilter,\n        generateMipmaps: false,\n        type: UnsignedByteType,\n        format: RGBEFormat,\n        encoding: _isLDR(texture) ? texture.encoding : RGBEEncoding,\n        depthBuffer: false\n      };\n\n      var cubeUVRenderTarget = _createRenderTarget(params);\n\n      cubeUVRenderTarget.depthBuffer = texture ? false : true;\n      this._pingPongRenderTarget = _createRenderTarget(params);\n      return cubeUVRenderTarget;\n    }\n  }, {\n    key: \"_compileMaterial\",\n    value: function _compileMaterial(material) {\n      var tmpMesh = new Mesh(_lodPlanes[0], material);\n\n      this._renderer.compile(tmpMesh, _flatCamera$1);\n    }\n  }, {\n    key: \"_sceneToCubeUV\",\n    value: function _sceneToCubeUV(scene, near, far, cubeUVRenderTarget) {\n      var fov = 90;\n      var aspect = 1;\n      var cubeCamera = new PerspectiveCamera(fov, aspect, near, far);\n      var upSign = [1, -1, 1, 1, 1, 1];\n      var forwardSign = [1, 1, 1, -1, -1, -1];\n      var renderer = this._renderer;\n      var originalAutoClear = renderer.autoClear;\n      var outputEncoding = renderer.outputEncoding;\n      var toneMapping = renderer.toneMapping;\n      renderer.getClearColor(_clearColor);\n      renderer.toneMapping = NoToneMapping;\n      renderer.outputEncoding = LinearEncoding;\n      renderer.autoClear = false;\n      var useSolidColor = false;\n      var background = scene.background;\n\n      if (background) {\n        if (background.isColor) {\n          backgroundMaterial.color.copy(background).convertSRGBToLinear();\n          scene.background = null;\n          var alpha = convertLinearToRGBE(backgroundMaterial.color);\n          backgroundMaterial.opacity = alpha;\n          useSolidColor = true;\n        }\n      } else {\n        backgroundMaterial.color.copy(_clearColor).convertSRGBToLinear();\n\n        var _alpha2 = convertLinearToRGBE(backgroundMaterial.color);\n\n        backgroundMaterial.opacity = _alpha2;\n        useSolidColor = true;\n      }\n\n      for (var _i84 = 0; _i84 < 6; _i84++) {\n        var col = _i84 % 3;\n\n        if (col == 0) {\n          cubeCamera.up.set(0, upSign[_i84], 0);\n          cubeCamera.lookAt(forwardSign[_i84], 0, 0);\n        } else if (col == 1) {\n          cubeCamera.up.set(0, 0, upSign[_i84]);\n          cubeCamera.lookAt(0, forwardSign[_i84], 0);\n        } else {\n          cubeCamera.up.set(0, upSign[_i84], 0);\n          cubeCamera.lookAt(0, 0, forwardSign[_i84]);\n        }\n\n        _setViewport(cubeUVRenderTarget, col * SIZE_MAX, _i84 > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX);\n\n        renderer.setRenderTarget(cubeUVRenderTarget);\n\n        if (useSolidColor) {\n          renderer.render(backgroundBox, cubeCamera);\n        }\n\n        renderer.render(scene, cubeCamera);\n      }\n\n      renderer.toneMapping = toneMapping;\n      renderer.outputEncoding = outputEncoding;\n      renderer.autoClear = originalAutoClear;\n    }\n  }, {\n    key: \"_textureToCubeUV\",\n    value: function _textureToCubeUV(texture, cubeUVRenderTarget) {\n      var renderer = this._renderer;\n\n      if (texture.isCubeTexture) {\n        if (this._cubemapShader == null) {\n          this._cubemapShader = _getCubemapShader();\n        }\n      } else {\n        if (this._equirectShader == null) {\n          this._equirectShader = _getEquirectShader();\n        }\n      }\n\n      var material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n      var mesh = new Mesh(_lodPlanes[0], material);\n      var uniforms = material.uniforms;\n      uniforms['envMap'].value = texture;\n\n      if (!texture.isCubeTexture) {\n        uniforms['texelSize'].value.set(1.0 / texture.image.width, 1.0 / texture.image.height);\n      }\n\n      uniforms['inputEncoding'].value = ENCODINGS[texture.encoding];\n      uniforms['outputEncoding'].value = ENCODINGS[cubeUVRenderTarget.texture.encoding];\n\n      _setViewport(cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX);\n\n      renderer.setRenderTarget(cubeUVRenderTarget);\n      renderer.render(mesh, _flatCamera$1);\n    }\n  }, {\n    key: \"_applyPMREM\",\n    value: function _applyPMREM(cubeUVRenderTarget) {\n      var renderer = this._renderer;\n      var autoClear = renderer.autoClear;\n      renderer.autoClear = false;\n\n      for (var _i85 = 1; _i85 < TOTAL_LODS; _i85++) {\n        var sigma = Math.sqrt(_sigmas[_i85] * _sigmas[_i85] - _sigmas[_i85 - 1] * _sigmas[_i85 - 1]);\n        var poleAxis = _axisDirections[(_i85 - 1) % _axisDirections.length];\n\n        this._blur(cubeUVRenderTarget, _i85 - 1, _i85, sigma, poleAxis);\n      }\n\n      renderer.autoClear = autoClear;\n    }\n    /**\n     * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n     * vertically and horizontally, but this breaks down on a cube. Here we apply\n     * the blur latitudinally (around the poles), and then longitudinally (towards\n     * the poles) to approximate the orthogonally-separable blur. It is least\n     * accurate at the poles, but still does a decent job.\n     */\n\n  }, {\n    key: \"_blur\",\n    value: function _blur(cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis) {\n      var pingPongRenderTarget = this._pingPongRenderTarget;\n\n      this._halfBlur(cubeUVRenderTarget, pingPongRenderTarget, lodIn, lodOut, sigma, 'latitudinal', poleAxis);\n\n      this._halfBlur(pingPongRenderTarget, cubeUVRenderTarget, lodOut, lodOut, sigma, 'longitudinal', poleAxis);\n    }\n  }, {\n    key: \"_halfBlur\",\n    value: function _halfBlur(targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis) {\n      var renderer = this._renderer;\n      var blurMaterial = this._blurMaterial;\n\n      if (direction !== 'latitudinal' && direction !== 'longitudinal') {\n        console.error('blur direction must be either latitudinal or longitudinal!');\n      } // Number of standard deviations at which to cut off the discrete approximation.\n\n\n      var STANDARD_DEVIATIONS = 3;\n      var blurMesh = new Mesh(_lodPlanes[lodOut], blurMaterial);\n      var blurUniforms = blurMaterial.uniforms;\n      var pixels = _sizeLods[lodIn] - 1;\n      var radiansPerPixel = isFinite(sigmaRadians) ? Math.PI / (2 * pixels) : 2 * Math.PI / (2 * MAX_SAMPLES - 1);\n      var sigmaPixels = sigmaRadians / radiansPerPixel;\n      var samples = isFinite(sigmaRadians) ? 1 + Math.floor(STANDARD_DEVIATIONS * sigmaPixels) : MAX_SAMPLES;\n\n      if (samples > MAX_SAMPLES) {\n        console.warn(\"sigmaRadians, \".concat(sigmaRadians, \", is too large and will clip, as it requested \").concat(samples, \" samples when the maximum is set to \").concat(MAX_SAMPLES));\n      }\n\n      var weights = [];\n      var sum = 0;\n\n      for (var _i86 = 0; _i86 < MAX_SAMPLES; ++_i86) {\n        var _x6 = _i86 / sigmaPixels;\n\n        var weight = Math.exp(-_x6 * _x6 / 2);\n        weights.push(weight);\n\n        if (_i86 == 0) {\n          sum += weight;\n        } else if (_i86 < samples) {\n          sum += 2 * weight;\n        }\n      }\n\n      for (var _i87 = 0; _i87 < weights.length; _i87++) {\n        weights[_i87] = weights[_i87] / sum;\n      }\n\n      blurUniforms['envMap'].value = targetIn.texture;\n      blurUniforms['samples'].value = samples;\n      blurUniforms['weights'].value = weights;\n      blurUniforms['latitudinal'].value = direction === 'latitudinal';\n\n      if (poleAxis) {\n        blurUniforms['poleAxis'].value = poleAxis;\n      }\n\n      blurUniforms['dTheta'].value = radiansPerPixel;\n      blurUniforms['mipInt'].value = LOD_MAX - lodIn;\n      blurUniforms['inputEncoding'].value = ENCODINGS[targetIn.texture.encoding];\n      blurUniforms['outputEncoding'].value = ENCODINGS[targetIn.texture.encoding];\n      var outputSize = _sizeLods[lodOut];\n      var x = 3 * Math.max(0, SIZE_MAX - 2 * outputSize);\n      var y = (lodOut === 0 ? 0 : 2 * SIZE_MAX) + 2 * outputSize * (lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0);\n\n      _setViewport(targetOut, x, y, 3 * outputSize, 2 * outputSize);\n\n      renderer.setRenderTarget(targetOut);\n      renderer.render(blurMesh, _flatCamera$1);\n    }\n  }]);\n\n  return PMREMGenerator;\n}();\n\nfunction _isLDR(texture) {\n  if (texture === undefined || texture.type !== UnsignedByteType) return false;\n  return texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n}\n\nfunction _createPlanes() {\n  var _lodPlanes = [];\n  var _sizeLods = [];\n  var _sigmas = [];\n  var lod = LOD_MAX;\n\n  for (var _i88 = 0; _i88 < TOTAL_LODS; _i88++) {\n    var sizeLod = Math.pow(2, lod);\n\n    _sizeLods.push(sizeLod);\n\n    var sigma = 1.0 / sizeLod;\n\n    if (_i88 > LOD_MAX - LOD_MIN) {\n      sigma = EXTRA_LOD_SIGMA[_i88 - LOD_MAX + LOD_MIN - 1];\n    } else if (_i88 == 0) {\n      sigma = 0;\n    }\n\n    _sigmas.push(sigma);\n\n    var texelSize = 1.0 / (sizeLod - 1);\n    var min = -texelSize / 2;\n    var max = 1 + texelSize / 2;\n    var uv1 = [min, min, max, min, max, max, min, min, max, max, min, max];\n    var cubeFaces = 6;\n    var vertices = 6;\n    var positionSize = 3;\n    var uvSize = 2;\n    var faceIndexSize = 1;\n    var position = new Float32Array(positionSize * vertices * cubeFaces);\n    var uv = new Float32Array(uvSize * vertices * cubeFaces);\n    var faceIndex = new Float32Array(faceIndexSize * vertices * cubeFaces);\n\n    for (var face = 0; face < cubeFaces; face++) {\n      var _x7 = face % 3 * 2 / 3 - 1;\n\n      var y = face > 2 ? 0 : -1;\n      var coordinates = [_x7, y, 0, _x7 + 2 / 3, y, 0, _x7 + 2 / 3, y + 1, 0, _x7, y, 0, _x7 + 2 / 3, y + 1, 0, _x7, y + 1, 0];\n      position.set(coordinates, positionSize * vertices * face);\n      uv.set(uv1, uvSize * vertices * face);\n      var fill = [face, face, face, face, face, face];\n      faceIndex.set(fill, faceIndexSize * vertices * face);\n    }\n\n    var planes = new BufferGeometry();\n    planes.setAttribute('position', new BufferAttribute(position, positionSize));\n    planes.setAttribute('uv', new BufferAttribute(uv, uvSize));\n    planes.setAttribute('faceIndex', new BufferAttribute(faceIndex, faceIndexSize));\n\n    _lodPlanes.push(planes);\n\n    if (lod > LOD_MIN) {\n      lod--;\n    }\n  }\n\n  return {\n    _lodPlanes: _lodPlanes,\n    _sizeLods: _sizeLods,\n    _sigmas: _sigmas\n  };\n}\n\nfunction _createRenderTarget(params) {\n  var cubeUVRenderTarget = new WebGLRenderTarget(3 * SIZE_MAX, 3 * SIZE_MAX, params);\n  cubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n  cubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n  cubeUVRenderTarget.scissorTest = true;\n  return cubeUVRenderTarget;\n}\n\nfunction _setViewport(target, x, y, width, height) {\n  target.viewport.set(x, y, width, height);\n  target.scissor.set(x, y, width, height);\n}\n\nfunction _getBlurShader(maxSamples) {\n  var weights = new Float32Array(maxSamples);\n  var poleAxis = new Vector3(0, 1, 0);\n  var shaderMaterial = new RawShaderMaterial({\n    name: 'SphericalGaussianBlur',\n    defines: {\n      'n': maxSamples\n    },\n    uniforms: {\n      'envMap': {\n        value: null\n      },\n      'samples': {\n        value: 1\n      },\n      'weights': {\n        value: weights\n      },\n      'latitudinal': {\n        value: false\n      },\n      'dTheta': {\n        value: 0\n      },\n      'mipInt': {\n        value: 0\n      },\n      'poleAxis': {\n        value: poleAxis\n      },\n      'inputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      },\n      'outputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      }\n    },\n    vertexShader: _getCommonVertexShader(),\n    fragmentShader:\n    /* glsl */\n    \"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform int samples;\\n\\t\\t\\tuniform float weights[ n ];\\n\\t\\t\\tuniform bool latitudinal;\\n\\t\\t\\tuniform float dTheta;\\n\\t\\t\\tuniform float mipInt;\\n\\t\\t\\tuniform vec3 poleAxis;\\n\\n\\t\\t\\t\".concat(_getEncodings(), \"\\n\\n\\t\\t\\t#define ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t#include <cube_uv_reflection_fragment>\\n\\n\\t\\t\\tvec3 getSample( float theta, vec3 axis ) {\\n\\n\\t\\t\\t\\tfloat cosTheta = cos( theta );\\n\\t\\t\\t\\t// Rodrigues' axis-angle rotation\\n\\t\\t\\t\\tvec3 sampleDirection = vOutputDirection * cosTheta\\n\\t\\t\\t\\t\\t+ cross( axis, vOutputDirection ) * sin( theta )\\n\\t\\t\\t\\t\\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\\n\\n\\t\\t\\t\\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\\n\\n\\t\\t\\t\\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\\n\\n\\t\\t\\t\\t\\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\taxis = normalize( axis );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\\n\\n\\t\\t\\t\\tfor ( int i = 1; i < n; i++ ) {\\n\\n\\t\\t\\t\\t\\tif ( i >= samples ) {\\n\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tfloat theta = dTheta * float( i );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tgl_FragColor = linearToOutputTexel( gl_FragColor );\\n\\n\\t\\t\\t}\\n\\t\\t\"),\n    blending: NoBlending,\n    depthTest: false,\n    depthWrite: false\n  });\n  return shaderMaterial;\n}\n\nfunction _getEquirectShader() {\n  var texelSize = new Vector2(1, 1);\n  var shaderMaterial = new RawShaderMaterial({\n    name: 'EquirectangularToCubeUV',\n    uniforms: {\n      'envMap': {\n        value: null\n      },\n      'texelSize': {\n        value: texelSize\n      },\n      'inputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      },\n      'outputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      }\n    },\n    vertexShader: _getCommonVertexShader(),\n    fragmentShader:\n    /* glsl */\n    \"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform vec2 texelSize;\\n\\n\\t\\t\\t\".concat(_getEncodings(), \"\\n\\n\\t\\t\\t#include <common>\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\n\\t\\t\\t\\tvec3 outputDirection = normalize( vOutputDirection );\\n\\t\\t\\t\\tvec2 uv = equirectUv( outputDirection );\\n\\n\\t\\t\\t\\tvec2 f = fract( uv / texelSize - 0.5 );\\n\\t\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\t\\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x += texelSize.x;\\n\\t\\t\\t\\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.y += texelSize.y;\\n\\t\\t\\t\\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x -= texelSize.x;\\n\\t\\t\\t\\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\n\\t\\t\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\t\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\t\\t\\tgl_FragColor.rgb = mix( tm, bm, f.y );\\n\\n\\t\\t\\t\\tgl_FragColor = linearToOutputTexel( gl_FragColor );\\n\\n\\t\\t\\t}\\n\\t\\t\"),\n    blending: NoBlending,\n    depthTest: false,\n    depthWrite: false\n  });\n  return shaderMaterial;\n}\n\nfunction _getCubemapShader() {\n  var shaderMaterial = new RawShaderMaterial({\n    name: 'CubemapToCubeUV',\n    uniforms: {\n      'envMap': {\n        value: null\n      },\n      'inputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      },\n      'outputEncoding': {\n        value: ENCODINGS[LinearEncoding]\n      }\n    },\n    vertexShader: _getCommonVertexShader(),\n    fragmentShader:\n    /* glsl */\n    \"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform samplerCube envMap;\\n\\n\\t\\t\\t\".concat(_getEncodings(), \"\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\\n\\t\\t\\t\\tgl_FragColor = linearToOutputTexel( gl_FragColor );\\n\\n\\t\\t\\t}\\n\\t\\t\"),\n    blending: NoBlending,\n    depthTest: false,\n    depthWrite: false\n  });\n  return shaderMaterial;\n}\n\nfunction _getCommonVertexShader() {\n  return (\n    /* glsl */\n    \"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute vec3 position;\\n\\t\\tattribute vec2 uv;\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\"\n  );\n}\n\nfunction _getEncodings() {\n  return (\n    /* glsl */\n    \"\\n\\n\\t\\tuniform int inputEncoding;\\n\\t\\tuniform int outputEncoding;\\n\\n\\t\\t#include <encodings_pars_fragment>\\n\\n\\t\\tvec4 inputTexelToLinear( vec4 value ) {\\n\\n\\t\\t\\tif ( inputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else if ( inputEncoding == 1 ) {\\n\\n\\t\\t\\t\\treturn sRGBToLinear( value );\\n\\n\\t\\t\\t} else if ( inputEncoding == 2 ) {\\n\\n\\t\\t\\t\\treturn RGBEToLinear( value );\\n\\n\\t\\t\\t} else if ( inputEncoding == 3 ) {\\n\\n\\t\\t\\t\\treturn RGBMToLinear( value, 7.0 );\\n\\n\\t\\t\\t} else if ( inputEncoding == 4 ) {\\n\\n\\t\\t\\t\\treturn RGBMToLinear( value, 16.0 );\\n\\n\\t\\t\\t} else if ( inputEncoding == 5 ) {\\n\\n\\t\\t\\t\\treturn RGBDToLinear( value, 256.0 );\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn GammaToLinear( value, 2.2 );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 linearToOutputTexel( vec4 value ) {\\n\\n\\t\\t\\tif ( outputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else if ( outputEncoding == 1 ) {\\n\\n\\t\\t\\t\\treturn LinearTosRGB( value );\\n\\n\\t\\t\\t} else if ( outputEncoding == 2 ) {\\n\\n\\t\\t\\t\\treturn LinearToRGBE( value );\\n\\n\\t\\t\\t} else if ( outputEncoding == 3 ) {\\n\\n\\t\\t\\t\\treturn LinearToRGBM( value, 7.0 );\\n\\n\\t\\t\\t} else if ( outputEncoding == 4 ) {\\n\\n\\t\\t\\t\\treturn LinearToRGBM( value, 16.0 );\\n\\n\\t\\t\\t} else if ( outputEncoding == 5 ) {\\n\\n\\t\\t\\t\\treturn LinearToRGBD( value, 256.0 );\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn LinearToGamma( value, 2.2 );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 envMapTexelToLinear( vec4 color ) {\\n\\n\\t\\t\\treturn inputTexelToLinear( color );\\n\\n\\t\\t}\\n\\t\"\n  );\n}\n\nfunction WebGLCubeUVMaps(renderer) {\n  var cubeUVmaps = new WeakMap();\n  var pmremGenerator = null;\n\n  function get(texture) {\n    if (texture && texture.isTexture && texture.isRenderTargetTexture === false) {\n      var mapping = texture.mapping;\n      var isEquirectMap = mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping;\n      var isCubeMap = mapping === CubeReflectionMapping || mapping === CubeRefractionMapping;\n\n      if (isEquirectMap || isCubeMap) {\n        // equirect/cube map to cubeUV conversion\n        if (cubeUVmaps.has(texture)) {\n          return cubeUVmaps.get(texture).texture;\n        } else {\n          var image = texture.image;\n\n          if (isEquirectMap && image && image.height > 0 || isCubeMap && image && isCubeTextureComplete(image)) {\n            var currentRenderTarget = renderer.getRenderTarget();\n            if (pmremGenerator === null) pmremGenerator = new PMREMGenerator(renderer);\n            var renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular(texture) : pmremGenerator.fromCubemap(texture);\n            cubeUVmaps.set(texture, renderTarget);\n            renderer.setRenderTarget(currentRenderTarget);\n            texture.addEventListener('dispose', onTextureDispose);\n            return renderTarget.texture;\n          } else {\n            // image not yet ready. try the conversion next frame\n            return null;\n          }\n        }\n      }\n    }\n\n    return texture;\n  }\n\n  function isCubeTextureComplete(image) {\n    var count = 0;\n    var length = 6;\n\n    for (var _i89 = 0; _i89 < length; _i89++) {\n      if (image[_i89] !== undefined) count++;\n    }\n\n    return count === length;\n  }\n\n  function onTextureDispose(event) {\n    var texture = event.target;\n    texture.removeEventListener('dispose', onTextureDispose);\n    var cubemapUV = cubeUVmaps.get(texture);\n\n    if (cubemapUV !== undefined) {\n      cubemapUV.delete(texture);\n      cubemapUV.dispose();\n    }\n  }\n\n  function dispose() {\n    cubeUVmaps = new WeakMap();\n\n    if (pmremGenerator !== null) {\n      pmremGenerator.dispose();\n      pmremGenerator = null;\n    }\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nfunction WebGLExtensions(gl) {\n  var extensions = {};\n\n  function getExtension(name) {\n    if (extensions[name] !== undefined) {\n      return extensions[name];\n    }\n\n    var extension;\n\n    switch (name) {\n      case 'WEBGL_depth_texture':\n        extension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') || gl.getExtension('WEBKIT_WEBGL_depth_texture');\n        break;\n\n      case 'EXT_texture_filter_anisotropic':\n        extension = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n        break;\n\n      case 'WEBGL_compressed_texture_s3tc':\n        extension = gl.getExtension('WEBGL_compressed_texture_s3tc') || gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');\n        break;\n\n      case 'WEBGL_compressed_texture_pvrtc':\n        extension = gl.getExtension('WEBGL_compressed_texture_pvrtc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n        break;\n\n      default:\n        extension = gl.getExtension(name);\n    }\n\n    extensions[name] = extension;\n    return extension;\n  }\n\n  return {\n    has: function has(name) {\n      return getExtension(name) !== null;\n    },\n    init: function init(capabilities) {\n      if (capabilities.isWebGL2) {\n        getExtension('EXT_color_buffer_float');\n      } else {\n        getExtension('WEBGL_depth_texture');\n        getExtension('OES_texture_float');\n        getExtension('OES_texture_half_float');\n        getExtension('OES_texture_half_float_linear');\n        getExtension('OES_standard_derivatives');\n        getExtension('OES_element_index_uint');\n        getExtension('OES_vertex_array_object');\n        getExtension('ANGLE_instanced_arrays');\n      }\n\n      getExtension('OES_texture_float_linear');\n      getExtension('EXT_color_buffer_half_float');\n    },\n    get: function get(name) {\n      var extension = getExtension(name);\n\n      if (extension === null) {\n        console.warn('THREE.WebGLRenderer: ' + name + ' extension not supported.');\n      }\n\n      return extension;\n    }\n  };\n}\n\nfunction WebGLGeometries(gl, attributes, info, bindingStates) {\n  var geometries = {};\n  var wireframeAttributes = new WeakMap();\n\n  function onGeometryDispose(event) {\n    var geometry = event.target;\n\n    if (geometry.index !== null) {\n      attributes.remove(geometry.index);\n    }\n\n    for (var name in geometry.attributes) {\n      attributes.remove(geometry.attributes[name]);\n    }\n\n    geometry.removeEventListener('dispose', onGeometryDispose);\n    delete geometries[geometry.id];\n    var attribute = wireframeAttributes.get(geometry);\n\n    if (attribute) {\n      attributes.remove(attribute);\n      wireframeAttributes.delete(geometry);\n    }\n\n    bindingStates.releaseStatesOfGeometry(geometry);\n\n    if (geometry.isInstancedBufferGeometry === true) {\n      delete geometry._maxInstanceCount;\n    } //\n\n\n    info.memory.geometries--;\n  }\n\n  function get(object, geometry) {\n    if (geometries[geometry.id] === true) return geometry;\n    geometry.addEventListener('dispose', onGeometryDispose);\n    geometries[geometry.id] = true;\n    info.memory.geometries++;\n    return geometry;\n  }\n\n  function update(geometry) {\n    var geometryAttributes = geometry.attributes; // Updating index buffer in VAO now. See WebGLBindingStates.\n\n    for (var name in geometryAttributes) {\n      attributes.update(geometryAttributes[name], 34962);\n    } // morph targets\n\n\n    var morphAttributes = geometry.morphAttributes;\n\n    for (var _name3 in morphAttributes) {\n      var array = morphAttributes[_name3];\n\n      for (var _i90 = 0, _l31 = array.length; _i90 < _l31; _i90++) {\n        attributes.update(array[_i90], 34962);\n      }\n    }\n  }\n\n  function updateWireframeAttribute(geometry) {\n    var indices = [];\n    var geometryIndex = geometry.index;\n    var geometryPosition = geometry.attributes.position;\n    var version = 0;\n\n    if (geometryIndex !== null) {\n      var array = geometryIndex.array;\n      version = geometryIndex.version;\n\n      for (var _i91 = 0, _l32 = array.length; _i91 < _l32; _i91 += 3) {\n        var _a8 = array[_i91 + 0];\n        var b = array[_i91 + 1];\n        var _c8 = array[_i91 + 2];\n        indices.push(_a8, b, b, _c8, _c8, _a8);\n      }\n    } else {\n      var _array = geometryPosition.array;\n      version = geometryPosition.version;\n\n      for (var _i92 = 0, _l33 = _array.length / 3 - 1; _i92 < _l33; _i92 += 3) {\n        var _a9 = _i92 + 0;\n\n        var _b5 = _i92 + 1;\n\n        var _c9 = _i92 + 2;\n\n        indices.push(_a9, _b5, _b5, _c9, _c9, _a9);\n      }\n    }\n\n    var attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n    attribute.version = version; // Updating index buffer in VAO now. See WebGLBindingStates\n    //\n\n    var previousAttribute = wireframeAttributes.get(geometry);\n    if (previousAttribute) attributes.remove(previousAttribute); //\n\n    wireframeAttributes.set(geometry, attribute);\n  }\n\n  function getWireframeAttribute(geometry) {\n    var currentAttribute = wireframeAttributes.get(geometry);\n\n    if (currentAttribute) {\n      var geometryIndex = geometry.index;\n\n      if (geometryIndex !== null) {\n        // if the attribute is obsolete, create a new one\n        if (currentAttribute.version < geometryIndex.version) {\n          updateWireframeAttribute(geometry);\n        }\n      }\n    } else {\n      updateWireframeAttribute(geometry);\n    }\n\n    return wireframeAttributes.get(geometry);\n  }\n\n  return {\n    get: get,\n    update: update,\n    getWireframeAttribute: getWireframeAttribute\n  };\n}\n\nfunction WebGLIndexedBufferRenderer(gl, extensions, info, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var mode;\n\n  function setMode(value) {\n    mode = value;\n  }\n\n  var type, bytesPerElement;\n\n  function setIndex(value) {\n    type = value.type;\n    bytesPerElement = value.bytesPerElement;\n  }\n\n  function render(start, count) {\n    gl.drawElements(mode, count, type, start * bytesPerElement);\n    info.update(count, mode, 1);\n  }\n\n  function renderInstances(start, count, primcount) {\n    if (primcount === 0) return;\n    var extension, methodName;\n\n    if (isWebGL2) {\n      extension = gl;\n      methodName = 'drawElementsInstanced';\n    } else {\n      extension = extensions.get('ANGLE_instanced_arrays');\n      methodName = 'drawElementsInstancedANGLE';\n\n      if (extension === null) {\n        console.error('THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n        return;\n      }\n    }\n\n    extension[methodName](mode, count, type, start * bytesPerElement, primcount);\n    info.update(count, mode, primcount);\n  } //\n\n\n  this.setMode = setMode;\n  this.setIndex = setIndex;\n  this.render = render;\n  this.renderInstances = renderInstances;\n}\n\nfunction WebGLInfo(gl) {\n  var memory = {\n    geometries: 0,\n    textures: 0\n  };\n  var render = {\n    frame: 0,\n    calls: 0,\n    triangles: 0,\n    points: 0,\n    lines: 0\n  };\n\n  function update(count, mode, instanceCount) {\n    render.calls++;\n\n    switch (mode) {\n      case 4:\n        render.triangles += instanceCount * (count / 3);\n        break;\n\n      case 1:\n        render.lines += instanceCount * (count / 2);\n        break;\n\n      case 3:\n        render.lines += instanceCount * (count - 1);\n        break;\n\n      case 2:\n        render.lines += instanceCount * count;\n        break;\n\n      case 0:\n        render.points += instanceCount * count;\n        break;\n\n      default:\n        console.error('THREE.WebGLInfo: Unknown draw mode:', mode);\n        break;\n    }\n  }\n\n  function reset() {\n    render.frame++;\n    render.calls = 0;\n    render.triangles = 0;\n    render.points = 0;\n    render.lines = 0;\n  }\n\n  return {\n    memory: memory,\n    render: render,\n    programs: null,\n    autoReset: true,\n    reset: reset,\n    update: update\n  };\n}\n\nfunction numericalSort(a, b) {\n  return a[0] - b[0];\n}\n\nfunction absNumericalSort(a, b) {\n  return Math.abs(b[1]) - Math.abs(a[1]);\n}\n\nfunction WebGLMorphtargets(gl) {\n  var influencesList = {};\n  var morphInfluences = new Float32Array(8);\n  var workInfluences = [];\n\n  for (var _i93 = 0; _i93 < 8; _i93++) {\n    workInfluences[_i93] = [_i93, 0];\n  }\n\n  function update(object, geometry, material, program) {\n    var objectInfluences = object.morphTargetInfluences; // When object doesn't have morph target influences defined, we treat it as a 0-length array\n    // This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n    var length = objectInfluences === undefined ? 0 : objectInfluences.length;\n    var influences = influencesList[geometry.id];\n\n    if (influences === undefined || influences.length !== length) {\n      // initialise list\n      influences = [];\n\n      for (var _i94 = 0; _i94 < length; _i94++) {\n        influences[_i94] = [_i94, 0];\n      }\n\n      influencesList[geometry.id] = influences;\n    } // Collect influences\n\n\n    for (var _i95 = 0; _i95 < length; _i95++) {\n      var influence = influences[_i95];\n      influence[0] = _i95;\n      influence[1] = objectInfluences[_i95];\n    }\n\n    influences.sort(absNumericalSort);\n\n    for (var _i96 = 0; _i96 < 8; _i96++) {\n      if (_i96 < length && influences[_i96][1]) {\n        workInfluences[_i96][0] = influences[_i96][0];\n        workInfluences[_i96][1] = influences[_i96][1];\n      } else {\n        workInfluences[_i96][0] = Number.MAX_SAFE_INTEGER;\n        workInfluences[_i96][1] = 0;\n      }\n    }\n\n    workInfluences.sort(numericalSort);\n    var morphTargets = geometry.morphAttributes.position;\n    var morphNormals = geometry.morphAttributes.normal;\n    var morphInfluencesSum = 0;\n\n    for (var _i97 = 0; _i97 < 8; _i97++) {\n      var _influence = workInfluences[_i97];\n      var index = _influence[0];\n      var value = _influence[1];\n\n      if (index !== Number.MAX_SAFE_INTEGER && value) {\n        if (morphTargets && geometry.getAttribute('morphTarget' + _i97) !== morphTargets[index]) {\n          geometry.setAttribute('morphTarget' + _i97, morphTargets[index]);\n        }\n\n        if (morphNormals && geometry.getAttribute('morphNormal' + _i97) !== morphNormals[index]) {\n          geometry.setAttribute('morphNormal' + _i97, morphNormals[index]);\n        }\n\n        morphInfluences[_i97] = value;\n        morphInfluencesSum += value;\n      } else {\n        if (morphTargets && geometry.hasAttribute('morphTarget' + _i97) === true) {\n          geometry.deleteAttribute('morphTarget' + _i97);\n        }\n\n        if (morphNormals && geometry.hasAttribute('morphNormal' + _i97) === true) {\n          geometry.deleteAttribute('morphNormal' + _i97);\n        }\n\n        morphInfluences[_i97] = 0;\n      }\n    } // GLSL shader uses formula baseinfluence * base + sum(target * influence)\n    // This allows us to switch between absolute morphs and relative morphs without changing shader code\n    // When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\n\n    var morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n    program.getUniforms().setValue(gl, 'morphTargetBaseInfluence', morphBaseInfluence);\n    program.getUniforms().setValue(gl, 'morphTargetInfluences', morphInfluences);\n  }\n\n  return {\n    update: update\n  };\n}\n\nfunction WebGLObjects(gl, geometries, attributes, info) {\n  var updateMap = new WeakMap();\n\n  function update(object) {\n    var frame = info.render.frame;\n    var geometry = object.geometry;\n    var buffergeometry = geometries.get(object, geometry); // Update once per frame\n\n    if (updateMap.get(buffergeometry) !== frame) {\n      geometries.update(buffergeometry);\n      updateMap.set(buffergeometry, frame);\n    }\n\n    if (object.isInstancedMesh) {\n      if (object.hasEventListener('dispose', onInstancedMeshDispose) === false) {\n        object.addEventListener('dispose', onInstancedMeshDispose);\n      }\n\n      attributes.update(object.instanceMatrix, 34962);\n\n      if (object.instanceColor !== null) {\n        attributes.update(object.instanceColor, 34962);\n      }\n    }\n\n    return buffergeometry;\n  }\n\n  function dispose() {\n    updateMap = new WeakMap();\n  }\n\n  function onInstancedMeshDispose(event) {\n    var instancedMesh = event.target;\n    instancedMesh.removeEventListener('dispose', onInstancedMeshDispose);\n    attributes.remove(instancedMesh.instanceMatrix);\n    if (instancedMesh.instanceColor !== null) attributes.remove(instancedMesh.instanceColor);\n  }\n\n  return {\n    update: update,\n    dispose: dispose\n  };\n}\n\nvar DataTexture2DArray = /*#__PURE__*/function (_Texture$2) {\n  _inherits(DataTexture2DArray, _Texture$2);\n\n  var _super26 = _createSuper(DataTexture2DArray);\n\n  function DataTexture2DArray() {\n    var _this29;\n\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, DataTexture2DArray);\n\n    _this29 = _super26.call(this, null);\n    _this29.image = {\n      data: data,\n      width: width,\n      height: height,\n      depth: depth\n    };\n    _this29.magFilter = NearestFilter;\n    _this29.minFilter = NearestFilter;\n    _this29.wrapR = ClampToEdgeWrapping;\n    _this29.generateMipmaps = false;\n    _this29.flipY = false;\n    _this29.unpackAlignment = 1;\n    _this29.needsUpdate = true;\n    return _this29;\n  }\n\n  return DataTexture2DArray;\n}(Texture$1);\n\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nvar DataTexture3D = /*#__PURE__*/function (_Texture$3) {\n  _inherits(DataTexture3D, _Texture$3);\n\n  var _super27 = _createSuper(DataTexture3D);\n\n  function DataTexture3D() {\n    var _this30;\n\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, DataTexture3D);\n\n    // We're going to add .setXXX() methods for setting properties later.\n    // Users can still set in DataTexture3D directly.\n    //\n    //\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n    // \ttexture.anisotropy = 16;\n    //\n    // See #14839\n    _this30 = _super27.call(this, null);\n    _this30.image = {\n      data: data,\n      width: width,\n      height: height,\n      depth: depth\n    };\n    _this30.magFilter = NearestFilter;\n    _this30.minFilter = NearestFilter;\n    _this30.wrapR = ClampToEdgeWrapping;\n    _this30.generateMipmaps = false;\n    _this30.flipY = false;\n    _this30.unpackAlignment = 1;\n    _this30.needsUpdate = true;\n    return _this30;\n  }\n\n  return DataTexture3D;\n}(Texture$1);\n\nDataTexture3D.prototype.isDataTexture3D = true;\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nvar emptyTexture = new Texture$1();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture(); // --- Utilities ---\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = []; // Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array(16);\nvar mat3array = new Float32Array(9);\nvar mat2array = new Float32Array(4); // Flattening for arrays of vectors and matrices\n\nfunction flatten(array, nBlocks, blockSize) {\n  var firstElem = array[0];\n  if (firstElem <= 0 || firstElem > 0) return array; // unoptimized: ! isNaN( firstElem )\n  // see http://jacksondunstan.com/articles/983\n\n  var n = nBlocks * blockSize;\n  var r = arrayCacheF32[n];\n\n  if (r === undefined) {\n    r = new Float32Array(n);\n    arrayCacheF32[n] = r;\n  }\n\n  if (nBlocks !== 0) {\n    firstElem.toArray(r, 0);\n\n    for (var _i98 = 1, offset = 0; _i98 !== nBlocks; ++_i98) {\n      offset += blockSize;\n\n      array[_i98].toArray(r, offset);\n    }\n  }\n\n  return r;\n}\n\nfunction arraysEqual(a, b) {\n  if (a.length !== b.length) return false;\n\n  for (var _i99 = 0, _l34 = a.length; _i99 < _l34; _i99++) {\n    if (a[_i99] !== b[_i99]) return false;\n  }\n\n  return true;\n}\n\nfunction copyArray(a, b) {\n  for (var _i100 = 0, _l35 = b.length; _i100 < _l35; _i100++) {\n    a[_i100] = b[_i100];\n  }\n} // Texture unit allocation\n\n\nfunction allocTexUnits(textures, n) {\n  var r = arrayCacheI32[n];\n\n  if (r === undefined) {\n    r = new Int32Array(n);\n    arrayCacheI32[n] = r;\n  }\n\n  for (var _i101 = 0; _i101 !== n; ++_i101) {\n    r[_i101] = textures.allocateTextureUnit();\n  }\n\n  return r;\n} // --- Setters ---\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n// Single scalar\n\n\nfunction setValueV1f(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1f(this.addr, v);\n  cache[0] = v;\n} // Single float vector (from flat array or THREE.VectorN)\n\n\nfunction setValueV2f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y) {\n      gl.uniform2f(this.addr, v.x, v.y);\n      cache[0] = v.x;\n      cache[1] = v.y;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform2fv(this.addr, v);\n    copyArray(cache, v);\n  }\n}\n\nfunction setValueV3f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z) {\n      gl.uniform3f(this.addr, v.x, v.y, v.z);\n      cache[0] = v.x;\n      cache[1] = v.y;\n      cache[2] = v.z;\n    }\n  } else if (v.r !== undefined) {\n    if (cache[0] !== v.r || cache[1] !== v.g || cache[2] !== v.b) {\n      gl.uniform3f(this.addr, v.r, v.g, v.b);\n      cache[0] = v.r;\n      cache[1] = v.g;\n      cache[2] = v.b;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform3fv(this.addr, v);\n    copyArray(cache, v);\n  }\n}\n\nfunction setValueV4f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z || cache[3] !== v.w) {\n      gl.uniform4f(this.addr, v.x, v.y, v.z, v.w);\n      cache[0] = v.x;\n      cache[1] = v.y;\n      cache[2] = v.z;\n      cache[3] = v.w;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform4fv(this.addr, v);\n    copyArray(cache, v);\n  }\n} // Single matrix (from flat array or THREE.MatrixN)\n\n\nfunction setValueM2(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix2fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat2array.set(elements);\n    gl.uniformMatrix2fv(this.addr, false, mat2array);\n    copyArray(cache, elements);\n  }\n}\n\nfunction setValueM3(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix3fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat3array.set(elements);\n    gl.uniformMatrix3fv(this.addr, false, mat3array);\n    copyArray(cache, elements);\n  }\n}\n\nfunction setValueM4(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix4fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat4array.set(elements);\n    gl.uniformMatrix4fv(this.addr, false, mat4array);\n    copyArray(cache, elements);\n  }\n} // Single integer / boolean\n\n\nfunction setValueV1i(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1i(this.addr, v);\n  cache[0] = v;\n} // Single integer / boolean vector (from flat array)\n\n\nfunction setValueV2i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform2iv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV3i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform3iv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV4i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform4iv(this.addr, v);\n  copyArray(cache, v);\n} // Single unsigned integer\n\n\nfunction setValueV1ui(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1ui(this.addr, v);\n  cache[0] = v;\n} // Single unsigned integer vector (from flat array)\n\n\nfunction setValueV2ui(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform2uiv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV3ui(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform3uiv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV4ui(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform4uiv(this.addr, v);\n  copyArray(cache, v);\n} // Single texture (2D / Cube)\n\n\nfunction setValueT1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.safeSetTexture2D(v || emptyTexture, unit);\n}\n\nfunction setValueT3D1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.setTexture3D(v || emptyTexture3d, unit);\n}\n\nfunction setValueT6(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.safeSetTextureCube(v || emptyCubeTexture, unit);\n}\n\nfunction setValueT2DArray1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.setTexture2DArray(v || emptyTexture2dArray, unit);\n} // Helper to pick the right setter for the singular case\n\n\nfunction getSingularSetter(type) {\n  switch (type) {\n    case 0x1406:\n      return setValueV1f;\n    // FLOAT\n\n    case 0x8b50:\n      return setValueV2f;\n    // _VEC2\n\n    case 0x8b51:\n      return setValueV3f;\n    // _VEC3\n\n    case 0x8b52:\n      return setValueV4f;\n    // _VEC4\n\n    case 0x8b5a:\n      return setValueM2;\n    // _MAT2\n\n    case 0x8b5b:\n      return setValueM3;\n    // _MAT3\n\n    case 0x8b5c:\n      return setValueM4;\n    // _MAT4\n\n    case 0x1404:\n    case 0x8b56:\n      return setValueV1i;\n    // INT, BOOL\n\n    case 0x8b53:\n    case 0x8b57:\n      return setValueV2i;\n    // _VEC2\n\n    case 0x8b54:\n    case 0x8b58:\n      return setValueV3i;\n    // _VEC3\n\n    case 0x8b55:\n    case 0x8b59:\n      return setValueV4i;\n    // _VEC4\n\n    case 0x1405:\n      return setValueV1ui;\n    // UINT\n\n    case 0x8dc6:\n      return setValueV2ui;\n    // _VEC2\n\n    case 0x8dc7:\n      return setValueV3ui;\n    // _VEC3\n\n    case 0x8dc8:\n      return setValueV4ui;\n    // _VEC4\n\n    case 0x8b5e: // SAMPLER_2D\n\n    case 0x8d66: // SAMPLER_EXTERNAL_OES\n\n    case 0x8dca: // INT_SAMPLER_2D\n\n    case 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\n    case 0x8b62:\n      // SAMPLER_2D_SHADOW\n      return setValueT1;\n\n    case 0x8b5f: // SAMPLER_3D\n\n    case 0x8dcb: // INT_SAMPLER_3D\n\n    case 0x8dd3:\n      // UNSIGNED_INT_SAMPLER_3D\n      return setValueT3D1;\n\n    case 0x8b60: // SAMPLER_CUBE\n\n    case 0x8dcc: // INT_SAMPLER_CUBE\n\n    case 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\n    case 0x8dc5:\n      // SAMPLER_CUBE_SHADOW\n      return setValueT6;\n\n    case 0x8dc1: // SAMPLER_2D_ARRAY\n\n    case 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\n    case 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\n    case 0x8dc4:\n      // SAMPLER_2D_ARRAY_SHADOW\n      return setValueT2DArray1;\n  }\n} // Array of scalars\n\n\nfunction setValueV1fArray(gl, v) {\n  gl.uniform1fv(this.addr, v);\n} // Array of vectors (from flat array or array of THREE.VectorN)\n\n\nfunction setValueV2fArray(gl, v) {\n  var data = flatten(v, this.size, 2);\n  gl.uniform2fv(this.addr, data);\n}\n\nfunction setValueV3fArray(gl, v) {\n  var data = flatten(v, this.size, 3);\n  gl.uniform3fv(this.addr, data);\n}\n\nfunction setValueV4fArray(gl, v) {\n  var data = flatten(v, this.size, 4);\n  gl.uniform4fv(this.addr, data);\n} // Array of matrices (from flat array or array of THREE.MatrixN)\n\n\nfunction setValueM2Array(gl, v) {\n  var data = flatten(v, this.size, 4);\n  gl.uniformMatrix2fv(this.addr, false, data);\n}\n\nfunction setValueM3Array(gl, v) {\n  var data = flatten(v, this.size, 9);\n  gl.uniformMatrix3fv(this.addr, false, data);\n}\n\nfunction setValueM4Array(gl, v) {\n  var data = flatten(v, this.size, 16);\n  gl.uniformMatrix4fv(this.addr, false, data);\n} // Array of integer / boolean\n\n\nfunction setValueV1iArray(gl, v) {\n  gl.uniform1iv(this.addr, v);\n} // Array of integer / boolean vectors (from flat array)\n\n\nfunction setValueV2iArray(gl, v) {\n  gl.uniform2iv(this.addr, v);\n}\n\nfunction setValueV3iArray(gl, v) {\n  gl.uniform3iv(this.addr, v);\n}\n\nfunction setValueV4iArray(gl, v) {\n  gl.uniform4iv(this.addr, v);\n} // Array of unsigned integer\n\n\nfunction setValueV1uiArray(gl, v) {\n  gl.uniform1uiv(this.addr, v);\n} // Array of unsigned integer vectors (from flat array)\n\n\nfunction setValueV2uiArray(gl, v) {\n  gl.uniform2uiv(this.addr, v);\n}\n\nfunction setValueV3uiArray(gl, v) {\n  gl.uniform3uiv(this.addr, v);\n}\n\nfunction setValueV4uiArray(gl, v) {\n  gl.uniform4uiv(this.addr, v);\n} // Array of textures (2D / Cube)\n\n\nfunction setValueT1Array(gl, v, textures) {\n  var n = v.length;\n  var units = allocTexUnits(textures, n);\n  gl.uniform1iv(this.addr, units);\n\n  for (var _i102 = 0; _i102 !== n; ++_i102) {\n    textures.safeSetTexture2D(v[_i102] || emptyTexture, units[_i102]);\n  }\n}\n\nfunction setValueT6Array(gl, v, textures) {\n  var n = v.length;\n  var units = allocTexUnits(textures, n);\n  gl.uniform1iv(this.addr, units);\n\n  for (var _i103 = 0; _i103 !== n; ++_i103) {\n    textures.safeSetTextureCube(v[_i103] || emptyCubeTexture, units[_i103]);\n  }\n} // Helper to pick the right setter for a pure (bottom-level) array\n\n\nfunction getPureArraySetter(type) {\n  switch (type) {\n    case 0x1406:\n      return setValueV1fArray;\n    // FLOAT\n\n    case 0x8b50:\n      return setValueV2fArray;\n    // _VEC2\n\n    case 0x8b51:\n      return setValueV3fArray;\n    // _VEC3\n\n    case 0x8b52:\n      return setValueV4fArray;\n    // _VEC4\n\n    case 0x8b5a:\n      return setValueM2Array;\n    // _MAT2\n\n    case 0x8b5b:\n      return setValueM3Array;\n    // _MAT3\n\n    case 0x8b5c:\n      return setValueM4Array;\n    // _MAT4\n\n    case 0x1404:\n    case 0x8b56:\n      return setValueV1iArray;\n    // INT, BOOL\n\n    case 0x8b53:\n    case 0x8b57:\n      return setValueV2iArray;\n    // _VEC2\n\n    case 0x8b54:\n    case 0x8b58:\n      return setValueV3iArray;\n    // _VEC3\n\n    case 0x8b55:\n    case 0x8b59:\n      return setValueV4iArray;\n    // _VEC4\n\n    case 0x1405:\n      return setValueV1uiArray;\n    // UINT\n\n    case 0x8dc6:\n      return setValueV2uiArray;\n    // _VEC2\n\n    case 0x8dc7:\n      return setValueV3uiArray;\n    // _VEC3\n\n    case 0x8dc8:\n      return setValueV4uiArray;\n    // _VEC4\n\n    case 0x8b5e: // SAMPLER_2D\n\n    case 0x8d66: // SAMPLER_EXTERNAL_OES\n\n    case 0x8dca: // INT_SAMPLER_2D\n\n    case 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\n    case 0x8b62:\n      // SAMPLER_2D_SHADOW\n      return setValueT1Array;\n\n    case 0x8b60: // SAMPLER_CUBE\n\n    case 0x8dcc: // INT_SAMPLER_CUBE\n\n    case 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\n    case 0x8dc5:\n      // SAMPLER_CUBE_SHADOW\n      return setValueT6Array;\n  }\n} // --- Uniform Classes ---\n\n\nfunction SingleUniform(id, activeInfo, addr) {\n  this.id = id;\n  this.addr = addr;\n  this.cache = [];\n  this.setValue = getSingularSetter(activeInfo.type); // this.path = activeInfo.name; // DEBUG\n}\n\nfunction PureArrayUniform(id, activeInfo, addr) {\n  this.id = id;\n  this.addr = addr;\n  this.cache = [];\n  this.size = activeInfo.size;\n  this.setValue = getPureArraySetter(activeInfo.type); // this.path = activeInfo.name; // DEBUG\n}\n\nPureArrayUniform.prototype.updateCache = function (data) {\n  var cache = this.cache;\n\n  if (data instanceof Float32Array && cache.length !== data.length) {\n    this.cache = new Float32Array(data.length);\n  }\n\n  copyArray(cache, data);\n};\n\nfunction StructuredUniform(id) {\n  this.id = id;\n  this.seq = [];\n  this.map = {};\n}\n\nStructuredUniform.prototype.setValue = function (gl, value, textures) {\n  var seq = this.seq;\n\n  for (var _i104 = 0, _n4 = seq.length; _i104 !== _n4; ++_i104) {\n    var u = seq[_i104];\n    u.setValue(gl, value[u.id], textures);\n  }\n}; // --- Top-level ---\n// Parser - builds up the property tree from the path strings\n\n\nvar RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g; // extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform(container, uniformObject) {\n  container.seq.push(uniformObject);\n  container.map[uniformObject.id] = uniformObject;\n}\n\nfunction parseUniform(activeInfo, addr, container) {\n  var path = activeInfo.name,\n      pathLength = path.length; // reset RegExp object, because of the early exit of a previous run\n\n  RePathPart.lastIndex = 0;\n\n  while (true) {\n    var match = RePathPart.exec(path),\n        matchEnd = RePathPart.lastIndex;\n    var id = match[1];\n    var idIsIndex = match[2] === ']',\n        subscript = match[3];\n    if (idIsIndex) id = id | 0; // convert to integer\n\n    if (subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength) {\n      // bare name or \"pure\" bottom-level array \"[0]\" suffix\n      addUniform(container, subscript === undefined ? new SingleUniform(id, activeInfo, addr) : new PureArrayUniform(id, activeInfo, addr));\n      break;\n    } else {\n      // step into inner node / create it in case it doesn't exist\n      var map = container.map;\n      var next = map[id];\n\n      if (next === undefined) {\n        next = new StructuredUniform(id);\n        addUniform(container, next);\n      }\n\n      container = next;\n    }\n  }\n} // Root Container\n\n\nfunction WebGLUniforms(gl, program) {\n  this.seq = [];\n  this.map = {};\n  var n = gl.getProgramParameter(program, 35718);\n\n  for (var _i105 = 0; _i105 < n; ++_i105) {\n    var info = gl.getActiveUniform(program, _i105),\n        addr = gl.getUniformLocation(program, info.name);\n    parseUniform(info, addr, this);\n  }\n}\n\nWebGLUniforms.prototype.setValue = function (gl, name, value, textures) {\n  var u = this.map[name];\n  if (u !== undefined) u.setValue(gl, value, textures);\n};\n\nWebGLUniforms.prototype.setOptional = function (gl, object, name) {\n  var v = object[name];\n  if (v !== undefined) this.setValue(gl, name, v);\n}; // Static interface\n\n\nWebGLUniforms.upload = function (gl, seq, values, textures) {\n  for (var _i106 = 0, _n5 = seq.length; _i106 !== _n5; ++_i106) {\n    var u = seq[_i106],\n        v = values[u.id];\n\n    if (v.needsUpdate !== false) {\n      // note: always updating when .needsUpdate is undefined\n      u.setValue(gl, v.value, textures);\n    }\n  }\n};\n\nWebGLUniforms.seqWithValue = function (seq, values) {\n  var r = [];\n\n  for (var _i107 = 0, _n6 = seq.length; _i107 !== _n6; ++_i107) {\n    var u = seq[_i107];\n    if (u.id in values) r.push(u);\n  }\n\n  return r;\n};\n\nfunction WebGLShader(gl, type, string) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, string);\n  gl.compileShader(shader);\n  return shader;\n}\n\nvar programIdCount = 0;\n\nfunction addLineNumbers(string) {\n  var lines = string.split('\\n');\n\n  for (var _i108 = 0; _i108 < lines.length; _i108++) {\n    lines[_i108] = _i108 + 1 + ': ' + lines[_i108];\n  }\n\n  return lines.join('\\n');\n}\n\nfunction getEncodingComponents(encoding) {\n  switch (encoding) {\n    case LinearEncoding:\n      return ['Linear', '( value )'];\n\n    case sRGBEncoding:\n      return ['sRGB', '( value )'];\n\n    case RGBEEncoding:\n      return ['RGBE', '( value )'];\n\n    case RGBM7Encoding:\n      return ['RGBM', '( value, 7.0 )'];\n\n    case RGBM16Encoding:\n      return ['RGBM', '( value, 16.0 )'];\n\n    case RGBDEncoding:\n      return ['RGBD', '( value, 256.0 )'];\n\n    case GammaEncoding:\n      return ['Gamma', '( value, float( GAMMA_FACTOR ) )'];\n\n    case LogLuvEncoding:\n      return ['LogLuv', '( value )'];\n\n    default:\n      console.warn('THREE.WebGLProgram: Unsupported encoding:', encoding);\n      return ['Linear', '( value )'];\n  }\n}\n\nfunction getShaderErrors(gl, shader, type) {\n  var status = gl.getShaderParameter(shader, 35713);\n  var log = gl.getShaderInfoLog(shader).trim();\n  if (status && log === '') return ''; // --enable-privileged-webgl-extension\n  // console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n  var source = gl.getShaderSource(shader);\n  return 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers(source);\n}\n\nfunction getTexelDecodingFunction(functionName, encoding) {\n  var components = getEncodingComponents(encoding);\n  return 'vec4 ' + functionName + '( vec4 value ) { return ' + components[0] + 'ToLinear' + components[1] + '; }';\n}\n\nfunction getTexelEncodingFunction(functionName, encoding) {\n  var components = getEncodingComponents(encoding);\n  return 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[0] + components[1] + '; }';\n}\n\nfunction getToneMappingFunction(functionName, toneMapping) {\n  var toneMappingName;\n\n  switch (toneMapping) {\n    case LinearToneMapping:\n      toneMappingName = 'Linear';\n      break;\n\n    case ReinhardToneMapping:\n      toneMappingName = 'Reinhard';\n      break;\n\n    case CineonToneMapping:\n      toneMappingName = 'OptimizedCineon';\n      break;\n\n    case ACESFilmicToneMapping:\n      toneMappingName = 'ACESFilmic';\n      break;\n\n    case CustomToneMapping:\n      toneMappingName = 'Custom';\n      break;\n\n    default:\n      console.warn('THREE.WebGLProgram: Unsupported toneMapping:', toneMapping);\n      toneMappingName = 'Linear';\n  }\n\n  return 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n}\n\nfunction generateExtensions(parameters) {\n  var chunks = [parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ? '#extension GL_OES_standard_derivatives : enable' : '', (parameters.extensionFragDepth || parameters.logarithmicDepthBuffer) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '', parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ? '#extension GL_EXT_draw_buffers : require' : '', (parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission > 0.0) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''];\n  return chunks.filter(filterEmptyLine).join('\\n');\n}\n\nfunction generateDefines(defines) {\n  var chunks = [];\n\n  for (var name in defines) {\n    var value = defines[name];\n    if (value === false) continue;\n    chunks.push('#define ' + name + ' ' + value);\n  }\n\n  return chunks.join('\\n');\n}\n\nfunction fetchAttributeLocations(gl, program) {\n  var attributes = {};\n  var n = gl.getProgramParameter(program, 35721);\n\n  for (var _i109 = 0; _i109 < n; _i109++) {\n    var info = gl.getActiveAttrib(program, _i109);\n    var name = info.name; // console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n    attributes[name] = gl.getAttribLocation(program, name);\n  }\n\n  return attributes;\n}\n\nfunction filterEmptyLine(string) {\n  return string !== '';\n}\n\nfunction replaceLightNums(string, parameters) {\n  return string.replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights).replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights).replace(/NUM_HEMI_LIGHTS/g, parameters.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows);\n}\n\nfunction replaceClippingPlaneNums(string, parameters) {\n  return string.replace(/NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, parameters.numClippingPlanes - parameters.numClipIntersection);\n} // Resolve Includes\n\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes(string) {\n  return string.replace(includePattern, includeReplacer);\n}\n\nfunction includeReplacer(match, include) {\n  var string = ShaderChunk[include];\n\n  if (string === undefined) {\n    throw new Error('Can not resolve #include <' + include + '>');\n  }\n\n  return resolveIncludes(string);\n} // Unroll Loops\n\n\nvar deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nvar unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops(string) {\n  return string.replace(unrollLoopPattern, loopReplacer).replace(deprecatedUnrollLoopPattern, deprecatedLoopReplacer);\n}\n\nfunction deprecatedLoopReplacer(match, start, end, snippet) {\n  console.warn('WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.');\n  return loopReplacer(match, start, end, snippet);\n}\n\nfunction loopReplacer(match, start, end, snippet) {\n  var string = '';\n\n  for (var _i110 = parseInt(start); _i110 < parseInt(end); _i110++) {\n    string += snippet.replace(/\\[\\s*i\\s*\\]/g, '[ ' + _i110 + ' ]').replace(/UNROLLED_LOOP_INDEX/g, _i110);\n  }\n\n  return string;\n} //\n\n\nfunction generatePrecision(parameters) {\n  var precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n  if (parameters.precision === 'highp') {\n    precisionstring += '\\n#define HIGH_PRECISION';\n  } else if (parameters.precision === 'mediump') {\n    precisionstring += '\\n#define MEDIUM_PRECISION';\n  } else if (parameters.precision === 'lowp') {\n    precisionstring += '\\n#define LOW_PRECISION';\n  }\n\n  return precisionstring;\n}\n\nfunction generateShadowMapTypeDefine(parameters) {\n  var shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n  if (parameters.shadowMapType === PCFShadowMap) {\n    shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n  } else if (parameters.shadowMapType === PCFSoftShadowMap) {\n    shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n  } else if (parameters.shadowMapType === VSMShadowMap) {\n    shadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n  }\n\n  return shadowMapTypeDefine;\n}\n\nfunction generateEnvMapTypeDefine(parameters) {\n  var envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n  if (parameters.envMap) {\n    switch (parameters.envMapMode) {\n      case CubeReflectionMapping:\n      case CubeRefractionMapping:\n        envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n        break;\n\n      case CubeUVReflectionMapping:\n      case CubeUVRefractionMapping:\n        envMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n        break;\n    }\n  }\n\n  return envMapTypeDefine;\n}\n\nfunction generateEnvMapModeDefine(parameters) {\n  var envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n  if (parameters.envMap) {\n    switch (parameters.envMapMode) {\n      case CubeRefractionMapping:\n      case CubeUVRefractionMapping:\n        envMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n        break;\n    }\n  }\n\n  return envMapModeDefine;\n}\n\nfunction generateEnvMapBlendingDefine(parameters) {\n  var envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n  if (parameters.envMap) {\n    switch (parameters.combine) {\n      case MultiplyOperation:\n        envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n        break;\n\n      case MixOperation:\n        envMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n        break;\n\n      case AddOperation:\n        envMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n        break;\n    }\n  }\n\n  return envMapBlendingDefine;\n}\n\nfunction WebGLProgram(renderer, cacheKey, parameters, bindingStates) {\n  var gl = renderer.getContext();\n  var defines = parameters.defines;\n  var vertexShader = parameters.vertexShader;\n  var fragmentShader = parameters.fragmentShader;\n  var shadowMapTypeDefine = generateShadowMapTypeDefine(parameters);\n  var envMapTypeDefine = generateEnvMapTypeDefine(parameters);\n  var envMapModeDefine = generateEnvMapModeDefine(parameters);\n  var envMapBlendingDefine = generateEnvMapBlendingDefine(parameters);\n  var gammaFactorDefine = renderer.gammaFactor > 0 ? renderer.gammaFactor : 1.0;\n  var customExtensions = parameters.isWebGL2 ? '' : generateExtensions(parameters);\n  var customDefines = generateDefines(defines);\n  var program = gl.createProgram();\n  var prefixVertex, prefixFragment;\n  var versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n  if (parameters.isRawShaderMaterial) {\n    prefixVertex = [customDefines].filter(filterEmptyLine).join('\\n');\n\n    if (prefixVertex.length > 0) {\n      prefixVertex += '\\n';\n    }\n\n    prefixFragment = [customExtensions, customDefines].filter(filterEmptyLine).join('\\n');\n\n    if (prefixFragment.length > 0) {\n      prefixFragment += '\\n';\n    }\n  } else {\n    prefixVertex = [generatePrecision(parameters), '#define SHADER_NAME ' + parameters.shaderName, customDefines, parameters.instancing ? '#define USE_INSTANCING' : '', parameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '', parameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '', '#define GAMMA_FACTOR ' + gammaFactorDefine, '#define MAX_BONES ' + parameters.maxBones, parameters.useFog && parameters.fog ? '#define USE_FOG' : '', parameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '', parameters.map ? '#define USE_MAP' : '', parameters.envMap ? '#define USE_ENVMAP' : '', parameters.envMap ? '#define ' + envMapModeDefine : '', parameters.lightMap ? '#define USE_LIGHTMAP' : '', parameters.aoMap ? '#define USE_AOMAP' : '', parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '', parameters.bumpMap ? '#define USE_BUMPMAP' : '', parameters.normalMap ? '#define USE_NORMALMAP' : '', parameters.normalMap && parameters.objectSpaceNormalMap ? '#define OBJECTSPACE_NORMALMAP' : '', parameters.normalMap && parameters.tangentSpaceNormalMap ? '#define TANGENTSPACE_NORMALMAP' : '', parameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '', parameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '', parameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '', parameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '', parameters.specularMap ? '#define USE_SPECULARMAP' : '', parameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '', parameters.specularTintMap ? '#define USE_SPECULARTINTMAP' : '', parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '', parameters.metalnessMap ? '#define USE_METALNESSMAP' : '', parameters.alphaMap ? '#define USE_ALPHAMAP' : '', parameters.transmission ? '#define USE_TRANSMISSION' : '', parameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '', parameters.thicknessMap ? '#define USE_THICKNESSMAP' : '', parameters.vertexTangents ? '#define USE_TANGENT' : '', parameters.vertexColors ? '#define USE_COLOR' : '', parameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '', parameters.vertexUvs ? '#define USE_UV' : '', parameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '', parameters.flatShading ? '#define FLAT_SHADED' : '', parameters.skinning ? '#define USE_SKINNING' : '', parameters.useVertexTexture ? '#define BONE_TEXTURE' : '', parameters.morphTargets ? '#define USE_MORPHTARGETS' : '', parameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '', parameters.doubleSided ? '#define DOUBLE_SIDED' : '', parameters.flipSided ? '#define FLIP_SIDED' : '', parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '', parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '', parameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '', parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '', parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '', 'uniform mat4 modelMatrix;', 'uniform mat4 modelViewMatrix;', 'uniform mat4 projectionMatrix;', 'uniform mat4 viewMatrix;', 'uniform mat3 normalMatrix;', 'uniform vec3 cameraPosition;', 'uniform bool isOrthographic;', '#ifdef USE_INSTANCING', '\tattribute mat4 instanceMatrix;', '#endif', '#ifdef USE_INSTANCING_COLOR', '\tattribute vec3 instanceColor;', '#endif', 'attribute vec3 position;', 'attribute vec3 normal;', 'attribute vec2 uv;', '#ifdef USE_TANGENT', '\tattribute vec4 tangent;', '#endif', '#if defined( USE_COLOR_ALPHA )', '\tattribute vec4 color;', '#elif defined( USE_COLOR )', '\tattribute vec3 color;', '#endif', '#ifdef USE_MORPHTARGETS', '\tattribute vec3 morphTarget0;', '\tattribute vec3 morphTarget1;', '\tattribute vec3 morphTarget2;', '\tattribute vec3 morphTarget3;', '\t#ifdef USE_MORPHNORMALS', '\t\tattribute vec3 morphNormal0;', '\t\tattribute vec3 morphNormal1;', '\t\tattribute vec3 morphNormal2;', '\t\tattribute vec3 morphNormal3;', '\t#else', '\t\tattribute vec3 morphTarget4;', '\t\tattribute vec3 morphTarget5;', '\t\tattribute vec3 morphTarget6;', '\t\tattribute vec3 morphTarget7;', '\t#endif', '#endif', '#ifdef USE_SKINNING', '\tattribute vec4 skinIndex;', '\tattribute vec4 skinWeight;', '#endif', '\\n'].filter(filterEmptyLine).join('\\n');\n    prefixFragment = [customExtensions, generatePrecision(parameters), '#define SHADER_NAME ' + parameters.shaderName, customDefines, parameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + (parameters.alphaTest % 1 ? '' : '.0') : '', // add '.0' if integer\n    '#define GAMMA_FACTOR ' + gammaFactorDefine, parameters.useFog && parameters.fog ? '#define USE_FOG' : '', parameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '', parameters.map ? '#define USE_MAP' : '', parameters.matcap ? '#define USE_MATCAP' : '', parameters.envMap ? '#define USE_ENVMAP' : '', parameters.envMap ? '#define ' + envMapTypeDefine : '', parameters.envMap ? '#define ' + envMapModeDefine : '', parameters.envMap ? '#define ' + envMapBlendingDefine : '', parameters.lightMap ? '#define USE_LIGHTMAP' : '', parameters.aoMap ? '#define USE_AOMAP' : '', parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '', parameters.bumpMap ? '#define USE_BUMPMAP' : '', parameters.normalMap ? '#define USE_NORMALMAP' : '', parameters.normalMap && parameters.objectSpaceNormalMap ? '#define OBJECTSPACE_NORMALMAP' : '', parameters.normalMap && parameters.tangentSpaceNormalMap ? '#define TANGENTSPACE_NORMALMAP' : '', parameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '', parameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '', parameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '', parameters.specularMap ? '#define USE_SPECULARMAP' : '', parameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '', parameters.specularTintMap ? '#define USE_SPECULARTINTMAP' : '', parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '', parameters.metalnessMap ? '#define USE_METALNESSMAP' : '', parameters.alphaMap ? '#define USE_ALPHAMAP' : '', parameters.sheen ? '#define USE_SHEEN' : '', parameters.transmission ? '#define USE_TRANSMISSION' : '', parameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '', parameters.thicknessMap ? '#define USE_THICKNESSMAP' : '', parameters.vertexTangents ? '#define USE_TANGENT' : '', parameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '', parameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '', parameters.vertexUvs ? '#define USE_UV' : '', parameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '', parameters.gradientMap ? '#define USE_GRADIENTMAP' : '', parameters.flatShading ? '#define FLAT_SHADED' : '', parameters.doubleSided ? '#define DOUBLE_SIDED' : '', parameters.flipSided ? '#define FLIP_SIDED' : '', parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '', parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '', parameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '', parameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '', parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '', parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '', (parameters.extensionShaderTextureLOD || parameters.envMap) && parameters.rendererExtensionShaderTextureLod ? '#define TEXTURE_LOD_EXT' : '', 'uniform mat4 viewMatrix;', 'uniform vec3 cameraPosition;', 'uniform bool isOrthographic;', parameters.toneMapping !== NoToneMapping ? '#define TONE_MAPPING' : '', parameters.toneMapping !== NoToneMapping ? ShaderChunk['tonemapping_pars_fragment'] : '', // this code is required here because it is used by the toneMapping() function defined below\n    parameters.toneMapping !== NoToneMapping ? getToneMappingFunction('toneMapping', parameters.toneMapping) : '', parameters.dithering ? '#define DITHERING' : '', ShaderChunk['encodings_pars_fragment'], // this code is required here because it is used by the various encoding/decoding function defined below\n    parameters.map ? getTexelDecodingFunction('mapTexelToLinear', parameters.mapEncoding) : '', parameters.matcap ? getTexelDecodingFunction('matcapTexelToLinear', parameters.matcapEncoding) : '', parameters.envMap ? getTexelDecodingFunction('envMapTexelToLinear', parameters.envMapEncoding) : '', parameters.emissiveMap ? getTexelDecodingFunction('emissiveMapTexelToLinear', parameters.emissiveMapEncoding) : '', parameters.specularTintMap ? getTexelDecodingFunction('specularTintMapTexelToLinear', parameters.specularTintMapEncoding) : '', parameters.lightMap ? getTexelDecodingFunction('lightMapTexelToLinear', parameters.lightMapEncoding) : '', getTexelEncodingFunction('linearToOutputTexel', parameters.outputEncoding), parameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '', '\\n'].filter(filterEmptyLine).join('\\n');\n  }\n\n  vertexShader = resolveIncludes(vertexShader);\n  vertexShader = replaceLightNums(vertexShader, parameters);\n  vertexShader = replaceClippingPlaneNums(vertexShader, parameters);\n  fragmentShader = resolveIncludes(fragmentShader);\n  fragmentShader = replaceLightNums(fragmentShader, parameters);\n  fragmentShader = replaceClippingPlaneNums(fragmentShader, parameters);\n  vertexShader = unrollLoops(vertexShader);\n  fragmentShader = unrollLoops(fragmentShader);\n\n  if (parameters.isWebGL2 && parameters.isRawShaderMaterial !== true) {\n    // GLSL 3.0 conversion for built-in materials and ShaderMaterial\n    versionString = '#version 300 es\\n';\n    prefixVertex = ['#define attribute in', '#define varying out', '#define texture2D texture'].join('\\n') + '\\n' + prefixVertex;\n    prefixFragment = ['#define varying in', parameters.glslVersion === GLSL3 ? '' : 'out highp vec4 pc_fragColor;', parameters.glslVersion === GLSL3 ? '' : '#define gl_FragColor pc_fragColor', '#define gl_FragDepthEXT gl_FragDepth', '#define texture2D texture', '#define textureCube texture', '#define texture2DProj textureProj', '#define texture2DLodEXT textureLod', '#define texture2DProjLodEXT textureProjLod', '#define textureCubeLodEXT textureLod', '#define texture2DGradEXT textureGrad', '#define texture2DProjGradEXT textureProjGrad', '#define textureCubeGradEXT textureGrad'].join('\\n') + '\\n' + prefixFragment;\n  }\n\n  var vertexGlsl = versionString + prefixVertex + vertexShader;\n  var fragmentGlsl = versionString + prefixFragment + fragmentShader; // console.log( '*VERTEX*', vertexGlsl );\n  // console.log( '*FRAGMENT*', fragmentGlsl );\n\n  var glVertexShader = WebGLShader(gl, 35633, vertexGlsl);\n  var glFragmentShader = WebGLShader(gl, 35632, fragmentGlsl);\n  gl.attachShader(program, glVertexShader);\n  gl.attachShader(program, glFragmentShader); // Force a particular attribute to index 0.\n\n  if (parameters.index0AttributeName !== undefined) {\n    gl.bindAttribLocation(program, 0, parameters.index0AttributeName);\n  } else if (parameters.morphTargets === true) {\n    // programs with morphTargets displace position out of attribute 0\n    gl.bindAttribLocation(program, 0, 'position');\n  }\n\n  gl.linkProgram(program); // check for link errors\n\n  if (renderer.debug.checkShaderErrors) {\n    var programLog = gl.getProgramInfoLog(program).trim();\n    var vertexLog = gl.getShaderInfoLog(glVertexShader).trim();\n    var fragmentLog = gl.getShaderInfoLog(glFragmentShader).trim();\n    var runnable = true;\n    var haveDiagnostics = true;\n\n    if (gl.getProgramParameter(program, 35714) === false) {\n      runnable = false;\n      var vertexErrors = getShaderErrors(gl, glVertexShader, 'vertex');\n      var fragmentErrors = getShaderErrors(gl, glFragmentShader, 'fragment');\n      console.error('THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter(program, 35715), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors);\n    } else if (programLog !== '') {\n      console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()', programLog);\n    } else if (vertexLog === '' || fragmentLog === '') {\n      haveDiagnostics = false;\n    }\n\n    if (haveDiagnostics) {\n      this.diagnostics = {\n        runnable: runnable,\n        programLog: programLog,\n        vertexShader: {\n          log: vertexLog,\n          prefix: prefixVertex\n        },\n        fragmentShader: {\n          log: fragmentLog,\n          prefix: prefixFragment\n        }\n      };\n    }\n  } // Clean up\n  // Crashes in iOS9 and iOS10. #18402\n  // gl.detachShader( program, glVertexShader );\n  // gl.detachShader( program, glFragmentShader );\n\n\n  gl.deleteShader(glVertexShader);\n  gl.deleteShader(glFragmentShader); // set up caching for uniform locations\n\n  var cachedUniforms;\n\n  this.getUniforms = function () {\n    if (cachedUniforms === undefined) {\n      cachedUniforms = new WebGLUniforms(gl, program);\n    }\n\n    return cachedUniforms;\n  }; // set up caching for attribute locations\n\n\n  var cachedAttributes;\n\n  this.getAttributes = function () {\n    if (cachedAttributes === undefined) {\n      cachedAttributes = fetchAttributeLocations(gl, program);\n    }\n\n    return cachedAttributes;\n  }; // free resource\n\n\n  this.destroy = function () {\n    bindingStates.releaseStatesOfProgram(this);\n    gl.deleteProgram(program);\n    this.program = undefined;\n  }; //\n\n\n  this.name = parameters.shaderName;\n  this.id = programIdCount++;\n  this.cacheKey = cacheKey;\n  this.usedTimes = 1;\n  this.program = program;\n  this.vertexShader = glVertexShader;\n  this.fragmentShader = glFragmentShader;\n  return this;\n}\n\nfunction WebGLPrograms(renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping) {\n  var programs = [];\n  var isWebGL2 = capabilities.isWebGL2;\n  var logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n  var floatVertexTextures = capabilities.floatVertexTextures;\n  var maxVertexUniforms = capabilities.maxVertexUniforms;\n  var vertexTextures = capabilities.vertexTextures;\n  var precision = capabilities.precision;\n  var shaderIDs = {\n    MeshDepthMaterial: 'depth',\n    MeshDistanceMaterial: 'distanceRGBA',\n    MeshNormalMaterial: 'normal',\n    MeshBasicMaterial: 'basic',\n    MeshLambertMaterial: 'lambert',\n    MeshPhongMaterial: 'phong',\n    MeshToonMaterial: 'toon',\n    MeshStandardMaterial: 'physical',\n    MeshPhysicalMaterial: 'physical',\n    MeshMatcapMaterial: 'matcap',\n    LineBasicMaterial: 'basic',\n    LineDashedMaterial: 'dashed',\n    PointsMaterial: 'points',\n    ShadowMaterial: 'shadow',\n    SpriteMaterial: 'sprite'\n  };\n  var parameterNames = ['precision', 'isWebGL2', 'supportsVertexTextures', 'outputEncoding', 'instancing', 'instancingColor', 'map', 'mapEncoding', 'matcap', 'matcapEncoding', 'envMap', 'envMapMode', 'envMapEncoding', 'envMapCubeUV', 'lightMap', 'lightMapEncoding', 'aoMap', 'emissiveMap', 'emissiveMapEncoding', 'bumpMap', 'normalMap', 'objectSpaceNormalMap', 'tangentSpaceNormalMap', 'clearcoatMap', 'clearcoatRoughnessMap', 'clearcoatNormalMap', 'displacementMap', 'specularMap', 'specularIntensityMap', 'specularTintMap', 'specularTintMapEncoding', 'roughnessMap', 'metalnessMap', 'gradientMap', 'alphaMap', 'combine', 'vertexColors', 'vertexAlphas', 'vertexTangents', 'vertexUvs', 'uvsVertexOnly', 'fog', 'useFog', 'fogExp2', 'flatShading', 'sizeAttenuation', 'logarithmicDepthBuffer', 'skinning', 'maxBones', 'useVertexTexture', 'morphTargets', 'morphNormals', 'premultipliedAlpha', 'numDirLights', 'numPointLights', 'numSpotLights', 'numHemiLights', 'numRectAreaLights', 'numDirLightShadows', 'numPointLightShadows', 'numSpotLightShadows', 'shadowMapEnabled', 'shadowMapType', 'toneMapping', 'physicallyCorrectLights', 'alphaTest', 'doubleSided', 'flipSided', 'numClippingPlanes', 'numClipIntersection', 'depthPacking', 'dithering', 'sheen', 'transmission', 'transmissionMap', 'thicknessMap'];\n\n  function getMaxBones(object) {\n    var skeleton = object.skeleton;\n    var bones = skeleton.bones;\n\n    if (floatVertexTextures) {\n      return 1024;\n    } else {\n      // default for when object is not specified\n      // ( for example when prebuilding shader to be used with multiple objects )\n      //\n      //  - leave some extra space for other uniforms\n      //  - limit here is ANGLE's 254 max uniform vectors\n      //    (up to 54 should be safe)\n      var nVertexUniforms = maxVertexUniforms;\n      var nVertexMatrices = Math.floor((nVertexUniforms - 20) / 4);\n      var maxBones = Math.min(nVertexMatrices, bones.length);\n\n      if (maxBones < bones.length) {\n        console.warn('THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.');\n        return 0;\n      }\n\n      return maxBones;\n    }\n  }\n\n  function getTextureEncodingFromMap(map) {\n    var encoding;\n\n    if (map && map.isTexture) {\n      encoding = map.encoding;\n    } else if (map && map.isWebGLRenderTarget) {\n      console.warn('THREE.WebGLPrograms.getTextureEncodingFromMap: don\\'t use render targets as textures. Use their .texture property instead.');\n      encoding = map.texture.encoding;\n    } else {\n      encoding = LinearEncoding;\n    }\n\n    return encoding;\n  }\n\n  function getParameters(material, lights, shadows, scene, object) {\n    var fog = scene.fog;\n    var environment = material.isMeshStandardMaterial ? scene.environment : null;\n    var envMap = (material.isMeshStandardMaterial ? cubeuvmaps : cubemaps).get(material.envMap || environment);\n    var shaderID = shaderIDs[material.type]; // heuristics to create shader parameters according to lights in the scene\n    // (not to blow over maxLights budget)\n\n    var maxBones = object.isSkinnedMesh ? getMaxBones(object) : 0;\n\n    if (material.precision !== null) {\n      precision = capabilities.getMaxPrecision(material.precision);\n\n      if (precision !== material.precision) {\n        console.warn('THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.');\n      }\n    }\n\n    var vertexShader, fragmentShader;\n\n    if (shaderID) {\n      var shader = ShaderLib[shaderID];\n      vertexShader = shader.vertexShader;\n      fragmentShader = shader.fragmentShader;\n    } else {\n      vertexShader = material.vertexShader;\n      fragmentShader = material.fragmentShader;\n    }\n\n    var currentRenderTarget = renderer.getRenderTarget();\n    var parameters = {\n      isWebGL2: isWebGL2,\n      shaderID: shaderID,\n      shaderName: material.type,\n      vertexShader: vertexShader,\n      fragmentShader: fragmentShader,\n      defines: material.defines,\n      isRawShaderMaterial: material.isRawShaderMaterial === true,\n      glslVersion: material.glslVersion,\n      precision: precision,\n      instancing: object.isInstancedMesh === true,\n      instancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n      supportsVertexTextures: vertexTextures,\n      outputEncoding: currentRenderTarget !== null ? getTextureEncodingFromMap(currentRenderTarget.texture) : renderer.outputEncoding,\n      map: !!material.map,\n      mapEncoding: getTextureEncodingFromMap(material.map),\n      matcap: !!material.matcap,\n      matcapEncoding: getTextureEncodingFromMap(material.matcap),\n      envMap: !!envMap,\n      envMapMode: envMap && envMap.mapping,\n      envMapEncoding: getTextureEncodingFromMap(envMap),\n      envMapCubeUV: !!envMap && (envMap.mapping === CubeUVReflectionMapping || envMap.mapping === CubeUVRefractionMapping),\n      lightMap: !!material.lightMap,\n      lightMapEncoding: getTextureEncodingFromMap(material.lightMap),\n      aoMap: !!material.aoMap,\n      emissiveMap: !!material.emissiveMap,\n      emissiveMapEncoding: getTextureEncodingFromMap(material.emissiveMap),\n      bumpMap: !!material.bumpMap,\n      normalMap: !!material.normalMap,\n      objectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n      tangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n      clearcoatMap: !!material.clearcoatMap,\n      clearcoatRoughnessMap: !!material.clearcoatRoughnessMap,\n      clearcoatNormalMap: !!material.clearcoatNormalMap,\n      displacementMap: !!material.displacementMap,\n      roughnessMap: !!material.roughnessMap,\n      metalnessMap: !!material.metalnessMap,\n      specularMap: !!material.specularMap,\n      specularIntensityMap: !!material.specularIntensityMap,\n      specularTintMap: !!material.specularTintMap,\n      specularTintMapEncoding: getTextureEncodingFromMap(material.specularTintMap),\n      alphaMap: !!material.alphaMap,\n      gradientMap: !!material.gradientMap,\n      sheen: !!material.sheen,\n      transmission: !!material.transmission,\n      transmissionMap: !!material.transmissionMap,\n      thicknessMap: !!material.thicknessMap,\n      combine: material.combine,\n      vertexTangents: !!material.normalMap && !!object.geometry && !!object.geometry.attributes.tangent,\n      vertexColors: material.vertexColors,\n      vertexAlphas: material.vertexColors === true && !!object.geometry && !!object.geometry.attributes.color && object.geometry.attributes.color.itemSize === 4,\n      vertexUvs: !!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatMap || !!material.clearcoatRoughnessMap || !!material.clearcoatNormalMap || !!material.displacementMap || !!material.transmissionMap || !!material.thicknessMap || !!material.specularIntensityMap || !!material.specularTintMap,\n      uvsVertexOnly: !(!!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatNormalMap || !!material.transmission || !!material.transmissionMap || !!material.thicknessMap || !!material.specularIntensityMap || !!material.specularTintMap) && !!material.displacementMap,\n      fog: !!fog,\n      useFog: material.fog,\n      fogExp2: fog && fog.isFogExp2,\n      flatShading: !!material.flatShading,\n      sizeAttenuation: material.sizeAttenuation,\n      logarithmicDepthBuffer: logarithmicDepthBuffer,\n      skinning: object.isSkinnedMesh === true && maxBones > 0,\n      maxBones: maxBones,\n      useVertexTexture: floatVertexTextures,\n      morphTargets: !!object.geometry && !!object.geometry.morphAttributes.position,\n      morphNormals: !!object.geometry && !!object.geometry.morphAttributes.normal,\n      numDirLights: lights.directional.length,\n      numPointLights: lights.point.length,\n      numSpotLights: lights.spot.length,\n      numRectAreaLights: lights.rectArea.length,\n      numHemiLights: lights.hemi.length,\n      numDirLightShadows: lights.directionalShadowMap.length,\n      numPointLightShadows: lights.pointShadowMap.length,\n      numSpotLightShadows: lights.spotShadowMap.length,\n      numClippingPlanes: clipping.numPlanes,\n      numClipIntersection: clipping.numIntersection,\n      dithering: material.dithering,\n      shadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n      shadowMapType: renderer.shadowMap.type,\n      toneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n      physicallyCorrectLights: renderer.physicallyCorrectLights,\n      premultipliedAlpha: material.premultipliedAlpha,\n      alphaTest: material.alphaTest,\n      doubleSided: material.side === DoubleSide,\n      flipSided: material.side === BackSide,\n      depthPacking: material.depthPacking !== undefined ? material.depthPacking : false,\n      index0AttributeName: material.index0AttributeName,\n      extensionDerivatives: material.extensions && material.extensions.derivatives,\n      extensionFragDepth: material.extensions && material.extensions.fragDepth,\n      extensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n      extensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n      rendererExtensionFragDepth: isWebGL2 || extensions.has('EXT_frag_depth'),\n      rendererExtensionDrawBuffers: isWebGL2 || extensions.has('WEBGL_draw_buffers'),\n      rendererExtensionShaderTextureLod: isWebGL2 || extensions.has('EXT_shader_texture_lod'),\n      customProgramCacheKey: material.customProgramCacheKey()\n    };\n    return parameters;\n  }\n\n  function getProgramCacheKey(parameters) {\n    var array = [];\n\n    if (parameters.shaderID) {\n      array.push(parameters.shaderID);\n    } else {\n      array.push(parameters.fragmentShader);\n      array.push(parameters.vertexShader);\n    }\n\n    if (parameters.defines !== undefined) {\n      for (var name in parameters.defines) {\n        array.push(name);\n        array.push(parameters.defines[name]);\n      }\n    }\n\n    if (parameters.isRawShaderMaterial === false) {\n      for (var _i111 = 0; _i111 < parameterNames.length; _i111++) {\n        array.push(parameters[parameterNames[_i111]]);\n      }\n\n      array.push(renderer.outputEncoding);\n      array.push(renderer.gammaFactor);\n    }\n\n    array.push(parameters.customProgramCacheKey);\n    return array.join();\n  }\n\n  function getUniforms(material) {\n    var shaderID = shaderIDs[material.type];\n    var uniforms;\n\n    if (shaderID) {\n      var shader = ShaderLib[shaderID];\n      uniforms = UniformsUtils.clone(shader.uniforms);\n    } else {\n      uniforms = material.uniforms;\n    }\n\n    return uniforms;\n  }\n\n  function acquireProgram(parameters, cacheKey) {\n    var program; // Check if code has been already compiled\n\n    for (var _p6 = 0, pl = programs.length; _p6 < pl; _p6++) {\n      var preexistingProgram = programs[_p6];\n\n      if (preexistingProgram.cacheKey === cacheKey) {\n        program = preexistingProgram;\n        ++program.usedTimes;\n        break;\n      }\n    }\n\n    if (program === undefined) {\n      program = new WebGLProgram(renderer, cacheKey, parameters, bindingStates);\n      programs.push(program);\n    }\n\n    return program;\n  }\n\n  function releaseProgram(program) {\n    if (--program.usedTimes === 0) {\n      // Remove from unordered set\n      var _i112 = programs.indexOf(program);\n\n      programs[_i112] = programs[programs.length - 1];\n      programs.pop(); // Free WebGL resources\n\n      program.destroy();\n    }\n  }\n\n  return {\n    getParameters: getParameters,\n    getProgramCacheKey: getProgramCacheKey,\n    getUniforms: getUniforms,\n    acquireProgram: acquireProgram,\n    releaseProgram: releaseProgram,\n    // Exposed for resource monitoring & error feedback via renderer.info:\n    programs: programs\n  };\n}\n\nfunction WebGLProperties() {\n  var properties = new WeakMap();\n\n  function get(object) {\n    var map = properties.get(object);\n\n    if (map === undefined) {\n      map = {};\n      properties.set(object, map);\n    }\n\n    return map;\n  }\n\n  function remove(object) {\n    properties.delete(object);\n  }\n\n  function update(object, key, value) {\n    properties.get(object)[key] = value;\n  }\n\n  function dispose() {\n    properties = new WeakMap();\n  }\n\n  return {\n    get: get,\n    remove: remove,\n    update: update,\n    dispose: dispose\n  };\n}\n\nfunction painterSortStable(a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  } else if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  } else if (a.program !== b.program) {\n    return a.program.id - b.program.id;\n  } else if (a.material.id !== b.material.id) {\n    return a.material.id - b.material.id;\n  } else if (a.z !== b.z) {\n    return a.z - b.z;\n  } else {\n    return a.id - b.id;\n  }\n}\n\nfunction reversePainterSortStable(a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  } else if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  } else if (a.z !== b.z) {\n    return b.z - a.z;\n  } else {\n    return a.id - b.id;\n  }\n}\n\nfunction WebGLRenderList(properties) {\n  var renderItems = [];\n  var renderItemsIndex = 0;\n  var opaque = [];\n  var transmissive = [];\n  var transparent = [];\n  var defaultProgram = {\n    id: -1\n  };\n\n  function init() {\n    renderItemsIndex = 0;\n    opaque.length = 0;\n    transmissive.length = 0;\n    transparent.length = 0;\n  }\n\n  function getNextRenderItem(object, geometry, material, groupOrder, z, group) {\n    var renderItem = renderItems[renderItemsIndex];\n    var materialProperties = properties.get(material);\n\n    if (renderItem === undefined) {\n      renderItem = {\n        id: object.id,\n        object: object,\n        geometry: geometry,\n        material: material,\n        program: materialProperties.program || defaultProgram,\n        groupOrder: groupOrder,\n        renderOrder: object.renderOrder,\n        z: z,\n        group: group\n      };\n      renderItems[renderItemsIndex] = renderItem;\n    } else {\n      renderItem.id = object.id;\n      renderItem.object = object;\n      renderItem.geometry = geometry;\n      renderItem.material = material;\n      renderItem.program = materialProperties.program || defaultProgram;\n      renderItem.groupOrder = groupOrder;\n      renderItem.renderOrder = object.renderOrder;\n      renderItem.z = z;\n      renderItem.group = group;\n    }\n\n    renderItemsIndex++;\n    return renderItem;\n  }\n\n  function push(object, geometry, material, groupOrder, z, group) {\n    var renderItem = getNextRenderItem(object, geometry, material, groupOrder, z, group);\n\n    if (material.transmission > 0.0) {\n      transmissive.push(renderItem);\n    } else if (material.transparent === true) {\n      transparent.push(renderItem);\n    } else {\n      opaque.push(renderItem);\n    }\n  }\n\n  function unshift(object, geometry, material, groupOrder, z, group) {\n    var renderItem = getNextRenderItem(object, geometry, material, groupOrder, z, group);\n\n    if (material.transmission > 0.0) {\n      transmissive.unshift(renderItem);\n    } else if (material.transparent === true) {\n      transparent.unshift(renderItem);\n    } else {\n      opaque.unshift(renderItem);\n    }\n  }\n\n  function sort(customOpaqueSort, customTransparentSort) {\n    if (opaque.length > 1) opaque.sort(customOpaqueSort || painterSortStable);\n    if (transmissive.length > 1) transmissive.sort(customTransparentSort || reversePainterSortStable);\n    if (transparent.length > 1) transparent.sort(customTransparentSort || reversePainterSortStable);\n  }\n\n  function finish() {\n    // Clear references from inactive renderItems in the list\n    for (var _i113 = renderItemsIndex, il = renderItems.length; _i113 < il; _i113++) {\n      var renderItem = renderItems[_i113];\n      if (renderItem.id === null) break;\n      renderItem.id = null;\n      renderItem.object = null;\n      renderItem.geometry = null;\n      renderItem.material = null;\n      renderItem.program = null;\n      renderItem.group = null;\n    }\n  }\n\n  return {\n    opaque: opaque,\n    transmissive: transmissive,\n    transparent: transparent,\n    init: init,\n    push: push,\n    unshift: unshift,\n    finish: finish,\n    sort: sort\n  };\n}\n\nfunction WebGLRenderLists(properties) {\n  var lists = new WeakMap();\n\n  function get(scene, renderCallDepth) {\n    var list;\n\n    if (lists.has(scene) === false) {\n      list = new WebGLRenderList(properties);\n      lists.set(scene, [list]);\n    } else {\n      if (renderCallDepth >= lists.get(scene).length) {\n        list = new WebGLRenderList(properties);\n        lists.get(scene).push(list);\n      } else {\n        list = lists.get(scene)[renderCallDepth];\n      }\n    }\n\n    return list;\n  }\n\n  function dispose() {\n    lists = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nfunction UniformsCache() {\n  var lights = {};\n  return {\n    get: function get(light) {\n      if (lights[light.id] !== undefined) {\n        return lights[light.id];\n      }\n\n      var uniforms;\n\n      switch (light.type) {\n        case 'DirectionalLight':\n          uniforms = {\n            direction: new Vector3(),\n            color: new Color()\n          };\n          break;\n\n        case 'SpotLight':\n          uniforms = {\n            position: new Vector3(),\n            direction: new Vector3(),\n            color: new Color(),\n            distance: 0,\n            coneCos: 0,\n            penumbraCos: 0,\n            decay: 0\n          };\n          break;\n\n        case 'PointLight':\n          uniforms = {\n            position: new Vector3(),\n            color: new Color(),\n            distance: 0,\n            decay: 0\n          };\n          break;\n\n        case 'HemisphereLight':\n          uniforms = {\n            direction: new Vector3(),\n            skyColor: new Color(),\n            groundColor: new Color()\n          };\n          break;\n\n        case 'RectAreaLight':\n          uniforms = {\n            color: new Color(),\n            position: new Vector3(),\n            halfWidth: new Vector3(),\n            halfHeight: new Vector3()\n          };\n          break;\n      }\n\n      lights[light.id] = uniforms;\n      return uniforms;\n    }\n  };\n}\n\nfunction ShadowUniformsCache() {\n  var lights = {};\n  return {\n    get: function get(light) {\n      if (lights[light.id] !== undefined) {\n        return lights[light.id];\n      }\n\n      var uniforms;\n\n      switch (light.type) {\n        case 'DirectionalLight':\n          uniforms = {\n            shadowBias: 0,\n            shadowNormalBias: 0,\n            shadowRadius: 1,\n            shadowMapSize: new Vector2()\n          };\n          break;\n\n        case 'SpotLight':\n          uniforms = {\n            shadowBias: 0,\n            shadowNormalBias: 0,\n            shadowRadius: 1,\n            shadowMapSize: new Vector2()\n          };\n          break;\n\n        case 'PointLight':\n          uniforms = {\n            shadowBias: 0,\n            shadowNormalBias: 0,\n            shadowRadius: 1,\n            shadowMapSize: new Vector2(),\n            shadowCameraNear: 1,\n            shadowCameraFar: 1000\n          };\n          break;\n        // TODO (abelnation): set RectAreaLight shadow uniforms\n      }\n\n      lights[light.id] = uniforms;\n      return uniforms;\n    }\n  };\n}\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst(lightA, lightB) {\n  return (lightB.castShadow ? 1 : 0) - (lightA.castShadow ? 1 : 0);\n}\n\nfunction WebGLLights(extensions, capabilities) {\n  var cache = new UniformsCache();\n  var shadowCache = ShadowUniformsCache();\n  var state = {\n    version: 0,\n    hash: {\n      directionalLength: -1,\n      pointLength: -1,\n      spotLength: -1,\n      rectAreaLength: -1,\n      hemiLength: -1,\n      numDirectionalShadows: -1,\n      numPointShadows: -1,\n      numSpotShadows: -1\n    },\n    ambient: [0, 0, 0],\n    probe: [],\n    directional: [],\n    directionalShadow: [],\n    directionalShadowMap: [],\n    directionalShadowMatrix: [],\n    spot: [],\n    spotShadow: [],\n    spotShadowMap: [],\n    spotShadowMatrix: [],\n    rectArea: [],\n    rectAreaLTC1: null,\n    rectAreaLTC2: null,\n    point: [],\n    pointShadow: [],\n    pointShadowMap: [],\n    pointShadowMatrix: [],\n    hemi: []\n  };\n\n  for (var _i114 = 0; _i114 < 9; _i114++) {\n    state.probe.push(new Vector3());\n  }\n\n  var vector3 = new Vector3();\n  var matrix4 = new Matrix4();\n  var matrix42 = new Matrix4();\n\n  function setup(lights) {\n    var r = 0,\n        g = 0,\n        b = 0;\n\n    for (var _i115 = 0; _i115 < 9; _i115++) {\n      state.probe[_i115].set(0, 0, 0);\n    }\n\n    var directionalLength = 0;\n    var pointLength = 0;\n    var spotLength = 0;\n    var rectAreaLength = 0;\n    var hemiLength = 0;\n    var numDirectionalShadows = 0;\n    var numPointShadows = 0;\n    var numSpotShadows = 0;\n    lights.sort(shadowCastingLightsFirst);\n\n    for (var _i116 = 0, _l36 = lights.length; _i116 < _l36; _i116++) {\n      var light = lights[_i116];\n      var color = light.color;\n      var intensity = light.intensity;\n      var distance = light.distance;\n      var shadowMap = light.shadow && light.shadow.map ? light.shadow.map.texture : null;\n\n      if (light.isAmbientLight) {\n        r += color.r * intensity;\n        g += color.g * intensity;\n        b += color.b * intensity;\n      } else if (light.isLightProbe) {\n        for (var j = 0; j < 9; j++) {\n          state.probe[j].addScaledVector(light.sh.coefficients[j], intensity);\n        }\n      } else if (light.isDirectionalLight) {\n        var uniforms = cache.get(light);\n        uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n\n        if (light.castShadow) {\n          var shadow = light.shadow;\n          var shadowUniforms = shadowCache.get(light);\n          shadowUniforms.shadowBias = shadow.bias;\n          shadowUniforms.shadowNormalBias = shadow.normalBias;\n          shadowUniforms.shadowRadius = shadow.radius;\n          shadowUniforms.shadowMapSize = shadow.mapSize;\n          state.directionalShadow[directionalLength] = shadowUniforms;\n          state.directionalShadowMap[directionalLength] = shadowMap;\n          state.directionalShadowMatrix[directionalLength] = light.shadow.matrix;\n          numDirectionalShadows++;\n        }\n\n        state.directional[directionalLength] = uniforms;\n        directionalLength++;\n      } else if (light.isSpotLight) {\n        var _uniforms = cache.get(light);\n\n        _uniforms.position.setFromMatrixPosition(light.matrixWorld);\n\n        _uniforms.color.copy(color).multiplyScalar(intensity);\n\n        _uniforms.distance = distance;\n        _uniforms.coneCos = Math.cos(light.angle);\n        _uniforms.penumbraCos = Math.cos(light.angle * (1 - light.penumbra));\n        _uniforms.decay = light.decay;\n\n        if (light.castShadow) {\n          var _shadow = light.shadow;\n\n          var _shadowUniforms = shadowCache.get(light);\n\n          _shadowUniforms.shadowBias = _shadow.bias;\n          _shadowUniforms.shadowNormalBias = _shadow.normalBias;\n          _shadowUniforms.shadowRadius = _shadow.radius;\n          _shadowUniforms.shadowMapSize = _shadow.mapSize;\n          state.spotShadow[spotLength] = _shadowUniforms;\n          state.spotShadowMap[spotLength] = shadowMap;\n          state.spotShadowMatrix[spotLength] = light.shadow.matrix;\n          numSpotShadows++;\n        }\n\n        state.spot[spotLength] = _uniforms;\n        spotLength++;\n      } else if (light.isRectAreaLight) {\n        var _uniforms2 = cache.get(light); // (a) intensity is the total visible light emitted\n        //uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n        // (b) intensity is the brightness of the light\n\n\n        _uniforms2.color.copy(color).multiplyScalar(intensity);\n\n        _uniforms2.halfWidth.set(light.width * 0.5, 0.0, 0.0);\n\n        _uniforms2.halfHeight.set(0.0, light.height * 0.5, 0.0);\n\n        state.rectArea[rectAreaLength] = _uniforms2;\n        rectAreaLength++;\n      } else if (light.isPointLight) {\n        var _uniforms3 = cache.get(light);\n\n        _uniforms3.color.copy(light.color).multiplyScalar(light.intensity);\n\n        _uniforms3.distance = light.distance;\n        _uniforms3.decay = light.decay;\n\n        if (light.castShadow) {\n          var _shadow2 = light.shadow;\n\n          var _shadowUniforms2 = shadowCache.get(light);\n\n          _shadowUniforms2.shadowBias = _shadow2.bias;\n          _shadowUniforms2.shadowNormalBias = _shadow2.normalBias;\n          _shadowUniforms2.shadowRadius = _shadow2.radius;\n          _shadowUniforms2.shadowMapSize = _shadow2.mapSize;\n          _shadowUniforms2.shadowCameraNear = _shadow2.camera.near;\n          _shadowUniforms2.shadowCameraFar = _shadow2.camera.far;\n          state.pointShadow[pointLength] = _shadowUniforms2;\n          state.pointShadowMap[pointLength] = shadowMap;\n          state.pointShadowMatrix[pointLength] = light.shadow.matrix;\n          numPointShadows++;\n        }\n\n        state.point[pointLength] = _uniforms3;\n        pointLength++;\n      } else if (light.isHemisphereLight) {\n        var _uniforms4 = cache.get(light);\n\n        _uniforms4.skyColor.copy(light.color).multiplyScalar(intensity);\n\n        _uniforms4.groundColor.copy(light.groundColor).multiplyScalar(intensity);\n\n        state.hemi[hemiLength] = _uniforms4;\n        hemiLength++;\n      }\n    }\n\n    if (rectAreaLength > 0) {\n      if (capabilities.isWebGL2) {\n        // WebGL 2\n        state.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n        state.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n      } else {\n        // WebGL 1\n        if (extensions.has('OES_texture_float_linear') === true) {\n          state.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n          state.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n        } else if (extensions.has('OES_texture_half_float_linear') === true) {\n          state.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n          state.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n        } else {\n          console.error('THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.');\n        }\n      }\n    }\n\n    state.ambient[0] = r;\n    state.ambient[1] = g;\n    state.ambient[2] = b;\n    var hash = state.hash;\n\n    if (hash.directionalLength !== directionalLength || hash.pointLength !== pointLength || hash.spotLength !== spotLength || hash.rectAreaLength !== rectAreaLength || hash.hemiLength !== hemiLength || hash.numDirectionalShadows !== numDirectionalShadows || hash.numPointShadows !== numPointShadows || hash.numSpotShadows !== numSpotShadows) {\n      state.directional.length = directionalLength;\n      state.spot.length = spotLength;\n      state.rectArea.length = rectAreaLength;\n      state.point.length = pointLength;\n      state.hemi.length = hemiLength;\n      state.directionalShadow.length = numDirectionalShadows;\n      state.directionalShadowMap.length = numDirectionalShadows;\n      state.pointShadow.length = numPointShadows;\n      state.pointShadowMap.length = numPointShadows;\n      state.spotShadow.length = numSpotShadows;\n      state.spotShadowMap.length = numSpotShadows;\n      state.directionalShadowMatrix.length = numDirectionalShadows;\n      state.pointShadowMatrix.length = numPointShadows;\n      state.spotShadowMatrix.length = numSpotShadows;\n      hash.directionalLength = directionalLength;\n      hash.pointLength = pointLength;\n      hash.spotLength = spotLength;\n      hash.rectAreaLength = rectAreaLength;\n      hash.hemiLength = hemiLength;\n      hash.numDirectionalShadows = numDirectionalShadows;\n      hash.numPointShadows = numPointShadows;\n      hash.numSpotShadows = numSpotShadows;\n      state.version = nextVersion++;\n    }\n  }\n\n  function setupView(lights, camera) {\n    var directionalLength = 0;\n    var pointLength = 0;\n    var spotLength = 0;\n    var rectAreaLength = 0;\n    var hemiLength = 0;\n    var viewMatrix = camera.matrixWorldInverse;\n\n    for (var _i117 = 0, _l37 = lights.length; _i117 < _l37; _i117++) {\n      var light = lights[_i117];\n\n      if (light.isDirectionalLight) {\n        var uniforms = state.directional[directionalLength];\n        uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n        vector3.setFromMatrixPosition(light.target.matrixWorld);\n        uniforms.direction.sub(vector3);\n        uniforms.direction.transformDirection(viewMatrix);\n        directionalLength++;\n      } else if (light.isSpotLight) {\n        var _uniforms5 = state.spot[spotLength];\n\n        _uniforms5.position.setFromMatrixPosition(light.matrixWorld);\n\n        _uniforms5.position.applyMatrix4(viewMatrix);\n\n        _uniforms5.direction.setFromMatrixPosition(light.matrixWorld);\n\n        vector3.setFromMatrixPosition(light.target.matrixWorld);\n\n        _uniforms5.direction.sub(vector3);\n\n        _uniforms5.direction.transformDirection(viewMatrix);\n\n        spotLength++;\n      } else if (light.isRectAreaLight) {\n        var _uniforms6 = state.rectArea[rectAreaLength];\n\n        _uniforms6.position.setFromMatrixPosition(light.matrixWorld);\n\n        _uniforms6.position.applyMatrix4(viewMatrix); // extract local rotation of light to derive width/height half vectors\n\n\n        matrix42.identity();\n        matrix4.copy(light.matrixWorld);\n        matrix4.premultiply(viewMatrix);\n        matrix42.extractRotation(matrix4);\n\n        _uniforms6.halfWidth.set(light.width * 0.5, 0.0, 0.0);\n\n        _uniforms6.halfHeight.set(0.0, light.height * 0.5, 0.0);\n\n        _uniforms6.halfWidth.applyMatrix4(matrix42);\n\n        _uniforms6.halfHeight.applyMatrix4(matrix42);\n\n        rectAreaLength++;\n      } else if (light.isPointLight) {\n        var _uniforms7 = state.point[pointLength];\n\n        _uniforms7.position.setFromMatrixPosition(light.matrixWorld);\n\n        _uniforms7.position.applyMatrix4(viewMatrix);\n\n        pointLength++;\n      } else if (light.isHemisphereLight) {\n        var _uniforms8 = state.hemi[hemiLength];\n\n        _uniforms8.direction.setFromMatrixPosition(light.matrixWorld);\n\n        _uniforms8.direction.transformDirection(viewMatrix);\n\n        _uniforms8.direction.normalize();\n\n        hemiLength++;\n      }\n    }\n  }\n\n  return {\n    setup: setup,\n    setupView: setupView,\n    state: state\n  };\n}\n\nfunction WebGLRenderState(extensions, capabilities) {\n  var lights = new WebGLLights(extensions, capabilities);\n  var lightsArray = [];\n  var shadowsArray = [];\n\n  function init() {\n    lightsArray.length = 0;\n    shadowsArray.length = 0;\n  }\n\n  function pushLight(light) {\n    lightsArray.push(light);\n  }\n\n  function pushShadow(shadowLight) {\n    shadowsArray.push(shadowLight);\n  }\n\n  function setupLights() {\n    lights.setup(lightsArray);\n  }\n\n  function setupLightsView(camera) {\n    lights.setupView(lightsArray, camera);\n  }\n\n  var state = {\n    lightsArray: lightsArray,\n    shadowsArray: shadowsArray,\n    lights: lights\n  };\n  return {\n    init: init,\n    state: state,\n    setupLights: setupLights,\n    setupLightsView: setupLightsView,\n    pushLight: pushLight,\n    pushShadow: pushShadow\n  };\n}\n\nfunction WebGLRenderStates(extensions, capabilities) {\n  var renderStates = new WeakMap();\n\n  function get(scene) {\n    var renderCallDepth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var renderState;\n\n    if (renderStates.has(scene) === false) {\n      renderState = new WebGLRenderState(extensions, capabilities);\n      renderStates.set(scene, [renderState]);\n    } else {\n      if (renderCallDepth >= renderStates.get(scene).length) {\n        renderState = new WebGLRenderState(extensions, capabilities);\n        renderStates.get(scene).push(renderState);\n      } else {\n        renderState = renderStates.get(scene)[renderCallDepth];\n      }\n    }\n\n    return renderState;\n  }\n\n  function dispose() {\n    renderStates = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\n\nvar MeshDepthMaterial = /*#__PURE__*/function (_Material$3) {\n  _inherits(MeshDepthMaterial, _Material$3);\n\n  var _super28 = _createSuper(MeshDepthMaterial);\n\n  function MeshDepthMaterial(parameters) {\n    var _this31;\n\n    _classCallCheck(this, MeshDepthMaterial);\n\n    _this31 = _super28.call(this);\n    _this31.type = 'MeshDepthMaterial';\n    _this31.depthPacking = BasicDepthPacking;\n    _this31.map = null;\n    _this31.alphaMap = null;\n    _this31.displacementMap = null;\n    _this31.displacementScale = 1;\n    _this31.displacementBias = 0;\n    _this31.wireframe = false;\n    _this31.wireframeLinewidth = 1;\n    _this31.fog = false;\n\n    _this31.setValues(parameters);\n\n    return _this31;\n  }\n\n  _createClass(MeshDepthMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshDepthMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.depthPacking = source.depthPacking;\n      this.map = source.map;\n      this.alphaMap = source.alphaMap;\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      return this;\n    }\n  }]);\n\n  return MeshDepthMaterial;\n}(Material$1);\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nvar MeshDistanceMaterial = /*#__PURE__*/function (_Material$4) {\n  _inherits(MeshDistanceMaterial, _Material$4);\n\n  var _super29 = _createSuper(MeshDistanceMaterial);\n\n  function MeshDistanceMaterial(parameters) {\n    var _this32;\n\n    _classCallCheck(this, MeshDistanceMaterial);\n\n    _this32 = _super29.call(this);\n    _this32.type = 'MeshDistanceMaterial';\n    _this32.referencePosition = new Vector3();\n    _this32.nearDistance = 1;\n    _this32.farDistance = 1000;\n    _this32.map = null;\n    _this32.alphaMap = null;\n    _this32.displacementMap = null;\n    _this32.displacementScale = 1;\n    _this32.displacementBias = 0;\n    _this32.fog = false;\n\n    _this32.setValues(parameters);\n\n    return _this32;\n  }\n\n  _createClass(MeshDistanceMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshDistanceMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.referencePosition.copy(source.referencePosition);\n      this.nearDistance = source.nearDistance;\n      this.farDistance = source.farDistance;\n      this.map = source.map;\n      this.alphaMap = source.alphaMap;\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      return this;\n    }\n  }]);\n\n  return MeshDistanceMaterial;\n}(Material$1);\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean * HALF_SAMPLE_RATE;\\n\\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nfunction WebGLShadowMap(_renderer, _objects, _capabilities) {\n  var _frustum = new Frustum();\n\n  var _shadowMapSize = new Vector2(),\n      _viewportSize = new Vector2(),\n      _viewport = new Vector4(),\n      _depthMaterial = new MeshDepthMaterial({\n    depthPacking: RGBADepthPacking\n  }),\n      _distanceMaterial = new MeshDistanceMaterial(),\n      _materialCache = {},\n      _maxTextureSize = _capabilities.maxTextureSize;\n\n  var shadowSide = {\n    0: BackSide,\n    1: FrontSide,\n    2: DoubleSide\n  };\n  var shadowMaterialVertical = new ShaderMaterial({\n    defines: {\n      SAMPLE_RATE: 2.0 / 8.0,\n      HALF_SAMPLE_RATE: 1.0 / 8.0\n    },\n    uniforms: {\n      shadow_pass: {\n        value: null\n      },\n      resolution: {\n        value: new Vector2()\n      },\n      radius: {\n        value: 4.0\n      }\n    },\n    vertexShader: vsm_vert,\n    fragmentShader: vsm_frag\n  });\n  var shadowMaterialHorizontal = shadowMaterialVertical.clone();\n  shadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n  var fullScreenTri = new BufferGeometry();\n  fullScreenTri.setAttribute('position', new BufferAttribute(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3));\n  var fullScreenMesh = new Mesh(fullScreenTri, shadowMaterialVertical);\n  var scope = this;\n  this.enabled = false;\n  this.autoUpdate = true;\n  this.needsUpdate = false;\n  this.type = PCFShadowMap;\n\n  this.render = function (lights, scene, camera) {\n    if (scope.enabled === false) return;\n    if (scope.autoUpdate === false && scope.needsUpdate === false) return;\n    if (lights.length === 0) return;\n\n    var currentRenderTarget = _renderer.getRenderTarget();\n\n    var activeCubeFace = _renderer.getActiveCubeFace();\n\n    var activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n    var _state = _renderer.state; // Set GL state for depth map.\n\n    _state.setBlending(NoBlending);\n\n    _state.buffers.color.setClear(1, 1, 1, 1);\n\n    _state.buffers.depth.setTest(true);\n\n    _state.setScissorTest(false); // render depth map\n\n\n    for (var _i118 = 0, il = lights.length; _i118 < il; _i118++) {\n      var light = lights[_i118];\n      var shadow = light.shadow;\n\n      if (shadow === undefined) {\n        console.warn('THREE.WebGLShadowMap:', light, 'has no shadow.');\n        continue;\n      }\n\n      if (shadow.autoUpdate === false && shadow.needsUpdate === false) continue;\n\n      _shadowMapSize.copy(shadow.mapSize);\n\n      var shadowFrameExtents = shadow.getFrameExtents();\n\n      _shadowMapSize.multiply(shadowFrameExtents);\n\n      _viewportSize.copy(shadow.mapSize);\n\n      if (_shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize) {\n        if (_shadowMapSize.x > _maxTextureSize) {\n          _viewportSize.x = Math.floor(_maxTextureSize / shadowFrameExtents.x);\n          _shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n          shadow.mapSize.x = _viewportSize.x;\n        }\n\n        if (_shadowMapSize.y > _maxTextureSize) {\n          _viewportSize.y = Math.floor(_maxTextureSize / shadowFrameExtents.y);\n          _shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n          shadow.mapSize.y = _viewportSize.y;\n        }\n      }\n\n      if (shadow.map === null && !shadow.isPointLightShadow && this.type === VSMShadowMap) {\n        var pars = {\n          minFilter: LinearFilter,\n          magFilter: LinearFilter,\n          format: RGBAFormat\n        };\n        shadow.map = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, pars);\n        shadow.map.texture.name = light.name + '.shadowMap';\n        shadow.mapPass = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, pars);\n        shadow.camera.updateProjectionMatrix();\n      }\n\n      if (shadow.map === null) {\n        var _pars = {\n          minFilter: NearestFilter,\n          magFilter: NearestFilter,\n          format: RGBAFormat\n        };\n        shadow.map = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, _pars);\n        shadow.map.texture.name = light.name + '.shadowMap';\n        shadow.camera.updateProjectionMatrix();\n      }\n\n      _renderer.setRenderTarget(shadow.map);\n\n      _renderer.clear();\n\n      var viewportCount = shadow.getViewportCount();\n\n      for (var vp = 0; vp < viewportCount; vp++) {\n        var viewport = shadow.getViewport(vp);\n\n        _viewport.set(_viewportSize.x * viewport.x, _viewportSize.y * viewport.y, _viewportSize.x * viewport.z, _viewportSize.y * viewport.w);\n\n        _state.viewport(_viewport);\n\n        shadow.updateMatrices(light, vp);\n        _frustum = shadow.getFrustum();\n        renderObject(scene, camera, shadow.camera, light, this.type);\n      } // do blur pass for VSM\n\n\n      if (!shadow.isPointLightShadow && this.type === VSMShadowMap) {\n        VSMPass(shadow, camera);\n      }\n\n      shadow.needsUpdate = false;\n    }\n\n    scope.needsUpdate = false;\n\n    _renderer.setRenderTarget(currentRenderTarget, activeCubeFace, activeMipmapLevel);\n  };\n\n  function VSMPass(shadow, camera) {\n    var geometry = _objects.update(fullScreenMesh); // vertical pass\n\n\n    shadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n    shadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n    shadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\n    _renderer.setRenderTarget(shadow.mapPass);\n\n    _renderer.clear();\n\n    _renderer.renderBufferDirect(camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null); // horizontal pass\n\n\n    shadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n    shadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n    shadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\n    _renderer.setRenderTarget(shadow.map);\n\n    _renderer.clear();\n\n    _renderer.renderBufferDirect(camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null);\n  }\n\n  function getDepthMaterial(object, geometry, material, light, shadowCameraNear, shadowCameraFar, type) {\n    var result = null;\n    var customMaterial = light.isPointLight === true ? object.customDistanceMaterial : object.customDepthMaterial;\n\n    if (customMaterial !== undefined) {\n      result = customMaterial;\n    } else {\n      result = light.isPointLight === true ? _distanceMaterial : _depthMaterial;\n    }\n\n    if (_renderer.localClippingEnabled && material.clipShadows === true && material.clippingPlanes.length !== 0) {\n      // in this case we need a unique material instance reflecting the\n      // appropriate state\n      var keyA = result.uuid,\n          keyB = material.uuid;\n      var materialsForVariant = _materialCache[keyA];\n\n      if (materialsForVariant === undefined) {\n        materialsForVariant = {};\n        _materialCache[keyA] = materialsForVariant;\n      }\n\n      var cachedMaterial = materialsForVariant[keyB];\n\n      if (cachedMaterial === undefined) {\n        cachedMaterial = result.clone();\n        materialsForVariant[keyB] = cachedMaterial;\n      }\n\n      result = cachedMaterial;\n    }\n\n    result.visible = material.visible;\n    result.wireframe = material.wireframe;\n\n    if (type === VSMShadowMap) {\n      result.side = material.shadowSide !== null ? material.shadowSide : material.side;\n    } else {\n      result.side = material.shadowSide !== null ? material.shadowSide : shadowSide[material.side];\n    }\n\n    result.clipShadows = material.clipShadows;\n    result.clippingPlanes = material.clippingPlanes;\n    result.clipIntersection = material.clipIntersection;\n    result.wireframeLinewidth = material.wireframeLinewidth;\n    result.linewidth = material.linewidth;\n\n    if (light.isPointLight === true && result.isMeshDistanceMaterial === true) {\n      result.referencePosition.setFromMatrixPosition(light.matrixWorld);\n      result.nearDistance = shadowCameraNear;\n      result.farDistance = shadowCameraFar;\n    }\n\n    return result;\n  }\n\n  function renderObject(object, camera, shadowCamera, light, type) {\n    if (object.visible === false) return;\n    var visible = object.layers.test(camera.layers);\n\n    if (visible && (object.isMesh || object.isLine || object.isPoints)) {\n      if ((object.castShadow || object.receiveShadow && type === VSMShadowMap) && (!object.frustumCulled || _frustum.intersectsObject(object))) {\n        object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse, object.matrixWorld);\n\n        var geometry = _objects.update(object);\n\n        var material = object.material;\n\n        if (Array.isArray(material)) {\n          var groups = geometry.groups;\n\n          for (var k = 0, kl = groups.length; k < kl; k++) {\n            var group = groups[k];\n            var groupMaterial = material[group.materialIndex];\n\n            if (groupMaterial && groupMaterial.visible) {\n              var depthMaterial = getDepthMaterial(object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type);\n\n              _renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, group);\n            }\n          }\n        } else if (material.visible) {\n          var _depthMaterial2 = getDepthMaterial(object, geometry, material, light, shadowCamera.near, shadowCamera.far, type);\n\n          _renderer.renderBufferDirect(shadowCamera, null, geometry, _depthMaterial2, object, null);\n        }\n      }\n    }\n\n    var children = object.children;\n\n    for (var _i119 = 0, _l38 = children.length; _i119 < _l38; _i119++) {\n      renderObject(children[_i119], camera, shadowCamera, light, type);\n    }\n  }\n}\n\nfunction WebGLState(gl, extensions, capabilities) {\n  var _equationToGL, _factorToGL;\n\n  var isWebGL2 = capabilities.isWebGL2;\n\n  function ColorBuffer() {\n    var locked = false;\n    var color = new Vector4();\n    var currentColorMask = null;\n    var currentColorClear = new Vector4(0, 0, 0, 0);\n    return {\n      setMask: function setMask(colorMask) {\n        if (currentColorMask !== colorMask && !locked) {\n          gl.colorMask(colorMask, colorMask, colorMask, colorMask);\n          currentColorMask = colorMask;\n        }\n      },\n      setLocked: function setLocked(lock) {\n        locked = lock;\n      },\n      setClear: function setClear(r, g, b, a, premultipliedAlpha) {\n        if (premultipliedAlpha === true) {\n          r *= a;\n          g *= a;\n          b *= a;\n        }\n\n        color.set(r, g, b, a);\n\n        if (currentColorClear.equals(color) === false) {\n          gl.clearColor(r, g, b, a);\n          currentColorClear.copy(color);\n        }\n      },\n      reset: function reset() {\n        locked = false;\n        currentColorMask = null;\n        currentColorClear.set(-1, 0, 0, 0); // set to invalid state\n      }\n    };\n  }\n\n  function DepthBuffer() {\n    var locked = false;\n    var currentDepthMask = null;\n    var currentDepthFunc = null;\n    var currentDepthClear = null;\n    return {\n      setTest: function setTest(depthTest) {\n        if (depthTest) {\n          enable(2929);\n        } else {\n          disable(2929);\n        }\n      },\n      setMask: function setMask(depthMask) {\n        if (currentDepthMask !== depthMask && !locked) {\n          gl.depthMask(depthMask);\n          currentDepthMask = depthMask;\n        }\n      },\n      setFunc: function setFunc(depthFunc) {\n        if (currentDepthFunc !== depthFunc) {\n          if (depthFunc) {\n            switch (depthFunc) {\n              case NeverDepth:\n                gl.depthFunc(512);\n                break;\n\n              case AlwaysDepth:\n                gl.depthFunc(519);\n                break;\n\n              case LessDepth:\n                gl.depthFunc(513);\n                break;\n\n              case LessEqualDepth:\n                gl.depthFunc(515);\n                break;\n\n              case EqualDepth:\n                gl.depthFunc(514);\n                break;\n\n              case GreaterEqualDepth:\n                gl.depthFunc(518);\n                break;\n\n              case GreaterDepth:\n                gl.depthFunc(516);\n                break;\n\n              case NotEqualDepth:\n                gl.depthFunc(517);\n                break;\n\n              default:\n                gl.depthFunc(515);\n            }\n          } else {\n            gl.depthFunc(515);\n          }\n\n          currentDepthFunc = depthFunc;\n        }\n      },\n      setLocked: function setLocked(lock) {\n        locked = lock;\n      },\n      setClear: function setClear(depth) {\n        if (currentDepthClear !== depth) {\n          gl.clearDepth(depth);\n          currentDepthClear = depth;\n        }\n      },\n      reset: function reset() {\n        locked = false;\n        currentDepthMask = null;\n        currentDepthFunc = null;\n        currentDepthClear = null;\n      }\n    };\n  }\n\n  function StencilBuffer() {\n    var locked = false;\n    var currentStencilMask = null;\n    var currentStencilFunc = null;\n    var currentStencilRef = null;\n    var currentStencilFuncMask = null;\n    var currentStencilFail = null;\n    var currentStencilZFail = null;\n    var currentStencilZPass = null;\n    var currentStencilClear = null;\n    return {\n      setTest: function setTest(stencilTest) {\n        if (!locked) {\n          if (stencilTest) {\n            enable(2960);\n          } else {\n            disable(2960);\n          }\n        }\n      },\n      setMask: function setMask(stencilMask) {\n        if (currentStencilMask !== stencilMask && !locked) {\n          gl.stencilMask(stencilMask);\n          currentStencilMask = stencilMask;\n        }\n      },\n      setFunc: function setFunc(stencilFunc, stencilRef, stencilMask) {\n        if (currentStencilFunc !== stencilFunc || currentStencilRef !== stencilRef || currentStencilFuncMask !== stencilMask) {\n          gl.stencilFunc(stencilFunc, stencilRef, stencilMask);\n          currentStencilFunc = stencilFunc;\n          currentStencilRef = stencilRef;\n          currentStencilFuncMask = stencilMask;\n        }\n      },\n      setOp: function setOp(stencilFail, stencilZFail, stencilZPass) {\n        if (currentStencilFail !== stencilFail || currentStencilZFail !== stencilZFail || currentStencilZPass !== stencilZPass) {\n          gl.stencilOp(stencilFail, stencilZFail, stencilZPass);\n          currentStencilFail = stencilFail;\n          currentStencilZFail = stencilZFail;\n          currentStencilZPass = stencilZPass;\n        }\n      },\n      setLocked: function setLocked(lock) {\n        locked = lock;\n      },\n      setClear: function setClear(stencil) {\n        if (currentStencilClear !== stencil) {\n          gl.clearStencil(stencil);\n          currentStencilClear = stencil;\n        }\n      },\n      reset: function reset() {\n        locked = false;\n        currentStencilMask = null;\n        currentStencilFunc = null;\n        currentStencilRef = null;\n        currentStencilFuncMask = null;\n        currentStencilFail = null;\n        currentStencilZFail = null;\n        currentStencilZPass = null;\n        currentStencilClear = null;\n      }\n    };\n  } //\n\n\n  var colorBuffer = new ColorBuffer();\n  var depthBuffer = new DepthBuffer();\n  var stencilBuffer = new StencilBuffer();\n  var enabledCapabilities = {};\n  var xrFramebuffer = null;\n  var currentBoundFramebuffers = {};\n  var currentProgram = null;\n  var currentBlendingEnabled = false;\n  var currentBlending = null;\n  var currentBlendEquation = null;\n  var currentBlendSrc = null;\n  var currentBlendDst = null;\n  var currentBlendEquationAlpha = null;\n  var currentBlendSrcAlpha = null;\n  var currentBlendDstAlpha = null;\n  var currentPremultipledAlpha = false;\n  var currentFlipSided = null;\n  var currentCullFace = null;\n  var currentLineWidth = null;\n  var currentPolygonOffsetFactor = null;\n  var currentPolygonOffsetUnits = null;\n  var maxTextures = gl.getParameter(35661);\n  var lineWidthAvailable = false;\n  var version = 0;\n  var glVersion = gl.getParameter(7938);\n\n  if (glVersion.indexOf('WebGL') !== -1) {\n    version = parseFloat(/^WebGL (\\d)/.exec(glVersion)[1]);\n    lineWidthAvailable = version >= 1.0;\n  } else if (glVersion.indexOf('OpenGL ES') !== -1) {\n    version = parseFloat(/^OpenGL ES (\\d)/.exec(glVersion)[1]);\n    lineWidthAvailable = version >= 2.0;\n  }\n\n  var currentTextureSlot = null;\n  var currentBoundTextures = {};\n  var scissorParam = gl.getParameter(3088);\n  var viewportParam = gl.getParameter(2978);\n  var currentScissor = new Vector4().fromArray(scissorParam);\n  var currentViewport = new Vector4().fromArray(viewportParam);\n\n  function createTexture(type, target, count) {\n    var data = new Uint8Array(4); // 4 is required to match default unpack alignment of 4.\n\n    var texture = gl.createTexture();\n    gl.bindTexture(type, texture);\n    gl.texParameteri(type, 10241, 9728);\n    gl.texParameteri(type, 10240, 9728);\n\n    for (var _i120 = 0; _i120 < count; _i120++) {\n      gl.texImage2D(target + _i120, 0, 6408, 1, 1, 0, 6408, 5121, data);\n    }\n\n    return texture;\n  }\n\n  var emptyTextures = {};\n  emptyTextures[3553] = createTexture(3553, 3553, 1);\n  emptyTextures[34067] = createTexture(34067, 34069, 6); // init\n\n  colorBuffer.setClear(0, 0, 0, 1);\n  depthBuffer.setClear(1);\n  stencilBuffer.setClear(0);\n  enable(2929);\n  depthBuffer.setFunc(LessEqualDepth);\n  setFlipSided(false);\n  setCullFace(CullFaceBack);\n  enable(2884);\n  setBlending(NoBlending); //\n\n  function enable(id) {\n    if (enabledCapabilities[id] !== true) {\n      gl.enable(id);\n      enabledCapabilities[id] = true;\n    }\n  }\n\n  function disable(id) {\n    if (enabledCapabilities[id] !== false) {\n      gl.disable(id);\n      enabledCapabilities[id] = false;\n    }\n  }\n\n  function bindXRFramebuffer(framebuffer) {\n    if (framebuffer !== xrFramebuffer) {\n      gl.bindFramebuffer(36160, framebuffer);\n      xrFramebuffer = framebuffer;\n    }\n  }\n\n  function bindFramebuffer(target, framebuffer) {\n    if (framebuffer === null && xrFramebuffer !== null) framebuffer = xrFramebuffer; // use active XR framebuffer if available\n\n    if (currentBoundFramebuffers[target] !== framebuffer) {\n      gl.bindFramebuffer(target, framebuffer);\n      currentBoundFramebuffers[target] = framebuffer;\n\n      if (isWebGL2) {\n        // 36009 is equivalent to 36160\n        if (target === 36009) {\n          currentBoundFramebuffers[36160] = framebuffer;\n        }\n\n        if (target === 36160) {\n          currentBoundFramebuffers[36009] = framebuffer;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  function useProgram(program) {\n    if (currentProgram !== program) {\n      gl.useProgram(program);\n      currentProgram = program;\n      return true;\n    }\n\n    return false;\n  }\n\n  var equationToGL = (_equationToGL = {}, _defineProperty(_equationToGL, AddEquation, 32774), _defineProperty(_equationToGL, SubtractEquation, 32778), _defineProperty(_equationToGL, ReverseSubtractEquation, 32779), _equationToGL);\n\n  if (isWebGL2) {\n    equationToGL[MinEquation] = 32775;\n    equationToGL[MaxEquation] = 32776;\n  } else {\n    var extension = extensions.get('EXT_blend_minmax');\n\n    if (extension !== null) {\n      equationToGL[MinEquation] = extension.MIN_EXT;\n      equationToGL[MaxEquation] = extension.MAX_EXT;\n    }\n  }\n\n  var factorToGL = (_factorToGL = {}, _defineProperty(_factorToGL, ZeroFactor, 0), _defineProperty(_factorToGL, OneFactor, 1), _defineProperty(_factorToGL, SrcColorFactor, 768), _defineProperty(_factorToGL, SrcAlphaFactor, 770), _defineProperty(_factorToGL, SrcAlphaSaturateFactor, 776), _defineProperty(_factorToGL, DstColorFactor, 774), _defineProperty(_factorToGL, DstAlphaFactor, 772), _defineProperty(_factorToGL, OneMinusSrcColorFactor, 769), _defineProperty(_factorToGL, OneMinusSrcAlphaFactor, 771), _defineProperty(_factorToGL, OneMinusDstColorFactor, 775), _defineProperty(_factorToGL, OneMinusDstAlphaFactor, 773), _factorToGL);\n\n  function setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha) {\n    if (blending === NoBlending) {\n      if (currentBlendingEnabled === true) {\n        disable(3042);\n        currentBlendingEnabled = false;\n      }\n\n      return;\n    }\n\n    if (currentBlendingEnabled === false) {\n      enable(3042);\n      currentBlendingEnabled = true;\n    }\n\n    if (blending !== CustomBlending) {\n      if (blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha) {\n        if (currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation) {\n          gl.blendEquation(32774);\n          currentBlendEquation = AddEquation;\n          currentBlendEquationAlpha = AddEquation;\n        }\n\n        if (premultipliedAlpha) {\n          switch (blending) {\n            case NormalBlending:\n              gl.blendFuncSeparate(1, 771, 1, 771);\n              break;\n\n            case AdditiveBlending:\n              gl.blendFunc(1, 1);\n              break;\n\n            case SubtractiveBlending:\n              gl.blendFuncSeparate(0, 0, 769, 771);\n              break;\n\n            case MultiplyBlending:\n              gl.blendFuncSeparate(0, 768, 0, 770);\n              break;\n\n            default:\n              console.error('THREE.WebGLState: Invalid blending: ', blending);\n              break;\n          }\n        } else {\n          switch (blending) {\n            case NormalBlending:\n              gl.blendFuncSeparate(770, 771, 1, 771);\n              break;\n\n            case AdditiveBlending:\n              gl.blendFunc(770, 1);\n              break;\n\n            case SubtractiveBlending:\n              gl.blendFunc(0, 769);\n              break;\n\n            case MultiplyBlending:\n              gl.blendFunc(0, 768);\n              break;\n\n            default:\n              console.error('THREE.WebGLState: Invalid blending: ', blending);\n              break;\n          }\n        }\n\n        currentBlendSrc = null;\n        currentBlendDst = null;\n        currentBlendSrcAlpha = null;\n        currentBlendDstAlpha = null;\n        currentBlending = blending;\n        currentPremultipledAlpha = premultipliedAlpha;\n      }\n\n      return;\n    } // custom blending\n\n\n    blendEquationAlpha = blendEquationAlpha || blendEquation;\n    blendSrcAlpha = blendSrcAlpha || blendSrc;\n    blendDstAlpha = blendDstAlpha || blendDst;\n\n    if (blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha) {\n      gl.blendEquationSeparate(equationToGL[blendEquation], equationToGL[blendEquationAlpha]);\n      currentBlendEquation = blendEquation;\n      currentBlendEquationAlpha = blendEquationAlpha;\n    }\n\n    if (blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha) {\n      gl.blendFuncSeparate(factorToGL[blendSrc], factorToGL[blendDst], factorToGL[blendSrcAlpha], factorToGL[blendDstAlpha]);\n      currentBlendSrc = blendSrc;\n      currentBlendDst = blendDst;\n      currentBlendSrcAlpha = blendSrcAlpha;\n      currentBlendDstAlpha = blendDstAlpha;\n    }\n\n    currentBlending = blending;\n    currentPremultipledAlpha = null;\n  }\n\n  function setMaterial(material, frontFaceCW) {\n    material.side === DoubleSide ? disable(2884) : enable(2884);\n    var flipSided = material.side === BackSide;\n    if (frontFaceCW) flipSided = !flipSided;\n    setFlipSided(flipSided);\n    material.blending === NormalBlending && material.transparent === false ? setBlending(NoBlending) : setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha);\n    depthBuffer.setFunc(material.depthFunc);\n    depthBuffer.setTest(material.depthTest);\n    depthBuffer.setMask(material.depthWrite);\n    colorBuffer.setMask(material.colorWrite);\n    var stencilWrite = material.stencilWrite;\n    stencilBuffer.setTest(stencilWrite);\n\n    if (stencilWrite) {\n      stencilBuffer.setMask(material.stencilWriteMask);\n      stencilBuffer.setFunc(material.stencilFunc, material.stencilRef, material.stencilFuncMask);\n      stencilBuffer.setOp(material.stencilFail, material.stencilZFail, material.stencilZPass);\n    }\n\n    setPolygonOffset(material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits);\n    material.alphaToCoverage === true ? enable(32926) : disable(32926);\n  } //\n\n\n  function setFlipSided(flipSided) {\n    if (currentFlipSided !== flipSided) {\n      if (flipSided) {\n        gl.frontFace(2304);\n      } else {\n        gl.frontFace(2305);\n      }\n\n      currentFlipSided = flipSided;\n    }\n  }\n\n  function setCullFace(cullFace) {\n    if (cullFace !== CullFaceNone) {\n      enable(2884);\n\n      if (cullFace !== currentCullFace) {\n        if (cullFace === CullFaceBack) {\n          gl.cullFace(1029);\n        } else if (cullFace === CullFaceFront) {\n          gl.cullFace(1028);\n        } else {\n          gl.cullFace(1032);\n        }\n      }\n    } else {\n      disable(2884);\n    }\n\n    currentCullFace = cullFace;\n  }\n\n  function setLineWidth(width) {\n    if (width !== currentLineWidth) {\n      if (lineWidthAvailable) gl.lineWidth(width);\n      currentLineWidth = width;\n    }\n  }\n\n  function setPolygonOffset(polygonOffset, factor, units) {\n    if (polygonOffset) {\n      enable(32823);\n\n      if (currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units) {\n        gl.polygonOffset(factor, units);\n        currentPolygonOffsetFactor = factor;\n        currentPolygonOffsetUnits = units;\n      }\n    } else {\n      disable(32823);\n    }\n  }\n\n  function setScissorTest(scissorTest) {\n    if (scissorTest) {\n      enable(3089);\n    } else {\n      disable(3089);\n    }\n  } // texture\n\n\n  function activeTexture(webglSlot) {\n    if (webglSlot === undefined) webglSlot = 33984 + maxTextures - 1;\n\n    if (currentTextureSlot !== webglSlot) {\n      gl.activeTexture(webglSlot);\n      currentTextureSlot = webglSlot;\n    }\n  }\n\n  function bindTexture(webglType, webglTexture) {\n    if (currentTextureSlot === null) {\n      activeTexture();\n    }\n\n    var boundTexture = currentBoundTextures[currentTextureSlot];\n\n    if (boundTexture === undefined) {\n      boundTexture = {\n        type: undefined,\n        texture: undefined\n      };\n      currentBoundTextures[currentTextureSlot] = boundTexture;\n    }\n\n    if (boundTexture.type !== webglType || boundTexture.texture !== webglTexture) {\n      gl.bindTexture(webglType, webglTexture || emptyTextures[webglType]);\n      boundTexture.type = webglType;\n      boundTexture.texture = webglTexture;\n    }\n  }\n\n  function unbindTexture() {\n    var boundTexture = currentBoundTextures[currentTextureSlot];\n\n    if (boundTexture !== undefined && boundTexture.type !== undefined) {\n      gl.bindTexture(boundTexture.type, null);\n      boundTexture.type = undefined;\n      boundTexture.texture = undefined;\n    }\n  }\n\n  function compressedTexImage2D() {\n    try {\n      gl.compressedTexImage2D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  }\n\n  function texImage2D() {\n    try {\n      gl.texImage2D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  }\n\n  function texImage3D() {\n    try {\n      gl.texImage3D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  } //\n\n\n  function scissor(scissor) {\n    if (currentScissor.equals(scissor) === false) {\n      gl.scissor(scissor.x, scissor.y, scissor.z, scissor.w);\n      currentScissor.copy(scissor);\n    }\n  }\n\n  function viewport(viewport) {\n    if (currentViewport.equals(viewport) === false) {\n      gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n      currentViewport.copy(viewport);\n    }\n  } //\n\n\n  function reset() {\n    // reset state\n    gl.disable(3042);\n    gl.disable(2884);\n    gl.disable(2929);\n    gl.disable(32823);\n    gl.disable(3089);\n    gl.disable(2960);\n    gl.disable(32926);\n    gl.blendEquation(32774);\n    gl.blendFunc(1, 0);\n    gl.blendFuncSeparate(1, 0, 1, 0);\n    gl.colorMask(true, true, true, true);\n    gl.clearColor(0, 0, 0, 0);\n    gl.depthMask(true);\n    gl.depthFunc(513);\n    gl.clearDepth(1);\n    gl.stencilMask(0xffffffff);\n    gl.stencilFunc(519, 0, 0xffffffff);\n    gl.stencilOp(7680, 7680, 7680);\n    gl.clearStencil(0);\n    gl.cullFace(1029);\n    gl.frontFace(2305);\n    gl.polygonOffset(0, 0);\n    gl.activeTexture(33984);\n    gl.bindFramebuffer(36160, null);\n\n    if (isWebGL2 === true) {\n      gl.bindFramebuffer(36009, null);\n      gl.bindFramebuffer(36008, null);\n    }\n\n    gl.useProgram(null);\n    gl.lineWidth(1);\n    gl.scissor(0, 0, gl.canvas.width, gl.canvas.height);\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height); // reset internals\n\n    enabledCapabilities = {};\n    currentTextureSlot = null;\n    currentBoundTextures = {};\n    xrFramebuffer = null;\n    currentBoundFramebuffers = {};\n    currentProgram = null;\n    currentBlendingEnabled = false;\n    currentBlending = null;\n    currentBlendEquation = null;\n    currentBlendSrc = null;\n    currentBlendDst = null;\n    currentBlendEquationAlpha = null;\n    currentBlendSrcAlpha = null;\n    currentBlendDstAlpha = null;\n    currentPremultipledAlpha = false;\n    currentFlipSided = null;\n    currentCullFace = null;\n    currentLineWidth = null;\n    currentPolygonOffsetFactor = null;\n    currentPolygonOffsetUnits = null;\n    currentScissor.set(0, 0, gl.canvas.width, gl.canvas.height);\n    currentViewport.set(0, 0, gl.canvas.width, gl.canvas.height);\n    colorBuffer.reset();\n    depthBuffer.reset();\n    stencilBuffer.reset();\n  }\n\n  return {\n    buffers: {\n      color: colorBuffer,\n      depth: depthBuffer,\n      stencil: stencilBuffer\n    },\n    enable: enable,\n    disable: disable,\n    bindFramebuffer: bindFramebuffer,\n    bindXRFramebuffer: bindXRFramebuffer,\n    useProgram: useProgram,\n    setBlending: setBlending,\n    setMaterial: setMaterial,\n    setFlipSided: setFlipSided,\n    setCullFace: setCullFace,\n    setLineWidth: setLineWidth,\n    setPolygonOffset: setPolygonOffset,\n    setScissorTest: setScissorTest,\n    activeTexture: activeTexture,\n    bindTexture: bindTexture,\n    unbindTexture: unbindTexture,\n    compressedTexImage2D: compressedTexImage2D,\n    texImage2D: texImage2D,\n    texImage3D: texImage3D,\n    scissor: scissor,\n    viewport: viewport,\n    reset: reset\n  };\n}\n\nfunction WebGLTextures(_gl, extensions, state, properties, capabilities, utils, info) {\n  var _wrappingToGL, _filterToGL;\n\n  var isWebGL2 = capabilities.isWebGL2;\n  var maxTextures = capabilities.maxTextures;\n  var maxCubemapSize = capabilities.maxCubemapSize;\n  var maxTextureSize = capabilities.maxTextureSize;\n  var maxSamples = capabilities.maxSamples;\n\n  var _videoTextures = new WeakMap();\n\n  var _canvas; // cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n  // also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n  // Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\n  var useOffscreenCanvas = false;\n\n  try {\n    useOffscreenCanvas = typeof OffscreenCanvas !== 'undefined' && new OffscreenCanvas(1, 1).getContext('2d') !== null;\n  } catch (err) {// Ignore any errors\n  }\n\n  function createCanvas(width, height) {\n    // Use OffscreenCanvas when available. Specially needed in web workers\n    return useOffscreenCanvas ? new OffscreenCanvas(width, height) : document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n  }\n\n  function resizeImage(image, needsPowerOfTwo, needsNewCanvas, maxSize) {\n    var scale = 1; // handle case if texture exceeds max size\n\n    if (image.width > maxSize || image.height > maxSize) {\n      scale = maxSize / Math.max(image.width, image.height);\n    } // only perform resize if necessary\n\n\n    if (scale < 1 || needsPowerOfTwo === true) {\n      // only perform resize for certain image types\n      if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n        var floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n        var width = floor(scale * image.width);\n        var height = floor(scale * image.height);\n        if (_canvas === undefined) _canvas = createCanvas(width, height); // cube textures can't reuse the same canvas\n\n        var canvas = needsNewCanvas ? createCanvas(width, height) : _canvas;\n        canvas.width = width;\n        canvas.height = height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, width, height);\n        console.warn('THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').');\n        return canvas;\n      } else {\n        if ('data' in image) {\n          console.warn('THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').');\n        }\n\n        return image;\n      }\n    }\n\n    return image;\n  }\n\n  function isPowerOfTwo$1(image) {\n    return isPowerOfTwo(image.width) && isPowerOfTwo(image.height);\n  }\n\n  function textureNeedsPowerOfTwo(texture) {\n    if (isWebGL2) return false;\n    return texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping || texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n  }\n\n  function textureNeedsGenerateMipmaps(texture, supportsMips) {\n    return texture.generateMipmaps && supportsMips && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n  }\n\n  function generateMipmap(target, texture, width, height) {\n    var depth = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    _gl.generateMipmap(target);\n\n    var textureProperties = properties.get(texture);\n    textureProperties.__maxMipLevel = Math.log2(Math.max(width, height, depth));\n  }\n\n  function getInternalFormat(internalFormatName, glFormat, glType) {\n    if (isWebGL2 === false) return glFormat;\n\n    if (internalFormatName !== null) {\n      if (_gl[internalFormatName] !== undefined) return _gl[internalFormatName];\n      console.warn('THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'');\n    }\n\n    var internalFormat = glFormat;\n\n    if (glFormat === 6403) {\n      if (glType === 5126) internalFormat = 33326;\n      if (glType === 5131) internalFormat = 33325;\n      if (glType === 5121) internalFormat = 33321;\n    }\n\n    if (glFormat === 6407) {\n      if (glType === 5126) internalFormat = 34837;\n      if (glType === 5131) internalFormat = 34843;\n      if (glType === 5121) internalFormat = 32849;\n    }\n\n    if (glFormat === 6408) {\n      if (glType === 5126) internalFormat = 34836;\n      if (glType === 5131) internalFormat = 34842;\n      if (glType === 5121) internalFormat = 32856;\n    }\n\n    if (internalFormat === 33325 || internalFormat === 33326 || internalFormat === 34842 || internalFormat === 34836) {\n      extensions.get('EXT_color_buffer_float');\n    }\n\n    return internalFormat;\n  } // Fallback filters for non-power-of-2 textures\n\n\n  function filterFallback(f) {\n    if (f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter) {\n      return 9728;\n    }\n\n    return 9729;\n  } //\n\n\n  function onTextureDispose(event) {\n    var texture = event.target;\n    texture.removeEventListener('dispose', onTextureDispose);\n    deallocateTexture(texture);\n\n    if (texture.isVideoTexture) {\n      _videoTextures.delete(texture);\n    }\n\n    info.memory.textures--;\n  }\n\n  function onRenderTargetDispose(event) {\n    var renderTarget = event.target;\n    renderTarget.removeEventListener('dispose', onRenderTargetDispose);\n    deallocateRenderTarget(renderTarget);\n  } //\n\n\n  function deallocateTexture(texture) {\n    var textureProperties = properties.get(texture);\n    if (textureProperties.__webglInit === undefined) return;\n\n    _gl.deleteTexture(textureProperties.__webglTexture);\n\n    properties.remove(texture);\n  }\n\n  function deallocateRenderTarget(renderTarget) {\n    var texture = renderTarget.texture;\n    var renderTargetProperties = properties.get(renderTarget);\n    var textureProperties = properties.get(texture);\n    if (!renderTarget) return;\n\n    if (textureProperties.__webglTexture !== undefined) {\n      _gl.deleteTexture(textureProperties.__webglTexture);\n\n      info.memory.textures--;\n    }\n\n    if (renderTarget.depthTexture) {\n      renderTarget.depthTexture.dispose();\n    }\n\n    if (renderTarget.isWebGLCubeRenderTarget) {\n      for (var _i121 = 0; _i121 < 6; _i121++) {\n        _gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[_i121]);\n\n        if (renderTargetProperties.__webglDepthbuffer) _gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[_i121]);\n      }\n    } else {\n      _gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer);\n\n      if (renderTargetProperties.__webglDepthbuffer) _gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer);\n      if (renderTargetProperties.__webglMultisampledFramebuffer) _gl.deleteFramebuffer(renderTargetProperties.__webglMultisampledFramebuffer);\n      if (renderTargetProperties.__webglColorRenderbuffer) _gl.deleteRenderbuffer(renderTargetProperties.__webglColorRenderbuffer);\n      if (renderTargetProperties.__webglDepthRenderbuffer) _gl.deleteRenderbuffer(renderTargetProperties.__webglDepthRenderbuffer);\n    }\n\n    if (renderTarget.isWebGLMultipleRenderTargets) {\n      for (var _i122 = 0, il = texture.length; _i122 < il; _i122++) {\n        var attachmentProperties = properties.get(texture[_i122]);\n\n        if (attachmentProperties.__webglTexture) {\n          _gl.deleteTexture(attachmentProperties.__webglTexture);\n\n          info.memory.textures--;\n        }\n\n        properties.remove(texture[_i122]);\n      }\n    }\n\n    properties.remove(texture);\n    properties.remove(renderTarget);\n  } //\n\n\n  var textureUnits = 0;\n\n  function resetTextureUnits() {\n    textureUnits = 0;\n  }\n\n  function allocateTextureUnit() {\n    var textureUnit = textureUnits;\n\n    if (textureUnit >= maxTextures) {\n      console.warn('THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures);\n    }\n\n    textureUnits += 1;\n    return textureUnit;\n  } //\n\n\n  function setTexture2D(texture, slot) {\n    var textureProperties = properties.get(texture);\n    if (texture.isVideoTexture) updateVideoTexture(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      var image = texture.image;\n\n      if (image === undefined) {\n        console.warn('THREE.WebGLRenderer: Texture marked for update but image is undefined');\n      } else if (image.complete === false) {\n        console.warn('THREE.WebGLRenderer: Texture marked for update but image is incomplete');\n      } else {\n        uploadTexture(textureProperties, texture, slot);\n        return;\n      }\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(3553, textureProperties.__webglTexture);\n  }\n\n  function setTexture2DArray(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      uploadTexture(textureProperties, texture, slot);\n      return;\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(35866, textureProperties.__webglTexture);\n  }\n\n  function setTexture3D(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      uploadTexture(textureProperties, texture, slot);\n      return;\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(32879, textureProperties.__webglTexture);\n  }\n\n  function setTextureCube(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      uploadCubeTexture(textureProperties, texture, slot);\n      return;\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(34067, textureProperties.__webglTexture);\n  }\n\n  var wrappingToGL = (_wrappingToGL = {}, _defineProperty(_wrappingToGL, RepeatWrapping, 10497), _defineProperty(_wrappingToGL, ClampToEdgeWrapping, 33071), _defineProperty(_wrappingToGL, MirroredRepeatWrapping, 33648), _wrappingToGL);\n  var filterToGL = (_filterToGL = {}, _defineProperty(_filterToGL, NearestFilter, 9728), _defineProperty(_filterToGL, NearestMipmapNearestFilter, 9984), _defineProperty(_filterToGL, NearestMipmapLinearFilter, 9986), _defineProperty(_filterToGL, LinearFilter, 9729), _defineProperty(_filterToGL, LinearMipmapNearestFilter, 9985), _defineProperty(_filterToGL, LinearMipmapLinearFilter, 9987), _filterToGL);\n\n  function setTextureParameters(textureType, texture, supportsMips) {\n    if (supportsMips) {\n      _gl.texParameteri(textureType, 10242, wrappingToGL[texture.wrapS]);\n\n      _gl.texParameteri(textureType, 10243, wrappingToGL[texture.wrapT]);\n\n      if (textureType === 32879 || textureType === 35866) {\n        _gl.texParameteri(textureType, 32882, wrappingToGL[texture.wrapR]);\n      }\n\n      _gl.texParameteri(textureType, 10240, filterToGL[texture.magFilter]);\n\n      _gl.texParameteri(textureType, 10241, filterToGL[texture.minFilter]);\n    } else {\n      _gl.texParameteri(textureType, 10242, 33071);\n\n      _gl.texParameteri(textureType, 10243, 33071);\n\n      if (textureType === 32879 || textureType === 35866) {\n        _gl.texParameteri(textureType, 32882, 33071);\n      }\n\n      if (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) {\n        console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.');\n      }\n\n      _gl.texParameteri(textureType, 10240, filterFallback(texture.magFilter));\n\n      _gl.texParameteri(textureType, 10241, filterFallback(texture.minFilter));\n\n      if (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter) {\n        console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.');\n      }\n    }\n\n    if (extensions.has('EXT_texture_filter_anisotropic') === true) {\n      var extension = extensions.get('EXT_texture_filter_anisotropic');\n      if (texture.type === FloatType && extensions.has('OES_texture_float_linear') === false) return; // verify extension for WebGL 1 and WebGL 2\n\n      if (isWebGL2 === false && texture.type === HalfFloatType && extensions.has('OES_texture_half_float_linear') === false) return; // verify extension for WebGL 1 only\n\n      if (texture.anisotropy > 1 || properties.get(texture).__currentAnisotropy) {\n        _gl.texParameterf(textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(texture.anisotropy, capabilities.getMaxAnisotropy()));\n\n        properties.get(texture).__currentAnisotropy = texture.anisotropy;\n      }\n    }\n  }\n\n  function initTexture(textureProperties, texture) {\n    if (textureProperties.__webglInit === undefined) {\n      textureProperties.__webglInit = true;\n      texture.addEventListener('dispose', onTextureDispose);\n      textureProperties.__webglTexture = _gl.createTexture();\n      info.memory.textures++;\n    }\n  }\n\n  function uploadTexture(textureProperties, texture, slot) {\n    var textureType = 3553;\n    if (texture.isDataTexture2DArray) textureType = 35866;\n    if (texture.isDataTexture3D) textureType = 32879;\n    initTexture(textureProperties, texture);\n    state.activeTexture(33984 + slot);\n    state.bindTexture(textureType, textureProperties.__webglTexture);\n\n    _gl.pixelStorei(37440, texture.flipY);\n\n    _gl.pixelStorei(37441, texture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, texture.unpackAlignment);\n\n    _gl.pixelStorei(37443, 0);\n\n    var needsPowerOfTwo = textureNeedsPowerOfTwo(texture) && isPowerOfTwo$1(texture.image) === false;\n    var image = resizeImage(texture.image, needsPowerOfTwo, false, maxTextureSize);\n    var supportsMips = isPowerOfTwo$1(image) || isWebGL2,\n        glFormat = utils.convert(texture.format);\n    var glType = utils.convert(texture.type),\n        glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n    setTextureParameters(textureType, texture, supportsMips);\n    var mipmap;\n    var mipmaps = texture.mipmaps;\n\n    if (texture.isDepthTexture) {\n      // populate depth texture with dummy data\n      glInternalFormat = 6402;\n\n      if (isWebGL2) {\n        if (texture.type === FloatType) {\n          glInternalFormat = 36012;\n        } else if (texture.type === UnsignedIntType) {\n          glInternalFormat = 33190;\n        } else if (texture.type === UnsignedInt248Type) {\n          glInternalFormat = 35056;\n        } else {\n          glInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n        }\n      } else {\n        if (texture.type === FloatType) {\n          console.error('WebGLRenderer: Floating point depth texture requires WebGL2.');\n        }\n      } // validation checks for WebGL 1\n\n\n      if (texture.format === DepthFormat && glInternalFormat === 6402) {\n        // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n        // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n        // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n        if (texture.type !== UnsignedShortType && texture.type !== UnsignedIntType) {\n          console.warn('THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.');\n          texture.type = UnsignedShortType;\n          glType = utils.convert(texture.type);\n        }\n      }\n\n      if (texture.format === DepthStencilFormat && glInternalFormat === 6402) {\n        // Depth stencil textures need the DEPTH_STENCIL internal format\n        // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n        glInternalFormat = 34041; // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n        // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n        // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\n        if (texture.type !== UnsignedInt248Type) {\n          console.warn('THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.');\n          texture.type = UnsignedInt248Type;\n          glType = utils.convert(texture.type);\n        }\n      } //\n\n\n      state.texImage2D(3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null);\n    } else if (texture.isDataTexture) {\n      // use manually created mipmaps if available\n      // if there are no manual mipmaps\n      // set 0 level mipmap and then use GL to generate other mipmap levels\n      if (mipmaps.length > 0 && supportsMips) {\n        for (var _i123 = 0, il = mipmaps.length; _i123 < il; _i123++) {\n          mipmap = mipmaps[_i123];\n          state.texImage2D(3553, _i123, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n        }\n\n        texture.generateMipmaps = false;\n        textureProperties.__maxMipLevel = mipmaps.length - 1;\n      } else {\n        state.texImage2D(3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data);\n        textureProperties.__maxMipLevel = 0;\n      }\n    } else if (texture.isCompressedTexture) {\n      for (var _i124 = 0, _il9 = mipmaps.length; _i124 < _il9; _i124++) {\n        mipmap = mipmaps[_i124];\n\n        if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n          if (glFormat !== null) {\n            state.compressedTexImage2D(3553, _i124, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n          } else {\n            console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()');\n          }\n        } else {\n          state.texImage2D(3553, _i124, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n        }\n      }\n\n      textureProperties.__maxMipLevel = mipmaps.length - 1;\n    } else if (texture.isDataTexture2DArray) {\n      state.texImage3D(35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data);\n      textureProperties.__maxMipLevel = 0;\n    } else if (texture.isDataTexture3D) {\n      state.texImage3D(32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data);\n      textureProperties.__maxMipLevel = 0;\n    } else {\n      // regular Texture (image, video, canvas)\n      // use manually created mipmaps if available\n      // if there are no manual mipmaps\n      // set 0 level mipmap and then use GL to generate other mipmap levels\n      if (mipmaps.length > 0 && supportsMips) {\n        for (var _i125 = 0, _il10 = mipmaps.length; _i125 < _il10; _i125++) {\n          mipmap = mipmaps[_i125];\n          state.texImage2D(3553, _i125, glInternalFormat, glFormat, glType, mipmap);\n        }\n\n        texture.generateMipmaps = false;\n        textureProperties.__maxMipLevel = mipmaps.length - 1;\n      } else {\n        state.texImage2D(3553, 0, glInternalFormat, glFormat, glType, image);\n        textureProperties.__maxMipLevel = 0;\n      }\n    }\n\n    if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n      generateMipmap(textureType, texture, image.width, image.height);\n    }\n\n    textureProperties.__version = texture.version;\n    if (texture.onUpdate) texture.onUpdate(texture);\n  }\n\n  function uploadCubeTexture(textureProperties, texture, slot) {\n    if (texture.image.length !== 6) return;\n    initTexture(textureProperties, texture);\n    state.activeTexture(33984 + slot);\n    state.bindTexture(34067, textureProperties.__webglTexture);\n\n    _gl.pixelStorei(37440, texture.flipY);\n\n    _gl.pixelStorei(37441, texture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, texture.unpackAlignment);\n\n    _gl.pixelStorei(37443, 0);\n\n    var isCompressed = texture && (texture.isCompressedTexture || texture.image[0].isCompressedTexture);\n    var isDataTexture = texture.image[0] && texture.image[0].isDataTexture;\n    var cubeImage = [];\n\n    for (var _i126 = 0; _i126 < 6; _i126++) {\n      if (!isCompressed && !isDataTexture) {\n        cubeImage[_i126] = resizeImage(texture.image[_i126], false, true, maxCubemapSize);\n      } else {\n        cubeImage[_i126] = isDataTexture ? texture.image[_i126].image : texture.image[_i126];\n      }\n    }\n\n    var image = cubeImage[0],\n        supportsMips = isPowerOfTwo$1(image) || isWebGL2,\n        glFormat = utils.convert(texture.format),\n        glType = utils.convert(texture.type),\n        glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n    setTextureParameters(34067, texture, supportsMips);\n    var mipmaps;\n\n    if (isCompressed) {\n      for (var _i127 = 0; _i127 < 6; _i127++) {\n        mipmaps = cubeImage[_i127].mipmaps;\n\n        for (var j = 0; j < mipmaps.length; j++) {\n          var mipmap = mipmaps[j];\n\n          if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n            if (glFormat !== null) {\n              state.compressedTexImage2D(34069 + _i127, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n            } else {\n              console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()');\n            }\n          } else {\n            state.texImage2D(34069 + _i127, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n          }\n        }\n      }\n\n      textureProperties.__maxMipLevel = mipmaps.length - 1;\n    } else {\n      mipmaps = texture.mipmaps;\n\n      for (var _i128 = 0; _i128 < 6; _i128++) {\n        if (isDataTexture) {\n          state.texImage2D(34069 + _i128, 0, glInternalFormat, cubeImage[_i128].width, cubeImage[_i128].height, 0, glFormat, glType, cubeImage[_i128].data);\n\n          for (var _j4 = 0; _j4 < mipmaps.length; _j4++) {\n            var _mipmap = mipmaps[_j4];\n            var mipmapImage = _mipmap.image[_i128].image;\n            state.texImage2D(34069 + _i128, _j4 + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data);\n          }\n        } else {\n          state.texImage2D(34069 + _i128, 0, glInternalFormat, glFormat, glType, cubeImage[_i128]);\n\n          for (var _j5 = 0; _j5 < mipmaps.length; _j5++) {\n            var _mipmap2 = mipmaps[_j5];\n            state.texImage2D(34069 + _i128, _j5 + 1, glInternalFormat, glFormat, glType, _mipmap2.image[_i128]);\n          }\n        }\n      }\n\n      textureProperties.__maxMipLevel = mipmaps.length;\n    }\n\n    if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n      // We assume images for cube map have the same size.\n      generateMipmap(34067, texture, image.width, image.height);\n    }\n\n    textureProperties.__version = texture.version;\n    if (texture.onUpdate) texture.onUpdate(texture);\n  } // Render targets\n  // Setup storage for target texture and bind it to correct framebuffer\n\n\n  function setupFrameBufferTexture(framebuffer, renderTarget, texture, attachment, textureTarget) {\n    var glFormat = utils.convert(texture.format);\n    var glType = utils.convert(texture.type);\n    var glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n\n    if (textureTarget === 32879 || textureTarget === 35866) {\n      state.texImage3D(textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null);\n    } else {\n      state.texImage2D(textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null);\n    }\n\n    state.bindFramebuffer(36160, framebuffer);\n\n    _gl.framebufferTexture2D(36160, attachment, textureTarget, properties.get(texture).__webglTexture, 0);\n\n    state.bindFramebuffer(36160, null);\n  } // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\n\n  function setupRenderBufferStorage(renderbuffer, renderTarget, isMultisample) {\n    _gl.bindRenderbuffer(36161, renderbuffer);\n\n    if (renderTarget.depthBuffer && !renderTarget.stencilBuffer) {\n      var glInternalFormat = 33189;\n\n      if (isMultisample) {\n        var depthTexture = renderTarget.depthTexture;\n\n        if (depthTexture && depthTexture.isDepthTexture) {\n          if (depthTexture.type === FloatType) {\n            glInternalFormat = 36012;\n          } else if (depthTexture.type === UnsignedIntType) {\n            glInternalFormat = 33190;\n          }\n        }\n\n        var samples = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, samples, glInternalFormat, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, glInternalFormat, renderTarget.width, renderTarget.height);\n      }\n\n      _gl.framebufferRenderbuffer(36160, 36096, 36161, renderbuffer);\n    } else if (renderTarget.depthBuffer && renderTarget.stencilBuffer) {\n      if (isMultisample) {\n        var _samples = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, _samples, 35056, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, 34041, renderTarget.width, renderTarget.height);\n      }\n\n      _gl.framebufferRenderbuffer(36160, 33306, 36161, renderbuffer);\n    } else {\n      // Use the first texture for MRT so far\n      var texture = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture[0] : renderTarget.texture;\n      var glFormat = utils.convert(texture.format);\n      var glType = utils.convert(texture.type);\n\n      var _glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n\n      if (isMultisample) {\n        var _samples2 = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, _samples2, _glInternalFormat, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, _glInternalFormat, renderTarget.width, renderTarget.height);\n      }\n    }\n\n    _gl.bindRenderbuffer(36161, null);\n  } // Setup resources for a Depth Texture for a FBO (needs an extension)\n\n\n  function setupDepthTexture(framebuffer, renderTarget) {\n    var isCube = renderTarget && renderTarget.isWebGLCubeRenderTarget;\n    if (isCube) throw new Error('Depth Texture with cube render targets is not supported');\n    state.bindFramebuffer(36160, framebuffer);\n\n    if (!(renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture)) {\n      throw new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n    } // upload an empty depth texture with framebuffer size\n\n\n    if (!properties.get(renderTarget.depthTexture).__webglTexture || renderTarget.depthTexture.image.width !== renderTarget.width || renderTarget.depthTexture.image.height !== renderTarget.height) {\n      renderTarget.depthTexture.image.width = renderTarget.width;\n      renderTarget.depthTexture.image.height = renderTarget.height;\n      renderTarget.depthTexture.needsUpdate = true;\n    }\n\n    setTexture2D(renderTarget.depthTexture, 0);\n\n    var webglDepthTexture = properties.get(renderTarget.depthTexture).__webglTexture;\n\n    if (renderTarget.depthTexture.format === DepthFormat) {\n      _gl.framebufferTexture2D(36160, 36096, 3553, webglDepthTexture, 0);\n    } else if (renderTarget.depthTexture.format === DepthStencilFormat) {\n      _gl.framebufferTexture2D(36160, 33306, 3553, webglDepthTexture, 0);\n    } else {\n      throw new Error('Unknown depthTexture format');\n    }\n  } // Setup GL resources for a non-texture depth buffer\n\n\n  function setupDepthRenderbuffer(renderTarget) {\n    var renderTargetProperties = properties.get(renderTarget);\n    var isCube = renderTarget.isWebGLCubeRenderTarget === true;\n\n    if (renderTarget.depthTexture) {\n      if (isCube) throw new Error('target.depthTexture not supported in Cube render targets');\n      setupDepthTexture(renderTargetProperties.__webglFramebuffer, renderTarget);\n    } else {\n      if (isCube) {\n        renderTargetProperties.__webglDepthbuffer = [];\n\n        for (var _i129 = 0; _i129 < 6; _i129++) {\n          state.bindFramebuffer(36160, renderTargetProperties.__webglFramebuffer[_i129]);\n          renderTargetProperties.__webglDepthbuffer[_i129] = _gl.createRenderbuffer();\n          setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[_i129], renderTarget, false);\n        }\n      } else {\n        state.bindFramebuffer(36160, renderTargetProperties.__webglFramebuffer);\n        renderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n        setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer, renderTarget, false);\n      }\n    }\n\n    state.bindFramebuffer(36160, null);\n  } // Set up GL resources for the render target\n\n\n  function setupRenderTarget(renderTarget) {\n    var texture = renderTarget.texture;\n    var renderTargetProperties = properties.get(renderTarget);\n    var textureProperties = properties.get(texture);\n    renderTarget.addEventListener('dispose', onRenderTargetDispose);\n\n    if (renderTarget.isWebGLMultipleRenderTargets !== true) {\n      textureProperties.__webglTexture = _gl.createTexture();\n      textureProperties.__version = texture.version;\n      info.memory.textures++;\n    }\n\n    var isCube = renderTarget.isWebGLCubeRenderTarget === true;\n    var isMultipleRenderTargets = renderTarget.isWebGLMultipleRenderTargets === true;\n    var isMultisample = renderTarget.isWebGLMultisampleRenderTarget === true;\n    var isRenderTarget3D = texture.isDataTexture3D || texture.isDataTexture2DArray;\n    var supportsMips = isPowerOfTwo$1(renderTarget) || isWebGL2; // Handles WebGL2 RGBFormat fallback - #18858\n\n    if (isWebGL2 && texture.format === RGBFormat && (texture.type === FloatType || texture.type === HalfFloatType)) {\n      texture.format = RGBAFormat;\n      console.warn('THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.');\n    } // Setup framebuffer\n\n\n    if (isCube) {\n      renderTargetProperties.__webglFramebuffer = [];\n\n      for (var _i130 = 0; _i130 < 6; _i130++) {\n        renderTargetProperties.__webglFramebuffer[_i130] = _gl.createFramebuffer();\n      }\n    } else {\n      renderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n      if (isMultipleRenderTargets) {\n        if (capabilities.drawBuffers) {\n          var textures = renderTarget.texture;\n\n          for (var _i131 = 0, il = textures.length; _i131 < il; _i131++) {\n            var attachmentProperties = properties.get(textures[_i131]);\n\n            if (attachmentProperties.__webglTexture === undefined) {\n              attachmentProperties.__webglTexture = _gl.createTexture();\n              info.memory.textures++;\n            }\n          }\n        } else {\n          console.warn('THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.');\n        }\n      } else if (isMultisample) {\n        if (isWebGL2) {\n          renderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n          renderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n          _gl.bindRenderbuffer(36161, renderTargetProperties.__webglColorRenderbuffer);\n\n          var glFormat = utils.convert(texture.format);\n          var glType = utils.convert(texture.type);\n          var glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n          var samples = getRenderTargetSamples(renderTarget);\n\n          _gl.renderbufferStorageMultisample(36161, samples, glInternalFormat, renderTarget.width, renderTarget.height);\n\n          state.bindFramebuffer(36160, renderTargetProperties.__webglMultisampledFramebuffer);\n\n          _gl.framebufferRenderbuffer(36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer);\n\n          _gl.bindRenderbuffer(36161, null);\n\n          if (renderTarget.depthBuffer) {\n            renderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n            setupRenderBufferStorage(renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true);\n          }\n\n          state.bindFramebuffer(36160, null);\n        } else {\n          console.warn('THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.');\n        }\n      }\n    } // Setup color buffer\n\n\n    if (isCube) {\n      state.bindTexture(34067, textureProperties.__webglTexture);\n      setTextureParameters(34067, texture, supportsMips);\n\n      for (var _i132 = 0; _i132 < 6; _i132++) {\n        setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[_i132], renderTarget, texture, 36064, 34069 + _i132);\n      }\n\n      if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n        generateMipmap(34067, texture, renderTarget.width, renderTarget.height);\n      }\n\n      state.bindTexture(34067, null);\n    } else if (isMultipleRenderTargets) {\n      var _textures = renderTarget.texture;\n\n      for (var _i133 = 0, _il11 = _textures.length; _i133 < _il11; _i133++) {\n        var attachment = _textures[_i133];\n\n        var _attachmentProperties = properties.get(attachment);\n\n        state.bindTexture(3553, _attachmentProperties.__webglTexture);\n        setTextureParameters(3553, attachment, supportsMips);\n        setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer, renderTarget, attachment, 36064 + _i133, 3553);\n\n        if (textureNeedsGenerateMipmaps(attachment, supportsMips)) {\n          generateMipmap(3553, attachment, renderTarget.width, renderTarget.height);\n        }\n      }\n\n      state.bindTexture(3553, null);\n    } else {\n      var glTextureType = 3553;\n\n      if (isRenderTarget3D) {\n        // Render targets containing layers, i.e: Texture 3D and 2d arrays\n        if (isWebGL2) {\n          var isTexture3D = texture.isDataTexture3D;\n          glTextureType = isTexture3D ? 32879 : 35866;\n        } else {\n          console.warn('THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.');\n        }\n      }\n\n      state.bindTexture(glTextureType, textureProperties.__webglTexture);\n      setTextureParameters(glTextureType, texture, supportsMips);\n      setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer, renderTarget, texture, 36064, glTextureType);\n\n      if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n        generateMipmap(glTextureType, texture, renderTarget.width, renderTarget.height, renderTarget.depth);\n      }\n\n      state.bindTexture(glTextureType, null);\n    } // Setup depth and stencil buffers\n\n\n    if (renderTarget.depthBuffer) {\n      setupDepthRenderbuffer(renderTarget);\n    }\n  }\n\n  function updateRenderTargetMipmap(renderTarget) {\n    var supportsMips = isPowerOfTwo$1(renderTarget) || isWebGL2;\n    var textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [renderTarget.texture];\n\n    for (var _i134 = 0, il = textures.length; _i134 < il; _i134++) {\n      var texture = textures[_i134];\n\n      if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n        var _target2 = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\n        var webglTexture = properties.get(texture).__webglTexture;\n\n        state.bindTexture(_target2, webglTexture);\n        generateMipmap(_target2, texture, renderTarget.width, renderTarget.height);\n        state.bindTexture(_target2, null);\n      }\n    }\n  }\n\n  function updateMultisampleRenderTarget(renderTarget) {\n    if (renderTarget.isWebGLMultisampleRenderTarget) {\n      if (isWebGL2) {\n        var width = renderTarget.width;\n        var height = renderTarget.height;\n        var mask = 16384;\n        if (renderTarget.depthBuffer) mask |= 256;\n        if (renderTarget.stencilBuffer) mask |= 1024;\n        var renderTargetProperties = properties.get(renderTarget);\n        state.bindFramebuffer(36008, renderTargetProperties.__webglMultisampledFramebuffer);\n        state.bindFramebuffer(36009, renderTargetProperties.__webglFramebuffer);\n\n        _gl.blitFramebuffer(0, 0, width, height, 0, 0, width, height, mask, 9728);\n\n        state.bindFramebuffer(36008, null);\n        state.bindFramebuffer(36009, renderTargetProperties.__webglMultisampledFramebuffer);\n      } else {\n        console.warn('THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.');\n      }\n    }\n  }\n\n  function getRenderTargetSamples(renderTarget) {\n    return isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ? Math.min(maxSamples, renderTarget.samples) : 0;\n  }\n\n  function updateVideoTexture(texture) {\n    var frame = info.render.frame; // Check the last frame we updated the VideoTexture\n\n    if (_videoTextures.get(texture) !== frame) {\n      _videoTextures.set(texture, frame);\n\n      texture.update();\n    }\n  } // backwards compatibility\n\n\n  var warnedTexture2D = false;\n  var warnedTextureCube = false;\n\n  function safeSetTexture2D(texture, slot) {\n    if (texture && texture.isWebGLRenderTarget) {\n      if (warnedTexture2D === false) {\n        console.warn('THREE.WebGLTextures.safeSetTexture2D: don\\'t use render targets as textures. Use their .texture property instead.');\n        warnedTexture2D = true;\n      }\n\n      texture = texture.texture;\n    }\n\n    setTexture2D(texture, slot);\n  }\n\n  function safeSetTextureCube(texture, slot) {\n    if (texture && texture.isWebGLCubeRenderTarget) {\n      if (warnedTextureCube === false) {\n        console.warn('THREE.WebGLTextures.safeSetTextureCube: don\\'t use cube render targets as textures. Use their .texture property instead.');\n        warnedTextureCube = true;\n      }\n\n      texture = texture.texture;\n    }\n\n    setTextureCube(texture, slot);\n  } //\n\n\n  this.allocateTextureUnit = allocateTextureUnit;\n  this.resetTextureUnits = resetTextureUnits;\n  this.setTexture2D = setTexture2D;\n  this.setTexture2DArray = setTexture2DArray;\n  this.setTexture3D = setTexture3D;\n  this.setTextureCube = setTextureCube;\n  this.setupRenderTarget = setupRenderTarget;\n  this.updateRenderTargetMipmap = updateRenderTargetMipmap;\n  this.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n  this.safeSetTexture2D = safeSetTexture2D;\n  this.safeSetTextureCube = safeSetTextureCube;\n}\n\nfunction WebGLUtils(gl, extensions, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n\n  function convert(p) {\n    var extension;\n    if (p === UnsignedByteType) return 5121;\n    if (p === UnsignedShort4444Type) return 32819;\n    if (p === UnsignedShort5551Type) return 32820;\n    if (p === UnsignedShort565Type) return 33635;\n    if (p === ByteType) return 5120;\n    if (p === ShortType) return 5122;\n    if (p === UnsignedShortType) return 5123;\n    if (p === IntType) return 5124;\n    if (p === UnsignedIntType) return 5125;\n    if (p === FloatType) return 5126;\n\n    if (p === HalfFloatType) {\n      if (isWebGL2) return 5131;\n      extension = extensions.get('OES_texture_half_float');\n\n      if (extension !== null) {\n        return extension.HALF_FLOAT_OES;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === AlphaFormat) return 6406;\n    if (p === RGBFormat) return 6407;\n    if (p === RGBAFormat) return 6408;\n    if (p === LuminanceFormat) return 6409;\n    if (p === LuminanceAlphaFormat) return 6410;\n    if (p === DepthFormat) return 6402;\n    if (p === DepthStencilFormat) return 34041;\n    if (p === RedFormat) return 6403; // WebGL2 formats.\n\n    if (p === RedIntegerFormat) return 36244;\n    if (p === RGFormat) return 33319;\n    if (p === RGIntegerFormat) return 33320;\n    if (p === RGBIntegerFormat) return 36248;\n    if (p === RGBAIntegerFormat) return 36249;\n\n    if (p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_s3tc');\n\n      if (extension !== null) {\n        if (p === RGB_S3TC_DXT1_Format) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n        if (p === RGBA_S3TC_DXT1_Format) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n        if (p === RGBA_S3TC_DXT3_Format) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n        if (p === RGBA_S3TC_DXT5_Format) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_pvrtc');\n\n      if (extension !== null) {\n        if (p === RGB_PVRTC_4BPPV1_Format) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n        if (p === RGB_PVRTC_2BPPV1_Format) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n        if (p === RGBA_PVRTC_4BPPV1_Format) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n        if (p === RGBA_PVRTC_2BPPV1_Format) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_ETC1_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_etc1');\n\n      if (extension !== null) {\n        return extension.COMPRESSED_RGB_ETC1_WEBGL;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_etc');\n\n      if (extension !== null) {\n        if (p === RGB_ETC2_Format) return extension.COMPRESSED_RGB8_ETC2;\n        if (p === RGBA_ETC2_EAC_Format) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n      }\n    }\n\n    if (p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format || p === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format || p === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format || p === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format || p === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format || p === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format || p === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format || p === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format || p === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format || p === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_astc');\n\n      if (extension !== null) {\n        // TODO Complete?\n        return p;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGBA_BPTC_Format) {\n      extension = extensions.get('EXT_texture_compression_bptc');\n\n      if (extension !== null) {\n        // TODO Complete?\n        return p;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === UnsignedInt248Type) {\n      if (isWebGL2) return 34042;\n      extension = extensions.get('WEBGL_depth_texture');\n\n      if (extension !== null) {\n        return extension.UNSIGNED_INT_24_8_WEBGL;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return {\n    convert: convert\n  };\n}\n\nvar ArrayCamera = /*#__PURE__*/function (_PerspectiveCamera) {\n  _inherits(ArrayCamera, _PerspectiveCamera);\n\n  var _super30 = _createSuper(ArrayCamera);\n\n  function ArrayCamera() {\n    var _this33;\n\n    var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, ArrayCamera);\n\n    _this33 = _super30.call(this);\n    _this33.cameras = array;\n    return _this33;\n  }\n\n  return ArrayCamera;\n}(PerspectiveCamera);\n\nArrayCamera.prototype.isArrayCamera = true;\n\nvar Group = /*#__PURE__*/function (_Object3D4) {\n  _inherits(Group, _Object3D4);\n\n  var _super31 = _createSuper(Group);\n\n  function Group() {\n    var _this34;\n\n    _classCallCheck(this, Group);\n\n    _this34 = _super31.call(this);\n    _this34.type = 'Group';\n    return _this34;\n  }\n\n  return Group;\n}(Object3D);\n\nGroup.prototype.isGroup = true;\nvar _moveEvent = {\n  type: 'move'\n};\n\nvar WebXRController = /*#__PURE__*/function () {\n  function WebXRController() {\n    _classCallCheck(this, WebXRController);\n\n    this._targetRay = null;\n    this._grip = null;\n    this._hand = null;\n  }\n\n  _createClass(WebXRController, [{\n    key: \"getHandSpace\",\n    value: function getHandSpace() {\n      if (this._hand === null) {\n        this._hand = new Group();\n        this._hand.matrixAutoUpdate = false;\n        this._hand.visible = false;\n        this._hand.joints = {};\n        this._hand.inputState = {\n          pinching: false\n        };\n      }\n\n      return this._hand;\n    }\n  }, {\n    key: \"getTargetRaySpace\",\n    value: function getTargetRaySpace() {\n      if (this._targetRay === null) {\n        this._targetRay = new Group();\n        this._targetRay.matrixAutoUpdate = false;\n        this._targetRay.visible = false;\n        this._targetRay.hasLinearVelocity = false;\n        this._targetRay.linearVelocity = new Vector3();\n        this._targetRay.hasAngularVelocity = false;\n        this._targetRay.angularVelocity = new Vector3();\n      }\n\n      return this._targetRay;\n    }\n  }, {\n    key: \"getGripSpace\",\n    value: function getGripSpace() {\n      if (this._grip === null) {\n        this._grip = new Group();\n        this._grip.matrixAutoUpdate = false;\n        this._grip.visible = false;\n        this._grip.hasLinearVelocity = false;\n        this._grip.linearVelocity = new Vector3();\n        this._grip.hasAngularVelocity = false;\n        this._grip.angularVelocity = new Vector3();\n      }\n\n      return this._grip;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (this._targetRay !== null) {\n        this._targetRay.dispatchEvent(event);\n      }\n\n      if (this._grip !== null) {\n        this._grip.dispatchEvent(event);\n      }\n\n      if (this._hand !== null) {\n        this._hand.dispatchEvent(event);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(inputSource) {\n      this.dispatchEvent({\n        type: 'disconnected',\n        data: inputSource\n      });\n\n      if (this._targetRay !== null) {\n        this._targetRay.visible = false;\n      }\n\n      if (this._grip !== null) {\n        this._grip.visible = false;\n      }\n\n      if (this._hand !== null) {\n        this._hand.visible = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update(inputSource, frame, referenceSpace) {\n      var inputPose = null;\n      var gripPose = null;\n      var handPose = null;\n      var targetRay = this._targetRay;\n      var grip = this._grip;\n      var hand = this._hand;\n\n      if (inputSource && frame.session.visibilityState !== 'visible-blurred') {\n        if (targetRay !== null) {\n          inputPose = frame.getPose(inputSource.targetRaySpace, referenceSpace);\n\n          if (inputPose !== null) {\n            targetRay.matrix.fromArray(inputPose.transform.matrix);\n            targetRay.matrix.decompose(targetRay.position, targetRay.rotation, targetRay.scale);\n\n            if (inputPose.linearVelocity) {\n              targetRay.hasLinearVelocity = true;\n              targetRay.linearVelocity.copy(inputPose.linearVelocity);\n            } else {\n              targetRay.hasLinearVelocity = false;\n            }\n\n            if (inputPose.angularVelocity) {\n              targetRay.hasAngularVelocity = true;\n              targetRay.angularVelocity.copy(inputPose.angularVelocity);\n            } else {\n              targetRay.hasAngularVelocity = false;\n            }\n\n            this.dispatchEvent(_moveEvent);\n          }\n        }\n\n        if (hand && inputSource.hand) {\n          handPose = true;\n\n          var _iterator5 = _createForOfIteratorHelper(inputSource.hand.values()),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var inputjoint = _step5.value;\n              // Update the joints groups with the XRJoint poses\n              var jointPose = frame.getJointPose(inputjoint, referenceSpace);\n\n              if (hand.joints[inputjoint.jointName] === undefined) {\n                // The transform of this joint will be updated with the joint pose on each frame\n                var _joint = new Group();\n\n                _joint.matrixAutoUpdate = false;\n                _joint.visible = false;\n                hand.joints[inputjoint.jointName] = _joint; // ??\n\n                hand.add(_joint);\n              }\n\n              var joint = hand.joints[inputjoint.jointName];\n\n              if (jointPose !== null) {\n                joint.matrix.fromArray(jointPose.transform.matrix);\n                joint.matrix.decompose(joint.position, joint.rotation, joint.scale);\n                joint.jointRadius = jointPose.radius;\n              }\n\n              joint.visible = jointPose !== null;\n            } // Custom events\n            // Check pinchz\n\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          var indexTip = hand.joints['index-finger-tip'];\n          var thumbTip = hand.joints['thumb-tip'];\n          var distance = indexTip.position.distanceTo(thumbTip.position);\n          var distanceToPinch = 0.02;\n          var threshold = 0.005;\n\n          if (hand.inputState.pinching && distance > distanceToPinch + threshold) {\n            hand.inputState.pinching = false;\n            this.dispatchEvent({\n              type: 'pinchend',\n              handedness: inputSource.handedness,\n              target: this\n            });\n          } else if (!hand.inputState.pinching && distance <= distanceToPinch - threshold) {\n            hand.inputState.pinching = true;\n            this.dispatchEvent({\n              type: 'pinchstart',\n              handedness: inputSource.handedness,\n              target: this\n            });\n          }\n        } else {\n          if (grip !== null && inputSource.gripSpace) {\n            gripPose = frame.getPose(inputSource.gripSpace, referenceSpace);\n\n            if (gripPose !== null) {\n              grip.matrix.fromArray(gripPose.transform.matrix);\n              grip.matrix.decompose(grip.position, grip.rotation, grip.scale);\n\n              if (gripPose.linearVelocity) {\n                grip.hasLinearVelocity = true;\n                grip.linearVelocity.copy(gripPose.linearVelocity);\n              } else {\n                grip.hasLinearVelocity = false;\n              }\n\n              if (gripPose.angularVelocity) {\n                grip.hasAngularVelocity = true;\n                grip.angularVelocity.copy(gripPose.angularVelocity);\n              } else {\n                grip.hasAngularVelocity = false;\n              }\n            }\n          }\n        }\n      }\n\n      if (targetRay !== null) {\n        targetRay.visible = inputPose !== null;\n      }\n\n      if (grip !== null) {\n        grip.visible = gripPose !== null;\n      }\n\n      if (hand !== null) {\n        hand.visible = handPose !== null;\n      }\n\n      return this;\n    }\n  }]);\n\n  return WebXRController;\n}();\n\nvar WebXRManager = /*#__PURE__*/function (_EventDispatcher6) {\n  _inherits(WebXRManager, _EventDispatcher6);\n\n  var _super32 = _createSuper(WebXRManager);\n\n  function WebXRManager(renderer, gl) {\n    var _this35;\n\n    _classCallCheck(this, WebXRManager);\n\n    _this35 = _super32.call(this);\n\n    var scope = _assertThisInitialized(_this35);\n\n    var state = renderer.state;\n    var session = null;\n    var framebufferScaleFactor = 1.0;\n    var referenceSpace = null;\n    var referenceSpaceType = 'local-floor';\n    var pose = null;\n    var glBinding = null;\n    var glFramebuffer = null;\n    var glProjLayer = null;\n    var glBaseLayer = null;\n    var controllers = [];\n    var inputSourcesMap = new Map(); //\n\n    var cameraL = new PerspectiveCamera();\n    cameraL.layers.enable(1);\n    cameraL.viewport = new Vector4();\n    var cameraR = new PerspectiveCamera();\n    cameraR.layers.enable(2);\n    cameraR.viewport = new Vector4();\n    var cameras = [cameraL, cameraR];\n    var cameraVR = new ArrayCamera();\n    cameraVR.layers.enable(1);\n    cameraVR.layers.enable(2);\n    var _currentDepthNear = null;\n    var _currentDepthFar = null; //\n\n    _this35.cameraAutoUpdate = true;\n    _this35.enabled = false;\n    _this35.isPresenting = false;\n\n    _this35.getController = function (index) {\n      var controller = controllers[index];\n\n      if (controller === undefined) {\n        controller = new WebXRController();\n        controllers[index] = controller;\n      }\n\n      return controller.getTargetRaySpace();\n    };\n\n    _this35.getControllerGrip = function (index) {\n      var controller = controllers[index];\n\n      if (controller === undefined) {\n        controller = new WebXRController();\n        controllers[index] = controller;\n      }\n\n      return controller.getGripSpace();\n    };\n\n    _this35.getHand = function (index) {\n      var controller = controllers[index];\n\n      if (controller === undefined) {\n        controller = new WebXRController();\n        controllers[index] = controller;\n      }\n\n      return controller.getHandSpace();\n    }; //\n\n\n    function onSessionEvent(event) {\n      var controller = inputSourcesMap.get(event.inputSource);\n\n      if (controller) {\n        controller.dispatchEvent({\n          type: event.type,\n          data: event.inputSource\n        });\n      }\n    }\n\n    function onSessionEnd() {\n      inputSourcesMap.forEach(function (controller, inputSource) {\n        controller.disconnect(inputSource);\n      });\n      inputSourcesMap.clear();\n      _currentDepthNear = null;\n      _currentDepthFar = null; // restore framebuffer/rendering state\n\n      state.bindXRFramebuffer(null);\n      renderer.setRenderTarget(renderer.getRenderTarget()); //\n\n      animation.stop();\n      scope.isPresenting = false;\n      scope.dispatchEvent({\n        type: 'sessionend'\n      });\n    }\n\n    _this35.setFramebufferScaleFactor = function (value) {\n      framebufferScaleFactor = value;\n\n      if (scope.isPresenting === true) {\n        console.warn('THREE.WebXRManager: Cannot change framebuffer scale while presenting.');\n      }\n    };\n\n    _this35.setReferenceSpaceType = function (value) {\n      referenceSpaceType = value;\n\n      if (scope.isPresenting === true) {\n        console.warn('THREE.WebXRManager: Cannot change reference space type while presenting.');\n      }\n    };\n\n    _this35.getReferenceSpace = function () {\n      return referenceSpace;\n    };\n\n    _this35.getSession = function () {\n      return session;\n    };\n\n    _this35.setSession = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n        var attributes, layerInit, depthFormat, _layerInit, projectionlayerInit;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                session = value;\n\n                if (!(session !== null)) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                session.addEventListener('select', onSessionEvent);\n                session.addEventListener('selectstart', onSessionEvent);\n                session.addEventListener('selectend', onSessionEvent);\n                session.addEventListener('squeeze', onSessionEvent);\n                session.addEventListener('squeezestart', onSessionEvent);\n                session.addEventListener('squeezeend', onSessionEvent);\n                session.addEventListener('end', onSessionEnd);\n                session.addEventListener('inputsourceschange', onInputSourcesChange);\n                attributes = gl.getContextAttributes();\n\n                if (!(attributes.xrCompatible !== true)) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                _context3.next = 14;\n                return gl.makeXRCompatible();\n\n              case 14:\n                if (session.renderState.layers === undefined) {\n                  layerInit = {\n                    antialias: attributes.antialias,\n                    alpha: attributes.alpha,\n                    depth: attributes.depth,\n                    stencil: attributes.stencil,\n                    framebufferScaleFactor: framebufferScaleFactor\n                  };\n                  glBaseLayer = new XRWebGLLayer(session, gl, layerInit);\n                  session.updateRenderState({\n                    baseLayer: glBaseLayer\n                  });\n                } else {\n                  depthFormat = 0; // for anti-aliased output, use classic webgllayer for now\n\n                  if (attributes.antialias) {\n                    _layerInit = {\n                      antialias: true,\n                      alpha: attributes.alpha,\n                      depth: attributes.depth,\n                      stencil: attributes.stencil,\n                      framebufferScaleFactor: framebufferScaleFactor\n                    };\n                    glBaseLayer = new XRWebGLLayer(session, gl, _layerInit);\n                    session.updateRenderState({\n                      layers: [glBaseLayer]\n                    });\n                  } else {\n                    if (attributes.depth) {\n                      depthFormat = attributes.stencil ? 34041 : 6402;\n                    }\n\n                    projectionlayerInit = {\n                      colorFormat: attributes.alpha ? 6408 : 6407,\n                      depthFormat: depthFormat,\n                      scaleFactor: framebufferScaleFactor\n                    };\n                    glBinding = new XRWebGLBinding(session, gl);\n                    glProjLayer = glBinding.createProjectionLayer(projectionlayerInit);\n                    glFramebuffer = gl.createFramebuffer();\n                    session.updateRenderState({\n                      layers: [glProjLayer]\n                    });\n                  }\n                }\n\n                _context3.next = 17;\n                return session.requestReferenceSpace(referenceSpaceType);\n\n              case 17:\n                referenceSpace = _context3.sent;\n                animation.setContext(session);\n                animation.start();\n                scope.isPresenting = true;\n                scope.dispatchEvent({\n                  type: 'sessionstart'\n                });\n\n              case 22:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x8) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    function onInputSourcesChange(event) {\n      var inputSources = session.inputSources; // Assign inputSources to available controllers\n\n      for (var _i135 = 0; _i135 < controllers.length; _i135++) {\n        inputSourcesMap.set(inputSources[_i135], controllers[_i135]);\n      } // Notify disconnected\n\n\n      for (var _i136 = 0; _i136 < event.removed.length; _i136++) {\n        var inputSource = event.removed[_i136];\n        var controller = inputSourcesMap.get(inputSource);\n\n        if (controller) {\n          controller.dispatchEvent({\n            type: 'disconnected',\n            data: inputSource\n          });\n          inputSourcesMap.delete(inputSource);\n        }\n      } // Notify connected\n\n\n      for (var _i137 = 0; _i137 < event.added.length; _i137++) {\n        var _inputSource = event.added[_i137];\n\n        var _controller = inputSourcesMap.get(_inputSource);\n\n        if (_controller) {\n          _controller.dispatchEvent({\n            type: 'connected',\n            data: _inputSource\n          });\n        }\n      }\n    } //\n\n\n    var cameraLPos = new Vector3();\n    var cameraRPos = new Vector3();\n    /**\n     * Assumes 2 cameras that are parallel and share an X-axis, and that\n     * the cameras' projection and world matrices have already been set.\n     * And that near and far planes are identical for both cameras.\n     * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n     */\n\n    function setProjectionFromUnion(camera, cameraL, cameraR) {\n      cameraLPos.setFromMatrixPosition(cameraL.matrixWorld);\n      cameraRPos.setFromMatrixPosition(cameraR.matrixWorld);\n      var ipd = cameraLPos.distanceTo(cameraRPos);\n      var projL = cameraL.projectionMatrix.elements;\n      var projR = cameraR.projectionMatrix.elements; // VR systems will have identical far and near planes, and\n      // most likely identical top and bottom frustum extents.\n      // Use the left camera for these values.\n\n      var near = projL[14] / (projL[10] - 1);\n      var far = projL[14] / (projL[10] + 1);\n      var topFov = (projL[9] + 1) / projL[5];\n      var bottomFov = (projL[9] - 1) / projL[5];\n      var leftFov = (projL[8] - 1) / projL[0];\n      var rightFov = (projR[8] + 1) / projR[0];\n      var left = near * leftFov;\n      var right = near * rightFov; // Calculate the new camera's position offset from the\n      // left camera. xOffset should be roughly half `ipd`.\n\n      var zOffset = ipd / (-leftFov + rightFov);\n      var xOffset = zOffset * -leftFov; // TODO: Better way to apply this offset?\n\n      cameraL.matrixWorld.decompose(camera.position, camera.quaternion, camera.scale);\n      camera.translateX(xOffset);\n      camera.translateZ(zOffset);\n      camera.matrixWorld.compose(camera.position, camera.quaternion, camera.scale);\n      camera.matrixWorldInverse.copy(camera.matrixWorld).invert(); // Find the union of the frustum values of the cameras and scale\n      // the values so that the near plane's position does not change in world space,\n      // although must now be relative to the new union camera.\n\n      var near2 = near + zOffset;\n      var far2 = far + zOffset;\n      var left2 = left - xOffset;\n      var right2 = right + (ipd - xOffset);\n      var top2 = topFov * far / far2 * near2;\n      var bottom2 = bottomFov * far / far2 * near2;\n      camera.projectionMatrix.makePerspective(left2, right2, top2, bottom2, near2, far2);\n    }\n\n    function updateCamera(camera, parent) {\n      if (parent === null) {\n        camera.matrixWorld.copy(camera.matrix);\n      } else {\n        camera.matrixWorld.multiplyMatrices(parent.matrixWorld, camera.matrix);\n      }\n\n      camera.matrixWorldInverse.copy(camera.matrixWorld).invert();\n    }\n\n    _this35.updateCamera = function (camera) {\n      if (session === null) return;\n      cameraVR.near = cameraR.near = cameraL.near = camera.near;\n      cameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n      if (_currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far) {\n        // Note that the new renderState won't apply until the next frame. See #18320\n        session.updateRenderState({\n          depthNear: cameraVR.near,\n          depthFar: cameraVR.far\n        });\n        _currentDepthNear = cameraVR.near;\n        _currentDepthFar = cameraVR.far;\n      }\n\n      var parent = camera.parent;\n      var cameras = cameraVR.cameras;\n      updateCamera(cameraVR, parent);\n\n      for (var _i138 = 0; _i138 < cameras.length; _i138++) {\n        updateCamera(cameras[_i138], parent);\n      }\n\n      cameraVR.matrixWorld.decompose(cameraVR.position, cameraVR.quaternion, cameraVR.scale); // update user camera and its children\n\n      camera.position.copy(cameraVR.position);\n      camera.quaternion.copy(cameraVR.quaternion);\n      camera.scale.copy(cameraVR.scale);\n      camera.matrix.copy(cameraVR.matrix);\n      camera.matrixWorld.copy(cameraVR.matrixWorld);\n      var children = camera.children;\n\n      for (var _i139 = 0, _l39 = children.length; _i139 < _l39; _i139++) {\n        children[_i139].updateMatrixWorld(true);\n      } // update projection matrix for proper view frustum culling\n\n\n      if (cameras.length === 2) {\n        setProjectionFromUnion(cameraVR, cameraL, cameraR);\n      } else {\n        // assume single camera setup (AR)\n        cameraVR.projectionMatrix.copy(cameraL.projectionMatrix);\n      }\n    };\n\n    _this35.getCamera = function () {\n      return cameraVR;\n    };\n\n    _this35.getFoveation = function () {\n      if (glProjLayer !== null) {\n        return glProjLayer.fixedFoveation;\n      }\n\n      if (glBaseLayer !== null) {\n        return glBaseLayer.fixedFoveation;\n      }\n\n      return undefined;\n    };\n\n    _this35.setFoveation = function (foveation) {\n      // 0 = no foveation = full resolution\n      // 1 = maximum foveation = the edges render at lower resolution\n      if (glProjLayer !== null) {\n        glProjLayer.fixedFoveation = foveation;\n      }\n\n      if (glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined) {\n        glBaseLayer.fixedFoveation = foveation;\n      }\n    }; // Animation Loop\n\n\n    var onAnimationFrameCallback = null;\n\n    function onAnimationFrame(time, frame) {\n      pose = frame.getViewerPose(referenceSpace);\n\n      if (pose !== null) {\n        var views = pose.views;\n\n        if (glBaseLayer !== null) {\n          state.bindXRFramebuffer(glBaseLayer.framebuffer);\n        }\n\n        var cameraVRNeedsUpdate = false; // check if it's necessary to rebuild cameraVR's camera list\n\n        if (views.length !== cameraVR.cameras.length) {\n          cameraVR.cameras.length = 0;\n          cameraVRNeedsUpdate = true;\n        }\n\n        for (var _i140 = 0; _i140 < views.length; _i140++) {\n          var _view = views[_i140];\n          var viewport = null;\n\n          if (glBaseLayer !== null) {\n            viewport = glBaseLayer.getViewport(_view);\n          } else {\n            var glSubImage = glBinding.getViewSubImage(glProjLayer, _view);\n            state.bindXRFramebuffer(glFramebuffer);\n\n            if (glSubImage.depthStencilTexture !== undefined) {\n              gl.framebufferTexture2D(36160, 36096, 3553, glSubImage.depthStencilTexture, 0);\n            }\n\n            gl.framebufferTexture2D(36160, 36064, 3553, glSubImage.colorTexture, 0);\n            viewport = glSubImage.viewport;\n          }\n\n          var _camera = cameras[_i140];\n\n          _camera.matrix.fromArray(_view.transform.matrix);\n\n          _camera.projectionMatrix.fromArray(_view.projectionMatrix);\n\n          _camera.viewport.set(viewport.x, viewport.y, viewport.width, viewport.height);\n\n          if (_i140 === 0) {\n            cameraVR.matrix.copy(_camera.matrix);\n          }\n\n          if (cameraVRNeedsUpdate === true) {\n            cameraVR.cameras.push(_camera);\n          }\n        }\n      } //\n\n\n      var inputSources = session.inputSources;\n\n      for (var _i141 = 0; _i141 < controllers.length; _i141++) {\n        var controller = controllers[_i141];\n        var inputSource = inputSources[_i141];\n        controller.update(inputSource, frame, referenceSpace);\n      }\n\n      if (onAnimationFrameCallback) onAnimationFrameCallback(time, frame);\n    }\n\n    var animation = new WebGLAnimation();\n    animation.setAnimationLoop(onAnimationFrame);\n\n    _this35.setAnimationLoop = function (callback) {\n      onAnimationFrameCallback = callback;\n    };\n\n    _this35.dispose = function () {};\n\n    return _this35;\n  }\n\n  return WebXRManager;\n}(EventDispatcher);\n\nfunction WebGLMaterials(properties) {\n  function refreshFogUniforms(uniforms, fog) {\n    uniforms.fogColor.value.copy(fog.color);\n\n    if (fog.isFog) {\n      uniforms.fogNear.value = fog.near;\n      uniforms.fogFar.value = fog.far;\n    } else if (fog.isFogExp2) {\n      uniforms.fogDensity.value = fog.density;\n    }\n  }\n\n  function refreshMaterialUniforms(uniforms, material, pixelRatio, height, transmissionRenderTarget) {\n    if (material.isMeshBasicMaterial) {\n      refreshUniformsCommon(uniforms, material);\n    } else if (material.isMeshLambertMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsLambert(uniforms, material);\n    } else if (material.isMeshToonMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsToon(uniforms, material);\n    } else if (material.isMeshPhongMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsPhong(uniforms, material);\n    } else if (material.isMeshStandardMaterial) {\n      refreshUniformsCommon(uniforms, material);\n\n      if (material.isMeshPhysicalMaterial) {\n        refreshUniformsPhysical(uniforms, material, transmissionRenderTarget);\n      } else {\n        refreshUniformsStandard(uniforms, material);\n      }\n    } else if (material.isMeshMatcapMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsMatcap(uniforms, material);\n    } else if (material.isMeshDepthMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsDepth(uniforms, material);\n    } else if (material.isMeshDistanceMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsDistance(uniforms, material);\n    } else if (material.isMeshNormalMaterial) {\n      refreshUniformsCommon(uniforms, material);\n      refreshUniformsNormal(uniforms, material);\n    } else if (material.isLineBasicMaterial) {\n      refreshUniformsLine(uniforms, material);\n\n      if (material.isLineDashedMaterial) {\n        refreshUniformsDash(uniforms, material);\n      }\n    } else if (material.isPointsMaterial) {\n      refreshUniformsPoints(uniforms, material, pixelRatio, height);\n    } else if (material.isSpriteMaterial) {\n      refreshUniformsSprites(uniforms, material);\n    } else if (material.isShadowMaterial) {\n      uniforms.color.value.copy(material.color);\n      uniforms.opacity.value = material.opacity;\n    } else if (material.isShaderMaterial) {\n      material.uniformsNeedUpdate = false; // #15581\n    }\n  }\n\n  function refreshUniformsCommon(uniforms, material) {\n    uniforms.opacity.value = material.opacity;\n\n    if (material.color) {\n      uniforms.diffuse.value.copy(material.color);\n    }\n\n    if (material.emissive) {\n      uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n    }\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    }\n\n    if (material.specularMap) {\n      uniforms.specularMap.value = material.specularMap;\n    }\n\n    var envMap = properties.get(material).envMap;\n\n    if (envMap) {\n      uniforms.envMap.value = envMap;\n      uniforms.flipEnvMap.value = envMap.isCubeTexture && envMap.isRenderTargetTexture === false ? -1 : 1;\n      uniforms.reflectivity.value = material.reflectivity;\n      uniforms.refractionRatio.value = material.refractionRatio;\n\n      var maxMipLevel = properties.get(envMap).__maxMipLevel;\n\n      if (maxMipLevel !== undefined) {\n        uniforms.maxMipLevel.value = maxMipLevel;\n      }\n    }\n\n    if (material.lightMap) {\n      uniforms.lightMap.value = material.lightMap;\n      uniforms.lightMapIntensity.value = material.lightMapIntensity;\n    }\n\n    if (material.aoMap) {\n      uniforms.aoMap.value = material.aoMap;\n      uniforms.aoMapIntensity.value = material.aoMapIntensity;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. specular map\n    // 3. displacementMap map\n    // 4. normal map\n    // 5. bump map\n    // 6. roughnessMap map\n    // 7. metalnessMap map\n    // 8. alphaMap map\n    // 9. emissiveMap map\n    // 10. clearcoat map\n    // 11. clearcoat normal map\n    // 12. clearcoat roughnessMap map\n    // 13. specular intensity map\n    // 14. specular tint map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.specularMap) {\n      uvScaleMap = material.specularMap;\n    } else if (material.displacementMap) {\n      uvScaleMap = material.displacementMap;\n    } else if (material.normalMap) {\n      uvScaleMap = material.normalMap;\n    } else if (material.bumpMap) {\n      uvScaleMap = material.bumpMap;\n    } else if (material.roughnessMap) {\n      uvScaleMap = material.roughnessMap;\n    } else if (material.metalnessMap) {\n      uvScaleMap = material.metalnessMap;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    } else if (material.emissiveMap) {\n      uvScaleMap = material.emissiveMap;\n    } else if (material.clearcoatMap) {\n      uvScaleMap = material.clearcoatMap;\n    } else if (material.clearcoatNormalMap) {\n      uvScaleMap = material.clearcoatNormalMap;\n    } else if (material.clearcoatRoughnessMap) {\n      uvScaleMap = material.clearcoatRoughnessMap;\n    } else if (material.specularIntensityMap) {\n      uvScaleMap = material.specularIntensityMap;\n    } else if (material.specularTintMap) {\n      uvScaleMap = material.specularTintMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      // backwards compatibility\n      if (uvScaleMap.isWebGLRenderTarget) {\n        uvScaleMap = uvScaleMap.texture;\n      }\n\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    } // uv repeat and offset setting priorities for uv2\n    // 1. ao map\n    // 2. light map\n\n\n    var uv2ScaleMap;\n\n    if (material.aoMap) {\n      uv2ScaleMap = material.aoMap;\n    } else if (material.lightMap) {\n      uv2ScaleMap = material.lightMap;\n    }\n\n    if (uv2ScaleMap !== undefined) {\n      // backwards compatibility\n      if (uv2ScaleMap.isWebGLRenderTarget) {\n        uv2ScaleMap = uv2ScaleMap.texture;\n      }\n\n      if (uv2ScaleMap.matrixAutoUpdate === true) {\n        uv2ScaleMap.updateMatrix();\n      }\n\n      uniforms.uv2Transform.value.copy(uv2ScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsLine(uniforms, material) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n  }\n\n  function refreshUniformsDash(uniforms, material) {\n    uniforms.dashSize.value = material.dashSize;\n    uniforms.totalSize.value = material.dashSize + material.gapSize;\n    uniforms.scale.value = material.scale;\n  }\n\n  function refreshUniformsPoints(uniforms, material, pixelRatio, height) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n    uniforms.size.value = material.size * pixelRatio;\n    uniforms.scale.value = height * 0.5;\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. alpha map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsSprites(uniforms, material) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n    uniforms.rotation.value = material.rotation;\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. alpha map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsLambert(uniforms, material) {\n    if (material.emissiveMap) {\n      uniforms.emissiveMap.value = material.emissiveMap;\n    }\n  }\n\n  function refreshUniformsPhong(uniforms, material) {\n    uniforms.specular.value.copy(material.specular);\n    uniforms.shininess.value = Math.max(material.shininess, 1e-4); // to prevent pow( 0.0, 0.0 )\n\n    if (material.emissiveMap) {\n      uniforms.emissiveMap.value = material.emissiveMap;\n    }\n\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsToon(uniforms, material) {\n    if (material.gradientMap) {\n      uniforms.gradientMap.value = material.gradientMap;\n    }\n\n    if (material.emissiveMap) {\n      uniforms.emissiveMap.value = material.emissiveMap;\n    }\n\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsStandard(uniforms, material) {\n    uniforms.roughness.value = material.roughness;\n    uniforms.metalness.value = material.metalness;\n\n    if (material.roughnessMap) {\n      uniforms.roughnessMap.value = material.roughnessMap;\n    }\n\n    if (material.metalnessMap) {\n      uniforms.metalnessMap.value = material.metalnessMap;\n    }\n\n    if (material.emissiveMap) {\n      uniforms.emissiveMap.value = material.emissiveMap;\n    }\n\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n\n    var envMap = properties.get(material).envMap;\n\n    if (envMap) {\n      //uniforms.envMap.value = material.envMap; // part of uniforms common\n      uniforms.envMapIntensity.value = material.envMapIntensity;\n    }\n  }\n\n  function refreshUniformsPhysical(uniforms, material, transmissionRenderTarget) {\n    refreshUniformsStandard(uniforms, material);\n    uniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n    uniforms.clearcoat.value = material.clearcoat;\n    uniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n    if (material.sheen) uniforms.sheen.value.copy(material.sheen);\n\n    if (material.clearcoatMap) {\n      uniforms.clearcoatMap.value = material.clearcoatMap;\n    }\n\n    if (material.clearcoatRoughnessMap) {\n      uniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n    }\n\n    if (material.clearcoatNormalMap) {\n      uniforms.clearcoatNormalScale.value.copy(material.clearcoatNormalScale);\n      uniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n      if (material.side === BackSide) {\n        uniforms.clearcoatNormalScale.value.negate();\n      }\n    }\n\n    uniforms.transmission.value = material.transmission;\n\n    if (material.transmissionMap) {\n      uniforms.transmissionMap.value = material.transmissionMap;\n    }\n\n    if (material.transmission > 0.0) {\n      uniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n      uniforms.transmissionSamplerSize.value.set(transmissionRenderTarget.width, transmissionRenderTarget.height);\n    }\n\n    uniforms.thickness.value = material.thickness;\n\n    if (material.thicknessMap) {\n      uniforms.thicknessMap.value = material.thicknessMap;\n    }\n\n    uniforms.attenuationDistance.value = material.attenuationDistance;\n    uniforms.attenuationTint.value.copy(material.attenuationTint);\n    uniforms.specularIntensity.value = material.specularIntensity;\n    uniforms.specularTint.value.copy(material.specularTint);\n\n    if (material.specularIntensityMap) {\n      uniforms.specularIntensityMap.value = material.specularIntensityMap;\n    }\n\n    if (material.specularTintMap) {\n      uniforms.specularTintMap.value = material.specularTintMap;\n    }\n  }\n\n  function refreshUniformsMatcap(uniforms, material) {\n    if (material.matcap) {\n      uniforms.matcap.value = material.matcap;\n    }\n\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsDepth(uniforms, material) {\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsDistance(uniforms, material) {\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n\n    uniforms.referencePosition.value.copy(material.referencePosition);\n    uniforms.nearDistance.value = material.nearDistance;\n    uniforms.farDistance.value = material.farDistance;\n  }\n\n  function refreshUniformsNormal(uniforms, material) {\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  return {\n    refreshFogUniforms: refreshFogUniforms,\n    refreshMaterialUniforms: refreshMaterialUniforms\n  };\n}\n\nfunction createCanvasElement() {\n  var canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n  canvas.style.display = 'block';\n  return canvas;\n}\n\nfunction WebGLRenderer() {\n  var parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n      _context = parameters.context !== undefined ? parameters.context : null,\n      _alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n      _depth = parameters.depth !== undefined ? parameters.depth : true,\n      _stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n      _antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n      _premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n      _preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n      _powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n      _failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n  var currentRenderList = null;\n  var currentRenderState = null; // render() can be called from within a callback triggered by another render.\n  // We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n  var renderListStack = [];\n  var renderStateStack = []; // public properties\n\n  this.domElement = _canvas; // Debug configuration container\n\n  this.debug = {\n    /**\n     * Enables error checking and reporting when shader programs are being compiled\n     * @type {boolean}\n     */\n    checkShaderErrors: true\n  }; // clearing\n\n  this.autoClear = true;\n  this.autoClearColor = true;\n  this.autoClearDepth = true;\n  this.autoClearStencil = true; // scene graph\n\n  this.sortObjects = true; // user-defined clipping\n\n  this.clippingPlanes = [];\n  this.localClippingEnabled = false; // physically based shading\n\n  this.gammaFactor = 2.0; // for backwards compatibility\n\n  this.outputEncoding = LinearEncoding; // physical lights\n\n  this.physicallyCorrectLights = false; // tone mapping\n\n  this.toneMapping = NoToneMapping;\n  this.toneMappingExposure = 1.0; // internal properties\n\n  var _this = this;\n\n  var _isContextLost = false; // internal state cache\n\n  var _currentActiveCubeFace = 0;\n  var _currentActiveMipmapLevel = 0;\n  var _currentRenderTarget = null;\n\n  var _currentMaterialId = -1;\n\n  var _currentCamera = null;\n\n  var _currentViewport = new Vector4();\n\n  var _currentScissor = new Vector4();\n\n  var _currentScissorTest = null; //\n\n  var _width = _canvas.width;\n  var _height = _canvas.height;\n  var _pixelRatio = 1;\n  var _opaqueSort = null;\n  var _transparentSort = null;\n\n  var _viewport = new Vector4(0, 0, _width, _height);\n\n  var _scissor = new Vector4(0, 0, _width, _height);\n\n  var _scissorTest = false; //\n\n  var _currentDrawBuffers = []; // frustum\n\n  var _frustum = new Frustum(); // clipping\n\n\n  var _clippingEnabled = false;\n  var _localClippingEnabled = false; // transmission\n\n  var _transmissionRenderTarget = null; // camera matrices cache\n\n  var _projScreenMatrix = new Matrix4();\n\n  var _vector3 = new Vector3();\n\n  var _emptyScene = {\n    background: null,\n    fog: null,\n    environment: null,\n    overrideMaterial: null,\n    isScene: true\n  };\n\n  function getTargetPixelRatio() {\n    return _currentRenderTarget === null ? _pixelRatio : 1;\n  } // initialize\n\n\n  var _gl = _context;\n\n  function getContext(contextNames, contextAttributes) {\n    for (var _i142 = 0; _i142 < contextNames.length; _i142++) {\n      var contextName = contextNames[_i142];\n\n      var context = _canvas.getContext(contextName, contextAttributes);\n\n      if (context !== null) return context;\n    }\n\n    return null;\n  }\n\n  try {\n    var contextAttributes = {\n      alpha: _alpha,\n      depth: _depth,\n      stencil: _stencil,\n      antialias: _antialias,\n      premultipliedAlpha: _premultipliedAlpha,\n      preserveDrawingBuffer: _preserveDrawingBuffer,\n      powerPreference: _powerPreference,\n      failIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n    }; // event listeners must be registered before WebGL context is created, see #12753\n\n    _canvas.addEventListener('webglcontextlost', onContextLost, false);\n\n    _canvas.addEventListener('webglcontextrestored', onContextRestore, false);\n\n    if (_gl === null) {\n      var contextNames = ['webgl2', 'webgl', 'experimental-webgl'];\n\n      if (_this.isWebGL1Renderer === true) {\n        contextNames.shift();\n      }\n\n      _gl = getContext(contextNames, contextAttributes);\n\n      if (_gl === null) {\n        if (getContext(contextNames)) {\n          throw new Error('Error creating WebGL context with your selected attributes.');\n        } else {\n          throw new Error('Error creating WebGL context.');\n        }\n      }\n    } // Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\n    if (_gl.getShaderPrecisionFormat === undefined) {\n      _gl.getShaderPrecisionFormat = function () {\n        return {\n          'rangeMin': 1,\n          'rangeMax': 1,\n          'precision': 1\n        };\n      };\n    }\n  } catch (error) {\n    console.error('THREE.WebGLRenderer: ' + error.message);\n    throw error;\n  }\n\n  var extensions, capabilities, state, info;\n  var properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n  var programCache, materials, renderLists, renderStates, clipping, shadowMap;\n  var background, morphtargets, bufferRenderer, indexedBufferRenderer;\n  var utils, bindingStates;\n\n  function initGLContext() {\n    extensions = new WebGLExtensions(_gl);\n    capabilities = new WebGLCapabilities(_gl, extensions, parameters);\n    extensions.init(capabilities);\n    utils = new WebGLUtils(_gl, extensions, capabilities);\n    state = new WebGLState(_gl, extensions, capabilities);\n    _currentDrawBuffers[0] = 1029;\n    info = new WebGLInfo(_gl);\n    properties = new WebGLProperties();\n    textures = new WebGLTextures(_gl, extensions, state, properties, capabilities, utils, info);\n    cubemaps = new WebGLCubeMaps(_this);\n    cubeuvmaps = new WebGLCubeUVMaps(_this);\n    attributes = new WebGLAttributes(_gl, capabilities);\n    bindingStates = new WebGLBindingStates(_gl, extensions, attributes, capabilities);\n    geometries = new WebGLGeometries(_gl, attributes, info, bindingStates);\n    objects = new WebGLObjects(_gl, geometries, attributes, info);\n    morphtargets = new WebGLMorphtargets(_gl);\n    clipping = new WebGLClipping(properties);\n    programCache = new WebGLPrograms(_this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping);\n    materials = new WebGLMaterials(properties);\n    renderLists = new WebGLRenderLists(properties);\n    renderStates = new WebGLRenderStates(extensions, capabilities);\n    background = new WebGLBackground(_this, cubemaps, state, objects, _premultipliedAlpha);\n    shadowMap = new WebGLShadowMap(_this, objects, capabilities);\n    bufferRenderer = new WebGLBufferRenderer(_gl, extensions, info, capabilities);\n    indexedBufferRenderer = new WebGLIndexedBufferRenderer(_gl, extensions, info, capabilities);\n    info.programs = programCache.programs;\n    _this.capabilities = capabilities;\n    _this.extensions = extensions;\n    _this.properties = properties;\n    _this.renderLists = renderLists;\n    _this.shadowMap = shadowMap;\n    _this.state = state;\n    _this.info = info;\n  }\n\n  initGLContext(); // xr\n\n  var xr = new WebXRManager(_this, _gl);\n  this.xr = xr; // API\n\n  this.getContext = function () {\n    return _gl;\n  };\n\n  this.getContextAttributes = function () {\n    return _gl.getContextAttributes();\n  };\n\n  this.forceContextLoss = function () {\n    var extension = extensions.get('WEBGL_lose_context');\n    if (extension) extension.loseContext();\n  };\n\n  this.forceContextRestore = function () {\n    var extension = extensions.get('WEBGL_lose_context');\n    if (extension) extension.restoreContext();\n  };\n\n  this.getPixelRatio = function () {\n    return _pixelRatio;\n  };\n\n  this.setPixelRatio = function (value) {\n    if (value === undefined) return;\n    _pixelRatio = value;\n    this.setSize(_width, _height, false);\n  };\n\n  this.getSize = function (target) {\n    return target.set(_width, _height);\n  };\n\n  this.setSize = function (width, height, updateStyle) {\n    if (xr.isPresenting) {\n      console.warn('THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.');\n      return;\n    }\n\n    _width = width;\n    _height = height;\n    _canvas.width = Math.floor(width * _pixelRatio);\n    _canvas.height = Math.floor(height * _pixelRatio);\n\n    if (updateStyle !== false) {\n      _canvas.style.width = width + 'px';\n      _canvas.style.height = height + 'px';\n    }\n\n    this.setViewport(0, 0, width, height);\n  };\n\n  this.getDrawingBufferSize = function (target) {\n    return target.set(_width * _pixelRatio, _height * _pixelRatio).floor();\n  };\n\n  this.setDrawingBufferSize = function (width, height, pixelRatio) {\n    _width = width;\n    _height = height;\n    _pixelRatio = pixelRatio;\n    _canvas.width = Math.floor(width * pixelRatio);\n    _canvas.height = Math.floor(height * pixelRatio);\n    this.setViewport(0, 0, width, height);\n  };\n\n  this.getCurrentViewport = function (target) {\n    return target.copy(_currentViewport);\n  };\n\n  this.getViewport = function (target) {\n    return target.copy(_viewport);\n  };\n\n  this.setViewport = function (x, y, width, height) {\n    if (x.isVector4) {\n      _viewport.set(x.x, x.y, x.z, x.w);\n    } else {\n      _viewport.set(x, y, width, height);\n    }\n\n    state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor());\n  };\n\n  this.getScissor = function (target) {\n    return target.copy(_scissor);\n  };\n\n  this.setScissor = function (x, y, width, height) {\n    if (x.isVector4) {\n      _scissor.set(x.x, x.y, x.z, x.w);\n    } else {\n      _scissor.set(x, y, width, height);\n    }\n\n    state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor());\n  };\n\n  this.getScissorTest = function () {\n    return _scissorTest;\n  };\n\n  this.setScissorTest = function (boolean) {\n    state.setScissorTest(_scissorTest = boolean);\n  };\n\n  this.setOpaqueSort = function (method) {\n    _opaqueSort = method;\n  };\n\n  this.setTransparentSort = function (method) {\n    _transparentSort = method;\n  }; // Clearing\n\n\n  this.getClearColor = function (target) {\n    return target.copy(background.getClearColor());\n  };\n\n  this.setClearColor = function () {\n    background.setClearColor.apply(background, arguments);\n  };\n\n  this.getClearAlpha = function () {\n    return background.getClearAlpha();\n  };\n\n  this.setClearAlpha = function () {\n    background.setClearAlpha.apply(background, arguments);\n  };\n\n  this.clear = function (color, depth, stencil) {\n    var bits = 0;\n    if (color === undefined || color) bits |= 16384;\n    if (depth === undefined || depth) bits |= 256;\n    if (stencil === undefined || stencil) bits |= 1024;\n\n    _gl.clear(bits);\n  };\n\n  this.clearColor = function () {\n    this.clear(true, false, false);\n  };\n\n  this.clearDepth = function () {\n    this.clear(false, true, false);\n  };\n\n  this.clearStencil = function () {\n    this.clear(false, false, true);\n  }; //\n\n\n  this.dispose = function () {\n    _canvas.removeEventListener('webglcontextlost', onContextLost, false);\n\n    _canvas.removeEventListener('webglcontextrestored', onContextRestore, false);\n\n    renderLists.dispose();\n    renderStates.dispose();\n    properties.dispose();\n    cubemaps.dispose();\n    cubeuvmaps.dispose();\n    objects.dispose();\n    bindingStates.dispose();\n    xr.dispose();\n    xr.removeEventListener('sessionstart', onXRSessionStart);\n    xr.removeEventListener('sessionend', onXRSessionEnd);\n\n    if (_transmissionRenderTarget) {\n      _transmissionRenderTarget.dispose();\n\n      _transmissionRenderTarget = null;\n    }\n\n    animation.stop();\n  }; // Events\n\n\n  function onContextLost(event) {\n    event.preventDefault();\n    console.log('THREE.WebGLRenderer: Context Lost.');\n    _isContextLost = true;\n  }\n\n  function onContextRestore() {\n    console.log('THREE.WebGLRenderer: Context Restored.');\n    _isContextLost = false;\n    var infoAutoReset = info.autoReset;\n    var shadowMapEnabled = shadowMap.enabled;\n    var shadowMapAutoUpdate = shadowMap.autoUpdate;\n    var shadowMapNeedsUpdate = shadowMap.needsUpdate;\n    var shadowMapType = shadowMap.type;\n    initGLContext();\n    info.autoReset = infoAutoReset;\n    shadowMap.enabled = shadowMapEnabled;\n    shadowMap.autoUpdate = shadowMapAutoUpdate;\n    shadowMap.needsUpdate = shadowMapNeedsUpdate;\n    shadowMap.type = shadowMapType;\n  }\n\n  function onMaterialDispose(event) {\n    var material = event.target;\n    material.removeEventListener('dispose', onMaterialDispose);\n    deallocateMaterial(material);\n  } // Buffer deallocation\n\n\n  function deallocateMaterial(material) {\n    releaseMaterialProgramReferences(material);\n    properties.remove(material);\n  }\n\n  function releaseMaterialProgramReferences(material) {\n    var programs = properties.get(material).programs;\n\n    if (programs !== undefined) {\n      programs.forEach(function (program) {\n        programCache.releaseProgram(program);\n      });\n    }\n  } // Buffer rendering\n\n\n  function renderObjectImmediate(object, program) {\n    object.render(function (object) {\n      _this.renderBufferImmediate(object, program);\n    });\n  }\n\n  this.renderBufferImmediate = function (object, program) {\n    bindingStates.initAttributes();\n    var buffers = properties.get(object);\n    if (object.hasPositions && !buffers.position) buffers.position = _gl.createBuffer();\n    if (object.hasNormals && !buffers.normal) buffers.normal = _gl.createBuffer();\n    if (object.hasUvs && !buffers.uv) buffers.uv = _gl.createBuffer();\n    if (object.hasColors && !buffers.color) buffers.color = _gl.createBuffer();\n    var programAttributes = program.getAttributes();\n\n    if (object.hasPositions) {\n      _gl.bindBuffer(34962, buffers.position);\n\n      _gl.bufferData(34962, object.positionArray, 35048);\n\n      bindingStates.enableAttribute(programAttributes.position);\n\n      _gl.vertexAttribPointer(programAttributes.position, 3, 5126, false, 0, 0);\n    }\n\n    if (object.hasNormals) {\n      _gl.bindBuffer(34962, buffers.normal);\n\n      _gl.bufferData(34962, object.normalArray, 35048);\n\n      bindingStates.enableAttribute(programAttributes.normal);\n\n      _gl.vertexAttribPointer(programAttributes.normal, 3, 5126, false, 0, 0);\n    }\n\n    if (object.hasUvs) {\n      _gl.bindBuffer(34962, buffers.uv);\n\n      _gl.bufferData(34962, object.uvArray, 35048);\n\n      bindingStates.enableAttribute(programAttributes.uv);\n\n      _gl.vertexAttribPointer(programAttributes.uv, 2, 5126, false, 0, 0);\n    }\n\n    if (object.hasColors) {\n      _gl.bindBuffer(34962, buffers.color);\n\n      _gl.bufferData(34962, object.colorArray, 35048);\n\n      bindingStates.enableAttribute(programAttributes.color);\n\n      _gl.vertexAttribPointer(programAttributes.color, 3, 5126, false, 0, 0);\n    }\n\n    bindingStates.disableUnusedAttributes();\n\n    _gl.drawArrays(4, 0, object.count);\n\n    object.count = 0;\n  };\n\n  this.renderBufferDirect = function (camera, scene, geometry, material, object, group) {\n    if (scene === null) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n    var frontFaceCW = object.isMesh && object.matrixWorld.determinant() < 0;\n    var program = setProgram(camera, scene, material, object);\n    state.setMaterial(material, frontFaceCW); //\n\n    var index = geometry.index;\n    var position = geometry.attributes.position; //\n\n    if (index === null) {\n      if (position === undefined || position.count === 0) return;\n    } else if (index.count === 0) {\n      return;\n    } //\n\n\n    var rangeFactor = 1;\n\n    if (material.wireframe === true) {\n      index = geometries.getWireframeAttribute(geometry);\n      rangeFactor = 2;\n    }\n\n    if (geometry.morphAttributes.position !== undefined || geometry.morphAttributes.normal !== undefined) {\n      morphtargets.update(object, geometry, material, program);\n    }\n\n    bindingStates.setup(object, material, program, geometry, index);\n    var attribute;\n    var renderer = bufferRenderer;\n\n    if (index !== null) {\n      attribute = attributes.get(index);\n      renderer = indexedBufferRenderer;\n      renderer.setIndex(attribute);\n    } //\n\n\n    var dataCount = index !== null ? index.count : position.count;\n    var rangeStart = geometry.drawRange.start * rangeFactor;\n    var rangeCount = geometry.drawRange.count * rangeFactor;\n    var groupStart = group !== null ? group.start * rangeFactor : 0;\n    var groupCount = group !== null ? group.count * rangeFactor : Infinity;\n    var drawStart = Math.max(rangeStart, groupStart);\n    var drawEnd = Math.min(dataCount, rangeStart + rangeCount, groupStart + groupCount) - 1;\n    var drawCount = Math.max(0, drawEnd - drawStart + 1);\n    if (drawCount === 0) return; //\n\n    if (object.isMesh) {\n      if (material.wireframe === true) {\n        state.setLineWidth(material.wireframeLinewidth * getTargetPixelRatio());\n        renderer.setMode(1);\n      } else {\n        renderer.setMode(4);\n      }\n    } else if (object.isLine) {\n      var lineWidth = material.linewidth;\n      if (lineWidth === undefined) lineWidth = 1; // Not using Line*Material\n\n      state.setLineWidth(lineWidth * getTargetPixelRatio());\n\n      if (object.isLineSegments) {\n        renderer.setMode(1);\n      } else if (object.isLineLoop) {\n        renderer.setMode(2);\n      } else {\n        renderer.setMode(3);\n      }\n    } else if (object.isPoints) {\n      renderer.setMode(0);\n    } else if (object.isSprite) {\n      renderer.setMode(4);\n    }\n\n    if (object.isInstancedMesh) {\n      renderer.renderInstances(drawStart, drawCount, object.count);\n    } else if (geometry.isInstancedBufferGeometry) {\n      var instanceCount = Math.min(geometry.instanceCount, geometry._maxInstanceCount);\n      renderer.renderInstances(drawStart, drawCount, instanceCount);\n    } else {\n      renderer.render(drawStart, drawCount);\n    }\n  }; // Compile\n\n\n  this.compile = function (scene, camera) {\n    currentRenderState = renderStates.get(scene);\n    currentRenderState.init();\n    renderStateStack.push(currentRenderState);\n    scene.traverseVisible(function (object) {\n      if (object.isLight && object.layers.test(camera.layers)) {\n        currentRenderState.pushLight(object);\n\n        if (object.castShadow) {\n          currentRenderState.pushShadow(object);\n        }\n      }\n    });\n    currentRenderState.setupLights();\n    scene.traverse(function (object) {\n      var material = object.material;\n\n      if (material) {\n        if (Array.isArray(material)) {\n          for (var _i143 = 0; _i143 < material.length; _i143++) {\n            var material2 = material[_i143];\n            getProgram(material2, scene, object);\n          }\n        } else {\n          getProgram(material, scene, object);\n        }\n      }\n    });\n    renderStateStack.pop();\n    currentRenderState = null;\n  }; // Animation Loop\n\n\n  var onAnimationFrameCallback = null;\n\n  function onAnimationFrame(time) {\n    if (onAnimationFrameCallback) onAnimationFrameCallback(time);\n  }\n\n  function onXRSessionStart() {\n    animation.stop();\n  }\n\n  function onXRSessionEnd() {\n    animation.start();\n  }\n\n  var animation = new WebGLAnimation();\n  animation.setAnimationLoop(onAnimationFrame);\n  if (typeof window !== 'undefined') animation.setContext(window);\n\n  this.setAnimationLoop = function (callback) {\n    onAnimationFrameCallback = callback;\n    xr.setAnimationLoop(callback);\n    callback === null ? animation.stop() : animation.start();\n  };\n\n  xr.addEventListener('sessionstart', onXRSessionStart);\n  xr.addEventListener('sessionend', onXRSessionEnd); // Rendering\n\n  this.render = function (scene, camera) {\n    if (camera !== undefined && camera.isCamera !== true) {\n      console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');\n      return;\n    }\n\n    if (_isContextLost === true) return; // update scene graph\n\n    if (scene.autoUpdate === true) scene.updateMatrixWorld(); // update camera matrices and frustum\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    if (xr.enabled === true && xr.isPresenting === true) {\n      if (xr.cameraAutoUpdate === true) xr.updateCamera(camera);\n      camera = xr.getCamera(); // use XR camera for rendering\n    } //\n\n\n    if (scene.isScene === true) scene.onBeforeRender(_this, scene, camera, _currentRenderTarget);\n    currentRenderState = renderStates.get(scene, renderStateStack.length);\n    currentRenderState.init();\n    renderStateStack.push(currentRenderState);\n\n    _projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\n    _frustum.setFromProjectionMatrix(_projScreenMatrix);\n\n    _localClippingEnabled = this.localClippingEnabled;\n    _clippingEnabled = clipping.init(this.clippingPlanes, _localClippingEnabled, camera);\n    currentRenderList = renderLists.get(scene, renderListStack.length);\n    currentRenderList.init();\n    renderListStack.push(currentRenderList);\n    projectObject(scene, camera, 0, _this.sortObjects);\n    currentRenderList.finish();\n\n    if (_this.sortObjects === true) {\n      currentRenderList.sort(_opaqueSort, _transparentSort);\n    } //\n\n\n    if (_clippingEnabled === true) clipping.beginShadows();\n    var shadowsArray = currentRenderState.state.shadowsArray;\n    shadowMap.render(shadowsArray, scene, camera);\n    currentRenderState.setupLights();\n    currentRenderState.setupLightsView(camera);\n    if (_clippingEnabled === true) clipping.endShadows(); //\n\n    if (this.info.autoReset === true) this.info.reset(); //\n\n    background.render(currentRenderList, scene); // render scene\n\n    var opaqueObjects = currentRenderList.opaque;\n    var transmissiveObjects = currentRenderList.transmissive;\n    var transparentObjects = currentRenderList.transparent;\n    if (opaqueObjects.length > 0) renderObjects(opaqueObjects, scene, camera);\n    if (transmissiveObjects.length > 0) renderTransmissiveObjects(opaqueObjects, transmissiveObjects, scene, camera);\n    if (transparentObjects.length > 0) renderObjects(transparentObjects, scene, camera); //\n\n    if (_currentRenderTarget !== null) {\n      // resolve multisample renderbuffers to a single-sample texture if necessary\n      textures.updateMultisampleRenderTarget(_currentRenderTarget); // Generate mipmap if we're using any kind of mipmap filtering\n\n      textures.updateRenderTargetMipmap(_currentRenderTarget);\n    } //\n\n\n    if (scene.isScene === true) scene.onAfterRender(_this, scene, camera); // Ensure depth buffer writing is enabled so it can be cleared on next render\n\n    state.buffers.depth.setTest(true);\n    state.buffers.depth.setMask(true);\n    state.buffers.color.setMask(true);\n    state.setPolygonOffset(false); // _gl.finish();\n\n    bindingStates.resetDefaultState();\n    _currentMaterialId = -1;\n    _currentCamera = null;\n    renderStateStack.pop();\n\n    if (renderStateStack.length > 0) {\n      currentRenderState = renderStateStack[renderStateStack.length - 1];\n    } else {\n      currentRenderState = null;\n    }\n\n    renderListStack.pop();\n\n    if (renderListStack.length > 0) {\n      currentRenderList = renderListStack[renderListStack.length - 1];\n    } else {\n      currentRenderList = null;\n    }\n  };\n\n  function projectObject(object, camera, groupOrder, sortObjects) {\n    if (object.visible === false) return;\n    var visible = object.layers.test(camera.layers);\n\n    if (visible) {\n      if (object.isGroup) {\n        groupOrder = object.renderOrder;\n      } else if (object.isLOD) {\n        if (object.autoUpdate === true) object.update(camera);\n      } else if (object.isLight) {\n        currentRenderState.pushLight(object);\n\n        if (object.castShadow) {\n          currentRenderState.pushShadow(object);\n        }\n      } else if (object.isSprite) {\n        if (!object.frustumCulled || _frustum.intersectsSprite(object)) {\n          if (sortObjects) {\n            _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n          }\n\n          var geometry = objects.update(object);\n          var material = object.material;\n\n          if (material.visible) {\n            currentRenderList.push(object, geometry, material, groupOrder, _vector3.z, null);\n          }\n        }\n      } else if (object.isImmediateRenderObject) {\n        if (sortObjects) {\n          _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n        }\n\n        currentRenderList.push(object, null, object.material, groupOrder, _vector3.z, null);\n      } else if (object.isMesh || object.isLine || object.isPoints) {\n        if (object.isSkinnedMesh) {\n          // update skeleton only once in a frame\n          if (object.skeleton.frame !== info.render.frame) {\n            object.skeleton.update();\n            object.skeleton.frame = info.render.frame;\n          }\n        }\n\n        if (!object.frustumCulled || _frustum.intersectsObject(object)) {\n          if (sortObjects) {\n            _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n          }\n\n          var _geometry2 = objects.update(object);\n\n          var _material = object.material;\n\n          if (Array.isArray(_material)) {\n            var groups = _geometry2.groups;\n\n            for (var _i144 = 0, _l40 = groups.length; _i144 < _l40; _i144++) {\n              var group = groups[_i144];\n              var groupMaterial = _material[group.materialIndex];\n\n              if (groupMaterial && groupMaterial.visible) {\n                currentRenderList.push(object, _geometry2, groupMaterial, groupOrder, _vector3.z, group);\n              }\n            }\n          } else if (_material.visible) {\n            currentRenderList.push(object, _geometry2, _material, groupOrder, _vector3.z, null);\n          }\n        }\n      }\n    }\n\n    var children = object.children;\n\n    for (var _i145 = 0, _l41 = children.length; _i145 < _l41; _i145++) {\n      projectObject(children[_i145], camera, groupOrder, sortObjects);\n    }\n  }\n\n  function renderTransmissiveObjects(opaqueObjects, transmissiveObjects, scene, camera) {\n    if (_transmissionRenderTarget === null) {\n      var needsAntialias = _antialias === true && capabilities.isWebGL2 === true;\n      var renderTargetType = needsAntialias ? WebGLMultisampleRenderTarget : WebGLRenderTarget;\n      _transmissionRenderTarget = new renderTargetType(1024, 1024, {\n        generateMipmaps: true,\n        type: utils.convert(HalfFloatType) !== null ? HalfFloatType : UnsignedByteType,\n        minFilter: LinearMipmapLinearFilter,\n        magFilter: NearestFilter,\n        wrapS: ClampToEdgeWrapping,\n        wrapT: ClampToEdgeWrapping\n      });\n    }\n\n    var currentRenderTarget = _this.getRenderTarget();\n\n    _this.setRenderTarget(_transmissionRenderTarget);\n\n    _this.clear(); // Turn off the features which can affect the frag color for opaque objects pass.\n    // Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\n\n    var currentToneMapping = _this.toneMapping;\n    _this.toneMapping = NoToneMapping;\n    renderObjects(opaqueObjects, scene, camera);\n    _this.toneMapping = currentToneMapping;\n    textures.updateMultisampleRenderTarget(_transmissionRenderTarget);\n    textures.updateRenderTargetMipmap(_transmissionRenderTarget);\n\n    _this.setRenderTarget(currentRenderTarget);\n\n    renderObjects(transmissiveObjects, scene, camera);\n  }\n\n  function renderObjects(renderList, scene, camera) {\n    var overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n    if (camera.isArrayCamera) {\n      var cameras = camera.cameras;\n\n      for (var _i146 = 0, _l42 = cameras.length; _i146 < _l42; _i146++) {\n        var camera2 = cameras[_i146];\n        state.viewport(_currentViewport.copy(camera2.viewport));\n        currentRenderState.setupLightsView(camera2);\n\n        for (var j = 0, jl = renderList.length; j < jl; j++) {\n          var renderItem = renderList[j];\n          var object = renderItem.object;\n          var geometry = renderItem.geometry;\n          var material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n          var group = renderItem.group;\n\n          if (object.layers.test(camera2.layers)) {\n            renderObject(object, scene, camera2, geometry, material, group);\n          }\n        }\n      }\n    } else {\n      for (var _j6 = 0, _jl3 = renderList.length; _j6 < _jl3; _j6++) {\n        var _renderItem = renderList[_j6];\n        var _object = _renderItem.object;\n        var _geometry3 = _renderItem.geometry;\n\n        var _material2 = overrideMaterial === null ? _renderItem.material : overrideMaterial;\n\n        var _group3 = _renderItem.group;\n        renderObject(_object, scene, camera, _geometry3, _material2, _group3);\n      }\n    }\n  }\n\n  function renderObject(object, scene, camera, geometry, material, group) {\n    object.onBeforeRender(_this, scene, camera, geometry, material, group);\n    object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n    object.normalMatrix.getNormalMatrix(object.modelViewMatrix);\n\n    if (object.isImmediateRenderObject) {\n      var program = setProgram(camera, scene, material, object);\n      state.setMaterial(material);\n      bindingStates.reset();\n      renderObjectImmediate(object, program);\n    } else {\n      if (material.transparent === true && material.side === DoubleSide) {\n        material.side = BackSide;\n        material.needsUpdate = true;\n\n        _this.renderBufferDirect(camera, scene, geometry, material, object, group);\n\n        material.side = FrontSide;\n        material.needsUpdate = true;\n\n        _this.renderBufferDirect(camera, scene, geometry, material, object, group);\n\n        material.side = DoubleSide;\n      } else {\n        _this.renderBufferDirect(camera, scene, geometry, material, object, group);\n      }\n    }\n\n    object.onAfterRender(_this, scene, camera, geometry, material, group);\n  }\n\n  function getProgram(material, scene, object) {\n    if (scene.isScene !== true) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n    var materialProperties = properties.get(material);\n    var lights = currentRenderState.state.lights;\n    var shadowsArray = currentRenderState.state.shadowsArray;\n    var lightsStateVersion = lights.state.version;\n    var parameters = programCache.getParameters(material, lights.state, shadowsArray, scene, object);\n    var programCacheKey = programCache.getProgramCacheKey(parameters);\n    var programs = materialProperties.programs; // always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n    materialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n    materialProperties.fog = scene.fog;\n    materialProperties.envMap = (material.isMeshStandardMaterial ? cubeuvmaps : cubemaps).get(material.envMap || materialProperties.environment);\n\n    if (programs === undefined) {\n      // new material\n      material.addEventListener('dispose', onMaterialDispose);\n      programs = new Map();\n      materialProperties.programs = programs;\n    }\n\n    var program = programs.get(programCacheKey);\n\n    if (program !== undefined) {\n      // early out if program and light state is identical\n      if (materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion) {\n        updateCommonMaterialProperties(material, parameters);\n        return program;\n      }\n    } else {\n      parameters.uniforms = programCache.getUniforms(material);\n      material.onBuild(parameters, _this);\n      material.onBeforeCompile(parameters, _this);\n      program = programCache.acquireProgram(parameters, programCacheKey);\n      programs.set(programCacheKey, program);\n      materialProperties.uniforms = parameters.uniforms;\n    }\n\n    var uniforms = materialProperties.uniforms;\n\n    if (!material.isShaderMaterial && !material.isRawShaderMaterial || material.clipping === true) {\n      uniforms.clippingPlanes = clipping.uniform;\n    }\n\n    updateCommonMaterialProperties(material, parameters); // store the light setup it was created for\n\n    materialProperties.needsLights = materialNeedsLights(material);\n    materialProperties.lightsStateVersion = lightsStateVersion;\n\n    if (materialProperties.needsLights) {\n      // wire up the material to this renderer's lighting state\n      uniforms.ambientLightColor.value = lights.state.ambient;\n      uniforms.lightProbe.value = lights.state.probe;\n      uniforms.directionalLights.value = lights.state.directional;\n      uniforms.directionalLightShadows.value = lights.state.directionalShadow;\n      uniforms.spotLights.value = lights.state.spot;\n      uniforms.spotLightShadows.value = lights.state.spotShadow;\n      uniforms.rectAreaLights.value = lights.state.rectArea;\n      uniforms.ltc_1.value = lights.state.rectAreaLTC1;\n      uniforms.ltc_2.value = lights.state.rectAreaLTC2;\n      uniforms.pointLights.value = lights.state.point;\n      uniforms.pointLightShadows.value = lights.state.pointShadow;\n      uniforms.hemisphereLights.value = lights.state.hemi;\n      uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n      uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n      uniforms.spotShadowMap.value = lights.state.spotShadowMap;\n      uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n      uniforms.pointShadowMap.value = lights.state.pointShadowMap;\n      uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix; // TODO (abelnation): add area lights shadow info to uniforms\n    }\n\n    var progUniforms = program.getUniforms();\n    var uniformsList = WebGLUniforms.seqWithValue(progUniforms.seq, uniforms);\n    materialProperties.currentProgram = program;\n    materialProperties.uniformsList = uniformsList;\n    return program;\n  }\n\n  function updateCommonMaterialProperties(material, parameters) {\n    var materialProperties = properties.get(material);\n    materialProperties.outputEncoding = parameters.outputEncoding;\n    materialProperties.instancing = parameters.instancing;\n    materialProperties.skinning = parameters.skinning;\n    materialProperties.morphTargets = parameters.morphTargets;\n    materialProperties.morphNormals = parameters.morphNormals;\n    materialProperties.numClippingPlanes = parameters.numClippingPlanes;\n    materialProperties.numIntersection = parameters.numClipIntersection;\n    materialProperties.vertexAlphas = parameters.vertexAlphas;\n    materialProperties.vertexTangents = parameters.vertexTangents;\n  }\n\n  function setProgram(camera, scene, material, object) {\n    if (scene.isScene !== true) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n    textures.resetTextureUnits();\n    var fog = scene.fog;\n    var environment = material.isMeshStandardMaterial ? scene.environment : null;\n    var encoding = _currentRenderTarget === null ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n    var envMap = (material.isMeshStandardMaterial ? cubeuvmaps : cubemaps).get(material.envMap || environment);\n    var vertexAlphas = material.vertexColors === true && !!object.geometry && !!object.geometry.attributes.color && object.geometry.attributes.color.itemSize === 4;\n    var vertexTangents = !!object.geometry && !!object.geometry.attributes.tangent;\n    var morphTargets = !!object.geometry && !!object.geometry.morphAttributes.position;\n    var morphNormals = !!object.geometry && !!object.geometry.morphAttributes.normal;\n    var materialProperties = properties.get(material);\n    var lights = currentRenderState.state.lights;\n\n    if (_clippingEnabled === true) {\n      if (_localClippingEnabled === true || camera !== _currentCamera) {\n        var useCache = camera === _currentCamera && material.id === _currentMaterialId; // we might want to call this function with some ClippingGroup\n        // object instead of the material, once it becomes feasible\n        // (#8465, #8379)\n\n        clipping.setState(material, camera, useCache);\n      }\n    } //\n\n\n    var needsProgramChange = false;\n\n    if (material.version === materialProperties.__version) {\n      if (materialProperties.needsLights && materialProperties.lightsStateVersion !== lights.state.version) {\n        needsProgramChange = true;\n      } else if (materialProperties.outputEncoding !== encoding) {\n        needsProgramChange = true;\n      } else if (object.isInstancedMesh && materialProperties.instancing === false) {\n        needsProgramChange = true;\n      } else if (!object.isInstancedMesh && materialProperties.instancing === true) {\n        needsProgramChange = true;\n      } else if (object.isSkinnedMesh && materialProperties.skinning === false) {\n        needsProgramChange = true;\n      } else if (!object.isSkinnedMesh && materialProperties.skinning === true) {\n        needsProgramChange = true;\n      } else if (materialProperties.envMap !== envMap) {\n        needsProgramChange = true;\n      } else if (material.fog && materialProperties.fog !== fog) {\n        needsProgramChange = true;\n      } else if (materialProperties.numClippingPlanes !== undefined && (materialProperties.numClippingPlanes !== clipping.numPlanes || materialProperties.numIntersection !== clipping.numIntersection)) {\n        needsProgramChange = true;\n      } else if (materialProperties.vertexAlphas !== vertexAlphas) {\n        needsProgramChange = true;\n      } else if (materialProperties.vertexTangents !== vertexTangents) {\n        needsProgramChange = true;\n      } else if (materialProperties.morphTargets !== morphTargets) {\n        needsProgramChange = true;\n      } else if (materialProperties.morphNormals !== morphNormals) {\n        needsProgramChange = true;\n      }\n    } else {\n      needsProgramChange = true;\n      materialProperties.__version = material.version;\n    } //\n\n\n    var program = materialProperties.currentProgram;\n\n    if (needsProgramChange === true) {\n      program = getProgram(material, scene, object);\n    }\n\n    var refreshProgram = false;\n    var refreshMaterial = false;\n    var refreshLights = false;\n    var p_uniforms = program.getUniforms(),\n        m_uniforms = materialProperties.uniforms;\n\n    if (state.useProgram(program.program)) {\n      refreshProgram = true;\n      refreshMaterial = true;\n      refreshLights = true;\n    }\n\n    if (material.id !== _currentMaterialId) {\n      _currentMaterialId = material.id;\n      refreshMaterial = true;\n    }\n\n    if (refreshProgram || _currentCamera !== camera) {\n      p_uniforms.setValue(_gl, 'projectionMatrix', camera.projectionMatrix);\n\n      if (capabilities.logarithmicDepthBuffer) {\n        p_uniforms.setValue(_gl, 'logDepthBufFC', 2.0 / (Math.log(camera.far + 1.0) / Math.LN2));\n      }\n\n      if (_currentCamera !== camera) {\n        _currentCamera = camera; // lighting uniforms depend on the camera so enforce an update\n        // now, in case this material supports lights - or later, when\n        // the next material that does gets activated:\n\n        refreshMaterial = true; // set to true on material change\n\n        refreshLights = true; // remains set until update done\n      } // load material specific uniforms\n      // (shader material also gets them for the sake of genericity)\n\n\n      if (material.isShaderMaterial || material.isMeshPhongMaterial || material.isMeshToonMaterial || material.isMeshStandardMaterial || material.envMap) {\n        var uCamPos = p_uniforms.map.cameraPosition;\n\n        if (uCamPos !== undefined) {\n          uCamPos.setValue(_gl, _vector3.setFromMatrixPosition(camera.matrixWorld));\n        }\n      }\n\n      if (material.isMeshPhongMaterial || material.isMeshToonMaterial || material.isMeshLambertMaterial || material.isMeshBasicMaterial || material.isMeshStandardMaterial || material.isShaderMaterial) {\n        p_uniforms.setValue(_gl, 'isOrthographic', camera.isOrthographicCamera === true);\n      }\n\n      if (material.isMeshPhongMaterial || material.isMeshToonMaterial || material.isMeshLambertMaterial || material.isMeshBasicMaterial || material.isMeshStandardMaterial || material.isShaderMaterial || material.isShadowMaterial || object.isSkinnedMesh) {\n        p_uniforms.setValue(_gl, 'viewMatrix', camera.matrixWorldInverse);\n      }\n    } // skinning uniforms must be set even if material didn't change\n    // auto-setting of texture unit for bone texture must go before other textures\n    // otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\n    if (object.isSkinnedMesh) {\n      p_uniforms.setOptional(_gl, object, 'bindMatrix');\n      p_uniforms.setOptional(_gl, object, 'bindMatrixInverse');\n      var skeleton = object.skeleton;\n\n      if (skeleton) {\n        if (capabilities.floatVertexTextures) {\n          if (skeleton.boneTexture === null) skeleton.computeBoneTexture();\n          p_uniforms.setValue(_gl, 'boneTexture', skeleton.boneTexture, textures);\n          p_uniforms.setValue(_gl, 'boneTextureSize', skeleton.boneTextureSize);\n        } else {\n          p_uniforms.setOptional(_gl, skeleton, 'boneMatrices');\n        }\n      }\n    }\n\n    if (refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow) {\n      materialProperties.receiveShadow = object.receiveShadow;\n      p_uniforms.setValue(_gl, 'receiveShadow', object.receiveShadow);\n    }\n\n    if (refreshMaterial) {\n      p_uniforms.setValue(_gl, 'toneMappingExposure', _this.toneMappingExposure);\n\n      if (materialProperties.needsLights) {\n        // the current material requires lighting info\n        // note: all lighting uniforms are always set correctly\n        // they simply reference the renderer's state for their\n        // values\n        //\n        // use the current material's .needsUpdate flags to set\n        // the GL state when required\n        markUniformsLightsNeedsUpdate(m_uniforms, refreshLights);\n      } // refresh uniforms common to several materials\n\n\n      if (fog && material.fog) {\n        materials.refreshFogUniforms(m_uniforms, fog);\n      }\n\n      materials.refreshMaterialUniforms(m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget);\n      WebGLUniforms.upload(_gl, materialProperties.uniformsList, m_uniforms, textures);\n    }\n\n    if (material.isShaderMaterial && material.uniformsNeedUpdate === true) {\n      WebGLUniforms.upload(_gl, materialProperties.uniformsList, m_uniforms, textures);\n      material.uniformsNeedUpdate = false;\n    }\n\n    if (material.isSpriteMaterial) {\n      p_uniforms.setValue(_gl, 'center', object.center);\n    } // common matrices\n\n\n    p_uniforms.setValue(_gl, 'modelViewMatrix', object.modelViewMatrix);\n    p_uniforms.setValue(_gl, 'normalMatrix', object.normalMatrix);\n    p_uniforms.setValue(_gl, 'modelMatrix', object.matrixWorld);\n    return program;\n  } // If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\n  function markUniformsLightsNeedsUpdate(uniforms, value) {\n    uniforms.ambientLightColor.needsUpdate = value;\n    uniforms.lightProbe.needsUpdate = value;\n    uniforms.directionalLights.needsUpdate = value;\n    uniforms.directionalLightShadows.needsUpdate = value;\n    uniforms.pointLights.needsUpdate = value;\n    uniforms.pointLightShadows.needsUpdate = value;\n    uniforms.spotLights.needsUpdate = value;\n    uniforms.spotLightShadows.needsUpdate = value;\n    uniforms.rectAreaLights.needsUpdate = value;\n    uniforms.hemisphereLights.needsUpdate = value;\n  }\n\n  function materialNeedsLights(material) {\n    return material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial || material.isMeshStandardMaterial || material.isShadowMaterial || material.isShaderMaterial && material.lights === true;\n  }\n\n  this.getActiveCubeFace = function () {\n    return _currentActiveCubeFace;\n  };\n\n  this.getActiveMipmapLevel = function () {\n    return _currentActiveMipmapLevel;\n  };\n\n  this.getRenderTarget = function () {\n    return _currentRenderTarget;\n  };\n\n  this.setRenderTarget = function (renderTarget) {\n    var activeCubeFace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var activeMipmapLevel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    _currentRenderTarget = renderTarget;\n    _currentActiveCubeFace = activeCubeFace;\n    _currentActiveMipmapLevel = activeMipmapLevel;\n\n    if (renderTarget && properties.get(renderTarget).__webglFramebuffer === undefined) {\n      textures.setupRenderTarget(renderTarget);\n    }\n\n    var framebuffer = null;\n    var isCube = false;\n    var isRenderTarget3D = false;\n\n    if (renderTarget) {\n      var texture = renderTarget.texture;\n\n      if (texture.isDataTexture3D || texture.isDataTexture2DArray) {\n        isRenderTarget3D = true;\n      }\n\n      var __webglFramebuffer = properties.get(renderTarget).__webglFramebuffer;\n\n      if (renderTarget.isWebGLCubeRenderTarget) {\n        framebuffer = __webglFramebuffer[activeCubeFace];\n        isCube = true;\n      } else if (renderTarget.isWebGLMultisampleRenderTarget) {\n        framebuffer = properties.get(renderTarget).__webglMultisampledFramebuffer;\n      } else {\n        framebuffer = __webglFramebuffer;\n      }\n\n      _currentViewport.copy(renderTarget.viewport);\n\n      _currentScissor.copy(renderTarget.scissor);\n\n      _currentScissorTest = renderTarget.scissorTest;\n    } else {\n      _currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor();\n\n      _currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor();\n\n      _currentScissorTest = _scissorTest;\n    }\n\n    var framebufferBound = state.bindFramebuffer(36160, framebuffer);\n\n    if (framebufferBound && capabilities.drawBuffers) {\n      var needsUpdate = false;\n\n      if (renderTarget) {\n        if (renderTarget.isWebGLMultipleRenderTargets) {\n          var _textures2 = renderTarget.texture;\n\n          if (_currentDrawBuffers.length !== _textures2.length || _currentDrawBuffers[0] !== 36064) {\n            for (var _i147 = 0, il = _textures2.length; _i147 < il; _i147++) {\n              _currentDrawBuffers[_i147] = 36064 + _i147;\n            }\n\n            _currentDrawBuffers.length = _textures2.length;\n            needsUpdate = true;\n          }\n        } else {\n          if (_currentDrawBuffers.length !== 1 || _currentDrawBuffers[0] !== 36064) {\n            _currentDrawBuffers[0] = 36064;\n            _currentDrawBuffers.length = 1;\n            needsUpdate = true;\n          }\n        }\n      } else {\n        if (_currentDrawBuffers.length !== 1 || _currentDrawBuffers[0] !== 1029) {\n          _currentDrawBuffers[0] = 1029;\n          _currentDrawBuffers.length = 1;\n          needsUpdate = true;\n        }\n      }\n\n      if (needsUpdate) {\n        if (capabilities.isWebGL2) {\n          _gl.drawBuffers(_currentDrawBuffers);\n        } else {\n          extensions.get('WEBGL_draw_buffers').drawBuffersWEBGL(_currentDrawBuffers);\n        }\n      }\n    }\n\n    state.viewport(_currentViewport);\n    state.scissor(_currentScissor);\n    state.setScissorTest(_currentScissorTest);\n\n    if (isCube) {\n      var textureProperties = properties.get(renderTarget.texture);\n\n      _gl.framebufferTexture2D(36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel);\n    } else if (isRenderTarget3D) {\n      var _textureProperties = properties.get(renderTarget.texture);\n\n      var layer = activeCubeFace || 0;\n\n      _gl.framebufferTextureLayer(36160, 36064, _textureProperties.__webglTexture, activeMipmapLevel || 0, layer);\n    }\n  };\n\n  this.readRenderTargetPixels = function (renderTarget, x, y, width, height, buffer, activeCubeFaceIndex) {\n    if (!(renderTarget && renderTarget.isWebGLRenderTarget)) {\n      console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.');\n      return;\n    }\n\n    var framebuffer = properties.get(renderTarget).__webglFramebuffer;\n\n    if (renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined) {\n      framebuffer = framebuffer[activeCubeFaceIndex];\n    }\n\n    if (framebuffer) {\n      state.bindFramebuffer(36160, framebuffer);\n\n      try {\n        var texture = renderTarget.texture;\n        var textureFormat = texture.format;\n        var textureType = texture.type;\n\n        if (textureFormat !== RGBAFormat && utils.convert(textureFormat) !== _gl.getParameter(35739)) {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.');\n          return;\n        }\n\n        var halfFloatSupportedByExt = textureType === HalfFloatType && (extensions.has('EXT_color_buffer_half_float') || capabilities.isWebGL2 && extensions.has('EXT_color_buffer_float'));\n\n        if (textureType !== UnsignedByteType && utils.convert(textureType) !== _gl.getParameter(35738) && // Edge and Chrome Mac < 52 (#9513)\n        !(textureType === FloatType && (capabilities.isWebGL2 || extensions.has('OES_texture_float') || extensions.has('WEBGL_color_buffer_float'))) && // Chrome Mac >= 52 and Firefox\n        !halfFloatSupportedByExt) {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.');\n          return;\n        }\n\n        if (_gl.checkFramebufferStatus(36160) === 36053) {\n          // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n          if (x >= 0 && x <= renderTarget.width - width && y >= 0 && y <= renderTarget.height - height) {\n            _gl.readPixels(x, y, width, height, utils.convert(textureFormat), utils.convert(textureType), buffer);\n          }\n        } else {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.');\n        }\n      } finally {\n        // restore framebuffer of current render target if necessary\n        var _framebuffer = _currentRenderTarget !== null ? properties.get(_currentRenderTarget).__webglFramebuffer : null;\n\n        state.bindFramebuffer(36160, _framebuffer);\n      }\n    }\n  };\n\n  this.copyFramebufferToTexture = function (position, texture) {\n    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var levelScale = Math.pow(2, -level);\n    var width = Math.floor(texture.image.width * levelScale);\n    var height = Math.floor(texture.image.height * levelScale);\n    var glFormat = utils.convert(texture.format);\n\n    if (capabilities.isWebGL2) {\n      // Workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=1120100\n      // Not needed in Chrome 93+\n      if (glFormat === 6407) glFormat = 32849;\n      if (glFormat === 6408) glFormat = 32856;\n    }\n\n    textures.setTexture2D(texture, 0);\n\n    _gl.copyTexImage2D(3553, level, glFormat, position.x, position.y, width, height, 0);\n\n    state.unbindTexture();\n  };\n\n  this.copyTextureToTexture = function (position, srcTexture, dstTexture) {\n    var level = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var width = srcTexture.image.width;\n    var height = srcTexture.image.height;\n    var glFormat = utils.convert(dstTexture.format);\n    var glType = utils.convert(dstTexture.type);\n    textures.setTexture2D(dstTexture, 0); // As another texture upload may have changed pixelStorei\n    // parameters, make sure they are correct for the dstTexture\n\n    _gl.pixelStorei(37440, dstTexture.flipY);\n\n    _gl.pixelStorei(37441, dstTexture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, dstTexture.unpackAlignment);\n\n    if (srcTexture.isDataTexture) {\n      _gl.texSubImage2D(3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data);\n    } else {\n      if (srcTexture.isCompressedTexture) {\n        _gl.compressedTexSubImage2D(3553, level, position.x, position.y, srcTexture.mipmaps[0].width, srcTexture.mipmaps[0].height, glFormat, srcTexture.mipmaps[0].data);\n      } else {\n        _gl.texSubImage2D(3553, level, position.x, position.y, glFormat, glType, srcTexture.image);\n      }\n    } // Generate mipmaps only when copying level 0\n\n\n    if (level === 0 && dstTexture.generateMipmaps) _gl.generateMipmap(3553);\n    state.unbindTexture();\n  };\n\n  this.copyTextureToTexture3D = function (sourceBox, position, srcTexture, dstTexture) {\n    var level = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\n    if (_this.isWebGL1Renderer) {\n      console.warn('THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.');\n      return;\n    }\n\n    var width = sourceBox.max.x - sourceBox.min.x + 1;\n    var height = sourceBox.max.y - sourceBox.min.y + 1;\n    var depth = sourceBox.max.z - sourceBox.min.z + 1;\n    var glFormat = utils.convert(dstTexture.format);\n    var glType = utils.convert(dstTexture.type);\n    var glTarget;\n\n    if (dstTexture.isDataTexture3D) {\n      textures.setTexture3D(dstTexture, 0);\n      glTarget = 32879;\n    } else if (dstTexture.isDataTexture2DArray) {\n      textures.setTexture2DArray(dstTexture, 0);\n      glTarget = 35866;\n    } else {\n      console.warn('THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.');\n      return;\n    }\n\n    _gl.pixelStorei(37440, dstTexture.flipY);\n\n    _gl.pixelStorei(37441, dstTexture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, dstTexture.unpackAlignment);\n\n    var unpackRowLen = _gl.getParameter(3314);\n\n    var unpackImageHeight = _gl.getParameter(32878);\n\n    var unpackSkipPixels = _gl.getParameter(3316);\n\n    var unpackSkipRows = _gl.getParameter(3315);\n\n    var unpackSkipImages = _gl.getParameter(32877);\n\n    var image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[0] : srcTexture.image;\n\n    _gl.pixelStorei(3314, image.width);\n\n    _gl.pixelStorei(32878, image.height);\n\n    _gl.pixelStorei(3316, sourceBox.min.x);\n\n    _gl.pixelStorei(3315, sourceBox.min.y);\n\n    _gl.pixelStorei(32877, sourceBox.min.z);\n\n    if (srcTexture.isDataTexture || srcTexture.isDataTexture3D) {\n      _gl.texSubImage3D(glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data);\n    } else {\n      if (srcTexture.isCompressedTexture) {\n        console.warn('THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.');\n\n        _gl.compressedTexSubImage3D(glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data);\n      } else {\n        _gl.texSubImage3D(glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image);\n      }\n    }\n\n    _gl.pixelStorei(3314, unpackRowLen);\n\n    _gl.pixelStorei(32878, unpackImageHeight);\n\n    _gl.pixelStorei(3316, unpackSkipPixels);\n\n    _gl.pixelStorei(3315, unpackSkipRows);\n\n    _gl.pixelStorei(32877, unpackSkipImages); // Generate mipmaps only when copying level 0\n\n\n    if (level === 0 && dstTexture.generateMipmaps) _gl.generateMipmap(glTarget);\n    state.unbindTexture();\n  };\n\n  this.initTexture = function (texture) {\n    textures.setTexture2D(texture, 0);\n    state.unbindTexture();\n  };\n\n  this.resetState = function () {\n    _currentActiveCubeFace = 0;\n    _currentActiveMipmapLevel = 0;\n    _currentRenderTarget = null;\n    state.reset();\n    bindingStates.reset();\n  };\n\n  if (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n    __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('observe', {\n      detail: this\n    })); // eslint-disable-line no-undef\n\n  }\n}\n\nvar WebGL1Renderer = /*#__PURE__*/function (_WebGLRenderer) {\n  _inherits(WebGL1Renderer, _WebGLRenderer);\n\n  var _super33 = _createSuper(WebGL1Renderer);\n\n  function WebGL1Renderer() {\n    _classCallCheck(this, WebGL1Renderer);\n\n    return _super33.apply(this, arguments);\n  }\n\n  return WebGL1Renderer;\n}(WebGLRenderer);\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nvar Scene = /*#__PURE__*/function (_Object3D5) {\n  _inherits(Scene, _Object3D5);\n\n  var _super34 = _createSuper(Scene);\n\n  function Scene() {\n    var _this36;\n\n    _classCallCheck(this, Scene);\n\n    _this36 = _super34.call(this);\n    _this36.type = 'Scene';\n    _this36.background = null;\n    _this36.environment = null;\n    _this36.fog = null;\n    _this36.overrideMaterial = null;\n    _this36.autoUpdate = true; // checked by the renderer\n\n    if (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n      __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('observe', {\n        detail: _assertThisInitialized(_this36)\n      })); // eslint-disable-line no-undef\n\n    }\n\n    return _this36;\n  }\n\n  _createClass(Scene, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(Scene.prototype), \"copy\", this).call(this, source, recursive);\n\n      if (source.background !== null) this.background = source.background.clone();\n      if (source.environment !== null) this.environment = source.environment.clone();\n      if (source.fog !== null) this.fog = source.fog.clone();\n      if (source.overrideMaterial !== null) this.overrideMaterial = source.overrideMaterial.clone();\n      this.autoUpdate = source.autoUpdate;\n      this.matrixAutoUpdate = source.matrixAutoUpdate;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(Scene.prototype), \"toJSON\", this).call(this, meta);\n\n      if (this.fog !== null) data.object.fog = this.fog.toJSON();\n      return data;\n    }\n  }]);\n\n  return Scene;\n}(Object3D);\n\nScene.prototype.isScene = true;\n\nvar InterleavedBuffer = /*#__PURE__*/function () {\n  function InterleavedBuffer(array, stride) {\n    _classCallCheck(this, InterleavedBuffer);\n\n    this.array = array;\n    this.stride = stride;\n    this.count = array !== undefined ? array.length / stride : 0;\n    this.usage = StaticDrawUsage;\n    this.updateRange = {\n      offset: 0,\n      count: -1\n    };\n    this.version = 0;\n    this.uuid = generateUUID();\n  }\n\n  _createClass(InterleavedBuffer, [{\n    key: \"onUploadCallback\",\n    value: function onUploadCallback() {}\n  }, {\n    key: \"needsUpdate\",\n    set: function set(value) {\n      if (value === true) this.version++;\n    }\n  }, {\n    key: \"setUsage\",\n    value: function setUsage(value) {\n      this.usage = value;\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.array = new source.array.constructor(source.array);\n      this.count = source.count;\n      this.stride = source.stride;\n      this.usage = source.usage;\n      return this;\n    }\n  }, {\n    key: \"copyAt\",\n    value: function copyAt(index1, attribute, index2) {\n      index1 *= this.stride;\n      index2 *= attribute.stride;\n\n      for (var _i148 = 0, _l43 = this.stride; _i148 < _l43; _i148++) {\n        this.array[index1 + _i148] = attribute.array[index2 + _i148];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"set\",\n    value: function set(value) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.array.set(value, offset);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(data) {\n      if (data.arrayBuffers === undefined) {\n        data.arrayBuffers = {};\n      }\n\n      if (this.array.buffer._uuid === undefined) {\n        this.array.buffer._uuid = generateUUID();\n      }\n\n      if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n        data.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer;\n      }\n\n      var array = new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]);\n      var ib = new this.constructor(array, this.stride);\n      ib.setUsage(this.usage);\n      return ib;\n    }\n  }, {\n    key: \"onUpload\",\n    value: function onUpload(callback) {\n      this.onUploadCallback = callback;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(data) {\n      if (data.arrayBuffers === undefined) {\n        data.arrayBuffers = {};\n      } // generate UUID for array buffer if necessary\n\n\n      if (this.array.buffer._uuid === undefined) {\n        this.array.buffer._uuid = generateUUID();\n      }\n\n      if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n        data.arrayBuffers[this.array.buffer._uuid] = Array.prototype.slice.call(new Uint32Array(this.array.buffer));\n      } //\n\n\n      return {\n        uuid: this.uuid,\n        buffer: this.array.buffer._uuid,\n        type: this.array.constructor.name,\n        stride: this.stride\n      };\n    }\n  }]);\n\n  return InterleavedBuffer;\n}();\n\nInterleavedBuffer.prototype.isInterleavedBuffer = true;\n\nvar _vector$6 = /*@__PURE__*/new Vector3();\n\nvar InterleavedBufferAttribute = /*#__PURE__*/function () {\n  function InterleavedBufferAttribute(interleavedBuffer, itemSize, offset) {\n    var normalized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    _classCallCheck(this, InterleavedBufferAttribute);\n\n    this.name = '';\n    this.data = interleavedBuffer;\n    this.itemSize = itemSize;\n    this.offset = offset;\n    this.normalized = normalized === true;\n  }\n\n  _createClass(InterleavedBufferAttribute, [{\n    key: \"count\",\n    get: function get() {\n      return this.data.count;\n    }\n  }, {\n    key: \"array\",\n    get: function get() {\n      return this.data.array;\n    }\n  }, {\n    key: \"needsUpdate\",\n    set: function set(value) {\n      this.data.needsUpdate = value;\n    }\n  }, {\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(m) {\n      for (var _i149 = 0, _l44 = this.data.count; _i149 < _l44; _i149++) {\n        _vector$6.x = this.getX(_i149);\n        _vector$6.y = this.getY(_i149);\n        _vector$6.z = this.getZ(_i149);\n\n        _vector$6.applyMatrix4(m);\n\n        this.setXYZ(_i149, _vector$6.x, _vector$6.y, _vector$6.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"applyNormalMatrix\",\n    value: function applyNormalMatrix(m) {\n      for (var _i150 = 0, _l45 = this.count; _i150 < _l45; _i150++) {\n        _vector$6.x = this.getX(_i150);\n        _vector$6.y = this.getY(_i150);\n        _vector$6.z = this.getZ(_i150);\n\n        _vector$6.applyNormalMatrix(m);\n\n        this.setXYZ(_i150, _vector$6.x, _vector$6.y, _vector$6.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(m) {\n      for (var _i151 = 0, _l46 = this.count; _i151 < _l46; _i151++) {\n        _vector$6.x = this.getX(_i151);\n        _vector$6.y = this.getY(_i151);\n        _vector$6.z = this.getZ(_i151);\n\n        _vector$6.transformDirection(m);\n\n        this.setXYZ(_i151, _vector$6.x, _vector$6.y, _vector$6.z);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(index, x) {\n      this.data.array[index * this.data.stride + this.offset] = x;\n      return this;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(index, y) {\n      this.data.array[index * this.data.stride + this.offset + 1] = y;\n      return this;\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(index, z) {\n      this.data.array[index * this.data.stride + this.offset + 2] = z;\n      return this;\n    }\n  }, {\n    key: \"setW\",\n    value: function setW(index, w) {\n      this.data.array[index * this.data.stride + this.offset + 3] = w;\n      return this;\n    }\n  }, {\n    key: \"getX\",\n    value: function getX(index) {\n      return this.data.array[index * this.data.stride + this.offset];\n    }\n  }, {\n    key: \"getY\",\n    value: function getY(index) {\n      return this.data.array[index * this.data.stride + this.offset + 1];\n    }\n  }, {\n    key: \"getZ\",\n    value: function getZ(index) {\n      return this.data.array[index * this.data.stride + this.offset + 2];\n    }\n  }, {\n    key: \"getW\",\n    value: function getW(index) {\n      return this.data.array[index * this.data.stride + this.offset + 3];\n    }\n  }, {\n    key: \"setXY\",\n    value: function setXY(index, x, y) {\n      index = index * this.data.stride + this.offset;\n      this.data.array[index + 0] = x;\n      this.data.array[index + 1] = y;\n      return this;\n    }\n  }, {\n    key: \"setXYZ\",\n    value: function setXYZ(index, x, y, z) {\n      index = index * this.data.stride + this.offset;\n      this.data.array[index + 0] = x;\n      this.data.array[index + 1] = y;\n      this.data.array[index + 2] = z;\n      return this;\n    }\n  }, {\n    key: \"setXYZW\",\n    value: function setXYZW(index, x, y, z, w) {\n      index = index * this.data.stride + this.offset;\n      this.data.array[index + 0] = x;\n      this.data.array[index + 1] = y;\n      this.data.array[index + 2] = z;\n      this.data.array[index + 3] = w;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(data) {\n      if (data === undefined) {\n        console.log('THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.');\n        var array = [];\n\n        for (var _i152 = 0; _i152 < this.count; _i152++) {\n          var index = _i152 * this.data.stride + this.offset;\n\n          for (var j = 0; j < this.itemSize; j++) {\n            array.push(this.data.array[index + j]);\n          }\n        }\n\n        return new BufferAttribute(new this.array.constructor(array), this.itemSize, this.normalized);\n      } else {\n        if (data.interleavedBuffers === undefined) {\n          data.interleavedBuffers = {};\n        }\n\n        if (data.interleavedBuffers[this.data.uuid] === undefined) {\n          data.interleavedBuffers[this.data.uuid] = this.data.clone(data);\n        }\n\n        return new InterleavedBufferAttribute(data.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);\n      }\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(data) {\n      if (data === undefined) {\n        console.log('THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.');\n        var array = [];\n\n        for (var _i153 = 0; _i153 < this.count; _i153++) {\n          var index = _i153 * this.data.stride + this.offset;\n\n          for (var j = 0; j < this.itemSize; j++) {\n            array.push(this.data.array[index + j]);\n          }\n        } // deinterleave data and save it as an ordinary buffer attribute for now\n\n\n        return {\n          itemSize: this.itemSize,\n          type: this.array.constructor.name,\n          array: array,\n          normalized: this.normalized\n        };\n      } else {\n        // save as true interlaved attribtue\n        if (data.interleavedBuffers === undefined) {\n          data.interleavedBuffers = {};\n        }\n\n        if (data.interleavedBuffers[this.data.uuid] === undefined) {\n          data.interleavedBuffers[this.data.uuid] = this.data.toJSON(data);\n        }\n\n        return {\n          isInterleavedBufferAttribute: true,\n          itemSize: this.itemSize,\n          data: this.data.uuid,\n          offset: this.offset,\n          normalized: this.normalized\n        };\n      }\n    }\n  }]);\n\n  return InterleavedBufferAttribute;\n}();\n\nInterleavedBufferAttribute.prototype.isInterleavedBufferAttribute = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nvar SpriteMaterial = /*#__PURE__*/function (_Material$5) {\n  _inherits(SpriteMaterial, _Material$5);\n\n  var _super35 = _createSuper(SpriteMaterial);\n\n  function SpriteMaterial(parameters) {\n    var _this37;\n\n    _classCallCheck(this, SpriteMaterial);\n\n    _this37 = _super35.call(this);\n    _this37.type = 'SpriteMaterial';\n    _this37.color = new Color(0xffffff);\n    _this37.map = null;\n    _this37.alphaMap = null;\n    _this37.rotation = 0;\n    _this37.sizeAttenuation = true;\n    _this37.transparent = true;\n\n    _this37.setValues(parameters);\n\n    return _this37;\n  }\n\n  _createClass(SpriteMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(SpriteMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.map = source.map;\n      this.alphaMap = source.alphaMap;\n      this.rotation = source.rotation;\n      this.sizeAttenuation = source.sizeAttenuation;\n      return this;\n    }\n  }]);\n\n  return SpriteMaterial;\n}(Material$1);\n\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nvar _geometry;\n\nvar _intersectPoint = /*@__PURE__*/new Vector3();\n\nvar _worldScale = /*@__PURE__*/new Vector3();\n\nvar _mvPosition = /*@__PURE__*/new Vector3();\n\nvar _alignedPosition = /*@__PURE__*/new Vector2();\n\nvar _rotatedPosition = /*@__PURE__*/new Vector2();\n\nvar _viewWorldMatrix = /*@__PURE__*/new Matrix4();\n\nvar _vA = /*@__PURE__*/new Vector3();\n\nvar _vB = /*@__PURE__*/new Vector3();\n\nvar _vC = /*@__PURE__*/new Vector3();\n\nvar _uvA = /*@__PURE__*/new Vector2();\n\nvar _uvB = /*@__PURE__*/new Vector2();\n\nvar _uvC = /*@__PURE__*/new Vector2();\n\nvar Sprite = /*#__PURE__*/function (_Object3D6) {\n  _inherits(Sprite, _Object3D6);\n\n  var _super36 = _createSuper(Sprite);\n\n  function Sprite(material) {\n    var _this38;\n\n    _classCallCheck(this, Sprite);\n\n    _this38 = _super36.call(this);\n    _this38.type = 'Sprite';\n\n    if (_geometry === undefined) {\n      _geometry = new BufferGeometry();\n      var float32Array = new Float32Array([-0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1, -0.5, 0.5, 0, 0, 1]);\n      var interleavedBuffer = new InterleavedBuffer(float32Array, 5);\n\n      _geometry.setIndex([0, 1, 2, 0, 2, 3]);\n\n      _geometry.setAttribute('position', new InterleavedBufferAttribute(interleavedBuffer, 3, 0, false));\n\n      _geometry.setAttribute('uv', new InterleavedBufferAttribute(interleavedBuffer, 2, 3, false));\n    }\n\n    _this38.geometry = _geometry;\n    _this38.material = material !== undefined ? material : new SpriteMaterial();\n    _this38.center = new Vector2(0.5, 0.5);\n    return _this38;\n  }\n\n  _createClass(Sprite, [{\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      if (raycaster.camera === null) {\n        console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.');\n      }\n\n      _worldScale.setFromMatrixScale(this.matrixWorld);\n\n      _viewWorldMatrix.copy(raycaster.camera.matrixWorld);\n\n      this.modelViewMatrix.multiplyMatrices(raycaster.camera.matrixWorldInverse, this.matrixWorld);\n\n      _mvPosition.setFromMatrixPosition(this.modelViewMatrix);\n\n      if (raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false) {\n        _worldScale.multiplyScalar(-_mvPosition.z);\n      }\n\n      var rotation = this.material.rotation;\n      var sin, cos;\n\n      if (rotation !== 0) {\n        cos = Math.cos(rotation);\n        sin = Math.sin(rotation);\n      }\n\n      var center = this.center;\n      transformVertex(_vA.set(-0.5, -0.5, 0), _mvPosition, center, _worldScale, sin, cos);\n      transformVertex(_vB.set(0.5, -0.5, 0), _mvPosition, center, _worldScale, sin, cos);\n      transformVertex(_vC.set(0.5, 0.5, 0), _mvPosition, center, _worldScale, sin, cos);\n\n      _uvA.set(0, 0);\n\n      _uvB.set(1, 0);\n\n      _uvC.set(1, 1); // check first triangle\n\n\n      var intersect = raycaster.ray.intersectTriangle(_vA, _vB, _vC, false, _intersectPoint);\n\n      if (intersect === null) {\n        // check second triangle\n        transformVertex(_vB.set(-0.5, 0.5, 0), _mvPosition, center, _worldScale, sin, cos);\n\n        _uvB.set(0, 1);\n\n        intersect = raycaster.ray.intersectTriangle(_vA, _vC, _vB, false, _intersectPoint);\n\n        if (intersect === null) {\n          return;\n        }\n      }\n\n      var distance = raycaster.ray.origin.distanceTo(_intersectPoint);\n      if (distance < raycaster.near || distance > raycaster.far) return;\n      intersects.push({\n        distance: distance,\n        point: _intersectPoint.clone(),\n        uv: Triangle.getUV(_intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2()),\n        face: null,\n        object: this\n      });\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Sprite.prototype), \"copy\", this).call(this, source);\n\n      if (source.center !== undefined) this.center.copy(source.center);\n      this.material = source.material;\n      return this;\n    }\n  }]);\n\n  return Sprite;\n}(Object3D);\n\nSprite.prototype.isSprite = true;\n\nfunction transformVertex(vertexPosition, mvPosition, center, scale, sin, cos) {\n  // compute position in camera space\n  _alignedPosition.subVectors(vertexPosition, center).addScalar(0.5).multiply(scale); // to check if rotation is not zero\n\n\n  if (sin !== undefined) {\n    _rotatedPosition.x = cos * _alignedPosition.x - sin * _alignedPosition.y;\n    _rotatedPosition.y = sin * _alignedPosition.x + cos * _alignedPosition.y;\n  } else {\n    _rotatedPosition.copy(_alignedPosition);\n  }\n\n  vertexPosition.copy(mvPosition);\n  vertexPosition.x += _rotatedPosition.x;\n  vertexPosition.y += _rotatedPosition.y; // transform to world space\n\n  vertexPosition.applyMatrix4(_viewWorldMatrix);\n}\n\nvar _basePosition = /*@__PURE__*/new Vector3();\n\nvar _skinIndex = /*@__PURE__*/new Vector4();\n\nvar _skinWeight = /*@__PURE__*/new Vector4();\n\nvar _vector$5 = /*@__PURE__*/new Vector3();\n\nvar _matrix = /*@__PURE__*/new Matrix4();\n\nvar SkinnedMesh = /*#__PURE__*/function (_Mesh) {\n  _inherits(SkinnedMesh, _Mesh);\n\n  var _super37 = _createSuper(SkinnedMesh);\n\n  function SkinnedMesh(geometry, material) {\n    var _this39;\n\n    _classCallCheck(this, SkinnedMesh);\n\n    _this39 = _super37.call(this, geometry, material);\n    _this39.type = 'SkinnedMesh';\n    _this39.bindMode = 'attached';\n    _this39.bindMatrix = new Matrix4();\n    _this39.bindMatrixInverse = new Matrix4();\n    return _this39;\n  }\n\n  _createClass(SkinnedMesh, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(SkinnedMesh.prototype), \"copy\", this).call(this, source);\n\n      this.bindMode = source.bindMode;\n      this.bindMatrix.copy(source.bindMatrix);\n      this.bindMatrixInverse.copy(source.bindMatrixInverse);\n      this.skeleton = source.skeleton;\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(skeleton, bindMatrix) {\n      this.skeleton = skeleton;\n\n      if (bindMatrix === undefined) {\n        this.updateMatrixWorld(true);\n        this.skeleton.calculateInverses();\n        bindMatrix = this.matrixWorld;\n      }\n\n      this.bindMatrix.copy(bindMatrix);\n      this.bindMatrixInverse.copy(bindMatrix).invert();\n    }\n  }, {\n    key: \"pose\",\n    value: function pose() {\n      this.skeleton.pose();\n    }\n  }, {\n    key: \"normalizeSkinWeights\",\n    value: function normalizeSkinWeights() {\n      var vector = new Vector4();\n      var skinWeight = this.geometry.attributes.skinWeight;\n\n      for (var _i154 = 0, _l47 = skinWeight.count; _i154 < _l47; _i154++) {\n        vector.x = skinWeight.getX(_i154);\n        vector.y = skinWeight.getY(_i154);\n        vector.z = skinWeight.getZ(_i154);\n        vector.w = skinWeight.getW(_i154);\n        var scale = 1.0 / vector.manhattanLength();\n\n        if (scale !== Infinity) {\n          vector.multiplyScalar(scale);\n        } else {\n          vector.set(1, 0, 0, 0); // do something reasonable\n        }\n\n        skinWeight.setXYZW(_i154, vector.x, vector.y, vector.z, vector.w);\n      }\n    }\n  }, {\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      _get(_getPrototypeOf(SkinnedMesh.prototype), \"updateMatrixWorld\", this).call(this, force);\n\n      if (this.bindMode === 'attached') {\n        this.bindMatrixInverse.copy(this.matrixWorld).invert();\n      } else if (this.bindMode === 'detached') {\n        this.bindMatrixInverse.copy(this.bindMatrix).invert();\n      } else {\n        console.warn('THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode);\n      }\n    }\n  }, {\n    key: \"boneTransform\",\n    value: function boneTransform(index, target) {\n      var skeleton = this.skeleton;\n      var geometry = this.geometry;\n\n      _skinIndex.fromBufferAttribute(geometry.attributes.skinIndex, index);\n\n      _skinWeight.fromBufferAttribute(geometry.attributes.skinWeight, index);\n\n      _basePosition.fromBufferAttribute(geometry.attributes.position, index).applyMatrix4(this.bindMatrix);\n\n      target.set(0, 0, 0);\n\n      for (var _i155 = 0; _i155 < 4; _i155++) {\n        var weight = _skinWeight.getComponent(_i155);\n\n        if (weight !== 0) {\n          var boneIndex = _skinIndex.getComponent(_i155);\n\n          _matrix.multiplyMatrices(skeleton.bones[boneIndex].matrixWorld, skeleton.boneInverses[boneIndex]);\n\n          target.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix), weight);\n        }\n      }\n\n      return target.applyMatrix4(this.bindMatrixInverse);\n    }\n  }]);\n\n  return SkinnedMesh;\n}(Mesh);\n\nSkinnedMesh.prototype.isSkinnedMesh = true;\n\nvar Bone = /*#__PURE__*/function (_Object3D7) {\n  _inherits(Bone, _Object3D7);\n\n  var _super38 = _createSuper(Bone);\n\n  function Bone() {\n    var _this40;\n\n    _classCallCheck(this, Bone);\n\n    _this40 = _super38.call(this);\n    _this40.type = 'Bone';\n    return _this40;\n  }\n\n  return Bone;\n}(Object3D);\n\nBone.prototype.isBone = true;\n\nvar DataTexture = /*#__PURE__*/function (_Texture$4) {\n  _inherits(DataTexture, _Texture$4);\n\n  var _super39 = _createSuper(DataTexture);\n\n  function DataTexture() {\n    var _this41;\n\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var format = arguments.length > 3 ? arguments[3] : undefined;\n    var type = arguments.length > 4 ? arguments[4] : undefined;\n    var mapping = arguments.length > 5 ? arguments[5] : undefined;\n    var wrapS = arguments.length > 6 ? arguments[6] : undefined;\n    var wrapT = arguments.length > 7 ? arguments[7] : undefined;\n    var magFilter = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : NearestFilter;\n    var minFilter = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : NearestFilter;\n    var anisotropy = arguments.length > 10 ? arguments[10] : undefined;\n    var encoding = arguments.length > 11 ? arguments[11] : undefined;\n\n    _classCallCheck(this, DataTexture);\n\n    _this41 = _super39.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n    _this41.image = {\n      data: data,\n      width: width,\n      height: height\n    };\n    _this41.magFilter = magFilter;\n    _this41.minFilter = minFilter;\n    _this41.generateMipmaps = false;\n    _this41.flipY = false;\n    _this41.unpackAlignment = 1;\n    _this41.needsUpdate = true;\n    return _this41;\n  }\n\n  return DataTexture;\n}(Texture$1);\n\nDataTexture.prototype.isDataTexture = true;\n\nvar _offsetMatrix = /*@__PURE__*/new Matrix4();\n\nvar _identityMatrix = /*@__PURE__*/new Matrix4();\n\nvar Skeleton = /*#__PURE__*/function () {\n  function Skeleton() {\n    var bones = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var boneInverses = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Skeleton);\n\n    this.uuid = generateUUID();\n    this.bones = bones.slice(0);\n    this.boneInverses = boneInverses;\n    this.boneMatrices = null;\n    this.boneTexture = null;\n    this.boneTextureSize = 0;\n    this.frame = -1;\n    this.init();\n  }\n\n  _createClass(Skeleton, [{\n    key: \"init\",\n    value: function init() {\n      var bones = this.bones;\n      var boneInverses = this.boneInverses;\n      this.boneMatrices = new Float32Array(bones.length * 16); // calculate inverse bone matrices if necessary\n\n      if (boneInverses.length === 0) {\n        this.calculateInverses();\n      } else {\n        // handle special case\n        if (bones.length !== boneInverses.length) {\n          console.warn('THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.');\n          this.boneInverses = [];\n\n          for (var _i156 = 0, il = this.bones.length; _i156 < il; _i156++) {\n            this.boneInverses.push(new Matrix4());\n          }\n        }\n      }\n    }\n  }, {\n    key: \"calculateInverses\",\n    value: function calculateInverses() {\n      this.boneInverses.length = 0;\n\n      for (var _i157 = 0, il = this.bones.length; _i157 < il; _i157++) {\n        var inverse = new Matrix4();\n\n        if (this.bones[_i157]) {\n          inverse.copy(this.bones[_i157].matrixWorld).invert();\n        }\n\n        this.boneInverses.push(inverse);\n      }\n    }\n  }, {\n    key: \"pose\",\n    value: function pose() {\n      // recover the bind-time world matrices\n      for (var _i158 = 0, il = this.bones.length; _i158 < il; _i158++) {\n        var bone = this.bones[_i158];\n\n        if (bone) {\n          bone.matrixWorld.copy(this.boneInverses[_i158]).invert();\n        }\n      } // compute the local matrices, positions, rotations and scales\n\n\n      for (var _i159 = 0, _il12 = this.bones.length; _i159 < _il12; _i159++) {\n        var _bone = this.bones[_i159];\n\n        if (_bone) {\n          if (_bone.parent && _bone.parent.isBone) {\n            _bone.matrix.copy(_bone.parent.matrixWorld).invert();\n\n            _bone.matrix.multiply(_bone.matrixWorld);\n          } else {\n            _bone.matrix.copy(_bone.matrixWorld);\n          }\n\n          _bone.matrix.decompose(_bone.position, _bone.quaternion, _bone.scale);\n        }\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var bones = this.bones;\n      var boneInverses = this.boneInverses;\n      var boneMatrices = this.boneMatrices;\n      var boneTexture = this.boneTexture; // flatten bone matrices to array\n\n      for (var _i160 = 0, il = bones.length; _i160 < il; _i160++) {\n        // compute the offset between the current and the original transform\n        var matrix = bones[_i160] ? bones[_i160].matrixWorld : _identityMatrix;\n\n        _offsetMatrix.multiplyMatrices(matrix, boneInverses[_i160]);\n\n        _offsetMatrix.toArray(boneMatrices, _i160 * 16);\n      }\n\n      if (boneTexture !== null) {\n        boneTexture.needsUpdate = true;\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new Skeleton(this.bones, this.boneInverses);\n    }\n  }, {\n    key: \"computeBoneTexture\",\n    value: function computeBoneTexture() {\n      // layout (1 matrix = 4 pixels)\n      //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n      //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n      //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n      //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n      //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n      var size = Math.sqrt(this.bones.length * 4); // 4 pixels needed for 1 matrix\n\n      size = ceilPowerOfTwo(size);\n      size = Math.max(size, 4);\n      var boneMatrices = new Float32Array(size * size * 4); // 4 floats per RGBA pixel\n\n      boneMatrices.set(this.boneMatrices); // copy current values\n\n      var boneTexture = new DataTexture(boneMatrices, size, size, RGBAFormat, FloatType);\n      this.boneMatrices = boneMatrices;\n      this.boneTexture = boneTexture;\n      this.boneTextureSize = size;\n      return this;\n    }\n  }, {\n    key: \"getBoneByName\",\n    value: function getBoneByName(name) {\n      for (var _i161 = 0, il = this.bones.length; _i161 < il; _i161++) {\n        var bone = this.bones[_i161];\n\n        if (bone.name === name) {\n          return bone;\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.boneTexture !== null) {\n        this.boneTexture.dispose();\n        this.boneTexture = null;\n      }\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json, bones) {\n      this.uuid = json.uuid;\n\n      for (var _i162 = 0, _l48 = json.bones.length; _i162 < _l48; _i162++) {\n        var uuid = json.bones[_i162];\n        var bone = bones[uuid];\n\n        if (bone === undefined) {\n          console.warn('THREE.Skeleton: No bone found with UUID:', uuid);\n          bone = new Bone();\n        }\n\n        this.bones.push(bone);\n        this.boneInverses.push(new Matrix4().fromArray(json.boneInverses[_i162]));\n      }\n\n      this.init();\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = {\n        metadata: {\n          version: 4.5,\n          type: 'Skeleton',\n          generator: 'Skeleton.toJSON'\n        },\n        bones: [],\n        boneInverses: []\n      };\n      data.uuid = this.uuid;\n      var bones = this.bones;\n      var boneInverses = this.boneInverses;\n\n      for (var _i163 = 0, _l49 = bones.length; _i163 < _l49; _i163++) {\n        var bone = bones[_i163];\n        data.bones.push(bone.uuid);\n        var boneInverse = boneInverses[_i163];\n        data.boneInverses.push(boneInverse.toArray());\n      }\n\n      return data;\n    }\n  }]);\n\n  return Skeleton;\n}();\n\nvar _instanceLocalMatrix = /*@__PURE__*/new Matrix4();\n\nvar _instanceWorldMatrix = /*@__PURE__*/new Matrix4();\n\nvar _instanceIntersects = [];\n\nvar _mesh$1 = /*@__PURE__*/new Mesh();\n\nvar InstancedMesh = /*#__PURE__*/function (_Mesh2) {\n  _inherits(InstancedMesh, _Mesh2);\n\n  var _super40 = _createSuper(InstancedMesh);\n\n  function InstancedMesh(geometry, material, count) {\n    var _this42;\n\n    _classCallCheck(this, InstancedMesh);\n\n    _this42 = _super40.call(this, geometry, material);\n    _this42.instanceMatrix = new BufferAttribute(new Float32Array(count * 16), 16);\n    _this42.instanceColor = null;\n    _this42.count = count;\n    _this42.frustumCulled = false;\n    return _this42;\n  }\n\n  _createClass(InstancedMesh, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(InstancedMesh.prototype), \"copy\", this).call(this, source);\n\n      this.instanceMatrix.copy(source.instanceMatrix);\n      if (source.instanceColor !== null) this.instanceColor = source.instanceColor.clone();\n      this.count = source.count;\n      return this;\n    }\n  }, {\n    key: \"getColorAt\",\n    value: function getColorAt(index, color) {\n      color.fromArray(this.instanceColor.array, index * 3);\n    }\n  }, {\n    key: \"getMatrixAt\",\n    value: function getMatrixAt(index, matrix) {\n      matrix.fromArray(this.instanceMatrix.array, index * 16);\n    }\n  }, {\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      var matrixWorld = this.matrixWorld;\n      var raycastTimes = this.count;\n      _mesh$1.geometry = this.geometry;\n      _mesh$1.material = this.material;\n      if (_mesh$1.material === undefined) return;\n\n      for (var instanceId = 0; instanceId < raycastTimes; instanceId++) {\n        // calculate the world matrix for each instance\n        this.getMatrixAt(instanceId, _instanceLocalMatrix);\n\n        _instanceWorldMatrix.multiplyMatrices(matrixWorld, _instanceLocalMatrix); // the mesh represents this single instance\n\n\n        _mesh$1.matrixWorld = _instanceWorldMatrix;\n\n        _mesh$1.raycast(raycaster, _instanceIntersects); // process the result of raycast\n\n\n        for (var _i164 = 0, _l50 = _instanceIntersects.length; _i164 < _l50; _i164++) {\n          var intersect = _instanceIntersects[_i164];\n          intersect.instanceId = instanceId;\n          intersect.object = this;\n          intersects.push(intersect);\n        }\n\n        _instanceIntersects.length = 0;\n      }\n    }\n  }, {\n    key: \"setColorAt\",\n    value: function setColorAt(index, color) {\n      if (this.instanceColor === null) {\n        this.instanceColor = new BufferAttribute(new Float32Array(this.instanceMatrix.count * 3), 3);\n      }\n\n      color.toArray(this.instanceColor.array, index * 3);\n    }\n  }, {\n    key: \"setMatrixAt\",\n    value: function setMatrixAt(index, matrix) {\n      matrix.toArray(this.instanceMatrix.array, index * 16);\n    }\n  }, {\n    key: \"updateMorphTargets\",\n    value: function updateMorphTargets() {}\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }]);\n\n  return InstancedMesh;\n}(Mesh);\n\nInstancedMesh.prototype.isInstancedMesh = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nvar LineBasicMaterial = /*#__PURE__*/function (_Material$6) {\n  _inherits(LineBasicMaterial, _Material$6);\n\n  var _super41 = _createSuper(LineBasicMaterial);\n\n  function LineBasicMaterial(parameters) {\n    var _this43;\n\n    _classCallCheck(this, LineBasicMaterial);\n\n    _this43 = _super41.call(this);\n    _this43.type = 'LineBasicMaterial';\n    _this43.color = new Color(0xffffff);\n    _this43.linewidth = 1;\n    _this43.linecap = 'round';\n    _this43.linejoin = 'round';\n\n    _this43.setValues(parameters);\n\n    return _this43;\n  }\n\n  _createClass(LineBasicMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(LineBasicMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.linewidth = source.linewidth;\n      this.linecap = source.linecap;\n      this.linejoin = source.linejoin;\n      return this;\n    }\n  }]);\n\n  return LineBasicMaterial;\n}(Material$1);\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nvar _start$1 = /*@__PURE__*/new Vector3();\n\nvar _end$1 = /*@__PURE__*/new Vector3();\n\nvar _inverseMatrix$1 = /*@__PURE__*/new Matrix4();\n\nvar _ray$1 = /*@__PURE__*/new Ray();\n\nvar _sphere$1 = /*@__PURE__*/new Sphere();\n\nvar Line = /*#__PURE__*/function (_Object3D8) {\n  _inherits(Line, _Object3D8);\n\n  var _super42 = _createSuper(Line);\n\n  function Line() {\n    var _this44;\n\n    var geometry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new BufferGeometry();\n    var material = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new LineBasicMaterial();\n\n    _classCallCheck(this, Line);\n\n    _this44 = _super42.call(this);\n    _this44.type = 'Line';\n    _this44.geometry = geometry;\n    _this44.material = material;\n\n    _this44.updateMorphTargets();\n\n    return _this44;\n  }\n\n  _createClass(Line, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Line.prototype), \"copy\", this).call(this, source);\n\n      this.material = source.material;\n      this.geometry = source.geometry;\n      return this;\n    }\n  }, {\n    key: \"computeLineDistances\",\n    value: function computeLineDistances() {\n      var geometry = this.geometry;\n\n      if (geometry.isBufferGeometry) {\n        // we assume non-indexed geometry\n        if (geometry.index === null) {\n          var positionAttribute = geometry.attributes.position;\n          var lineDistances = [0];\n\n          for (var _i165 = 1, _l51 = positionAttribute.count; _i165 < _l51; _i165++) {\n            _start$1.fromBufferAttribute(positionAttribute, _i165 - 1);\n\n            _end$1.fromBufferAttribute(positionAttribute, _i165);\n\n            lineDistances[_i165] = lineDistances[_i165 - 1];\n            lineDistances[_i165] += _start$1.distanceTo(_end$1);\n          }\n\n          geometry.setAttribute('lineDistance', new Float32BufferAttribute(lineDistances, 1));\n        } else {\n          console.warn('THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.');\n        }\n      } else if (geometry.isGeometry) {\n        console.error('THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      var geometry = this.geometry;\n      var matrixWorld = this.matrixWorld;\n      var threshold = raycaster.params.Line.threshold;\n      var drawRange = geometry.drawRange; // Checking boundingSphere distance to ray\n\n      if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n      _sphere$1.copy(geometry.boundingSphere);\n\n      _sphere$1.applyMatrix4(matrixWorld);\n\n      _sphere$1.radius += threshold;\n      if (raycaster.ray.intersectsSphere(_sphere$1) === false) return; //\n\n      _inverseMatrix$1.copy(matrixWorld).invert();\n\n      _ray$1.copy(raycaster.ray).applyMatrix4(_inverseMatrix$1);\n\n      var localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n      var localThresholdSq = localThreshold * localThreshold;\n      var vStart = new Vector3();\n      var vEnd = new Vector3();\n      var interSegment = new Vector3();\n      var interRay = new Vector3();\n      var step = this.isLineSegments ? 2 : 1;\n\n      if (geometry.isBufferGeometry) {\n        var index = geometry.index;\n        var attributes = geometry.attributes;\n        var positionAttribute = attributes.position;\n\n        if (index !== null) {\n          var start = Math.max(0, drawRange.start);\n          var end = Math.min(index.count, drawRange.start + drawRange.count);\n\n          for (var _i166 = start, _l52 = end - 1; _i166 < _l52; _i166 += step) {\n            var _a10 = index.getX(_i166);\n\n            var b = index.getX(_i166 + 1);\n            vStart.fromBufferAttribute(positionAttribute, _a10);\n            vEnd.fromBufferAttribute(positionAttribute, b);\n\n            var distSq = _ray$1.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n            if (distSq > localThresholdSq) continue;\n            interRay.applyMatrix4(this.matrixWorld); //Move back to world space for distance calculation\n\n            var distance = raycaster.ray.origin.distanceTo(interRay);\n            if (distance < raycaster.near || distance > raycaster.far) continue;\n            intersects.push({\n              distance: distance,\n              // What do we want? intersection point on the ray or on the segment??\n              // point: raycaster.ray.at( distance ),\n              point: interSegment.clone().applyMatrix4(this.matrixWorld),\n              index: _i166,\n              face: null,\n              faceIndex: null,\n              object: this\n            });\n          }\n        } else {\n          var _start6 = Math.max(0, drawRange.start);\n\n          var _end5 = Math.min(positionAttribute.count, drawRange.start + drawRange.count);\n\n          for (var _i167 = _start6, _l53 = _end5 - 1; _i167 < _l53; _i167 += step) {\n            vStart.fromBufferAttribute(positionAttribute, _i167);\n            vEnd.fromBufferAttribute(positionAttribute, _i167 + 1);\n\n            var _distSq = _ray$1.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n            if (_distSq > localThresholdSq) continue;\n            interRay.applyMatrix4(this.matrixWorld); //Move back to world space for distance calculation\n\n            var _distance = raycaster.ray.origin.distanceTo(interRay);\n\n            if (_distance < raycaster.near || _distance > raycaster.far) continue;\n            intersects.push({\n              distance: _distance,\n              // What do we want? intersection point on the ray or on the segment??\n              // point: raycaster.ray.at( distance ),\n              point: interSegment.clone().applyMatrix4(this.matrixWorld),\n              index: _i167,\n              face: null,\n              faceIndex: null,\n              object: this\n            });\n          }\n        }\n      } else if (geometry.isGeometry) {\n        console.error('THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n    }\n  }, {\n    key: \"updateMorphTargets\",\n    value: function updateMorphTargets() {\n      var geometry = this.geometry;\n\n      if (geometry.isBufferGeometry) {\n        var morphAttributes = geometry.morphAttributes;\n        var keys = Object.keys(morphAttributes);\n\n        if (keys.length > 0) {\n          var morphAttribute = morphAttributes[keys[0]];\n\n          if (morphAttribute !== undefined) {\n            this.morphTargetInfluences = [];\n            this.morphTargetDictionary = {};\n\n            for (var m = 0, ml = morphAttribute.length; m < ml; m++) {\n              var name = morphAttribute[m].name || String(m);\n              this.morphTargetInfluences.push(0);\n              this.morphTargetDictionary[name] = m;\n            }\n          }\n        }\n      } else {\n        var morphTargets = geometry.morphTargets;\n\n        if (morphTargets !== undefined && morphTargets.length > 0) {\n          console.error('THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.');\n        }\n      }\n    }\n  }]);\n\n  return Line;\n}(Object3D);\n\nLine.prototype.isLine = true;\n\nvar _start = /*@__PURE__*/new Vector3();\n\nvar _end = /*@__PURE__*/new Vector3();\n\nvar LineSegments = /*#__PURE__*/function (_Line) {\n  _inherits(LineSegments, _Line);\n\n  var _super43 = _createSuper(LineSegments);\n\n  function LineSegments(geometry, material) {\n    var _this45;\n\n    _classCallCheck(this, LineSegments);\n\n    _this45 = _super43.call(this, geometry, material);\n    _this45.type = 'LineSegments';\n    return _this45;\n  }\n\n  _createClass(LineSegments, [{\n    key: \"computeLineDistances\",\n    value: function computeLineDistances() {\n      var geometry = this.geometry;\n\n      if (geometry.isBufferGeometry) {\n        // we assume non-indexed geometry\n        if (geometry.index === null) {\n          var positionAttribute = geometry.attributes.position;\n          var lineDistances = [];\n\n          for (var _i168 = 0, _l54 = positionAttribute.count; _i168 < _l54; _i168 += 2) {\n            _start.fromBufferAttribute(positionAttribute, _i168);\n\n            _end.fromBufferAttribute(positionAttribute, _i168 + 1);\n\n            lineDistances[_i168] = _i168 === 0 ? 0 : lineDistances[_i168 - 1];\n            lineDistances[_i168 + 1] = lineDistances[_i168] + _start.distanceTo(_end);\n          }\n\n          geometry.setAttribute('lineDistance', new Float32BufferAttribute(lineDistances, 1));\n        } else {\n          console.warn('THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.');\n        }\n      } else if (geometry.isGeometry) {\n        console.error('THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n\n      return this;\n    }\n  }]);\n\n  return LineSegments;\n}(Line);\n\nLineSegments.prototype.isLineSegments = true;\n\nvar LineLoop = /*#__PURE__*/function (_Line2) {\n  _inherits(LineLoop, _Line2);\n\n  var _super44 = _createSuper(LineLoop);\n\n  function LineLoop(geometry, material) {\n    var _this46;\n\n    _classCallCheck(this, LineLoop);\n\n    _this46 = _super44.call(this, geometry, material);\n    _this46.type = 'LineLoop';\n    return _this46;\n  }\n\n  return LineLoop;\n}(Line);\n\nLineLoop.prototype.isLineLoop = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n * }\n */\n\nvar PointsMaterial = /*#__PURE__*/function (_Material$7) {\n  _inherits(PointsMaterial, _Material$7);\n\n  var _super45 = _createSuper(PointsMaterial);\n\n  function PointsMaterial(parameters) {\n    var _this47;\n\n    _classCallCheck(this, PointsMaterial);\n\n    _this47 = _super45.call(this);\n    _this47.type = 'PointsMaterial';\n    _this47.color = new Color(0xffffff);\n    _this47.map = null;\n    _this47.alphaMap = null;\n    _this47.size = 1;\n    _this47.sizeAttenuation = true;\n\n    _this47.setValues(parameters);\n\n    return _this47;\n  }\n\n  _createClass(PointsMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(PointsMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.map = source.map;\n      this.alphaMap = source.alphaMap;\n      this.size = source.size;\n      this.sizeAttenuation = source.sizeAttenuation;\n      return this;\n    }\n  }]);\n\n  return PointsMaterial;\n}(Material$1);\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nvar _inverseMatrix = /*@__PURE__*/new Matrix4();\n\nvar _ray = /*@__PURE__*/new Ray();\n\nvar _sphere = /*@__PURE__*/new Sphere();\n\nvar _position$2 = /*@__PURE__*/new Vector3();\n\nvar Points = /*#__PURE__*/function (_Object3D9) {\n  _inherits(Points, _Object3D9);\n\n  var _super46 = _createSuper(Points);\n\n  function Points() {\n    var _this48;\n\n    var geometry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new BufferGeometry();\n    var material = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new PointsMaterial();\n\n    _classCallCheck(this, Points);\n\n    _this48 = _super46.call(this);\n    _this48.type = 'Points';\n    _this48.geometry = geometry;\n    _this48.material = material;\n\n    _this48.updateMorphTargets();\n\n    return _this48;\n  }\n\n  _createClass(Points, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Points.prototype), \"copy\", this).call(this, source);\n\n      this.material = source.material;\n      this.geometry = source.geometry;\n      return this;\n    }\n  }, {\n    key: \"raycast\",\n    value: function raycast(raycaster, intersects) {\n      var geometry = this.geometry;\n      var matrixWorld = this.matrixWorld;\n      var threshold = raycaster.params.Points.threshold;\n      var drawRange = geometry.drawRange; // Checking boundingSphere distance to ray\n\n      if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n      _sphere.copy(geometry.boundingSphere);\n\n      _sphere.applyMatrix4(matrixWorld);\n\n      _sphere.radius += threshold;\n      if (raycaster.ray.intersectsSphere(_sphere) === false) return; //\n\n      _inverseMatrix.copy(matrixWorld).invert();\n\n      _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix);\n\n      var localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n      var localThresholdSq = localThreshold * localThreshold;\n\n      if (geometry.isBufferGeometry) {\n        var index = geometry.index;\n        var attributes = geometry.attributes;\n        var positionAttribute = attributes.position;\n\n        if (index !== null) {\n          var start = Math.max(0, drawRange.start);\n          var end = Math.min(index.count, drawRange.start + drawRange.count);\n\n          for (var _i169 = start, il = end; _i169 < il; _i169++) {\n            var _a11 = index.getX(_i169);\n\n            _position$2.fromBufferAttribute(positionAttribute, _a11);\n\n            testPoint(_position$2, _a11, localThresholdSq, matrixWorld, raycaster, intersects, this);\n          }\n        } else {\n          var _start7 = Math.max(0, drawRange.start);\n\n          var _end6 = Math.min(positionAttribute.count, drawRange.start + drawRange.count);\n\n          for (var _i170 = _start7, _l55 = _end6; _i170 < _l55; _i170++) {\n            _position$2.fromBufferAttribute(positionAttribute, _i170);\n\n            testPoint(_position$2, _i170, localThresholdSq, matrixWorld, raycaster, intersects, this);\n          }\n        }\n      } else {\n        console.error('THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n    }\n  }, {\n    key: \"updateMorphTargets\",\n    value: function updateMorphTargets() {\n      var geometry = this.geometry;\n\n      if (geometry.isBufferGeometry) {\n        var morphAttributes = geometry.morphAttributes;\n        var keys = Object.keys(morphAttributes);\n\n        if (keys.length > 0) {\n          var morphAttribute = morphAttributes[keys[0]];\n\n          if (morphAttribute !== undefined) {\n            this.morphTargetInfluences = [];\n            this.morphTargetDictionary = {};\n\n            for (var m = 0, ml = morphAttribute.length; m < ml; m++) {\n              var name = morphAttribute[m].name || String(m);\n              this.morphTargetInfluences.push(0);\n              this.morphTargetDictionary[name] = m;\n            }\n          }\n        }\n      } else {\n        var morphTargets = geometry.morphTargets;\n\n        if (morphTargets !== undefined && morphTargets.length > 0) {\n          console.error('THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.');\n        }\n      }\n    }\n  }]);\n\n  return Points;\n}(Object3D);\n\nPoints.prototype.isPoints = true;\n\nfunction testPoint(point, index, localThresholdSq, matrixWorld, raycaster, intersects, object) {\n  var rayPointDistanceSq = _ray.distanceSqToPoint(point);\n\n  if (rayPointDistanceSq < localThresholdSq) {\n    var intersectPoint = new Vector3();\n\n    _ray.closestPointToPoint(point, intersectPoint);\n\n    intersectPoint.applyMatrix4(matrixWorld);\n    var distance = raycaster.ray.origin.distanceTo(intersectPoint);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n    intersects.push({\n      distance: distance,\n      distanceToRay: Math.sqrt(rayPointDistanceSq),\n      point: intersectPoint,\n      index: index,\n      face: null,\n      object: object\n    });\n  }\n}\n\nvar VideoTexture = /*#__PURE__*/function (_Texture$5) {\n  _inherits(VideoTexture, _Texture$5);\n\n  var _super47 = _createSuper(VideoTexture);\n\n  function VideoTexture(video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n    var _this49;\n\n    _classCallCheck(this, VideoTexture);\n\n    _this49 = _super47.call(this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n    _this49.format = format !== undefined ? format : RGBFormat;\n    _this49.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n    _this49.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n    _this49.generateMipmaps = false;\n\n    var scope = _assertThisInitialized(_this49);\n\n    function updateVideo() {\n      scope.needsUpdate = true;\n      video.requestVideoFrameCallback(updateVideo);\n    }\n\n    if ('requestVideoFrameCallback' in video) {\n      video.requestVideoFrameCallback(updateVideo);\n    }\n\n    return _this49;\n  }\n\n  _createClass(VideoTexture, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.image).copy(this);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var video = this.image;\n      var hasVideoFrameCallback = ('requestVideoFrameCallback' in video);\n\n      if (hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA) {\n        this.needsUpdate = true;\n      }\n    }\n  }]);\n\n  return VideoTexture;\n}(Texture$1);\n\nVideoTexture.prototype.isVideoTexture = true;\n\nvar CompressedTexture = /*#__PURE__*/function (_Texture$6) {\n  _inherits(CompressedTexture, _Texture$6);\n\n  var _super48 = _createSuper(CompressedTexture);\n\n  function CompressedTexture(mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding) {\n    var _this50;\n\n    _classCallCheck(this, CompressedTexture);\n\n    _this50 = _super48.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n    _this50.image = {\n      width: width,\n      height: height\n    };\n    _this50.mipmaps = mipmaps; // no flipping for cube textures\n    // (also flipping doesn't work for compressed textures )\n\n    _this50.flipY = false; // can't generate mipmaps for compressed textures\n    // mips must be embedded in DDS files\n\n    _this50.generateMipmaps = false;\n    return _this50;\n  }\n\n  return CompressedTexture;\n}(Texture$1);\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\nvar CanvasTexture = /*#__PURE__*/function (_Texture$7) {\n  _inherits(CanvasTexture, _Texture$7);\n\n  var _super49 = _createSuper(CanvasTexture);\n\n  function CanvasTexture(canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy) {\n    var _this51;\n\n    _classCallCheck(this, CanvasTexture);\n\n    _this51 = _super49.call(this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n    _this51.needsUpdate = true;\n    return _this51;\n  }\n\n  return CanvasTexture;\n}(Texture$1);\n\nCanvasTexture.prototype.isCanvasTexture = true;\n\nvar DepthTexture = /*#__PURE__*/function (_Texture$8) {\n  _inherits(DepthTexture, _Texture$8);\n\n  var _super50 = _createSuper(DepthTexture);\n\n  function DepthTexture(width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format) {\n    var _this52;\n\n    _classCallCheck(this, DepthTexture);\n\n    format = format !== undefined ? format : DepthFormat;\n\n    if (format !== DepthFormat && format !== DepthStencilFormat) {\n      throw new Error('DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat');\n    }\n\n    if (type === undefined && format === DepthFormat) type = UnsignedShortType;\n    if (type === undefined && format === DepthStencilFormat) type = UnsignedInt248Type;\n    _this52 = _super50.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n    _this52.image = {\n      width: width,\n      height: height\n    };\n    _this52.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n    _this52.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n    _this52.flipY = false;\n    _this52.generateMipmaps = false;\n    return _this52;\n  }\n\n  return DepthTexture;\n}(Texture$1);\n\nDepthTexture.prototype.isDepthTexture = true;\nnew Vector3();\nnew Vector3();\nnew Vector3();\nnew Triangle();\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nvar Curve = /*#__PURE__*/function () {\n  function Curve() {\n    _classCallCheck(this, Curve);\n\n    this.type = 'Curve';\n    this.arcLengthDivisions = 200;\n  } // Virtual base class method to overwrite and implement in subclasses\n  //\t- t [0 .. 1]\n\n\n  _createClass(Curve, [{\n    key: \"getPoint\",\n    value: function getPoint() {\n      console.warn('THREE.Curve: .getPoint() not implemented.');\n      return null;\n    } // Get point at relative position in curve according to arc length\n    // - u [0 .. 1]\n\n  }, {\n    key: \"getPointAt\",\n    value: function getPointAt(u, optionalTarget) {\n      var t = this.getUtoTmapping(u);\n      return this.getPoint(t, optionalTarget);\n    } // Get sequence of points using getPoint( t )\n\n  }, {\n    key: \"getPoints\",\n    value: function getPoints() {\n      var divisions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5;\n      var points = [];\n\n      for (var d = 0; d <= divisions; d++) {\n        points.push(this.getPoint(d / divisions));\n      }\n\n      return points;\n    } // Get sequence of points using getPointAt( u )\n\n  }, {\n    key: \"getSpacedPoints\",\n    value: function getSpacedPoints() {\n      var divisions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5;\n      var points = [];\n\n      for (var d = 0; d <= divisions; d++) {\n        points.push(this.getPointAt(d / divisions));\n      }\n\n      return points;\n    } // Get total curve arc length\n\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      var lengths = this.getLengths();\n      return lengths[lengths.length - 1];\n    } // Get list of cumulative segment lengths\n\n  }, {\n    key: \"getLengths\",\n    value: function getLengths() {\n      var divisions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.arcLengthDivisions;\n\n      if (this.cacheArcLengths && this.cacheArcLengths.length === divisions + 1 && !this.needsUpdate) {\n        return this.cacheArcLengths;\n      }\n\n      this.needsUpdate = false;\n      var cache = [];\n      var current,\n          last = this.getPoint(0);\n      var sum = 0;\n      cache.push(0);\n\n      for (var _p7 = 1; _p7 <= divisions; _p7++) {\n        current = this.getPoint(_p7 / divisions);\n        sum += current.distanceTo(last);\n        cache.push(sum);\n        last = current;\n      }\n\n      this.cacheArcLengths = cache;\n      return cache; // { sums: cache, sum: sum }; Sum is in the last element.\n    }\n  }, {\n    key: \"updateArcLengths\",\n    value: function updateArcLengths() {\n      this.needsUpdate = true;\n      this.getLengths();\n    } // Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n  }, {\n    key: \"getUtoTmapping\",\n    value: function getUtoTmapping(u, distance) {\n      var arcLengths = this.getLengths();\n      var i = 0;\n      var il = arcLengths.length;\n      var targetArcLength; // The targeted u distance value to get\n\n      if (distance) {\n        targetArcLength = distance;\n      } else {\n        targetArcLength = u * arcLengths[il - 1];\n      } // binary search for the index with largest value smaller than target u distance\n\n\n      var low = 0,\n          high = il - 1,\n          comparison;\n\n      while (low <= high) {\n        i = Math.floor(low + (high - low) / 2); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n        comparison = arcLengths[i] - targetArcLength;\n\n        if (comparison < 0) {\n          low = i + 1;\n        } else if (comparison > 0) {\n          high = i - 1;\n        } else {\n          high = i;\n          break; // DONE\n        }\n      }\n\n      i = high;\n\n      if (arcLengths[i] === targetArcLength) {\n        return i / (il - 1);\n      } // we could get finer grain at lengths, or use simple interpolation between two points\n\n\n      var lengthBefore = arcLengths[i];\n      var lengthAfter = arcLengths[i + 1];\n      var segmentLength = lengthAfter - lengthBefore; // determine where we are between the 'before' and 'after' points\n\n      var segmentFraction = (targetArcLength - lengthBefore) / segmentLength; // add that fractional amount to t\n\n      var t = (i + segmentFraction) / (il - 1);\n      return t;\n    } // Returns a unit vector tangent at t\n    // In case any sub curve does not implement its tangent derivation,\n    // 2 points a small delta apart will be used to find its gradient\n    // which seems to give a reasonable approximation\n\n  }, {\n    key: \"getTangent\",\n    value: function getTangent(t, optionalTarget) {\n      var delta = 0.0001;\n      var t1 = t - delta;\n      var t2 = t + delta; // Capping in case of danger\n\n      if (t1 < 0) t1 = 0;\n      if (t2 > 1) t2 = 1;\n      var pt1 = this.getPoint(t1);\n      var pt2 = this.getPoint(t2);\n      var tangent = optionalTarget || (pt1.isVector2 ? new Vector2() : new Vector3());\n      tangent.copy(pt2).sub(pt1).normalize();\n      return tangent;\n    }\n  }, {\n    key: \"getTangentAt\",\n    value: function getTangentAt(u, optionalTarget) {\n      var t = this.getUtoTmapping(u);\n      return this.getTangent(t, optionalTarget);\n    }\n  }, {\n    key: \"computeFrenetFrames\",\n    value: function computeFrenetFrames(segments, closed) {\n      // see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n      var normal = new Vector3();\n      var tangents = [];\n      var normals = [];\n      var binormals = [];\n      var vec = new Vector3();\n      var mat = new Matrix4(); // compute the tangent vectors for each segment on the curve\n\n      for (var _i171 = 0; _i171 <= segments; _i171++) {\n        var u = _i171 / segments;\n        tangents[_i171] = this.getTangentAt(u, new Vector3());\n\n        tangents[_i171].normalize();\n      } // select an initial normal vector perpendicular to the first tangent vector,\n      // and in the direction of the minimum tangent xyz component\n\n\n      normals[0] = new Vector3();\n      binormals[0] = new Vector3();\n      var min = Number.MAX_VALUE;\n      var tx = Math.abs(tangents[0].x);\n      var ty = Math.abs(tangents[0].y);\n      var tz = Math.abs(tangents[0].z);\n\n      if (tx <= min) {\n        min = tx;\n        normal.set(1, 0, 0);\n      }\n\n      if (ty <= min) {\n        min = ty;\n        normal.set(0, 1, 0);\n      }\n\n      if (tz <= min) {\n        normal.set(0, 0, 1);\n      }\n\n      vec.crossVectors(tangents[0], normal).normalize();\n      normals[0].crossVectors(tangents[0], vec);\n      binormals[0].crossVectors(tangents[0], normals[0]); // compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n      for (var _i172 = 1; _i172 <= segments; _i172++) {\n        normals[_i172] = normals[_i172 - 1].clone();\n        binormals[_i172] = binormals[_i172 - 1].clone();\n        vec.crossVectors(tangents[_i172 - 1], tangents[_i172]);\n\n        if (vec.length() > Number.EPSILON) {\n          vec.normalize();\n          var theta = Math.acos(clamp$1(tangents[_i172 - 1].dot(tangents[_i172]), -1, 1)); // clamp for floating pt errors\n\n          normals[_i172].applyMatrix4(mat.makeRotationAxis(vec, theta));\n        }\n\n        binormals[_i172].crossVectors(tangents[_i172], normals[_i172]);\n      } // if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\n      if (closed === true) {\n        var _theta = Math.acos(clamp$1(normals[0].dot(normals[segments]), -1, 1));\n\n        _theta /= segments;\n\n        if (tangents[0].dot(vec.crossVectors(normals[0], normals[segments])) > 0) {\n          _theta = -_theta;\n        }\n\n        for (var _i173 = 1; _i173 <= segments; _i173++) {\n          // twist a little...\n          normals[_i173].applyMatrix4(mat.makeRotationAxis(tangents[_i173], _theta * _i173));\n\n          binormals[_i173].crossVectors(tangents[_i173], normals[_i173]);\n        }\n      }\n\n      return {\n        tangents: tangents,\n        normals: normals,\n        binormals: binormals\n      };\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.arcLengthDivisions = source.arcLengthDivisions;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = {\n        metadata: {\n          version: 4.5,\n          type: 'Curve',\n          generator: 'Curve.toJSON'\n        }\n      };\n      data.arcLengthDivisions = this.arcLengthDivisions;\n      data.type = this.type;\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      this.arcLengthDivisions = json.arcLengthDivisions;\n      return this;\n    }\n  }]);\n\n  return Curve;\n}();\n\nvar EllipseCurve = /*#__PURE__*/function (_Curve) {\n  _inherits(EllipseCurve, _Curve);\n\n  var _super51 = _createSuper(EllipseCurve);\n\n  function EllipseCurve() {\n    var _this53;\n\n    var aX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var aY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var xRadius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var yRadius = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var aStartAngle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var aEndAngle = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : Math.PI * 2;\n    var aClockwise = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n    var aRotation = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n\n    _classCallCheck(this, EllipseCurve);\n\n    _this53 = _super51.call(this);\n    _this53.type = 'EllipseCurve';\n    _this53.aX = aX;\n    _this53.aY = aY;\n    _this53.xRadius = xRadius;\n    _this53.yRadius = yRadius;\n    _this53.aStartAngle = aStartAngle;\n    _this53.aEndAngle = aEndAngle;\n    _this53.aClockwise = aClockwise;\n    _this53.aRotation = aRotation;\n    return _this53;\n  }\n\n  _createClass(EllipseCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t, optionalTarget) {\n      var point = optionalTarget || new Vector2();\n      var twoPi = Math.PI * 2;\n      var deltaAngle = this.aEndAngle - this.aStartAngle;\n      var samePoints = Math.abs(deltaAngle) < Number.EPSILON; // ensures that deltaAngle is 0 .. 2 PI\n\n      while (deltaAngle < 0) {\n        deltaAngle += twoPi;\n      }\n\n      while (deltaAngle > twoPi) {\n        deltaAngle -= twoPi;\n      }\n\n      if (deltaAngle < Number.EPSILON) {\n        if (samePoints) {\n          deltaAngle = 0;\n        } else {\n          deltaAngle = twoPi;\n        }\n      }\n\n      if (this.aClockwise === true && !samePoints) {\n        if (deltaAngle === twoPi) {\n          deltaAngle = -twoPi;\n        } else {\n          deltaAngle = deltaAngle - twoPi;\n        }\n      }\n\n      var angle = this.aStartAngle + t * deltaAngle;\n      var x = this.aX + this.xRadius * Math.cos(angle);\n      var y = this.aY + this.yRadius * Math.sin(angle);\n\n      if (this.aRotation !== 0) {\n        var cos = Math.cos(this.aRotation);\n        var sin = Math.sin(this.aRotation);\n        var tx = x - this.aX;\n        var ty = y - this.aY; // Rotate the point about the center of the ellipse.\n\n        x = tx * cos - ty * sin + this.aX;\n        y = tx * sin + ty * cos + this.aY;\n      }\n\n      return point.set(x, y);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(EllipseCurve.prototype), \"copy\", this).call(this, source);\n\n      this.aX = source.aX;\n      this.aY = source.aY;\n      this.xRadius = source.xRadius;\n      this.yRadius = source.yRadius;\n      this.aStartAngle = source.aStartAngle;\n      this.aEndAngle = source.aEndAngle;\n      this.aClockwise = source.aClockwise;\n      this.aRotation = source.aRotation;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(EllipseCurve.prototype), \"toJSON\", this).call(this);\n\n      data.aX = this.aX;\n      data.aY = this.aY;\n      data.xRadius = this.xRadius;\n      data.yRadius = this.yRadius;\n      data.aStartAngle = this.aStartAngle;\n      data.aEndAngle = this.aEndAngle;\n      data.aClockwise = this.aClockwise;\n      data.aRotation = this.aRotation;\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(EllipseCurve.prototype), \"fromJSON\", this).call(this, json);\n\n      this.aX = json.aX;\n      this.aY = json.aY;\n      this.xRadius = json.xRadius;\n      this.yRadius = json.yRadius;\n      this.aStartAngle = json.aStartAngle;\n      this.aEndAngle = json.aEndAngle;\n      this.aClockwise = json.aClockwise;\n      this.aRotation = json.aRotation;\n      return this;\n    }\n  }]);\n\n  return EllipseCurve;\n}(Curve);\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nvar ArcCurve = /*#__PURE__*/function (_EllipseCurve) {\n  _inherits(ArcCurve, _EllipseCurve);\n\n  var _super52 = _createSuper(ArcCurve);\n\n  function ArcCurve(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n    var _this54;\n\n    _classCallCheck(this, ArcCurve);\n\n    _this54 = _super52.call(this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n    _this54.type = 'ArcCurve';\n    return _this54;\n  }\n\n  return ArcCurve;\n}(EllipseCurve);\n\nArcCurve.prototype.isArcCurve = true;\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n  var c0 = 0,\n      c1 = 0,\n      c2 = 0,\n      c3 = 0;\n  /*\n   * Compute coefficients for a cubic polynomial\n   *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n   * such that\n   *   p(0) = x0, p(1) = x1\n   *  and\n   *   p'(0) = t0, p'(1) = t1.\n   */\n\n  function init(x0, x1, t0, t1) {\n    c0 = x0;\n    c1 = t0;\n    c2 = -3 * x0 + 3 * x1 - 2 * t0 - t1;\n    c3 = 2 * x0 - 2 * x1 + t0 + t1;\n  }\n\n  return {\n    initCatmullRom: function initCatmullRom(x0, x1, x2, x3, tension) {\n      init(x1, x2, tension * (x2 - x0), tension * (x3 - x1));\n    },\n    initNonuniformCatmullRom: function initNonuniformCatmullRom(x0, x1, x2, x3, dt0, dt1, dt2) {\n      // compute tangents when parameterized in [t1,t2]\n      var t1 = (x1 - x0) / dt0 - (x2 - x0) / (dt0 + dt1) + (x2 - x1) / dt1;\n      var t2 = (x2 - x1) / dt1 - (x3 - x1) / (dt1 + dt2) + (x3 - x2) / dt2; // rescale tangents for parametrization in [0,1]\n\n      t1 *= dt1;\n      t2 *= dt1;\n      init(x1, x2, t1, t2);\n    },\n    calc: function calc(t) {\n      var t2 = t * t;\n      var t3 = t2 * t;\n      return c0 + c1 * t + c2 * t2 + c3 * t3;\n    }\n  };\n} //\n\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(),\n    py = new CubicPoly(),\n    pz = new CubicPoly();\n\nvar CatmullRomCurve3 = /*#__PURE__*/function (_Curve2) {\n  _inherits(CatmullRomCurve3, _Curve2);\n\n  var _super53 = _createSuper(CatmullRomCurve3);\n\n  function CatmullRomCurve3() {\n    var _this55;\n\n    var points = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var closed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var curveType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'centripetal';\n    var tension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.5;\n\n    _classCallCheck(this, CatmullRomCurve3);\n\n    _this55 = _super53.call(this);\n    _this55.type = 'CatmullRomCurve3';\n    _this55.points = points;\n    _this55.closed = closed;\n    _this55.curveType = curveType;\n    _this55.tension = tension;\n    return _this55;\n  }\n\n  _createClass(CatmullRomCurve3, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var point = optionalTarget;\n      var points = this.points;\n      var l = points.length;\n      var p = (l - (this.closed ? 0 : 1)) * t;\n      var intPoint = Math.floor(p);\n      var weight = p - intPoint;\n\n      if (this.closed) {\n        intPoint += intPoint > 0 ? 0 : (Math.floor(Math.abs(intPoint) / l) + 1) * l;\n      } else if (weight === 0 && intPoint === l - 1) {\n        intPoint = l - 2;\n        weight = 1;\n      }\n\n      var p0, p3; // 4 points (p1 & p2 defined below)\n\n      if (this.closed || intPoint > 0) {\n        p0 = points[(intPoint - 1) % l];\n      } else {\n        // extrapolate first point\n        tmp.subVectors(points[0], points[1]).add(points[0]);\n        p0 = tmp;\n      }\n\n      var p1 = points[intPoint % l];\n      var p2 = points[(intPoint + 1) % l];\n\n      if (this.closed || intPoint + 2 < l) {\n        p3 = points[(intPoint + 2) % l];\n      } else {\n        // extrapolate last point\n        tmp.subVectors(points[l - 1], points[l - 2]).add(points[l - 1]);\n        p3 = tmp;\n      }\n\n      if (this.curveType === 'centripetal' || this.curveType === 'chordal') {\n        // init Centripetal / Chordal Catmull-Rom\n        var pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n        var dt0 = Math.pow(p0.distanceToSquared(p1), pow);\n        var dt1 = Math.pow(p1.distanceToSquared(p2), pow);\n        var dt2 = Math.pow(p2.distanceToSquared(p3), pow); // safety check for repeated points\n\n        if (dt1 < 1e-4) dt1 = 1.0;\n        if (dt0 < 1e-4) dt0 = dt1;\n        if (dt2 < 1e-4) dt2 = dt1;\n        px.initNonuniformCatmullRom(p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2);\n        py.initNonuniformCatmullRom(p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2);\n        pz.initNonuniformCatmullRom(p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2);\n      } else if (this.curveType === 'catmullrom') {\n        px.initCatmullRom(p0.x, p1.x, p2.x, p3.x, this.tension);\n        py.initCatmullRom(p0.y, p1.y, p2.y, p3.y, this.tension);\n        pz.initCatmullRom(p0.z, p1.z, p2.z, p3.z, this.tension);\n      }\n\n      point.set(px.calc(weight), py.calc(weight), pz.calc(weight));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(CatmullRomCurve3.prototype), \"copy\", this).call(this, source);\n\n      this.points = [];\n\n      for (var _i174 = 0, _l56 = source.points.length; _i174 < _l56; _i174++) {\n        var point = source.points[_i174];\n        this.points.push(point.clone());\n      }\n\n      this.closed = source.closed;\n      this.curveType = source.curveType;\n      this.tension = source.tension;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(CatmullRomCurve3.prototype), \"toJSON\", this).call(this);\n\n      data.points = [];\n\n      for (var _i175 = 0, _l57 = this.points.length; _i175 < _l57; _i175++) {\n        var point = this.points[_i175];\n        data.points.push(point.toArray());\n      }\n\n      data.closed = this.closed;\n      data.curveType = this.curveType;\n      data.tension = this.tension;\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(CatmullRomCurve3.prototype), \"fromJSON\", this).call(this, json);\n\n      this.points = [];\n\n      for (var _i176 = 0, _l58 = json.points.length; _i176 < _l58; _i176++) {\n        var point = json.points[_i176];\n        this.points.push(new Vector3().fromArray(point));\n      }\n\n      this.closed = json.closed;\n      this.curveType = json.curveType;\n      this.tension = json.tension;\n      return this;\n    }\n  }]);\n\n  return CatmullRomCurve3;\n}(Curve);\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n/**\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom(t, p0, p1, p2, p3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  var t2 = t * t;\n  var t3 = t * t2;\n  return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n} //\n\n\nfunction QuadraticBezierP0(t, p) {\n  var k = 1 - t;\n  return k * k * p;\n}\n\nfunction QuadraticBezierP1(t, p) {\n  return 2 * (1 - t) * t * p;\n}\n\nfunction QuadraticBezierP2(t, p) {\n  return t * t * p;\n}\n\nfunction QuadraticBezier(t, p0, p1, p2) {\n  return QuadraticBezierP0(t, p0) + QuadraticBezierP1(t, p1) + QuadraticBezierP2(t, p2);\n} //\n\n\nfunction CubicBezierP0(t, p) {\n  var k = 1 - t;\n  return k * k * k * p;\n}\n\nfunction CubicBezierP1(t, p) {\n  var k = 1 - t;\n  return 3 * k * k * t * p;\n}\n\nfunction CubicBezierP2(t, p) {\n  return 3 * (1 - t) * t * t * p;\n}\n\nfunction CubicBezierP3(t, p) {\n  return t * t * t * p;\n}\n\nfunction CubicBezier(t, p0, p1, p2, p3) {\n  return CubicBezierP0(t, p0) + CubicBezierP1(t, p1) + CubicBezierP2(t, p2) + CubicBezierP3(t, p3);\n}\n\nvar CubicBezierCurve = /*#__PURE__*/function (_Curve3) {\n  _inherits(CubicBezierCurve, _Curve3);\n\n  var _super54 = _createSuper(CubicBezierCurve);\n\n  function CubicBezierCurve() {\n    var _this56;\n\n    var v0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector2();\n    var v1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n    var v2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector2();\n    var v3 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new Vector2();\n\n    _classCallCheck(this, CubicBezierCurve);\n\n    _this56 = _super54.call(this);\n    _this56.type = 'CubicBezierCurve';\n    _this56.v0 = v0;\n    _this56.v1 = v1;\n    _this56.v2 = v2;\n    _this56.v3 = v3;\n    return _this56;\n  }\n\n  _createClass(CubicBezierCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      var point = optionalTarget;\n      var v0 = this.v0,\n          v1 = this.v1,\n          v2 = this.v2,\n          v3 = this.v3;\n      point.set(CubicBezier(t, v0.x, v1.x, v2.x, v3.x), CubicBezier(t, v0.y, v1.y, v2.y, v3.y));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(CubicBezierCurve.prototype), \"copy\", this).call(this, source);\n\n      this.v0.copy(source.v0);\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      this.v3.copy(source.v3);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(CubicBezierCurve.prototype), \"toJSON\", this).call(this);\n\n      data.v0 = this.v0.toArray();\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      data.v3 = this.v3.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(CubicBezierCurve.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v0.fromArray(json.v0);\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      this.v3.fromArray(json.v3);\n      return this;\n    }\n  }]);\n\n  return CubicBezierCurve;\n}(Curve);\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nvar CubicBezierCurve3 = /*#__PURE__*/function (_Curve4) {\n  _inherits(CubicBezierCurve3, _Curve4);\n\n  var _super55 = _createSuper(CubicBezierCurve3);\n\n  function CubicBezierCurve3() {\n    var _this57;\n\n    var v0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var v1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n    var v2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector3();\n    var v3 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new Vector3();\n\n    _classCallCheck(this, CubicBezierCurve3);\n\n    _this57 = _super55.call(this);\n    _this57.type = 'CubicBezierCurve3';\n    _this57.v0 = v0;\n    _this57.v1 = v1;\n    _this57.v2 = v2;\n    _this57.v3 = v3;\n    return _this57;\n  }\n\n  _createClass(CubicBezierCurve3, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var point = optionalTarget;\n      var v0 = this.v0,\n          v1 = this.v1,\n          v2 = this.v2,\n          v3 = this.v3;\n      point.set(CubicBezier(t, v0.x, v1.x, v2.x, v3.x), CubicBezier(t, v0.y, v1.y, v2.y, v3.y), CubicBezier(t, v0.z, v1.z, v2.z, v3.z));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(CubicBezierCurve3.prototype), \"copy\", this).call(this, source);\n\n      this.v0.copy(source.v0);\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      this.v3.copy(source.v3);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(CubicBezierCurve3.prototype), \"toJSON\", this).call(this);\n\n      data.v0 = this.v0.toArray();\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      data.v3 = this.v3.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(CubicBezierCurve3.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v0.fromArray(json.v0);\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      this.v3.fromArray(json.v3);\n      return this;\n    }\n  }]);\n\n  return CubicBezierCurve3;\n}(Curve);\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nvar LineCurve = /*#__PURE__*/function (_Curve5) {\n  _inherits(LineCurve, _Curve5);\n\n  var _super56 = _createSuper(LineCurve);\n\n  function LineCurve() {\n    var _this58;\n\n    var v1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector2();\n    var v2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n\n    _classCallCheck(this, LineCurve);\n\n    _this58 = _super56.call(this);\n    _this58.type = 'LineCurve';\n    _this58.v1 = v1;\n    _this58.v2 = v2;\n    return _this58;\n  }\n\n  _createClass(LineCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      var point = optionalTarget;\n\n      if (t === 1) {\n        point.copy(this.v2);\n      } else {\n        point.copy(this.v2).sub(this.v1);\n        point.multiplyScalar(t).add(this.v1);\n      }\n\n      return point;\n    } // Line curve is linear, so we can overwrite default getPointAt\n\n  }, {\n    key: \"getPointAt\",\n    value: function getPointAt(u, optionalTarget) {\n      return this.getPoint(u, optionalTarget);\n    }\n  }, {\n    key: \"getTangent\",\n    value: function getTangent(t, optionalTarget) {\n      var tangent = optionalTarget || new Vector2();\n      tangent.copy(this.v2).sub(this.v1).normalize();\n      return tangent;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(LineCurve.prototype), \"copy\", this).call(this, source);\n\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(LineCurve.prototype), \"toJSON\", this).call(this);\n\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(LineCurve.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      return this;\n    }\n  }]);\n\n  return LineCurve;\n}(Curve);\n\nLineCurve.prototype.isLineCurve = true;\n\nvar LineCurve3 = /*#__PURE__*/function (_Curve6) {\n  _inherits(LineCurve3, _Curve6);\n\n  var _super57 = _createSuper(LineCurve3);\n\n  function LineCurve3() {\n    var _this59;\n\n    var v1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var v2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n\n    _classCallCheck(this, LineCurve3);\n\n    _this59 = _super57.call(this);\n    _this59.type = 'LineCurve3';\n    _this59.isLineCurve3 = true;\n    _this59.v1 = v1;\n    _this59.v2 = v2;\n    return _this59;\n  }\n\n  _createClass(LineCurve3, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var point = optionalTarget;\n\n      if (t === 1) {\n        point.copy(this.v2);\n      } else {\n        point.copy(this.v2).sub(this.v1);\n        point.multiplyScalar(t).add(this.v1);\n      }\n\n      return point;\n    } // Line curve is linear, so we can overwrite default getPointAt\n\n  }, {\n    key: \"getPointAt\",\n    value: function getPointAt(u, optionalTarget) {\n      return this.getPoint(u, optionalTarget);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(LineCurve3.prototype), \"copy\", this).call(this, source);\n\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(LineCurve3.prototype), \"toJSON\", this).call(this);\n\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(LineCurve3.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      return this;\n    }\n  }]);\n\n  return LineCurve3;\n}(Curve);\n\nvar QuadraticBezierCurve = /*#__PURE__*/function (_Curve7) {\n  _inherits(QuadraticBezierCurve, _Curve7);\n\n  var _super58 = _createSuper(QuadraticBezierCurve);\n\n  function QuadraticBezierCurve() {\n    var _this60;\n\n    var v0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector2();\n    var v1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n    var v2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector2();\n\n    _classCallCheck(this, QuadraticBezierCurve);\n\n    _this60 = _super58.call(this);\n    _this60.type = 'QuadraticBezierCurve';\n    _this60.v0 = v0;\n    _this60.v1 = v1;\n    _this60.v2 = v2;\n    return _this60;\n  }\n\n  _createClass(QuadraticBezierCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      var point = optionalTarget;\n      var v0 = this.v0,\n          v1 = this.v1,\n          v2 = this.v2;\n      point.set(QuadraticBezier(t, v0.x, v1.x, v2.x), QuadraticBezier(t, v0.y, v1.y, v2.y));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(QuadraticBezierCurve.prototype), \"copy\", this).call(this, source);\n\n      this.v0.copy(source.v0);\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(QuadraticBezierCurve.prototype), \"toJSON\", this).call(this);\n\n      data.v0 = this.v0.toArray();\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(QuadraticBezierCurve.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v0.fromArray(json.v0);\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      return this;\n    }\n  }]);\n\n  return QuadraticBezierCurve;\n}(Curve);\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nvar QuadraticBezierCurve3 = /*#__PURE__*/function (_Curve8) {\n  _inherits(QuadraticBezierCurve3, _Curve8);\n\n  var _super59 = _createSuper(QuadraticBezierCurve3);\n\n  function QuadraticBezierCurve3() {\n    var _this61;\n\n    var v0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Vector3();\n    var v1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n    var v2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector3();\n\n    _classCallCheck(this, QuadraticBezierCurve3);\n\n    _this61 = _super59.call(this);\n    _this61.type = 'QuadraticBezierCurve3';\n    _this61.v0 = v0;\n    _this61.v1 = v1;\n    _this61.v2 = v2;\n    return _this61;\n  }\n\n  _createClass(QuadraticBezierCurve3, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var point = optionalTarget;\n      var v0 = this.v0,\n          v1 = this.v1,\n          v2 = this.v2;\n      point.set(QuadraticBezier(t, v0.x, v1.x, v2.x), QuadraticBezier(t, v0.y, v1.y, v2.y), QuadraticBezier(t, v0.z, v1.z, v2.z));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(QuadraticBezierCurve3.prototype), \"copy\", this).call(this, source);\n\n      this.v0.copy(source.v0);\n      this.v1.copy(source.v1);\n      this.v2.copy(source.v2);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(QuadraticBezierCurve3.prototype), \"toJSON\", this).call(this);\n\n      data.v0 = this.v0.toArray();\n      data.v1 = this.v1.toArray();\n      data.v2 = this.v2.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(QuadraticBezierCurve3.prototype), \"fromJSON\", this).call(this, json);\n\n      this.v0.fromArray(json.v0);\n      this.v1.fromArray(json.v1);\n      this.v2.fromArray(json.v2);\n      return this;\n    }\n  }]);\n\n  return QuadraticBezierCurve3;\n}(Curve);\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nvar SplineCurve = /*#__PURE__*/function (_Curve9) {\n  _inherits(SplineCurve, _Curve9);\n\n  var _super60 = _createSuper(SplineCurve);\n\n  function SplineCurve() {\n    var _this62;\n\n    var points = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, SplineCurve);\n\n    _this62 = _super60.call(this);\n    _this62.type = 'SplineCurve';\n    _this62.points = points;\n    return _this62;\n  }\n\n  _createClass(SplineCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector2();\n      var point = optionalTarget;\n      var points = this.points;\n      var p = (points.length - 1) * t;\n      var intPoint = Math.floor(p);\n      var weight = p - intPoint;\n      var p0 = points[intPoint === 0 ? intPoint : intPoint - 1];\n      var p1 = points[intPoint];\n      var p2 = points[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n      var p3 = points[intPoint > points.length - 3 ? points.length - 1 : intPoint + 2];\n      point.set(CatmullRom(weight, p0.x, p1.x, p2.x, p3.x), CatmullRom(weight, p0.y, p1.y, p2.y, p3.y));\n      return point;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(SplineCurve.prototype), \"copy\", this).call(this, source);\n\n      this.points = [];\n\n      for (var _i177 = 0, _l59 = source.points.length; _i177 < _l59; _i177++) {\n        var point = source.points[_i177];\n        this.points.push(point.clone());\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(SplineCurve.prototype), \"toJSON\", this).call(this);\n\n      data.points = [];\n\n      for (var _i178 = 0, _l60 = this.points.length; _i178 < _l60; _i178++) {\n        var point = this.points[_i178];\n        data.points.push(point.toArray());\n      }\n\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(SplineCurve.prototype), \"fromJSON\", this).call(this, json);\n\n      this.points = [];\n\n      for (var _i179 = 0, _l61 = json.points.length; _i179 < _l61; _i179++) {\n        var point = json.points[_i179];\n        this.points.push(new Vector2().fromArray(point));\n      }\n\n      return this;\n    }\n  }]);\n\n  return SplineCurve;\n}(Curve);\n\nSplineCurve.prototype.isSplineCurve = true;\nvar Curves = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ArcCurve: ArcCurve,\n  CatmullRomCurve3: CatmullRomCurve3,\n  CubicBezierCurve: CubicBezierCurve,\n  CubicBezierCurve3: CubicBezierCurve3,\n  EllipseCurve: EllipseCurve,\n  LineCurve: LineCurve,\n  LineCurve3: LineCurve3,\n  QuadraticBezierCurve: QuadraticBezierCurve,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  SplineCurve: SplineCurve\n});\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nvar Earcut = {\n  triangulate: function triangulate(data, holeIndices) {\n    var dim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n    var outerNode = linkedList(data, 0, outerLen, dim, true);\n    var triangles = [];\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n    var minX, minY, maxX, maxY, x, y, invSize;\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim); // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\n    if (data.length > 80 * dim) {\n      minX = maxX = data[0];\n      minY = maxY = data[1];\n\n      for (var _i180 = dim; _i180 < outerLen; _i180 += dim) {\n        x = data[_i180];\n        y = data[_i180 + 1];\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n      } // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\n\n      invSize = Math.max(maxX - minX, maxY - minY);\n      invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n    return triangles;\n  }\n}; // create a circular doubly linked list from polygon points in the specified winding order\n\nfunction linkedList(data, start, end, dim, clockwise) {\n  var i, last;\n\n  if (clockwise === signedArea(data, start, end, dim) > 0) {\n    for (i = start; i < end; i += dim) {\n      last = insertNode(i, data[i], data[i + 1], last);\n    }\n  } else {\n    for (i = end - dim; i >= start; i -= dim) {\n      last = insertNode(i, data[i], data[i + 1], last);\n    }\n  }\n\n  if (last && equals(last, last.next)) {\n    removeNode(last);\n    last = last.next;\n  }\n\n  return last;\n} // eliminate colinear or duplicate points\n\n\nfunction filterPoints(start, end) {\n  if (!start) return start;\n  if (!end) end = start;\n  var p = start,\n      again;\n\n  do {\n    again = false;\n\n    if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n      removeNode(p);\n      p = end = p.prev;\n      if (p === p.next) break;\n      again = true;\n    } else {\n      p = p.next;\n    }\n  } while (again || p !== end);\n\n  return end;\n} // main ear slicing loop which triangulates a polygon (given as a linked list)\n\n\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n  if (!ear) return; // interlink polygon nodes in z-order\n\n  if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n  var stop = ear,\n      prev,\n      next; // iterate through ears, slicing them one by one\n\n  while (ear.prev !== ear.next) {\n    prev = ear.prev;\n    next = ear.next;\n\n    if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n      // cut off the triangle\n      triangles.push(prev.i / dim);\n      triangles.push(ear.i / dim);\n      triangles.push(next.i / dim);\n      removeNode(ear); // skipping the next vertex leads to less sliver triangles\n\n      ear = next.next;\n      stop = next.next;\n      continue;\n    }\n\n    ear = next; // if we looped through the whole remaining polygon and can't find any more ears\n\n    if (ear === stop) {\n      // try filtering points and slicing again\n      if (!pass) {\n        earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1); // if this didn't work, try curing all small self-intersections locally\n      } else if (pass === 1) {\n        ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n        earcutLinked(ear, triangles, dim, minX, minY, invSize, 2); // as a last resort, try splitting the remaining polygon into two\n      } else if (pass === 2) {\n        splitEarcut(ear, triangles, dim, minX, minY, invSize);\n      }\n\n      break;\n    }\n  }\n} // check whether a polygon node forms a valid ear with adjacent nodes\n\n\nfunction isEar(ear) {\n  var a = ear.prev,\n      b = ear,\n      c = ear.next;\n  if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n  // now make sure we don't have other points inside the potential ear\n\n  var p = ear.next.next;\n\n  while (p !== ear.prev) {\n    if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.next;\n  }\n\n  return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n  var a = ear.prev,\n      b = ear,\n      c = ear.next;\n  if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n  // triangle bbox; min & max are calculated like this for speed\n\n  var minTX = a.x < b.x ? a.x < c.x ? a.x : c.x : b.x < c.x ? b.x : c.x,\n      minTY = a.y < b.y ? a.y < c.y ? a.y : c.y : b.y < c.y ? b.y : c.y,\n      maxTX = a.x > b.x ? a.x > c.x ? a.x : c.x : b.x > c.x ? b.x : c.x,\n      maxTY = a.y > b.y ? a.y > c.y ? a.y : c.y : b.y > c.y ? b.y : c.y; // z-order range for the current triangle bbox;\n\n  var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n      maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n  var p = ear.prevZ,\n      n = ear.nextZ; // look for points inside the triangle in both directions\n\n  while (p && p.z >= minZ && n && n.z <= maxZ) {\n    if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.prevZ;\n    if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n    n = n.nextZ;\n  } // look for remaining points in decreasing z-order\n\n\n  while (p && p.z >= minZ) {\n    if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.prevZ;\n  } // look for remaining points in increasing z-order\n\n\n  while (n && n.z <= maxZ) {\n    if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n    n = n.nextZ;\n  }\n\n  return true;\n} // go through all polygon nodes and cure small local self-intersections\n\n\nfunction cureLocalIntersections(start, triangles, dim) {\n  var p = start;\n\n  do {\n    var _a12 = p.prev,\n        b = p.next.next;\n\n    if (!equals(_a12, b) && intersects(_a12, p, p.next, b) && locallyInside(_a12, b) && locallyInside(b, _a12)) {\n      triangles.push(_a12.i / dim);\n      triangles.push(p.i / dim);\n      triangles.push(b.i / dim); // remove two nodes involved\n\n      removeNode(p);\n      removeNode(p.next);\n      p = start = b;\n    }\n\n    p = p.next;\n  } while (p !== start);\n\n  return filterPoints(p);\n} // try splitting polygon into two and triangulate them independently\n\n\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n  // look for a valid diagonal that divides the polygon into two\n  var a = start;\n\n  do {\n    var b = a.next.next;\n\n    while (b !== a.prev) {\n      if (a.i !== b.i && isValidDiagonal(a, b)) {\n        // split the polygon in two by the diagonal\n        var _c10 = splitPolygon(a, b); // filter colinear points around the cuts\n\n\n        a = filterPoints(a, a.next);\n        _c10 = filterPoints(_c10, _c10.next); // run earcut on each half\n\n        earcutLinked(a, triangles, dim, minX, minY, invSize);\n        earcutLinked(_c10, triangles, dim, minX, minY, invSize);\n        return;\n      }\n\n      b = b.next;\n    }\n\n    a = a.next;\n  } while (a !== start);\n} // link every hole into the outer loop, producing a single-ring polygon without holes\n\n\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n  var queue = [];\n  var i, len, start, end, list;\n\n  for (i = 0, len = holeIndices.length; i < len; i++) {\n    start = holeIndices[i] * dim;\n    end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n    list = linkedList(data, start, end, dim, false);\n    if (list === list.next) list.steiner = true;\n    queue.push(getLeftmost(list));\n  }\n\n  queue.sort(compareX); // process holes from left to right\n\n  for (i = 0; i < queue.length; i++) {\n    eliminateHole(queue[i], outerNode);\n    outerNode = filterPoints(outerNode, outerNode.next);\n  }\n\n  return outerNode;\n}\n\nfunction compareX(a, b) {\n  return a.x - b.x;\n} // find a bridge between vertices that connects hole with an outer ring and and link it\n\n\nfunction eliminateHole(hole, outerNode) {\n  outerNode = findHoleBridge(hole, outerNode);\n\n  if (outerNode) {\n    var b = splitPolygon(outerNode, hole); // filter collinear points around the cuts\n\n    filterPoints(outerNode, outerNode.next);\n    filterPoints(b, b.next);\n  }\n} // David Eberly's algorithm for finding a bridge between hole and outer polygon\n\n\nfunction findHoleBridge(hole, outerNode) {\n  var p = outerNode;\n  var hx = hole.x;\n  var hy = hole.y;\n  var qx = -Infinity,\n      m; // find a segment intersected by a ray from the hole's leftmost point to the left;\n  // segment's endpoint with lesser x will be potential connection point\n\n  do {\n    if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n      var _x9 = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n\n      if (_x9 <= hx && _x9 > qx) {\n        qx = _x9;\n\n        if (_x9 === hx) {\n          if (hy === p.y) return p;\n          if (hy === p.next.y) return p.next;\n        }\n\n        m = p.x < p.next.x ? p : p.next;\n      }\n    }\n\n    p = p.next;\n  } while (p !== outerNode);\n\n  if (!m) return null;\n  if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n  // look for points inside the triangle of hole point, segment intersection and endpoint;\n  // if there are no points found, we have a valid connection;\n  // otherwise choose the point of the minimum angle with the ray as connection point\n\n  var stop = m,\n      mx = m.x,\n      my = m.y;\n  var tanMin = Infinity,\n      tan;\n  p = m;\n\n  do {\n    if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n      tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n      if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {\n        m = p;\n        tanMin = tan;\n      }\n    }\n\n    p = p.next;\n  } while (p !== stop);\n\n  return m;\n} // whether sector in vertex m contains sector in vertex p in the same coordinates\n\n\nfunction sectorContainsSector(m, p) {\n  return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n} // interlink polygon nodes in z-order\n\n\nfunction indexCurve(start, minX, minY, invSize) {\n  var p = start;\n\n  do {\n    if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n    p.prevZ = p.prev;\n    p.nextZ = p.next;\n    p = p.next;\n  } while (p !== start);\n\n  p.prevZ.nextZ = null;\n  p.prevZ = null;\n  sortLinked(p);\n} // Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\n\nfunction sortLinked(list) {\n  var i,\n      p,\n      q,\n      e,\n      tail,\n      numMerges,\n      pSize,\n      qSize,\n      inSize = 1;\n\n  do {\n    p = list;\n    list = null;\n    tail = null;\n    numMerges = 0;\n\n    while (p) {\n      numMerges++;\n      q = p;\n      pSize = 0;\n\n      for (i = 0; i < inSize; i++) {\n        pSize++;\n        q = q.nextZ;\n        if (!q) break;\n      }\n\n      qSize = inSize;\n\n      while (pSize > 0 || qSize > 0 && q) {\n        if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n          e = p;\n          p = p.nextZ;\n          pSize--;\n        } else {\n          e = q;\n          q = q.nextZ;\n          qSize--;\n        }\n\n        if (tail) tail.nextZ = e;else list = e;\n        e.prevZ = tail;\n        tail = e;\n      }\n\n      p = q;\n    }\n\n    tail.nextZ = null;\n    inSize *= 2;\n  } while (numMerges > 1);\n\n  return list;\n} // z-order of a point given coords and inverse of the longer side of data bbox\n\n\nfunction zOrder(x, y, minX, minY, invSize) {\n  // coords are transformed into non-negative 15-bit integer range\n  x = 32767 * (x - minX) * invSize;\n  y = 32767 * (y - minY) * invSize;\n  x = (x | x << 8) & 0x00FF00FF;\n  x = (x | x << 4) & 0x0F0F0F0F;\n  x = (x | x << 2) & 0x33333333;\n  x = (x | x << 1) & 0x55555555;\n  y = (y | y << 8) & 0x00FF00FF;\n  y = (y | y << 4) & 0x0F0F0F0F;\n  y = (y | y << 2) & 0x33333333;\n  y = (y | y << 1) & 0x55555555;\n  return x | y << 1;\n} // find the leftmost node of a polygon ring\n\n\nfunction getLeftmost(start) {\n  var p = start,\n      leftmost = start;\n\n  do {\n    if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y) leftmost = p;\n    p = p.next;\n  } while (p !== start);\n\n  return leftmost;\n} // check if a point lies within a convex triangle\n\n\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n  return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 && (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 && (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n} // check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\n\nfunction isValidDiagonal(a, b) {\n  return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n  equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n} // signed area of a triangle\n\n\nfunction area(p, q, r) {\n  return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n} // check if two points are equal\n\n\nfunction equals(p1, p2) {\n  return p1.x === p2.x && p1.y === p2.y;\n} // check if two segments intersect\n\n\nfunction intersects(p1, q1, p2, q2) {\n  var o1 = sign(area(p1, q1, p2));\n  var o2 = sign(area(p1, q1, q2));\n  var o3 = sign(area(p2, q2, p1));\n  var o4 = sign(area(p2, q2, q1));\n  if (o1 !== o2 && o3 !== o4) return true; // general case\n\n  if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\n  if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\n  if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\n  if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n  return false;\n} // for collinear points p, q, r, check if point q lies on segment pr\n\n\nfunction onSegment(p, q, r) {\n  return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n  return num > 0 ? 1 : num < 0 ? -1 : 0;\n} // check if a polygon diagonal intersects any polygon segments\n\n\nfunction intersectsPolygon(a, b) {\n  var p = a;\n\n  do {\n    if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b)) return true;\n    p = p.next;\n  } while (p !== a);\n\n  return false;\n} // check if a polygon diagonal is locally inside the polygon\n\n\nfunction locallyInside(a, b) {\n  return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n} // check if the middle point of a polygon diagonal is inside the polygon\n\n\nfunction middleInside(a, b) {\n  var p = a,\n      inside = false;\n  var px = (a.x + b.x) / 2,\n      py = (a.y + b.y) / 2;\n\n  do {\n    if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x) inside = !inside;\n    p = p.next;\n  } while (p !== a);\n\n  return inside;\n} // link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\n\nfunction splitPolygon(a, b) {\n  var a2 = new Node$1(a.i, a.x, a.y),\n      b2 = new Node$1(b.i, b.x, b.y),\n      an = a.next,\n      bp = b.prev;\n  a.next = b;\n  b.prev = a;\n  a2.next = an;\n  an.prev = a2;\n  b2.next = a2;\n  a2.prev = b2;\n  bp.next = b2;\n  b2.prev = bp;\n  return b2;\n} // create a node and optionally link it with previous one (in a circular doubly linked list)\n\n\nfunction insertNode(i, x, y, last) {\n  var p = new Node$1(i, x, y);\n\n  if (!last) {\n    p.prev = p;\n    p.next = p;\n  } else {\n    p.next = last.next;\n    p.prev = last;\n    last.next.prev = p;\n    last.next = p;\n  }\n\n  return p;\n}\n\nfunction removeNode(p) {\n  p.next.prev = p.prev;\n  p.prev.next = p.next;\n  if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n  if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node$1(i, x, y) {\n  // vertex index in coordinates array\n  this.i = i; // vertex coordinates\n\n  this.x = x;\n  this.y = y; // previous and next vertex nodes in a polygon ring\n\n  this.prev = null;\n  this.next = null; // z-order curve value\n\n  this.z = null; // previous and next nodes in z-order\n\n  this.prevZ = null;\n  this.nextZ = null; // indicates whether this is a steiner point\n\n  this.steiner = false;\n}\n\nfunction signedArea(data, start, end, dim) {\n  var sum = 0;\n\n  for (var _i181 = start, j = end - dim; _i181 < end; _i181 += dim) {\n    sum += (data[j] - data[_i181]) * (data[_i181 + 1] + data[j + 1]);\n    j = _i181;\n  }\n\n  return sum;\n}\n\nvar ShapeUtils = /*#__PURE__*/function () {\n  function ShapeUtils() {\n    _classCallCheck(this, ShapeUtils);\n  }\n\n  _createClass(ShapeUtils, null, [{\n    key: \"area\",\n    value: // calculate area of the contour polygon\n    function area(contour) {\n      var n = contour.length;\n      var a = 0.0;\n\n      for (var _p8 = n - 1, q = 0; q < n; _p8 = q++) {\n        a += contour[_p8].x * contour[q].y - contour[q].x * contour[_p8].y;\n      }\n\n      return a * 0.5;\n    }\n  }, {\n    key: \"isClockWise\",\n    value: function isClockWise(pts) {\n      return ShapeUtils.area(pts) < 0;\n    }\n  }, {\n    key: \"triangulateShape\",\n    value: function triangulateShape(contour, holes) {\n      var vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\n      var holeIndices = []; // array of hole indices\n\n      var faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n      removeDupEndPts(contour);\n      addContour(vertices, contour); //\n\n      var holeIndex = contour.length;\n      holes.forEach(removeDupEndPts);\n\n      for (var _i182 = 0; _i182 < holes.length; _i182++) {\n        holeIndices.push(holeIndex);\n        holeIndex += holes[_i182].length;\n        addContour(vertices, holes[_i182]);\n      } //\n\n\n      var triangles = Earcut.triangulate(vertices, holeIndices); //\n\n      for (var _i183 = 0; _i183 < triangles.length; _i183 += 3) {\n        faces.push(triangles.slice(_i183, _i183 + 3));\n      }\n\n      return faces;\n    }\n  }]);\n\n  return ShapeUtils;\n}();\n\nfunction removeDupEndPts(points) {\n  var l = points.length;\n\n  if (l > 2 && points[l - 1].equals(points[0])) {\n    points.pop();\n  }\n}\n\nfunction addContour(vertices, contour) {\n  for (var _i184 = 0; _i184 < contour.length; _i184++) {\n    vertices.push(contour[_i184].x);\n    vertices.push(contour[_i184].y);\n  }\n}\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\n\nvar ExtrudeGeometry = /*#__PURE__*/function (_BufferGeometry3) {\n  _inherits(ExtrudeGeometry, _BufferGeometry3);\n\n  var _super61 = _createSuper(ExtrudeGeometry);\n\n  function ExtrudeGeometry(shapes, options) {\n    var _this63;\n\n    _classCallCheck(this, ExtrudeGeometry);\n\n    _this63 = _super61.call(this);\n    _this63.type = 'ExtrudeGeometry';\n    _this63.parameters = {\n      shapes: shapes,\n      options: options\n    };\n    shapes = Array.isArray(shapes) ? shapes : [shapes];\n\n    var scope = _assertThisInitialized(_this63);\n\n    var verticesArray = [];\n    var uvArray = [];\n\n    for (var _i185 = 0, _l62 = shapes.length; _i185 < _l62; _i185++) {\n      var shape = shapes[_i185];\n      addShape(shape);\n    } // build geometry\n\n\n    _this63.setAttribute('position', new Float32BufferAttribute(verticesArray, 3));\n\n    _this63.setAttribute('uv', new Float32BufferAttribute(uvArray, 2));\n\n    _this63.computeVertexNormals(); // functions\n\n\n    function addShape(shape) {\n      var placeholder = []; // options\n\n      var curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n      var steps = options.steps !== undefined ? options.steps : 1;\n      var depth = options.depth !== undefined ? options.depth : 100;\n      var bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n      var bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n      var bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n      var bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n      var bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n      var extrudePath = options.extrudePath;\n      var uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator; // deprecated options\n\n      if (options.amount !== undefined) {\n        console.warn('THREE.ExtrudeBufferGeometry: amount has been renamed to depth.');\n        depth = options.amount;\n      } //\n\n\n      var extrudePts,\n          extrudeByPath = false;\n      var splineTube, binormal, normal, position2;\n\n      if (extrudePath) {\n        extrudePts = extrudePath.getSpacedPoints(steps);\n        extrudeByPath = true;\n        bevelEnabled = false; // bevels not supported for path extrusion\n        // SETUP TNB variables\n        // TODO1 - have a .isClosed in spline?\n\n        splineTube = extrudePath.computeFrenetFrames(steps, false); // console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n        binormal = new Vector3();\n        normal = new Vector3();\n        position2 = new Vector3();\n      } // Safeguards if bevels are not enabled\n\n\n      if (!bevelEnabled) {\n        bevelSegments = 0;\n        bevelThickness = 0;\n        bevelSize = 0;\n        bevelOffset = 0;\n      } // Variables initialization\n\n\n      var shapePoints = shape.extractPoints(curveSegments);\n      var vertices = shapePoints.shape;\n      var holes = shapePoints.holes;\n      var reverse = !ShapeUtils.isClockWise(vertices);\n\n      if (reverse) {\n        vertices = vertices.reverse(); // Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n        for (var h = 0, hl = holes.length; h < hl; h++) {\n          var ahole = holes[h];\n\n          if (ShapeUtils.isClockWise(ahole)) {\n            holes[h] = ahole.reverse();\n          }\n        }\n      }\n\n      var faces = ShapeUtils.triangulateShape(vertices, holes);\n      /* Vertices */\n\n      var contour = vertices; // vertices has all points but contour has only points of circumference\n\n      for (var _h2 = 0, _hl = holes.length; _h2 < _hl; _h2++) {\n        var _ahole = holes[_h2];\n        vertices = vertices.concat(_ahole);\n      }\n\n      function scalePt2(pt, vec, size) {\n        if (!vec) console.error('THREE.ExtrudeGeometry: vec does not exist');\n        return vec.clone().multiplyScalar(size).add(pt);\n      }\n\n      var vlen = vertices.length,\n          flen = faces.length; // Find directions for point movement\n\n      function getBevelVec(inPt, inPrev, inNext) {\n        // computes for inPt the corresponding point inPt' on a new contour\n        //   shifted by 1 unit (length of normalized vector) to the left\n        // if we walk along contour clockwise, this new contour is outside the old one\n        //\n        // inPt' is the intersection of the two lines parallel to the two\n        //  adjacent edges of inPt at a distance of 1 unit on the left side.\n        var v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n        // good reading for geometry algorithms (here: line-line intersection)\n        // http://geomalgorithms.com/a05-_intersect-1.html\n\n        var v_prev_x = inPt.x - inPrev.x,\n            v_prev_y = inPt.y - inPrev.y;\n        var v_next_x = inNext.x - inPt.x,\n            v_next_y = inNext.y - inPt.y;\n        var v_prev_lensq = v_prev_x * v_prev_x + v_prev_y * v_prev_y; // check for collinear edges\n\n        var collinear0 = v_prev_x * v_next_y - v_prev_y * v_next_x;\n\n        if (Math.abs(collinear0) > Number.EPSILON) {\n          // not collinear\n          // length of vectors for normalizing\n          var v_prev_len = Math.sqrt(v_prev_lensq);\n          var v_next_len = Math.sqrt(v_next_x * v_next_x + v_next_y * v_next_y); // shift adjacent points by unit vectors to the left\n\n          var ptPrevShift_x = inPrev.x - v_prev_y / v_prev_len;\n          var ptPrevShift_y = inPrev.y + v_prev_x / v_prev_len;\n          var ptNextShift_x = inNext.x - v_next_y / v_next_len;\n          var ptNextShift_y = inNext.y + v_next_x / v_next_len; // scaling factor for v_prev to intersection point\n\n          var sf = ((ptNextShift_x - ptPrevShift_x) * v_next_y - (ptNextShift_y - ptPrevShift_y) * v_next_x) / (v_prev_x * v_next_y - v_prev_y * v_next_x); // vector from inPt to intersection point\n\n          v_trans_x = ptPrevShift_x + v_prev_x * sf - inPt.x;\n          v_trans_y = ptPrevShift_y + v_prev_y * sf - inPt.y; // Don't normalize!, otherwise sharp corners become ugly\n          //  but prevent crazy spikes\n\n          var v_trans_lensq = v_trans_x * v_trans_x + v_trans_y * v_trans_y;\n\n          if (v_trans_lensq <= 2) {\n            return new Vector2(v_trans_x, v_trans_y);\n          } else {\n            shrink_by = Math.sqrt(v_trans_lensq / 2);\n          }\n        } else {\n          // handle special case of collinear edges\n          var direction_eq = false; // assumes: opposite\n\n          if (v_prev_x > Number.EPSILON) {\n            if (v_next_x > Number.EPSILON) {\n              direction_eq = true;\n            }\n          } else {\n            if (v_prev_x < -Number.EPSILON) {\n              if (v_next_x < -Number.EPSILON) {\n                direction_eq = true;\n              }\n            } else {\n              if (Math.sign(v_prev_y) === Math.sign(v_next_y)) {\n                direction_eq = true;\n              }\n            }\n          }\n\n          if (direction_eq) {\n            // console.log(\"Warning: lines are a straight sequence\");\n            v_trans_x = -v_prev_y;\n            v_trans_y = v_prev_x;\n            shrink_by = Math.sqrt(v_prev_lensq);\n          } else {\n            // console.log(\"Warning: lines are a straight spike\");\n            v_trans_x = v_prev_x;\n            v_trans_y = v_prev_y;\n            shrink_by = Math.sqrt(v_prev_lensq / 2);\n          }\n        }\n\n        return new Vector2(v_trans_x / shrink_by, v_trans_y / shrink_by);\n      }\n\n      var contourMovements = [];\n\n      for (var _i186 = 0, il = contour.length, j = il - 1, k = _i186 + 1; _i186 < il; _i186++, j++, k++) {\n        if (j === il) j = 0;\n        if (k === il) k = 0; //  (j)---(i)---(k)\n        // console.log('i,j,k', i, j , k)\n\n        contourMovements[_i186] = getBevelVec(contour[_i186], contour[j], contour[k]);\n      }\n\n      var holesMovements = [];\n      var oneHoleMovements,\n          verticesMovements = contourMovements.concat();\n\n      for (var _h3 = 0, _hl2 = holes.length; _h3 < _hl2; _h3++) {\n        var _ahole2 = holes[_h3];\n        oneHoleMovements = [];\n\n        for (var _i187 = 0, _il13 = _ahole2.length, _j7 = _il13 - 1, _k2 = _i187 + 1; _i187 < _il13; _i187++, _j7++, _k2++) {\n          if (_j7 === _il13) _j7 = 0;\n          if (_k2 === _il13) _k2 = 0; //  (j)---(i)---(k)\n\n          oneHoleMovements[_i187] = getBevelVec(_ahole2[_i187], _ahole2[_j7], _ahole2[_k2]);\n        }\n\n        holesMovements.push(oneHoleMovements);\n        verticesMovements = verticesMovements.concat(oneHoleMovements);\n      } // Loop bevelSegments, 1 for the front, 1 for the back\n\n\n      for (var b = 0; b < bevelSegments; b++) {\n        //for ( b = bevelSegments; b > 0; b -- ) {\n        var t = b / bevelSegments;\n        var z = bevelThickness * Math.cos(t * Math.PI / 2);\n\n        var _bs = bevelSize * Math.sin(t * Math.PI / 2) + bevelOffset; // contract shape\n\n\n        for (var _i188 = 0, _il14 = contour.length; _i188 < _il14; _i188++) {\n          var vert = scalePt2(contour[_i188], contourMovements[_i188], _bs);\n          v(vert.x, vert.y, -z);\n        } // expand holes\n\n\n        for (var _h4 = 0, _hl3 = holes.length; _h4 < _hl3; _h4++) {\n          var _ahole3 = holes[_h4];\n          oneHoleMovements = holesMovements[_h4];\n\n          for (var _i189 = 0, _il15 = _ahole3.length; _i189 < _il15; _i189++) {\n            var _vert = scalePt2(_ahole3[_i189], oneHoleMovements[_i189], _bs);\n\n            v(_vert.x, _vert.y, -z);\n          }\n        }\n      }\n\n      var bs = bevelSize + bevelOffset; // Back facing vertices\n\n      for (var _i190 = 0; _i190 < vlen; _i190++) {\n        var _vert2 = bevelEnabled ? scalePt2(vertices[_i190], verticesMovements[_i190], bs) : vertices[_i190];\n\n        if (!extrudeByPath) {\n          v(_vert2.x, _vert2.y, 0);\n        } else {\n          // v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n          normal.copy(splineTube.normals[0]).multiplyScalar(_vert2.x);\n          binormal.copy(splineTube.binormals[0]).multiplyScalar(_vert2.y);\n          position2.copy(extrudePts[0]).add(normal).add(binormal);\n          v(position2.x, position2.y, position2.z);\n        }\n      } // Add stepped vertices...\n      // Including front facing vertices\n\n\n      for (var _s11 = 1; _s11 <= steps; _s11++) {\n        for (var _i191 = 0; _i191 < vlen; _i191++) {\n          var _vert3 = bevelEnabled ? scalePt2(vertices[_i191], verticesMovements[_i191], bs) : vertices[_i191];\n\n          if (!extrudeByPath) {\n            v(_vert3.x, _vert3.y, depth / steps * _s11);\n          } else {\n            // v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n            normal.copy(splineTube.normals[_s11]).multiplyScalar(_vert3.x);\n            binormal.copy(splineTube.binormals[_s11]).multiplyScalar(_vert3.y);\n            position2.copy(extrudePts[_s11]).add(normal).add(binormal);\n            v(position2.x, position2.y, position2.z);\n          }\n        }\n      } // Add bevel segments planes\n      //for ( b = 1; b <= bevelSegments; b ++ ) {\n\n\n      for (var _b6 = bevelSegments - 1; _b6 >= 0; _b6--) {\n        var _t = _b6 / bevelSegments;\n\n        var _z2 = bevelThickness * Math.cos(_t * Math.PI / 2);\n\n        var _bs2 = bevelSize * Math.sin(_t * Math.PI / 2) + bevelOffset; // contract shape\n\n\n        for (var _i192 = 0, _il16 = contour.length; _i192 < _il16; _i192++) {\n          var _vert4 = scalePt2(contour[_i192], contourMovements[_i192], _bs2);\n\n          v(_vert4.x, _vert4.y, depth + _z2);\n        } // expand holes\n\n\n        for (var _h5 = 0, _hl4 = holes.length; _h5 < _hl4; _h5++) {\n          var _ahole4 = holes[_h5];\n          oneHoleMovements = holesMovements[_h5];\n\n          for (var _i193 = 0, _il17 = _ahole4.length; _i193 < _il17; _i193++) {\n            var _vert5 = scalePt2(_ahole4[_i193], oneHoleMovements[_i193], _bs2);\n\n            if (!extrudeByPath) {\n              v(_vert5.x, _vert5.y, depth + _z2);\n            } else {\n              v(_vert5.x, _vert5.y + extrudePts[steps - 1].y, extrudePts[steps - 1].x + _z2);\n            }\n          }\n        }\n      }\n      /* Faces */\n      // Top and bottom faces\n\n\n      buildLidFaces(); // Sides faces\n\n      buildSideFaces(); /////  Internal functions\n\n      function buildLidFaces() {\n        var start = verticesArray.length / 3;\n\n        if (bevelEnabled) {\n          var layer = 0; // steps + 1\n\n          var offset = vlen * layer; // Bottom faces\n\n          for (var _i194 = 0; _i194 < flen; _i194++) {\n            var face = faces[_i194];\n            f3(face[2] + offset, face[1] + offset, face[0] + offset);\n          }\n\n          layer = steps + bevelSegments * 2;\n          offset = vlen * layer; // Top faces\n\n          for (var _i195 = 0; _i195 < flen; _i195++) {\n            var _face = faces[_i195];\n            f3(_face[0] + offset, _face[1] + offset, _face[2] + offset);\n          }\n        } else {\n          // Bottom faces\n          for (var _i196 = 0; _i196 < flen; _i196++) {\n            var _face2 = faces[_i196];\n            f3(_face2[2], _face2[1], _face2[0]);\n          } // Top faces\n\n\n          for (var _i197 = 0; _i197 < flen; _i197++) {\n            var _face3 = faces[_i197];\n            f3(_face3[0] + vlen * steps, _face3[1] + vlen * steps, _face3[2] + vlen * steps);\n          }\n        }\n\n        scope.addGroup(start, verticesArray.length / 3 - start, 0);\n      } // Create faces for the z-sides of the shape\n\n\n      function buildSideFaces() {\n        var start = verticesArray.length / 3;\n        var layeroffset = 0;\n        sidewalls(contour, layeroffset);\n        layeroffset += contour.length;\n\n        for (var _h6 = 0, _hl5 = holes.length; _h6 < _hl5; _h6++) {\n          var _ahole5 = holes[_h6];\n          sidewalls(_ahole5, layeroffset); //, true\n\n          layeroffset += _ahole5.length;\n        }\n\n        scope.addGroup(start, verticesArray.length / 3 - start, 1);\n      }\n\n      function sidewalls(contour, layeroffset) {\n        var i = contour.length;\n\n        while (--i >= 0) {\n          var _j8 = i;\n\n          var _k3 = i - 1;\n\n          if (_k3 < 0) _k3 = contour.length - 1; //console.log('b', i,j, i-1, k,vertices.length);\n\n          for (var _s12 = 0, sl = steps + bevelSegments * 2; _s12 < sl; _s12++) {\n            var slen1 = vlen * _s12;\n            var slen2 = vlen * (_s12 + 1);\n\n            var _a13 = layeroffset + _j8 + slen1,\n                _b7 = layeroffset + _k3 + slen1,\n                _c11 = layeroffset + _k3 + slen2,\n                d = layeroffset + _j8 + slen2;\n\n            f4(_a13, _b7, _c11, d);\n          }\n        }\n      }\n\n      function v(x, y, z) {\n        placeholder.push(x);\n        placeholder.push(y);\n        placeholder.push(z);\n      }\n\n      function f3(a, b, c) {\n        addVertex(a);\n        addVertex(b);\n        addVertex(c);\n        var nextIndex = verticesArray.length / 3;\n        var uvs = uvgen.generateTopUV(scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1);\n        addUV(uvs[0]);\n        addUV(uvs[1]);\n        addUV(uvs[2]);\n      }\n\n      function f4(a, b, c, d) {\n        addVertex(a);\n        addVertex(b);\n        addVertex(d);\n        addVertex(b);\n        addVertex(c);\n        addVertex(d);\n        var nextIndex = verticesArray.length / 3;\n        var uvs = uvgen.generateSideWallUV(scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1);\n        addUV(uvs[0]);\n        addUV(uvs[1]);\n        addUV(uvs[3]);\n        addUV(uvs[1]);\n        addUV(uvs[2]);\n        addUV(uvs[3]);\n      }\n\n      function addVertex(index) {\n        verticesArray.push(placeholder[index * 3 + 0]);\n        verticesArray.push(placeholder[index * 3 + 1]);\n        verticesArray.push(placeholder[index * 3 + 2]);\n      }\n\n      function addUV(vector2) {\n        uvArray.push(vector2.x);\n        uvArray.push(vector2.y);\n      }\n    }\n\n    return _this63;\n  }\n\n  _createClass(ExtrudeGeometry, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(ExtrudeGeometry.prototype), \"toJSON\", this).call(this);\n\n      var shapes = this.parameters.shapes;\n      var options = this.parameters.options;\n      return toJSON$1(shapes, options, data);\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(data, shapes) {\n      var geometryShapes = [];\n\n      for (var j = 0, jl = data.shapes.length; j < jl; j++) {\n        var shape = shapes[data.shapes[j]];\n        geometryShapes.push(shape);\n      }\n\n      var extrudePath = data.options.extrudePath;\n\n      if (extrudePath !== undefined) {\n        data.options.extrudePath = new Curves[extrudePath.type]().fromJSON(extrudePath);\n      }\n\n      return new ExtrudeGeometry(geometryShapes, data.options);\n    }\n  }]);\n\n  return ExtrudeGeometry;\n}(BufferGeometry);\n\nvar WorldUVGenerator = {\n  generateTopUV: function generateTopUV(geometry, vertices, indexA, indexB, indexC) {\n    var a_x = vertices[indexA * 3];\n    var a_y = vertices[indexA * 3 + 1];\n    var b_x = vertices[indexB * 3];\n    var b_y = vertices[indexB * 3 + 1];\n    var c_x = vertices[indexC * 3];\n    var c_y = vertices[indexC * 3 + 1];\n    return [new Vector2(a_x, a_y), new Vector2(b_x, b_y), new Vector2(c_x, c_y)];\n  },\n  generateSideWallUV: function generateSideWallUV(geometry, vertices, indexA, indexB, indexC, indexD) {\n    var a_x = vertices[indexA * 3];\n    var a_y = vertices[indexA * 3 + 1];\n    var a_z = vertices[indexA * 3 + 2];\n    var b_x = vertices[indexB * 3];\n    var b_y = vertices[indexB * 3 + 1];\n    var b_z = vertices[indexB * 3 + 2];\n    var c_x = vertices[indexC * 3];\n    var c_y = vertices[indexC * 3 + 1];\n    var c_z = vertices[indexC * 3 + 2];\n    var d_x = vertices[indexD * 3];\n    var d_y = vertices[indexD * 3 + 1];\n    var d_z = vertices[indexD * 3 + 2];\n\n    if (Math.abs(a_y - b_y) < Math.abs(a_x - b_x)) {\n      return [new Vector2(a_x, 1 - a_z), new Vector2(b_x, 1 - b_z), new Vector2(c_x, 1 - c_z), new Vector2(d_x, 1 - d_z)];\n    } else {\n      return [new Vector2(a_y, 1 - a_z), new Vector2(b_y, 1 - b_z), new Vector2(c_y, 1 - c_z), new Vector2(d_y, 1 - d_z)];\n    }\n  }\n};\n\nfunction toJSON$1(shapes, options, data) {\n  data.shapes = [];\n\n  if (Array.isArray(shapes)) {\n    for (var _i198 = 0, _l63 = shapes.length; _i198 < _l63; _i198++) {\n      var shape = shapes[_i198];\n      data.shapes.push(shape.uuid);\n    }\n  } else {\n    data.shapes.push(shapes.uuid);\n  }\n\n  if (options.extrudePath !== undefined) data.options.extrudePath = options.extrudePath.toJSON();\n  return data;\n}\n\nvar ShapeGeometry = /*#__PURE__*/function (_BufferGeometry4) {\n  _inherits(ShapeGeometry, _BufferGeometry4);\n\n  var _super62 = _createSuper(ShapeGeometry);\n\n  function ShapeGeometry(shapes) {\n    var _this64;\n\n    var curveSegments = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 12;\n\n    _classCallCheck(this, ShapeGeometry);\n\n    _this64 = _super62.call(this);\n    _this64.type = 'ShapeGeometry';\n    _this64.parameters = {\n      shapes: shapes,\n      curveSegments: curveSegments\n    }; // buffers\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = []; // helper variables\n\n    var groupStart = 0;\n    var groupCount = 0; // allow single and array values for \"shapes\" parameter\n\n    if (Array.isArray(shapes) === false) {\n      addShape(shapes);\n    } else {\n      for (var _i199 = 0; _i199 < shapes.length; _i199++) {\n        addShape(shapes[_i199]);\n\n        _this64.addGroup(groupStart, groupCount, _i199); // enables MultiMaterial support\n\n\n        groupStart += groupCount;\n        groupCount = 0;\n      }\n    } // build geometry\n\n\n    _this64.setIndex(indices);\n\n    _this64.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n\n    _this64.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n\n    _this64.setAttribute('uv', new Float32BufferAttribute(uvs, 2)); // helper functions\n\n\n    function addShape(shape) {\n      var indexOffset = vertices.length / 3;\n      var points = shape.extractPoints(curveSegments);\n      var shapeVertices = points.shape;\n      var shapeHoles = points.holes; // check direction of vertices\n\n      if (ShapeUtils.isClockWise(shapeVertices) === false) {\n        shapeVertices = shapeVertices.reverse();\n      }\n\n      for (var _i200 = 0, _l64 = shapeHoles.length; _i200 < _l64; _i200++) {\n        var shapeHole = shapeHoles[_i200];\n\n        if (ShapeUtils.isClockWise(shapeHole) === true) {\n          shapeHoles[_i200] = shapeHole.reverse();\n        }\n      }\n\n      var faces = ShapeUtils.triangulateShape(shapeVertices, shapeHoles); // join vertices of inner and outer paths to a single array\n\n      for (var _i201 = 0, _l65 = shapeHoles.length; _i201 < _l65; _i201++) {\n        var _shapeHole = shapeHoles[_i201];\n        shapeVertices = shapeVertices.concat(_shapeHole);\n      } // vertices, normals, uvs\n\n\n      for (var _i202 = 0, _l66 = shapeVertices.length; _i202 < _l66; _i202++) {\n        var vertex = shapeVertices[_i202];\n        vertices.push(vertex.x, vertex.y, 0);\n        normals.push(0, 0, 1);\n        uvs.push(vertex.x, vertex.y); // world uvs\n      } // incides\n\n\n      for (var _i203 = 0, _l67 = faces.length; _i203 < _l67; _i203++) {\n        var face = faces[_i203];\n\n        var _a14 = face[0] + indexOffset;\n\n        var b = face[1] + indexOffset;\n\n        var _c12 = face[2] + indexOffset;\n\n        indices.push(_a14, b, _c12);\n        groupCount += 3;\n      }\n    }\n\n    return _this64;\n  }\n\n  _createClass(ShapeGeometry, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(ShapeGeometry.prototype), \"toJSON\", this).call(this);\n\n      var shapes = this.parameters.shapes;\n      return _toJSON(shapes, data);\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(data, shapes) {\n      var geometryShapes = [];\n\n      for (var j = 0, jl = data.shapes.length; j < jl; j++) {\n        var shape = shapes[data.shapes[j]];\n        geometryShapes.push(shape);\n      }\n\n      return new ShapeGeometry(geometryShapes, data.curveSegments);\n    }\n  }]);\n\n  return ShapeGeometry;\n}(BufferGeometry);\n\nfunction _toJSON(shapes, data) {\n  data.shapes = [];\n\n  if (Array.isArray(shapes)) {\n    for (var _i204 = 0, _l68 = shapes.length; _i204 < _l68; _i204++) {\n      var shape = shapes[_i204];\n      data.shapes.push(shape.uuid);\n    }\n  } else {\n    data.shapes.push(shapes.uuid);\n  }\n\n  return data;\n}\n/**\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\n\nvar ShadowMaterial = /*#__PURE__*/function (_Material$8) {\n  _inherits(ShadowMaterial, _Material$8);\n\n  var _super63 = _createSuper(ShadowMaterial);\n\n  function ShadowMaterial(parameters) {\n    var _this65;\n\n    _classCallCheck(this, ShadowMaterial);\n\n    _this65 = _super63.call(this);\n    _this65.type = 'ShadowMaterial';\n    _this65.color = new Color(0x000000);\n    _this65.transparent = true;\n\n    _this65.setValues(parameters);\n\n    return _this65;\n  }\n\n  _createClass(ShadowMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(ShadowMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      return this;\n    }\n  }]);\n\n  return ShadowMaterial;\n}(Material$1);\n\nShadowMaterial.prototype.isShadowMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  flatShading: <bool>\n * }\n */\n\nvar MeshStandardMaterial = /*#__PURE__*/function (_Material$9) {\n  _inherits(MeshStandardMaterial, _Material$9);\n\n  var _super64 = _createSuper(MeshStandardMaterial);\n\n  function MeshStandardMaterial(parameters) {\n    var _this66;\n\n    _classCallCheck(this, MeshStandardMaterial);\n\n    _this66 = _super64.call(this);\n    _this66.defines = {\n      'STANDARD': ''\n    };\n    _this66.type = 'MeshStandardMaterial';\n    _this66.color = new Color(0xffffff); // diffuse\n\n    _this66.roughness = 1.0;\n    _this66.metalness = 0.0;\n    _this66.map = null;\n    _this66.lightMap = null;\n    _this66.lightMapIntensity = 1.0;\n    _this66.aoMap = null;\n    _this66.aoMapIntensity = 1.0;\n    _this66.emissive = new Color(0x000000);\n    _this66.emissiveIntensity = 1.0;\n    _this66.emissiveMap = null;\n    _this66.bumpMap = null;\n    _this66.bumpScale = 1;\n    _this66.normalMap = null;\n    _this66.normalMapType = TangentSpaceNormalMap;\n    _this66.normalScale = new Vector2(1, 1);\n    _this66.displacementMap = null;\n    _this66.displacementScale = 1;\n    _this66.displacementBias = 0;\n    _this66.roughnessMap = null;\n    _this66.metalnessMap = null;\n    _this66.alphaMap = null;\n    _this66.envMap = null;\n    _this66.envMapIntensity = 1.0;\n    _this66.refractionRatio = 0.98;\n    _this66.wireframe = false;\n    _this66.wireframeLinewidth = 1;\n    _this66.wireframeLinecap = 'round';\n    _this66.wireframeLinejoin = 'round';\n    _this66.flatShading = false;\n\n    _this66.setValues(parameters);\n\n    return _this66;\n  }\n\n  _createClass(MeshStandardMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshStandardMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.defines = {\n        'STANDARD': ''\n      };\n      this.color.copy(source.color);\n      this.roughness = source.roughness;\n      this.metalness = source.metalness;\n      this.map = source.map;\n      this.lightMap = source.lightMap;\n      this.lightMapIntensity = source.lightMapIntensity;\n      this.aoMap = source.aoMap;\n      this.aoMapIntensity = source.aoMapIntensity;\n      this.emissive.copy(source.emissive);\n      this.emissiveMap = source.emissiveMap;\n      this.emissiveIntensity = source.emissiveIntensity;\n      this.bumpMap = source.bumpMap;\n      this.bumpScale = source.bumpScale;\n      this.normalMap = source.normalMap;\n      this.normalMapType = source.normalMapType;\n      this.normalScale.copy(source.normalScale);\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.roughnessMap = source.roughnessMap;\n      this.metalnessMap = source.metalnessMap;\n      this.alphaMap = source.alphaMap;\n      this.envMap = source.envMap;\n      this.envMapIntensity = source.envMapIntensity;\n      this.refractionRatio = source.refractionRatio;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.wireframeLinecap = source.wireframeLinecap;\n      this.wireframeLinejoin = source.wireframeLinejoin;\n      this.flatShading = source.flatShading;\n      return this;\n    }\n  }]);\n\n  return MeshStandardMaterial;\n}(Material$1);\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n/**\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *  ior: <float>,\n *\n *  sheen: <Color>,\n *\n *  transmission: <float>,\n *  transmissionMap: new THREE.Texture( <Image> ),\n *\n *  thickness: <float>,\n *  thicknessMap: new THREE.Texture( <Image> ),\n *  attenuationDistance: <float>,\n *  attenuationTint: <Color>,\n *\n *  specularIntensity: <float>,\n *  specularIntensityhMap: new THREE.Texture( <Image> ),\n *  specularTint: <Color>,\n *  specularTintMap: new THREE.Texture( <Image> )\n * }\n */\n\nvar MeshPhysicalMaterial = /*#__PURE__*/function (_MeshStandardMaterial) {\n  _inherits(MeshPhysicalMaterial, _MeshStandardMaterial);\n\n  var _super65 = _createSuper(MeshPhysicalMaterial);\n\n  function MeshPhysicalMaterial(parameters) {\n    var _this67;\n\n    _classCallCheck(this, MeshPhysicalMaterial);\n\n    _this67 = _super65.call(this);\n    _this67.defines = {\n      'STANDARD': '',\n      'PHYSICAL': ''\n    };\n    _this67.type = 'MeshPhysicalMaterial';\n    _this67.clearcoat = 0.0;\n    _this67.clearcoatMap = null;\n    _this67.clearcoatRoughness = 0.0;\n    _this67.clearcoatRoughnessMap = null;\n    _this67.clearcoatNormalScale = new Vector2(1, 1);\n    _this67.clearcoatNormalMap = null;\n    _this67.reflectivity = 0.5; // maps to F0 = 0.04\n\n    Object.defineProperty(_assertThisInitialized(_this67), 'ior', {\n      get: function get() {\n        return (1 + 0.4 * this.reflectivity) / (1 - 0.4 * this.reflectivity);\n      },\n      set: function set(ior) {\n        this.reflectivity = clamp$1(2.5 * (ior - 1) / (ior + 1), 0, 1);\n      }\n    });\n    _this67.sheen = null; // null will disable sheen bsdf\n\n    _this67.transmission = 0.0;\n    _this67.transmissionMap = null;\n    _this67.thickness = 0.01;\n    _this67.thicknessMap = null;\n    _this67.attenuationDistance = 0.0;\n    _this67.attenuationTint = new Color(1, 1, 1);\n    _this67.specularIntensity = 1.0;\n    _this67.specularIntensityMap = null;\n    _this67.specularTint = new Color(1, 1, 1);\n    _this67.specularTintMap = null;\n\n    _this67.setValues(parameters);\n\n    return _this67;\n  }\n\n  _createClass(MeshPhysicalMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshPhysicalMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.defines = {\n        'STANDARD': '',\n        'PHYSICAL': ''\n      };\n      this.clearcoat = source.clearcoat;\n      this.clearcoatMap = source.clearcoatMap;\n      this.clearcoatRoughness = source.clearcoatRoughness;\n      this.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n      this.clearcoatNormalMap = source.clearcoatNormalMap;\n      this.clearcoatNormalScale.copy(source.clearcoatNormalScale);\n      this.reflectivity = source.reflectivity;\n\n      if (source.sheen) {\n        this.sheen = (this.sheen || new Color()).copy(source.sheen);\n      } else {\n        this.sheen = null;\n      }\n\n      this.transmission = source.transmission;\n      this.transmissionMap = source.transmissionMap;\n      this.thickness = source.thickness;\n      this.thicknessMap = source.thicknessMap;\n      this.attenuationDistance = source.attenuationDistance;\n      this.attenuationTint.copy(source.attenuationTint);\n      this.specularIntensity = source.specularIntensity;\n      this.specularIntensityMap = source.specularIntensityMap;\n      this.specularTint.copy(source.specularTint);\n      this.specularTintMap = source.specularTintMap;\n      return this;\n    }\n  }]);\n\n  return MeshPhysicalMaterial;\n}(MeshStandardMaterial);\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  flatShading: <bool>\n * }\n */\n\nvar MeshPhongMaterial = /*#__PURE__*/function (_Material$10) {\n  _inherits(MeshPhongMaterial, _Material$10);\n\n  var _super66 = _createSuper(MeshPhongMaterial);\n\n  function MeshPhongMaterial(parameters) {\n    var _this68;\n\n    _classCallCheck(this, MeshPhongMaterial);\n\n    _this68 = _super66.call(this);\n    _this68.type = 'MeshPhongMaterial';\n    _this68.color = new Color(0xffffff); // diffuse\n\n    _this68.specular = new Color(0x111111);\n    _this68.shininess = 30;\n    _this68.map = null;\n    _this68.lightMap = null;\n    _this68.lightMapIntensity = 1.0;\n    _this68.aoMap = null;\n    _this68.aoMapIntensity = 1.0;\n    _this68.emissive = new Color(0x000000);\n    _this68.emissiveIntensity = 1.0;\n    _this68.emissiveMap = null;\n    _this68.bumpMap = null;\n    _this68.bumpScale = 1;\n    _this68.normalMap = null;\n    _this68.normalMapType = TangentSpaceNormalMap;\n    _this68.normalScale = new Vector2(1, 1);\n    _this68.displacementMap = null;\n    _this68.displacementScale = 1;\n    _this68.displacementBias = 0;\n    _this68.specularMap = null;\n    _this68.alphaMap = null;\n    _this68.envMap = null;\n    _this68.combine = MultiplyOperation;\n    _this68.reflectivity = 1;\n    _this68.refractionRatio = 0.98;\n    _this68.wireframe = false;\n    _this68.wireframeLinewidth = 1;\n    _this68.wireframeLinecap = 'round';\n    _this68.wireframeLinejoin = 'round';\n    _this68.flatShading = false;\n\n    _this68.setValues(parameters);\n\n    return _this68;\n  }\n\n  _createClass(MeshPhongMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshPhongMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.specular.copy(source.specular);\n      this.shininess = source.shininess;\n      this.map = source.map;\n      this.lightMap = source.lightMap;\n      this.lightMapIntensity = source.lightMapIntensity;\n      this.aoMap = source.aoMap;\n      this.aoMapIntensity = source.aoMapIntensity;\n      this.emissive.copy(source.emissive);\n      this.emissiveMap = source.emissiveMap;\n      this.emissiveIntensity = source.emissiveIntensity;\n      this.bumpMap = source.bumpMap;\n      this.bumpScale = source.bumpScale;\n      this.normalMap = source.normalMap;\n      this.normalMapType = source.normalMapType;\n      this.normalScale.copy(source.normalScale);\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.specularMap = source.specularMap;\n      this.alphaMap = source.alphaMap;\n      this.envMap = source.envMap;\n      this.combine = source.combine;\n      this.reflectivity = source.reflectivity;\n      this.refractionRatio = source.refractionRatio;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.wireframeLinecap = source.wireframeLinecap;\n      this.wireframeLinejoin = source.wireframeLinejoin;\n      this.flatShading = source.flatShading;\n      return this;\n    }\n  }]);\n\n  return MeshPhongMaterial;\n}(Material$1);\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n * }\n */\n\nvar MeshToonMaterial = /*#__PURE__*/function (_Material$11) {\n  _inherits(MeshToonMaterial, _Material$11);\n\n  var _super67 = _createSuper(MeshToonMaterial);\n\n  function MeshToonMaterial(parameters) {\n    var _this69;\n\n    _classCallCheck(this, MeshToonMaterial);\n\n    _this69 = _super67.call(this);\n    _this69.defines = {\n      'TOON': ''\n    };\n    _this69.type = 'MeshToonMaterial';\n    _this69.color = new Color(0xffffff);\n    _this69.map = null;\n    _this69.gradientMap = null;\n    _this69.lightMap = null;\n    _this69.lightMapIntensity = 1.0;\n    _this69.aoMap = null;\n    _this69.aoMapIntensity = 1.0;\n    _this69.emissive = new Color(0x000000);\n    _this69.emissiveIntensity = 1.0;\n    _this69.emissiveMap = null;\n    _this69.bumpMap = null;\n    _this69.bumpScale = 1;\n    _this69.normalMap = null;\n    _this69.normalMapType = TangentSpaceNormalMap;\n    _this69.normalScale = new Vector2(1, 1);\n    _this69.displacementMap = null;\n    _this69.displacementScale = 1;\n    _this69.displacementBias = 0;\n    _this69.alphaMap = null;\n    _this69.wireframe = false;\n    _this69.wireframeLinewidth = 1;\n    _this69.wireframeLinecap = 'round';\n    _this69.wireframeLinejoin = 'round';\n\n    _this69.setValues(parameters);\n\n    return _this69;\n  }\n\n  _createClass(MeshToonMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshToonMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.map = source.map;\n      this.gradientMap = source.gradientMap;\n      this.lightMap = source.lightMap;\n      this.lightMapIntensity = source.lightMapIntensity;\n      this.aoMap = source.aoMap;\n      this.aoMapIntensity = source.aoMapIntensity;\n      this.emissive.copy(source.emissive);\n      this.emissiveMap = source.emissiveMap;\n      this.emissiveIntensity = source.emissiveIntensity;\n      this.bumpMap = source.bumpMap;\n      this.bumpScale = source.bumpScale;\n      this.normalMap = source.normalMap;\n      this.normalMapType = source.normalMapType;\n      this.normalScale.copy(source.normalScale);\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.alphaMap = source.alphaMap;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.wireframeLinecap = source.wireframeLinecap;\n      this.wireframeLinejoin = source.wireframeLinejoin;\n      return this;\n    }\n  }]);\n\n  return MeshToonMaterial;\n}(Material$1);\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n/**\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  flatShading: <bool>\n * }\n */\n\nvar MeshNormalMaterial = /*#__PURE__*/function (_Material$12) {\n  _inherits(MeshNormalMaterial, _Material$12);\n\n  var _super68 = _createSuper(MeshNormalMaterial);\n\n  function MeshNormalMaterial(parameters) {\n    var _this70;\n\n    _classCallCheck(this, MeshNormalMaterial);\n\n    _this70 = _super68.call(this);\n    _this70.type = 'MeshNormalMaterial';\n    _this70.bumpMap = null;\n    _this70.bumpScale = 1;\n    _this70.normalMap = null;\n    _this70.normalMapType = TangentSpaceNormalMap;\n    _this70.normalScale = new Vector2(1, 1);\n    _this70.displacementMap = null;\n    _this70.displacementScale = 1;\n    _this70.displacementBias = 0;\n    _this70.wireframe = false;\n    _this70.wireframeLinewidth = 1;\n    _this70.fog = false;\n    _this70.flatShading = false;\n\n    _this70.setValues(parameters);\n\n    return _this70;\n  }\n\n  _createClass(MeshNormalMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshNormalMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.bumpMap = source.bumpMap;\n      this.bumpScale = source.bumpScale;\n      this.normalMap = source.normalMap;\n      this.normalMapType = source.normalMapType;\n      this.normalScale.copy(source.normalScale);\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.flatShading = source.flatShading;\n      return this;\n    }\n  }]);\n\n  return MeshNormalMaterial;\n}(Material$1);\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n * }\n */\n\nvar MeshLambertMaterial = /*#__PURE__*/function (_Material$13) {\n  _inherits(MeshLambertMaterial, _Material$13);\n\n  var _super69 = _createSuper(MeshLambertMaterial);\n\n  function MeshLambertMaterial(parameters) {\n    var _this71;\n\n    _classCallCheck(this, MeshLambertMaterial);\n\n    _this71 = _super69.call(this);\n    _this71.type = 'MeshLambertMaterial';\n    _this71.color = new Color(0xffffff); // diffuse\n\n    _this71.map = null;\n    _this71.lightMap = null;\n    _this71.lightMapIntensity = 1.0;\n    _this71.aoMap = null;\n    _this71.aoMapIntensity = 1.0;\n    _this71.emissive = new Color(0x000000);\n    _this71.emissiveIntensity = 1.0;\n    _this71.emissiveMap = null;\n    _this71.specularMap = null;\n    _this71.alphaMap = null;\n    _this71.envMap = null;\n    _this71.combine = MultiplyOperation;\n    _this71.reflectivity = 1;\n    _this71.refractionRatio = 0.98;\n    _this71.wireframe = false;\n    _this71.wireframeLinewidth = 1;\n    _this71.wireframeLinecap = 'round';\n    _this71.wireframeLinejoin = 'round';\n\n    _this71.setValues(parameters);\n\n    return _this71;\n  }\n\n  _createClass(MeshLambertMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshLambertMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.map = source.map;\n      this.lightMap = source.lightMap;\n      this.lightMapIntensity = source.lightMapIntensity;\n      this.aoMap = source.aoMap;\n      this.aoMapIntensity = source.aoMapIntensity;\n      this.emissive.copy(source.emissive);\n      this.emissiveMap = source.emissiveMap;\n      this.emissiveIntensity = source.emissiveIntensity;\n      this.specularMap = source.specularMap;\n      this.alphaMap = source.alphaMap;\n      this.envMap = source.envMap;\n      this.combine = source.combine;\n      this.reflectivity = source.reflectivity;\n      this.refractionRatio = source.refractionRatio;\n      this.wireframe = source.wireframe;\n      this.wireframeLinewidth = source.wireframeLinewidth;\n      this.wireframeLinecap = source.wireframeLinecap;\n      this.wireframeLinejoin = source.wireframeLinejoin;\n      return this;\n    }\n  }]);\n\n  return MeshLambertMaterial;\n}(Material$1);\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  flatShading: <bool>\n * }\n */\n\nvar MeshMatcapMaterial = /*#__PURE__*/function (_Material$14) {\n  _inherits(MeshMatcapMaterial, _Material$14);\n\n  var _super70 = _createSuper(MeshMatcapMaterial);\n\n  function MeshMatcapMaterial(parameters) {\n    var _this72;\n\n    _classCallCheck(this, MeshMatcapMaterial);\n\n    _this72 = _super70.call(this);\n    _this72.defines = {\n      'MATCAP': ''\n    };\n    _this72.type = 'MeshMatcapMaterial';\n    _this72.color = new Color(0xffffff); // diffuse\n\n    _this72.matcap = null;\n    _this72.map = null;\n    _this72.bumpMap = null;\n    _this72.bumpScale = 1;\n    _this72.normalMap = null;\n    _this72.normalMapType = TangentSpaceNormalMap;\n    _this72.normalScale = new Vector2(1, 1);\n    _this72.displacementMap = null;\n    _this72.displacementScale = 1;\n    _this72.displacementBias = 0;\n    _this72.alphaMap = null;\n    _this72.flatShading = false;\n\n    _this72.setValues(parameters);\n\n    return _this72;\n  }\n\n  _createClass(MeshMatcapMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(MeshMatcapMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.defines = {\n        'MATCAP': ''\n      };\n      this.color.copy(source.color);\n      this.matcap = source.matcap;\n      this.map = source.map;\n      this.bumpMap = source.bumpMap;\n      this.bumpScale = source.bumpScale;\n      this.normalMap = source.normalMap;\n      this.normalMapType = source.normalMapType;\n      this.normalScale.copy(source.normalScale);\n      this.displacementMap = source.displacementMap;\n      this.displacementScale = source.displacementScale;\n      this.displacementBias = source.displacementBias;\n      this.alphaMap = source.alphaMap;\n      this.flatShading = source.flatShading;\n      return this;\n    }\n  }]);\n\n  return MeshMatcapMaterial;\n}(Material$1);\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nvar LineDashedMaterial = /*#__PURE__*/function (_LineBasicMaterial) {\n  _inherits(LineDashedMaterial, _LineBasicMaterial);\n\n  var _super71 = _createSuper(LineDashedMaterial);\n\n  function LineDashedMaterial(parameters) {\n    var _this73;\n\n    _classCallCheck(this, LineDashedMaterial);\n\n    _this73 = _super71.call(this);\n    _this73.type = 'LineDashedMaterial';\n    _this73.scale = 1;\n    _this73.dashSize = 3;\n    _this73.gapSize = 1;\n\n    _this73.setValues(parameters);\n\n    return _this73;\n  }\n\n  _createClass(LineDashedMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(LineDashedMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.scale = source.scale;\n      this.dashSize = source.dashSize;\n      this.gapSize = source.gapSize;\n      return this;\n    }\n  }]);\n\n  return LineDashedMaterial;\n}(LineBasicMaterial);\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\nvar AnimationUtils = {\n  // same as Array.prototype.slice, but also works on typed arrays\n  arraySlice: function arraySlice(array, from, to) {\n    if (AnimationUtils.isTypedArray(array)) {\n      // in ios9 array.subarray(from, undefined) will return empty array\n      // but array.subarray(from) or array.subarray(from, len) is correct\n      return new array.constructor(array.subarray(from, to !== undefined ? to : array.length));\n    }\n\n    return array.slice(from, to);\n  },\n  // converts an array to a specific type\n  convertArray: function convertArray(array, type, forceClone) {\n    if (!array || // let 'undefined' and 'null' pass\n    !forceClone && array.constructor === type) return array;\n\n    if (typeof type.BYTES_PER_ELEMENT === 'number') {\n      return new type(array); // create typed array\n    }\n\n    return Array.prototype.slice.call(array); // create Array\n  },\n  isTypedArray: function isTypedArray(object) {\n    return ArrayBuffer.isView(object) && !(object instanceof DataView);\n  },\n  // returns an array by which times and values can be sorted\n  getKeyframeOrder: function getKeyframeOrder(times) {\n    function compareTime(i, j) {\n      return times[i] - times[j];\n    }\n\n    var n = times.length;\n    var result = new Array(n);\n\n    for (var _i205 = 0; _i205 !== n; ++_i205) {\n      result[_i205] = _i205;\n    }\n\n    result.sort(compareTime);\n    return result;\n  },\n  // uses the array previously returned by 'getKeyframeOrder' to sort data\n  sortedArray: function sortedArray(values, stride, order) {\n    var nValues = values.length;\n    var result = new values.constructor(nValues);\n\n    for (var _i206 = 0, dstOffset = 0; dstOffset !== nValues; ++_i206) {\n      var srcOffset = order[_i206] * stride;\n\n      for (var j = 0; j !== stride; ++j) {\n        result[dstOffset++] = values[srcOffset + j];\n      }\n    }\n\n    return result;\n  },\n  // function for parsing AOS keyframe formats\n  flattenJSON: function flattenJSON(jsonKeys, times, values, valuePropertyName) {\n    var i = 1,\n        key = jsonKeys[0];\n\n    while (key !== undefined && key[valuePropertyName] === undefined) {\n      key = jsonKeys[i++];\n    }\n\n    if (key === undefined) return; // no data\n\n    var value = key[valuePropertyName];\n    if (value === undefined) return; // no data\n\n    if (Array.isArray(value)) {\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          values.push.apply(values, value); // push all elements\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    } else if (value.toArray !== undefined) {\n      // ...assume THREE.Math-ish\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          value.toArray(values, values.length);\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    } else {\n      // otherwise push as-is\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          values.push(value);\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    }\n  },\n  subclip: function subclip(sourceClip, name, startFrame, endFrame) {\n    var fps = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 30;\n    var clip = sourceClip.clone();\n    clip.name = name;\n    var tracks = [];\n\n    for (var _i207 = 0; _i207 < clip.tracks.length; ++_i207) {\n      var track = clip.tracks[_i207];\n      var valueSize = track.getValueSize();\n      var times = [];\n      var values = [];\n\n      for (var j = 0; j < track.times.length; ++j) {\n        var frame = track.times[j] * fps;\n        if (frame < startFrame || frame >= endFrame) continue;\n        times.push(track.times[j]);\n\n        for (var k = 0; k < valueSize; ++k) {\n          values.push(track.values[j * valueSize + k]);\n        }\n      }\n\n      if (times.length === 0) continue;\n      track.times = AnimationUtils.convertArray(times, track.times.constructor);\n      track.values = AnimationUtils.convertArray(values, track.values.constructor);\n      tracks.push(track);\n    }\n\n    clip.tracks = tracks; // find minimum .times value across all tracks in the trimmed clip\n\n    var minStartTime = Infinity;\n\n    for (var _i208 = 0; _i208 < clip.tracks.length; ++_i208) {\n      if (minStartTime > clip.tracks[_i208].times[0]) {\n        minStartTime = clip.tracks[_i208].times[0];\n      }\n    } // shift all tracks such that clip begins at t=0\n\n\n    for (var _i209 = 0; _i209 < clip.tracks.length; ++_i209) {\n      clip.tracks[_i209].shift(-1 * minStartTime);\n    }\n\n    clip.resetDuration();\n    return clip;\n  },\n  makeClipAdditive: function makeClipAdditive(targetClip) {\n    var referenceFrame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var referenceClip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : targetClip;\n    var fps = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 30;\n    if (fps <= 0) fps = 30;\n    var numTracks = referenceClip.tracks.length;\n    var referenceTime = referenceFrame / fps; // Make each track's values relative to the values at the reference frame\n\n    var _loop = function _loop(_i210) {\n      var referenceTrack = referenceClip.tracks[_i210];\n      var referenceTrackType = referenceTrack.ValueTypeName; // Skip this track if it's non-numeric\n\n      if (referenceTrackType === 'bool' || referenceTrackType === 'string') return \"continue\"; // Find the track in the target clip whose name and type matches the reference track\n\n      var targetTrack = targetClip.tracks.find(function (track) {\n        return track.name === referenceTrack.name && track.ValueTypeName === referenceTrackType;\n      });\n      if (targetTrack === undefined) return \"continue\";\n      var referenceOffset = 0;\n      var referenceValueSize = referenceTrack.getValueSize();\n\n      if (referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) {\n        referenceOffset = referenceValueSize / 3;\n      }\n\n      var targetOffset = 0;\n      var targetValueSize = targetTrack.getValueSize();\n\n      if (targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) {\n        targetOffset = targetValueSize / 3;\n      }\n\n      var lastIndex = referenceTrack.times.length - 1;\n      var referenceValue = void 0; // Find the value to subtract out of the track\n\n      if (referenceTime <= referenceTrack.times[0]) {\n        // Reference frame is earlier than the first keyframe, so just use the first keyframe\n        var startIndex = referenceOffset;\n        var endIndex = referenceValueSize - referenceOffset;\n        referenceValue = AnimationUtils.arraySlice(referenceTrack.values, startIndex, endIndex);\n      } else if (referenceTime >= referenceTrack.times[lastIndex]) {\n        // Reference frame is after the last keyframe, so just use the last keyframe\n        var _startIndex = lastIndex * referenceValueSize + referenceOffset;\n\n        var _endIndex = _startIndex + referenceValueSize - referenceOffset;\n\n        referenceValue = AnimationUtils.arraySlice(referenceTrack.values, _startIndex, _endIndex);\n      } else {\n        // Interpolate to the reference value\n        var interpolant = referenceTrack.createInterpolant();\n        var _startIndex2 = referenceOffset;\n\n        var _endIndex2 = referenceValueSize - referenceOffset;\n\n        interpolant.evaluate(referenceTime);\n        referenceValue = AnimationUtils.arraySlice(interpolant.resultBuffer, _startIndex2, _endIndex2);\n      } // Conjugate the quaternion\n\n\n      if (referenceTrackType === 'quaternion') {\n        var referenceQuat = new Quaternion().fromArray(referenceValue).normalize().conjugate();\n        referenceQuat.toArray(referenceValue);\n      } // Subtract the reference value from all of the track values\n\n\n      var numTimes = targetTrack.times.length;\n\n      for (var j = 0; j < numTimes; ++j) {\n        var valueStart = j * targetValueSize + targetOffset;\n\n        if (referenceTrackType === 'quaternion') {\n          // Multiply the conjugate for quaternion track types\n          Quaternion.multiplyQuaternionsFlat(targetTrack.values, valueStart, referenceValue, 0, targetTrack.values, valueStart);\n        } else {\n          var valueEnd = targetValueSize - targetOffset * 2; // Subtract each value for all other numeric track types\n\n          for (var k = 0; k < valueEnd; ++k) {\n            targetTrack.values[valueStart + k] -= referenceValue[k];\n          }\n        }\n      }\n    };\n\n    for (var _i210 = 0; _i210 < numTracks; ++_i210) {\n      var _ret = _loop(_i210);\n\n      if (_ret === \"continue\") continue;\n    }\n\n    targetClip.blendMode = AdditiveAnimationBlendMode;\n    return targetClip;\n  }\n};\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nvar Interpolant = /*#__PURE__*/function () {\n  function Interpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, Interpolant);\n\n    this.parameterPositions = parameterPositions;\n    this._cachedIndex = 0;\n    this.resultBuffer = resultBuffer !== undefined ? resultBuffer : new sampleValues.constructor(sampleSize);\n    this.sampleValues = sampleValues;\n    this.valueSize = sampleSize;\n    this.settings = null;\n    this.DefaultSettings_ = {};\n  }\n\n  _createClass(Interpolant, [{\n    key: \"evaluate\",\n    value: function evaluate(t) {\n      var pp = this.parameterPositions;\n      var i1 = this._cachedIndex,\n          t1 = pp[i1],\n          t0 = pp[i1 - 1];\n\n      validate_interval: {\n        seek: {\n          var right;\n\n          linear_scan: {\n            //- See http://jsperf.com/comparison-to-undefined/3\n            //- slower code:\n            //-\n            //- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n            forward_scan: if (!(t < t1)) {\n              for (var giveUpAt = i1 + 2;;) {\n                if (t1 === undefined) {\n                  if (t < t0) break forward_scan; // after end\n\n                  i1 = pp.length;\n                  this._cachedIndex = i1;\n                  return this.afterEnd_(i1 - 1, t, t0);\n                }\n\n                if (i1 === giveUpAt) break; // this loop\n\n                t0 = t1;\n                t1 = pp[++i1];\n\n                if (t < t1) {\n                  // we have arrived at the sought interval\n                  break seek;\n                }\n              } // prepare binary search on the right side of the index\n\n\n              right = pp.length;\n              break linear_scan;\n            } //- slower code:\n            //-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\n\n            if (!(t >= t0)) {\n              // looping?\n              var t1global = pp[1];\n\n              if (t < t1global) {\n                i1 = 2; // + 1, using the scan for the details\n\n                t0 = t1global;\n              } // linear reverse scan\n\n\n              for (var _giveUpAt = i1 - 2;;) {\n                if (t0 === undefined) {\n                  // before start\n                  this._cachedIndex = 0;\n                  return this.beforeStart_(0, t, t1);\n                }\n\n                if (i1 === _giveUpAt) break; // this loop\n\n                t1 = t0;\n                t0 = pp[--i1 - 1];\n\n                if (t >= t0) {\n                  // we have arrived at the sought interval\n                  break seek;\n                }\n              } // prepare binary search on the left side of the index\n\n\n              right = i1;\n              i1 = 0;\n              break linear_scan;\n            } // the interval is valid\n\n\n            break validate_interval;\n          } // linear scan\n          // binary search\n\n\n          while (i1 < right) {\n            var mid = i1 + right >>> 1;\n\n            if (t < pp[mid]) {\n              right = mid;\n            } else {\n              i1 = mid + 1;\n            }\n          }\n\n          t1 = pp[i1];\n          t0 = pp[i1 - 1]; // check boundary cases, again\n\n          if (t0 === undefined) {\n            this._cachedIndex = 0;\n            return this.beforeStart_(0, t, t1);\n          }\n\n          if (t1 === undefined) {\n            i1 = pp.length;\n            this._cachedIndex = i1;\n            return this.afterEnd_(i1 - 1, t0, t);\n          }\n        } // seek\n\n\n        this._cachedIndex = i1;\n        this.intervalChanged_(i1, t0, t1);\n      } // validate_interval\n\n\n      return this.interpolate_(i1, t0, t, t1);\n    }\n  }, {\n    key: \"getSettings_\",\n    value: function getSettings_() {\n      return this.settings || this.DefaultSettings_;\n    }\n  }, {\n    key: \"copySampleValue_\",\n    value: function copySampleValue_(index) {\n      // copies a sample value to the result buffer\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          stride = this.valueSize,\n          offset = index * stride;\n\n      for (var _i211 = 0; _i211 !== stride; ++_i211) {\n        result[_i211] = values[offset + _i211];\n      }\n\n      return result;\n    } // Template methods for derived classes:\n\n  }, {\n    key: \"interpolate_\",\n    value: function interpolate_() {\n      throw new Error('call to abstract method'); // implementations shall return this.resultBuffer\n    }\n  }, {\n    key: \"intervalChanged_\",\n    value: function intervalChanged_() {// empty\n    }\n  }]);\n\n  return Interpolant;\n}(); // ALIAS DEFINITIONS\n\n\nInterpolant.prototype.beforeStart_ = Interpolant.prototype.copySampleValue_;\nInterpolant.prototype.afterEnd_ = Interpolant.prototype.copySampleValue_;\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nvar CubicInterpolant = /*#__PURE__*/function (_Interpolant) {\n  _inherits(CubicInterpolant, _Interpolant);\n\n  var _super72 = _createSuper(CubicInterpolant);\n\n  function CubicInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    var _this74;\n\n    _classCallCheck(this, CubicInterpolant);\n\n    _this74 = _super72.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n    _this74._weightPrev = -0;\n    _this74._offsetPrev = -0;\n    _this74._weightNext = -0;\n    _this74._offsetNext = -0;\n    _this74.DefaultSettings_ = {\n      endingStart: ZeroCurvatureEnding,\n      endingEnd: ZeroCurvatureEnding\n    };\n    return _this74;\n  }\n\n  _createClass(CubicInterpolant, [{\n    key: \"intervalChanged_\",\n    value: function intervalChanged_(i1, t0, t1) {\n      var pp = this.parameterPositions;\n      var iPrev = i1 - 2,\n          iNext = i1 + 1,\n          tPrev = pp[iPrev],\n          tNext = pp[iNext];\n\n      if (tPrev === undefined) {\n        switch (this.getSettings_().endingStart) {\n          case ZeroSlopeEnding:\n            // f'(t0) = 0\n            iPrev = i1;\n            tPrev = 2 * t0 - t1;\n            break;\n\n          case WrapAroundEnding:\n            // use the other end of the curve\n            iPrev = pp.length - 2;\n            tPrev = t0 + pp[iPrev] - pp[iPrev + 1];\n            break;\n\n          default:\n            // ZeroCurvatureEnding\n            // f''(t0) = 0 a.k.a. Natural Spline\n            iPrev = i1;\n            tPrev = t1;\n        }\n      }\n\n      if (tNext === undefined) {\n        switch (this.getSettings_().endingEnd) {\n          case ZeroSlopeEnding:\n            // f'(tN) = 0\n            iNext = i1;\n            tNext = 2 * t1 - t0;\n            break;\n\n          case WrapAroundEnding:\n            // use the other end of the curve\n            iNext = 1;\n            tNext = t1 + pp[1] - pp[0];\n            break;\n\n          default:\n            // ZeroCurvatureEnding\n            // f''(tN) = 0, a.k.a. Natural Spline\n            iNext = i1 - 1;\n            tNext = t0;\n        }\n      }\n\n      var halfDt = (t1 - t0) * 0.5,\n          stride = this.valueSize;\n      this._weightPrev = halfDt / (t0 - tPrev);\n      this._weightNext = halfDt / (tNext - t1);\n      this._offsetPrev = iPrev * stride;\n      this._offsetNext = iNext * stride;\n    }\n  }, {\n    key: \"interpolate_\",\n    value: function interpolate_(i1, t0, t, t1) {\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          stride = this.valueSize,\n          o1 = i1 * stride,\n          o0 = o1 - stride,\n          oP = this._offsetPrev,\n          oN = this._offsetNext,\n          wP = this._weightPrev,\n          wN = this._weightNext,\n          p = (t - t0) / (t1 - t0),\n          pp = p * p,\n          ppp = pp * p; // evaluate polynomials\n\n      var sP = -wP * ppp + 2 * wP * pp - wP * p;\n      var s0 = (1 + wP) * ppp + (-1.5 - 2 * wP) * pp + (-0.5 + wP) * p + 1;\n      var s1 = (-1 - wN) * ppp + (1.5 + wN) * pp + 0.5 * p;\n      var sN = wN * ppp - wN * pp; // combine data linearly\n\n      for (var _i212 = 0; _i212 !== stride; ++_i212) {\n        result[_i212] = sP * values[oP + _i212] + s0 * values[o0 + _i212] + s1 * values[o1 + _i212] + sN * values[oN + _i212];\n      }\n\n      return result;\n    }\n  }]);\n\n  return CubicInterpolant;\n}(Interpolant);\n\nvar LinearInterpolant = /*#__PURE__*/function (_Interpolant2) {\n  _inherits(LinearInterpolant, _Interpolant2);\n\n  var _super73 = _createSuper(LinearInterpolant);\n\n  function LinearInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, LinearInterpolant);\n\n    return _super73.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(LinearInterpolant, [{\n    key: \"interpolate_\",\n    value: function interpolate_(i1, t0, t, t1) {\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          stride = this.valueSize,\n          offset1 = i1 * stride,\n          offset0 = offset1 - stride,\n          weight1 = (t - t0) / (t1 - t0),\n          weight0 = 1 - weight1;\n\n      for (var _i213 = 0; _i213 !== stride; ++_i213) {\n        result[_i213] = values[offset0 + _i213] * weight0 + values[offset1 + _i213] * weight1;\n      }\n\n      return result;\n    }\n  }]);\n\n  return LinearInterpolant;\n}(Interpolant);\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n */\n\n\nvar DiscreteInterpolant = /*#__PURE__*/function (_Interpolant3) {\n  _inherits(DiscreteInterpolant, _Interpolant3);\n\n  var _super74 = _createSuper(DiscreteInterpolant);\n\n  function DiscreteInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, DiscreteInterpolant);\n\n    return _super74.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(DiscreteInterpolant, [{\n    key: \"interpolate_\",\n    value: function interpolate_(i1\n    /*, t0, t, t1 */\n    ) {\n      return this.copySampleValue_(i1 - 1);\n    }\n  }]);\n\n  return DiscreteInterpolant;\n}(Interpolant);\n\nvar KeyframeTrack = /*#__PURE__*/function () {\n  function KeyframeTrack(name, times, values, interpolation) {\n    _classCallCheck(this, KeyframeTrack);\n\n    if (name === undefined) throw new Error('THREE.KeyframeTrack: track name is undefined');\n    if (times === undefined || times.length === 0) throw new Error('THREE.KeyframeTrack: no keyframes in track named ' + name);\n    this.name = name;\n    this.times = AnimationUtils.convertArray(times, this.TimeBufferType);\n    this.values = AnimationUtils.convertArray(values, this.ValueBufferType);\n    this.setInterpolation(interpolation || this.DefaultInterpolation);\n  } // Serialization (in static context, because of constructor invocation\n  // and automatic invocation of .toJSON):\n\n\n  _createClass(KeyframeTrack, [{\n    key: \"InterpolantFactoryMethodDiscrete\",\n    value: function InterpolantFactoryMethodDiscrete(result) {\n      return new DiscreteInterpolant(this.times, this.values, this.getValueSize(), result);\n    }\n  }, {\n    key: \"InterpolantFactoryMethodLinear\",\n    value: function InterpolantFactoryMethodLinear(result) {\n      return new LinearInterpolant(this.times, this.values, this.getValueSize(), result);\n    }\n  }, {\n    key: \"InterpolantFactoryMethodSmooth\",\n    value: function InterpolantFactoryMethodSmooth(result) {\n      return new CubicInterpolant(this.times, this.values, this.getValueSize(), result);\n    }\n  }, {\n    key: \"setInterpolation\",\n    value: function setInterpolation(interpolation) {\n      var factoryMethod;\n\n      switch (interpolation) {\n        case InterpolateDiscrete:\n          factoryMethod = this.InterpolantFactoryMethodDiscrete;\n          break;\n\n        case InterpolateLinear:\n          factoryMethod = this.InterpolantFactoryMethodLinear;\n          break;\n\n        case InterpolateSmooth:\n          factoryMethod = this.InterpolantFactoryMethodSmooth;\n          break;\n      }\n\n      if (factoryMethod === undefined) {\n        var message = 'unsupported interpolation for ' + this.ValueTypeName + ' keyframe track named ' + this.name;\n\n        if (this.createInterpolant === undefined) {\n          // fall back to default, unless the default itself is messed up\n          if (interpolation !== this.DefaultInterpolation) {\n            this.setInterpolation(this.DefaultInterpolation);\n          } else {\n            throw new Error(message); // fatal, in this case\n          }\n        }\n\n        console.warn('THREE.KeyframeTrack:', message);\n        return this;\n      }\n\n      this.createInterpolant = factoryMethod;\n      return this;\n    }\n  }, {\n    key: \"getInterpolation\",\n    value: function getInterpolation() {\n      switch (this.createInterpolant) {\n        case this.InterpolantFactoryMethodDiscrete:\n          return InterpolateDiscrete;\n\n        case this.InterpolantFactoryMethodLinear:\n          return InterpolateLinear;\n\n        case this.InterpolantFactoryMethodSmooth:\n          return InterpolateSmooth;\n      }\n    }\n  }, {\n    key: \"getValueSize\",\n    value: function getValueSize() {\n      return this.values.length / this.times.length;\n    } // move all keyframes either forwards or backwards in time\n\n  }, {\n    key: \"shift\",\n    value: function shift(timeOffset) {\n      if (timeOffset !== 0.0) {\n        var times = this.times;\n\n        for (var _i214 = 0, _n7 = times.length; _i214 !== _n7; ++_i214) {\n          times[_i214] += timeOffset;\n        }\n      }\n\n      return this;\n    } // scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\n  }, {\n    key: \"scale\",\n    value: function scale(timeScale) {\n      if (timeScale !== 1.0) {\n        var times = this.times;\n\n        for (var _i215 = 0, _n8 = times.length; _i215 !== _n8; ++_i215) {\n          times[_i215] *= timeScale;\n        }\n      }\n\n      return this;\n    } // removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n    // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\n  }, {\n    key: \"trim\",\n    value: function trim(startTime, endTime) {\n      var times = this.times,\n          nKeys = times.length;\n      var from = 0,\n          to = nKeys - 1;\n\n      while (from !== nKeys && times[from] < startTime) {\n        ++from;\n      }\n\n      while (to !== -1 && times[to] > endTime) {\n        --to;\n      }\n\n      ++to; // inclusive -> exclusive bound\n\n      if (from !== 0 || to !== nKeys) {\n        // empty tracks are forbidden, so keep at least one keyframe\n        if (from >= to) {\n          to = Math.max(to, 1);\n          from = to - 1;\n        }\n\n        var stride = this.getValueSize();\n        this.times = AnimationUtils.arraySlice(times, from, to);\n        this.values = AnimationUtils.arraySlice(this.values, from * stride, to * stride);\n      }\n\n      return this;\n    } // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = true;\n      var valueSize = this.getValueSize();\n\n      if (valueSize - Math.floor(valueSize) !== 0) {\n        console.error('THREE.KeyframeTrack: Invalid value size in track.', this);\n        valid = false;\n      }\n\n      var times = this.times,\n          values = this.values,\n          nKeys = times.length;\n\n      if (nKeys === 0) {\n        console.error('THREE.KeyframeTrack: Track is empty.', this);\n        valid = false;\n      }\n\n      var prevTime = null;\n\n      for (var _i216 = 0; _i216 !== nKeys; _i216++) {\n        var currTime = times[_i216];\n\n        if (typeof currTime === 'number' && isNaN(currTime)) {\n          console.error('THREE.KeyframeTrack: Time is not a valid number.', this, _i216, currTime);\n          valid = false;\n          break;\n        }\n\n        if (prevTime !== null && prevTime > currTime) {\n          console.error('THREE.KeyframeTrack: Out of order keys.', this, _i216, currTime, prevTime);\n          valid = false;\n          break;\n        }\n\n        prevTime = currTime;\n      }\n\n      if (values !== undefined) {\n        if (AnimationUtils.isTypedArray(values)) {\n          for (var _i217 = 0, _n9 = values.length; _i217 !== _n9; ++_i217) {\n            var value = values[_i217];\n\n            if (isNaN(value)) {\n              console.error('THREE.KeyframeTrack: Value is not a valid number.', this, _i217, value);\n              valid = false;\n              break;\n            }\n          }\n        }\n      }\n\n      return valid;\n    } // removes equivalent sequential keys as common in morph target sequences\n    // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\n  }, {\n    key: \"optimize\",\n    value: function optimize() {\n      // times or values may be shared with other tracks, so overwriting is unsafe\n      var times = AnimationUtils.arraySlice(this.times),\n          values = AnimationUtils.arraySlice(this.values),\n          stride = this.getValueSize(),\n          smoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n          lastIndex = times.length - 1;\n      var writeIndex = 1;\n\n      for (var _i218 = 1; _i218 < lastIndex; ++_i218) {\n        var keep = false;\n        var time = times[_i218];\n        var timeNext = times[_i218 + 1]; // remove adjacent keyframes scheduled at the same time\n\n        if (time !== timeNext && (_i218 !== 1 || time !== times[0])) {\n          if (!smoothInterpolation) {\n            // remove unnecessary keyframes same as their neighbors\n            var offset = _i218 * stride,\n                offsetP = offset - stride,\n                offsetN = offset + stride;\n\n            for (var j = 0; j !== stride; ++j) {\n              var value = values[offset + j];\n\n              if (value !== values[offsetP + j] || value !== values[offsetN + j]) {\n                keep = true;\n                break;\n              }\n            }\n          } else {\n            keep = true;\n          }\n        } // in-place compaction\n\n\n        if (keep) {\n          if (_i218 !== writeIndex) {\n            times[writeIndex] = times[_i218];\n            var readOffset = _i218 * stride,\n                writeOffset = writeIndex * stride;\n\n            for (var _j9 = 0; _j9 !== stride; ++_j9) {\n              values[writeOffset + _j9] = values[readOffset + _j9];\n            }\n          }\n\n          ++writeIndex;\n        }\n      } // flush last keyframe (compaction looks ahead)\n\n\n      if (lastIndex > 0) {\n        times[writeIndex] = times[lastIndex];\n\n        for (var _readOffset = lastIndex * stride, _writeOffset = writeIndex * stride, _j10 = 0; _j10 !== stride; ++_j10) {\n          values[_writeOffset + _j10] = values[_readOffset + _j10];\n        }\n\n        ++writeIndex;\n      }\n\n      if (writeIndex !== times.length) {\n        this.times = AnimationUtils.arraySlice(times, 0, writeIndex);\n        this.values = AnimationUtils.arraySlice(values, 0, writeIndex * stride);\n      } else {\n        this.times = times;\n        this.values = values;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var times = AnimationUtils.arraySlice(this.times, 0);\n      var values = AnimationUtils.arraySlice(this.values, 0);\n      var TypedKeyframeTrack = this.constructor;\n      var track = new TypedKeyframeTrack(this.name, times, values); // Interpolant argument to constructor is not saved, so copy the factory method directly.\n\n      track.createInterpolant = this.createInterpolant;\n      return track;\n    }\n  }], [{\n    key: \"toJSON\",\n    value: function toJSON(track) {\n      var trackType = track.constructor;\n      var json; // derived classes can define a static toJSON method\n\n      if (trackType.toJSON !== this.toJSON) {\n        json = trackType.toJSON(track);\n      } else {\n        // by default, we assume the data can be serialized as-is\n        json = {\n          'name': track.name,\n          'times': AnimationUtils.convertArray(track.times, Array),\n          'values': AnimationUtils.convertArray(track.values, Array)\n        };\n        var interpolation = track.getInterpolation();\n\n        if (interpolation !== track.DefaultInterpolation) {\n          json.interpolation = interpolation;\n        }\n      }\n\n      json.type = track.ValueTypeName; // mandatory\n\n      return json;\n    }\n  }]);\n\n  return KeyframeTrack;\n}();\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n/**\n * A Track of Boolean keyframe values.\n */\n\nvar BooleanKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack) {\n  _inherits(BooleanKeyframeTrack, _KeyframeTrack);\n\n  var _super75 = _createSuper(BooleanKeyframeTrack);\n\n  function BooleanKeyframeTrack() {\n    _classCallCheck(this, BooleanKeyframeTrack);\n\n    return _super75.apply(this, arguments);\n  }\n\n  return BooleanKeyframeTrack;\n}(KeyframeTrack);\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n/**\n * A Track of keyframe values that represent color.\n */\n\nvar ColorKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack2) {\n  _inherits(ColorKeyframeTrack, _KeyframeTrack2);\n\n  var _super76 = _createSuper(ColorKeyframeTrack);\n\n  function ColorKeyframeTrack() {\n    _classCallCheck(this, ColorKeyframeTrack);\n\n    return _super76.apply(this, arguments);\n  }\n\n  return ColorKeyframeTrack;\n}(KeyframeTrack);\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n/**\n * A Track of numeric keyframe values.\n */\n\nvar NumberKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack3) {\n  _inherits(NumberKeyframeTrack, _KeyframeTrack3);\n\n  var _super77 = _createSuper(NumberKeyframeTrack);\n\n  function NumberKeyframeTrack() {\n    _classCallCheck(this, NumberKeyframeTrack);\n\n    return _super77.apply(this, arguments);\n  }\n\n  return NumberKeyframeTrack;\n}(KeyframeTrack);\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nvar QuaternionLinearInterpolant = /*#__PURE__*/function (_Interpolant4) {\n  _inherits(QuaternionLinearInterpolant, _Interpolant4);\n\n  var _super78 = _createSuper(QuaternionLinearInterpolant);\n\n  function QuaternionLinearInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, QuaternionLinearInterpolant);\n\n    return _super78.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(QuaternionLinearInterpolant, [{\n    key: \"interpolate_\",\n    value: function interpolate_(i1, t0, t, t1) {\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          stride = this.valueSize,\n          alpha = (t - t0) / (t1 - t0);\n      var offset = i1 * stride;\n\n      for (var end = offset + stride; offset !== end; offset += 4) {\n        Quaternion.slerpFlat(result, 0, values, offset - stride, values, offset, alpha);\n      }\n\n      return result;\n    }\n  }]);\n\n  return QuaternionLinearInterpolant;\n}(Interpolant);\n/**\n * A Track of quaternion keyframe values.\n */\n\n\nvar QuaternionKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack4) {\n  _inherits(QuaternionKeyframeTrack, _KeyframeTrack4);\n\n  var _super79 = _createSuper(QuaternionKeyframeTrack);\n\n  function QuaternionKeyframeTrack() {\n    _classCallCheck(this, QuaternionKeyframeTrack);\n\n    return _super79.apply(this, arguments);\n  }\n\n  _createClass(QuaternionKeyframeTrack, [{\n    key: \"InterpolantFactoryMethodLinear\",\n    value: function InterpolantFactoryMethodLinear(result) {\n      return new QuaternionLinearInterpolant(this.times, this.values, this.getValueSize(), result);\n    }\n  }]);\n\n  return QuaternionKeyframeTrack;\n}(KeyframeTrack);\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion'; // ValueBufferType is inherited\n\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n/**\n * A Track that interpolates Strings\n */\n\nvar StringKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack5) {\n  _inherits(StringKeyframeTrack, _KeyframeTrack5);\n\n  var _super80 = _createSuper(StringKeyframeTrack);\n\n  function StringKeyframeTrack() {\n    _classCallCheck(this, StringKeyframeTrack);\n\n    return _super80.apply(this, arguments);\n  }\n\n  return StringKeyframeTrack;\n}(KeyframeTrack);\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n/**\n * A Track of vectored keyframe values.\n */\n\nvar VectorKeyframeTrack = /*#__PURE__*/function (_KeyframeTrack6) {\n  _inherits(VectorKeyframeTrack, _KeyframeTrack6);\n\n  var _super81 = _createSuper(VectorKeyframeTrack);\n\n  function VectorKeyframeTrack() {\n    _classCallCheck(this, VectorKeyframeTrack);\n\n    return _super81.apply(this, arguments);\n  }\n\n  return VectorKeyframeTrack;\n}(KeyframeTrack);\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nvar AnimationClip = /*#__PURE__*/function () {\n  function AnimationClip(name) {\n    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    var tracks = arguments.length > 2 ? arguments[2] : undefined;\n    var blendMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : NormalAnimationBlendMode;\n\n    _classCallCheck(this, AnimationClip);\n\n    this.name = name;\n    this.tracks = tracks;\n    this.duration = duration;\n    this.blendMode = blendMode;\n    this.uuid = generateUUID(); // this means it should figure out its duration by scanning the tracks\n\n    if (this.duration < 0) {\n      this.resetDuration();\n    }\n  }\n\n  _createClass(AnimationClip, [{\n    key: \"resetDuration\",\n    value: function resetDuration() {\n      var tracks = this.tracks;\n      var duration = 0;\n\n      for (var _i219 = 0, _n10 = tracks.length; _i219 !== _n10; ++_i219) {\n        var track = this.tracks[_i219];\n        duration = Math.max(duration, track.times[track.times.length - 1]);\n      }\n\n      this.duration = duration;\n      return this;\n    }\n  }, {\n    key: \"trim\",\n    value: function trim() {\n      for (var _i220 = 0; _i220 < this.tracks.length; _i220++) {\n        this.tracks[_i220].trim(0, this.duration);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = true;\n\n      for (var _i221 = 0; _i221 < this.tracks.length; _i221++) {\n        valid = valid && this.tracks[_i221].validate();\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"optimize\",\n    value: function optimize() {\n      for (var _i222 = 0; _i222 < this.tracks.length; _i222++) {\n        this.tracks[_i222].optimize();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var tracks = [];\n\n      for (var _i223 = 0; _i223 < this.tracks.length; _i223++) {\n        tracks.push(this.tracks[_i223].clone());\n      }\n\n      return new this.constructor(this.name, this.duration, tracks, this.blendMode);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.constructor.toJSON(this);\n    }\n  }], [{\n    key: \"parse\",\n    value: function parse(json) {\n      var tracks = [],\n          jsonTracks = json.tracks,\n          frameTime = 1.0 / (json.fps || 1.0);\n\n      for (var _i224 = 0, _n11 = jsonTracks.length; _i224 !== _n11; ++_i224) {\n        tracks.push(parseKeyframeTrack(jsonTracks[_i224]).scale(frameTime));\n      }\n\n      var clip = new this(json.name, json.duration, tracks, json.blendMode);\n      clip.uuid = json.uuid;\n      return clip;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(clip) {\n      var tracks = [],\n          clipTracks = clip.tracks;\n      var json = {\n        'name': clip.name,\n        'duration': clip.duration,\n        'tracks': tracks,\n        'uuid': clip.uuid,\n        'blendMode': clip.blendMode\n      };\n\n      for (var _i225 = 0, _n12 = clipTracks.length; _i225 !== _n12; ++_i225) {\n        tracks.push(KeyframeTrack.toJSON(clipTracks[_i225]));\n      }\n\n      return json;\n    }\n  }, {\n    key: \"CreateFromMorphTargetSequence\",\n    value: function CreateFromMorphTargetSequence(name, morphTargetSequence, fps, noLoop) {\n      var numMorphTargets = morphTargetSequence.length;\n      var tracks = [];\n\n      for (var _i226 = 0; _i226 < numMorphTargets; _i226++) {\n        var times = [];\n        var values = [];\n        times.push((_i226 + numMorphTargets - 1) % numMorphTargets, _i226, (_i226 + 1) % numMorphTargets);\n        values.push(0, 1, 0);\n        var order = AnimationUtils.getKeyframeOrder(times);\n        times = AnimationUtils.sortedArray(times, 1, order);\n        values = AnimationUtils.sortedArray(values, 1, order); // if there is a key at the first frame, duplicate it as the\n        // last frame as well for perfect loop.\n\n        if (!noLoop && times[0] === 0) {\n          times.push(numMorphTargets);\n          values.push(values[0]);\n        }\n\n        tracks.push(new NumberKeyframeTrack('.morphTargetInfluences[' + morphTargetSequence[_i226].name + ']', times, values).scale(1.0 / fps));\n      }\n\n      return new this(name, -1, tracks);\n    }\n  }, {\n    key: \"findByName\",\n    value: function findByName(objectOrClipArray, name) {\n      var clipArray = objectOrClipArray;\n\n      if (!Array.isArray(objectOrClipArray)) {\n        var _o2 = objectOrClipArray;\n        clipArray = _o2.geometry && _o2.geometry.animations || _o2.animations;\n      }\n\n      for (var _i227 = 0; _i227 < clipArray.length; _i227++) {\n        if (clipArray[_i227].name === name) {\n          return clipArray[_i227];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"CreateClipsFromMorphTargetSequences\",\n    value: function CreateClipsFromMorphTargetSequences(morphTargets, fps, noLoop) {\n      var animationToMorphTargets = {}; // tested with https://regex101.com/ on trick sequences\n      // such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\n      var pattern = /^([\\w-]*?)([\\d]+)$/; // sort morph target names into animation groups based\n      // patterns like Walk_001, Walk_002, Run_001, Run_002\n\n      for (var _i228 = 0, il = morphTargets.length; _i228 < il; _i228++) {\n        var morphTarget = morphTargets[_i228];\n\n        var _parts = morphTarget.name.match(pattern);\n\n        if (_parts && _parts.length > 1) {\n          var name = _parts[1];\n          var animationMorphTargets = animationToMorphTargets[name];\n\n          if (!animationMorphTargets) {\n            animationToMorphTargets[name] = animationMorphTargets = [];\n          }\n\n          animationMorphTargets.push(morphTarget);\n        }\n      }\n\n      var clips = [];\n\n      for (var _name4 in animationToMorphTargets) {\n        clips.push(this.CreateFromMorphTargetSequence(_name4, animationToMorphTargets[_name4], fps, noLoop));\n      }\n\n      return clips;\n    } // parse the animation.hierarchy format\n\n  }, {\n    key: \"parseAnimation\",\n    value: function parseAnimation(animation, bones) {\n      if (!animation) {\n        console.error('THREE.AnimationClip: No animation in JSONLoader data.');\n        return null;\n      }\n\n      var addNonemptyTrack = function addNonemptyTrack(trackType, trackName, animationKeys, propertyName, destTracks) {\n        // only return track if there are actually keys.\n        if (animationKeys.length !== 0) {\n          var times = [];\n          var values = [];\n          AnimationUtils.flattenJSON(animationKeys, times, values, propertyName); // empty keys are filtered out, so check again\n\n          if (times.length !== 0) {\n            destTracks.push(new trackType(trackName, times, values));\n          }\n        }\n      };\n\n      var tracks = [];\n      var clipName = animation.name || 'default';\n      var fps = animation.fps || 30;\n      var blendMode = animation.blendMode; // automatic length determination in AnimationClip.\n\n      var duration = animation.length || -1;\n      var hierarchyTracks = animation.hierarchy || [];\n\n      for (var h = 0; h < hierarchyTracks.length; h++) {\n        var animationKeys = hierarchyTracks[h].keys; // skip empty tracks\n\n        if (!animationKeys || animationKeys.length === 0) continue; // process morph targets\n\n        if (animationKeys[0].morphTargets) {\n          // figure out all morph targets used in this track\n          var morphTargetNames = {};\n          var k = void 0;\n\n          for (k = 0; k < animationKeys.length; k++) {\n            if (animationKeys[k].morphTargets) {\n              for (var m = 0; m < animationKeys[k].morphTargets.length; m++) {\n                morphTargetNames[animationKeys[k].morphTargets[m]] = -1;\n              }\n            }\n          } // create a track for each morph target with all zero\n          // morphTargetInfluences except for the keys in which\n          // the morphTarget is named.\n\n\n          for (var morphTargetName in morphTargetNames) {\n            var times = [];\n            var values = [];\n\n            for (var _m2 = 0; _m2 !== animationKeys[k].morphTargets.length; ++_m2) {\n              var animationKey = animationKeys[k];\n              times.push(animationKey.time);\n              values.push(animationKey.morphTarget === morphTargetName ? 1 : 0);\n            }\n\n            tracks.push(new NumberKeyframeTrack('.morphTargetInfluence[' + morphTargetName + ']', times, values));\n          }\n\n          duration = morphTargetNames.length * (fps || 1.0);\n        } else {\n          // ...assume skeletal animation\n          var boneName = '.bones[' + bones[h].name + ']';\n          addNonemptyTrack(VectorKeyframeTrack, boneName + '.position', animationKeys, 'pos', tracks);\n          addNonemptyTrack(QuaternionKeyframeTrack, boneName + '.quaternion', animationKeys, 'rot', tracks);\n          addNonemptyTrack(VectorKeyframeTrack, boneName + '.scale', animationKeys, 'scl', tracks);\n        }\n      }\n\n      if (tracks.length === 0) {\n        return null;\n      }\n\n      var clip = new this(clipName, duration, tracks, blendMode);\n      return clip;\n    }\n  }]);\n\n  return AnimationClip;\n}();\n\nfunction getTrackTypeForValueTypeName(typeName) {\n  switch (typeName.toLowerCase()) {\n    case 'scalar':\n    case 'double':\n    case 'float':\n    case 'number':\n    case 'integer':\n      return NumberKeyframeTrack;\n\n    case 'vector':\n    case 'vector2':\n    case 'vector3':\n    case 'vector4':\n      return VectorKeyframeTrack;\n\n    case 'color':\n      return ColorKeyframeTrack;\n\n    case 'quaternion':\n      return QuaternionKeyframeTrack;\n\n    case 'bool':\n    case 'boolean':\n      return BooleanKeyframeTrack;\n\n    case 'string':\n      return StringKeyframeTrack;\n  }\n\n  throw new Error('THREE.KeyframeTrack: Unsupported typeName: ' + typeName);\n}\n\nfunction parseKeyframeTrack(json) {\n  if (json.type === undefined) {\n    throw new Error('THREE.KeyframeTrack: track type undefined, can not parse');\n  }\n\n  var trackType = getTrackTypeForValueTypeName(json.type);\n\n  if (json.times === undefined) {\n    var times = [],\n        values = [];\n    AnimationUtils.flattenJSON(json.keys, times, values, 'value');\n    json.times = times;\n    json.values = values;\n  } // derived classes can define a static parse method\n\n\n  if (trackType.parse !== undefined) {\n    return trackType.parse(json);\n  } else {\n    // by default, we assume a constructor compatible with the base\n    return new trackType(json.name, json.times, json.values, json.interpolation);\n  }\n}\n\nvar Cache = {\n  enabled: false,\n  files: {},\n  add: function add(key, file) {\n    if (this.enabled === false) return; // console.log( 'THREE.Cache', 'Adding key:', key );\n\n    this.files[key] = file;\n  },\n  get: function get(key) {\n    if (this.enabled === false) return; // console.log( 'THREE.Cache', 'Checking key:', key );\n\n    return this.files[key];\n  },\n  remove: function remove(key) {\n    delete this.files[key];\n  },\n  clear: function clear() {\n    this.files = {};\n  }\n};\n\nvar LoadingManager = function LoadingManager(onLoad, onProgress, onError) {\n  _classCallCheck(this, LoadingManager);\n\n  var scope = this;\n  var isLoading = false;\n  var itemsLoaded = 0;\n  var itemsTotal = 0;\n  var urlModifier = undefined;\n  var handlers = []; // Refer to #5689 for the reason why we don't set .onStart\n  // in the constructor\n\n  this.onStart = undefined;\n  this.onLoad = onLoad;\n  this.onProgress = onProgress;\n  this.onError = onError;\n\n  this.itemStart = function (url) {\n    itemsTotal++;\n\n    if (isLoading === false) {\n      if (scope.onStart !== undefined) {\n        scope.onStart(url, itemsLoaded, itemsTotal);\n      }\n    }\n\n    isLoading = true;\n  };\n\n  this.itemEnd = function (url) {\n    itemsLoaded++;\n\n    if (scope.onProgress !== undefined) {\n      scope.onProgress(url, itemsLoaded, itemsTotal);\n    }\n\n    if (itemsLoaded === itemsTotal) {\n      isLoading = false;\n\n      if (scope.onLoad !== undefined) {\n        scope.onLoad();\n      }\n    }\n  };\n\n  this.itemError = function (url) {\n    if (scope.onError !== undefined) {\n      scope.onError(url);\n    }\n  };\n\n  this.resolveURL = function (url) {\n    if (urlModifier) {\n      return urlModifier(url);\n    }\n\n    return url;\n  };\n\n  this.setURLModifier = function (transform) {\n    urlModifier = transform;\n    return this;\n  };\n\n  this.addHandler = function (regex, loader) {\n    handlers.push(regex, loader);\n    return this;\n  };\n\n  this.removeHandler = function (regex) {\n    var index = handlers.indexOf(regex);\n\n    if (index !== -1) {\n      handlers.splice(index, 2);\n    }\n\n    return this;\n  };\n\n  this.getHandler = function (file) {\n    for (var _i229 = 0, _l69 = handlers.length; _i229 < _l69; _i229 += 2) {\n      var regex = handlers[_i229];\n      var _loader = handlers[_i229 + 1];\n      if (regex.global) regex.lastIndex = 0; // see #17920\n\n      if (regex.test(file)) {\n        return _loader;\n      }\n    }\n\n    return null;\n  };\n};\n\nvar DefaultLoadingManager = new LoadingManager();\n\nvar Loader = /*#__PURE__*/function () {\n  function Loader(manager) {\n    _classCallCheck(this, Loader);\n\n    this.manager = manager !== undefined ? manager : DefaultLoadingManager;\n    this.crossOrigin = 'anonymous';\n    this.withCredentials = false;\n    this.path = '';\n    this.resourcePath = '';\n    this.requestHeader = {};\n  }\n\n  _createClass(Loader, [{\n    key: \"load\",\n    value: function load() {}\n  }, {\n    key: \"loadAsync\",\n    value: function loadAsync(url, onProgress) {\n      var scope = this;\n      return new Promise(function (resolve, reject) {\n        scope.load(url, resolve, onProgress, reject);\n      });\n    }\n  }, {\n    key: \"parse\",\n    value: function parse() {}\n  }, {\n    key: \"setCrossOrigin\",\n    value: function setCrossOrigin(crossOrigin) {\n      this.crossOrigin = crossOrigin;\n      return this;\n    }\n  }, {\n    key: \"setWithCredentials\",\n    value: function setWithCredentials(value) {\n      this.withCredentials = value;\n      return this;\n    }\n  }, {\n    key: \"setPath\",\n    value: function setPath(path) {\n      this.path = path;\n      return this;\n    }\n  }, {\n    key: \"setResourcePath\",\n    value: function setResourcePath(resourcePath) {\n      this.resourcePath = resourcePath;\n      return this;\n    }\n  }, {\n    key: \"setRequestHeader\",\n    value: function setRequestHeader(requestHeader) {\n      this.requestHeader = requestHeader;\n      return this;\n    }\n  }]);\n\n  return Loader;\n}();\n\nvar loading = {};\n\nvar FileLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(FileLoader, _Loader);\n\n  var _super82 = _createSuper(FileLoader);\n\n  function FileLoader(manager) {\n    _classCallCheck(this, FileLoader);\n\n    return _super82.call(this, manager);\n  }\n\n  _createClass(FileLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      if (url === undefined) url = '';\n      if (this.path !== undefined) url = this.path + url;\n      url = this.manager.resolveURL(url);\n      var scope = this;\n      var cached = Cache.get(url);\n\n      if (cached !== undefined) {\n        scope.manager.itemStart(url);\n        setTimeout(function () {\n          if (onLoad) onLoad(cached);\n          scope.manager.itemEnd(url);\n        }, 0);\n        return cached;\n      } // Check if request is duplicate\n\n\n      if (loading[url] !== undefined) {\n        loading[url].push({\n          onLoad: onLoad,\n          onProgress: onProgress,\n          onError: onError\n        });\n        return;\n      } // Check for data: URI\n\n\n      var dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n      var dataUriRegexResult = url.match(dataUriRegex);\n      var request; // Safari can not handle Data URIs through XMLHttpRequest so process manually\n\n      if (dataUriRegexResult) {\n        var mimeType = dataUriRegexResult[1];\n        var isBase64 = !!dataUriRegexResult[2];\n        var data = dataUriRegexResult[3];\n        data = decodeURIComponent(data);\n        if (isBase64) data = atob(data);\n\n        try {\n          var response;\n          var responseType = (this.responseType || '').toLowerCase();\n\n          switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n              var _view2 = new Uint8Array(data.length);\n\n              for (var _i230 = 0; _i230 < data.length; _i230++) {\n                _view2[_i230] = data.charCodeAt(_i230);\n              }\n\n              if (responseType === 'blob') {\n                response = new Blob([_view2.buffer], {\n                  type: mimeType\n                });\n              } else {\n                response = _view2.buffer;\n              }\n\n              break;\n\n            case 'document':\n              var parser = new DOMParser();\n              response = parser.parseFromString(data, mimeType);\n              break;\n\n            case 'json':\n              response = JSON.parse(data);\n              break;\n\n            default:\n              // 'text' or other\n              response = data;\n              break;\n          } // Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\n\n          setTimeout(function () {\n            if (onLoad) onLoad(response);\n            scope.manager.itemEnd(url);\n          }, 0);\n        } catch (error) {\n          // Wait for next browser tick like standard XMLHttpRequest event dispatching does\n          setTimeout(function () {\n            if (onError) onError(error);\n            scope.manager.itemError(url);\n            scope.manager.itemEnd(url);\n          }, 0);\n        }\n      } else {\n        // Initialise array for duplicate requests\n        loading[url] = [];\n        loading[url].push({\n          onLoad: onLoad,\n          onProgress: onProgress,\n          onError: onError\n        });\n        request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.addEventListener('load', function (event) {\n          var response = this.response;\n          var callbacks = loading[url];\n          delete loading[url];\n\n          if (this.status === 200 || this.status === 0) {\n            // Some browsers return HTTP Status 0 when using non-http protocol\n            // e.g. 'file://' or 'data://'. Handle as success.\n            if (this.status === 0) console.warn('THREE.FileLoader: HTTP Status 0 received.'); // Add to cache only on HTTP success, so that we do not cache\n            // error response bodies as proper responses to requests.\n\n            Cache.add(url, response);\n\n            for (var _i231 = 0, il = callbacks.length; _i231 < il; _i231++) {\n              var callback = callbacks[_i231];\n              if (callback.onLoad) callback.onLoad(response);\n            }\n\n            scope.manager.itemEnd(url);\n          } else {\n            for (var _i232 = 0, _il18 = callbacks.length; _i232 < _il18; _i232++) {\n              var _callback = callbacks[_i232];\n              if (_callback.onError) _callback.onError(event);\n            }\n\n            scope.manager.itemError(url);\n            scope.manager.itemEnd(url);\n          }\n        }, false);\n        request.addEventListener('progress', function (event) {\n          var callbacks = loading[url];\n\n          for (var _i233 = 0, il = callbacks.length; _i233 < il; _i233++) {\n            var callback = callbacks[_i233];\n            if (callback.onProgress) callback.onProgress(event);\n          }\n        }, false);\n        request.addEventListener('error', function (event) {\n          var callbacks = loading[url];\n          delete loading[url];\n\n          for (var _i234 = 0, il = callbacks.length; _i234 < il; _i234++) {\n            var callback = callbacks[_i234];\n            if (callback.onError) callback.onError(event);\n          }\n\n          scope.manager.itemError(url);\n          scope.manager.itemEnd(url);\n        }, false);\n        request.addEventListener('abort', function (event) {\n          var callbacks = loading[url];\n          delete loading[url];\n\n          for (var _i235 = 0, il = callbacks.length; _i235 < il; _i235++) {\n            var callback = callbacks[_i235];\n            if (callback.onError) callback.onError(event);\n          }\n\n          scope.manager.itemError(url);\n          scope.manager.itemEnd(url);\n        }, false);\n        if (this.responseType !== undefined) request.responseType = this.responseType;\n        if (this.withCredentials !== undefined) request.withCredentials = this.withCredentials;\n        if (request.overrideMimeType) request.overrideMimeType(this.mimeType !== undefined ? this.mimeType : 'text/plain');\n\n        for (var header in this.requestHeader) {\n          request.setRequestHeader(header, this.requestHeader[header]);\n        }\n\n        request.send(null);\n      }\n\n      scope.manager.itemStart(url);\n      return request;\n    }\n  }, {\n    key: \"setResponseType\",\n    value: function setResponseType(value) {\n      this.responseType = value;\n      return this;\n    }\n  }, {\n    key: \"setMimeType\",\n    value: function setMimeType(value) {\n      this.mimeType = value;\n      return this;\n    }\n  }]);\n\n  return FileLoader;\n}(Loader);\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\n\nvar CompressedTextureLoader = /*#__PURE__*/function (_Loader2) {\n  _inherits(CompressedTextureLoader, _Loader2);\n\n  var _super83 = _createSuper(CompressedTextureLoader);\n\n  function CompressedTextureLoader(manager) {\n    _classCallCheck(this, CompressedTextureLoader);\n\n    return _super83.call(this, manager);\n  }\n\n  _createClass(CompressedTextureLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var images = [];\n      var texture = new CompressedTexture();\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(scope.withCredentials);\n      var loaded = 0;\n\n      function loadTexture(i) {\n        loader.load(url[i], function (buffer) {\n          var texDatas = scope.parse(buffer, true);\n          images[i] = {\n            width: texDatas.width,\n            height: texDatas.height,\n            format: texDatas.format,\n            mipmaps: texDatas.mipmaps\n          };\n          loaded += 1;\n\n          if (loaded === 6) {\n            if (texDatas.mipmapCount === 1) texture.minFilter = LinearFilter;\n            texture.image = images;\n            texture.format = texDatas.format;\n            texture.needsUpdate = true;\n            if (onLoad) onLoad(texture);\n          }\n        }, onProgress, onError);\n      }\n\n      if (Array.isArray(url)) {\n        for (var _i236 = 0, il = url.length; _i236 < il; ++_i236) {\n          loadTexture(_i236);\n        }\n      } else {\n        // compressed cubemap texture stored in a single DDS file\n        loader.load(url, function (buffer) {\n          var texDatas = scope.parse(buffer, true);\n\n          if (texDatas.isCubemap) {\n            var faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n            for (var _f4 = 0; _f4 < faces; _f4++) {\n              images[_f4] = {\n                mipmaps: []\n              };\n\n              for (var _i237 = 0; _i237 < texDatas.mipmapCount; _i237++) {\n                images[_f4].mipmaps.push(texDatas.mipmaps[_f4 * texDatas.mipmapCount + _i237]);\n\n                images[_f4].format = texDatas.format;\n                images[_f4].width = texDatas.width;\n                images[_f4].height = texDatas.height;\n              }\n            }\n\n            texture.image = images;\n          } else {\n            texture.image.width = texDatas.width;\n            texture.image.height = texDatas.height;\n            texture.mipmaps = texDatas.mipmaps;\n          }\n\n          if (texDatas.mipmapCount === 1) {\n            texture.minFilter = LinearFilter;\n          }\n\n          texture.format = texDatas.format;\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }, onProgress, onError);\n      }\n\n      return texture;\n    }\n  }]);\n\n  return CompressedTextureLoader;\n}(Loader);\n\nvar ImageLoader = /*#__PURE__*/function (_Loader3) {\n  _inherits(ImageLoader, _Loader3);\n\n  var _super84 = _createSuper(ImageLoader);\n\n  function ImageLoader(manager) {\n    _classCallCheck(this, ImageLoader);\n\n    return _super84.call(this, manager);\n  }\n\n  _createClass(ImageLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      if (this.path !== undefined) url = this.path + url;\n      url = this.manager.resolveURL(url);\n      var scope = this;\n      var cached = Cache.get(url);\n\n      if (cached !== undefined) {\n        scope.manager.itemStart(url);\n        setTimeout(function () {\n          if (onLoad) onLoad(cached);\n          scope.manager.itemEnd(url);\n        }, 0);\n        return cached;\n      }\n\n      var image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n      function onImageLoad() {\n        image.removeEventListener('load', onImageLoad, false);\n        image.removeEventListener('error', onImageError, false);\n        Cache.add(url, this);\n        if (onLoad) onLoad(this);\n        scope.manager.itemEnd(url);\n      }\n\n      function onImageError(event) {\n        image.removeEventListener('load', onImageLoad, false);\n        image.removeEventListener('error', onImageError, false);\n        if (onError) onError(event);\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      }\n\n      image.addEventListener('load', onImageLoad, false);\n      image.addEventListener('error', onImageError, false);\n\n      if (url.substr(0, 5) !== 'data:') {\n        if (this.crossOrigin !== undefined) image.crossOrigin = this.crossOrigin;\n      }\n\n      scope.manager.itemStart(url);\n      image.src = url;\n      return image;\n    }\n  }]);\n\n  return ImageLoader;\n}(Loader);\n\nvar CubeTextureLoader = /*#__PURE__*/function (_Loader4) {\n  _inherits(CubeTextureLoader, _Loader4);\n\n  var _super85 = _createSuper(CubeTextureLoader);\n\n  function CubeTextureLoader(manager) {\n    _classCallCheck(this, CubeTextureLoader);\n\n    return _super85.call(this, manager);\n  }\n\n  _createClass(CubeTextureLoader, [{\n    key: \"load\",\n    value: function load(urls, onLoad, onProgress, onError) {\n      var texture = new CubeTexture();\n      var loader = new ImageLoader(this.manager);\n      loader.setCrossOrigin(this.crossOrigin);\n      loader.setPath(this.path);\n      var loaded = 0;\n\n      function loadTexture(i) {\n        loader.load(urls[i], function (image) {\n          texture.images[i] = image;\n          loaded++;\n\n          if (loaded === 6) {\n            texture.needsUpdate = true;\n            if (onLoad) onLoad(texture);\n          }\n        }, undefined, onError);\n      }\n\n      for (var _i238 = 0; _i238 < urls.length; ++_i238) {\n        loadTexture(_i238);\n      }\n\n      return texture;\n    }\n  }]);\n\n  return CubeTextureLoader;\n}(Loader);\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\n\nvar DataTextureLoader = /*#__PURE__*/function (_Loader5) {\n  _inherits(DataTextureLoader, _Loader5);\n\n  var _super86 = _createSuper(DataTextureLoader);\n\n  function DataTextureLoader(manager) {\n    _classCallCheck(this, DataTextureLoader);\n\n    return _super86.call(this, manager);\n  }\n\n  _createClass(DataTextureLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var texture = new DataTexture();\n      var loader = new FileLoader(this.manager);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setPath(this.path);\n      loader.setWithCredentials(scope.withCredentials);\n      loader.load(url, function (buffer) {\n        var texData = scope.parse(buffer);\n        if (!texData) return;\n\n        if (texData.image !== undefined) {\n          texture.image = texData.image;\n        } else if (texData.data !== undefined) {\n          texture.image.width = texData.width;\n          texture.image.height = texData.height;\n          texture.image.data = texData.data;\n        }\n\n        texture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n        texture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n        texture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n        texture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n        texture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n        if (texData.encoding !== undefined) {\n          texture.encoding = texData.encoding;\n        }\n\n        if (texData.flipY !== undefined) {\n          texture.flipY = texData.flipY;\n        }\n\n        if (texData.format !== undefined) {\n          texture.format = texData.format;\n        }\n\n        if (texData.type !== undefined) {\n          texture.type = texData.type;\n        }\n\n        if (texData.mipmaps !== undefined) {\n          texture.mipmaps = texData.mipmaps;\n          texture.minFilter = LinearMipmapLinearFilter; // presumably...\n        }\n\n        if (texData.mipmapCount === 1) {\n          texture.minFilter = LinearFilter;\n        }\n\n        if (texData.generateMipmaps !== undefined) {\n          texture.generateMipmaps = texData.generateMipmaps;\n        }\n\n        texture.needsUpdate = true;\n        if (onLoad) onLoad(texture, texData);\n      }, onProgress, onError);\n      return texture;\n    }\n  }]);\n\n  return DataTextureLoader;\n}(Loader);\n\nvar TextureLoader = /*#__PURE__*/function (_Loader6) {\n  _inherits(TextureLoader, _Loader6);\n\n  var _super87 = _createSuper(TextureLoader);\n\n  function TextureLoader(manager) {\n    _classCallCheck(this, TextureLoader);\n\n    return _super87.call(this, manager);\n  }\n\n  _createClass(TextureLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var texture = new Texture$1();\n      var loader = new ImageLoader(this.manager);\n      loader.setCrossOrigin(this.crossOrigin);\n      loader.setPath(this.path);\n      loader.load(url, function (image) {\n        texture.image = image; // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\n        var isJPEG = url.search(/\\.jpe?g($|\\?)/i) > 0 || url.search(/^data\\:image\\/jpeg/) === 0;\n        texture.format = isJPEG ? RGBFormat : RGBAFormat;\n        texture.needsUpdate = true;\n\n        if (onLoad !== undefined) {\n          onLoad(texture);\n        }\n      }, onProgress, onError);\n      return texture;\n    }\n  }]);\n\n  return TextureLoader;\n}(Loader);\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\n\nvar CurvePath = /*#__PURE__*/function (_Curve10) {\n  _inherits(CurvePath, _Curve10);\n\n  var _super88 = _createSuper(CurvePath);\n\n  function CurvePath() {\n    var _this75;\n\n    _classCallCheck(this, CurvePath);\n\n    _this75 = _super88.call(this);\n    _this75.type = 'CurvePath';\n    _this75.curves = [];\n    _this75.autoClose = false; // Automatically closes the path\n\n    return _this75;\n  }\n\n  _createClass(CurvePath, [{\n    key: \"add\",\n    value: function add(curve) {\n      this.curves.push(curve);\n    }\n  }, {\n    key: \"closePath\",\n    value: function closePath() {\n      // Add a line curve if start and end of lines are not connected\n      var startPoint = this.curves[0].getPoint(0);\n      var endPoint = this.curves[this.curves.length - 1].getPoint(1);\n\n      if (!startPoint.equals(endPoint)) {\n        this.curves.push(new LineCurve(endPoint, startPoint));\n      }\n    } // To get accurate point with reference to\n    // entire path distance at time t,\n    // following has to be done:\n    // 1. Length of each sub path have to be known\n    // 2. Locate and identify type of curve\n    // 3. Get t for the curve\n    // 4. Return curve.getPointAt(t')\n\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var d = t * this.getLength();\n      var curveLengths = this.getCurveLengths();\n      var i = 0; // To think about boundaries points.\n\n      while (i < curveLengths.length) {\n        if (curveLengths[i] >= d) {\n          var diff = curveLengths[i] - d;\n          var curve = this.curves[i];\n          var segmentLength = curve.getLength();\n          var u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n          return curve.getPointAt(u);\n        }\n\n        i++;\n      }\n\n      return null; // loop where sum != 0, sum > d , sum+1 <d\n    } // We cannot use the default THREE.Curve getPoint() with getLength() because in\n    // THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n    // getPoint() depends on getLength\n\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      var lens = this.getCurveLengths();\n      return lens[lens.length - 1];\n    } // cacheLengths must be recalculated.\n\n  }, {\n    key: \"updateArcLengths\",\n    value: function updateArcLengths() {\n      this.needsUpdate = true;\n      this.cacheLengths = null;\n      this.getCurveLengths();\n    } // Compute lengths and cache them\n    // We cannot overwrite getLengths() because UtoT mapping uses it.\n\n  }, {\n    key: \"getCurveLengths\",\n    value: function getCurveLengths() {\n      // We use cache values if curves and cache array are same length\n      if (this.cacheLengths && this.cacheLengths.length === this.curves.length) {\n        return this.cacheLengths;\n      } // Get length of sub-curve\n      // Push sums into cached array\n\n\n      var lengths = [];\n      var sums = 0;\n\n      for (var _i239 = 0, _l70 = this.curves.length; _i239 < _l70; _i239++) {\n        sums += this.curves[_i239].getLength();\n        lengths.push(sums);\n      }\n\n      this.cacheLengths = lengths;\n      return lengths;\n    }\n  }, {\n    key: \"getSpacedPoints\",\n    value: function getSpacedPoints() {\n      var divisions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 40;\n      var points = [];\n\n      for (var _i240 = 0; _i240 <= divisions; _i240++) {\n        points.push(this.getPoint(_i240 / divisions));\n      }\n\n      if (this.autoClose) {\n        points.push(points[0]);\n      }\n\n      return points;\n    }\n  }, {\n    key: \"getPoints\",\n    value: function getPoints() {\n      var divisions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 12;\n      var points = [];\n      var last;\n\n      for (var _i241 = 0, curves = this.curves; _i241 < curves.length; _i241++) {\n        var curve = curves[_i241];\n        var resolution = curve && curve.isEllipseCurve ? divisions * 2 : curve && (curve.isLineCurve || curve.isLineCurve3) ? 1 : curve && curve.isSplineCurve ? divisions * curve.points.length : divisions;\n        var pts = curve.getPoints(resolution);\n\n        for (var j = 0; j < pts.length; j++) {\n          var point = pts[j];\n          if (last && last.equals(point)) continue; // ensures no consecutive points are duplicates\n\n          points.push(point);\n          last = point;\n        }\n      }\n\n      if (this.autoClose && points.length > 1 && !points[points.length - 1].equals(points[0])) {\n        points.push(points[0]);\n      }\n\n      return points;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(CurvePath.prototype), \"copy\", this).call(this, source);\n\n      this.curves = [];\n\n      for (var _i242 = 0, _l71 = source.curves.length; _i242 < _l71; _i242++) {\n        var curve = source.curves[_i242];\n        this.curves.push(curve.clone());\n      }\n\n      this.autoClose = source.autoClose;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(CurvePath.prototype), \"toJSON\", this).call(this);\n\n      data.autoClose = this.autoClose;\n      data.curves = [];\n\n      for (var _i243 = 0, _l72 = this.curves.length; _i243 < _l72; _i243++) {\n        var curve = this.curves[_i243];\n        data.curves.push(curve.toJSON());\n      }\n\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(CurvePath.prototype), \"fromJSON\", this).call(this, json);\n\n      this.autoClose = json.autoClose;\n      this.curves = [];\n\n      for (var _i244 = 0, _l73 = json.curves.length; _i244 < _l73; _i244++) {\n        var curve = json.curves[_i244];\n        this.curves.push(new Curves[curve.type]().fromJSON(curve));\n      }\n\n      return this;\n    }\n  }]);\n\n  return CurvePath;\n}(Curve);\n\nvar Path = /*#__PURE__*/function (_CurvePath) {\n  _inherits(Path, _CurvePath);\n\n  var _super89 = _createSuper(Path);\n\n  function Path(points) {\n    var _this76;\n\n    _classCallCheck(this, Path);\n\n    _this76 = _super89.call(this);\n    _this76.type = 'Path';\n    _this76.currentPoint = new Vector2();\n\n    if (points) {\n      _this76.setFromPoints(points);\n    }\n\n    return _this76;\n  }\n\n  _createClass(Path, [{\n    key: \"setFromPoints\",\n    value: function setFromPoints(points) {\n      this.moveTo(points[0].x, points[0].y);\n\n      for (var _i245 = 1, _l74 = points.length; _i245 < _l74; _i245++) {\n        this.lineTo(points[_i245].x, points[_i245].y);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(x, y) {\n      this.currentPoint.set(x, y); // TODO consider referencing vectors instead of copying?\n\n      return this;\n    }\n  }, {\n    key: \"lineTo\",\n    value: function lineTo(x, y) {\n      var curve = new LineCurve(this.currentPoint.clone(), new Vector2(x, y));\n      this.curves.push(curve);\n      this.currentPoint.set(x, y);\n      return this;\n    }\n  }, {\n    key: \"quadraticCurveTo\",\n    value: function quadraticCurveTo(aCPx, aCPy, aX, aY) {\n      var curve = new QuadraticBezierCurve(this.currentPoint.clone(), new Vector2(aCPx, aCPy), new Vector2(aX, aY));\n      this.curves.push(curve);\n      this.currentPoint.set(aX, aY);\n      return this;\n    }\n  }, {\n    key: \"bezierCurveTo\",\n    value: function bezierCurveTo(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n      var curve = new CubicBezierCurve(this.currentPoint.clone(), new Vector2(aCP1x, aCP1y), new Vector2(aCP2x, aCP2y), new Vector2(aX, aY));\n      this.curves.push(curve);\n      this.currentPoint.set(aX, aY);\n      return this;\n    }\n  }, {\n    key: \"splineThru\",\n    value: function splineThru(pts\n    /*Array of Vector*/\n    ) {\n      var npts = [this.currentPoint.clone()].concat(pts);\n      var curve = new SplineCurve(npts);\n      this.curves.push(curve);\n      this.currentPoint.copy(pts[pts.length - 1]);\n      return this;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n      var x0 = this.currentPoint.x;\n      var y0 = this.currentPoint.y;\n      this.absarc(aX + x0, aY + y0, aRadius, aStartAngle, aEndAngle, aClockwise);\n      return this;\n    }\n  }, {\n    key: \"absarc\",\n    value: function absarc(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n      this.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n      return this;\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n      var x0 = this.currentPoint.x;\n      var y0 = this.currentPoint.y;\n      this.absellipse(aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n      return this;\n    }\n  }, {\n    key: \"absellipse\",\n    value: function absellipse(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n      var curve = new EllipseCurve(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n\n      if (this.curves.length > 0) {\n        // if a previous curve is present, attempt to join\n        var firstPoint = curve.getPoint(0);\n\n        if (!firstPoint.equals(this.currentPoint)) {\n          this.lineTo(firstPoint.x, firstPoint.y);\n        }\n      }\n\n      this.curves.push(curve);\n      var lastPoint = curve.getPoint(1);\n      this.currentPoint.copy(lastPoint);\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Path.prototype), \"copy\", this).call(this, source);\n\n      this.currentPoint.copy(source.currentPoint);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(Path.prototype), \"toJSON\", this).call(this);\n\n      data.currentPoint = this.currentPoint.toArray();\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(Path.prototype), \"fromJSON\", this).call(this, json);\n\n      this.currentPoint.fromArray(json.currentPoint);\n      return this;\n    }\n  }]);\n\n  return Path;\n}(CurvePath);\n\nvar Shape = /*#__PURE__*/function (_Path) {\n  _inherits(Shape, _Path);\n\n  var _super90 = _createSuper(Shape);\n\n  function Shape(points) {\n    var _this77;\n\n    _classCallCheck(this, Shape);\n\n    _this77 = _super90.call(this, points);\n    _this77.uuid = generateUUID();\n    _this77.type = 'Shape';\n    _this77.holes = [];\n    return _this77;\n  }\n\n  _createClass(Shape, [{\n    key: \"getPointsHoles\",\n    value: function getPointsHoles(divisions) {\n      var holesPts = [];\n\n      for (var _i246 = 0, _l75 = this.holes.length; _i246 < _l75; _i246++) {\n        holesPts[_i246] = this.holes[_i246].getPoints(divisions);\n      }\n\n      return holesPts;\n    } // get points of shape and holes (keypoints based on segments parameter)\n\n  }, {\n    key: \"extractPoints\",\n    value: function extractPoints(divisions) {\n      return {\n        shape: this.getPoints(divisions),\n        holes: this.getPointsHoles(divisions)\n      };\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Shape.prototype), \"copy\", this).call(this, source);\n\n      this.holes = [];\n\n      for (var _i247 = 0, _l76 = source.holes.length; _i247 < _l76; _i247++) {\n        var hole = source.holes[_i247];\n        this.holes.push(hole.clone());\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(Shape.prototype), \"toJSON\", this).call(this);\n\n      data.uuid = this.uuid;\n      data.holes = [];\n\n      for (var _i248 = 0, _l77 = this.holes.length; _i248 < _l77; _i248++) {\n        var hole = this.holes[_i248];\n        data.holes.push(hole.toJSON());\n      }\n\n      return data;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      _get(_getPrototypeOf(Shape.prototype), \"fromJSON\", this).call(this, json);\n\n      this.uuid = json.uuid;\n      this.holes = [];\n\n      for (var _i249 = 0, _l78 = json.holes.length; _i249 < _l78; _i249++) {\n        var hole = json.holes[_i249];\n        this.holes.push(new Path().fromJSON(hole));\n      }\n\n      return this;\n    }\n  }]);\n\n  return Shape;\n}(Path);\n\nvar Light = /*#__PURE__*/function (_Object3D10) {\n  _inherits(Light, _Object3D10);\n\n  var _super91 = _createSuper(Light);\n\n  function Light(color) {\n    var _this78;\n\n    var intensity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    _classCallCheck(this, Light);\n\n    _this78 = _super91.call(this);\n    _this78.type = 'Light';\n    _this78.color = new Color(color);\n    _this78.intensity = intensity;\n    return _this78;\n  }\n\n  _createClass(Light, [{\n    key: \"dispose\",\n    value: function dispose() {// Empty here in base class; some subclasses override.\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(Light.prototype), \"copy\", this).call(this, source);\n\n      this.color.copy(source.color);\n      this.intensity = source.intensity;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(Light.prototype), \"toJSON\", this).call(this, meta);\n\n      data.object.color = this.color.getHex();\n      data.object.intensity = this.intensity;\n      if (this.groundColor !== undefined) data.object.groundColor = this.groundColor.getHex();\n      if (this.distance !== undefined) data.object.distance = this.distance;\n      if (this.angle !== undefined) data.object.angle = this.angle;\n      if (this.decay !== undefined) data.object.decay = this.decay;\n      if (this.penumbra !== undefined) data.object.penumbra = this.penumbra;\n      if (this.shadow !== undefined) data.object.shadow = this.shadow.toJSON();\n      return data;\n    }\n  }]);\n\n  return Light;\n}(Object3D);\n\nLight.prototype.isLight = true;\n\nvar HemisphereLight = /*#__PURE__*/function (_Light) {\n  _inherits(HemisphereLight, _Light);\n\n  var _super92 = _createSuper(HemisphereLight);\n\n  function HemisphereLight(skyColor, groundColor, intensity) {\n    var _this79;\n\n    _classCallCheck(this, HemisphereLight);\n\n    _this79 = _super92.call(this, skyColor, intensity);\n    _this79.type = 'HemisphereLight';\n\n    _this79.position.copy(Object3D.DefaultUp);\n\n    _this79.updateMatrix();\n\n    _this79.groundColor = new Color(groundColor);\n    return _this79;\n  }\n\n  _createClass(HemisphereLight, [{\n    key: \"copy\",\n    value: function copy(source) {\n      Light.prototype.copy.call(this, source);\n      this.groundColor.copy(source.groundColor);\n      return this;\n    }\n  }]);\n\n  return HemisphereLight;\n}(Light);\n\nHemisphereLight.prototype.isHemisphereLight = true;\n\nvar _projScreenMatrix$1 = /*@__PURE__*/new Matrix4();\n\nvar _lightPositionWorld$1 = /*@__PURE__*/new Vector3();\n\nvar _lookTarget$1 = /*@__PURE__*/new Vector3();\n\nvar LightShadow = /*#__PURE__*/function () {\n  function LightShadow(camera) {\n    _classCallCheck(this, LightShadow);\n\n    this.camera = camera;\n    this.bias = 0;\n    this.normalBias = 0;\n    this.radius = 1;\n    this.mapSize = new Vector2(512, 512);\n    this.map = null;\n    this.mapPass = null;\n    this.matrix = new Matrix4();\n    this.autoUpdate = true;\n    this.needsUpdate = false;\n    this._frustum = new Frustum();\n    this._frameExtents = new Vector2(1, 1);\n    this._viewportCount = 1;\n    this._viewports = [new Vector4(0, 0, 1, 1)];\n  }\n\n  _createClass(LightShadow, [{\n    key: \"getViewportCount\",\n    value: function getViewportCount() {\n      return this._viewportCount;\n    }\n  }, {\n    key: \"getFrustum\",\n    value: function getFrustum() {\n      return this._frustum;\n    }\n  }, {\n    key: \"updateMatrices\",\n    value: function updateMatrices(light) {\n      var shadowCamera = this.camera;\n      var shadowMatrix = this.matrix;\n\n      _lightPositionWorld$1.setFromMatrixPosition(light.matrixWorld);\n\n      shadowCamera.position.copy(_lightPositionWorld$1);\n\n      _lookTarget$1.setFromMatrixPosition(light.target.matrixWorld);\n\n      shadowCamera.lookAt(_lookTarget$1);\n      shadowCamera.updateMatrixWorld();\n\n      _projScreenMatrix$1.multiplyMatrices(shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse);\n\n      this._frustum.setFromProjectionMatrix(_projScreenMatrix$1);\n\n      shadowMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n      shadowMatrix.multiply(shadowCamera.projectionMatrix);\n      shadowMatrix.multiply(shadowCamera.matrixWorldInverse);\n    }\n  }, {\n    key: \"getViewport\",\n    value: function getViewport(viewportIndex) {\n      return this._viewports[viewportIndex];\n    }\n  }, {\n    key: \"getFrameExtents\",\n    value: function getFrameExtents() {\n      return this._frameExtents;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.map) {\n        this.map.dispose();\n      }\n\n      if (this.mapPass) {\n        this.mapPass.dispose();\n      }\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      this.camera = source.camera.clone();\n      this.bias = source.bias;\n      this.radius = source.radius;\n      this.mapSize.copy(source.mapSize);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var object = {};\n      if (this.bias !== 0) object.bias = this.bias;\n      if (this.normalBias !== 0) object.normalBias = this.normalBias;\n      if (this.radius !== 1) object.radius = this.radius;\n      if (this.mapSize.x !== 512 || this.mapSize.y !== 512) object.mapSize = this.mapSize.toArray();\n      object.camera = this.camera.toJSON(false).object;\n      delete object.camera.matrix;\n      return object;\n    }\n  }]);\n\n  return LightShadow;\n}();\n\nvar SpotLightShadow = /*#__PURE__*/function (_LightShadow) {\n  _inherits(SpotLightShadow, _LightShadow);\n\n  var _super93 = _createSuper(SpotLightShadow);\n\n  function SpotLightShadow() {\n    var _this80;\n\n    _classCallCheck(this, SpotLightShadow);\n\n    _this80 = _super93.call(this, new PerspectiveCamera(50, 1, 0.5, 500));\n    _this80.focus = 1;\n    return _this80;\n  }\n\n  _createClass(SpotLightShadow, [{\n    key: \"updateMatrices\",\n    value: function updateMatrices(light) {\n      var camera = this.camera;\n      var fov = RAD2DEG * 2 * light.angle * this.focus;\n      var aspect = this.mapSize.width / this.mapSize.height;\n      var far = light.distance || camera.far;\n\n      if (fov !== camera.fov || aspect !== camera.aspect || far !== camera.far) {\n        camera.fov = fov;\n        camera.aspect = aspect;\n        camera.far = far;\n        camera.updateProjectionMatrix();\n      }\n\n      _get(_getPrototypeOf(SpotLightShadow.prototype), \"updateMatrices\", this).call(this, light);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(SpotLightShadow.prototype), \"copy\", this).call(this, source);\n\n      this.focus = source.focus;\n      return this;\n    }\n  }]);\n\n  return SpotLightShadow;\n}(LightShadow);\n\nSpotLightShadow.prototype.isSpotLightShadow = true;\n\nvar SpotLight = /*#__PURE__*/function (_Light2) {\n  _inherits(SpotLight, _Light2);\n\n  var _super94 = _createSuper(SpotLight);\n\n  function SpotLight(color, intensity) {\n    var _this81;\n\n    var distance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var angle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Math.PI / 3;\n    var penumbra = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var decay = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n\n    _classCallCheck(this, SpotLight);\n\n    _this81 = _super94.call(this, color, intensity);\n    _this81.type = 'SpotLight';\n\n    _this81.position.copy(Object3D.DefaultUp);\n\n    _this81.updateMatrix();\n\n    _this81.target = new Object3D();\n    _this81.distance = distance;\n    _this81.angle = angle;\n    _this81.penumbra = penumbra;\n    _this81.decay = decay; // for physically correct lights, should be 2.\n\n    _this81.shadow = new SpotLightShadow();\n    return _this81;\n  }\n\n  _createClass(SpotLight, [{\n    key: \"power\",\n    get: function get() {\n      // intensity = power per solid angle.\n      // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n      return this.intensity * Math.PI;\n    },\n    set: function set(power) {\n      // intensity = power per solid angle.\n      // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n      this.intensity = power / Math.PI;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.shadow.dispose();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(SpotLight.prototype), \"copy\", this).call(this, source);\n\n      this.distance = source.distance;\n      this.angle = source.angle;\n      this.penumbra = source.penumbra;\n      this.decay = source.decay;\n      this.target = source.target.clone();\n      this.shadow = source.shadow.clone();\n      return this;\n    }\n  }]);\n\n  return SpotLight;\n}(Light);\n\nSpotLight.prototype.isSpotLight = true;\n\nvar _projScreenMatrix = /*@__PURE__*/new Matrix4();\n\nvar _lightPositionWorld = /*@__PURE__*/new Vector3();\n\nvar _lookTarget = /*@__PURE__*/new Vector3();\n\nvar PointLightShadow = /*#__PURE__*/function (_LightShadow2) {\n  _inherits(PointLightShadow, _LightShadow2);\n\n  var _super95 = _createSuper(PointLightShadow);\n\n  function PointLightShadow() {\n    var _this82;\n\n    _classCallCheck(this, PointLightShadow);\n\n    _this82 = _super95.call(this, new PerspectiveCamera(90, 1, 0.5, 500));\n    _this82._frameExtents = new Vector2(4, 2);\n    _this82._viewportCount = 6;\n    _this82._viewports = [// These viewports map a cube-map onto a 2D texture with the\n    // following orientation:\n    //\n    //  xzXZ\n    //   y Y\n    //\n    // X - Positive x direction\n    // x - Negative x direction\n    // Y - Positive y direction\n    // y - Negative y direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    // positive X\n    new Vector4(2, 1, 1, 1), // negative X\n    new Vector4(0, 1, 1, 1), // positive Z\n    new Vector4(3, 1, 1, 1), // negative Z\n    new Vector4(1, 1, 1, 1), // positive Y\n    new Vector4(3, 0, 1, 1), // negative Y\n    new Vector4(1, 0, 1, 1)];\n    _this82._cubeDirections = [new Vector3(1, 0, 0), new Vector3(-1, 0, 0), new Vector3(0, 0, 1), new Vector3(0, 0, -1), new Vector3(0, 1, 0), new Vector3(0, -1, 0)];\n    _this82._cubeUps = [new Vector3(0, 1, 0), new Vector3(0, 1, 0), new Vector3(0, 1, 0), new Vector3(0, 1, 0), new Vector3(0, 0, 1), new Vector3(0, 0, -1)];\n    return _this82;\n  }\n\n  _createClass(PointLightShadow, [{\n    key: \"updateMatrices\",\n    value: function updateMatrices(light) {\n      var viewportIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var camera = this.camera;\n      var shadowMatrix = this.matrix;\n      var far = light.distance || camera.far;\n\n      if (far !== camera.far) {\n        camera.far = far;\n        camera.updateProjectionMatrix();\n      }\n\n      _lightPositionWorld.setFromMatrixPosition(light.matrixWorld);\n\n      camera.position.copy(_lightPositionWorld);\n\n      _lookTarget.copy(camera.position);\n\n      _lookTarget.add(this._cubeDirections[viewportIndex]);\n\n      camera.up.copy(this._cubeUps[viewportIndex]);\n      camera.lookAt(_lookTarget);\n      camera.updateMatrixWorld();\n      shadowMatrix.makeTranslation(-_lightPositionWorld.x, -_lightPositionWorld.y, -_lightPositionWorld.z);\n\n      _projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\n      this._frustum.setFromProjectionMatrix(_projScreenMatrix);\n    }\n  }]);\n\n  return PointLightShadow;\n}(LightShadow);\n\nPointLightShadow.prototype.isPointLightShadow = true;\n\nvar PointLight = /*#__PURE__*/function (_Light3) {\n  _inherits(PointLight, _Light3);\n\n  var _super96 = _createSuper(PointLight);\n\n  function PointLight(color, intensity) {\n    var _this83;\n\n    var distance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var decay = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, PointLight);\n\n    _this83 = _super96.call(this, color, intensity);\n    _this83.type = 'PointLight';\n    _this83.distance = distance;\n    _this83.decay = decay; // for physically correct lights, should be 2.\n\n    _this83.shadow = new PointLightShadow();\n    return _this83;\n  }\n\n  _createClass(PointLight, [{\n    key: \"power\",\n    get: function get() {\n      // intensity = power per solid angle.\n      // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n      return this.intensity * 4 * Math.PI;\n    },\n    set: function set(power) {\n      // intensity = power per solid angle.\n      // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n      this.intensity = power / (4 * Math.PI);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.shadow.dispose();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(PointLight.prototype), \"copy\", this).call(this, source);\n\n      this.distance = source.distance;\n      this.decay = source.decay;\n      this.shadow = source.shadow.clone();\n      return this;\n    }\n  }]);\n\n  return PointLight;\n}(Light);\n\nPointLight.prototype.isPointLight = true;\n\nvar DirectionalLightShadow = /*#__PURE__*/function (_LightShadow3) {\n  _inherits(DirectionalLightShadow, _LightShadow3);\n\n  var _super97 = _createSuper(DirectionalLightShadow);\n\n  function DirectionalLightShadow() {\n    _classCallCheck(this, DirectionalLightShadow);\n\n    return _super97.call(this, new OrthographicCamera(-5, 5, 5, -5, 0.5, 500));\n  }\n\n  return DirectionalLightShadow;\n}(LightShadow);\n\nDirectionalLightShadow.prototype.isDirectionalLightShadow = true;\n\nvar DirectionalLight = /*#__PURE__*/function (_Light4) {\n  _inherits(DirectionalLight, _Light4);\n\n  var _super98 = _createSuper(DirectionalLight);\n\n  function DirectionalLight(color, intensity) {\n    var _this84;\n\n    _classCallCheck(this, DirectionalLight);\n\n    _this84 = _super98.call(this, color, intensity);\n    _this84.type = 'DirectionalLight';\n\n    _this84.position.copy(Object3D.DefaultUp);\n\n    _this84.updateMatrix();\n\n    _this84.target = new Object3D();\n    _this84.shadow = new DirectionalLightShadow();\n    return _this84;\n  }\n\n  _createClass(DirectionalLight, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.shadow.dispose();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(DirectionalLight.prototype), \"copy\", this).call(this, source);\n\n      this.target = source.target.clone();\n      this.shadow = source.shadow.clone();\n      return this;\n    }\n  }]);\n\n  return DirectionalLight;\n}(Light);\n\nDirectionalLight.prototype.isDirectionalLight = true;\n\nvar AmbientLight = /*#__PURE__*/function (_Light5) {\n  _inherits(AmbientLight, _Light5);\n\n  var _super99 = _createSuper(AmbientLight);\n\n  function AmbientLight(color, intensity) {\n    var _this85;\n\n    _classCallCheck(this, AmbientLight);\n\n    _this85 = _super99.call(this, color, intensity);\n    _this85.type = 'AmbientLight';\n    return _this85;\n  }\n\n  return AmbientLight;\n}(Light);\n\nAmbientLight.prototype.isAmbientLight = true;\n\nvar RectAreaLight = /*#__PURE__*/function (_Light6) {\n  _inherits(RectAreaLight, _Light6);\n\n  var _super100 = _createSuper(RectAreaLight);\n\n  function RectAreaLight(color, intensity) {\n    var _this86;\n\n    var width = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n    var height = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n\n    _classCallCheck(this, RectAreaLight);\n\n    _this86 = _super100.call(this, color, intensity);\n    _this86.type = 'RectAreaLight';\n    _this86.width = width;\n    _this86.height = height;\n    return _this86;\n  }\n\n  _createClass(RectAreaLight, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(RectAreaLight.prototype), \"copy\", this).call(this, source);\n\n      this.width = source.width;\n      this.height = source.height;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(RectAreaLight.prototype), \"toJSON\", this).call(this, meta);\n\n      data.object.width = this.width;\n      data.object.height = this.height;\n      return data;\n    }\n  }]);\n\n  return RectAreaLight;\n}(Light);\n\nRectAreaLight.prototype.isRectAreaLight = true;\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n// 3-band SH defined by 9 coefficients\n\nvar SphericalHarmonics3 = /*#__PURE__*/function () {\n  function SphericalHarmonics3() {\n    _classCallCheck(this, SphericalHarmonics3);\n\n    this.coefficients = [];\n\n    for (var _i250 = 0; _i250 < 9; _i250++) {\n      this.coefficients.push(new Vector3());\n    }\n  }\n\n  _createClass(SphericalHarmonics3, [{\n    key: \"set\",\n    value: function set(coefficients) {\n      for (var _i251 = 0; _i251 < 9; _i251++) {\n        this.coefficients[_i251].copy(coefficients[_i251]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"zero\",\n    value: function zero() {\n      for (var _i252 = 0; _i252 < 9; _i252++) {\n        this.coefficients[_i252].set(0, 0, 0);\n      }\n\n      return this;\n    } // get the radiance in the direction of the normal\n    // target is a Vector3\n\n  }, {\n    key: \"getAt\",\n    value: function getAt(normal, target) {\n      // normal is assumed to be unit length\n      var x = normal.x,\n          y = normal.y,\n          z = normal.z;\n      var coeff = this.coefficients; // band 0\n\n      target.copy(coeff[0]).multiplyScalar(0.282095); // band 1\n\n      target.addScaledVector(coeff[1], 0.488603 * y);\n      target.addScaledVector(coeff[2], 0.488603 * z);\n      target.addScaledVector(coeff[3], 0.488603 * x); // band 2\n\n      target.addScaledVector(coeff[4], 1.092548 * (x * y));\n      target.addScaledVector(coeff[5], 1.092548 * (y * z));\n      target.addScaledVector(coeff[6], 0.315392 * (3.0 * z * z - 1.0));\n      target.addScaledVector(coeff[7], 1.092548 * (x * z));\n      target.addScaledVector(coeff[8], 0.546274 * (x * x - y * y));\n      return target;\n    } // get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n    // target is a Vector3\n    // https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\n  }, {\n    key: \"getIrradianceAt\",\n    value: function getIrradianceAt(normal, target) {\n      // normal is assumed to be unit length\n      var x = normal.x,\n          y = normal.y,\n          z = normal.z;\n      var coeff = this.coefficients; // band 0\n\n      target.copy(coeff[0]).multiplyScalar(0.886227); // π * 0.282095\n      // band 1\n\n      target.addScaledVector(coeff[1], 2.0 * 0.511664 * y); // ( 2 * π / 3 ) * 0.488603\n\n      target.addScaledVector(coeff[2], 2.0 * 0.511664 * z);\n      target.addScaledVector(coeff[3], 2.0 * 0.511664 * x); // band 2\n\n      target.addScaledVector(coeff[4], 2.0 * 0.429043 * x * y); // ( π / 4 ) * 1.092548\n\n      target.addScaledVector(coeff[5], 2.0 * 0.429043 * y * z);\n      target.addScaledVector(coeff[6], 0.743125 * z * z - 0.247708); // ( π / 4 ) * 0.315392 * 3\n\n      target.addScaledVector(coeff[7], 2.0 * 0.429043 * x * z);\n      target.addScaledVector(coeff[8], 0.429043 * (x * x - y * y)); // ( π / 4 ) * 0.546274\n\n      return target;\n    }\n  }, {\n    key: \"add\",\n    value: function add(sh) {\n      for (var _i253 = 0; _i253 < 9; _i253++) {\n        this.coefficients[_i253].add(sh.coefficients[_i253]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"addScaledSH\",\n    value: function addScaledSH(sh, s) {\n      for (var _i254 = 0; _i254 < 9; _i254++) {\n        this.coefficients[_i254].addScaledVector(sh.coefficients[_i254], s);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(s) {\n      for (var _i255 = 0; _i255 < 9; _i255++) {\n        this.coefficients[_i255].multiplyScalar(s);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(sh, alpha) {\n      for (var _i256 = 0; _i256 < 9; _i256++) {\n        this.coefficients[_i256].lerp(sh.coefficients[_i256], alpha);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(sh) {\n      for (var _i257 = 0; _i257 < 9; _i257++) {\n        if (!this.coefficients[_i257].equals(sh.coefficients[_i257])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(sh) {\n      return this.set(sh.coefficients);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var coefficients = this.coefficients;\n\n      for (var _i258 = 0; _i258 < 9; _i258++) {\n        coefficients[_i258].fromArray(array, offset + _i258 * 3);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var coefficients = this.coefficients;\n\n      for (var _i259 = 0; _i259 < 9; _i259++) {\n        coefficients[_i259].toArray(array, offset + _i259 * 3);\n      }\n\n      return array;\n    } // evaluate the basis functions\n    // shBasis is an Array[ 9 ]\n\n  }], [{\n    key: \"getBasisAt\",\n    value: function getBasisAt(normal, shBasis) {\n      // normal is assumed to be unit length\n      var x = normal.x,\n          y = normal.y,\n          z = normal.z; // band 0\n\n      shBasis[0] = 0.282095; // band 1\n\n      shBasis[1] = 0.488603 * y;\n      shBasis[2] = 0.488603 * z;\n      shBasis[3] = 0.488603 * x; // band 2\n\n      shBasis[4] = 1.092548 * x * y;\n      shBasis[5] = 1.092548 * y * z;\n      shBasis[6] = 0.315392 * (3 * z * z - 1);\n      shBasis[7] = 1.092548 * x * z;\n      shBasis[8] = 0.546274 * (x * x - y * y);\n    }\n  }]);\n\n  return SphericalHarmonics3;\n}();\n\nSphericalHarmonics3.prototype.isSphericalHarmonics3 = true;\n\nvar LightProbe = /*#__PURE__*/function (_Light7) {\n  _inherits(LightProbe, _Light7);\n\n  var _super101 = _createSuper(LightProbe);\n\n  function LightProbe() {\n    var _this87;\n\n    var sh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new SphericalHarmonics3();\n    var intensity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    _classCallCheck(this, LightProbe);\n\n    _this87 = _super101.call(this, undefined, intensity);\n    _this87.sh = sh;\n    return _this87;\n  }\n\n  _createClass(LightProbe, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(LightProbe.prototype), \"copy\", this).call(this, source);\n\n      this.sh.copy(source.sh);\n      return this;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      this.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\n      this.sh.fromArray(json.sh);\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var data = _get(_getPrototypeOf(LightProbe.prototype), \"toJSON\", this).call(this, meta);\n\n      data.object.sh = this.sh.toArray();\n      return data;\n    }\n  }]);\n\n  return LightProbe;\n}(Light);\n\nLightProbe.prototype.isLightProbe = true;\n\nvar LoaderUtils = /*#__PURE__*/function () {\n  function LoaderUtils() {\n    _classCallCheck(this, LoaderUtils);\n  }\n\n  _createClass(LoaderUtils, null, [{\n    key: \"decodeText\",\n    value: function decodeText(array) {\n      if (typeof TextDecoder !== 'undefined') {\n        return new TextDecoder().decode(array);\n      } // Avoid the String.fromCharCode.apply(null, array) shortcut, which\n      // throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\n      var s = '';\n\n      for (var _i260 = 0, il = array.length; _i260 < il; _i260++) {\n        // Implicitly assumes little-endian.\n        s += String.fromCharCode(array[_i260]);\n      }\n\n      try {\n        // merges multi-byte utf-8 characters.\n        return decodeURIComponent(escape(s));\n      } catch (e) {\n        // see #16358\n        return s;\n      }\n    }\n  }, {\n    key: \"extractUrlBase\",\n    value: function extractUrlBase(url) {\n      var index = url.lastIndexOf('/');\n      if (index === -1) return './';\n      return url.substr(0, index + 1);\n    }\n  }]);\n\n  return LoaderUtils;\n}();\n\nvar InstancedBufferGeometry = /*#__PURE__*/function (_BufferGeometry5) {\n  _inherits(InstancedBufferGeometry, _BufferGeometry5);\n\n  var _super102 = _createSuper(InstancedBufferGeometry);\n\n  function InstancedBufferGeometry() {\n    var _this88;\n\n    _classCallCheck(this, InstancedBufferGeometry);\n\n    _this88 = _super102.call(this);\n    _this88.type = 'InstancedBufferGeometry';\n    _this88.instanceCount = Infinity;\n    return _this88;\n  }\n\n  _createClass(InstancedBufferGeometry, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(InstancedBufferGeometry.prototype), \"copy\", this).call(this, source);\n\n      this.instanceCount = source.instanceCount;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(InstancedBufferGeometry.prototype), \"toJSON\", this).call(this, this);\n\n      data.instanceCount = this.instanceCount;\n      data.isInstancedBufferGeometry = true;\n      return data;\n    }\n  }]);\n\n  return InstancedBufferGeometry;\n}(BufferGeometry);\n\nInstancedBufferGeometry.prototype.isInstancedBufferGeometry = true;\n\nvar InstancedBufferAttribute = /*#__PURE__*/function (_BufferAttribute5) {\n  _inherits(InstancedBufferAttribute, _BufferAttribute5);\n\n  var _super103 = _createSuper(InstancedBufferAttribute);\n\n  function InstancedBufferAttribute(array, itemSize, normalized) {\n    var _this89;\n\n    var meshPerAttribute = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, InstancedBufferAttribute);\n\n    if (typeof normalized === 'number') {\n      meshPerAttribute = normalized;\n      normalized = false;\n      console.error('THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.');\n    }\n\n    _this89 = _super103.call(this, array, itemSize, normalized);\n    _this89.meshPerAttribute = meshPerAttribute;\n    return _this89;\n  }\n\n  _createClass(InstancedBufferAttribute, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(InstancedBufferAttribute.prototype), \"copy\", this).call(this, source);\n\n      this.meshPerAttribute = source.meshPerAttribute;\n      return this;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var data = _get(_getPrototypeOf(InstancedBufferAttribute.prototype), \"toJSON\", this).call(this);\n\n      data.meshPerAttribute = this.meshPerAttribute;\n      data.isInstancedBufferAttribute = true;\n      return data;\n    }\n  }]);\n\n  return InstancedBufferAttribute;\n}(BufferAttribute);\n\nInstancedBufferAttribute.prototype.isInstancedBufferAttribute = true;\n\nvar ImageBitmapLoader = /*#__PURE__*/function (_Loader7) {\n  _inherits(ImageBitmapLoader, _Loader7);\n\n  var _super104 = _createSuper(ImageBitmapLoader);\n\n  function ImageBitmapLoader(manager) {\n    var _this90;\n\n    _classCallCheck(this, ImageBitmapLoader);\n\n    _this90 = _super104.call(this, manager);\n\n    if (typeof createImageBitmap === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: createImageBitmap() not supported.');\n    }\n\n    if (typeof fetch === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: fetch() not supported.');\n    }\n\n    _this90.options = {\n      premultiplyAlpha: 'none'\n    };\n    return _this90;\n  }\n\n  _createClass(ImageBitmapLoader, [{\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      this.options = options;\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      if (url === undefined) url = '';\n      if (this.path !== undefined) url = this.path + url;\n      url = this.manager.resolveURL(url);\n      var scope = this;\n      var cached = Cache.get(url);\n\n      if (cached !== undefined) {\n        scope.manager.itemStart(url);\n        setTimeout(function () {\n          if (onLoad) onLoad(cached);\n          scope.manager.itemEnd(url);\n        }, 0);\n        return cached;\n      }\n\n      var fetchOptions = {};\n      fetchOptions.credentials = this.crossOrigin === 'anonymous' ? 'same-origin' : 'include';\n      fetchOptions.headers = this.requestHeader;\n      fetch(url, fetchOptions).then(function (res) {\n        return res.blob();\n      }).then(function (blob) {\n        return createImageBitmap(blob, Object.assign(scope.options, {\n          colorSpaceConversion: 'none'\n        }));\n      }).then(function (imageBitmap) {\n        Cache.add(url, imageBitmap);\n        if (onLoad) onLoad(imageBitmap);\n        scope.manager.itemEnd(url);\n      }).catch(function (e) {\n        if (onError) onError(e);\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      });\n      scope.manager.itemStart(url);\n    }\n  }]);\n\n  return ImageBitmapLoader;\n}(Loader);\n\nImageBitmapLoader.prototype.isImageBitmapLoader = true;\n\nvar _context;\n\nvar AudioContext = {\n  getContext: function getContext() {\n    if (_context === undefined) {\n      _context = new (window.AudioContext || window.webkitAudioContext)();\n    }\n\n    return _context;\n  },\n  setContext: function setContext(value) {\n    _context = value;\n  }\n};\n\nvar AudioLoader = /*#__PURE__*/function (_Loader8) {\n  _inherits(AudioLoader, _Loader8);\n\n  var _super105 = _createSuper(AudioLoader);\n\n  function AudioLoader(manager) {\n    _classCallCheck(this, AudioLoader);\n\n    return _super105.call(this, manager);\n  }\n\n  _createClass(AudioLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new FileLoader(this.manager);\n      loader.setResponseType('arraybuffer');\n      loader.setPath(this.path);\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (buffer) {\n        try {\n          // Create a copy of the buffer. The `decodeAudioData` method\n          // detaches the buffer when complete, preventing reuse.\n          var bufferCopy = buffer.slice(0);\n          var context = AudioContext.getContext();\n          context.decodeAudioData(bufferCopy, function (audioBuffer) {\n            onLoad(audioBuffer);\n          });\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n\n          scope.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }]);\n\n  return AudioLoader;\n}(Loader);\n\nvar HemisphereLightProbe = /*#__PURE__*/function (_LightProbe) {\n  _inherits(HemisphereLightProbe, _LightProbe);\n\n  var _super106 = _createSuper(HemisphereLightProbe);\n\n  function HemisphereLightProbe(skyColor, groundColor) {\n    var _this91;\n\n    var intensity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    _classCallCheck(this, HemisphereLightProbe);\n\n    _this91 = _super106.call(this, undefined, intensity);\n    var color1 = new Color().set(skyColor);\n    var color2 = new Color().set(groundColor);\n    var sky = new Vector3(color1.r, color1.g, color1.b);\n    var ground = new Vector3(color2.r, color2.g, color2.b); // without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\n    var c0 = Math.sqrt(Math.PI);\n    var c1 = c0 * Math.sqrt(0.75);\n\n    _this91.sh.coefficients[0].copy(sky).add(ground).multiplyScalar(c0);\n\n    _this91.sh.coefficients[1].copy(sky).sub(ground).multiplyScalar(c1);\n\n    return _this91;\n  }\n\n  return HemisphereLightProbe;\n}(LightProbe);\n\nHemisphereLightProbe.prototype.isHemisphereLightProbe = true;\n\nvar AmbientLightProbe = /*#__PURE__*/function (_LightProbe2) {\n  _inherits(AmbientLightProbe, _LightProbe2);\n\n  var _super107 = _createSuper(AmbientLightProbe);\n\n  function AmbientLightProbe(color) {\n    var _this92;\n\n    var intensity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    _classCallCheck(this, AmbientLightProbe);\n\n    _this92 = _super107.call(this, undefined, intensity);\n    var color1 = new Color().set(color); // without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\n    _this92.sh.coefficients[0].set(color1.r, color1.g, color1.b).multiplyScalar(2 * Math.sqrt(Math.PI));\n\n    return _this92;\n  }\n\n  return AmbientLightProbe;\n}(LightProbe);\n\nAmbientLightProbe.prototype.isAmbientLightProbe = true;\n\nvar Audio = /*#__PURE__*/function (_Object3D11) {\n  _inherits(Audio, _Object3D11);\n\n  var _super108 = _createSuper(Audio);\n\n  function Audio(listener) {\n    var _this93;\n\n    _classCallCheck(this, Audio);\n\n    _this93 = _super108.call(this);\n    _this93.type = 'Audio';\n    _this93.listener = listener;\n    _this93.context = listener.context;\n    _this93.gain = _this93.context.createGain();\n\n    _this93.gain.connect(listener.getInput());\n\n    _this93.autoplay = false;\n    _this93.buffer = null;\n    _this93.detune = 0;\n    _this93.loop = false;\n    _this93.loopStart = 0;\n    _this93.loopEnd = 0;\n    _this93.offset = 0;\n    _this93.duration = undefined;\n    _this93.playbackRate = 1;\n    _this93.isPlaying = false;\n    _this93.hasPlaybackControl = true;\n    _this93.source = null;\n    _this93.sourceType = 'empty';\n    _this93._startedAt = 0;\n    _this93._progress = 0;\n    _this93._connected = false;\n    _this93.filters = [];\n    return _this93;\n  }\n\n  _createClass(Audio, [{\n    key: \"getOutput\",\n    value: function getOutput() {\n      return this.gain;\n    }\n  }, {\n    key: \"setNodeSource\",\n    value: function setNodeSource(audioNode) {\n      this.hasPlaybackControl = false;\n      this.sourceType = 'audioNode';\n      this.source = audioNode;\n      this.connect();\n      return this;\n    }\n  }, {\n    key: \"setMediaElementSource\",\n    value: function setMediaElementSource(mediaElement) {\n      this.hasPlaybackControl = false;\n      this.sourceType = 'mediaNode';\n      this.source = this.context.createMediaElementSource(mediaElement);\n      this.connect();\n      return this;\n    }\n  }, {\n    key: \"setMediaStreamSource\",\n    value: function setMediaStreamSource(mediaStream) {\n      this.hasPlaybackControl = false;\n      this.sourceType = 'mediaStreamNode';\n      this.source = this.context.createMediaStreamSource(mediaStream);\n      this.connect();\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(audioBuffer) {\n      this.buffer = audioBuffer;\n      this.sourceType = 'buffer';\n      if (this.autoplay) this.play();\n      return this;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (this.isPlaying === true) {\n        console.warn('THREE.Audio: Audio is already playing.');\n        return;\n      }\n\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return;\n      }\n\n      this._startedAt = this.context.currentTime + delay;\n      var source = this.context.createBufferSource();\n      source.buffer = this.buffer;\n      source.loop = this.loop;\n      source.loopStart = this.loopStart;\n      source.loopEnd = this.loopEnd;\n      source.onended = this.onEnded.bind(this);\n      source.start(this._startedAt, this._progress + this.offset, this.duration);\n      this.isPlaying = true;\n      this.source = source;\n      this.setDetune(this.detune);\n      this.setPlaybackRate(this.playbackRate);\n      return this.connect();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return;\n      }\n\n      if (this.isPlaying === true) {\n        // update current progress\n        this._progress += Math.max(this.context.currentTime - this._startedAt, 0) * this.playbackRate;\n\n        if (this.loop === true) {\n          // ensure _progress does not exceed duration with looped audios\n          this._progress = this._progress % (this.duration || this.buffer.duration);\n        }\n\n        this.source.stop();\n        this.source.onended = null;\n        this.isPlaying = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return;\n      }\n\n      this._progress = 0;\n      this.source.stop();\n      this.source.onended = null;\n      this.isPlaying = false;\n      return this;\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      if (this.filters.length > 0) {\n        this.source.connect(this.filters[0]);\n\n        for (var _i261 = 1, _l79 = this.filters.length; _i261 < _l79; _i261++) {\n          this.filters[_i261 - 1].connect(this.filters[_i261]);\n        }\n\n        this.filters[this.filters.length - 1].connect(this.getOutput());\n      } else {\n        this.source.connect(this.getOutput());\n      }\n\n      this._connected = true;\n      return this;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.filters.length > 0) {\n        this.source.disconnect(this.filters[0]);\n\n        for (var _i262 = 1, _l80 = this.filters.length; _i262 < _l80; _i262++) {\n          this.filters[_i262 - 1].disconnect(this.filters[_i262]);\n        }\n\n        this.filters[this.filters.length - 1].disconnect(this.getOutput());\n      } else {\n        this.source.disconnect(this.getOutput());\n      }\n\n      this._connected = false;\n      return this;\n    }\n  }, {\n    key: \"getFilters\",\n    value: function getFilters() {\n      return this.filters;\n    }\n  }, {\n    key: \"setFilters\",\n    value: function setFilters(value) {\n      if (!value) value = [];\n\n      if (this._connected === true) {\n        this.disconnect();\n        this.filters = value.slice();\n        this.connect();\n      } else {\n        this.filters = value.slice();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setDetune\",\n    value: function setDetune(value) {\n      this.detune = value;\n      if (this.source.detune === undefined) return; // only set detune when available\n\n      if (this.isPlaying === true) {\n        this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, 0.01);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getDetune\",\n    value: function getDetune() {\n      return this.detune;\n    }\n  }, {\n    key: \"getFilter\",\n    value: function getFilter() {\n      return this.getFilters()[0];\n    }\n  }, {\n    key: \"setFilter\",\n    value: function setFilter(filter) {\n      return this.setFilters(filter ? [filter] : []);\n    }\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(value) {\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return;\n      }\n\n      this.playbackRate = value;\n\n      if (this.isPlaying === true) {\n        this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, 0.01);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate;\n    }\n  }, {\n    key: \"onEnded\",\n    value: function onEnded() {\n      this.isPlaying = false;\n    }\n  }, {\n    key: \"getLoop\",\n    value: function getLoop() {\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return false;\n      }\n\n      return this.loop;\n    }\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(value) {\n      if (this.hasPlaybackControl === false) {\n        console.warn('THREE.Audio: this Audio has no playback control.');\n        return;\n      }\n\n      this.loop = value;\n\n      if (this.isPlaying === true) {\n        this.source.loop = this.loop;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setLoopStart\",\n    value: function setLoopStart(value) {\n      this.loopStart = value;\n      return this;\n    }\n  }, {\n    key: \"setLoopEnd\",\n    value: function setLoopEnd(value) {\n      this.loopEnd = value;\n      return this;\n    }\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.gain.gain.value;\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(value) {\n      this.gain.gain.setTargetAtTime(value, this.context.currentTime, 0.01);\n      return this;\n    }\n  }]);\n\n  return Audio;\n}(Object3D);\n\nvar PropertyMixer = /*#__PURE__*/function () {\n  function PropertyMixer(binding, typeName, valueSize) {\n    _classCallCheck(this, PropertyMixer);\n\n    this.binding = binding;\n    this.valueSize = valueSize;\n    var mixFunction, mixFunctionAdditive, setIdentity; // buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n    //\n    // interpolators can use .buffer as their .result\n    // the data then goes to 'incoming'\n    //\n    // 'accu0' and 'accu1' are used frame-interleaved for\n    // the cumulative result and are compared to detect\n    // changes\n    //\n    // 'orig' stores the original state of the property\n    //\n    // 'add' is used for additive cumulative results\n    //\n    // 'work' is optional and is only present for quaternion types. It is used\n    // to store intermediate quaternion multiplication results\n\n    switch (typeName) {\n      case 'quaternion':\n        mixFunction = this._slerp;\n        mixFunctionAdditive = this._slerpAdditive;\n        setIdentity = this._setAdditiveIdentityQuaternion;\n        this.buffer = new Float64Array(valueSize * 6);\n        this._workIndex = 5;\n        break;\n\n      case 'string':\n      case 'bool':\n        mixFunction = this._select; // Use the regular mix function and for additive on these types,\n        // additive is not relevant for non-numeric types\n\n        mixFunctionAdditive = this._select;\n        setIdentity = this._setAdditiveIdentityOther;\n        this.buffer = new Array(valueSize * 5);\n        break;\n\n      default:\n        mixFunction = this._lerp;\n        mixFunctionAdditive = this._lerpAdditive;\n        setIdentity = this._setAdditiveIdentityNumeric;\n        this.buffer = new Float64Array(valueSize * 5);\n    }\n\n    this._mixBufferRegion = mixFunction;\n    this._mixBufferRegionAdditive = mixFunctionAdditive;\n    this._setIdentity = setIdentity;\n    this._origIndex = 3;\n    this._addIndex = 4;\n    this.cumulativeWeight = 0;\n    this.cumulativeWeightAdditive = 0;\n    this.useCount = 0;\n    this.referenceCount = 0;\n  } // accumulate data in the 'incoming' region into 'accu<i>'\n\n\n  _createClass(PropertyMixer, [{\n    key: \"accumulate\",\n    value: function accumulate(accuIndex, weight) {\n      // note: happily accumulating nothing when weight = 0, the caller knows\n      // the weight and shouldn't have made the call in the first place\n      var buffer = this.buffer,\n          stride = this.valueSize,\n          offset = accuIndex * stride + stride;\n      var currentWeight = this.cumulativeWeight;\n\n      if (currentWeight === 0) {\n        // accuN := incoming * weight\n        for (var _i263 = 0; _i263 !== stride; ++_i263) {\n          buffer[offset + _i263] = buffer[_i263];\n        }\n\n        currentWeight = weight;\n      } else {\n        // accuN := accuN + incoming * weight\n        currentWeight += weight;\n        var mix = weight / currentWeight;\n\n        this._mixBufferRegion(buffer, offset, 0, mix, stride);\n      }\n\n      this.cumulativeWeight = currentWeight;\n    } // accumulate data in the 'incoming' region into 'add'\n\n  }, {\n    key: \"accumulateAdditive\",\n    value: function accumulateAdditive(weight) {\n      var buffer = this.buffer,\n          stride = this.valueSize,\n          offset = stride * this._addIndex;\n\n      if (this.cumulativeWeightAdditive === 0) {\n        // add = identity\n        this._setIdentity();\n      } // add := add + incoming * weight\n\n\n      this._mixBufferRegionAdditive(buffer, offset, 0, weight, stride);\n\n      this.cumulativeWeightAdditive += weight;\n    } // apply the state of 'accu<i>' to the binding when accus differ\n\n  }, {\n    key: \"apply\",\n    value: function apply(accuIndex) {\n      var stride = this.valueSize,\n          buffer = this.buffer,\n          offset = accuIndex * stride + stride,\n          weight = this.cumulativeWeight,\n          weightAdditive = this.cumulativeWeightAdditive,\n          binding = this.binding;\n      this.cumulativeWeight = 0;\n      this.cumulativeWeightAdditive = 0;\n\n      if (weight < 1) {\n        // accuN := accuN + original * ( 1 - cumulativeWeight )\n        var originalValueOffset = stride * this._origIndex;\n\n        this._mixBufferRegion(buffer, offset, originalValueOffset, 1 - weight, stride);\n      }\n\n      if (weightAdditive > 0) {\n        // accuN := accuN + additive accuN\n        this._mixBufferRegionAdditive(buffer, offset, this._addIndex * stride, 1, stride);\n      }\n\n      for (var _i264 = stride, _e2 = stride + stride; _i264 !== _e2; ++_i264) {\n        if (buffer[_i264] !== buffer[_i264 + stride]) {\n          // value has changed -> update scene graph\n          binding.setValue(buffer, offset);\n          break;\n        }\n      }\n    } // remember the state of the bound property and copy it to both accus\n\n  }, {\n    key: \"saveOriginalState\",\n    value: function saveOriginalState() {\n      var binding = this.binding;\n      var buffer = this.buffer,\n          stride = this.valueSize,\n          originalValueOffset = stride * this._origIndex;\n      binding.getValue(buffer, originalValueOffset); // accu[0..1] := orig -- initially detect changes against the original\n\n      for (var _i265 = stride, _e3 = originalValueOffset; _i265 !== _e3; ++_i265) {\n        buffer[_i265] = buffer[originalValueOffset + _i265 % stride];\n      } // Add to identity for additive\n\n\n      this._setIdentity();\n\n      this.cumulativeWeight = 0;\n      this.cumulativeWeightAdditive = 0;\n    } // apply the state previously taken via 'saveOriginalState' to the binding\n\n  }, {\n    key: \"restoreOriginalState\",\n    value: function restoreOriginalState() {\n      var originalValueOffset = this.valueSize * 3;\n      this.binding.setValue(this.buffer, originalValueOffset);\n    }\n  }, {\n    key: \"_setAdditiveIdentityNumeric\",\n    value: function _setAdditiveIdentityNumeric() {\n      var startIndex = this._addIndex * this.valueSize;\n      var endIndex = startIndex + this.valueSize;\n\n      for (var _i266 = startIndex; _i266 < endIndex; _i266++) {\n        this.buffer[_i266] = 0;\n      }\n    }\n  }, {\n    key: \"_setAdditiveIdentityQuaternion\",\n    value: function _setAdditiveIdentityQuaternion() {\n      this._setAdditiveIdentityNumeric();\n\n      this.buffer[this._addIndex * this.valueSize + 3] = 1;\n    }\n  }, {\n    key: \"_setAdditiveIdentityOther\",\n    value: function _setAdditiveIdentityOther() {\n      var startIndex = this._origIndex * this.valueSize;\n      var targetIndex = this._addIndex * this.valueSize;\n\n      for (var _i267 = 0; _i267 < this.valueSize; _i267++) {\n        this.buffer[targetIndex + _i267] = this.buffer[startIndex + _i267];\n      }\n    } // mix functions\n\n  }, {\n    key: \"_select\",\n    value: function _select(buffer, dstOffset, srcOffset, t, stride) {\n      if (t >= 0.5) {\n        for (var _i268 = 0; _i268 !== stride; ++_i268) {\n          buffer[dstOffset + _i268] = buffer[srcOffset + _i268];\n        }\n      }\n    }\n  }, {\n    key: \"_slerp\",\n    value: function _slerp(buffer, dstOffset, srcOffset, t) {\n      Quaternion.slerpFlat(buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t);\n    }\n  }, {\n    key: \"_slerpAdditive\",\n    value: function _slerpAdditive(buffer, dstOffset, srcOffset, t, stride) {\n      var workOffset = this._workIndex * stride; // Store result in intermediate buffer offset\n\n      Quaternion.multiplyQuaternionsFlat(buffer, workOffset, buffer, dstOffset, buffer, srcOffset); // Slerp to the intermediate result\n\n      Quaternion.slerpFlat(buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t);\n    }\n  }, {\n    key: \"_lerp\",\n    value: function _lerp(buffer, dstOffset, srcOffset, t, stride) {\n      var s = 1 - t;\n\n      for (var _i269 = 0; _i269 !== stride; ++_i269) {\n        var j = dstOffset + _i269;\n        buffer[j] = buffer[j] * s + buffer[srcOffset + _i269] * t;\n      }\n    }\n  }, {\n    key: \"_lerpAdditive\",\n    value: function _lerpAdditive(buffer, dstOffset, srcOffset, t, stride) {\n      for (var _i270 = 0; _i270 !== stride; ++_i270) {\n        var j = dstOffset + _i270;\n        buffer[j] = buffer[j] + buffer[srcOffset + _i270] * t;\n      }\n    }\n  }]);\n\n  return PropertyMixer;\n}(); // Characters [].:/ are reserved for track binding syntax.\n\n\nvar _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\n\nvar _reservedRe = new RegExp('[' + _RESERVED_CHARS_RE + ']', 'g'); // Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\n\n\nvar _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\n\nvar _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace('\\\\.', '') + ']'; // Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\n\n\nvar _directoryRe = /((?:WC+[\\/:])*)/.source.replace('WC', _wordChar); // Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\n\n\nvar _nodeRe = /(WCOD+)?/.source.replace('WCOD', _wordCharOrDot); // Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\n\n\nvar _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace('WC', _wordChar); // Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\n\n\nvar _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace('WC', _wordChar);\n\nvar _trackRe = new RegExp('' + '^' + _directoryRe + _nodeRe + _objectRe + _propertyRe + '$');\n\nvar _supportedObjectNames = ['material', 'materials', 'bones'];\n\nvar Composite = /*#__PURE__*/function () {\n  function Composite(targetGroup, path, optionalParsedPath) {\n    _classCallCheck(this, Composite);\n\n    var parsedPath = optionalParsedPath || PropertyBinding.parseTrackName(path);\n    this._targetGroup = targetGroup;\n    this._bindings = targetGroup.subscribe_(path, parsedPath);\n  }\n\n  _createClass(Composite, [{\n    key: \"getValue\",\n    value: function getValue(array, offset) {\n      this.bind(); // bind all binding\n\n      var firstValidIndex = this._targetGroup.nCachedObjects_,\n          binding = this._bindings[firstValidIndex]; // and only call .getValue on the first\n\n      if (binding !== undefined) binding.getValue(array, offset);\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(array, offset) {\n      var bindings = this._bindings;\n\n      for (var _i271 = this._targetGroup.nCachedObjects_, _n13 = bindings.length; _i271 !== _n13; ++_i271) {\n        bindings[_i271].setValue(array, offset);\n      }\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var bindings = this._bindings;\n\n      for (var _i272 = this._targetGroup.nCachedObjects_, _n14 = bindings.length; _i272 !== _n14; ++_i272) {\n        bindings[_i272].bind();\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var bindings = this._bindings;\n\n      for (var _i273 = this._targetGroup.nCachedObjects_, _n15 = bindings.length; _i273 !== _n15; ++_i273) {\n        bindings[_i273].unbind();\n      }\n    }\n  }]);\n\n  return Composite;\n}(); // Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\n\n\nvar PropertyBinding = /*#__PURE__*/function () {\n  function PropertyBinding(rootNode, path, parsedPath) {\n    _classCallCheck(this, PropertyBinding);\n\n    this.path = path;\n    this.parsedPath = parsedPath || PropertyBinding.parseTrackName(path);\n    this.node = PropertyBinding.findNode(rootNode, this.parsedPath.nodeName) || rootNode;\n    this.rootNode = rootNode; // initial state of these methods that calls 'bind'\n\n    this.getValue = this._getValue_unbound;\n    this.setValue = this._setValue_unbound;\n  }\n\n  _createClass(PropertyBinding, [{\n    key: \"_getValue_unavailable\",\n    value: // these are used to \"bind\" a nonexistent property\n    function _getValue_unavailable() {}\n  }, {\n    key: \"_setValue_unavailable\",\n    value: function _setValue_unavailable() {} // Getters\n\n  }, {\n    key: \"_getValue_direct\",\n    value: function _getValue_direct(buffer, offset) {\n      buffer[offset] = this.node[this.propertyName];\n    }\n  }, {\n    key: \"_getValue_array\",\n    value: function _getValue_array(buffer, offset) {\n      var source = this.resolvedProperty;\n\n      for (var _i274 = 0, _n16 = source.length; _i274 !== _n16; ++_i274) {\n        buffer[offset++] = source[_i274];\n      }\n    }\n  }, {\n    key: \"_getValue_arrayElement\",\n    value: function _getValue_arrayElement(buffer, offset) {\n      buffer[offset] = this.resolvedProperty[this.propertyIndex];\n    }\n  }, {\n    key: \"_getValue_toArray\",\n    value: function _getValue_toArray(buffer, offset) {\n      this.resolvedProperty.toArray(buffer, offset);\n    } // Direct\n\n  }, {\n    key: \"_setValue_direct\",\n    value: function _setValue_direct(buffer, offset) {\n      this.targetObject[this.propertyName] = buffer[offset];\n    }\n  }, {\n    key: \"_setValue_direct_setNeedsUpdate\",\n    value: function _setValue_direct_setNeedsUpdate(buffer, offset) {\n      this.targetObject[this.propertyName] = buffer[offset];\n      this.targetObject.needsUpdate = true;\n    }\n  }, {\n    key: \"_setValue_direct_setMatrixWorldNeedsUpdate\",\n    value: function _setValue_direct_setMatrixWorldNeedsUpdate(buffer, offset) {\n      this.targetObject[this.propertyName] = buffer[offset];\n      this.targetObject.matrixWorldNeedsUpdate = true;\n    } // EntireArray\n\n  }, {\n    key: \"_setValue_array\",\n    value: function _setValue_array(buffer, offset) {\n      var dest = this.resolvedProperty;\n\n      for (var _i275 = 0, _n17 = dest.length; _i275 !== _n17; ++_i275) {\n        dest[_i275] = buffer[offset++];\n      }\n    }\n  }, {\n    key: \"_setValue_array_setNeedsUpdate\",\n    value: function _setValue_array_setNeedsUpdate(buffer, offset) {\n      var dest = this.resolvedProperty;\n\n      for (var _i276 = 0, _n18 = dest.length; _i276 !== _n18; ++_i276) {\n        dest[_i276] = buffer[offset++];\n      }\n\n      this.targetObject.needsUpdate = true;\n    }\n  }, {\n    key: \"_setValue_array_setMatrixWorldNeedsUpdate\",\n    value: function _setValue_array_setMatrixWorldNeedsUpdate(buffer, offset) {\n      var dest = this.resolvedProperty;\n\n      for (var _i277 = 0, _n19 = dest.length; _i277 !== _n19; ++_i277) {\n        dest[_i277] = buffer[offset++];\n      }\n\n      this.targetObject.matrixWorldNeedsUpdate = true;\n    } // ArrayElement\n\n  }, {\n    key: \"_setValue_arrayElement\",\n    value: function _setValue_arrayElement(buffer, offset) {\n      this.resolvedProperty[this.propertyIndex] = buffer[offset];\n    }\n  }, {\n    key: \"_setValue_arrayElement_setNeedsUpdate\",\n    value: function _setValue_arrayElement_setNeedsUpdate(buffer, offset) {\n      this.resolvedProperty[this.propertyIndex] = buffer[offset];\n      this.targetObject.needsUpdate = true;\n    }\n  }, {\n    key: \"_setValue_arrayElement_setMatrixWorldNeedsUpdate\",\n    value: function _setValue_arrayElement_setMatrixWorldNeedsUpdate(buffer, offset) {\n      this.resolvedProperty[this.propertyIndex] = buffer[offset];\n      this.targetObject.matrixWorldNeedsUpdate = true;\n    } // HasToFromArray\n\n  }, {\n    key: \"_setValue_fromArray\",\n    value: function _setValue_fromArray(buffer, offset) {\n      this.resolvedProperty.fromArray(buffer, offset);\n    }\n  }, {\n    key: \"_setValue_fromArray_setNeedsUpdate\",\n    value: function _setValue_fromArray_setNeedsUpdate(buffer, offset) {\n      this.resolvedProperty.fromArray(buffer, offset);\n      this.targetObject.needsUpdate = true;\n    }\n  }, {\n    key: \"_setValue_fromArray_setMatrixWorldNeedsUpdate\",\n    value: function _setValue_fromArray_setMatrixWorldNeedsUpdate(buffer, offset) {\n      this.resolvedProperty.fromArray(buffer, offset);\n      this.targetObject.matrixWorldNeedsUpdate = true;\n    }\n  }, {\n    key: \"_getValue_unbound\",\n    value: function _getValue_unbound(targetArray, offset) {\n      this.bind();\n      this.getValue(targetArray, offset);\n    }\n  }, {\n    key: \"_setValue_unbound\",\n    value: function _setValue_unbound(sourceArray, offset) {\n      this.bind();\n      this.setValue(sourceArray, offset);\n    } // create getter / setter pair for a property in the scene graph\n\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var targetObject = this.node;\n      var parsedPath = this.parsedPath;\n      var objectName = parsedPath.objectName;\n      var propertyName = parsedPath.propertyName;\n      var propertyIndex = parsedPath.propertyIndex;\n\n      if (!targetObject) {\n        targetObject = PropertyBinding.findNode(this.rootNode, parsedPath.nodeName) || this.rootNode;\n        this.node = targetObject;\n      } // set fail state so we can just 'return' on error\n\n\n      this.getValue = this._getValue_unavailable;\n      this.setValue = this._setValue_unavailable; // ensure there is a value node\n\n      if (!targetObject) {\n        console.error('THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.');\n        return;\n      }\n\n      if (objectName) {\n        var objectIndex = parsedPath.objectIndex; // special cases were we need to reach deeper into the hierarchy to get the face materials....\n\n        switch (objectName) {\n          case 'materials':\n            if (!targetObject.material) {\n              console.error('THREE.PropertyBinding: Can not bind to material as node does not have a material.', this);\n              return;\n            }\n\n            if (!targetObject.material.materials) {\n              console.error('THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this);\n              return;\n            }\n\n            targetObject = targetObject.material.materials;\n            break;\n\n          case 'bones':\n            if (!targetObject.skeleton) {\n              console.error('THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this);\n              return;\n            } // potential future optimization: skip this if propertyIndex is already an integer\n            // and convert the integer string to a true integer.\n\n\n            targetObject = targetObject.skeleton.bones; // support resolving morphTarget names into indices.\n\n            for (var _i278 = 0; _i278 < targetObject.length; _i278++) {\n              if (targetObject[_i278].name === objectIndex) {\n                objectIndex = _i278;\n                break;\n              }\n            }\n\n            break;\n\n          default:\n            if (targetObject[objectName] === undefined) {\n              console.error('THREE.PropertyBinding: Can not bind to objectName of node undefined.', this);\n              return;\n            }\n\n            targetObject = targetObject[objectName];\n        }\n\n        if (objectIndex !== undefined) {\n          if (targetObject[objectIndex] === undefined) {\n            console.error('THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject);\n            return;\n          }\n\n          targetObject = targetObject[objectIndex];\n        }\n      } // resolve property\n\n\n      var nodeProperty = targetObject[propertyName];\n\n      if (nodeProperty === undefined) {\n        var nodeName = parsedPath.nodeName;\n        console.error('THREE.PropertyBinding: Trying to update property for track: ' + nodeName + '.' + propertyName + ' but it wasn\\'t found.', targetObject);\n        return;\n      } // determine versioning scheme\n\n\n      var versioning = this.Versioning.None;\n      this.targetObject = targetObject;\n\n      if (targetObject.needsUpdate !== undefined) {\n        // material\n        versioning = this.Versioning.NeedsUpdate;\n      } else if (targetObject.matrixWorldNeedsUpdate !== undefined) {\n        // node transform\n        versioning = this.Versioning.MatrixWorldNeedsUpdate;\n      } // determine how the property gets bound\n\n\n      var bindingType = this.BindingType.Direct;\n\n      if (propertyIndex !== undefined) {\n        // access a sub element of the property array (only primitives are supported right now)\n        if (propertyName === 'morphTargetInfluences') {\n          // potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n          // support resolving morphTarget names into indices.\n          if (!targetObject.geometry) {\n            console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this);\n            return;\n          }\n\n          if (targetObject.geometry.isBufferGeometry) {\n            if (!targetObject.geometry.morphAttributes) {\n              console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this);\n              return;\n            }\n\n            if (targetObject.morphTargetDictionary[propertyIndex] !== undefined) {\n              propertyIndex = targetObject.morphTargetDictionary[propertyIndex];\n            }\n          } else {\n            console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this);\n            return;\n          }\n        }\n\n        bindingType = this.BindingType.ArrayElement;\n        this.resolvedProperty = nodeProperty;\n        this.propertyIndex = propertyIndex;\n      } else if (nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined) {\n        // must use copy for Object3D.Euler/Quaternion\n        bindingType = this.BindingType.HasFromToArray;\n        this.resolvedProperty = nodeProperty;\n      } else if (Array.isArray(nodeProperty)) {\n        bindingType = this.BindingType.EntireArray;\n        this.resolvedProperty = nodeProperty;\n      } else {\n        this.propertyName = propertyName;\n      } // select getter / setter\n\n\n      this.getValue = this.GetterByBindingType[bindingType];\n      this.setValue = this.SetterByBindingTypeAndVersioning[bindingType][versioning];\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.node = null; // back to the prototype version of getValue / setValue\n      // note: avoiding to mutate the shape of 'this' via 'delete'\n\n      this.getValue = this._getValue_unbound;\n      this.setValue = this._setValue_unbound;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(root, path, parsedPath) {\n      if (!(root && root.isAnimationObjectGroup)) {\n        return new PropertyBinding(root, path, parsedPath);\n      } else {\n        return new PropertyBinding.Composite(root, path, parsedPath);\n      }\n    }\n    /**\n     * Replaces spaces with underscores and removes unsupported characters from\n     * node names, to ensure compatibility with parseTrackName().\n     *\n     * @param {string} name Node name to be sanitized.\n     * @return {string}\n     */\n\n  }, {\n    key: \"sanitizeNodeName\",\n    value: function sanitizeNodeName(name) {\n      return name.replace(/\\s/g, '_').replace(_reservedRe, '');\n    }\n  }, {\n    key: \"parseTrackName\",\n    value: function parseTrackName(trackName) {\n      var matches = _trackRe.exec(trackName);\n\n      if (!matches) {\n        throw new Error('PropertyBinding: Cannot parse trackName: ' + trackName);\n      }\n\n      var results = {\n        // directoryName: matches[ 1 ], // (tschw) currently unused\n        nodeName: matches[2],\n        objectName: matches[3],\n        objectIndex: matches[4],\n        propertyName: matches[5],\n        // required\n        propertyIndex: matches[6]\n      };\n      var lastDot = results.nodeName && results.nodeName.lastIndexOf('.');\n\n      if (lastDot !== undefined && lastDot !== -1) {\n        var objectName = results.nodeName.substring(lastDot + 1); // Object names must be checked against an allowlist. Otherwise, there\n        // is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n        // 'bar' could be the objectName, or part of a nodeName (which can\n        // include '.' characters).\n\n        if (_supportedObjectNames.indexOf(objectName) !== -1) {\n          results.nodeName = results.nodeName.substring(0, lastDot);\n          results.objectName = objectName;\n        }\n      }\n\n      if (results.propertyName === null || results.propertyName.length === 0) {\n        throw new Error('PropertyBinding: can not parse propertyName from trackName: ' + trackName);\n      }\n\n      return results;\n    }\n  }, {\n    key: \"findNode\",\n    value: function findNode(root, nodeName) {\n      if (!nodeName || nodeName === '' || nodeName === '.' || nodeName === -1 || nodeName === root.name || nodeName === root.uuid) {\n        return root;\n      } // search into skeleton bones.\n\n\n      if (root.skeleton) {\n        var bone = root.skeleton.getBoneByName(nodeName);\n\n        if (bone !== undefined) {\n          return bone;\n        }\n      } // search into node subtree.\n\n\n      if (root.children) {\n        var searchNodeSubtree = function searchNodeSubtree(children) {\n          for (var _i279 = 0; _i279 < children.length; _i279++) {\n            var childNode = children[_i279];\n\n            if (childNode.name === nodeName || childNode.uuid === nodeName) {\n              return childNode;\n            }\n\n            var result = searchNodeSubtree(childNode.children);\n            if (result) return result;\n          }\n\n          return null;\n        };\n\n        var subTreeNode = searchNodeSubtree(root.children);\n\n        if (subTreeNode) {\n          return subTreeNode;\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return PropertyBinding;\n}();\n\nPropertyBinding.Composite = Composite;\nPropertyBinding.prototype.BindingType = {\n  Direct: 0,\n  EntireArray: 1,\n  ArrayElement: 2,\n  HasFromToArray: 3\n};\nPropertyBinding.prototype.Versioning = {\n  None: 0,\n  NeedsUpdate: 1,\n  MatrixWorldNeedsUpdate: 2\n};\nPropertyBinding.prototype.GetterByBindingType = [PropertyBinding.prototype._getValue_direct, PropertyBinding.prototype._getValue_array, PropertyBinding.prototype._getValue_arrayElement, PropertyBinding.prototype._getValue_toArray];\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [[// Direct\nPropertyBinding.prototype._setValue_direct, PropertyBinding.prototype._setValue_direct_setNeedsUpdate, PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate], [// EntireArray\nPropertyBinding.prototype._setValue_array, PropertyBinding.prototype._setValue_array_setNeedsUpdate, PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate], [// ArrayElement\nPropertyBinding.prototype._setValue_arrayElement, PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate, PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate], [// HasToFromArray\nPropertyBinding.prototype._setValue_fromArray, PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate, PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];\n\nvar AnimationAction = /*#__PURE__*/function () {\n  function AnimationAction(mixer, clip) {\n    var localRoot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var blendMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : clip.blendMode;\n\n    _classCallCheck(this, AnimationAction);\n\n    this._mixer = mixer;\n    this._clip = clip;\n    this._localRoot = localRoot;\n    this.blendMode = blendMode;\n    var tracks = clip.tracks,\n        nTracks = tracks.length,\n        interpolants = new Array(nTracks);\n    var interpolantSettings = {\n      endingStart: ZeroCurvatureEnding,\n      endingEnd: ZeroCurvatureEnding\n    };\n\n    for (var _i280 = 0; _i280 !== nTracks; ++_i280) {\n      var interpolant = tracks[_i280].createInterpolant(null);\n\n      interpolants[_i280] = interpolant;\n      interpolant.settings = interpolantSettings;\n    }\n\n    this._interpolantSettings = interpolantSettings;\n    this._interpolants = interpolants; // bound by the mixer\n    // inside: PropertyMixer (managed by the mixer)\n\n    this._propertyBindings = new Array(nTracks);\n    this._cacheIndex = null; // for the memory manager\n\n    this._byClipCacheIndex = null; // for the memory manager\n\n    this._timeScaleInterpolant = null;\n    this._weightInterpolant = null;\n    this.loop = LoopRepeat;\n    this._loopCount = -1; // global mixer time when the action is to be started\n    // it's set back to 'null' upon start of the action\n\n    this._startTime = null; // scaled local time of the action\n    // gets clamped or wrapped to 0..clip.duration according to loop\n\n    this.time = 0;\n    this.timeScale = 1;\n    this._effectiveTimeScale = 1;\n    this.weight = 1;\n    this._effectiveWeight = 1;\n    this.repetitions = Infinity; // no. of repetitions when looping\n\n    this.paused = false; // true -> zero effective time scale\n\n    this.enabled = true; // false -> zero effective weight\n\n    this.clampWhenFinished = false; // keep feeding the last frame?\n\n    this.zeroSlopeAtStart = true; // for smooth interpolation w/o separate\n\n    this.zeroSlopeAtEnd = true; // clips for start, loop and end\n  } // State & Scheduling\n\n\n  _createClass(AnimationAction, [{\n    key: \"play\",\n    value: function play() {\n      this._mixer._activateAction(this);\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this._mixer._deactivateAction(this);\n\n      return this.reset();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.paused = false;\n      this.enabled = true;\n      this.time = 0; // restart clip\n\n      this._loopCount = -1; // forget previous loops\n\n      this._startTime = null; // forget scheduling\n\n      return this.stopFading().stopWarping();\n    }\n  }, {\n    key: \"isRunning\",\n    value: function isRunning() {\n      return this.enabled && !this.paused && this.timeScale !== 0 && this._startTime === null && this._mixer._isActiveAction(this);\n    } // return true when play has been called\n\n  }, {\n    key: \"isScheduled\",\n    value: function isScheduled() {\n      return this._mixer._isActiveAction(this);\n    }\n  }, {\n    key: \"startAt\",\n    value: function startAt(time) {\n      this._startTime = time;\n      return this;\n    }\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(mode, repetitions) {\n      this.loop = mode;\n      this.repetitions = repetitions;\n      return this;\n    } // Weight\n    // set the weight stopping any scheduled fading\n    // although .enabled = false yields an effective weight of zero, this\n    // method does *not* change .enabled, because it would be confusing\n\n  }, {\n    key: \"setEffectiveWeight\",\n    value: function setEffectiveWeight(weight) {\n      this.weight = weight; // note: same logic as when updated at runtime\n\n      this._effectiveWeight = this.enabled ? weight : 0;\n      return this.stopFading();\n    } // return the weight considering fading and .enabled\n\n  }, {\n    key: \"getEffectiveWeight\",\n    value: function getEffectiveWeight() {\n      return this._effectiveWeight;\n    }\n  }, {\n    key: \"fadeIn\",\n    value: function fadeIn(duration) {\n      return this._scheduleFading(duration, 0, 1);\n    }\n  }, {\n    key: \"fadeOut\",\n    value: function fadeOut(duration) {\n      return this._scheduleFading(duration, 1, 0);\n    }\n  }, {\n    key: \"crossFadeFrom\",\n    value: function crossFadeFrom(fadeOutAction, duration, warp) {\n      fadeOutAction.fadeOut(duration);\n      this.fadeIn(duration);\n\n      if (warp) {\n        var fadeInDuration = this._clip.duration,\n            fadeOutDuration = fadeOutAction._clip.duration,\n            startEndRatio = fadeOutDuration / fadeInDuration,\n            endStartRatio = fadeInDuration / fadeOutDuration;\n        fadeOutAction.warp(1.0, startEndRatio, duration);\n        this.warp(endStartRatio, 1.0, duration);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"crossFadeTo\",\n    value: function crossFadeTo(fadeInAction, duration, warp) {\n      return fadeInAction.crossFadeFrom(this, duration, warp);\n    }\n  }, {\n    key: \"stopFading\",\n    value: function stopFading() {\n      var weightInterpolant = this._weightInterpolant;\n\n      if (weightInterpolant !== null) {\n        this._weightInterpolant = null;\n\n        this._mixer._takeBackControlInterpolant(weightInterpolant);\n      }\n\n      return this;\n    } // Time Scale Control\n    // set the time scale stopping any scheduled warping\n    // although .paused = true yields an effective time scale of zero, this\n    // method does *not* change .paused, because it would be confusing\n\n  }, {\n    key: \"setEffectiveTimeScale\",\n    value: function setEffectiveTimeScale(timeScale) {\n      this.timeScale = timeScale;\n      this._effectiveTimeScale = this.paused ? 0 : timeScale;\n      return this.stopWarping();\n    } // return the time scale considering warping and .paused\n\n  }, {\n    key: \"getEffectiveTimeScale\",\n    value: function getEffectiveTimeScale() {\n      return this._effectiveTimeScale;\n    }\n  }, {\n    key: \"setDuration\",\n    value: function setDuration(duration) {\n      this.timeScale = this._clip.duration / duration;\n      return this.stopWarping();\n    }\n  }, {\n    key: \"syncWith\",\n    value: function syncWith(action) {\n      this.time = action.time;\n      this.timeScale = action.timeScale;\n      return this.stopWarping();\n    }\n  }, {\n    key: \"halt\",\n    value: function halt(duration) {\n      return this.warp(this._effectiveTimeScale, 0, duration);\n    }\n  }, {\n    key: \"warp\",\n    value: function warp(startTimeScale, endTimeScale, duration) {\n      var mixer = this._mixer,\n          now = mixer.time,\n          timeScale = this.timeScale;\n      var interpolant = this._timeScaleInterpolant;\n\n      if (interpolant === null) {\n        interpolant = mixer._lendControlInterpolant();\n        this._timeScaleInterpolant = interpolant;\n      }\n\n      var times = interpolant.parameterPositions,\n          values = interpolant.sampleValues;\n      times[0] = now;\n      times[1] = now + duration;\n      values[0] = startTimeScale / timeScale;\n      values[1] = endTimeScale / timeScale;\n      return this;\n    }\n  }, {\n    key: \"stopWarping\",\n    value: function stopWarping() {\n      var timeScaleInterpolant = this._timeScaleInterpolant;\n\n      if (timeScaleInterpolant !== null) {\n        this._timeScaleInterpolant = null;\n\n        this._mixer._takeBackControlInterpolant(timeScaleInterpolant);\n      }\n\n      return this;\n    } // Object Accessors\n\n  }, {\n    key: \"getMixer\",\n    value: function getMixer() {\n      return this._mixer;\n    }\n  }, {\n    key: \"getClip\",\n    value: function getClip() {\n      return this._clip;\n    }\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this._localRoot || this._mixer._root;\n    } // Interna\n\n  }, {\n    key: \"_update\",\n    value: function _update(time, deltaTime, timeDirection, accuIndex) {\n      // called by the mixer\n      if (!this.enabled) {\n        // call ._updateWeight() to update ._effectiveWeight\n        this._updateWeight(time);\n\n        return;\n      }\n\n      var startTime = this._startTime;\n\n      if (startTime !== null) {\n        // check for scheduled start of action\n        var timeRunning = (time - startTime) * timeDirection;\n\n        if (timeRunning < 0 || timeDirection === 0) {\n          return; // yet to come / don't decide when delta = 0\n        } // start\n\n\n        this._startTime = null; // unschedule\n\n        deltaTime = timeDirection * timeRunning;\n      } // apply time scale and advance time\n\n\n      deltaTime *= this._updateTimeScale(time);\n\n      var clipTime = this._updateTime(deltaTime); // note: _updateTime may disable the action resulting in\n      // an effective weight of 0\n\n\n      var weight = this._updateWeight(time);\n\n      if (weight > 0) {\n        var interpolants = this._interpolants;\n        var propertyMixers = this._propertyBindings;\n\n        switch (this.blendMode) {\n          case AdditiveAnimationBlendMode:\n            for (var j = 0, m = interpolants.length; j !== m; ++j) {\n              interpolants[j].evaluate(clipTime);\n              propertyMixers[j].accumulateAdditive(weight);\n            }\n\n            break;\n\n          case NormalAnimationBlendMode:\n          default:\n            for (var _j11 = 0, _m3 = interpolants.length; _j11 !== _m3; ++_j11) {\n              interpolants[_j11].evaluate(clipTime);\n\n              propertyMixers[_j11].accumulate(accuIndex, weight);\n            }\n\n        }\n      }\n    }\n  }, {\n    key: \"_updateWeight\",\n    value: function _updateWeight(time) {\n      var weight = 0;\n\n      if (this.enabled) {\n        weight = this.weight;\n        var interpolant = this._weightInterpolant;\n\n        if (interpolant !== null) {\n          var interpolantValue = interpolant.evaluate(time)[0];\n          weight *= interpolantValue;\n\n          if (time > interpolant.parameterPositions[1]) {\n            this.stopFading();\n\n            if (interpolantValue === 0) {\n              // faded out, disable\n              this.enabled = false;\n            }\n          }\n        }\n      }\n\n      this._effectiveWeight = weight;\n      return weight;\n    }\n  }, {\n    key: \"_updateTimeScale\",\n    value: function _updateTimeScale(time) {\n      var timeScale = 0;\n\n      if (!this.paused) {\n        timeScale = this.timeScale;\n        var interpolant = this._timeScaleInterpolant;\n\n        if (interpolant !== null) {\n          var interpolantValue = interpolant.evaluate(time)[0];\n          timeScale *= interpolantValue;\n\n          if (time > interpolant.parameterPositions[1]) {\n            this.stopWarping();\n\n            if (timeScale === 0) {\n              // motion has halted, pause\n              this.paused = true;\n            } else {\n              // warp done - apply final time scale\n              this.timeScale = timeScale;\n            }\n          }\n        }\n      }\n\n      this._effectiveTimeScale = timeScale;\n      return timeScale;\n    }\n  }, {\n    key: \"_updateTime\",\n    value: function _updateTime(deltaTime) {\n      var duration = this._clip.duration;\n      var loop = this.loop;\n      var time = this.time + deltaTime;\n      var loopCount = this._loopCount;\n      var pingPong = loop === LoopPingPong;\n\n      if (deltaTime === 0) {\n        if (loopCount === -1) return time;\n        return pingPong && (loopCount & 1) === 1 ? duration - time : time;\n      }\n\n      if (loop === LoopOnce) {\n        if (loopCount === -1) {\n          // just started\n          this._loopCount = 0;\n\n          this._setEndings(true, true, false);\n        }\n\n        handle_stop: {\n          if (time >= duration) {\n            time = duration;\n          } else if (time < 0) {\n            time = 0;\n          } else {\n            this.time = time;\n            break handle_stop;\n          }\n\n          if (this.clampWhenFinished) this.paused = true;else this.enabled = false;\n          this.time = time;\n\n          this._mixer.dispatchEvent({\n            type: 'finished',\n            action: this,\n            direction: deltaTime < 0 ? -1 : 1\n          });\n        }\n      } else {\n        // repetitive Repeat or PingPong\n        if (loopCount === -1) {\n          // just started\n          if (deltaTime >= 0) {\n            loopCount = 0;\n\n            this._setEndings(true, this.repetitions === 0, pingPong);\n          } else {\n            // when looping in reverse direction, the initial\n            // transition through zero counts as a repetition,\n            // so leave loopCount at -1\n            this._setEndings(this.repetitions === 0, true, pingPong);\n          }\n        }\n\n        if (time >= duration || time < 0) {\n          // wrap around\n          var loopDelta = Math.floor(time / duration); // signed\n\n          time -= duration * loopDelta;\n          loopCount += Math.abs(loopDelta);\n          var pending = this.repetitions - loopCount;\n\n          if (pending <= 0) {\n            // have to stop (switch state, clamp time, fire event)\n            if (this.clampWhenFinished) this.paused = true;else this.enabled = false;\n            time = deltaTime > 0 ? duration : 0;\n            this.time = time;\n\n            this._mixer.dispatchEvent({\n              type: 'finished',\n              action: this,\n              direction: deltaTime > 0 ? 1 : -1\n            });\n          } else {\n            // keep running\n            if (pending === 1) {\n              // entering the last round\n              var atStart = deltaTime < 0;\n\n              this._setEndings(atStart, !atStart, pingPong);\n            } else {\n              this._setEndings(false, false, pingPong);\n            }\n\n            this._loopCount = loopCount;\n            this.time = time;\n\n            this._mixer.dispatchEvent({\n              type: 'loop',\n              action: this,\n              loopDelta: loopDelta\n            });\n          }\n        } else {\n          this.time = time;\n        }\n\n        if (pingPong && (loopCount & 1) === 1) {\n          // invert time for the \"pong round\"\n          return duration - time;\n        }\n      }\n\n      return time;\n    }\n  }, {\n    key: \"_setEndings\",\n    value: function _setEndings(atStart, atEnd, pingPong) {\n      var settings = this._interpolantSettings;\n\n      if (pingPong) {\n        settings.endingStart = ZeroSlopeEnding;\n        settings.endingEnd = ZeroSlopeEnding;\n      } else {\n        // assuming for LoopOnce atStart == atEnd == true\n        if (atStart) {\n          settings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n        } else {\n          settings.endingStart = WrapAroundEnding;\n        }\n\n        if (atEnd) {\n          settings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n        } else {\n          settings.endingEnd = WrapAroundEnding;\n        }\n      }\n    }\n  }, {\n    key: \"_scheduleFading\",\n    value: function _scheduleFading(duration, weightNow, weightThen) {\n      var mixer = this._mixer,\n          now = mixer.time;\n      var interpolant = this._weightInterpolant;\n\n      if (interpolant === null) {\n        interpolant = mixer._lendControlInterpolant();\n        this._weightInterpolant = interpolant;\n      }\n\n      var times = interpolant.parameterPositions,\n          values = interpolant.sampleValues;\n      times[0] = now;\n      values[0] = weightNow;\n      times[1] = now + duration;\n      values[1] = weightThen;\n      return this;\n    }\n  }]);\n\n  return AnimationAction;\n}();\n\nvar AnimationMixer = /*#__PURE__*/function (_EventDispatcher7) {\n  _inherits(AnimationMixer, _EventDispatcher7);\n\n  var _super109 = _createSuper(AnimationMixer);\n\n  function AnimationMixer(root) {\n    var _this94;\n\n    _classCallCheck(this, AnimationMixer);\n\n    _this94 = _super109.call(this);\n    _this94._root = root;\n\n    _this94._initMemoryManager();\n\n    _this94._accuIndex = 0;\n    _this94.time = 0;\n    _this94.timeScale = 1.0;\n    return _this94;\n  }\n\n  _createClass(AnimationMixer, [{\n    key: \"_bindAction\",\n    value: function _bindAction(action, prototypeAction) {\n      var root = action._localRoot || this._root,\n          tracks = action._clip.tracks,\n          nTracks = tracks.length,\n          bindings = action._propertyBindings,\n          interpolants = action._interpolants,\n          rootUuid = root.uuid,\n          bindingsByRoot = this._bindingsByRootAndName;\n      var bindingsByName = bindingsByRoot[rootUuid];\n\n      if (bindingsByName === undefined) {\n        bindingsByName = {};\n        bindingsByRoot[rootUuid] = bindingsByName;\n      }\n\n      for (var _i281 = 0; _i281 !== nTracks; ++_i281) {\n        var track = tracks[_i281],\n            trackName = track.name;\n        var binding = bindingsByName[trackName];\n\n        if (binding !== undefined) {\n          bindings[_i281] = binding;\n        } else {\n          binding = bindings[_i281];\n\n          if (binding !== undefined) {\n            // existing binding, make sure the cache knows\n            if (binding._cacheIndex === null) {\n              ++binding.referenceCount;\n\n              this._addInactiveBinding(binding, rootUuid, trackName);\n            }\n\n            continue;\n          }\n\n          var path = prototypeAction && prototypeAction._propertyBindings[_i281].binding.parsedPath;\n          binding = new PropertyMixer(PropertyBinding.create(root, trackName, path), track.ValueTypeName, track.getValueSize());\n          ++binding.referenceCount;\n\n          this._addInactiveBinding(binding, rootUuid, trackName);\n\n          bindings[_i281] = binding;\n        }\n\n        interpolants[_i281].resultBuffer = binding.buffer;\n      }\n    }\n  }, {\n    key: \"_activateAction\",\n    value: function _activateAction(action) {\n      if (!this._isActiveAction(action)) {\n        if (action._cacheIndex === null) {\n          // this action has been forgotten by the cache, but the user\n          // appears to be still using it -> rebind\n          var rootUuid = (action._localRoot || this._root).uuid,\n              clipUuid = action._clip.uuid,\n              actionsForClip = this._actionsByClip[clipUuid];\n\n          this._bindAction(action, actionsForClip && actionsForClip.knownActions[0]);\n\n          this._addInactiveAction(action, clipUuid, rootUuid);\n        }\n\n        var bindings = action._propertyBindings; // increment reference counts / sort out state\n\n        for (var _i282 = 0, _n20 = bindings.length; _i282 !== _n20; ++_i282) {\n          var binding = bindings[_i282];\n\n          if (binding.useCount++ === 0) {\n            this._lendBinding(binding);\n\n            binding.saveOriginalState();\n          }\n        }\n\n        this._lendAction(action);\n      }\n    }\n  }, {\n    key: \"_deactivateAction\",\n    value: function _deactivateAction(action) {\n      if (this._isActiveAction(action)) {\n        var bindings = action._propertyBindings; // decrement reference counts / sort out state\n\n        for (var _i283 = 0, _n21 = bindings.length; _i283 !== _n21; ++_i283) {\n          var binding = bindings[_i283];\n\n          if (--binding.useCount === 0) {\n            binding.restoreOriginalState();\n\n            this._takeBackBinding(binding);\n          }\n        }\n\n        this._takeBackAction(action);\n      }\n    } // Memory manager\n\n  }, {\n    key: \"_initMemoryManager\",\n    value: function _initMemoryManager() {\n      this._actions = []; // 'nActiveActions' followed by inactive ones\n\n      this._nActiveActions = 0;\n      this._actionsByClip = {}; // inside:\n      // {\n      // \tknownActions: Array< AnimationAction > - used as prototypes\n      // \tactionByRoot: AnimationAction - lookup\n      // }\n\n      this._bindings = []; // 'nActiveBindings' followed by inactive ones\n\n      this._nActiveBindings = 0;\n      this._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n      this._controlInterpolants = []; // same game as above\n\n      this._nActiveControlInterpolants = 0;\n      var scope = this;\n      this.stats = {\n        actions: {\n          get total() {\n            return scope._actions.length;\n          },\n\n          get inUse() {\n            return scope._nActiveActions;\n          }\n\n        },\n        bindings: {\n          get total() {\n            return scope._bindings.length;\n          },\n\n          get inUse() {\n            return scope._nActiveBindings;\n          }\n\n        },\n        controlInterpolants: {\n          get total() {\n            return scope._controlInterpolants.length;\n          },\n\n          get inUse() {\n            return scope._nActiveControlInterpolants;\n          }\n\n        }\n      };\n    } // Memory management for AnimationAction objects\n\n  }, {\n    key: \"_isActiveAction\",\n    value: function _isActiveAction(action) {\n      var index = action._cacheIndex;\n      return index !== null && index < this._nActiveActions;\n    }\n  }, {\n    key: \"_addInactiveAction\",\n    value: function _addInactiveAction(action, clipUuid, rootUuid) {\n      var actions = this._actions,\n          actionsByClip = this._actionsByClip;\n      var actionsForClip = actionsByClip[clipUuid];\n\n      if (actionsForClip === undefined) {\n        actionsForClip = {\n          knownActions: [action],\n          actionByRoot: {}\n        };\n        action._byClipCacheIndex = 0;\n        actionsByClip[clipUuid] = actionsForClip;\n      } else {\n        var knownActions = actionsForClip.knownActions;\n        action._byClipCacheIndex = knownActions.length;\n        knownActions.push(action);\n      }\n\n      action._cacheIndex = actions.length;\n      actions.push(action);\n      actionsForClip.actionByRoot[rootUuid] = action;\n    }\n  }, {\n    key: \"_removeInactiveAction\",\n    value: function _removeInactiveAction(action) {\n      var actions = this._actions,\n          lastInactiveAction = actions[actions.length - 1],\n          cacheIndex = action._cacheIndex;\n      lastInactiveAction._cacheIndex = cacheIndex;\n      actions[cacheIndex] = lastInactiveAction;\n      actions.pop();\n      action._cacheIndex = null;\n      var clipUuid = action._clip.uuid,\n          actionsByClip = this._actionsByClip,\n          actionsForClip = actionsByClip[clipUuid],\n          knownActionsForClip = actionsForClip.knownActions,\n          lastKnownAction = knownActionsForClip[knownActionsForClip.length - 1],\n          byClipCacheIndex = action._byClipCacheIndex;\n      lastKnownAction._byClipCacheIndex = byClipCacheIndex;\n      knownActionsForClip[byClipCacheIndex] = lastKnownAction;\n      knownActionsForClip.pop();\n      action._byClipCacheIndex = null;\n      var actionByRoot = actionsForClip.actionByRoot,\n          rootUuid = (action._localRoot || this._root).uuid;\n      delete actionByRoot[rootUuid];\n\n      if (knownActionsForClip.length === 0) {\n        delete actionsByClip[clipUuid];\n      }\n\n      this._removeInactiveBindingsForAction(action);\n    }\n  }, {\n    key: \"_removeInactiveBindingsForAction\",\n    value: function _removeInactiveBindingsForAction(action) {\n      var bindings = action._propertyBindings;\n\n      for (var _i284 = 0, _n22 = bindings.length; _i284 !== _n22; ++_i284) {\n        var binding = bindings[_i284];\n\n        if (--binding.referenceCount === 0) {\n          this._removeInactiveBinding(binding);\n        }\n      }\n    }\n  }, {\n    key: \"_lendAction\",\n    value: function _lendAction(action) {\n      // [ active actions |  inactive actions  ]\n      // [  active actions >| inactive actions ]\n      //                 s        a\n      //                  <-swap->\n      //                 a        s\n      var actions = this._actions,\n          prevIndex = action._cacheIndex,\n          lastActiveIndex = this._nActiveActions++,\n          firstInactiveAction = actions[lastActiveIndex];\n      action._cacheIndex = lastActiveIndex;\n      actions[lastActiveIndex] = action;\n      firstInactiveAction._cacheIndex = prevIndex;\n      actions[prevIndex] = firstInactiveAction;\n    }\n  }, {\n    key: \"_takeBackAction\",\n    value: function _takeBackAction(action) {\n      // [  active actions  | inactive actions ]\n      // [ active actions |< inactive actions  ]\n      //        a        s\n      //         <-swap->\n      //        s        a\n      var actions = this._actions,\n          prevIndex = action._cacheIndex,\n          firstInactiveIndex = --this._nActiveActions,\n          lastActiveAction = actions[firstInactiveIndex];\n      action._cacheIndex = firstInactiveIndex;\n      actions[firstInactiveIndex] = action;\n      lastActiveAction._cacheIndex = prevIndex;\n      actions[prevIndex] = lastActiveAction;\n    } // Memory management for PropertyMixer objects\n\n  }, {\n    key: \"_addInactiveBinding\",\n    value: function _addInactiveBinding(binding, rootUuid, trackName) {\n      var bindingsByRoot = this._bindingsByRootAndName,\n          bindings = this._bindings;\n      var bindingByName = bindingsByRoot[rootUuid];\n\n      if (bindingByName === undefined) {\n        bindingByName = {};\n        bindingsByRoot[rootUuid] = bindingByName;\n      }\n\n      bindingByName[trackName] = binding;\n      binding._cacheIndex = bindings.length;\n      bindings.push(binding);\n    }\n  }, {\n    key: \"_removeInactiveBinding\",\n    value: function _removeInactiveBinding(binding) {\n      var bindings = this._bindings,\n          propBinding = binding.binding,\n          rootUuid = propBinding.rootNode.uuid,\n          trackName = propBinding.path,\n          bindingsByRoot = this._bindingsByRootAndName,\n          bindingByName = bindingsByRoot[rootUuid],\n          lastInactiveBinding = bindings[bindings.length - 1],\n          cacheIndex = binding._cacheIndex;\n      lastInactiveBinding._cacheIndex = cacheIndex;\n      bindings[cacheIndex] = lastInactiveBinding;\n      bindings.pop();\n      delete bindingByName[trackName];\n\n      if (Object.keys(bindingByName).length === 0) {\n        delete bindingsByRoot[rootUuid];\n      }\n    }\n  }, {\n    key: \"_lendBinding\",\n    value: function _lendBinding(binding) {\n      var bindings = this._bindings,\n          prevIndex = binding._cacheIndex,\n          lastActiveIndex = this._nActiveBindings++,\n          firstInactiveBinding = bindings[lastActiveIndex];\n      binding._cacheIndex = lastActiveIndex;\n      bindings[lastActiveIndex] = binding;\n      firstInactiveBinding._cacheIndex = prevIndex;\n      bindings[prevIndex] = firstInactiveBinding;\n    }\n  }, {\n    key: \"_takeBackBinding\",\n    value: function _takeBackBinding(binding) {\n      var bindings = this._bindings,\n          prevIndex = binding._cacheIndex,\n          firstInactiveIndex = --this._nActiveBindings,\n          lastActiveBinding = bindings[firstInactiveIndex];\n      binding._cacheIndex = firstInactiveIndex;\n      bindings[firstInactiveIndex] = binding;\n      lastActiveBinding._cacheIndex = prevIndex;\n      bindings[prevIndex] = lastActiveBinding;\n    } // Memory management of Interpolants for weight and time scale\n\n  }, {\n    key: \"_lendControlInterpolant\",\n    value: function _lendControlInterpolant() {\n      var interpolants = this._controlInterpolants,\n          lastActiveIndex = this._nActiveControlInterpolants++;\n      var interpolant = interpolants[lastActiveIndex];\n\n      if (interpolant === undefined) {\n        interpolant = new LinearInterpolant(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer);\n        interpolant.__cacheIndex = lastActiveIndex;\n        interpolants[lastActiveIndex] = interpolant;\n      }\n\n      return interpolant;\n    }\n  }, {\n    key: \"_takeBackControlInterpolant\",\n    value: function _takeBackControlInterpolant(interpolant) {\n      var interpolants = this._controlInterpolants,\n          prevIndex = interpolant.__cacheIndex,\n          firstInactiveIndex = --this._nActiveControlInterpolants,\n          lastActiveInterpolant = interpolants[firstInactiveIndex];\n      interpolant.__cacheIndex = firstInactiveIndex;\n      interpolants[firstInactiveIndex] = interpolant;\n      lastActiveInterpolant.__cacheIndex = prevIndex;\n      interpolants[prevIndex] = lastActiveInterpolant;\n    } // return an action for a clip optionally using a custom root target\n    // object (this method allocates a lot of dynamic memory in case a\n    // previously unknown clip/root combination is specified)\n\n  }, {\n    key: \"clipAction\",\n    value: function clipAction(clip, optionalRoot, blendMode) {\n      var root = optionalRoot || this._root,\n          rootUuid = root.uuid;\n      var clipObject = typeof clip === 'string' ? AnimationClip.findByName(root, clip) : clip;\n      var clipUuid = clipObject !== null ? clipObject.uuid : clip;\n      var actionsForClip = this._actionsByClip[clipUuid];\n      var prototypeAction = null;\n\n      if (blendMode === undefined) {\n        if (clipObject !== null) {\n          blendMode = clipObject.blendMode;\n        } else {\n          blendMode = NormalAnimationBlendMode;\n        }\n      }\n\n      if (actionsForClip !== undefined) {\n        var existingAction = actionsForClip.actionByRoot[rootUuid];\n\n        if (existingAction !== undefined && existingAction.blendMode === blendMode) {\n          return existingAction;\n        } // we know the clip, so we don't have to parse all\n        // the bindings again but can just copy\n\n\n        prototypeAction = actionsForClip.knownActions[0]; // also, take the clip from the prototype action\n\n        if (clipObject === null) clipObject = prototypeAction._clip;\n      } // clip must be known when specified via string\n\n\n      if (clipObject === null) return null; // allocate all resources required to run it\n\n      var newAction = new AnimationAction(this, clipObject, optionalRoot, blendMode);\n\n      this._bindAction(newAction, prototypeAction); // and make the action known to the memory manager\n\n\n      this._addInactiveAction(newAction, clipUuid, rootUuid);\n\n      return newAction;\n    } // get an existing action\n\n  }, {\n    key: \"existingAction\",\n    value: function existingAction(clip, optionalRoot) {\n      var root = optionalRoot || this._root,\n          rootUuid = root.uuid,\n          clipObject = typeof clip === 'string' ? AnimationClip.findByName(root, clip) : clip,\n          clipUuid = clipObject ? clipObject.uuid : clip,\n          actionsForClip = this._actionsByClip[clipUuid];\n\n      if (actionsForClip !== undefined) {\n        return actionsForClip.actionByRoot[rootUuid] || null;\n      }\n\n      return null;\n    } // deactivates all previously scheduled actions\n\n  }, {\n    key: \"stopAllAction\",\n    value: function stopAllAction() {\n      var actions = this._actions,\n          nActions = this._nActiveActions;\n\n      for (var _i285 = nActions - 1; _i285 >= 0; --_i285) {\n        actions[_i285].stop();\n      }\n\n      return this;\n    } // advance the time and update apply the animation\n\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      deltaTime *= this.timeScale;\n      var actions = this._actions,\n          nActions = this._nActiveActions,\n          time = this.time += deltaTime,\n          timeDirection = Math.sign(deltaTime),\n          accuIndex = this._accuIndex ^= 1; // run active actions\n\n      for (var _i286 = 0; _i286 !== nActions; ++_i286) {\n        var action = actions[_i286];\n\n        action._update(time, deltaTime, timeDirection, accuIndex);\n      } // update scene graph\n\n\n      var bindings = this._bindings,\n          nBindings = this._nActiveBindings;\n\n      for (var _i287 = 0; _i287 !== nBindings; ++_i287) {\n        bindings[_i287].apply(accuIndex);\n      }\n\n      return this;\n    } // Allows you to seek to a specific time in an animation.\n\n  }, {\n    key: \"setTime\",\n    value: function setTime(timeInSeconds) {\n      this.time = 0; // Zero out time attribute for AnimationMixer object;\n\n      for (var _i288 = 0; _i288 < this._actions.length; _i288++) {\n        this._actions[_i288].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n      }\n\n      return this.update(timeInSeconds); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n    } // return this mixer's root target object\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this._root;\n    } // free all resources specific to a particular clip\n\n  }, {\n    key: \"uncacheClip\",\n    value: function uncacheClip(clip) {\n      var actions = this._actions,\n          clipUuid = clip.uuid,\n          actionsByClip = this._actionsByClip,\n          actionsForClip = actionsByClip[clipUuid];\n\n      if (actionsForClip !== undefined) {\n        // note: just calling _removeInactiveAction would mess up the\n        // iteration state and also require updating the state we can\n        // just throw away\n        var actionsToRemove = actionsForClip.knownActions;\n\n        for (var _i289 = 0, _n23 = actionsToRemove.length; _i289 !== _n23; ++_i289) {\n          var action = actionsToRemove[_i289];\n\n          this._deactivateAction(action);\n\n          var cacheIndex = action._cacheIndex,\n              lastInactiveAction = actions[actions.length - 1];\n          action._cacheIndex = null;\n          action._byClipCacheIndex = null;\n          lastInactiveAction._cacheIndex = cacheIndex;\n          actions[cacheIndex] = lastInactiveAction;\n          actions.pop();\n\n          this._removeInactiveBindingsForAction(action);\n        }\n\n        delete actionsByClip[clipUuid];\n      }\n    } // free all resources specific to a particular root target object\n\n  }, {\n    key: \"uncacheRoot\",\n    value: function uncacheRoot(root) {\n      var rootUuid = root.uuid,\n          actionsByClip = this._actionsByClip;\n\n      for (var clipUuid in actionsByClip) {\n        var actionByRoot = actionsByClip[clipUuid].actionByRoot,\n            action = actionByRoot[rootUuid];\n\n        if (action !== undefined) {\n          this._deactivateAction(action);\n\n          this._removeInactiveAction(action);\n        }\n      }\n\n      var bindingsByRoot = this._bindingsByRootAndName,\n          bindingByName = bindingsByRoot[rootUuid];\n\n      if (bindingByName !== undefined) {\n        for (var trackName in bindingByName) {\n          var binding = bindingByName[trackName];\n          binding.restoreOriginalState();\n\n          this._removeInactiveBinding(binding);\n        }\n      }\n    } // remove a targeted clip from the cache\n\n  }, {\n    key: \"uncacheAction\",\n    value: function uncacheAction(clip, optionalRoot) {\n      var action = this.existingAction(clip, optionalRoot);\n\n      if (action !== null) {\n        this._deactivateAction(action);\n\n        this._removeInactiveAction(action);\n      }\n    }\n  }]);\n\n  return AnimationMixer;\n}(EventDispatcher);\n\nAnimationMixer.prototype._controlInterpolantsResultBuffer = new Float32Array(1);\n\nvar InstancedInterleavedBuffer = /*#__PURE__*/function (_InterleavedBuffer) {\n  _inherits(InstancedInterleavedBuffer, _InterleavedBuffer);\n\n  var _super110 = _createSuper(InstancedInterleavedBuffer);\n\n  function InstancedInterleavedBuffer(array, stride) {\n    var _this95;\n\n    var meshPerAttribute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    _classCallCheck(this, InstancedInterleavedBuffer);\n\n    _this95 = _super110.call(this, array, stride);\n    _this95.meshPerAttribute = meshPerAttribute;\n    return _this95;\n  }\n\n  _createClass(InstancedInterleavedBuffer, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(InstancedInterleavedBuffer.prototype), \"copy\", this).call(this, source);\n\n      this.meshPerAttribute = source.meshPerAttribute;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(data) {\n      var ib = _get(_getPrototypeOf(InstancedInterleavedBuffer.prototype), \"clone\", this).call(this, data);\n\n      ib.meshPerAttribute = this.meshPerAttribute;\n      return ib;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(data) {\n      var json = _get(_getPrototypeOf(InstancedInterleavedBuffer.prototype), \"toJSON\", this).call(this, data);\n\n      json.isInstancedInterleavedBuffer = true;\n      json.meshPerAttribute = this.meshPerAttribute;\n      return json;\n    }\n  }]);\n\n  return InstancedInterleavedBuffer;\n}(InterleavedBuffer);\n\nInstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer = true;\n\nvar Raycaster = /*#__PURE__*/function () {\n  function Raycaster(origin, direction) {\n    var near = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var far = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Infinity;\n\n    _classCallCheck(this, Raycaster);\n\n    this.ray = new Ray(origin, direction); // direction is assumed to be normalized (for accurate distance calculations)\n\n    this.near = near;\n    this.far = far;\n    this.camera = null;\n    this.layers = new Layers();\n    this.params = {\n      Mesh: {},\n      Line: {\n        threshold: 1\n      },\n      LOD: {},\n      Points: {\n        threshold: 1\n      },\n      Sprite: {}\n    };\n  }\n\n  _createClass(Raycaster, [{\n    key: \"set\",\n    value: function set(origin, direction) {\n      // direction is assumed to be normalized (for accurate distance calculations)\n      this.ray.set(origin, direction);\n    }\n  }, {\n    key: \"setFromCamera\",\n    value: function setFromCamera(coords, camera) {\n      if (camera && camera.isPerspectiveCamera) {\n        this.ray.origin.setFromMatrixPosition(camera.matrixWorld);\n        this.ray.direction.set(coords.x, coords.y, 0.5).unproject(camera).sub(this.ray.origin).normalize();\n        this.camera = camera;\n      } else if (camera && camera.isOrthographicCamera) {\n        this.ray.origin.set(coords.x, coords.y, (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera); // set origin in plane of camera\n\n        this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n        this.camera = camera;\n      } else {\n        console.error('THREE.Raycaster: Unsupported camera type: ' + camera.type);\n      }\n    }\n  }, {\n    key: \"intersectObject\",\n    value: function intersectObject(object) {\n      var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var intersects = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      _intersectObject(object, this, intersects, recursive);\n\n      intersects.sort(ascSort);\n      return intersects;\n    }\n  }, {\n    key: \"intersectObjects\",\n    value: function intersectObjects(objects) {\n      var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var intersects = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      for (var _i290 = 0, _l81 = objects.length; _i290 < _l81; _i290++) {\n        _intersectObject(objects[_i290], this, intersects, recursive);\n      }\n\n      intersects.sort(ascSort);\n      return intersects;\n    }\n  }]);\n\n  return Raycaster;\n}();\n\nfunction ascSort(a, b) {\n  return a.distance - b.distance;\n}\n\nfunction _intersectObject(object, raycaster, intersects, recursive) {\n  if (object.layers.test(raycaster.layers)) {\n    object.raycast(raycaster, intersects);\n  }\n\n  if (recursive === true) {\n    var children = object.children;\n\n    for (var _i291 = 0, _l82 = children.length; _i291 < _l82; _i291++) {\n      _intersectObject(children[_i291], raycaster, intersects, true);\n    }\n  }\n}\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\n\nvar Spherical = /*#__PURE__*/function () {\n  function Spherical() {\n    var radius = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var phi = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var theta = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Spherical);\n\n    this.radius = radius;\n    this.phi = phi; // polar angle\n\n    this.theta = theta; // azimuthal angle\n\n    return this;\n  }\n\n  _createClass(Spherical, [{\n    key: \"set\",\n    value: function set(radius, phi, theta) {\n      this.radius = radius;\n      this.phi = phi;\n      this.theta = theta;\n      return this;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(other) {\n      this.radius = other.radius;\n      this.phi = other.phi;\n      this.theta = other.theta;\n      return this;\n    } // restrict phi to be betwee EPS and PI-EPS\n\n  }, {\n    key: \"makeSafe\",\n    value: function makeSafe() {\n      var EPS = 0.000001;\n      this.phi = Math.max(EPS, Math.min(Math.PI - EPS, this.phi));\n      return this;\n    }\n  }, {\n    key: \"setFromVector3\",\n    value: function setFromVector3(v) {\n      return this.setFromCartesianCoords(v.x, v.y, v.z);\n    }\n  }, {\n    key: \"setFromCartesianCoords\",\n    value: function setFromCartesianCoords(x, y, z) {\n      this.radius = Math.sqrt(x * x + y * y + z * z);\n\n      if (this.radius === 0) {\n        this.theta = 0;\n        this.phi = 0;\n      } else {\n        this.theta = Math.atan2(x, z);\n        this.phi = Math.acos(clamp$1(y / this.radius, -1, 1));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }]);\n\n  return Spherical;\n}();\n\nvar ImmediateRenderObject = /*#__PURE__*/function (_Object3D12) {\n  _inherits(ImmediateRenderObject, _Object3D12);\n\n  var _super111 = _createSuper(ImmediateRenderObject);\n\n  function ImmediateRenderObject(material) {\n    var _this96;\n\n    _classCallCheck(this, ImmediateRenderObject);\n\n    _this96 = _super111.call(this);\n    _this96.material = material;\n\n    _this96.render = function () {};\n\n    _this96.hasPositions = false;\n    _this96.hasNormals = false;\n    _this96.hasColors = false;\n    _this96.hasUvs = false;\n    _this96.positionArray = null;\n    _this96.normalArray = null;\n    _this96.colorArray = null;\n    _this96.uvArray = null;\n    _this96.count = 0;\n    return _this96;\n  }\n\n  return ImmediateRenderObject;\n}(Object3D);\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nvar _vector$2 = /*@__PURE__*/new Vector3();\n\nvar _boneMatrix = /*@__PURE__*/new Matrix4();\n\nvar _matrixWorldInv = /*@__PURE__*/new Matrix4();\n\nvar SkeletonHelper = /*#__PURE__*/function (_LineSegments) {\n  _inherits(SkeletonHelper, _LineSegments);\n\n  var _super112 = _createSuper(SkeletonHelper);\n\n  function SkeletonHelper(object) {\n    var _this97;\n\n    _classCallCheck(this, SkeletonHelper);\n\n    var bones = getBoneList(object);\n    var geometry = new BufferGeometry();\n    var vertices = [];\n    var colors = [];\n    var color1 = new Color(0, 0, 1);\n    var color2 = new Color(0, 1, 0);\n\n    for (var _i292 = 0; _i292 < bones.length; _i292++) {\n      var bone = bones[_i292];\n\n      if (bone.parent && bone.parent.isBone) {\n        vertices.push(0, 0, 0);\n        vertices.push(0, 0, 0);\n        colors.push(color1.r, color1.g, color1.b);\n        colors.push(color2.r, color2.g, color2.b);\n      }\n    }\n\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('color', new Float32BufferAttribute(colors, 3));\n    var material = new LineBasicMaterial({\n      vertexColors: true,\n      depthTest: false,\n      depthWrite: false,\n      toneMapped: false,\n      transparent: true\n    });\n    _this97 = _super112.call(this, geometry, material);\n    _this97.type = 'SkeletonHelper';\n    _this97.isSkeletonHelper = true;\n    _this97.root = object;\n    _this97.bones = bones;\n    _this97.matrix = object.matrixWorld;\n    _this97.matrixAutoUpdate = false;\n    return _this97;\n  }\n\n  _createClass(SkeletonHelper, [{\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      var bones = this.bones;\n      var geometry = this.geometry;\n      var position = geometry.getAttribute('position');\n\n      _matrixWorldInv.copy(this.root.matrixWorld).invert();\n\n      for (var _i293 = 0, j = 0; _i293 < bones.length; _i293++) {\n        var bone = bones[_i293];\n\n        if (bone.parent && bone.parent.isBone) {\n          _boneMatrix.multiplyMatrices(_matrixWorldInv, bone.matrixWorld);\n\n          _vector$2.setFromMatrixPosition(_boneMatrix);\n\n          position.setXYZ(j, _vector$2.x, _vector$2.y, _vector$2.z);\n\n          _boneMatrix.multiplyMatrices(_matrixWorldInv, bone.parent.matrixWorld);\n\n          _vector$2.setFromMatrixPosition(_boneMatrix);\n\n          position.setXYZ(j + 1, _vector$2.x, _vector$2.y, _vector$2.z);\n          j += 2;\n        }\n      }\n\n      geometry.getAttribute('position').needsUpdate = true;\n\n      _get(_getPrototypeOf(SkeletonHelper.prototype), \"updateMatrixWorld\", this).call(this, force);\n    }\n  }]);\n\n  return SkeletonHelper;\n}(LineSegments);\n\nfunction getBoneList(object) {\n  var boneList = [];\n\n  if (object && object.isBone) {\n    boneList.push(object);\n  }\n\n  for (var _i294 = 0; _i294 < object.children.length; _i294++) {\n    boneList.push.apply(boneList, getBoneList(object.children[_i294]));\n  }\n\n  return boneList;\n}\n\nvar GridHelper = /*#__PURE__*/function (_LineSegments2) {\n  _inherits(GridHelper, _LineSegments2);\n\n  var _super113 = _createSuper(GridHelper);\n\n  function GridHelper() {\n    var _this98;\n\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n    var divisions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n    var color1 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0x444444;\n    var color2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0x888888;\n\n    _classCallCheck(this, GridHelper);\n\n    color1 = new Color(color1);\n    color2 = new Color(color2);\n    var center = divisions / 2;\n    var step = size / divisions;\n    var halfSize = size / 2;\n    var vertices = [],\n        colors = [];\n\n    for (var _i295 = 0, j = 0, k = -halfSize; _i295 <= divisions; _i295++, k += step) {\n      vertices.push(-halfSize, 0, k, halfSize, 0, k);\n      vertices.push(k, 0, -halfSize, k, 0, halfSize);\n      var color = _i295 === center ? color1 : color2;\n      color.toArray(colors, j);\n      j += 3;\n      color.toArray(colors, j);\n      j += 3;\n      color.toArray(colors, j);\n      j += 3;\n      color.toArray(colors, j);\n      j += 3;\n    }\n\n    var geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('color', new Float32BufferAttribute(colors, 3));\n    var material = new LineBasicMaterial({\n      vertexColors: true,\n      toneMapped: false\n    });\n    _this98 = _super113.call(this, geometry, material);\n    _this98.type = 'GridHelper';\n    return _this98;\n  }\n\n  return GridHelper;\n}(LineSegments);\n\nvar _floatView = new Float32Array(1);\n\nvar _int32View = new Int32Array(_floatView.buffer);\n\nvar DataUtils = /*#__PURE__*/function () {\n  function DataUtils() {\n    _classCallCheck(this, DataUtils);\n  }\n\n  _createClass(DataUtils, null, [{\n    key: \"toHalfFloat\",\n    value: // Converts float32 to float16 (stored as uint16 value).\n    function toHalfFloat(val) {\n      // Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n      /* This method is faster than the OpenEXR implementation (very often\n      * used, eg. in Ogre), with the additional benefit of rounding, inspired\n      * by James Tursa?s half-precision code. */\n      _floatView[0] = val;\n      var x = _int32View[0];\n      var bits = x >> 16 & 0x8000;\n      /* Get the sign */\n\n      var m = x >> 12 & 0x07ff;\n      /* Keep one extra bit for rounding */\n\n      var e = x >> 23 & 0xff;\n      /* Using int is faster here */\n\n      /* If zero, or denormal, or exponent underflows too much for a denormal\n      \t* half, return signed zero. */\n\n      if (e < 103) return bits;\n      /* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\n      if (e > 142) {\n        bits |= 0x7c00;\n        /* If exponent was 0xff and one mantissa bit was set, it means NaN,\n        \t\t\t* not Inf, so make sure we set one mantissa bit too. */\n\n        bits |= (e == 255 ? 0 : 1) && x & 0x007fffff;\n        return bits;\n      }\n      /* If exponent underflows but not too much, return a denormal */\n\n\n      if (e < 113) {\n        m |= 0x0800;\n        /* Extra rounding may overflow and set mantissa to 0 and exponent\n        \t* to 1, which is OK. */\n\n        bits |= (m >> 114 - e) + (m >> 113 - e & 1);\n        return bits;\n      }\n\n      bits |= e - 112 << 10 | m >> 1;\n      /* Extra rounding. An overflow will set mantissa to 0 and increment\n      \t* the exponent, which is OK. */\n\n      bits += m & 1;\n      return bits;\n    }\n  }]);\n\n  return DataUtils;\n}(); //\n\n\nCurve.create = function (construct, getPoint) {\n  console.log('THREE.Curve.create() has been deprecated');\n  construct.prototype = Object.create(Curve.prototype);\n  construct.prototype.constructor = construct;\n  construct.prototype.getPoint = getPoint;\n  return construct;\n}; //\n\n\nPath.prototype.fromPoints = function (points) {\n  console.warn('THREE.Path: .fromPoints() has been renamed to .setFromPoints().');\n  return this.setFromPoints(points);\n};\n\nGridHelper.prototype.setColors = function () {\n  console.error('THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.');\n};\n\nSkeletonHelper.prototype.update = function () {\n  console.error('THREE.SkeletonHelper: update() no longer needs to be called.');\n}; //\n\n\nLoader.prototype.extractUrlBase = function (url) {\n  console.warn('THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.');\n  return LoaderUtils.extractUrlBase(url);\n};\n\nLoader.Handlers = {\n  add: function add() {\n    console.error('THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.');\n  },\n  get: function get() {\n    console.error('THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.');\n  }\n}; //\n\nBox3.prototype.center = function (optionalTarget) {\n  console.warn('THREE.Box3: .center() has been renamed to .getCenter().');\n  return this.getCenter(optionalTarget);\n};\n\nBox3.prototype.empty = function () {\n  console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().');\n  return this.isEmpty();\n};\n\nBox3.prototype.isIntersectionBox = function (box) {\n  console.warn('THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().');\n  return this.intersectsBox(box);\n};\n\nBox3.prototype.isIntersectionSphere = function (sphere) {\n  console.warn('THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().');\n  return this.intersectsSphere(sphere);\n};\n\nBox3.prototype.size = function (optionalTarget) {\n  console.warn('THREE.Box3: .size() has been renamed to .getSize().');\n  return this.getSize(optionalTarget);\n}; //\n\n\nSphere.prototype.empty = function () {\n  console.warn('THREE.Sphere: .empty() has been renamed to .isEmpty().');\n  return this.isEmpty();\n}; //\n\n\nFrustum.prototype.setFromMatrix = function (m) {\n  console.warn('THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().');\n  return this.setFromProjectionMatrix(m);\n}; //\n\n\nMatrix3.prototype.flattenToArrayOffset = function (array, offset) {\n  console.warn('THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.');\n  return this.toArray(array, offset);\n};\n\nMatrix3.prototype.multiplyVector3 = function (vector) {\n  console.warn('THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.');\n  return vector.applyMatrix3(this);\n};\n\nMatrix3.prototype.multiplyVector3Array = function () {\n  console.error('THREE.Matrix3: .multiplyVector3Array() has been removed.');\n};\n\nMatrix3.prototype.applyToBufferAttribute = function (attribute) {\n  console.warn('THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.');\n  return attribute.applyMatrix3(this);\n};\n\nMatrix3.prototype.applyToVector3Array = function () {\n  console.error('THREE.Matrix3: .applyToVector3Array() has been removed.');\n};\n\nMatrix3.prototype.getInverse = function (matrix) {\n  console.warn('THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.');\n  return this.copy(matrix).invert();\n}; //\n\n\nMatrix4.prototype.extractPosition = function (m) {\n  console.warn('THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().');\n  return this.copyPosition(m);\n};\n\nMatrix4.prototype.flattenToArrayOffset = function (array, offset) {\n  console.warn('THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.');\n  return this.toArray(array, offset);\n};\n\nMatrix4.prototype.getPosition = function () {\n  console.warn('THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.');\n  return new Vector3().setFromMatrixColumn(this, 3);\n};\n\nMatrix4.prototype.setRotationFromQuaternion = function (q) {\n  console.warn('THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().');\n  return this.makeRotationFromQuaternion(q);\n};\n\nMatrix4.prototype.multiplyToArray = function () {\n  console.warn('THREE.Matrix4: .multiplyToArray() has been removed.');\n};\n\nMatrix4.prototype.multiplyVector3 = function (vector) {\n  console.warn('THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n  return vector.applyMatrix4(this);\n};\n\nMatrix4.prototype.multiplyVector4 = function (vector) {\n  console.warn('THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n  return vector.applyMatrix4(this);\n};\n\nMatrix4.prototype.multiplyVector3Array = function () {\n  console.error('THREE.Matrix4: .multiplyVector3Array() has been removed.');\n};\n\nMatrix4.prototype.rotateAxis = function (v) {\n  console.warn('THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.');\n  v.transformDirection(this);\n};\n\nMatrix4.prototype.crossVector = function (vector) {\n  console.warn('THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n  return vector.applyMatrix4(this);\n};\n\nMatrix4.prototype.translate = function () {\n  console.error('THREE.Matrix4: .translate() has been removed.');\n};\n\nMatrix4.prototype.rotateX = function () {\n  console.error('THREE.Matrix4: .rotateX() has been removed.');\n};\n\nMatrix4.prototype.rotateY = function () {\n  console.error('THREE.Matrix4: .rotateY() has been removed.');\n};\n\nMatrix4.prototype.rotateZ = function () {\n  console.error('THREE.Matrix4: .rotateZ() has been removed.');\n};\n\nMatrix4.prototype.rotateByAxis = function () {\n  console.error('THREE.Matrix4: .rotateByAxis() has been removed.');\n};\n\nMatrix4.prototype.applyToBufferAttribute = function (attribute) {\n  console.warn('THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.');\n  return attribute.applyMatrix4(this);\n};\n\nMatrix4.prototype.applyToVector3Array = function () {\n  console.error('THREE.Matrix4: .applyToVector3Array() has been removed.');\n};\n\nMatrix4.prototype.makeFrustum = function (left, right, bottom, top, near, far) {\n  console.warn('THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.');\n  return this.makePerspective(left, right, top, bottom, near, far);\n};\n\nMatrix4.prototype.getInverse = function (matrix) {\n  console.warn('THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.');\n  return this.copy(matrix).invert();\n}; //\n\n\nPlane.prototype.isIntersectionLine = function (line) {\n  console.warn('THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().');\n  return this.intersectsLine(line);\n}; //\n\n\nQuaternion.prototype.multiplyVector3 = function (vector) {\n  console.warn('THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.');\n  return vector.applyQuaternion(this);\n};\n\nQuaternion.prototype.inverse = function () {\n  console.warn('THREE.Quaternion: .inverse() has been renamed to invert().');\n  return this.invert();\n}; //\n\n\nRay.prototype.isIntersectionBox = function (box) {\n  console.warn('THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().');\n  return this.intersectsBox(box);\n};\n\nRay.prototype.isIntersectionPlane = function (plane) {\n  console.warn('THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().');\n  return this.intersectsPlane(plane);\n};\n\nRay.prototype.isIntersectionSphere = function (sphere) {\n  console.warn('THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().');\n  return this.intersectsSphere(sphere);\n}; //\n\n\nTriangle.prototype.area = function () {\n  console.warn('THREE.Triangle: .area() has been renamed to .getArea().');\n  return this.getArea();\n};\n\nTriangle.prototype.barycoordFromPoint = function (point, target) {\n  console.warn('THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().');\n  return this.getBarycoord(point, target);\n};\n\nTriangle.prototype.midpoint = function (target) {\n  console.warn('THREE.Triangle: .midpoint() has been renamed to .getMidpoint().');\n  return this.getMidpoint(target);\n};\n\nTriangle.prototypenormal = function (target) {\n  console.warn('THREE.Triangle: .normal() has been renamed to .getNormal().');\n  return this.getNormal(target);\n};\n\nTriangle.prototype.plane = function (target) {\n  console.warn('THREE.Triangle: .plane() has been renamed to .getPlane().');\n  return this.getPlane(target);\n};\n\nTriangle.barycoordFromPoint = function (point, a, b, c, target) {\n  console.warn('THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().');\n  return Triangle.getBarycoord(point, a, b, c, target);\n};\n\nTriangle.normal = function (a, b, c, target) {\n  console.warn('THREE.Triangle: .normal() has been renamed to .getNormal().');\n  return Triangle.getNormal(a, b, c, target);\n}; //\n\n\nShape.prototype.extractAllPoints = function (divisions) {\n  console.warn('THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.');\n  return this.extractPoints(divisions);\n};\n\nShape.prototype.extrude = function (options) {\n  console.warn('THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.');\n  return new ExtrudeGeometry(this, options);\n};\n\nShape.prototype.makeGeometry = function (options) {\n  console.warn('THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.');\n  return new ShapeGeometry(this, options);\n}; //\n\n\nVector2.prototype.fromAttribute = function (attribute, index, offset) {\n  console.warn('THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().');\n  return this.fromBufferAttribute(attribute, index, offset);\n};\n\nVector2.prototype.distanceToManhattan = function (v) {\n  console.warn('THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().');\n  return this.manhattanDistanceTo(v);\n};\n\nVector2.prototype.lengthManhattan = function () {\n  console.warn('THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().');\n  return this.manhattanLength();\n}; //\n\n\nVector3.prototype.setEulerFromRotationMatrix = function () {\n  console.error('THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.');\n};\n\nVector3.prototype.setEulerFromQuaternion = function () {\n  console.error('THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.');\n};\n\nVector3.prototype.getPositionFromMatrix = function (m) {\n  console.warn('THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().');\n  return this.setFromMatrixPosition(m);\n};\n\nVector3.prototype.getScaleFromMatrix = function (m) {\n  console.warn('THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().');\n  return this.setFromMatrixScale(m);\n};\n\nVector3.prototype.getColumnFromMatrix = function (index, matrix) {\n  console.warn('THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().');\n  return this.setFromMatrixColumn(matrix, index);\n};\n\nVector3.prototype.applyProjection = function (m) {\n  console.warn('THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.');\n  return this.applyMatrix4(m);\n};\n\nVector3.prototype.fromAttribute = function (attribute, index, offset) {\n  console.warn('THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().');\n  return this.fromBufferAttribute(attribute, index, offset);\n};\n\nVector3.prototype.distanceToManhattan = function (v) {\n  console.warn('THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().');\n  return this.manhattanDistanceTo(v);\n};\n\nVector3.prototype.lengthManhattan = function () {\n  console.warn('THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().');\n  return this.manhattanLength();\n}; //\n\n\nVector4.prototype.fromAttribute = function (attribute, index, offset) {\n  console.warn('THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().');\n  return this.fromBufferAttribute(attribute, index, offset);\n};\n\nVector4.prototype.lengthManhattan = function () {\n  console.warn('THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().');\n  return this.manhattanLength();\n}; //\n\n\nObject3D.prototype.getChildByName = function (name) {\n  console.warn('THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().');\n  return this.getObjectByName(name);\n};\n\nObject3D.prototype.renderDepth = function () {\n  console.warn('THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.');\n};\n\nObject3D.prototype.translate = function (distance, axis) {\n  console.warn('THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.');\n  return this.translateOnAxis(axis, distance);\n};\n\nObject3D.prototype.getWorldRotation = function () {\n  console.error('THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.');\n};\n\nObject3D.prototype.applyMatrix = function (matrix) {\n  console.warn('THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().');\n  return this.applyMatrix4(matrix);\n};\n\nObject.defineProperties(Object3D.prototype, {\n  eulerOrder: {\n    get: function get() {\n      console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');\n      return this.rotation.order;\n    },\n    set: function set(value) {\n      console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');\n      this.rotation.order = value;\n    }\n  },\n  useQuaternion: {\n    get: function get() {\n      console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');\n    },\n    set: function set() {\n      console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');\n    }\n  }\n});\n\nMesh.prototype.setDrawMode = function () {\n  console.error('THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.');\n};\n\nObject.defineProperties(Mesh.prototype, {\n  drawMode: {\n    get: function get() {\n      console.error('THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.');\n      return TrianglesDrawMode;\n    },\n    set: function set() {\n      console.error('THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.');\n    }\n  }\n});\n\nSkinnedMesh.prototype.initBones = function () {\n  console.error('THREE.SkinnedMesh: initBones() has been removed.');\n}; //\n\n\nPerspectiveCamera.prototype.setLens = function (focalLength, filmGauge) {\n  console.warn('THREE.PerspectiveCamera.setLens is deprecated. ' + 'Use .setFocalLength and .filmGauge for a photographic setup.');\n  if (filmGauge !== undefined) this.filmGauge = filmGauge;\n  this.setFocalLength(focalLength);\n}; //\n\n\nObject.defineProperties(Light.prototype, {\n  onlyShadow: {\n    set: function set() {\n      console.warn('THREE.Light: .onlyShadow has been removed.');\n    }\n  },\n  shadowCameraFov: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraFov is now .shadow.camera.fov.');\n      this.shadow.camera.fov = value;\n    }\n  },\n  shadowCameraLeft: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraLeft is now .shadow.camera.left.');\n      this.shadow.camera.left = value;\n    }\n  },\n  shadowCameraRight: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraRight is now .shadow.camera.right.');\n      this.shadow.camera.right = value;\n    }\n  },\n  shadowCameraTop: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraTop is now .shadow.camera.top.');\n      this.shadow.camera.top = value;\n    }\n  },\n  shadowCameraBottom: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.');\n      this.shadow.camera.bottom = value;\n    }\n  },\n  shadowCameraNear: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraNear is now .shadow.camera.near.');\n      this.shadow.camera.near = value;\n    }\n  },\n  shadowCameraFar: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowCameraFar is now .shadow.camera.far.');\n      this.shadow.camera.far = value;\n    }\n  },\n  shadowCameraVisible: {\n    set: function set() {\n      console.warn('THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.');\n    }\n  },\n  shadowBias: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowBias is now .shadow.bias.');\n      this.shadow.bias = value;\n    }\n  },\n  shadowDarkness: {\n    set: function set() {\n      console.warn('THREE.Light: .shadowDarkness has been removed.');\n    }\n  },\n  shadowMapWidth: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.');\n      this.shadow.mapSize.width = value;\n    }\n  },\n  shadowMapHeight: {\n    set: function set(value) {\n      console.warn('THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.');\n      this.shadow.mapSize.height = value;\n    }\n  }\n}); //\n\nObject.defineProperties(BufferAttribute.prototype, {\n  length: {\n    get: function get() {\n      console.warn('THREE.BufferAttribute: .length has been deprecated. Use .count instead.');\n      return this.array.length;\n    }\n  },\n  dynamic: {\n    get: function get() {\n      console.warn('THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.');\n      return this.usage === DynamicDrawUsage;\n    },\n    set: function set() {\n      console.warn('THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.');\n      this.setUsage(DynamicDrawUsage);\n    }\n  }\n});\n\nBufferAttribute.prototype.setDynamic = function (value) {\n  console.warn('THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.');\n  this.setUsage(value === true ? DynamicDrawUsage : StaticDrawUsage);\n  return this;\n};\n\nBufferAttribute.prototype.copyIndicesArray = function () {\n  console.error('THREE.BufferAttribute: .copyIndicesArray() has been removed.');\n}, BufferAttribute.prototype.setArray = function () {\n  console.error('THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers');\n}; //\n\nBufferGeometry.prototype.addIndex = function (index) {\n  console.warn('THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().');\n  this.setIndex(index);\n};\n\nBufferGeometry.prototype.addAttribute = function (name, attribute) {\n  console.warn('THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().');\n\n  if (!(attribute && attribute.isBufferAttribute) && !(attribute && attribute.isInterleavedBufferAttribute)) {\n    console.warn('THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).');\n    return this.setAttribute(name, new BufferAttribute(arguments[1], arguments[2]));\n  }\n\n  if (name === 'index') {\n    console.warn('THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.');\n    this.setIndex(attribute);\n    return this;\n  }\n\n  return this.setAttribute(name, attribute);\n};\n\nBufferGeometry.prototype.addDrawCall = function (start, count, indexOffset) {\n  if (indexOffset !== undefined) {\n    console.warn('THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.');\n  }\n\n  console.warn('THREE.BufferGeometry: .addDrawCall() is now .addGroup().');\n  this.addGroup(start, count);\n};\n\nBufferGeometry.prototype.clearDrawCalls = function () {\n  console.warn('THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().');\n  this.clearGroups();\n};\n\nBufferGeometry.prototype.computeOffsets = function () {\n  console.warn('THREE.BufferGeometry: .computeOffsets() has been removed.');\n};\n\nBufferGeometry.prototype.removeAttribute = function (name) {\n  console.warn('THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().');\n  return this.deleteAttribute(name);\n};\n\nBufferGeometry.prototype.applyMatrix = function (matrix) {\n  console.warn('THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().');\n  return this.applyMatrix4(matrix);\n};\n\nObject.defineProperties(BufferGeometry.prototype, {\n  drawcalls: {\n    get: function get() {\n      console.error('THREE.BufferGeometry: .drawcalls has been renamed to .groups.');\n      return this.groups;\n    }\n  },\n  offsets: {\n    get: function get() {\n      console.warn('THREE.BufferGeometry: .offsets has been renamed to .groups.');\n      return this.groups;\n    }\n  }\n});\n\nInterleavedBuffer.prototype.setDynamic = function (value) {\n  console.warn('THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.');\n  this.setUsage(value === true ? DynamicDrawUsage : StaticDrawUsage);\n  return this;\n};\n\nInterleavedBuffer.prototype.setArray = function () {\n  console.error('THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers');\n}; //\n\n\nExtrudeGeometry.prototype.getArrays = function () {\n  console.error('THREE.ExtrudeGeometry: .getArrays() has been removed.');\n};\n\nExtrudeGeometry.prototype.addShapeList = function () {\n  console.error('THREE.ExtrudeGeometry: .addShapeList() has been removed.');\n};\n\nExtrudeGeometry.prototype.addShape = function () {\n  console.error('THREE.ExtrudeGeometry: .addShape() has been removed.');\n}; //\n\n\nScene.prototype.dispose = function () {\n  console.error('THREE.Scene: .dispose() has been removed.');\n}; //\n\n\nObject.defineProperties(Material$1.prototype, {\n  wrapAround: {\n    get: function get() {\n      console.warn('THREE.Material: .wrapAround has been removed.');\n    },\n    set: function set() {\n      console.warn('THREE.Material: .wrapAround has been removed.');\n    }\n  },\n  overdraw: {\n    get: function get() {\n      console.warn('THREE.Material: .overdraw has been removed.');\n    },\n    set: function set() {\n      console.warn('THREE.Material: .overdraw has been removed.');\n    }\n  },\n  wrapRGB: {\n    get: function get() {\n      console.warn('THREE.Material: .wrapRGB has been removed.');\n      return new Color();\n    }\n  },\n  shading: {\n    get: function get() {\n      console.error('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n    },\n    set: function set(value) {\n      console.warn('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n      this.flatShading = value === FlatShading;\n    }\n  },\n  stencilMask: {\n    get: function get() {\n      console.warn('THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.');\n      return this.stencilFuncMask;\n    },\n    set: function set(value) {\n      console.warn('THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.');\n      this.stencilFuncMask = value;\n    }\n  },\n  vertexTangents: {\n    get: function get() {\n      console.warn('THREE.' + this.type + ': .vertexTangents has been removed.');\n    },\n    set: function set() {\n      console.warn('THREE.' + this.type + ': .vertexTangents has been removed.');\n    }\n  }\n});\nObject.defineProperties(ShaderMaterial.prototype, {\n  derivatives: {\n    get: function get() {\n      console.warn('THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');\n      return this.extensions.derivatives;\n    },\n    set: function set(value) {\n      console.warn('THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');\n      this.extensions.derivatives = value;\n    }\n  }\n}); //\n\nWebGLRenderer.prototype.clearTarget = function (renderTarget, color, depth, stencil) {\n  console.warn('THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.');\n  this.setRenderTarget(renderTarget);\n  this.clear(color, depth, stencil);\n};\n\nWebGLRenderer.prototype.animate = function (callback) {\n  console.warn('THREE.WebGLRenderer: .animate() is now .setAnimationLoop().');\n  this.setAnimationLoop(callback);\n};\n\nWebGLRenderer.prototype.getCurrentRenderTarget = function () {\n  console.warn('THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().');\n  return this.getRenderTarget();\n};\n\nWebGLRenderer.prototype.getMaxAnisotropy = function () {\n  console.warn('THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().');\n  return this.capabilities.getMaxAnisotropy();\n};\n\nWebGLRenderer.prototype.getPrecision = function () {\n  console.warn('THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.');\n  return this.capabilities.precision;\n};\n\nWebGLRenderer.prototype.resetGLState = function () {\n  console.warn('THREE.WebGLRenderer: .resetGLState() is now .state.reset().');\n  return this.state.reset();\n};\n\nWebGLRenderer.prototype.supportsFloatTextures = function () {\n  console.warn('THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).');\n  return this.extensions.get('OES_texture_float');\n};\n\nWebGLRenderer.prototype.supportsHalfFloatTextures = function () {\n  console.warn('THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).');\n  return this.extensions.get('OES_texture_half_float');\n};\n\nWebGLRenderer.prototype.supportsStandardDerivatives = function () {\n  console.warn('THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).');\n  return this.extensions.get('OES_standard_derivatives');\n};\n\nWebGLRenderer.prototype.supportsCompressedTextureS3TC = function () {\n  console.warn('THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).');\n  return this.extensions.get('WEBGL_compressed_texture_s3tc');\n};\n\nWebGLRenderer.prototype.supportsCompressedTexturePVRTC = function () {\n  console.warn('THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).');\n  return this.extensions.get('WEBGL_compressed_texture_pvrtc');\n};\n\nWebGLRenderer.prototype.supportsBlendMinMax = function () {\n  console.warn('THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).');\n  return this.extensions.get('EXT_blend_minmax');\n};\n\nWebGLRenderer.prototype.supportsVertexTextures = function () {\n  console.warn('THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.');\n  return this.capabilities.vertexTextures;\n};\n\nWebGLRenderer.prototype.supportsInstancedArrays = function () {\n  console.warn('THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).');\n  return this.extensions.get('ANGLE_instanced_arrays');\n};\n\nWebGLRenderer.prototype.enableScissorTest = function (boolean) {\n  console.warn('THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().');\n  this.setScissorTest(boolean);\n};\n\nWebGLRenderer.prototype.initMaterial = function () {\n  console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.');\n};\n\nWebGLRenderer.prototype.addPrePlugin = function () {\n  console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.');\n};\n\nWebGLRenderer.prototype.addPostPlugin = function () {\n  console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.');\n};\n\nWebGLRenderer.prototype.updateShadowMap = function () {\n  console.warn('THREE.WebGLRenderer: .updateShadowMap() has been removed.');\n};\n\nWebGLRenderer.prototype.setFaceCulling = function () {\n  console.warn('THREE.WebGLRenderer: .setFaceCulling() has been removed.');\n};\n\nWebGLRenderer.prototype.allocTextureUnit = function () {\n  console.warn('THREE.WebGLRenderer: .allocTextureUnit() has been removed.');\n};\n\nWebGLRenderer.prototype.setTexture = function () {\n  console.warn('THREE.WebGLRenderer: .setTexture() has been removed.');\n};\n\nWebGLRenderer.prototype.setTexture2D = function () {\n  console.warn('THREE.WebGLRenderer: .setTexture2D() has been removed.');\n};\n\nWebGLRenderer.prototype.setTextureCube = function () {\n  console.warn('THREE.WebGLRenderer: .setTextureCube() has been removed.');\n};\n\nWebGLRenderer.prototype.getActiveMipMapLevel = function () {\n  console.warn('THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().');\n  return this.getActiveMipmapLevel();\n};\n\nObject.defineProperties(WebGLRenderer.prototype, {\n  shadowMapEnabled: {\n    get: function get() {\n      return this.shadowMap.enabled;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.');\n      this.shadowMap.enabled = value;\n    }\n  },\n  shadowMapType: {\n    get: function get() {\n      return this.shadowMap.type;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.');\n      this.shadowMap.type = value;\n    }\n  },\n  shadowMapCullFace: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  context: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.');\n      return this.getContext();\n    }\n  },\n  vr: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .vr has been renamed to .xr');\n      return this.xr;\n    }\n  },\n  gammaInput: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.');\n      return false;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.');\n    }\n  },\n  gammaOutput: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.');\n      return false;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.');\n      this.outputEncoding = value === true ? sRGBEncoding : LinearEncoding;\n    }\n  },\n  toneMappingWhitePoint: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.');\n      return 1.0;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.');\n    }\n  }\n});\nObject.defineProperties(WebGLShadowMap.prototype, {\n  cullFace: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  renderReverseSided: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  renderSingleSided: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function set() {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.');\n    }\n  }\n}); //\n\nObject.defineProperties(WebGLRenderTarget.prototype, {\n  wrapS: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');\n      return this.texture.wrapS;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');\n      this.texture.wrapS = value;\n    }\n  },\n  wrapT: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');\n      return this.texture.wrapT;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');\n      this.texture.wrapT = value;\n    }\n  },\n  magFilter: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');\n      return this.texture.magFilter;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');\n      this.texture.magFilter = value;\n    }\n  },\n  minFilter: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');\n      return this.texture.minFilter;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');\n      this.texture.minFilter = value;\n    }\n  },\n  anisotropy: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');\n      return this.texture.anisotropy;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');\n      this.texture.anisotropy = value;\n    }\n  },\n  offset: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');\n      return this.texture.offset;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');\n      this.texture.offset = value;\n    }\n  },\n  repeat: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');\n      return this.texture.repeat;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');\n      this.texture.repeat = value;\n    }\n  },\n  format: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');\n      return this.texture.format;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');\n      this.texture.format = value;\n    }\n  },\n  type: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');\n      return this.texture.type;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');\n      this.texture.type = value;\n    }\n  },\n  generateMipmaps: {\n    get: function get() {\n      console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');\n      return this.texture.generateMipmaps;\n    },\n    set: function set(value) {\n      console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');\n      this.texture.generateMipmaps = value;\n    }\n  }\n}); //\n\nAudio.prototype.load = function (file) {\n  console.warn('THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.');\n  var scope = this;\n  var audioLoader = new AudioLoader();\n  audioLoader.load(file, function (buffer) {\n    scope.setBuffer(buffer);\n  });\n  return this;\n}; //\n\n\nCubeCamera.prototype.updateCubeMap = function (renderer, scene) {\n  console.warn('THREE.CubeCamera: .updateCubeMap() is now .update().');\n  return this.update(renderer, scene);\n};\n\nCubeCamera.prototype.clear = function (renderer, color, depth, stencil) {\n  console.warn('THREE.CubeCamera: .clear() is now .renderTarget.clear().');\n  return this.renderTarget.clear(renderer, color, depth, stencil);\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function (url, mapping, onLoad, onError) {\n  console.warn('THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.');\n  var loader = new TextureLoader();\n  loader.setCrossOrigin(this.crossOrigin);\n  var texture = loader.load(url, onLoad, undefined, onError);\n  if (mapping) texture.mapping = mapping;\n  return texture;\n};\n\nImageUtils.loadTextureCube = function (urls, mapping, onLoad, onError) {\n  console.warn('THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.');\n  var loader = new CubeTextureLoader();\n  loader.setCrossOrigin(this.crossOrigin);\n  var texture = loader.load(urls, onLoad, undefined, onError);\n  if (mapping) texture.mapping = mapping;\n  return texture;\n};\n\nImageUtils.loadCompressedTexture = function () {\n  console.error('THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.');\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n  console.error('THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.');\n};\n\nif (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n  /* eslint-disable no-undef */\n  __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('register', {\n    detail: {\n      revision: REVISION\n    }\n  }));\n  /* eslint-enable no-undef */\n\n}\n\nif (typeof window !== 'undefined') {\n  if (window.__THREE__) {\n    console.warn('WARNING: Multiple instances of Three.js being imported.');\n  } else {\n    window.__THREE__ = REVISION;\n  }\n}\n\nvar _taskCache$1 = new WeakMap();\n\nvar DRACOLoader = /*#__PURE__*/function (_Loader9) {\n  _inherits(DRACOLoader, _Loader9);\n\n  var _super114 = _createSuper(DRACOLoader);\n\n  function DRACOLoader(manager) {\n    var _this99;\n\n    _classCallCheck(this, DRACOLoader);\n\n    _this99 = _super114.call(this, manager);\n    _this99.decoderPath = '';\n    _this99.decoderConfig = {};\n    _this99.decoderBinary = null;\n    _this99.decoderPending = null;\n    _this99.workerLimit = 4;\n    _this99.workerPool = [];\n    _this99.workerNextTaskID = 1;\n    _this99.workerSourceURL = '';\n    _this99.defaultAttributeIDs = {\n      position: 'POSITION',\n      normal: 'NORMAL',\n      color: 'COLOR',\n      uv: 'TEX_COORD'\n    };\n    _this99.defaultAttributeTypes = {\n      position: 'Float32Array',\n      normal: 'Float32Array',\n      color: 'Float32Array',\n      uv: 'Float32Array'\n    };\n    return _this99;\n  }\n\n  _createClass(DRACOLoader, [{\n    key: \"setDecoderPath\",\n    value: function setDecoderPath(path) {\n      this.decoderPath = path;\n      return this;\n    }\n  }, {\n    key: \"setDecoderConfig\",\n    value: function setDecoderConfig(config) {\n      this.decoderConfig = config;\n      return this;\n    }\n  }, {\n    key: \"setWorkerLimit\",\n    value: function setWorkerLimit(workerLimit) {\n      this.workerLimit = workerLimit;\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var _this100 = this;\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (buffer) {\n        var taskConfig = {\n          attributeIDs: _this100.defaultAttributeIDs,\n          attributeTypes: _this100.defaultAttributeTypes,\n          useUniqueIDs: false\n        };\n\n        _this100.decodeGeometry(buffer, taskConfig).then(onLoad).catch(onError);\n      }, onProgress, onError);\n    }\n    /** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\n  }, {\n    key: \"decodeDracoFile\",\n    value: function decodeDracoFile(buffer, callback, attributeIDs, attributeTypes) {\n      var taskConfig = {\n        attributeIDs: attributeIDs || this.defaultAttributeIDs,\n        attributeTypes: attributeTypes || this.defaultAttributeTypes,\n        useUniqueIDs: !!attributeIDs\n      };\n      this.decodeGeometry(buffer, taskConfig).then(callback);\n    }\n  }, {\n    key: \"decodeGeometry\",\n    value: function decodeGeometry(buffer, taskConfig) {\n      var _this101 = this;\n\n      // TODO: For backward-compatibility, support 'attributeTypes' objects containing\n      // references (rather than names) to typed array constructors. These must be\n      // serialized before sending them to the worker.\n      for (var attribute in taskConfig.attributeTypes) {\n        var type = taskConfig.attributeTypes[attribute];\n\n        if (type.BYTES_PER_ELEMENT !== undefined) {\n          taskConfig.attributeTypes[attribute] = type.name;\n        }\n      } //\n\n\n      var taskKey = JSON.stringify(taskConfig); // Check for an existing task using this buffer. A transferred buffer cannot be transferred\n      // again from this thread.\n\n      if (_taskCache$1.has(buffer)) {\n        var cachedTask = _taskCache$1.get(buffer);\n\n        if (cachedTask.key === taskKey) {\n          return cachedTask.promise;\n        } else if (buffer.byteLength === 0) {\n          // Technically, it would be possible to wait for the previous task to complete,\n          // transfer the buffer back, and decode again with the second configuration. That\n          // is complex, and I don't know of any reason to decode a Draco buffer twice in\n          // different ways, so this is left unimplemented.\n          throw new Error('THREE.DRACOLoader: Unable to re-decode a buffer with different ' + 'settings. Buffer has already been transferred.');\n        }\n      } //\n\n\n      var worker;\n      var taskID = this.workerNextTaskID++;\n      var taskCost = buffer.byteLength; // Obtain a worker and assign a task, and construct a geometry instance\n      // when the task completes.\n\n      var geometryPending = this._getWorker(taskID, taskCost).then(function (_worker) {\n        worker = _worker;\n        return new Promise(function (resolve, reject) {\n          worker._callbacks[taskID] = {\n            resolve: resolve,\n            reject: reject\n          };\n          worker.postMessage({\n            type: 'decode',\n            id: taskID,\n            taskConfig: taskConfig,\n            buffer: buffer\n          }, [buffer]); // this.debug();\n        });\n      }).then(function (message) {\n        return _this101._createGeometry(message.geometry);\n      }); // Remove task from the task list.\n      // Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\n\n      geometryPending.catch(function () {\n        return true;\n      }).then(function () {\n        if (worker && taskID) {\n          _this101._releaseTask(worker, taskID); // this.debug();\n\n        }\n      }); // Cache the task result.\n\n      _taskCache$1.set(buffer, {\n        key: taskKey,\n        promise: geometryPending\n      });\n\n      return geometryPending;\n    }\n  }, {\n    key: \"_createGeometry\",\n    value: function _createGeometry(geometryData) {\n      var geometry = new BufferGeometry();\n\n      if (geometryData.index) {\n        geometry.setIndex(new BufferAttribute(geometryData.index.array, 1));\n      }\n\n      for (var _i296 = 0; _i296 < geometryData.attributes.length; _i296++) {\n        var attribute = geometryData.attributes[_i296];\n        var name = attribute.name;\n        var array = attribute.array;\n        var itemSize = attribute.itemSize;\n        geometry.setAttribute(name, new BufferAttribute(array, itemSize));\n      }\n\n      return geometry;\n    }\n  }, {\n    key: \"_loadLibrary\",\n    value: function _loadLibrary(url, responseType) {\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.decoderPath);\n      loader.setResponseType(responseType);\n      loader.setWithCredentials(this.withCredentials);\n      return new Promise(function (resolve, reject) {\n        loader.load(url, resolve, undefined, reject);\n      });\n    }\n  }, {\n    key: \"preload\",\n    value: function preload() {\n      this._initDecoder();\n\n      return this;\n    }\n  }, {\n    key: \"_initDecoder\",\n    value: function _initDecoder() {\n      var _this102 = this;\n\n      if (this.decoderPending) return this.decoderPending;\n      var useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n      var librariesPending = [];\n\n      if (useJS) {\n        librariesPending.push(this._loadLibrary('draco_decoder.js', 'text'));\n      } else {\n        librariesPending.push(this._loadLibrary('draco_wasm_wrapper.js', 'text'));\n        librariesPending.push(this._loadLibrary('draco_decoder.wasm', 'arraybuffer'));\n      }\n\n      this.decoderPending = Promise.all(librariesPending).then(function (libraries) {\n        var jsContent = libraries[0];\n\n        if (!useJS) {\n          _this102.decoderConfig.wasmBinary = libraries[1];\n        }\n\n        var fn = DRACOWorker.toString();\n        var body = ['/* draco decoder */', jsContent, '', '/* worker */', fn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))].join('\\n');\n        _this102.workerSourceURL = URL.createObjectURL(new Blob([body]));\n      });\n      return this.decoderPending;\n    }\n  }, {\n    key: \"_getWorker\",\n    value: function _getWorker(taskID, taskCost) {\n      var _this103 = this;\n\n      return this._initDecoder().then(function () {\n        if (_this103.workerPool.length < _this103.workerLimit) {\n          var _worker2 = new Worker(_this103.workerSourceURL);\n\n          _worker2._callbacks = {};\n          _worker2._taskCosts = {};\n          _worker2._taskLoad = 0;\n\n          _worker2.postMessage({\n            type: 'init',\n            decoderConfig: _this103.decoderConfig\n          });\n\n          _worker2.onmessage = function (e) {\n            var message = e.data;\n\n            switch (message.type) {\n              case 'decode':\n                _worker2._callbacks[message.id].resolve(message);\n\n                break;\n\n              case 'error':\n                _worker2._callbacks[message.id].reject(message);\n\n                break;\n\n              default:\n                console.error('THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"');\n            }\n          };\n\n          _this103.workerPool.push(_worker2);\n        } else {\n          _this103.workerPool.sort(function (a, b) {\n            return a._taskLoad > b._taskLoad ? -1 : 1;\n          });\n        }\n\n        var worker = _this103.workerPool[_this103.workerPool.length - 1];\n        worker._taskCosts[taskID] = taskCost;\n        worker._taskLoad += taskCost;\n        return worker;\n      });\n    }\n  }, {\n    key: \"_releaseTask\",\n    value: function _releaseTask(worker, taskID) {\n      worker._taskLoad -= worker._taskCosts[taskID];\n      delete worker._callbacks[taskID];\n      delete worker._taskCosts[taskID];\n    }\n  }, {\n    key: \"debug\",\n    value: function debug() {\n      console.log('Task load: ', this.workerPool.map(function (worker) {\n        return worker._taskLoad;\n      }));\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      for (var _i297 = 0; _i297 < this.workerPool.length; ++_i297) {\n        this.workerPool[_i297].terminate();\n      }\n\n      this.workerPool.length = 0;\n      return this;\n    }\n  }]);\n\n  return DRACOLoader;\n}(Loader);\n/* WEB WORKER */\n\n\nfunction DRACOWorker() {\n  var decoderConfig;\n  var decoderPending;\n\n  onmessage = function onmessage(e) {\n    var message = e.data;\n\n    switch (message.type) {\n      case 'init':\n        decoderConfig = message.decoderConfig;\n        decoderPending = new Promise(function (resolve\n        /*, reject*/\n        ) {\n          decoderConfig.onModuleLoaded = function (draco) {\n            // Module is Promise-like. Wrap before resolving to avoid loop.\n            resolve({\n              draco: draco\n            });\n          };\n\n          DracoDecoderModule(decoderConfig); // eslint-disable-line no-undef\n        });\n        break;\n\n      case 'decode':\n        var buffer = message.buffer;\n        var taskConfig = message.taskConfig;\n        decoderPending.then(function (module) {\n          var draco = module.draco;\n          var decoder = new draco.Decoder();\n          var decoderBuffer = new draco.DecoderBuffer();\n          decoderBuffer.Init(new Int8Array(buffer), buffer.byteLength);\n\n          try {\n            var geometry = decodeGeometry(draco, decoder, decoderBuffer, taskConfig);\n            var buffers = geometry.attributes.map(function (attr) {\n              return attr.array.buffer;\n            });\n            if (geometry.index) buffers.push(geometry.index.array.buffer);\n            self.postMessage({\n              type: 'decode',\n              id: message.id,\n              geometry: geometry\n            }, buffers);\n          } catch (error) {\n            console.error(error);\n            self.postMessage({\n              type: 'error',\n              id: message.id,\n              error: error.message\n            });\n          } finally {\n            draco.destroy(decoderBuffer);\n            draco.destroy(decoder);\n          }\n        });\n        break;\n    }\n  };\n\n  function decodeGeometry(draco, decoder, decoderBuffer, taskConfig) {\n    var attributeIDs = taskConfig.attributeIDs;\n    var attributeTypes = taskConfig.attributeTypes;\n    var dracoGeometry;\n    var decodingStatus;\n    var geometryType = decoder.GetEncodedGeometryType(decoderBuffer);\n\n    if (geometryType === draco.TRIANGULAR_MESH) {\n      dracoGeometry = new draco.Mesh();\n      decodingStatus = decoder.DecodeBufferToMesh(decoderBuffer, dracoGeometry);\n    } else if (geometryType === draco.POINT_CLOUD) {\n      dracoGeometry = new draco.PointCloud();\n      decodingStatus = decoder.DecodeBufferToPointCloud(decoderBuffer, dracoGeometry);\n    } else {\n      throw new Error('THREE.DRACOLoader: Unexpected geometry type.');\n    }\n\n    if (!decodingStatus.ok() || dracoGeometry.ptr === 0) {\n      throw new Error('THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg());\n    }\n\n    var geometry = {\n      index: null,\n      attributes: []\n    }; // Gather all vertex attributes.\n\n    for (var attributeName in attributeIDs) {\n      var attributeType = self[attributeTypes[attributeName]];\n      var attribute = void 0;\n      var attributeID = void 0; // A Draco file may be created with default vertex attributes, whose attribute IDs\n      // are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n      // a Draco file may contain a custom set of attributes, identified by known unique\n      // IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\n      if (taskConfig.useUniqueIDs) {\n        attributeID = attributeIDs[attributeName];\n        attribute = decoder.GetAttributeByUniqueId(dracoGeometry, attributeID);\n      } else {\n        attributeID = decoder.GetAttributeId(dracoGeometry, draco[attributeIDs[attributeName]]);\n        if (attributeID === -1) continue;\n        attribute = decoder.GetAttribute(dracoGeometry, attributeID);\n      }\n\n      geometry.attributes.push(decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute));\n    } // Add index.\n\n\n    if (geometryType === draco.TRIANGULAR_MESH) {\n      geometry.index = decodeIndex(draco, decoder, dracoGeometry);\n    }\n\n    draco.destroy(dracoGeometry);\n    return geometry;\n  }\n\n  function decodeIndex(draco, decoder, dracoGeometry) {\n    var numFaces = dracoGeometry.num_faces();\n    var numIndices = numFaces * 3;\n    var byteLength = numIndices * 4;\n\n    var ptr = draco._malloc(byteLength);\n\n    decoder.GetTrianglesUInt32Array(dracoGeometry, byteLength, ptr);\n    var index = new Uint32Array(draco.HEAPF32.buffer, ptr, numIndices).slice();\n\n    draco._free(ptr);\n\n    return {\n      array: index,\n      itemSize: 1\n    };\n  }\n\n  function decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute) {\n    var numComponents = attribute.num_components();\n    var numPoints = dracoGeometry.num_points();\n    var numValues = numPoints * numComponents;\n    var byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n    var dataType = getDracoDataType(draco, attributeType);\n\n    var ptr = draco._malloc(byteLength);\n\n    decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, dataType, byteLength, ptr);\n    var array = new attributeType(draco.HEAPF32.buffer, ptr, numValues).slice();\n\n    draco._free(ptr);\n\n    return {\n      name: attributeName,\n      array: array,\n      itemSize: numComponents\n    };\n  }\n\n  function getDracoDataType(draco, attributeType) {\n    switch (attributeType) {\n      case Float32Array:\n        return draco.DT_FLOAT32;\n\n      case Int8Array:\n        return draco.DT_INT8;\n\n      case Int16Array:\n        return draco.DT_INT16;\n\n      case Int32Array:\n        return draco.DT_INT32;\n\n      case Uint8Array:\n        return draco.DT_UINT8;\n\n      case Uint16Array:\n        return draco.DT_UINT16;\n\n      case Uint32Array:\n        return draco.DT_UINT32;\n    }\n  }\n}\n\nvar GLTFLoader = /*#__PURE__*/function (_Loader10) {\n  _inherits(GLTFLoader, _Loader10);\n\n  var _super115 = _createSuper(GLTFLoader);\n\n  function GLTFLoader(manager) {\n    var _this104;\n\n    _classCallCheck(this, GLTFLoader);\n\n    _this104 = _super115.call(this, manager);\n    _this104.dracoLoader = null;\n    _this104.ktx2Loader = null;\n    _this104.meshoptDecoder = null;\n    _this104.pluginCallbacks = [];\n\n    _this104.register(function (parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFMaterialsTransmissionExtension$1(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFMaterialsVolumeExtension$1(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFMaterialsIorExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFMaterialsSpecularExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFLightsExtension(parser);\n    });\n\n    _this104.register(function (parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n\n    return _this104;\n  }\n\n  _createClass(GLTFLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath;\n      } else if (this.path !== '') {\n        resourcePath = this.path;\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url);\n      } // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n\n\n      this.manager.itemStart(url);\n\n      var _onError = function _onError(e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      };\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (data) {\n        try {\n          scope.parse(data, resourcePath, function (gltf) {\n            onLoad(gltf);\n            scope.manager.itemEnd(url);\n          }, _onError);\n        } catch (e) {\n          _onError(e);\n        }\n      }, onProgress, _onError);\n    }\n  }, {\n    key: \"setDRACOLoader\",\n    value: function setDRACOLoader(dracoLoader) {\n      this.dracoLoader = dracoLoader;\n      return this;\n    }\n  }, {\n    key: \"setDDSLoader\",\n    value: function setDDSLoader() {\n      throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n    }\n  }, {\n    key: \"setKTX2Loader\",\n    value: function setKTX2Loader(ktx2Loader) {\n      this.ktx2Loader = ktx2Loader;\n      return this;\n    }\n  }, {\n    key: \"setMeshoptDecoder\",\n    value: function setMeshoptDecoder(meshoptDecoder) {\n      this.meshoptDecoder = meshoptDecoder;\n      return this;\n    }\n  }, {\n    key: \"register\",\n    value: function register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data, path, onLoad, onError) {\n      var content;\n      var extensions = {};\n      var plugins = {};\n\n      if (typeof data === 'string') {\n        content = data;\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n          } catch (error) {\n            if (onError) onError(error);\n            return;\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data));\n        }\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n        return;\n      }\n\n      var parser = new GLTFParser(json, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        requestHeader: this.requestHeader,\n        manager: this.manager,\n        ktx2Loader: this.ktx2Loader,\n        meshoptDecoder: this.meshoptDecoder\n      });\n      parser.fileLoader.setRequestHeader(this.requestHeader);\n\n      for (var _i298 = 0; _i298 < this.pluginCallbacks.length; _i298++) {\n        var plugin = this.pluginCallbacks[_i298](parser);\n\n        plugins[plugin.name] = plugin; // Workaround to avoid determining as unknown extension\n        // in addUnknownExtensionsToUserData().\n        // Remove this workaround if we move all the existing\n        // extension handlers to plugin system\n\n        extensions[plugin.name] = true;\n      }\n\n      if (json.extensionsUsed) {\n        for (var _i299 = 0; _i299 < json.extensionsUsed.length; ++_i299) {\n          var extensionName = json.extensionsUsed[_i299];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension$1();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension();\n              break;\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension();\n              break;\n\n            default:\n              if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === undefined) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n              }\n\n          }\n        }\n      }\n\n      parser.setExtensions(extensions);\n      parser.setPlugins(plugins);\n      parser.parse(onLoad, onError);\n    }\n  }]);\n\n  return GLTFLoader;\n}(Loader);\n/* GLTFREGISTRY */\n\n\nfunction GLTFRegistry() {\n  var objects = {};\n  return {\n    get: function get(key) {\n      return objects[key];\n    },\n    add: function add(key, object) {\n      objects[key] = object;\n    },\n    remove: function remove(key) {\n      delete objects[key];\n    },\n    removeAll: function removeAll() {\n      objects = {};\n    }\n  };\n}\n/*********************************/\n\n/********** EXTENSIONS ***********/\n\n/*********************************/\n\n\nvar EXTENSIONS = {\n  KHR_BINARY_GLTF: 'KHR_binary_glTF',\n  KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n  KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n  KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n  KHR_MATERIALS_IOR: 'KHR_materials_ior',\n  KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n  KHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n  KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n  KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n  KHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n  KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n  KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n  KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n  EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n  EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\n\nvar GLTFLightsExtension = /*#__PURE__*/function () {\n  function GLTFLightsExtension(parser) {\n    _classCallCheck(this, GLTFLightsExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL; // Object3D instance caches\n\n    this.cache = {\n      refs: {},\n      uses: {}\n    };\n  }\n\n  _createClass(GLTFLightsExtension, [{\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var parser = this.parser;\n      var nodeDefs = this.parser.json.nodes || [];\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== undefined) {\n          parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n        }\n      }\n    }\n  }, {\n    key: \"_loadLight\",\n    value: function _loadLight(lightIndex) {\n      var parser = this.parser;\n      var cacheKey = 'light:' + lightIndex;\n      var dependency = parser.cache.get(cacheKey);\n      if (dependency) return dependency;\n      var json = parser.json;\n      var extensions = json.extensions && json.extensions[this.name] || {};\n      var lightDefs = extensions.lights || [];\n      var lightDef = lightDefs[lightIndex];\n      var lightNode;\n      var color = new Color(0xffffff);\n      if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n      var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n      switch (lightDef.type) {\n        case 'directional':\n          lightNode = new DirectionalLight(color);\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        case 'point':\n          lightNode = new PointLight(color);\n          lightNode.distance = range;\n          break;\n\n        case 'spot':\n          lightNode = new SpotLight(color);\n          lightNode.distance = range; // Handle spotlight properties.\n\n          lightDef.spot = lightDef.spot || {};\n          lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n          lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n          lightNode.angle = lightDef.spot.outerConeAngle;\n          lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        default:\n          throw new Error('THREE.GLTFLoader: Unexpected light type: ' + lightDef.type);\n      } // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n      // here, because node-level parsing will only override position if explicitly specified.\n\n\n      lightNode.position.set(0, 0, 0);\n      lightNode.decay = 2;\n      if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n      lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex);\n      dependency = Promise.resolve(lightNode);\n      parser.cache.add(cacheKey, dependency);\n      return dependency;\n    }\n  }, {\n    key: \"createNodeAttachment\",\n    value: function createNodeAttachment(nodeIndex) {\n      var self = this;\n      var parser = this.parser;\n      var json = parser.json;\n      var nodeDef = json.nodes[nodeIndex];\n      var lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n      var lightIndex = lightDef.light;\n      if (lightIndex === undefined) return null;\n      return this._loadLight(lightIndex).then(function (light) {\n        return parser._getNodeRef(self.cache, lightIndex, light);\n      });\n    }\n  }]);\n\n  return GLTFLightsExtension;\n}();\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\n\n\nvar GLTFMaterialsUnlitExtension$1 = /*#__PURE__*/function () {\n  function GLTFMaterialsUnlitExtension$1() {\n    _classCallCheck(this, GLTFMaterialsUnlitExtension$1);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  _createClass(GLTFMaterialsUnlitExtension$1, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return MeshBasicMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pending = [];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n      if (metallicRoughness) {\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsUnlitExtension$1;\n}();\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\n\n\nvar GLTFMaterialsClearcoatExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsClearcoatExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsClearcoatExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  _createClass(GLTFMaterialsClearcoatExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.clearcoatFactor !== undefined) {\n        materialParams.clearcoat = extension.clearcoatFactor;\n      }\n\n      if (extension.clearcoatTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n      }\n\n      if (extension.clearcoatRoughnessFactor !== undefined) {\n        materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n      }\n\n      if (extension.clearcoatRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n      }\n\n      if (extension.clearcoatNormalTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n        if (extension.clearcoatNormalTexture.scale !== undefined) {\n          var scale = extension.clearcoatNormalTexture.scale; // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\n          materialParams.clearcoatNormalScale = new Vector2(scale, -scale);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsClearcoatExtension;\n}();\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\n\n\nvar GLTFMaterialsTransmissionExtension$1 = /*#__PURE__*/function () {\n  function GLTFMaterialsTransmissionExtension$1(parser) {\n    _classCallCheck(this, GLTFMaterialsTransmissionExtension$1);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n\n  _createClass(GLTFMaterialsTransmissionExtension$1, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.transmissionFactor !== undefined) {\n        materialParams.transmission = extension.transmissionFactor;\n      }\n\n      if (extension.transmissionTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsTransmissionExtension$1;\n}();\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\n\n\nvar GLTFMaterialsVolumeExtension$1 = /*#__PURE__*/function () {\n  function GLTFMaterialsVolumeExtension$1(parser) {\n    _classCallCheck(this, GLTFMaterialsVolumeExtension$1);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n  }\n\n  _createClass(GLTFMaterialsVolumeExtension$1, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n      if (extension.thicknessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'thicknessMap', extension.thicknessTexture));\n      }\n\n      materialParams.attenuationDistance = extension.attenuationDistance || 0;\n      var colorArray = extension.attenuationColor || [1, 1, 1];\n      materialParams.attenuationTint = new Color(colorArray[0], colorArray[1], colorArray[2]);\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsVolumeExtension$1;\n}();\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\n\n\nvar GLTFMaterialsIorExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsIorExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsIorExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\n  }\n\n  _createClass(GLTFMaterialsIorExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var extension = materialDef.extensions[this.name];\n      materialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n      return Promise.resolve();\n    }\n  }]);\n\n  return GLTFMaterialsIorExtension;\n}();\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\n\n\nvar GLTFMaterialsSpecularExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsSpecularExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsSpecularExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n  }\n\n  _createClass(GLTFMaterialsSpecularExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n      if (extension.specularTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularIntensityMap', extension.specularTexture));\n      }\n\n      var colorArray = extension.specularColorFactor || [1, 1, 1];\n      materialParams.specularTint = new Color(colorArray[0], colorArray[1], colorArray[2]);\n\n      if (extension.specularColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularTintMap', extension.specularColorTexture).then(function (texture) {\n          texture.encoding = sRGBEncoding;\n        }));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsSpecularExtension;\n}();\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\n\n\nvar GLTFTextureBasisUExtension = /*#__PURE__*/function () {\n  function GLTFTextureBasisUExtension(parser) {\n    _classCallCheck(this, GLTFTextureBasisUExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n\n  _createClass(GLTFTextureBasisUExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[this.name];\n      var source = json.images[extension.source];\n      var loader = parser.options.ktx2Loader;\n\n      if (!loader) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error('THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures');\n        } else {\n          // Assumes that the extension is optional and that a fallback texture is present\n          return null;\n        }\n      }\n\n      return parser.loadTextureImage(textureIndex, source, loader);\n    }\n  }]);\n\n  return GLTFTextureBasisUExtension;\n}();\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\n\n\nvar GLTFTextureWebPExtension = /*#__PURE__*/function () {\n  function GLTFTextureWebPExtension(parser) {\n    _classCallCheck(this, GLTFTextureWebPExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n\n  _createClass(GLTFTextureWebPExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var name = this.name;\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[name];\n      var source = json.images[extension.source];\n      var loader = parser.textureLoader;\n\n      if (source.uri) {\n        var handler = parser.options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.detectSupport().then(function (isSupported) {\n        if (isSupported) return parser.loadTextureImage(textureIndex, source, loader);\n\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n          throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.');\n        } // Fall back to PNG or JPEG.\n\n\n        return parser.loadTexture(textureIndex);\n      });\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport() {\n      if (!this.isSupported) {\n        this.isSupported = new Promise(function (resolve) {\n          var image = new Image(); // Lossy test image. Support for lossy images doesn't guarantee support for all\n          // WebP images, unfortunately.\n\n          image.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n          image.onload = image.onerror = function () {\n            resolve(image.height === 1);\n          };\n        });\n      }\n\n      return this.isSupported;\n    }\n  }]);\n\n  return GLTFTextureWebPExtension;\n}();\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\n\n\nvar GLTFMeshoptCompression = /*#__PURE__*/function () {\n  function GLTFMeshoptCompression(parser) {\n    _classCallCheck(this, GLTFMeshoptCompression);\n\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n\n  _createClass(GLTFMeshoptCompression, [{\n    key: \"loadBufferView\",\n    value: function loadBufferView(index) {\n      var json = this.parser.json;\n      var bufferView = json.bufferViews[index];\n\n      if (bufferView.extensions && bufferView.extensions[this.name]) {\n        var extensionDef = bufferView.extensions[this.name];\n        var buffer = this.parser.getDependency('buffer', extensionDef.buffer);\n        var decoder = this.parser.options.meshoptDecoder;\n\n        if (!decoder || !decoder.supported) {\n          if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n            throw new Error('THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files');\n          } else {\n            // Assumes that the extension is optional and that fallback buffer data is present\n            return null;\n          }\n        }\n\n        return Promise.all([buffer, decoder.ready]).then(function (res) {\n          var byteOffset = extensionDef.byteOffset || 0;\n          var byteLength = extensionDef.byteLength || 0;\n          var count = extensionDef.count;\n          var stride = extensionDef.byteStride;\n          var result = new ArrayBuffer(count * stride);\n          var source = new Uint8Array(res[0], byteOffset, byteLength);\n          decoder.decodeGltfBuffer(new Uint8Array(result), count, stride, source, extensionDef.mode, extensionDef.filter);\n          return result;\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return GLTFMeshoptCompression;\n}();\n/* BINARY EXTENSION */\n\n\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = {\n  JSON: 0x4E4F534A,\n  BIN: 0x004E4942\n};\n\nvar GLTFBinaryExtension = function GLTFBinaryExtension(data) {\n  _classCallCheck(this, GLTFBinaryExtension);\n\n  this.name = EXTENSIONS.KHR_BINARY_GLTF;\n  this.content = null;\n  this.body = null;\n  var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n  this.header = {\n    magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n    version: headerView.getUint32(4, true),\n    length: headerView.getUint32(8, true)\n  };\n\n  if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n    throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n  } else if (this.header.version < 2.0) {\n    throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n  }\n\n  var chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n  var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n  var chunkIndex = 0;\n\n  while (chunkIndex < chunkContentsLength) {\n    var chunkLength = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n    var chunkType = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n\n    if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n      var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n      this.content = LoaderUtils.decodeText(contentArray);\n    } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n      var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n      this.body = data.slice(byteOffset, byteOffset + chunkLength);\n    } // Clients must ignore chunks with unknown types.\n\n\n    chunkIndex += chunkLength;\n  }\n\n  if (this.content === null) {\n    throw new Error('THREE.GLTFLoader: JSON content not found.');\n  }\n};\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\n\n\nvar GLTFDracoMeshCompressionExtension = /*#__PURE__*/function () {\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    _classCallCheck(this, GLTFDracoMeshCompressionExtension);\n\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  _createClass(GLTFDracoMeshCompressionExtension, [{\n    key: \"decodePrimitive\",\n    value: function decodePrimitive(primitive, parser) {\n      var json = this.json;\n      var dracoLoader = this.dracoLoader;\n      var bufferViewIndex = primitive.extensions[this.name].bufferView;\n      var gltfAttributeMap = primitive.extensions[this.name].attributes;\n      var threeAttributeMap = {};\n      var attributeNormalizedMap = {};\n      var attributeTypeMap = {};\n\n      for (var attributeName in gltfAttributeMap) {\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n        threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n      }\n\n      for (var _attributeName in primitive.attributes) {\n        var _threeAttributeName = ATTRIBUTES[_attributeName] || _attributeName.toLowerCase();\n\n        if (gltfAttributeMap[_attributeName] !== undefined) {\n          var accessorDef = json.accessors[primitive.attributes[_attributeName]];\n          var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n          attributeTypeMap[_threeAttributeName] = componentType;\n          attributeNormalizedMap[_threeAttributeName] = accessorDef.normalized === true;\n        }\n      }\n\n      return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n        return new Promise(function (resolve) {\n          dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n            for (var _attributeName2 in geometry.attributes) {\n              var attribute = geometry.attributes[_attributeName2];\n              var normalized = attributeNormalizedMap[_attributeName2];\n              if (normalized !== undefined) attribute.normalized = normalized;\n            }\n\n            resolve(geometry);\n          }, threeAttributeMap, attributeTypeMap);\n        });\n      });\n    }\n  }]);\n\n  return GLTFDracoMeshCompressionExtension;\n}();\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\n\n\nvar GLTFTextureTransformExtension = /*#__PURE__*/function () {\n  function GLTFTextureTransformExtension() {\n    _classCallCheck(this, GLTFTextureTransformExtension);\n\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  _createClass(GLTFTextureTransformExtension, [{\n    key: \"extendTexture\",\n    value: function extendTexture(texture, transform) {\n      if (transform.texCoord !== undefined) {\n        console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n      }\n\n      if (transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined) {\n        // See https://github.com/mrdoob/three.js/issues/21819.\n        return texture;\n      }\n\n      texture = texture.clone();\n\n      if (transform.offset !== undefined) {\n        texture.offset.fromArray(transform.offset);\n      }\n\n      if (transform.rotation !== undefined) {\n        texture.rotation = transform.rotation;\n      }\n\n      if (transform.scale !== undefined) {\n        texture.repeat.fromArray(transform.scale);\n      }\n\n      texture.needsUpdate = true;\n      return texture;\n    }\n  }]);\n\n  return GLTFTextureTransformExtension;\n}();\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\n\n\nvar GLTFMeshStandardSGMaterial = /*#__PURE__*/function (_MeshStandardMaterial2) {\n  _inherits(GLTFMeshStandardSGMaterial, _MeshStandardMaterial2);\n\n  var _super116 = _createSuper(GLTFMeshStandardSGMaterial);\n\n  function GLTFMeshStandardSGMaterial(params) {\n    var _this105;\n\n    _classCallCheck(this, GLTFMeshStandardSGMaterial);\n\n    _this105 = _super116.call(this);\n    _this105.isGLTFSpecularGlossinessMaterial = true; //various chunks that need replacing\n\n    var specularMapParsFragmentChunk = ['#ifdef USE_SPECULARMAP', '\tuniform sampler2D specularMap;', '#endif'].join('\\n');\n    var glossinessMapParsFragmentChunk = ['#ifdef USE_GLOSSINESSMAP', '\tuniform sampler2D glossinessMap;', '#endif'].join('\\n');\n    var specularMapFragmentChunk = ['vec3 specularFactor = specular;', '#ifdef USE_SPECULARMAP', '\tvec4 texelSpecular = texture2D( specularMap, vUv );', '\ttexelSpecular = sRGBToLinear( texelSpecular );', '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tspecularFactor *= texelSpecular.rgb;', '#endif'].join('\\n');\n    var glossinessMapFragmentChunk = ['float glossinessFactor = glossiness;', '#ifdef USE_GLOSSINESSMAP', '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );', '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tglossinessFactor *= texelGlossiness.a;', '#endif'].join('\\n');\n    var lightPhysicalFragmentChunk = ['PhysicalMaterial material;', 'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );', 'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );', 'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );', 'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.', 'material.specularRoughness += geometryRoughness;', 'material.specularRoughness = min( material.specularRoughness, 1.0 );', 'material.specularColor = specularFactor;'].join('\\n');\n    var uniforms = {\n      specular: {\n        value: new Color().setHex(0xffffff)\n      },\n      glossiness: {\n        value: 1\n      },\n      specularMap: {\n        value: null\n      },\n      glossinessMap: {\n        value: null\n      }\n    };\n    _this105._extraUniforms = uniforms;\n\n    _this105.onBeforeCompile = function (shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName];\n      }\n\n      shader.fragmentShader = shader.fragmentShader.replace('uniform float roughness;', 'uniform vec3 specular;').replace('uniform float metalness;', 'uniform float glossiness;').replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk).replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk).replace('#include <roughnessmap_fragment>', specularMapFragmentChunk).replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk).replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n    };\n\n    Object.defineProperties(_assertThisInitialized(_this105), {\n      specular: {\n        get: function get() {\n          return uniforms.specular.value;\n        },\n        set: function set(v) {\n          uniforms.specular.value = v;\n        }\n      },\n      specularMap: {\n        get: function get() {\n          return uniforms.specularMap.value;\n        },\n        set: function set(v) {\n          uniforms.specularMap.value = v;\n\n          if (v) {\n            this.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n          } else {\n            delete this.defines.USE_SPECULARMAP;\n          }\n        }\n      },\n      glossiness: {\n        get: function get() {\n          return uniforms.glossiness.value;\n        },\n        set: function set(v) {\n          uniforms.glossiness.value = v;\n        }\n      },\n      glossinessMap: {\n        get: function get() {\n          return uniforms.glossinessMap.value;\n        },\n        set: function set(v) {\n          uniforms.glossinessMap.value = v;\n\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = '';\n            this.defines.USE_UV = '';\n          } else {\n            delete this.defines.USE_GLOSSINESSMAP;\n            delete this.defines.USE_UV;\n          }\n        }\n      }\n    });\n    delete _this105.metalness;\n    delete _this105.roughness;\n    delete _this105.metalnessMap;\n    delete _this105.roughnessMap;\n\n    _this105.setValues(params);\n\n    return _this105;\n  }\n\n  _createClass(GLTFMeshStandardSGMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(GLTFMeshStandardSGMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.specularMap = source.specularMap;\n      this.specular.copy(source.specular);\n      this.glossinessMap = source.glossinessMap;\n      this.glossiness = source.glossiness;\n      delete this.metalness;\n      delete this.roughness;\n      delete this.metalnessMap;\n      delete this.roughnessMap;\n      return this;\n    }\n  }]);\n\n  return GLTFMeshStandardSGMaterial;\n}(MeshStandardMaterial);\n\nvar GLTFMaterialsPbrSpecularGlossinessExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    _classCallCheck(this, GLTFMaterialsPbrSpecularGlossinessExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.specularGlossinessParams = ['color', 'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity', 'emissive', 'emissiveIntensity', 'emissiveMap', 'bumpMap', 'bumpScale', 'normalMap', 'normalMapType', 'displacementMap', 'displacementScale', 'displacementBias', 'specularMap', 'specular', 'glossinessMap', 'glossiness', 'alphaMap', 'envMap', 'envMapIntensity', 'refractionRatio'];\n  }\n\n  _createClass(GLTFMaterialsPbrSpecularGlossinessExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return GLTFMeshStandardSGMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pbrSpecularGlossiness = materialDef.extensions[this.name];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var pending = [];\n\n      if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n        var array = pbrSpecularGlossiness.diffuseFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n      }\n\n      materialParams.emissive = new Color(0.0, 0.0, 0.0);\n      materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n      materialParams.specular = new Color(1.0, 1.0, 1.0);\n\n      if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n        materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n      }\n\n      if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n        var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n        pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n        pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n      }\n\n      return Promise.all(pending);\n    }\n  }, {\n    key: \"createMaterial\",\n    value: function createMaterial(materialParams) {\n      var material = new GLTFMeshStandardSGMaterial(materialParams);\n      material.fog = true;\n      material.color = materialParams.color;\n      material.map = materialParams.map === undefined ? null : materialParams.map;\n      material.lightMap = null;\n      material.lightMapIntensity = 1.0;\n      material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n      material.aoMapIntensity = 1.0;\n      material.emissive = materialParams.emissive;\n      material.emissiveIntensity = 1.0;\n      material.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n      material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n      material.bumpScale = 1;\n      material.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n      material.normalMapType = TangentSpaceNormalMap;\n      if (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n      material.displacementMap = null;\n      material.displacementScale = 1;\n      material.displacementBias = 0;\n      material.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n      material.specular = materialParams.specular;\n      material.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n      material.glossiness = materialParams.glossiness;\n      material.alphaMap = null;\n      material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n      material.envMapIntensity = 1.0;\n      material.refractionRatio = 0.98;\n      return material;\n    }\n  }]);\n\n  return GLTFMaterialsPbrSpecularGlossinessExtension;\n}();\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\n\n\nvar GLTFMeshQuantizationExtension = function GLTFMeshQuantizationExtension() {\n  _classCallCheck(this, GLTFMeshQuantizationExtension);\n\n  this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n};\n/*********************************/\n\n/********** INTERPOLATION ********/\n\n/*********************************/\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\nvar GLTFCubicSplineInterpolant = /*#__PURE__*/function (_Interpolant5) {\n  _inherits(GLTFCubicSplineInterpolant, _Interpolant5);\n\n  var _super117 = _createSuper(GLTFCubicSplineInterpolant);\n\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, GLTFCubicSplineInterpolant);\n\n    return _super117.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(GLTFCubicSplineInterpolant, [{\n    key: \"copySampleValue_\",\n    value: function copySampleValue_(index) {\n      // Copies a sample value to the result buffer. See description of glTF\n      // CUBICSPLINE values layout in interpolate_() function below.\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          valueSize = this.valueSize,\n          offset = index * valueSize * 3 + valueSize;\n\n      for (var _i300 = 0; _i300 !== valueSize; _i300++) {\n        result[_i300] = values[offset + _i300];\n      }\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineInterpolant;\n}(Interpolant);\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n  var result = this.resultBuffer;\n  var values = this.sampleValues;\n  var stride = this.valueSize;\n  var stride2 = stride * 2;\n  var stride3 = stride * 3;\n  var td = t1 - t0;\n  var p = (t - t0) / td;\n  var pp = p * p;\n  var ppp = pp * p;\n  var offset1 = i1 * stride3;\n  var offset0 = offset1 - stride3;\n  var s2 = -2 * ppp + 3 * pp;\n  var s3 = ppp - pp;\n  var s0 = 1 - s2;\n  var s1 = s3 - pp + p; // Layout of keyframe output values for CUBICSPLINE animations:\n  //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\n  for (var _i301 = 0; _i301 !== stride; _i301++) {\n    var p0 = values[offset0 + _i301 + stride]; // splineVertex_k\n\n    var m0 = values[offset0 + _i301 + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\n    var p1 = values[offset1 + _i301 + stride]; // splineVertex_k+1\n\n    var m1 = values[offset1 + _i301] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n    result[_i301] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n  }\n\n  return result;\n};\n/*********************************/\n\n/********** INTERNALS ************/\n\n/*********************************/\n\n/* CONSTANTS */\n\n\nvar WEBGL_CONSTANTS$1 = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nvar WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nvar WEBGL_FILTERS = {\n  9728: NearestFilter,\n  9729: LinearFilter,\n  9984: NearestMipmapNearestFilter,\n  9985: LinearMipmapNearestFilter,\n  9986: NearestMipmapLinearFilter,\n  9987: LinearMipmapLinearFilter\n};\nvar WEBGL_WRAPPINGS = {\n  33071: ClampToEdgeWrapping,\n  33648: MirroredRepeatWrapping,\n  10497: RepeatWrapping\n};\nvar WEBGL_TYPE_SIZES = {\n  'SCALAR': 1,\n  'VEC2': 2,\n  'VEC3': 3,\n  'VEC4': 4,\n  'MAT2': 4,\n  'MAT3': 9,\n  'MAT4': 16\n};\nvar ATTRIBUTES = {\n  POSITION: 'position',\n  NORMAL: 'normal',\n  TANGENT: 'tangent',\n  TEXCOORD_0: 'uv',\n  TEXCOORD_1: 'uv2',\n  COLOR_0: 'color',\n  WEIGHTS_0: 'skinWeight',\n  JOINTS_0: 'skinIndex'\n};\nvar PATH_PROPERTIES$1 = {\n  scale: 'scale',\n  translation: 'position',\n  rotation: 'quaternion',\n  weights: 'morphTargetInfluences'\n};\nvar INTERPOLATION = {\n  CUBICSPLINE: undefined,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: InterpolateLinear,\n  STEP: InterpolateDiscrete\n};\nvar ALPHA_MODES = {\n  OPAQUE: 'OPAQUE',\n  MASK: 'MASK',\n  BLEND: 'BLEND'\n};\n/* UTILITY FUNCTIONS */\n\nfunction resolveURL(url, path) {\n  // Invalid URL\n  if (typeof url !== 'string' || url === '') return ''; // Host Relative URL\n\n  if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n    path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n  } // Absolute URL http://,https://,//\n\n\n  if (/^(https?:)?\\/\\//i.test(url)) return url; // Data URI\n\n  if (/^data:.*,.*$/i.test(url)) return url; // Blob URL\n\n  if (/^blob:.*$/i.test(url)) return url; // Relative URL\n\n  return path + url;\n}\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\n\n\nfunction createDefaultMaterial(cache) {\n  if (cache['DefaultMaterial'] === undefined) {\n    cache['DefaultMaterial'] = new MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: FrontSide\n    });\n  }\n\n  return cache['DefaultMaterial'];\n}\n\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  // Add unknown glTF extensions to an object's userData.\n  for (var name in objectDef.extensions) {\n    if (knownExtensions[name] === undefined) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\n\n\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== undefined) {\n    if (typeof gltfDef.extras === 'object') {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n    }\n  }\n}\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addMorphTargets(geometry, targets, parser) {\n  var hasMorphPosition = false;\n  var hasMorphNormal = false;\n\n  for (var _i302 = 0, il = targets.length; _i302 < il; _i302++) {\n    var _target3 = targets[_i302];\n    if (_target3.POSITION !== undefined) hasMorphPosition = true;\n    if (_target3.NORMAL !== undefined) hasMorphNormal = true;\n    if (hasMorphPosition && hasMorphNormal) break;\n  }\n\n  if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n  var pendingPositionAccessors = [];\n  var pendingNormalAccessors = [];\n\n  for (var _i303 = 0, _il19 = targets.length; _i303 < _il19; _i303++) {\n    var _target4 = targets[_i303];\n\n    if (hasMorphPosition) {\n      var pendingAccessor = _target4.POSITION !== undefined ? parser.getDependency('accessor', _target4.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphNormal) {\n      var _pendingAccessor = _target4.NORMAL !== undefined ? parser.getDependency('accessor', _target4.NORMAL) : geometry.attributes.normal;\n\n      pendingNormalAccessors.push(_pendingAccessor);\n    }\n  }\n\n  return Promise.all([Promise.all(pendingPositionAccessors), Promise.all(pendingNormalAccessors)]).then(function (accessors) {\n    var morphPositions = accessors[0];\n    var morphNormals = accessors[1];\n    if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\n\n\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n\n  if (meshDef.weights !== undefined) {\n    for (var _i304 = 0, il = meshDef.weights.length; _i304 < il; _i304++) {\n      mesh.morphTargetInfluences[_i304] = meshDef.weights[_i304];\n    }\n  } // .extras has user-defined data, so check that .extras.targetNames is an array.\n\n\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    var targetNames = meshDef.extras.targetNames;\n\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n\n      for (var _i305 = 0, _il20 = targetNames.length; _i305 < _il20; _i305++) {\n        mesh.morphTargetDictionary[targetNames[_i305]] = _i305;\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n    }\n  }\n}\n\nfunction createPrimitiveKey(primitiveDef) {\n  var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  var geometryKey;\n\n  if (dracoExtension) {\n    geometryKey = 'draco:' + dracoExtension.bufferView + ':' + dracoExtension.indices + ':' + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n  }\n\n  return geometryKey;\n}\n\nfunction createAttributesKey(attributes) {\n  var attributesKey = '';\n  var keys = Object.keys(attributes).sort();\n\n  for (var _i306 = 0, il = keys.length; _i306 < il; _i306++) {\n    attributesKey += keys[_i306] + ':' + attributes[keys[_i306]] + ';';\n  }\n\n  return attributesKey;\n}\n\nfunction getNormalizedComponentScale$1(constructor) {\n  // Reference:\n  // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n\n    case Uint8Array:\n      return 1 / 255;\n\n    case Int16Array:\n      return 1 / 32767;\n\n    case Uint16Array:\n      return 1 / 65535;\n\n    default:\n      throw new Error('THREE.GLTFLoader: Unsupported normalized accessor component type.');\n  }\n}\n/* GLTF PARSER */\n\n\nvar GLTFParser = /*#__PURE__*/function () {\n  function GLTFParser() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, GLTFParser);\n\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options; // loader object cache\n\n    this.cache = new GLTFRegistry(); // associations between Three.js objects and glTF elements\n\n    this.associations = new Map(); // BufferGeometry caching\n\n    this.primitiveCache = {}; // Object3D instance caches\n\n    this.meshCache = {\n      refs: {},\n      uses: {}\n    };\n    this.cameraCache = {\n      refs: {},\n      uses: {}\n    };\n    this.lightCache = {\n      refs: {},\n      uses: {}\n    };\n    this.textureCache = {}; // Track node names, to ensure no duplicates\n\n    this.nodeNamesUsed = {}; // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n\n    if (typeof createImageBitmap !== 'undefined' && /Firefox/.test(navigator.userAgent) === false) {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\n    } else {\n      this.textureLoader = new TextureLoader(this.options.manager);\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  _createClass(GLTFParser, [{\n    key: \"setExtensions\",\n    value: function setExtensions(extensions) {\n      this.extensions = extensions;\n    }\n  }, {\n    key: \"setPlugins\",\n    value: function setPlugins(plugins) {\n      this.plugins = plugins;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(onLoad, onError) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions; // Clear the loader cache\n\n      this.cache.removeAll(); // Mark the special nodes/meshes in json for efficient parse\n\n      this._invokeAll(function (ext) {\n        return ext._markDefs && ext._markDefs();\n      });\n\n      Promise.all(this._invokeAll(function (ext) {\n        return ext.beforeRoot && ext.beforeRoot();\n      })).then(function () {\n        return Promise.all([parser.getDependencies('scene'), parser.getDependencies('animation'), parser.getDependencies('camera')]);\n      }).then(function (dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {}\n        };\n        addUnknownExtensionsToUserData(extensions, result, json);\n        assignExtrasToUserData(result, json);\n        Promise.all(parser._invokeAll(function (ext) {\n          return ext.afterRoot && ext.afterRoot(result);\n        })).then(function () {\n          onLoad(result);\n        });\n      }).catch(onError);\n    }\n    /**\n     * Marks the special nodes/meshes in json for efficient parse.\n     */\n\n  }, {\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var nodeDefs = this.json.nodes || [];\n      var skinDefs = this.json.skins || [];\n      var meshDefs = this.json.meshes || []; // Nothing in the node definition indicates whether it is a Bone or an\n      // Object3D. Use the skins' joint references to mark bones.\n\n      for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n        var joints = skinDefs[skinIndex].joints;\n\n        for (var _i307 = 0, il = joints.length; _i307 < il; _i307++) {\n          nodeDefs[joints[_i307]].isBone = true;\n        }\n      } // Iterate over all nodes, marking references to shared resources,\n      // as well as skeleton joints.\n\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.mesh !== undefined) {\n          this._addNodeRef(this.meshCache, nodeDef.mesh); // Nothing in the mesh definition indicates whether it is\n          // a SkinnedMesh or Mesh. Use the node's mesh reference\n          // to mark SkinnedMesh if node has skin.\n\n\n          if (nodeDef.skin !== undefined) {\n            meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n          }\n        }\n\n        if (nodeDef.camera !== undefined) {\n          this._addNodeRef(this.cameraCache, nodeDef.camera);\n        }\n      }\n    }\n    /**\n     * Counts references to shared node / Object3D resources. These resources\n     * can be reused, or \"instantiated\", at multiple nodes in the scene\n     * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n     * be marked. Non-scenegraph resources (like Materials, Geometries, and\n     * Textures) can be reused directly and are not marked here.\n     *\n     * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n     */\n\n  }, {\n    key: \"_addNodeRef\",\n    value: function _addNodeRef(cache, index) {\n      if (index === undefined) return;\n\n      if (cache.refs[index] === undefined) {\n        cache.refs[index] = cache.uses[index] = 0;\n      }\n\n      cache.refs[index]++;\n    }\n    /** Returns a reference to a shared resource, cloning it if necessary. */\n\n  }, {\n    key: \"_getNodeRef\",\n    value: function _getNodeRef(cache, index, object) {\n      if (cache.refs[index] <= 1) return object;\n      var ref = object.clone();\n      ref.name += '_instance_' + cache.uses[index]++;\n      return ref;\n    }\n  }, {\n    key: \"_invokeOne\",\n    value: function _invokeOne(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.push(this);\n\n      for (var _i308 = 0; _i308 < extensions.length; _i308++) {\n        var result = func(extensions[_i308]);\n        if (result) return result;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_invokeAll\",\n    value: function _invokeAll(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.unshift(this);\n      var pending = [];\n\n      for (var _i309 = 0; _i309 < extensions.length; _i309++) {\n        var result = func(extensions[_i309]);\n        if (result) pending.push(result);\n      }\n\n      return pending;\n    }\n    /**\n     * Requests the specified dependency asynchronously, with caching.\n     * @param {string} type\n     * @param {number} index\n     * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n     */\n\n  }, {\n    key: \"getDependency\",\n    value: function getDependency(type, index) {\n      var cacheKey = type + ':' + index;\n      var dependency = this.cache.get(cacheKey);\n\n      if (!dependency) {\n        switch (type) {\n          case 'scene':\n            dependency = this.loadScene(index);\n            break;\n\n          case 'node':\n            dependency = this.loadNode(index);\n            break;\n\n          case 'mesh':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMesh && ext.loadMesh(index);\n            });\n            break;\n\n          case 'accessor':\n            dependency = this.loadAccessor(index);\n            break;\n\n          case 'bufferView':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadBufferView && ext.loadBufferView(index);\n            });\n            break;\n\n          case 'buffer':\n            dependency = this.loadBuffer(index);\n            break;\n\n          case 'material':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMaterial && ext.loadMaterial(index);\n            });\n            break;\n\n          case 'texture':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadTexture && ext.loadTexture(index);\n            });\n            break;\n\n          case 'skin':\n            dependency = this.loadSkin(index);\n            break;\n\n          case 'animation':\n            dependency = this.loadAnimation(index);\n            break;\n\n          case 'camera':\n            dependency = this.loadCamera(index);\n            break;\n\n          default:\n            throw new Error('Unknown type: ' + type);\n        }\n\n        this.cache.add(cacheKey, dependency);\n      }\n\n      return dependency;\n    }\n    /**\n     * Requests all dependencies of the specified type asynchronously, with caching.\n     * @param {string} type\n     * @return {Promise<Array<Object>>}\n     */\n\n  }, {\n    key: \"getDependencies\",\n    value: function getDependencies(type) {\n      var dependencies = this.cache.get(type);\n\n      if (!dependencies) {\n        var parser = this;\n        var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n        dependencies = Promise.all(defs.map(function (def, index) {\n          return parser.getDependency(type, index);\n        }));\n        this.cache.add(type, dependencies);\n      }\n\n      return dependencies;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(bufferIndex) {\n      var bufferDef = this.json.buffers[bufferIndex];\n      var loader = this.fileLoader;\n\n      if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n        throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n      } // If present, GLB container is required to be the first buffer.\n\n\n      if (bufferDef.uri === undefined && bufferIndex === 0) {\n        return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n      }\n\n      var options = this.options;\n      return new Promise(function (resolve, reject) {\n        loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n          reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n        });\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferViewIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBufferView\",\n    value: function loadBufferView(bufferViewIndex) {\n      var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n      return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n        var byteLength = bufferViewDef.byteLength || 0;\n        var byteOffset = bufferViewDef.byteOffset || 0;\n        return buffer.slice(byteOffset, byteOffset + byteLength);\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n     * @param {number} accessorIndex\n     * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n     */\n\n  }, {\n    key: \"loadAccessor\",\n    value: function loadAccessor(accessorIndex) {\n      var parser = this;\n      var json = this.json;\n      var accessorDef = this.json.accessors[accessorIndex];\n\n      if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n        // Ignore empty accessors, which may be used to declare runtime\n        // information about attributes coming from another source (e.g. Draco\n        // compression extension).\n        return Promise.resolve(null);\n      }\n\n      var pendingBufferViews = [];\n\n      if (accessorDef.bufferView !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n      } else {\n        pendingBufferViews.push(null);\n      }\n\n      if (accessorDef.sparse !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n      }\n\n      return Promise.all(pendingBufferViews).then(function (bufferViews) {\n        var bufferView = bufferViews[0];\n        var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n        var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\n        var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n        var itemBytes = elementBytes * itemSize;\n        var byteOffset = accessorDef.byteOffset || 0;\n        var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n        var normalized = accessorDef.normalized === true;\n        var array, bufferAttribute; // The buffer is not interleaved if the stride is the item size in bytes.\n\n        if (byteStride && byteStride !== itemBytes) {\n          // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n          // This makes sure that IBA.count reflects accessor.count properly\n          var ibSlice = Math.floor(byteOffset / byteStride);\n          var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n          var ib = parser.cache.get(ibCacheKey);\n\n          if (!ib) {\n            array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes); // Integer parameters to IB/IBA are in array elements, not bytes.\n\n            ib = new InterleavedBuffer(array, byteStride / elementBytes);\n            parser.cache.add(ibCacheKey, ib);\n          }\n\n          bufferAttribute = new InterleavedBufferAttribute(ib, itemSize, byteOffset % byteStride / elementBytes, normalized);\n        } else {\n          if (bufferView === null) {\n            array = new TypedArray(accessorDef.count * itemSize);\n          } else {\n            array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n          }\n\n          bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n        } // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\n\n        if (accessorDef.sparse !== undefined) {\n          var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n          var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n          var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n          var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n          var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n          var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n          if (bufferView !== null) {\n            // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n            bufferAttribute = new BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n          }\n\n          for (var _i310 = 0, il = sparseIndices.length; _i310 < il; _i310++) {\n            var index = sparseIndices[_i310];\n            bufferAttribute.setX(index, sparseValues[_i310 * itemSize]);\n            if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[_i310 * itemSize + 1]);\n            if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[_i310 * itemSize + 2]);\n            if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[_i310 * itemSize + 3]);\n            if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n          }\n        }\n\n        return bufferAttribute;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n     * @param {number} textureIndex\n     * @return {Promise<THREE.Texture>}\n     */\n\n  }, {\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var source = json.images[textureDef.source];\n      var loader = this.textureLoader;\n\n      if (source.uri) {\n        var handler = options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.loadTextureImage(textureIndex, source, loader);\n    }\n  }, {\n    key: \"loadTextureImage\",\n    value: function loadTextureImage(textureIndex, source, loader) {\n      var parser = this;\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var cacheKey = (source.uri || source.bufferView) + ':' + textureDef.sampler;\n\n      if (this.textureCache[cacheKey]) {\n        // See https://github.com/mrdoob/three.js/issues/21559.\n        return this.textureCache[cacheKey];\n      }\n\n      var URL = self.URL || self.webkitURL;\n      var sourceURI = source.uri || '';\n      var isObjectURL = false;\n      var hasAlpha = true;\n      var isJPEG = sourceURI.search(/\\.jpe?g($|\\?)/i) > 0 || sourceURI.search(/^data\\:image\\/jpeg/) === 0;\n      if (source.mimeType === 'image/jpeg' || isJPEG) hasAlpha = false;\n\n      if (source.bufferView !== undefined) {\n        // Load binary image data from bufferView, if provided.\n        sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n          if (source.mimeType === 'image/png') {\n            // Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n            // alpha channel. This check is conservative — the image could have an alpha\n            // channel with all values == 1, and the indexed type (colorType == 3) only\n            // sometimes contains alpha.\n            //\n            // https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n            var colorType = new DataView(bufferView, 25, 1).getUint8(0, false);\n            hasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n          }\n\n          isObjectURL = true;\n          var blob = new Blob([bufferView], {\n            type: source.mimeType\n          });\n          sourceURI = URL.createObjectURL(blob);\n          return sourceURI;\n        });\n      } else if (source.uri === undefined) {\n        throw new Error('THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView');\n      }\n\n      var promise = Promise.resolve(sourceURI).then(function (sourceURI) {\n        return new Promise(function (resolve, reject) {\n          var onLoad = resolve;\n\n          if (loader.isImageBitmapLoader === true) {\n            onLoad = function onLoad(imageBitmap) {\n              var texture = new Texture$1(imageBitmap);\n              texture.needsUpdate = true;\n              resolve(texture);\n            };\n          }\n\n          loader.load(resolveURL(sourceURI, options.path), onLoad, undefined, reject);\n        });\n      }).then(function (texture) {\n        // Clean up resources and configure Texture.\n        if (isObjectURL === true) {\n          URL.revokeObjectURL(sourceURI);\n        }\n\n        texture.flipY = false;\n        if (textureDef.name) texture.name = textureDef.name; // When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\n        if (!hasAlpha) texture.format = RGBFormat;\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n        parser.associations.set(texture, {\n          type: 'textures',\n          index: textureIndex\n        });\n        return texture;\n      }).catch(function () {\n        console.error('THREE.GLTFLoader: Couldn\\'t load texture', sourceURI);\n        return null;\n      });\n      this.textureCache[cacheKey] = promise;\n      return promise;\n    }\n    /**\n     * Asynchronously assigns a texture to the given material parameters.\n     * @param {Object} materialParams\n     * @param {string} mapName\n     * @param {Object} mapDef\n     * @return {Promise<Texture>}\n     */\n\n  }, {\n    key: \"assignTexture\",\n    value: function assignTexture(materialParams, mapName, mapDef) {\n      var parser = this;\n      return this.getDependency('texture', mapDef.index).then(function (texture) {\n        // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n        // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n        if (mapDef.texCoord !== undefined && mapDef.texCoord != 0 && !(mapName === 'aoMap' && mapDef.texCoord == 1)) {\n          console.warn('THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.');\n        }\n\n        if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n          var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n          if (transform) {\n            var gltfReference = parser.associations.get(texture);\n            texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n            parser.associations.set(texture, gltfReference);\n          }\n        }\n\n        materialParams[mapName] = texture;\n        return texture;\n      });\n    }\n    /**\n     * Assigns final material to a Mesh, Line, or Points instance. The instance\n     * already has a material (generated from the glTF material options alone)\n     * but reuse of the same glTF material may require multiple threejs materials\n     * to accommodate different primitive types, defines, etc. New materials will\n     * be created if necessary, and reused from a cache.\n     * @param  {Object3D} mesh Mesh, Line, or Points instance.\n     */\n\n  }, {\n    key: \"assignFinalMaterial\",\n    value: function assignFinalMaterial(mesh) {\n      var geometry = mesh.geometry;\n      var material = mesh.material;\n      var useVertexTangents = geometry.attributes.tangent !== undefined;\n      var useVertexColors = geometry.attributes.color !== undefined;\n      var useFlatShading = geometry.attributes.normal === undefined;\n\n      if (mesh.isPoints) {\n        var cacheKey = 'PointsMaterial:' + material.uuid;\n        var pointsMaterial = this.cache.get(cacheKey);\n\n        if (!pointsMaterial) {\n          pointsMaterial = new PointsMaterial();\n          Material$1.prototype.copy.call(pointsMaterial, material);\n          pointsMaterial.color.copy(material.color);\n          pointsMaterial.map = material.map;\n          pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n          this.cache.add(cacheKey, pointsMaterial);\n        }\n\n        material = pointsMaterial;\n      } else if (mesh.isLine) {\n        var _cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n        var lineMaterial = this.cache.get(_cacheKey);\n\n        if (!lineMaterial) {\n          lineMaterial = new LineBasicMaterial();\n          Material$1.prototype.copy.call(lineMaterial, material);\n          lineMaterial.color.copy(material.color);\n          this.cache.add(_cacheKey, lineMaterial);\n        }\n\n        material = lineMaterial;\n      } // Clone the material if it will be modified\n\n\n      if (useVertexTangents || useVertexColors || useFlatShading) {\n        var _cacheKey2 = 'ClonedMaterial:' + material.uuid + ':';\n\n        if (material.isGLTFSpecularGlossinessMaterial) _cacheKey2 += 'specular-glossiness:';\n        if (useVertexTangents) _cacheKey2 += 'vertex-tangents:';\n        if (useVertexColors) _cacheKey2 += 'vertex-colors:';\n        if (useFlatShading) _cacheKey2 += 'flat-shading:';\n        var cachedMaterial = this.cache.get(_cacheKey2);\n\n        if (!cachedMaterial) {\n          cachedMaterial = material.clone();\n          if (useVertexColors) cachedMaterial.vertexColors = true;\n          if (useFlatShading) cachedMaterial.flatShading = true;\n\n          if (useVertexTangents) {\n            // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n            if (cachedMaterial.normalScale) cachedMaterial.normalScale.y *= -1;\n            if (cachedMaterial.clearcoatNormalScale) cachedMaterial.clearcoatNormalScale.y *= -1;\n          }\n\n          this.cache.add(_cacheKey2, cachedMaterial);\n          this.associations.set(cachedMaterial, this.associations.get(material));\n        }\n\n        material = cachedMaterial;\n      } // workarounds for mesh and geometry\n\n\n      if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n        geometry.setAttribute('uv2', geometry.attributes.uv);\n      }\n\n      mesh.material = material;\n    }\n  }, {\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return MeshStandardMaterial;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n     * @param {number} materialIndex\n     * @return {Promise<Material>}\n     */\n\n  }, {\n    key: \"loadMaterial\",\n    value: function loadMaterial(materialIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var materialDef = json.materials[materialIndex];\n      var materialType;\n      var materialParams = {};\n      var materialExtensions = materialDef.extensions || {};\n      var pending = [];\n\n      if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n        var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        materialType = sgExtension.getMaterialType();\n        pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n      } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n        var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n        materialType = kmuExtension.getMaterialType();\n        pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n      } else {\n        // Specification:\n        // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n        var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n        materialParams.color = new Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n\n        materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n        materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n        if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n          pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n        }\n\n        materialType = this._invokeOne(function (ext) {\n          return ext.getMaterialType && ext.getMaterialType(materialIndex);\n        });\n        pending.push(Promise.all(this._invokeAll(function (ext) {\n          return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n        })));\n      }\n\n      if (materialDef.doubleSided === true) {\n        materialParams.side = DoubleSide;\n      }\n\n      var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n      if (alphaMode === ALPHA_MODES.BLEND) {\n        materialParams.transparent = true; // See: https://github.com/mrdoob/three.js/issues/17706\n\n        materialParams.depthWrite = false;\n      } else {\n        materialParams.transparent = false;\n\n        if (alphaMode === ALPHA_MODES.MASK) {\n          materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n        }\n      }\n\n      if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture)); // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\n        materialParams.normalScale = new Vector2(1, -1);\n\n        if (materialDef.normalTexture.scale !== undefined) {\n          materialParams.normalScale.set(materialDef.normalTexture.scale, -materialDef.normalTexture.scale);\n        }\n      }\n\n      if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n        }\n      }\n\n      if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n        materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n      }\n\n      if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n      }\n\n      return Promise.all(pending).then(function () {\n        var material;\n\n        if (materialType === GLTFMeshStandardSGMaterial) {\n          material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n        } else {\n          material = new materialType(materialParams);\n        }\n\n        if (materialDef.name) material.name = materialDef.name; // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\n        if (material.map) material.map.encoding = sRGBEncoding;\n        if (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding;\n        assignExtrasToUserData(material, materialDef);\n        parser.associations.set(material, {\n          type: 'materials',\n          index: materialIndex\n        });\n        if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n        return material;\n      });\n    }\n    /** When Object3D instances are targeted by animation, they need unique names. */\n\n  }, {\n    key: \"createUniqueName\",\n    value: function createUniqueName(originalName) {\n      var sanitizedName = PropertyBinding.sanitizeNodeName(originalName || '');\n      var name = sanitizedName;\n\n      for (var _i311 = 1; this.nodeNamesUsed[name]; ++_i311) {\n        name = sanitizedName + '_' + _i311;\n      }\n\n      this.nodeNamesUsed[name] = true;\n      return name;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n     *\n     * Creates BufferGeometries from primitives.\n     *\n     * @param {Array<GLTF.Primitive>} primitives\n     * @return {Promise<Array<BufferGeometry>>}\n     */\n\n  }, {\n    key: \"loadGeometries\",\n    value: function loadGeometries(primitives) {\n      var parser = this;\n      var extensions = this.extensions;\n      var cache = this.primitiveCache;\n\n      function createDracoPrimitive(primitive) {\n        return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function (geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser);\n        });\n      }\n\n      var pending = [];\n\n      for (var _i312 = 0, il = primitives.length; _i312 < il; _i312++) {\n        var primitive = primitives[_i312];\n        var cacheKey = createPrimitiveKey(primitive); // See if we've already created this geometry\n\n        var cached = cache[cacheKey];\n\n        if (cached) {\n          // Use the cached geometry if it exists\n          pending.push(cached.promise);\n        } else {\n          var geometryPromise = void 0;\n\n          if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n            // Use DRACO geometry if available\n            geometryPromise = createDracoPrimitive(primitive);\n          } else {\n            // Otherwise create a new geometry\n            geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n          } // Cache this geometry\n\n\n          cache[cacheKey] = {\n            primitive: primitive,\n            promise: geometryPromise\n          };\n          pending.push(geometryPromise);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n     * @param {number} meshIndex\n     * @return {Promise<Group|Mesh|SkinnedMesh>}\n     */\n\n  }, {\n    key: \"loadMesh\",\n    value: function loadMesh(meshIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var meshDef = json.meshes[meshIndex];\n      var primitives = meshDef.primitives;\n      var pending = [];\n\n      for (var _i313 = 0, il = primitives.length; _i313 < il; _i313++) {\n        var material = primitives[_i313].material === undefined ? createDefaultMaterial(this.cache) : this.getDependency('material', primitives[_i313].material);\n        pending.push(material);\n      }\n\n      pending.push(parser.loadGeometries(primitives));\n      return Promise.all(pending).then(function (results) {\n        var materials = results.slice(0, results.length - 1);\n        var geometries = results[results.length - 1];\n        var meshes = [];\n\n        for (var _i314 = 0, _il21 = geometries.length; _i314 < _il21; _i314++) {\n          var geometry = geometries[_i314];\n          var primitive = primitives[_i314]; // 1. create Mesh\n\n          var mesh = void 0;\n          var _material3 = materials[_i314];\n\n          if (primitive.mode === WEBGL_CONSTANTS$1.TRIANGLES || primitive.mode === WEBGL_CONSTANTS$1.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS$1.TRIANGLE_FAN || primitive.mode === undefined) {\n            // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n            mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, _material3) : new Mesh(geometry, _material3);\n\n            if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n              // we normalize floating point skin weight array to fix malformed assets (see #15319)\n              // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n              mesh.normalizeSkinWeights();\n            }\n\n            if (primitive.mode === WEBGL_CONSTANTS$1.TRIANGLE_STRIP) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n            } else if (primitive.mode === WEBGL_CONSTANTS$1.TRIANGLE_FAN) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n            }\n          } else if (primitive.mode === WEBGL_CONSTANTS$1.LINES) {\n            mesh = new LineSegments(geometry, _material3);\n          } else if (primitive.mode === WEBGL_CONSTANTS$1.LINE_STRIP) {\n            mesh = new Line(geometry, _material3);\n          } else if (primitive.mode === WEBGL_CONSTANTS$1.LINE_LOOP) {\n            mesh = new LineLoop(geometry, _material3);\n          } else if (primitive.mode === WEBGL_CONSTANTS$1.POINTS) {\n            mesh = new Points(geometry, _material3);\n          } else {\n            throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n          }\n\n          if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n            updateMorphTargets(mesh, meshDef);\n          }\n\n          mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex);\n          assignExtrasToUserData(mesh, meshDef);\n          if (primitive.extensions) addUnknownExtensionsToUserData(extensions, mesh, primitive);\n          parser.assignFinalMaterial(mesh);\n          meshes.push(mesh);\n        }\n\n        if (meshes.length === 1) {\n          return meshes[0];\n        }\n\n        var group = new Group();\n\n        for (var _i315 = 0, _il22 = meshes.length; _i315 < _il22; _i315++) {\n          group.add(meshes[_i315]);\n        }\n\n        return group;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n     * @param {number} cameraIndex\n     * @return {Promise<THREE.Camera>}\n     */\n\n  }, {\n    key: \"loadCamera\",\n    value: function loadCamera(cameraIndex) {\n      var camera;\n      var cameraDef = this.json.cameras[cameraIndex];\n      var params = cameraDef[cameraDef.type];\n\n      if (!params) {\n        console.warn('THREE.GLTFLoader: Missing camera parameters.');\n        return;\n      }\n\n      if (cameraDef.type === 'perspective') {\n        camera = new PerspectiveCamera(MathUtils.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n      } else if (cameraDef.type === 'orthographic') {\n        camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n      }\n\n      if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name);\n      assignExtrasToUserData(camera, cameraDef);\n      return Promise.resolve(camera);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n     * @param {number} skinIndex\n     * @return {Promise<Object>}\n     */\n\n  }, {\n    key: \"loadSkin\",\n    value: function loadSkin(skinIndex) {\n      var skinDef = this.json.skins[skinIndex];\n      var skinEntry = {\n        joints: skinDef.joints\n      };\n\n      if (skinDef.inverseBindMatrices === undefined) {\n        return Promise.resolve(skinEntry);\n      }\n\n      return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n        skinEntry.inverseBindMatrices = accessor;\n        return skinEntry;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<AnimationClip>}\n     */\n\n  }, {\n    key: \"loadAnimation\",\n    value: function loadAnimation(animationIndex) {\n      var json = this.json;\n      var animationDef = json.animations[animationIndex];\n      var pendingNodes = [];\n      var pendingInputAccessors = [];\n      var pendingOutputAccessors = [];\n      var pendingSamplers = [];\n      var pendingTargets = [];\n\n      for (var _i316 = 0, il = animationDef.channels.length; _i316 < il; _i316++) {\n        var channel = animationDef.channels[_i316];\n        var sampler = animationDef.samplers[channel.sampler];\n        var _target5 = channel.target;\n        var name = _target5.node !== undefined ? _target5.node : _target5.id; // NOTE: target.id is deprecated.\n\n        var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n        var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n        pendingNodes.push(this.getDependency('node', name));\n        pendingInputAccessors.push(this.getDependency('accessor', input));\n        pendingOutputAccessors.push(this.getDependency('accessor', output));\n        pendingSamplers.push(sampler);\n        pendingTargets.push(_target5);\n      }\n\n      return Promise.all([Promise.all(pendingNodes), Promise.all(pendingInputAccessors), Promise.all(pendingOutputAccessors), Promise.all(pendingSamplers), Promise.all(pendingTargets)]).then(function (dependencies) {\n        var nodes = dependencies[0];\n        var inputAccessors = dependencies[1];\n        var outputAccessors = dependencies[2];\n        var samplers = dependencies[3];\n        var targets = dependencies[4];\n        var tracks = [];\n\n        var _loop2 = function _loop2(_i317, _il23) {\n          var node = nodes[_i317];\n          var inputAccessor = inputAccessors[_i317];\n          var outputAccessor = outputAccessors[_i317];\n          var sampler = samplers[_i317];\n          var target = targets[_i317];\n          if (node === undefined) return \"continue\";\n          node.updateMatrix();\n          node.matrixAutoUpdate = true;\n          var TypedKeyframeTrack = void 0;\n\n          switch (PATH_PROPERTIES$1[target.path]) {\n            case PATH_PROPERTIES$1.weights:\n              TypedKeyframeTrack = NumberKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES$1.rotation:\n              TypedKeyframeTrack = QuaternionKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES$1.position:\n            case PATH_PROPERTIES$1.scale:\n            default:\n              TypedKeyframeTrack = VectorKeyframeTrack;\n              break;\n          }\n\n          var targetName = node.name ? node.name : node.uuid;\n          var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n          var targetNames = [];\n\n          if (PATH_PROPERTIES$1[target.path] === PATH_PROPERTIES$1.weights) {\n            // Node may be a Group (glTF mesh with several primitives) or a Mesh.\n            node.traverse(function (object) {\n              if (object.isMesh === true && object.morphTargetInfluences) {\n                targetNames.push(object.name ? object.name : object.uuid);\n              }\n            });\n          } else {\n            targetNames.push(targetName);\n          }\n\n          var outputArray = outputAccessor.array;\n\n          if (outputAccessor.normalized) {\n            var scale = getNormalizedComponentScale$1(outputArray.constructor);\n            var scaled = new Float32Array(outputArray.length);\n\n            for (var j = 0, jl = outputArray.length; j < jl; j++) {\n              scaled[j] = outputArray[j] * scale;\n            }\n\n            outputArray = scaled;\n          }\n\n          for (var _j12 = 0, _jl4 = targetNames.length; _j12 < _jl4; _j12++) {\n            var track = new TypedKeyframeTrack(targetNames[_j12] + '.' + PATH_PROPERTIES$1[target.path], inputAccessor.array, outputArray, interpolation); // Override interpolation with custom factory method.\n\n            if (sampler.interpolation === 'CUBICSPLINE') {\n              track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n                // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n                // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n                // must be divided by three to get the interpolant's sampleSize argument.\n                return new GLTFCubicSplineInterpolant(this.times, this.values, this.getValueSize() / 3, result);\n              }; // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\n\n              track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n            }\n\n            tracks.push(track);\n          }\n        };\n\n        for (var _i317 = 0, _il23 = nodes.length; _i317 < _il23; _i317++) {\n          var _ret2 = _loop2(_i317, _il23);\n\n          if (_ret2 === \"continue\") continue;\n        }\n\n        var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n        return new AnimationClip(name, undefined, tracks);\n      });\n    }\n  }, {\n    key: \"createNodeMesh\",\n    value: function createNodeMesh(nodeIndex) {\n      var json = this.json;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex];\n      if (nodeDef.mesh === undefined) return null;\n      return parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n        var node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh); // if weights are provided on the node, override weights on the mesh.\n\n\n        if (nodeDef.weights !== undefined) {\n          node.traverse(function (o) {\n            if (!o.isMesh) return;\n\n            for (var _i318 = 0, il = nodeDef.weights.length; _i318 < il; _i318++) {\n              o.morphTargetInfluences[_i318] = nodeDef.weights[_i318];\n            }\n          });\n        }\n\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n     * @param {number} nodeIndex\n     * @return {Promise<Object3D>}\n     */\n\n  }, {\n    key: \"loadNode\",\n    value: function loadNode(nodeIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex]; // reserve node's name before its dependencies, so the root has the intended name.\n\n      var nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : '';\n      return function () {\n        var pending = [];\n\n        var meshPromise = parser._invokeOne(function (ext) {\n          return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n        });\n\n        if (meshPromise) {\n          pending.push(meshPromise);\n        }\n\n        if (nodeDef.camera !== undefined) {\n          pending.push(parser.getDependency('camera', nodeDef.camera).then(function (camera) {\n            return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n          }));\n        }\n\n        parser._invokeAll(function (ext) {\n          return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n        }).forEach(function (promise) {\n          pending.push(promise);\n        });\n\n        return Promise.all(pending);\n      }().then(function (objects) {\n        var node; // .isBone isn't in glTF spec. See ._markDefs\n\n        if (nodeDef.isBone === true) {\n          node = new Bone();\n        } else if (objects.length > 1) {\n          node = new Group();\n        } else if (objects.length === 1) {\n          node = objects[0];\n        } else {\n          node = new Object3D();\n        }\n\n        if (node !== objects[0]) {\n          for (var _i319 = 0, il = objects.length; _i319 < il; _i319++) {\n            node.add(objects[_i319]);\n          }\n        }\n\n        if (nodeDef.name) {\n          node.userData.name = nodeDef.name;\n          node.name = nodeName;\n        }\n\n        assignExtrasToUserData(node, nodeDef);\n        if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n        if (nodeDef.matrix !== undefined) {\n          var matrix = new Matrix4();\n          matrix.fromArray(nodeDef.matrix);\n          node.applyMatrix4(matrix);\n        } else {\n          if (nodeDef.translation !== undefined) {\n            node.position.fromArray(nodeDef.translation);\n          }\n\n          if (nodeDef.rotation !== undefined) {\n            node.quaternion.fromArray(nodeDef.rotation);\n          }\n\n          if (nodeDef.scale !== undefined) {\n            node.scale.fromArray(nodeDef.scale);\n          }\n        }\n\n        parser.associations.set(node, {\n          type: 'nodes',\n          index: nodeIndex\n        });\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n     * @param {number} sceneIndex\n     * @return {Promise<Group>}\n     */\n\n  }, {\n    key: \"loadScene\",\n    value: function loadScene(sceneIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this; // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\n      var scene = new Group();\n      if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name);\n      assignExtrasToUserData(scene, sceneDef);\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n      var nodeIds = sceneDef.nodes || [];\n      var pending = [];\n\n      for (var _i320 = 0, il = nodeIds.length; _i320 < il; _i320++) {\n        pending.push(buildNodeHierachy(nodeIds[_i320], scene, json, parser));\n      }\n\n      return Promise.all(pending).then(function () {\n        return scene;\n      });\n    }\n  }]);\n\n  return GLTFParser;\n}();\n\nfunction buildNodeHierachy(nodeId, parentObject, json, parser) {\n  var nodeDef = json.nodes[nodeId];\n  return parser.getDependency('node', nodeId).then(function (node) {\n    if (nodeDef.skin === undefined) return node; // build skeleton here as well\n\n    var skinEntry;\n    return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n      skinEntry = skin;\n      var pendingJoints = [];\n\n      for (var _i321 = 0, il = skinEntry.joints.length; _i321 < il; _i321++) {\n        pendingJoints.push(parser.getDependency('node', skinEntry.joints[_i321]));\n      }\n\n      return Promise.all(pendingJoints);\n    }).then(function (jointNodes) {\n      node.traverse(function (mesh) {\n        if (!mesh.isMesh) return;\n        var bones = [];\n        var boneInverses = [];\n\n        for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n          var jointNode = jointNodes[j];\n\n          if (jointNode) {\n            bones.push(jointNode);\n            var mat = new Matrix4();\n\n            if (skinEntry.inverseBindMatrices !== undefined) {\n              mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n            }\n\n            boneInverses.push(mat);\n          } else {\n            console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n          }\n        }\n\n        mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n      });\n      return node;\n    });\n  }).then(function (node) {\n    // build node hierachy\n    parentObject.add(node);\n    var pending = [];\n\n    if (nodeDef.children) {\n      var children = nodeDef.children;\n\n      for (var _i322 = 0, il = children.length; _i322 < il; _i322++) {\n        var child = children[_i322];\n        pending.push(buildNodeHierachy(child, node, json, parser));\n      }\n    }\n\n    return Promise.all(pending);\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\n\n\nfunction computeBounds(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var box = new Box3();\n\n  if (attributes.POSITION !== undefined) {\n    var accessor = parser.json.accessors[attributes.POSITION];\n    var min = accessor.min;\n    var max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n    if (min !== undefined && max !== undefined) {\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n\n      if (accessor.normalized) {\n        var boxScale = getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var targets = primitiveDef.targets;\n\n  if (targets !== undefined) {\n    var maxDisplacement = new Vector3();\n    var vector = new Vector3();\n\n    for (var _i323 = 0, il = targets.length; _i323 < il; _i323++) {\n      var _target6 = targets[_i323];\n\n      if (_target6.POSITION !== undefined) {\n        var _accessor = parser.json.accessors[_target6.POSITION];\n        var _min = _accessor.min;\n        var _max = _accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n        if (_min !== undefined && _max !== undefined) {\n          // we need to get max of absolute components because target weight is [-1,1]\n          vector.setX(Math.max(Math.abs(_min[0]), Math.abs(_max[0])));\n          vector.setY(Math.max(Math.abs(_min[1]), Math.abs(_max[1])));\n          vector.setZ(Math.max(Math.abs(_min[2]), Math.abs(_max[2])));\n\n          if (_accessor.normalized) {\n            var _boxScale = getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES[_accessor.componentType]);\n\n            vector.multiplyScalar(_boxScale);\n          } // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n          // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n          // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n          // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\n\n          maxDisplacement.max(vector);\n        } else {\n          console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n        }\n      }\n    } // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\n\n    box.expandByVector(maxDisplacement);\n  }\n\n  geometry.boundingBox = box;\n  var sphere = new Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var pending = [];\n\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n\n  for (var gltfAttributeName in attributes) {\n    var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase(); // Skip attributes already provided by e.g. Draco extension.\n\n    if (threeAttributeName in geometry.attributes) continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n\n  if (primitiveDef.indices !== undefined && !geometry.index) {\n    var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n      geometry.setIndex(accessor);\n    });\n    pending.push(accessor);\n  }\n\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function () {\n    return primitiveDef.targets !== undefined ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\n\n\nfunction toTrianglesDrawMode(geometry, drawMode) {\n  var index = geometry.getIndex(); // generate index if not present\n\n  if (index === null) {\n    var indices = [];\n    var position = geometry.getAttribute('position');\n\n    if (position !== undefined) {\n      for (var _i324 = 0; _i324 < position.count; _i324++) {\n        indices.push(_i324);\n      }\n\n      geometry.setIndex(indices);\n      index = geometry.getIndex();\n    } else {\n      console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.');\n      return geometry;\n    }\n  } //\n\n\n  var numberOfTriangles = index.count - 2;\n  var newIndices = [];\n\n  if (drawMode === TriangleFanDrawMode) {\n    // gl.TRIANGLE_FAN\n    for (var _i325 = 1; _i325 <= numberOfTriangles; _i325++) {\n      newIndices.push(index.getX(0));\n      newIndices.push(index.getX(_i325));\n      newIndices.push(index.getX(_i325 + 1));\n    }\n  } else {\n    // gl.TRIANGLE_STRIP\n    for (var _i326 = 0; _i326 < numberOfTriangles; _i326++) {\n      if (_i326 % 2 === 0) {\n        newIndices.push(index.getX(_i326));\n        newIndices.push(index.getX(_i326 + 1));\n        newIndices.push(index.getX(_i326 + 2));\n      } else {\n        newIndices.push(index.getX(_i326 + 2));\n        newIndices.push(index.getX(_i326 + 1));\n        newIndices.push(index.getX(_i326));\n      }\n    }\n  }\n\n  if (newIndices.length / 3 !== numberOfTriangles) {\n    console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.');\n  } // build final geometry\n\n\n  var newGeometry = geometry.clone();\n  newGeometry.setIndex(newIndices);\n  return newGeometry;\n}\n\nvar e = [171, 75, 84, 88, 32, 50, 48, 187, 13, 10, 26, 10];\nvar n, i$1, s, a, r, o, l, f;\n!function (t) {\n  t[t.NONE = 0] = \"NONE\", t[t.BASISLZ = 1] = \"BASISLZ\", t[t.ZSTD = 2] = \"ZSTD\", t[t.ZLIB = 3] = \"ZLIB\";\n}(n || (n = {})), function (t) {\n  t[t.BASICFORMAT = 0] = \"BASICFORMAT\";\n}(i$1 || (i$1 = {})), function (t) {\n  t[t.UNSPECIFIED = 0] = \"UNSPECIFIED\", t[t.ETC1S = 163] = \"ETC1S\", t[t.UASTC = 166] = \"UASTC\";\n}(s || (s = {})), function (t) {\n  t[t.UNSPECIFIED = 0] = \"UNSPECIFIED\", t[t.SRGB = 1] = \"SRGB\";\n}(a || (a = {})), function (t) {\n  t[t.UNSPECIFIED = 0] = \"UNSPECIFIED\", t[t.LINEAR = 1] = \"LINEAR\", t[t.SRGB = 2] = \"SRGB\", t[t.ITU = 3] = \"ITU\", t[t.NTSC = 4] = \"NTSC\", t[t.SLOG = 5] = \"SLOG\", t[t.SLOG2 = 6] = \"SLOG2\";\n}(r || (r = {})), function (t) {\n  t[t.ALPHA_STRAIGHT = 0] = \"ALPHA_STRAIGHT\", t[t.ALPHA_PREMULTIPLIED = 1] = \"ALPHA_PREMULTIPLIED\";\n}(o || (o = {})), function (t) {\n  t[t.RGB = 0] = \"RGB\", t[t.RRR = 3] = \"RRR\", t[t.GGG = 4] = \"GGG\", t[t.AAA = 15] = \"AAA\";\n}(l || (l = {})), function (t) {\n  t[t.RGB = 0] = \"RGB\", t[t.RGBA = 3] = \"RGBA\", t[t.RRR = 4] = \"RRR\", t[t.RRRG = 5] = \"RRRG\";\n}(f || (f = {}));\n\nvar U = function U() {\n  _classCallCheck(this, U);\n\n  this.vkFormat = 0, this.typeSize = 1, this.pixelWidth = 0, this.pixelHeight = 0, this.pixelDepth = 0, this.layerCount = 0, this.faceCount = 1, this.supercompressionScheme = n.NONE, this.levels = [], this.dataFormatDescriptor = [{\n    vendorId: 0,\n    descriptorType: i$1.BASICFORMAT,\n    versionNumber: 2,\n    descriptorBlockSize: 40,\n    colorModel: s.UNSPECIFIED,\n    colorPrimaries: a.SRGB,\n    transferFunction: a.SRGB,\n    flags: o.ALPHA_STRAIGHT,\n    texelBlockDimension: {\n      x: 4,\n      y: 4,\n      z: 1,\n      w: 1\n    },\n    bytesPlane: [],\n    samples: []\n  }], this.keyValue = {}, this.globalData = null;\n};\n\nvar c = /*#__PURE__*/function () {\n  function c(t, e, n, i) {\n    _classCallCheck(this, c);\n\n    this._dataView = new DataView(t.buffer, t.byteOffset + e, n), this._littleEndian = i, this._offset = 0;\n  }\n\n  _createClass(c, [{\n    key: \"_nextUint8\",\n    value: function _nextUint8() {\n      var t = this._dataView.getUint8(this._offset);\n\n      return this._offset += 1, t;\n    }\n  }, {\n    key: \"_nextUint16\",\n    value: function _nextUint16() {\n      var t = this._dataView.getUint16(this._offset, this._littleEndian);\n\n      return this._offset += 2, t;\n    }\n  }, {\n    key: \"_nextUint32\",\n    value: function _nextUint32() {\n      var t = this._dataView.getUint32(this._offset, this._littleEndian);\n\n      return this._offset += 4, t;\n    }\n  }, {\n    key: \"_nextUint64\",\n    value: function _nextUint64() {\n      var t = this._dataView.getUint32(this._offset, this._littleEndian) + Math.pow(2, 32) * this._dataView.getUint32(this._offset + 4, this._littleEndian);\n\n      return this._offset += 8, t;\n    }\n  }, {\n    key: \"_skip\",\n    value: function _skip(t) {\n      return this._offset += t, this;\n    }\n  }, {\n    key: \"_scan\",\n    value: function _scan(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var n = this._offset;\n      var i = 0;\n\n      for (; this._dataView.getUint8(this._offset) !== e && i < t;) {\n        i++, this._offset++;\n      }\n\n      return i < t && this._offset++, new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + n, i);\n    }\n  }]);\n\n  return c;\n}();\n\nfunction _(t) {\n  return \"undefined\" != typeof TextDecoder ? new TextDecoder().decode(t) : Buffer.from(t).toString(\"utf8\");\n}\n\nfunction p(t) {\n  var n = new Uint8Array(t.buffer, t.byteOffset, e.length);\n  if (n[0] !== e[0] || n[1] !== e[1] || n[2] !== e[2] || n[3] !== e[3] || n[4] !== e[4] || n[5] !== e[5] || n[6] !== e[6] || n[7] !== e[7] || n[8] !== e[8] || n[9] !== e[9] || n[10] !== e[10] || n[11] !== e[11]) throw new Error(\"Missing KTX 2.0 identifier.\");\n  var i = new U(),\n      s = 17 * Uint32Array.BYTES_PER_ELEMENT,\n      a = new c(t, e.length, s, !0);\n  i.vkFormat = a._nextUint32(), i.typeSize = a._nextUint32(), i.pixelWidth = a._nextUint32(), i.pixelHeight = a._nextUint32(), i.pixelDepth = a._nextUint32(), i.layerCount = a._nextUint32(), i.faceCount = a._nextUint32();\n\n  var r = a._nextUint32();\n\n  i.supercompressionScheme = a._nextUint32();\n\n  var o = a._nextUint32(),\n      l = a._nextUint32(),\n      f = a._nextUint32(),\n      h = a._nextUint32(),\n      g = a._nextUint64(),\n      p = a._nextUint64(),\n      x = new c(t, e.length + s, 3 * r * 8, !0);\n\n  for (var _e4 = 0; _e4 < r; _e4++) {\n    i.levels.push({\n      levelData: new Uint8Array(t.buffer, t.byteOffset + x._nextUint64(), x._nextUint64()),\n      uncompressedByteLength: x._nextUint64()\n    });\n  }\n\n  var u = new c(t, o, l, !0),\n      y = {\n    vendorId: u._skip(4)._nextUint16(),\n    descriptorType: u._nextUint16(),\n    versionNumber: u._nextUint16(),\n    descriptorBlockSize: u._nextUint16(),\n    colorModel: u._nextUint8(),\n    colorPrimaries: u._nextUint8(),\n    transferFunction: u._nextUint8(),\n    flags: u._nextUint8(),\n    texelBlockDimension: {\n      x: u._nextUint8() + 1,\n      y: u._nextUint8() + 1,\n      z: u._nextUint8() + 1,\n      w: u._nextUint8() + 1\n    },\n    bytesPlane: [u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8()],\n    samples: []\n  },\n      D = (y.descriptorBlockSize / 4 - 6) / 4;\n\n  for (var _t2 = 0; _t2 < D; _t2++) {\n    y.samples[_t2] = {\n      bitOffset: u._nextUint16(),\n      bitLength: u._nextUint8(),\n      channelID: u._nextUint8(),\n      samplePosition: [u._nextUint8(), u._nextUint8(), u._nextUint8(), u._nextUint8()],\n      sampleLower: u._nextUint32(),\n      sampleUpper: u._nextUint32()\n    };\n  }\n\n  i.dataFormatDescriptor.length = 0, i.dataFormatDescriptor.push(y);\n  var b = new c(t, f, h, !0);\n\n  for (; b._offset < h;) {\n    var _t3 = b._nextUint32(),\n        _e5 = b._scan(_t3),\n        _n24 = _(_e5),\n        _s13 = b._scan(_t3 - _e5.byteLength);\n\n    i.keyValue[_n24] = _n24.match(/^ktx/i) ? _(_s13) : _s13, b._offset % 4 && b._skip(4 - b._offset % 4);\n  }\n\n  if (p <= 0) return i;\n\n  var d = new c(t, g, p, !0),\n      B = d._nextUint16(),\n      w = d._nextUint16(),\n      A = d._nextUint32(),\n      S = d._nextUint32(),\n      m = d._nextUint32(),\n      L = d._nextUint32(),\n      I = [];\n\n  for (var _t4 = 0; _t4 < r; _t4++) {\n    I.push({\n      imageFlags: d._nextUint32(),\n      rgbSliceByteOffset: d._nextUint32(),\n      rgbSliceByteLength: d._nextUint32(),\n      alphaSliceByteOffset: d._nextUint32(),\n      alphaSliceByteLength: d._nextUint32()\n    });\n  }\n\n  var R = g + d._offset,\n      E = R + A,\n      T = E + S,\n      O = T + m,\n      P = new Uint8Array(t.buffer, t.byteOffset + R, A),\n      C = new Uint8Array(t.buffer, t.byteOffset + E, S),\n      F = new Uint8Array(t.buffer, t.byteOffset + T, m),\n      G = new Uint8Array(t.buffer, t.byteOffset + O, L);\n  return i.globalData = {\n    endpointCount: B,\n    selectorCount: w,\n    imageDescs: I,\n    endpointsData: P,\n    selectorsData: C,\n    tablesData: F,\n    extendedData: G\n  }, i;\n}\n/**\n * Loader for Basis Universal GPU Texture Codec.\n *\n * Basis Universal is a \"supercompressed\" GPU texture and texture video\n * compression system that outputs a highly compressed intermediate file format\n * (.basis) that can be quickly transcoded to a wide variety of GPU texture\n * compression formats.\n *\n * This loader parallelizes the transcoding process across a configurable number\n * of web workers, before transferring the transcoded compressed texture back\n * to the main thread.\n */\n\n\nvar _taskCache = new WeakMap();\n\nvar BasisTextureLoader = /*#__PURE__*/function (_Loader11) {\n  _inherits(BasisTextureLoader, _Loader11);\n\n  var _super118 = _createSuper(BasisTextureLoader);\n\n  function BasisTextureLoader(manager) {\n    var _this106;\n\n    _classCallCheck(this, BasisTextureLoader);\n\n    _this106 = _super118.call(this, manager);\n    _this106.transcoderPath = '';\n    _this106.transcoderBinary = null;\n    _this106.transcoderPending = null;\n    _this106.workerLimit = 4;\n    _this106.workerPool = [];\n    _this106.workerNextTaskID = 1;\n    _this106.workerSourceURL = '';\n    _this106.workerConfig = null;\n    return _this106;\n  }\n\n  _createClass(BasisTextureLoader, [{\n    key: \"setTranscoderPath\",\n    value: function setTranscoderPath(path) {\n      this.transcoderPath = path;\n      return this;\n    }\n  }, {\n    key: \"setWorkerLimit\",\n    value: function setWorkerLimit(workerLimit) {\n      this.workerLimit = workerLimit;\n      return this;\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport(renderer) {\n      this.workerConfig = {\n        astcSupported: renderer.extensions.has('WEBGL_compressed_texture_astc'),\n        etc1Supported: renderer.extensions.has('WEBGL_compressed_texture_etc1'),\n        etc2Supported: renderer.extensions.has('WEBGL_compressed_texture_etc'),\n        dxtSupported: renderer.extensions.has('WEBGL_compressed_texture_s3tc'),\n        bptcSupported: renderer.extensions.has('EXT_texture_compression_bptc'),\n        pvrtcSupported: renderer.extensions.has('WEBGL_compressed_texture_pvrtc') || renderer.extensions.has('WEBKIT_WEBGL_compressed_texture_pvrtc')\n      };\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var _this107 = this;\n\n      var loader = new FileLoader(this.manager);\n      loader.setResponseType('arraybuffer');\n      loader.setWithCredentials(this.withCredentials);\n      var texture = new CompressedTexture();\n      loader.load(url, function (buffer) {\n        // Check for an existing task using this buffer. A transferred buffer cannot be transferred\n        // again from this thread.\n        if (_taskCache.has(buffer)) {\n          var cachedTask = _taskCache.get(buffer);\n\n          return cachedTask.promise.then(onLoad).catch(onError);\n        }\n\n        _this107._createTexture([buffer]).then(function (_texture) {\n          texture.copy(_texture);\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }).catch(onError);\n      }, onProgress, onError);\n      return texture;\n    }\n    /** Low-level transcoding API, exposed for use by KTX2Loader. */\n\n  }, {\n    key: \"parseInternalAsync\",\n    value: function parseInternalAsync(options) {\n      var levels = options.levels;\n      var buffers = new Set();\n\n      for (var _i327 = 0; _i327 < levels.length; _i327++) {\n        buffers.add(levels[_i327].data.buffer);\n      }\n\n      return this._createTexture(Array.from(buffers), _objectSpread(_objectSpread({}, options), {}, {\n        lowLevel: true\n      }));\n    }\n    /**\n     * @param {ArrayBuffer[]} buffers\n     * @param {object?} config\n     * @return {Promise<CompressedTexture>}\n     */\n\n  }, {\n    key: \"_createTexture\",\n    value: function _createTexture(buffers) {\n      var _this108 = this;\n\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var worker;\n      var taskID;\n      var taskConfig = config;\n      var taskCost = 0;\n\n      for (var _i328 = 0; _i328 < buffers.length; _i328++) {\n        taskCost += buffers[_i328].byteLength;\n      }\n\n      var texturePending = this._allocateWorker(taskCost).then(function (_worker) {\n        worker = _worker;\n        taskID = _this108.workerNextTaskID++;\n        return new Promise(function (resolve, reject) {\n          worker._callbacks[taskID] = {\n            resolve: resolve,\n            reject: reject\n          };\n          worker.postMessage({\n            type: 'transcode',\n            id: taskID,\n            buffers: buffers,\n            taskConfig: taskConfig\n          }, buffers);\n        });\n      }).then(function (message) {\n        var mipmaps = message.mipmaps,\n            width = message.width,\n            height = message.height,\n            format = message.format;\n        var texture = new CompressedTexture(mipmaps, width, height, format, UnsignedByteType);\n        texture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n        texture.magFilter = LinearFilter;\n        texture.generateMipmaps = false;\n        texture.needsUpdate = true;\n        return texture;\n      }); // Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\n\n      texturePending.catch(function () {\n        return true;\n      }).then(function () {\n        if (worker && taskID) {\n          worker._taskLoad -= taskCost;\n          delete worker._callbacks[taskID];\n        }\n      }); // Cache the task result.\n\n      _taskCache.set(buffers[0], {\n        promise: texturePending\n      });\n\n      return texturePending;\n    }\n  }, {\n    key: \"_initTranscoder\",\n    value: function _initTranscoder() {\n      var _this109 = this;\n\n      if (!this.transcoderPending) {\n        // Load transcoder wrapper.\n        var jsLoader = new FileLoader(this.manager);\n        jsLoader.setPath(this.transcoderPath);\n        jsLoader.setWithCredentials(this.withCredentials);\n        var jsContent = new Promise(function (resolve, reject) {\n          jsLoader.load('basis_transcoder.js', resolve, undefined, reject);\n        }); // Load transcoder WASM binary.\n\n        var binaryLoader = new FileLoader(this.manager);\n        binaryLoader.setPath(this.transcoderPath);\n        binaryLoader.setResponseType('arraybuffer');\n        binaryLoader.setWithCredentials(this.withCredentials);\n        var binaryContent = new Promise(function (resolve, reject) {\n          binaryLoader.load('basis_transcoder.wasm', resolve, undefined, reject);\n        });\n        this.transcoderPending = Promise.all([jsContent, binaryContent]).then(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              jsContent = _ref3[0],\n              binaryContent = _ref3[1];\n\n          var fn = BasisTextureLoader.BasisWorker.toString();\n          var body = ['/* constants */', 'let _EngineFormat = ' + JSON.stringify(BasisTextureLoader.EngineFormat), 'let _TranscoderFormat = ' + JSON.stringify(BasisTextureLoader.TranscoderFormat), 'let _BasisFormat = ' + JSON.stringify(BasisTextureLoader.BasisFormat), '/* basis_transcoder.js */', jsContent, '/* worker */', fn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))].join('\\n');\n          _this109.workerSourceURL = URL.createObjectURL(new Blob([body]));\n          _this109.transcoderBinary = binaryContent;\n        });\n      }\n\n      return this.transcoderPending;\n    }\n  }, {\n    key: \"_allocateWorker\",\n    value: function _allocateWorker(taskCost) {\n      var _this110 = this;\n\n      return this._initTranscoder().then(function () {\n        if (_this110.workerPool.length < _this110.workerLimit) {\n          var _worker3 = new Worker(_this110.workerSourceURL);\n\n          _worker3._callbacks = {};\n          _worker3._taskLoad = 0;\n\n          _worker3.postMessage({\n            type: 'init',\n            config: _this110.workerConfig,\n            transcoderBinary: _this110.transcoderBinary\n          });\n\n          _worker3.onmessage = function (e) {\n            var message = e.data;\n\n            switch (message.type) {\n              case 'transcode':\n                _worker3._callbacks[message.id].resolve(message);\n\n                break;\n\n              case 'error':\n                _worker3._callbacks[message.id].reject(message);\n\n                break;\n\n              default:\n                console.error('THREE.BasisTextureLoader: Unexpected message, \"' + message.type + '\"');\n            }\n          };\n\n          _this110.workerPool.push(_worker3);\n        } else {\n          _this110.workerPool.sort(function (a, b) {\n            return a._taskLoad > b._taskLoad ? -1 : 1;\n          });\n        }\n\n        var worker = _this110.workerPool[_this110.workerPool.length - 1];\n        worker._taskLoad += taskCost;\n        return worker;\n      });\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      for (var _i329 = 0; _i329 < this.workerPool.length; _i329++) {\n        this.workerPool[_i329].terminate();\n      }\n\n      this.workerPool.length = 0;\n      return this;\n    }\n  }]);\n\n  return BasisTextureLoader;\n}(Loader);\n/* CONSTANTS */\n\n\nBasisTextureLoader.BasisFormat = {\n  ETC1S: 0,\n  UASTC_4x4: 1\n};\nBasisTextureLoader.TranscoderFormat = {\n  ETC1: 0,\n  ETC2: 1,\n  BC1: 2,\n  BC3: 3,\n  BC4: 4,\n  BC5: 5,\n  BC7_M6_OPAQUE_ONLY: 6,\n  BC7_M5: 7,\n  PVRTC1_4_RGB: 8,\n  PVRTC1_4_RGBA: 9,\n  ASTC_4x4: 10,\n  ATC_RGB: 11,\n  ATC_RGBA_INTERPOLATED_ALPHA: 12,\n  RGBA32: 13,\n  RGB565: 14,\n  BGR565: 15,\n  RGBA4444: 16\n};\nBasisTextureLoader.EngineFormat = {\n  RGBAFormat: RGBAFormat,\n  RGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n  RGBA_BPTC_Format: RGBA_BPTC_Format,\n  RGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n  RGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n  RGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n  RGB_ETC1_Format: RGB_ETC1_Format,\n  RGB_ETC2_Format: RGB_ETC2_Format,\n  RGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n  RGB_S3TC_DXT1_Format: RGB_S3TC_DXT1_Format\n};\n/* WEB WORKER */\n\nBasisTextureLoader.BasisWorker = function () {\n  var config;\n  var transcoderPending;\n  var BasisModule;\n  var EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\n  var TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\n  var BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n  onmessage = function onmessage(e) {\n    var message = e.data;\n\n    switch (message.type) {\n      case 'init':\n        config = message.config;\n        init(message.transcoderBinary);\n        break;\n\n      case 'transcode':\n        transcoderPending.then(function () {\n          try {\n            var _ref4 = message.taskConfig.lowLevel ? transcodeLowLevel(message.taskConfig) : transcode(message.buffers[0]),\n                width = _ref4.width,\n                height = _ref4.height,\n                hasAlpha = _ref4.hasAlpha,\n                mipmaps = _ref4.mipmaps,\n                format = _ref4.format;\n\n            var buffers = [];\n\n            for (var _i330 = 0; _i330 < mipmaps.length; ++_i330) {\n              buffers.push(mipmaps[_i330].data.buffer);\n            }\n\n            self.postMessage({\n              type: 'transcode',\n              id: message.id,\n              width: width,\n              height: height,\n              hasAlpha: hasAlpha,\n              mipmaps: mipmaps,\n              format: format\n            }, buffers);\n          } catch (error) {\n            console.error(error);\n            self.postMessage({\n              type: 'error',\n              id: message.id,\n              error: error.message\n            });\n          }\n        });\n        break;\n    }\n  };\n\n  function init(wasmBinary) {\n    transcoderPending = new Promise(function (resolve) {\n      BasisModule = {\n        wasmBinary: wasmBinary,\n        onRuntimeInitialized: resolve\n      };\n      BASIS(BasisModule); // eslint-disable-line no-undef\n    }).then(function () {\n      BasisModule.initializeBasis();\n    });\n  }\n\n  function transcodeLowLevel(taskConfig) {\n    var basisFormat = taskConfig.basisFormat,\n        width = taskConfig.width,\n        height = taskConfig.height,\n        hasAlpha = taskConfig.hasAlpha;\n\n    var _getTranscoderFormat = getTranscoderFormat(basisFormat, width, height, hasAlpha),\n        transcoderFormat = _getTranscoderFormat.transcoderFormat,\n        engineFormat = _getTranscoderFormat.engineFormat;\n\n    var blockByteLength = BasisModule.getBytesPerBlockOrPixel(transcoderFormat);\n    assert(BasisModule.isFormatSupported(transcoderFormat), 'THREE.BasisTextureLoader: Unsupported format.');\n    var mipmaps = [];\n\n    if (basisFormat === BasisFormat.ETC1S) {\n      var transcoder = new BasisModule.LowLevelETC1SImageTranscoder();\n      var _taskConfig$globalDat = taskConfig.globalData,\n          endpointCount = _taskConfig$globalDat.endpointCount,\n          endpointsData = _taskConfig$globalDat.endpointsData,\n          selectorCount = _taskConfig$globalDat.selectorCount,\n          selectorsData = _taskConfig$globalDat.selectorsData,\n          tablesData = _taskConfig$globalDat.tablesData;\n\n      try {\n        var ok;\n        ok = transcoder.decodePalettes(endpointCount, endpointsData, selectorCount, selectorsData);\n        assert(ok, 'THREE.BasisTextureLoader: decodePalettes() failed.');\n        ok = transcoder.decodeTables(tablesData);\n        assert(ok, 'THREE.BasisTextureLoader: decodeTables() failed.');\n\n        for (var _i331 = 0; _i331 < taskConfig.levels.length; _i331++) {\n          var level = taskConfig.levels[_i331];\n          var imageDesc = taskConfig.globalData.imageDescs[_i331];\n          var dstByteLength = getTranscodedImageByteLength(transcoderFormat, level.width, level.height);\n          var dst = new Uint8Array(dstByteLength);\n          ok = transcoder.transcodeImage(transcoderFormat, dst, dstByteLength / blockByteLength, level.data, getWidthInBlocks(transcoderFormat, level.width), getHeightInBlocks(transcoderFormat, level.height), level.width, level.height, level.index, imageDesc.rgbSliceByteOffset, imageDesc.rgbSliceByteLength, imageDesc.alphaSliceByteOffset, imageDesc.alphaSliceByteLength, imageDesc.imageFlags, hasAlpha, false, 0, 0);\n          assert(ok, 'THREE.BasisTextureLoader: transcodeImage() failed for level ' + level.index + '.');\n          mipmaps.push({\n            data: dst,\n            width: level.width,\n            height: level.height\n          });\n        }\n      } finally {\n        transcoder.delete();\n      }\n    } else {\n      for (var _i332 = 0; _i332 < taskConfig.levels.length; _i332++) {\n        var _level = taskConfig.levels[_i332];\n\n        var _dstByteLength = getTranscodedImageByteLength(transcoderFormat, _level.width, _level.height);\n\n        var _dst = new Uint8Array(_dstByteLength);\n\n        var _ok = BasisModule.transcodeUASTCImage(transcoderFormat, _dst, _dstByteLength / blockByteLength, _level.data, getWidthInBlocks(transcoderFormat, _level.width), getHeightInBlocks(transcoderFormat, _level.height), _level.width, _level.height, _level.index, 0, _level.data.byteLength, 0, hasAlpha, false, 0, 0, -1, -1);\n\n        assert(_ok, 'THREE.BasisTextureLoader: transcodeUASTCImage() failed for level ' + _level.index + '.');\n        mipmaps.push({\n          data: _dst,\n          width: _level.width,\n          height: _level.height\n        });\n      }\n    }\n\n    return {\n      width: width,\n      height: height,\n      hasAlpha: hasAlpha,\n      mipmaps: mipmaps,\n      format: engineFormat\n    };\n  }\n\n  function transcode(buffer) {\n    var basisFile = new BasisModule.BasisFile(new Uint8Array(buffer));\n    var basisFormat = basisFile.isUASTC() ? BasisFormat.UASTC_4x4 : BasisFormat.ETC1S;\n    var width = basisFile.getImageWidth(0, 0);\n    var height = basisFile.getImageHeight(0, 0);\n    var levels = basisFile.getNumLevels(0);\n    var hasAlpha = basisFile.getHasAlpha();\n\n    function cleanup() {\n      basisFile.close();\n      basisFile.delete();\n    }\n\n    var _getTranscoderFormat2 = getTranscoderFormat(basisFormat, width, height, hasAlpha),\n        transcoderFormat = _getTranscoderFormat2.transcoderFormat,\n        engineFormat = _getTranscoderFormat2.engineFormat;\n\n    if (!width || !height || !levels) {\n      cleanup();\n      throw new Error('THREE.BasisTextureLoader:\tInvalid texture');\n    }\n\n    if (!basisFile.startTranscoding()) {\n      cleanup();\n      throw new Error('THREE.BasisTextureLoader: .startTranscoding failed');\n    }\n\n    var mipmaps = [];\n\n    for (var mip = 0; mip < levels; mip++) {\n      var mipWidth = basisFile.getImageWidth(0, mip);\n      var mipHeight = basisFile.getImageHeight(0, mip);\n      var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, transcoderFormat));\n      var status = basisFile.transcodeImage(dst, 0, mip, transcoderFormat, 0, hasAlpha);\n\n      if (!status) {\n        cleanup();\n        throw new Error('THREE.BasisTextureLoader: .transcodeImage failed.');\n      }\n\n      mipmaps.push({\n        data: dst,\n        width: mipWidth,\n        height: mipHeight\n      });\n    }\n\n    cleanup();\n    return {\n      width: width,\n      height: height,\n      hasAlpha: hasAlpha,\n      mipmaps: mipmaps,\n      format: engineFormat\n    };\n  } //\n  // Optimal choice of a transcoder target format depends on the Basis format (ETC1S or UASTC),\n  // device capabilities, and texture dimensions. The list below ranks the formats separately\n  // for ETC1S and UASTC.\n  //\n  // In some cases, transcoding UASTC to RGBA32 might be preferred for higher quality (at\n  // significant memory cost) compared to ETC1/2, BC1/3, and PVRTC. The transcoder currently\n  // chooses RGBA32 only as a last resort and does not expose that option to the caller.\n\n\n  var FORMAT_OPTIONS = [{\n    if: 'astcSupported',\n    basisFormat: [BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4],\n    engineFormat: [EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format],\n    priorityETC1S: Infinity,\n    priorityUASTC: 1,\n    needsPowerOfTwo: false\n  }, {\n    if: 'bptcSupported',\n    basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5],\n    engineFormat: [EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format],\n    priorityETC1S: 3,\n    priorityUASTC: 2,\n    needsPowerOfTwo: false\n  }, {\n    if: 'dxtSupported',\n    basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.BC1, TranscoderFormat.BC3],\n    engineFormat: [EngineFormat.RGB_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format],\n    priorityETC1S: 4,\n    priorityUASTC: 5,\n    needsPowerOfTwo: false\n  }, {\n    if: 'etc2Supported',\n    basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.ETC1, TranscoderFormat.ETC2],\n    engineFormat: [EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format],\n    priorityETC1S: 1,\n    priorityUASTC: 3,\n    needsPowerOfTwo: false\n  }, {\n    if: 'etc1Supported',\n    basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.ETC1, TranscoderFormat.ETC1],\n    engineFormat: [EngineFormat.RGB_ETC1_Format, EngineFormat.RGB_ETC1_Format],\n    priorityETC1S: 2,\n    priorityUASTC: 4,\n    needsPowerOfTwo: false\n  }, {\n    if: 'pvrtcSupported',\n    basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\n    transcoderFormat: [TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA],\n    engineFormat: [EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format],\n    priorityETC1S: 5,\n    priorityUASTC: 6,\n    needsPowerOfTwo: true\n  }];\n  var ETC1S_OPTIONS = FORMAT_OPTIONS.sort(function (a, b) {\n    return a.priorityETC1S - b.priorityETC1S;\n  });\n  var UASTC_OPTIONS = FORMAT_OPTIONS.sort(function (a, b) {\n    return a.priorityUASTC - b.priorityUASTC;\n  });\n\n  function getTranscoderFormat(basisFormat, width, height, hasAlpha) {\n    var transcoderFormat;\n    var engineFormat;\n    var options = basisFormat === BasisFormat.ETC1S ? ETC1S_OPTIONS : UASTC_OPTIONS;\n\n    for (var _i333 = 0; _i333 < options.length; _i333++) {\n      var opt = options[_i333];\n      if (!config[opt.if]) continue;\n      if (!opt.basisFormat.includes(basisFormat)) continue;\n      if (opt.needsPowerOfTwo && !(isPowerOfTwo(width) && isPowerOfTwo(height))) continue;\n      transcoderFormat = opt.transcoderFormat[hasAlpha ? 1 : 0];\n      engineFormat = opt.engineFormat[hasAlpha ? 1 : 0];\n      return {\n        transcoderFormat: transcoderFormat,\n        engineFormat: engineFormat\n      };\n    }\n\n    console.warn('THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32.');\n    transcoderFormat = TranscoderFormat.RGBA32;\n    engineFormat = EngineFormat.RGBAFormat;\n    return {\n      transcoderFormat: transcoderFormat,\n      engineFormat: engineFormat\n    };\n  }\n\n  function assert(ok, message) {\n    if (!ok) throw new Error(message);\n  }\n\n  function getWidthInBlocks(transcoderFormat, width) {\n    return Math.ceil(width / BasisModule.getFormatBlockWidth(transcoderFormat));\n  }\n\n  function getHeightInBlocks(transcoderFormat, height) {\n    return Math.ceil(height / BasisModule.getFormatBlockHeight(transcoderFormat));\n  }\n\n  function getTranscodedImageByteLength(transcoderFormat, width, height) {\n    var blockByteLength = BasisModule.getBytesPerBlockOrPixel(transcoderFormat);\n\n    if (BasisModule.formatIsUncompressed(transcoderFormat)) {\n      return width * height * blockByteLength;\n    }\n\n    if (transcoderFormat === TranscoderFormat.PVRTC1_4_RGB || transcoderFormat === TranscoderFormat.PVRTC1_4_RGBA) {\n      // GL requires extra padding for very small textures:\n      // https://www.khronos.org/registry/OpenGL/extensions/IMG/IMG_texture_compression_pvrtc.txt\n      var paddedWidth = width + 3 & ~3;\n      var paddedHeight = height + 3 & ~3;\n      return (Math.max(8, paddedWidth) * Math.max(8, paddedHeight) * 4 + 7) / 8;\n    }\n\n    return getWidthInBlocks(transcoderFormat, width) * getHeightInBlocks(transcoderFormat, height) * blockByteLength;\n  }\n\n  function isPowerOfTwo(value) {\n    if (value <= 2) return true;\n    return (value & value - 1) === 0 && value !== 0;\n  }\n};\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\n\nvar _init, instance, heap;\n\nvar importObject = {\n  env: {\n    emscripten_notify_memory_growth: function emscripten_notify_memory_growth(index) {\n      heap = new Uint8Array(instance.exports.memory.buffer);\n    }\n  }\n};\n/**\n * ZSTD (Zstandard) decoder.\n *\n * Compiled from https://github.com/facebook/zstd/tree/dev/contrib/single_file_libs, with the\n * following steps:\n *\n * ```\n * ./combine.sh -r ../../lib -o zstddeclib.c zstddeclib-in.c\n * emcc zstddeclib.c -Oz -s EXPORTED_FUNCTIONS=\"['_ZSTD_decompress', '_ZSTD_findDecompressedSize', '_ZSTD_isError', '_malloc', '_free']\" -s ALLOW_MEMORY_GROWTH=1 -s MALLOC=emmalloc -o zstddec.wasm\n * base64 zstddec.wasm > zstddec.txt\n * ```\n *\n * The base64 string written to `zstddec.txt` is embedded as the `wasm` variable at the bottom\n * of this file. The rest of this file is written by hand, in order to avoid an additional JS\n * wrapper generated by Emscripten.\n */\n\nvar ZSTDDecoder = /*#__PURE__*/function () {\n  function ZSTDDecoder() {\n    _classCallCheck(this, ZSTDDecoder);\n  }\n\n  _createClass(ZSTDDecoder, [{\n    key: \"init\",\n    value: function init() {\n      if (!_init) {\n        _init = fetch('data:application/wasm;base64,' + wasm).then(function (response) {\n          return response.arrayBuffer();\n        }).then(function (arrayBuffer) {\n          return WebAssembly.instantiate(arrayBuffer, importObject);\n        }).then(function (result) {\n          instance = result.instance;\n          importObject.env.emscripten_notify_memory_growth(0); // initialize heap.\n        });\n      }\n\n      return _init;\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(array) {\n      var uncompressedSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      // Write compressed data into WASM memory.\n      var compressedSize = array.byteLength;\n      var compressedPtr = instance.exports.malloc(compressedSize);\n      heap.set(array, compressedPtr); // Decompress into WASM memory.\n\n      uncompressedSize = uncompressedSize || Number(instance.exports.ZSTD_findDecompressedSize(compressedPtr, compressedSize));\n      var uncompressedPtr = instance.exports.malloc(uncompressedSize);\n      var actualSize = instance.exports.ZSTD_decompress(uncompressedPtr, uncompressedSize, compressedPtr, compressedSize); // Read decompressed data and free WASM memory.\n\n      var dec = heap.slice(uncompressedPtr, uncompressedPtr + actualSize);\n      instance.exports.free(compressedPtr);\n      instance.exports.free(uncompressedPtr);\n      return dec;\n    }\n  }]);\n\n  return ZSTDDecoder;\n}();\n/**\n * BSD License\n *\n * For Zstandard software\n *\n * Copyright (c) 2016-present, Yann Collet, Facebook, Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *  * Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n *  * Neither the name Facebook nor the names of its contributors may be used to\n *    endorse or promote products derived from this software without specific\n *    prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\nvar wasm = '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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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';\n/**\n * Loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader\n * supports Basis Universal GPU textures, which can be quickly transcoded to\n * a wide variety of GPU texture compression formats. While KTX 2.0 also allows\n * other hardware-specific formats, this loader does not yet parse them.\n *\n * This loader parses the KTX 2.0 container and then relies on\n * THREE.BasisTextureLoader to complete the transcoding process.\n *\n * References:\n * - KTX: http://github.khronos.org/KTX-Specification/\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\n */\n\nvar KTX2Loader = /*#__PURE__*/function (_CompressedTextureLoa) {\n  _inherits(KTX2Loader, _CompressedTextureLoa);\n\n  var _super119 = _createSuper(KTX2Loader);\n\n  function KTX2Loader(manager) {\n    var _this111;\n\n    _classCallCheck(this, KTX2Loader);\n\n    _this111 = _super119.call(this, manager);\n    _this111.basisLoader = new BasisTextureLoader(manager);\n    _this111.zstd = new ZSTDDecoder();\n\n    _this111.zstd.init();\n\n    if (typeof MSC_TRANSCODER !== 'undefined') {\n      console.warn('THREE.KTX2Loader: Please update to latest \"basis_transcoder\".' + ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.');\n    }\n\n    return _this111;\n  }\n\n  _createClass(KTX2Loader, [{\n    key: \"setTranscoderPath\",\n    value: function setTranscoderPath(path) {\n      this.basisLoader.setTranscoderPath(path);\n      return this;\n    }\n  }, {\n    key: \"setWorkerLimit\",\n    value: function setWorkerLimit(path) {\n      this.basisLoader.setWorkerLimit(path);\n      return this;\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport(renderer) {\n      this.basisLoader.detectSupport(renderer);\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.basisLoader.dispose();\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var texture = new CompressedTexture();\n      var bufferPending = new Promise(function (resolve, reject) {\n        new FileLoader(scope.manager).setPath(scope.path).setResponseType('arraybuffer').load(url, resolve, onProgress, reject);\n      });\n      bufferPending.then(function (buffer) {\n        scope.parse(buffer, function (_texture) {\n          texture.copy(_texture);\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }, onError);\n      }).catch(onError);\n      return texture;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(buffer, onLoad, onError) {\n      var scope = this;\n      var ktx = p(new Uint8Array(buffer));\n\n      if (ktx.pixelDepth > 0) {\n        throw new Error('THREE.KTX2Loader: Only 2D textures are currently supported.');\n      }\n\n      if (ktx.layerCount > 1) {\n        throw new Error('THREE.KTX2Loader: Array textures are not currently supported.');\n      }\n\n      if (ktx.faceCount > 1) {\n        throw new Error('THREE.KTX2Loader: Cube textures are not currently supported.');\n      }\n\n      var dfd = KTX2Utils.getBasicDFD(ktx);\n      KTX2Utils.createLevels(ktx, this.zstd).then(function (levels) {\n        var basisFormat = dfd.colorModel === s.UASTC ? BasisTextureLoader.BasisFormat.UASTC_4x4 : BasisTextureLoader.BasisFormat.ETC1S;\n        var parseConfig = {\n          levels: levels,\n          width: ktx.pixelWidth,\n          height: ktx.pixelHeight,\n          basisFormat: basisFormat,\n          hasAlpha: KTX2Utils.getAlpha(ktx)\n        };\n\n        if (basisFormat === BasisTextureLoader.BasisFormat.ETC1S) {\n          parseConfig.globalData = ktx.globalData;\n        }\n\n        return scope.basisLoader.parseInternalAsync(parseConfig);\n      }).then(function (texture) {\n        texture.encoding = dfd.transferFunction === r.SRGB ? sRGBEncoding : LinearEncoding;\n        texture.premultiplyAlpha = KTX2Utils.getPremultiplyAlpha(ktx);\n        onLoad(texture);\n      }).catch(onError);\n      return this;\n    }\n  }]);\n\n  return KTX2Loader;\n}(CompressedTextureLoader);\n\nvar KTX2Utils = {\n  createLevels: function () {\n    var _createLevels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ktx, zstd) {\n      var levels, width, height, levelIndex, levelWidth, levelHeight, levelData;\n      return _regeneratorRuntime.wrap(function _callee3$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(ktx.supercompressionScheme === n.ZSTD)) {\n                _context4.next = 3;\n                break;\n              }\n\n              _context4.next = 3;\n              return zstd.init();\n\n            case 3:\n              levels = [];\n              width = ktx.pixelWidth;\n              height = ktx.pixelHeight;\n\n              for (levelIndex = 0; levelIndex < ktx.levels.length; levelIndex++) {\n                levelWidth = Math.max(1, Math.floor(width / Math.pow(2, levelIndex)));\n                levelHeight = Math.max(1, Math.floor(height / Math.pow(2, levelIndex)));\n                levelData = ktx.levels[levelIndex].levelData;\n\n                if (ktx.supercompressionScheme === n.ZSTD) {\n                  levelData = zstd.decode(levelData, ktx.levels[levelIndex].uncompressedByteLength);\n                }\n\n                levels.push({\n                  index: levelIndex,\n                  width: levelWidth,\n                  height: levelHeight,\n                  data: levelData\n                });\n              }\n\n              return _context4.abrupt(\"return\", levels);\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function createLevels(_x10, _x11) {\n      return _createLevels.apply(this, arguments);\n    }\n\n    return createLevels;\n  }(),\n  getBasicDFD: function getBasicDFD(ktx) {\n    // Basic Data Format Descriptor Block is always the first DFD.\n    return ktx.dataFormatDescriptor[0];\n  },\n  getAlpha: function getAlpha(ktx) {\n    var dfd = this.getBasicDFD(ktx); // UASTC\n\n    if (dfd.colorModel === s.UASTC) {\n      if ((dfd.samples[0].channelID & 0xF) === f.RGBA) {\n        return true;\n      }\n\n      return false;\n    } // ETC1S\n\n\n    if (dfd.samples.length === 2 && (dfd.samples[1].channelID & 0xF) === l.AAA) {\n      return true;\n    }\n\n    return false;\n  },\n  getPremultiplyAlpha: function getPremultiplyAlpha(ktx) {\n    var dfd = this.getBasicDFD(ktx);\n    return !!(dfd.flags & o.ALPHA_PREMULTIPLIED);\n  }\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar _a$a, _b$8;\n\nvar $retainerCount = Symbol('retainerCount');\nvar $recentlyUsed = Symbol('recentlyUsed');\nvar $evict = Symbol('evict');\nvar $evictionThreshold = Symbol('evictionThreshold');\nvar $cache = Symbol('cache');\n/**\n * The CacheEvictionPolicy manages the lifecycle for items in a cache,\n * evicting any items outside some threshold bounds in \"recently used\" order,\n * if they are evictable.\n *\n * Items are considered cached as they are retained. When all retainers\n * of an item release it, that item is considered evictable.\n */\n\nvar CacheEvictionPolicy = /*#__PURE__*/function (_ref5) {\n  function CacheEvictionPolicy(cache) {\n    var evictionThreshold = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n    _classCallCheck(this, CacheEvictionPolicy);\n\n    this[_a$a] = new Map();\n    this[_b$8] = [];\n    this[$cache] = cache;\n    this[$evictionThreshold] = evictionThreshold;\n  }\n  /**\n   * The eviction threshold is the maximum number of items to hold\n   * in cache indefinitely. Items within the threshold (in recently\n   * used order) will continue to be cached even if they have zero\n   * retainers.\n   */\n\n\n  _createClass(CacheEvictionPolicy, [{\n    key: \"evictionThreshold\",\n    get: function get() {\n      return this[$evictionThreshold];\n    }\n    /**\n     * A reference to the cache that operates under this policy\n     */\n    ,\n    set: function set(value) {\n      this[$evictionThreshold] = value;\n      this[$evict]();\n    }\n  }, {\n    key: \"cache\",\n    get: function get() {\n      return this[$cache];\n    }\n    /**\n     * Given an item key, returns the number of retainers of that item\n     */\n\n  }, {\n    key: \"retainerCount\",\n    value: function retainerCount(key) {\n      return this[$retainerCount].get(key) || 0;\n    }\n    /**\n     * Resets the internal tracking of cache item retainers. Use only in cases\n     * where it is certain that all retained cache items have been accounted for!\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this[$retainerCount].clear();\n      this[$recentlyUsed] = [];\n    }\n    /**\n     * Mark a given cache item as retained, where the item is represented\n     * by its key. An item can have any number of retainers.\n     */\n\n  }, {\n    key: \"retain\",\n    value: function retain(key) {\n      if (!this[$retainerCount].has(key)) {\n        this[$retainerCount].set(key, 0);\n      }\n\n      this[$retainerCount].set(key, this[$retainerCount].get(key) + 1);\n      var recentlyUsedIndex = this[$recentlyUsed].indexOf(key);\n\n      if (recentlyUsedIndex !== -1) {\n        this[$recentlyUsed].splice(recentlyUsedIndex, 1);\n      }\n\n      this[$recentlyUsed].unshift(key); // Evict, in case retaining a new item pushed an evictable item beyond the\n      // eviction threshold\n\n      this[$evict]();\n    }\n    /**\n     * Mark a given cache item as released by one of its retainers, where the item\n     * is represented by its key. When all retainers of an item have released it,\n     * the item is considered evictable.\n     */\n\n  }, {\n    key: \"release\",\n    value: function release(key) {\n      if (this[$retainerCount].has(key)) {\n        this[$retainerCount].set(key, Math.max(this[$retainerCount].get(key) - 1, 0));\n      }\n\n      this[$evict]();\n    }\n  }, {\n    key: _ref5,\n    value: function value() {\n      if (this[$recentlyUsed].length < this[$evictionThreshold]) {\n        return;\n      }\n\n      for (var _i334 = this[$recentlyUsed].length - 1; _i334 >= this[$evictionThreshold]; --_i334) {\n        var key = this[$recentlyUsed][_i334];\n        var retainerCount = this[$retainerCount].get(key);\n\n        if (retainerCount === 0) {\n          this[$cache].delete(key);\n          this[$recentlyUsed].splice(_i334, 1);\n        }\n      }\n    }\n  }]);\n\n  return CacheEvictionPolicy;\n}((_a$a = $retainerCount, _b$8 = $recentlyUsed, $evict));\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * KHR_materials_variants specification allows duplicated variant names\n * but it makes handling the extension complex.\n * We ensure tha names and make it easier.\n * If you want to export the extension with the original names\n * you are recommended to write GLTFExporter plugin to restore the names.\n *\n * @param variantNames {Array<string>}\n * @return {Array<string>}\n */\n\n\nvar ensureUniqueNames = function ensureUniqueNames(variantNames) {\n  var uniqueNames = [];\n  var knownNames = new Set();\n\n  var _iterator6 = _createForOfIteratorHelper(variantNames),\n      _step6;\n\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var name = _step6.value;\n      var uniqueName = name;\n      var suffix = 0; // @TODO: An easy solution.\n      //        O(N^2) in the worst scenario where N is variantNames.length.\n      //        Fix me if needed.\n\n      while (knownNames.has(uniqueName)) {\n        uniqueName = name + '.' + ++suffix;\n      }\n\n      knownNames.add(uniqueName);\n      uniqueNames.push(uniqueName);\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n\n  return uniqueNames;\n};\n/**\n * Convert mappings array to table object to make handling the extension easier.\n *\n * @param\n *     extensionDef {glTF.meshes[n].primitive.extensions.KHR_materials_variants}\n * @param variantNames {Array<string>} Required to be unique names\n * @return {Map}\n */\n\n\nvar mappingsArrayToTable = function mappingsArrayToTable(extensionDef, variantNames) {\n  var table = new Map();\n\n  var _iterator7 = _createForOfIteratorHelper(extensionDef.mappings),\n      _step7;\n\n  try {\n    for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n      var mapping = _step7.value;\n\n      var _iterator8 = _createForOfIteratorHelper(mapping.variants),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var variant = _step8.value;\n          table.set(variantNames[variant], {\n            material: null,\n            gltfMaterialIndex: mapping.material\n          });\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n    }\n  } catch (err) {\n    _iterator7.e(err);\n  } finally {\n    _iterator7.f();\n  }\n\n  return table;\n};\n/**\n * @param object {THREE.Object3D}\n * @return {boolean}\n */\n\n\nvar compatibleObject$1 = function compatibleObject$1(object) {\n  return 'material' in object && // easier than (!object.isMesh &&\n  // !object.isLine && !object.isPoints)\n  object.userData && // just in case\n  object.userData.variantMaterials;\n};\n\nvar GLTFMaterialsVariantsExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsVariantsExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsVariantsExtension);\n\n    this.parser = parser;\n    this.name = 'KHR_materials_variants';\n  } // Note that the following properties will be overridden even if they are\n  // pre-defined\n  // - gltf.userData.variants\n  // - mesh.userData.variantMaterials\n\n\n  _createClass(GLTFMaterialsVariantsExtension, [{\n    key: \"afterRoot\",\n    value: function afterRoot(gltf) {\n      var _this112 = this;\n\n      var parser = this.parser;\n      var json = parser.json;\n\n      if (json.extensions === undefined || json.extensions[this.name] === undefined) {\n        return null;\n      }\n\n      var extensionDef = json.extensions[this.name];\n      var variantsDef = extensionDef.variants || [];\n      var variants = ensureUniqueNames(variantsDef.map(function (v) {\n        return v.name;\n      }));\n\n      var _iterator9 = _createForOfIteratorHelper(gltf.scenes),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var scene = _step9.value;\n          // Save the variants data under associated mesh.userData\n          scene.traverse(function (object) {\n            // The following code can be simplified if parser.associations directly\n            // supports meshes.\n            var association = parser.associations.get(object);\n\n            if (!association || association.type !== 'nodes') {\n              return;\n            }\n\n            var nodeDef = json.nodes[association.index];\n            var meshIndex = nodeDef.mesh;\n\n            if (meshIndex === undefined) {\n              return;\n            } // Two limitations:\n            // 1. The nodeDef shouldn't have any objects (camera, light, or\n            // nodeDef.extensions object)\n            //    other than nodeDef.mesh\n            // 2. Other plugins shouldn't change any scene graph hierarchy\n            // The following code can cause error if hitting the either or both\n            // limitations If parser.associations will directly supports meshes\n            // these limitations can be removed\n\n\n            var meshDef = json.meshes[meshIndex];\n            var primitivesDef = meshDef.primitives;\n            var meshes = 'isMesh' in object ? [object] : object.children;\n\n            for (var _i335 = 0; _i335 < primitivesDef.length; _i335++) {\n              var primitiveDef = primitivesDef[_i335];\n              var extensionsDef = primitiveDef.extensions;\n\n              if (!extensionsDef || !extensionsDef[_this112.name]) {\n                continue;\n              }\n\n              meshes[_i335].userData.variantMaterials = mappingsArrayToTable(extensionsDef[_this112.name], variants);\n            }\n          });\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      gltf.userData.variants = variants; // @TODO: Adding functions to userData might be problematic\n      //        for example when serializing?\n\n      gltf.userData.functions = gltf.userData.functions || {};\n      /**\n       * @param object {THREE.Mesh}\n       * @param variantName {string|null}\n       * @return {Promise}\n       * @TODO: Support multi materials?\n       */\n\n      var switchMaterial = /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(object, variantName, onUpdate) {\n          var oldMaterial, gltfMaterialIndex, variantMaterialParam;\n          return _regeneratorRuntime.wrap(function _callee4$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  if (!object.userData.originalMaterial) {\n                    object.userData.originalMaterial = object.material;\n                  }\n\n                  oldMaterial = object.material;\n                  gltfMaterialIndex = null;\n\n                  if (!(variantName === null || !object.userData.variantMaterials.has(variantName))) {\n                    _context5.next = 8;\n                    break;\n                  }\n\n                  object.material = object.userData.originalMaterial;\n\n                  if (parser.associations.has(object.material)) {\n                    gltfMaterialIndex = parser.associations.get(object.material).index;\n                  }\n\n                  _context5.next = 20;\n                  break;\n\n                case 8:\n                  variantMaterialParam = object.userData.variantMaterials.get(variantName);\n\n                  if (!variantMaterialParam.material) {\n                    _context5.next = 14;\n                    break;\n                  }\n\n                  object.material = variantMaterialParam.material;\n\n                  if ('gltfMaterialIndex' in variantMaterialParam) {\n                    gltfMaterialIndex = variantMaterialParam.gltfMaterialIndex;\n                  }\n\n                  _context5.next = 20;\n                  break;\n\n                case 14:\n                  gltfMaterialIndex = variantMaterialParam.gltfMaterialIndex;\n                  _context5.next = 17;\n                  return parser.getDependency('material', gltfMaterialIndex);\n\n                case 17:\n                  object.material = _context5.sent;\n                  parser.assignFinalMaterial(object);\n                  variantMaterialParam.material = object.material;\n\n                case 20:\n                  if (onUpdate !== null) {\n                    onUpdate(object, oldMaterial, gltfMaterialIndex);\n                  }\n\n                case 21:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee4);\n        }));\n\n        return function switchMaterial(_x12, _x13, _x14) {\n          return _ref6.apply(this, arguments);\n        };\n      }();\n      /**\n       * @param object {THREE.Mesh}\n       * @return {Promise}\n       */\n\n\n      var ensureLoadVariants = function ensureLoadVariants(object) {\n        var currentMaterial = object.material;\n        var variantMaterials = object.userData.variantMaterials;\n        var pending = [];\n\n        var _iterator10 = _createForOfIteratorHelper(variantMaterials.keys()),\n            _step10;\n\n        try {\n          var _loop3 = function _loop3() {\n            var variantName = _step10.value;\n            var variantMaterial = variantMaterials.get(variantName);\n\n            if (variantMaterial.material) {\n              return \"continue\";\n            }\n\n            var materialIndex = variantMaterial.gltfMaterialIndex;\n            pending.push(parser.getDependency('material', materialIndex).then(function (material) {\n              object.material = material;\n              parser.assignFinalMaterial(object);\n              variantMaterials.get(variantName).material = object.material;\n            }));\n          };\n\n          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n            var _ret3 = _loop3();\n\n            if (_ret3 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator10.e(err);\n        } finally {\n          _iterator10.f();\n        }\n\n        return Promise.all(pending).then(function () {\n          object.material = currentMaterial;\n        });\n      };\n      /**\n       * @param object {THREE.Object3D}\n       * @param variantName {string|null}\n       * @param doTraverse {boolean} Default is true\n       * @param onUpdate {function}\n       * @return {Promise}\n       */\n\n\n      gltf.userData.functions.selectVariant = function (object, variantName) {\n        var doTraverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var onUpdate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var pending = [];\n\n        if (doTraverse) {\n          object.traverse(function (o) {\n            return compatibleObject$1(o) && pending.push(switchMaterial(o, variantName, onUpdate));\n          });\n        } else {\n          compatibleObject$1(object) && pending.push(switchMaterial(object, variantName, onUpdate));\n        }\n\n        return Promise.all(pending);\n      };\n      /**\n       * @param object {THREE.Object3D}\n       * @param doTraverse {boolean} Default is true\n       * @return {Promise}\n       */\n\n\n      gltf.userData.functions.ensureLoadVariants = function (object) {\n        var doTraverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        var pending = [];\n\n        if (doTraverse) {\n          object.traverse(function (o) {\n            return compatibleObject$1(o) && pending.push(ensureLoadVariants(o));\n          });\n        } else {\n          compatibleObject$1(object) && pending.push(ensureLoadVariants(object));\n        }\n\n        return Promise.all(pending);\n      };\n\n      return Promise.resolve();\n    }\n  }]);\n\n  return GLTFMaterialsVariantsExtension;\n}();\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$9, _b$7;\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\n\n\nvar loadWithLoader = function loadWithLoader(url, loader) {\n  var progressCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n  var onProgress = function onProgress(event) {\n    var fraction = event.loaded / event.total;\n    progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n  };\n\n  return new Promise(function (resolve, reject) {\n    loader.load(url, resolve, onProgress, reject);\n  });\n};\n\nvar cache = new Map();\nvar preloaded = new Map();\nvar dracoDecoderLocation;\nvar dracoLoader = new DRACOLoader();\nvar ktx2TranscoderLocation;\nvar ktx2Loader = new KTX2Loader();\nvar $loader = Symbol('loader');\nvar $evictionPolicy = Symbol('evictionPolicy');\nvar $GLTFInstance = Symbol('GLTFInstance');\n\nvar CachingGLTFLoader = /*#__PURE__*/function (_EventDispatcher8, _ref7) {\n  _inherits(CachingGLTFLoader, _EventDispatcher8);\n\n  var _super120 = _createSuper(CachingGLTFLoader);\n\n  function CachingGLTFLoader(GLTFInstance) {\n    var _this113;\n\n    _classCallCheck(this, CachingGLTFLoader);\n\n    _this113 = _super120.call(this);\n    _this113[_b$7] = new GLTFLoader().register(function (parser) {\n      return new GLTFMaterialsVariantsExtension(parser);\n    });\n    _this113[$GLTFInstance] = GLTFInstance;\n\n    _this113[$loader].setDRACOLoader(dracoLoader);\n\n    _this113[$loader].setKTX2Loader(ktx2Loader);\n\n    return _this113;\n  }\n\n  _createClass(CachingGLTFLoader, [{\n    key: _ref7,\n    get: function get() {\n      return this.constructor[$evictionPolicy];\n    }\n    /**\n     * Preloads a glTF, populating the cache. Returns a promise that resolves\n     * when the cache is populated.\n     */\n\n  }, {\n    key: \"preload\",\n    value: function () {\n      var _preload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(url, element) {\n        var progressCallback,\n            rawGLTFLoads,\n            _GLTFInstance,\n            gltfInstanceLoads,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                progressCallback = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : function () {};\n                this.dispatchEvent({\n                  type: 'preload',\n                  element: element,\n                  src: url\n                });\n\n                if (!cache.has(url)) {\n                  rawGLTFLoads = loadWithLoader(url, this[$loader], function (progress) {\n                    progressCallback(progress * 0.8);\n                  });\n                  _GLTFInstance = this[$GLTFInstance];\n                  gltfInstanceLoads = rawGLTFLoads.then(function (rawGLTF) {\n                    return _GLTFInstance.prepare(rawGLTF);\n                  }).then(function (preparedGLTF) {\n                    progressCallback(0.9);\n                    return new _GLTFInstance(preparedGLTF);\n                  });\n                  cache.set(url, gltfInstanceLoads);\n                }\n\n                _context6.next = 5;\n                return cache.get(url);\n\n              case 5:\n                preloaded.set(url, true);\n\n                if (progressCallback) {\n                  progressCallback(1.0);\n                }\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function preload(_x15, _x16) {\n        return _preload.apply(this, arguments);\n      }\n\n      return preload;\n    }()\n    /**\n     * Loads a glTF from the specified url and resolves a unique clone of the\n     * glTF. If the glTF has already been loaded, makes a clone of the cached\n     * copy.\n     */\n\n  }, {\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(url, element) {\n        var _this114 = this;\n\n        var progressCallback,\n            gltf,\n            clone,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                progressCallback = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : function () {};\n                _context7.next = 3;\n                return this.preload(url, element, progressCallback);\n\n              case 3:\n                _context7.next = 5;\n                return cache.get(url);\n\n              case 5:\n                gltf = _context7.sent;\n                _context7.next = 8;\n                return gltf.clone();\n\n              case 8:\n                clone = _context7.sent;\n                this[$evictionPolicy].retain(url); // Patch dispose so that we can properly account for instance use\n                // in the caching layer:\n\n                clone.dispose = function () {\n                  var originalDispose = clone.dispose;\n                  var disposed = false;\n                  return function () {\n                    if (disposed) {\n                      return;\n                    }\n\n                    disposed = true;\n                    originalDispose.apply(clone);\n\n                    _this114[$evictionPolicy].release(url);\n                  };\n                }();\n\n                return _context7.abrupt(\"return\", clone);\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function load(_x17, _x18) {\n        return _load.apply(this, arguments);\n      }\n\n      return load;\n    }()\n  }], [{\n    key: \"setDRACODecoderLocation\",\n    value: function setDRACODecoderLocation(url) {\n      dracoDecoderLocation = url;\n      dracoLoader.setDecoderPath(url);\n    }\n  }, {\n    key: \"getDRACODecoderLocation\",\n    value: function getDRACODecoderLocation() {\n      return dracoDecoderLocation;\n    }\n  }, {\n    key: \"setKTX2TranscoderLocation\",\n    value: function setKTX2TranscoderLocation(url) {\n      ktx2TranscoderLocation = url;\n      ktx2Loader.setTranscoderPath(url);\n    }\n  }, {\n    key: \"getKTX2TranscoderLocation\",\n    value: function getKTX2TranscoderLocation() {\n      return ktx2TranscoderLocation;\n    }\n  }, {\n    key: \"initializeKTX2Loader\",\n    value: function initializeKTX2Loader(renderer) {\n      ktx2Loader.detectSupport(renderer);\n    }\n  }, {\n    key: \"cache\",\n    get: function get() {\n      return cache;\n    }\n    /** @nocollapse */\n\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      var _this115 = this;\n\n      cache.forEach(function (_value, url) {\n        _this115.delete(url);\n      });\n      this[$evictionPolicy].reset();\n    }\n  }, {\n    key: \"has\",\n    value: function has(url) {\n      return cache.has(url);\n    }\n    /** @nocollapse */\n\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(url) {\n        var gltfLoads, gltf;\n        return _regeneratorRuntime.wrap(function _callee7$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (this.has(url)) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 2:\n                gltfLoads = cache.get(url);\n                preloaded.delete(url);\n                cache.delete(url);\n                _context8.next = 7;\n                return gltfLoads;\n\n              case 7:\n                gltf = _context8.sent;\n                // Dispose of the cached glTF's materials and geometries:\n                gltf.dispose();\n\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function _delete(_x19) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n    /**\n     * Returns true if the model that corresponds to the specified url is\n     * available in our local cache.\n     */\n\n  }, {\n    key: \"hasFinishedLoading\",\n    value: function hasFinishedLoading(url) {\n      return !!preloaded.get(url);\n    }\n  }]);\n\n  return CachingGLTFLoader;\n}(EventDispatcher, (_a$9 = $evictionPolicy, _b$7 = $loader, $evictionPolicy));\n\nCachingGLTFLoader[_a$9] = new CacheEvictionPolicy(CachingGLTFLoader);\n\nvar CSS2DObject = /*#__PURE__*/function (_Object3D13) {\n  _inherits(CSS2DObject, _Object3D13);\n\n  var _super121 = _createSuper(CSS2DObject);\n\n  function CSS2DObject(element) {\n    var _this116;\n\n    _classCallCheck(this, CSS2DObject);\n\n    _this116 = _super121.call(this);\n    _this116.element = element || document.createElement('div');\n    _this116.element.style.position = 'absolute';\n    _this116.element.style.userSelect = 'none';\n\n    _this116.element.setAttribute('draggable', false);\n\n    _this116.addEventListener('removed', function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n\n    return _this116;\n  }\n\n  _createClass(CSS2DObject, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS2DObject.prototype), \"copy\", this).call(this, source, recursive);\n\n      this.element = source.element.cloneNode(true);\n      return this;\n    }\n  }]);\n\n  return CSS2DObject;\n}(Object3D);\n\nCSS2DObject.prototype.isCSS2DObject = true; //\n\nvar _vector = new Vector3();\n\nvar _viewMatrix = new Matrix4();\n\nvar _viewProjectionMatrix = new Matrix4();\n\nvar _a$8 = new Vector3();\n\nvar _b$6 = new Vector3();\n\nvar CSS2DRenderer = function CSS2DRenderer() {\n  _classCallCheck(this, CSS2DRenderer);\n\n  var _this = this;\n\n  var _width, _height;\n\n  var _widthHalf, _heightHalf;\n\n  var cache = {\n    objects: new WeakMap()\n  };\n  var domElement = document.createElement('div');\n  domElement.style.overflow = 'hidden';\n  this.domElement = domElement;\n\n  this.getSize = function () {\n    return {\n      width: _width,\n      height: _height\n    };\n  };\n\n  this.render = function (scene, camera) {\n    if (scene.autoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _viewMatrix.copy(camera.matrixWorldInverse);\n\n    _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\n\n    renderObject(scene, scene, camera);\n    zOrder(scene);\n  };\n\n  this.setSize = function (width, height) {\n    _width = width;\n    _height = height;\n    _widthHalf = _width / 2;\n    _heightHalf = _height / 2;\n    domElement.style.width = width + 'px';\n    domElement.style.height = height + 'px';\n  };\n\n  function renderObject(object, scene, camera) {\n    if (object.isCSS2DObject) {\n      object.onBeforeRender(_this, scene, camera);\n\n      _vector.setFromMatrixPosition(object.matrixWorld);\n\n      _vector.applyMatrix4(_viewProjectionMatrix);\n\n      var element = object.element;\n\n      if (/apple/i.test(navigator.vendor)) {\n        // https://github.com/mrdoob/three.js/issues/21415\n        element.style.transform = 'translate(-50%,-50%) translate(' + Math.round(_vector.x * _widthHalf + _widthHalf) + 'px,' + Math.round(-_vector.y * _heightHalf + _heightHalf) + 'px)';\n      } else {\n        element.style.transform = 'translate(-50%,-50%) translate(' + (_vector.x * _widthHalf + _widthHalf) + 'px,' + (-_vector.y * _heightHalf + _heightHalf) + 'px)';\n      }\n\n      element.style.display = object.visible && _vector.z >= -1 && _vector.z <= 1 ? '' : 'none';\n      var objectData = {\n        distanceToCameraSquared: getDistanceToSquared(camera, object)\n      };\n      cache.objects.set(object, objectData);\n\n      if (element.parentNode !== domElement) {\n        domElement.appendChild(element);\n      }\n\n      object.onAfterRender(_this, scene, camera);\n    }\n\n    for (var _i336 = 0, _l83 = object.children.length; _i336 < _l83; _i336++) {\n      renderObject(object.children[_i336], scene, camera);\n    }\n  }\n\n  function getDistanceToSquared(object1, object2) {\n    _a$8.setFromMatrixPosition(object1.matrixWorld);\n\n    _b$6.setFromMatrixPosition(object2.matrixWorld);\n\n    return _a$8.distanceToSquared(_b$6);\n  }\n\n  function filterAndFlatten(scene) {\n    var result = [];\n    scene.traverse(function (object) {\n      if (object.isCSS2DObject) result.push(object);\n    });\n    return result;\n  }\n\n  function zOrder(scene) {\n    var sorted = filterAndFlatten(scene).sort(function (a, b) {\n      var distanceA = cache.objects.get(a).distanceToCameraSquared;\n      var distanceB = cache.objects.get(b).distanceToCameraSquared;\n      return distanceA - distanceB;\n    });\n    var zMax = sorted.length;\n\n    for (var _i337 = 0, _l84 = sorted.length; _i337 < _l84; _i337++) {\n      sorted[_i337].element.style.zIndex = zMax - _i337;\n    }\n  }\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar deserializeUrl = function deserializeUrl(url) {\n  return !!url && url !== 'null' ? toFullUrl(url) : null;\n};\n\nvar assertIsArCandidate = function assertIsArCandidate() {\n  if (IS_WEBXR_AR_CANDIDATE) {\n    return;\n  }\n\n  var missingApis = [];\n\n  if (!HAS_WEBXR_DEVICE_API) {\n    missingApis.push('WebXR Device API');\n  }\n\n  if (!HAS_WEBXR_HIT_TEST_API) {\n    missingApis.push('WebXR Hit Test API');\n  }\n\n  throw new Error(\"The following APIs are required for AR, but are missing in this browser: \".concat(missingApis.join(', ')));\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\n\n\nvar toFullUrl = function toFullUrl(partialUrl) {\n  var url = new URL(partialUrl, window.location.toString());\n  return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\n\n\nvar throttle = function throttle(fn, ms) {\n  var timer = null;\n\n  var throttled = function throttled() {\n    if (timer != null) {\n      return;\n    }\n\n    fn.apply(void 0, arguments);\n    timer = self.setTimeout(function () {\n      return timer = null;\n    }, ms);\n  };\n\n  throttled.flush = function () {\n    if (timer != null) {\n      self.clearTimeout(timer);\n      timer = null;\n    }\n  };\n\n  return throttled;\n};\n\nvar debounce = function debounce(fn, ms) {\n  var timer = null;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key3 = 0; _key3 < _len; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    if (timer != null) {\n      self.clearTimeout(timer);\n    }\n\n    timer = self.setTimeout(function () {\n      timer = null;\n      fn.apply(void 0, args);\n    }, ms);\n  };\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\n\n\nvar clamp = function clamp(value, lowerLimit, upperLimit) {\n  return Math.max(lowerLimit, Math.min(upperLimit, value));\n}; // The DPR we use for a \"capped\" scenario (see resolveDpr below):\n\n\nvar CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\n\nvar resolveDpr = function () {\n  // If true, implies that the user is conscious of the viewport scaling\n  // relative to the device screen size.\n  var HAS_META_VIEWPORT_TAG = function () {\n    var metas = document.head != null ? Array.from(document.head.querySelectorAll('meta')) : [];\n\n    var _iterator11 = _createForOfIteratorHelper(metas),\n        _step11;\n\n    try {\n      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n        var meta = _step11.value;\n\n        if (meta.name === 'viewport') {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator11.e(err);\n    } finally {\n      _iterator11.f();\n    }\n\n    return false;\n  }();\n\n  if (!HAS_META_VIEWPORT_TAG) {\n    console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n  }\n\n  return function () {\n    return HAS_META_VIEWPORT_TAG ? window.devicePixelRatio : CAPPED_DEVICE_PIXEL_RATIO;\n  };\n}();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\n\n\nvar isDebugMode = function () {\n  var debugQueryParameterName = 'model-viewer-debug-mode';\n  var debugQueryParameter = new RegExp(\"[?&]\".concat(debugQueryParameterName, \"(&|$)\"));\n  return function () {\n    return self.ModelViewerElement && self.ModelViewerElement.debugMode || self.location && self.location.search && self.location.search.match(debugQueryParameter);\n  };\n}();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\n\n\nvar getFirstMapKey = function getFirstMapKey(map) {\n  if (map.keys != null) {\n    return map.keys().next().value || null;\n  }\n\n  var firstKey = null;\n\n  try {\n    map.forEach(function (_value, key, _map) {\n      firstKey = key; // Stop iterating the Map with forEach:\n\n      throw new Error();\n    });\n  } catch (_error) {}\n\n  return firstKey;\n};\n\nvar timePasses = function timePasses() {\n  var ms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, ms);\n  });\n};\n/**\n * @param {EventTarget|EventDispatcher} target\n * @param {string} eventName\n * @param {?Function} predicate\n */\n\n\nvar waitForEvent = function waitForEvent(target, eventName) {\n  var predicate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return new Promise(function (resolve) {\n    function handler(event) {\n      if (!predicate || predicate(event)) {\n        resolve(event);\n        target.removeEventListener(eventName, handler);\n      }\n    }\n\n    target.addEventListener(eventName, handler);\n  });\n};\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar SETTLING_TIME = 10000; // plenty long enough\n\nvar MIN_DECAY_MILLISECONDS = 0.001;\nvar DECAY_MILLISECONDS = 50;\n/**\n * The Damper class is a generic second-order critically damped system that does\n * one linear step of the desired length of time. The only parameter is\n * DECAY_MILLISECONDS. This common parameter makes all states converge at the\n * same rate regardless of scale. xNormalization is a number to provide the\n * rough scale of x, such that NIL_SPEED clamping also happens at roughly the\n * same convergence for all states.\n */\n\nvar Damper = /*#__PURE__*/function () {\n  function Damper() {\n    var decayMilliseconds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DECAY_MILLISECONDS;\n\n    _classCallCheck(this, Damper);\n\n    this.velocity = 0;\n    this.naturalFrequency = 0;\n    this.setDecayTime(decayMilliseconds);\n  }\n\n  _createClass(Damper, [{\n    key: \"setDecayTime\",\n    value: function setDecayTime(decayMilliseconds) {\n      this.naturalFrequency = 1 / Math.max(MIN_DECAY_MILLISECONDS, decayMilliseconds);\n    }\n  }, {\n    key: \"update\",\n    value: function update(x, xGoal, timeStepMilliseconds, xNormalization) {\n      var nilSpeed = 0.0002 * this.naturalFrequency;\n\n      if (x == null || xNormalization === 0) {\n        return xGoal;\n      }\n\n      if (x === xGoal && this.velocity === 0) {\n        return xGoal;\n      }\n\n      if (timeStepMilliseconds < 0) {\n        return x;\n      } // Exact solution to a critically damped second-order system, where:\n      // acceleration = this.naturalFrequency * this.naturalFrequency * (xGoal\n      // - x) - 2 * this.naturalFrequency * this.velocity;\n\n\n      var deltaX = x - xGoal;\n      var intermediateVelocity = this.velocity + this.naturalFrequency * deltaX;\n      var intermediateX = deltaX + timeStepMilliseconds * intermediateVelocity;\n      var decay = Math.exp(-this.naturalFrequency * timeStepMilliseconds);\n      var newVelocity = (intermediateVelocity - this.naturalFrequency * intermediateX) * decay;\n      var acceleration = -this.naturalFrequency * (newVelocity + intermediateVelocity * decay);\n\n      if (Math.abs(newVelocity) < nilSpeed * Math.abs(xNormalization) && acceleration * deltaX >= 0) {\n        // This ensures the controls settle and stop calling this function instead\n        // of asymptotically approaching their goal.\n        this.velocity = 0;\n        return xGoal;\n      } else {\n        this.velocity = newVelocity;\n        return xGoal + intermediateX * decay;\n      }\n    }\n  }]);\n\n  return Damper;\n}();\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar numberNode = function numberNode(value, unit) {\n  return {\n    type: 'number',\n    number: value,\n    unit: unit\n  };\n};\n/**\n * Given a string representing a comma-separated set of CSS-like expressions,\n * parses and returns an array of ASTs that correspond to those expressions.\n *\n * Currently supported syntax includes:\n *\n *  - functions (top-level and nested)\n *  - calc() arithmetic operators\n *  - numbers with units\n *  - hexidecimal-encoded colors in 3, 6 or 8 digit form\n *  - idents\n *\n * All syntax is intended to match the parsing rules and semantics of the actual\n * CSS spec as closely as possible.\n *\n * @see https://www.w3.org/TR/CSS2/\n * @see https://www.w3.org/TR/css-values-3/\n */\n\n\nvar parseExpressions = function () {\n  var cache = {};\n  var MAX_PARSE_ITERATIONS = 1000; // Arbitrarily large\n\n  return function (inputString) {\n    var cacheKey = inputString;\n\n    if (cacheKey in cache) {\n      return cache[cacheKey];\n    }\n\n    var expressions = [];\n    var parseIterations = 0;\n\n    while (inputString) {\n      if (++parseIterations > MAX_PARSE_ITERATIONS) {\n        // Avoid a potentially infinite loop due to typos:\n        inputString = '';\n        break;\n      }\n\n      var expressionParseResult = parseExpression(inputString);\n      var expression = expressionParseResult.nodes[0];\n\n      if (expression == null || expression.terms.length === 0) {\n        break;\n      }\n\n      expressions.push(expression);\n      inputString = expressionParseResult.remainingInput;\n    }\n\n    return cache[cacheKey] = expressions;\n  };\n}();\n/**\n * Parse a single expression. For the purposes of our supported syntax, an\n * expression is the set of semantically meaningful terms that appear before the\n * next comma, or between the parens of a function invokation.\n */\n\n\nvar parseExpression = function () {\n  var IS_IDENT_RE = /^(\\-\\-|[a-z\\u0240-\\uffff])/i;\n  var IS_OPERATOR_RE = /^([\\*\\+\\/]|[\\-]\\s)/i;\n  var IS_EXPRESSION_END_RE = /^[\\),]/;\n  var FUNCTION_ARGUMENTS_FIRST_TOKEN = '(';\n  var HEX_FIRST_TOKEN = '#';\n  return function (inputString) {\n    var terms = [];\n\n    while (inputString.length) {\n      inputString = inputString.trim();\n\n      if (IS_EXPRESSION_END_RE.test(inputString)) {\n        break;\n      } else if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n        var _parseFunctionArgumen = parseFunctionArguments(inputString),\n            nodes = _parseFunctionArgumen.nodes,\n            remainingInput = _parseFunctionArgumen.remainingInput;\n\n        inputString = remainingInput;\n        terms.push({\n          type: 'function',\n          name: {\n            type: 'ident',\n            value: 'calc'\n          },\n          arguments: nodes\n        });\n      } else if (IS_IDENT_RE.test(inputString)) {\n        var identParseResult = parseIdent(inputString);\n        var identNode = identParseResult.nodes[0];\n        inputString = identParseResult.remainingInput;\n\n        if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n          var _parseFunctionArgumen2 = parseFunctionArguments(inputString),\n              _nodes = _parseFunctionArgumen2.nodes,\n              _remainingInput = _parseFunctionArgumen2.remainingInput;\n\n          terms.push({\n            type: 'function',\n            name: identNode,\n            arguments: _nodes\n          });\n          inputString = _remainingInput;\n        } else {\n          terms.push(identNode);\n        }\n      } else if (IS_OPERATOR_RE.test(inputString)) {\n        // Operators are always a single character, so just pluck them out:\n        terms.push({\n          type: 'operator',\n          value: inputString[0]\n        });\n        inputString = inputString.slice(1);\n      } else {\n        var _ref8 = inputString[0] === HEX_FIRST_TOKEN ? parseHex(inputString) : parseNumber(inputString),\n            _nodes2 = _ref8.nodes,\n            _remainingInput2 = _ref8.remainingInput; // The remaining string may not have had any meaningful content. Exit\n        // early if this is the case:\n\n\n        if (_nodes2.length === 0) {\n          break;\n        }\n\n        terms.push(_nodes2[0]);\n        inputString = _remainingInput2;\n      }\n    }\n\n    return {\n      nodes: [{\n        type: 'expression',\n        terms: terms\n      }],\n      remainingInput: inputString\n    };\n  };\n}();\n/**\n * An ident is something like a function name or the keyword \"auto\".\n */\n\n\nvar parseIdent = function () {\n  var NOT_IDENT_RE = /[^a-z0-9_\\-\\u0240-\\uffff]/i;\n  return function (inputString) {\n    var match = inputString.match(NOT_IDENT_RE);\n    var ident = match == null ? inputString : inputString.substr(0, match.index);\n    var remainingInput = match == null ? '' : inputString.substr(match.index);\n    return {\n      nodes: [{\n        type: 'ident',\n        value: ident\n      }],\n      remainingInput: remainingInput\n    };\n  };\n}();\n/**\n * Parses a number. A number value can be expressed with an integer or\n * non-integer syntax, and usually includes a unit (but does not strictly\n * require one for our purposes).\n */\n\n\nvar parseNumber = function () {\n  // @see https://www.w3.org/TR/css-syntax/#number-token-diagram\n  var VALUE_RE = /[\\+\\-]?(\\d+[\\.]\\d+|\\d+|[\\.]\\d+)([eE][\\+\\-]?\\d+)?/;\n  var UNIT_RE = /^[a-z%]+/i;\n  var ALLOWED_UNITS = /^(m|mm|cm|rad|deg|[%])$/;\n  return function (inputString) {\n    var valueMatch = inputString.match(VALUE_RE);\n    var value = valueMatch == null ? '0' : valueMatch[0];\n    inputString = value == null ? inputString : inputString.slice(value.length);\n    var unitMatch = inputString.match(UNIT_RE);\n    var unit = unitMatch != null && unitMatch[0] !== '' ? unitMatch[0] : null;\n    var remainingInput = unitMatch == null ? inputString : inputString.slice(unit.length);\n\n    if (unit != null && !ALLOWED_UNITS.test(unit)) {\n      unit = null;\n    }\n\n    return {\n      nodes: [{\n        type: 'number',\n        number: parseFloat(value) || 0,\n        unit: unit\n      }],\n      remainingInput: remainingInput\n    };\n  };\n}();\n/**\n * Parses a hexidecimal-encoded color in 3, 6 or 8 digit form.\n */\n\n\nvar parseHex = function () {\n  // TODO(cdata): right now we don't actually enforce the number of digits\n  var HEX_RE = /^[a-f0-9]*/i;\n  return function (inputString) {\n    inputString = inputString.slice(1).trim();\n    var hexMatch = inputString.match(HEX_RE);\n    var nodes = hexMatch == null ? [] : [{\n      type: 'hex',\n      value: hexMatch[0]\n    }];\n    return {\n      nodes: nodes,\n      remainingInput: hexMatch == null ? inputString : inputString.slice(hexMatch[0].length)\n    };\n  };\n}();\n/**\n * Parses arguments passed to a function invokation (e.g., the expressions\n * within a matched set of parens).\n */\n\n\nvar parseFunctionArguments = function parseFunctionArguments(inputString) {\n  var expressionNodes = []; // Consume the opening paren\n\n  inputString = inputString.slice(1).trim();\n\n  while (inputString.length) {\n    var expressionParseResult = parseExpression(inputString);\n    expressionNodes.push(expressionParseResult.nodes[0]);\n    inputString = expressionParseResult.remainingInput.trim();\n\n    if (inputString[0] === ',') {\n      inputString = inputString.slice(1).trim();\n    } else if (inputString[0] === ')') {\n      // Consume the closing paren and stop parsing\n      inputString = inputString.slice(1);\n      break;\n    }\n  }\n\n  return {\n    nodes: expressionNodes,\n    remainingInput: inputString\n  };\n};\n\nvar $visitedTypes = Symbol('visitedTypes');\n/**\n * An ASTWalker walks an array of ASTs such as the type produced by\n * parseExpressions and invokes a callback for a configured set of nodes that\n * the user wishes to \"visit\" during the walk.\n */\n\nvar ASTWalker = /*#__PURE__*/function () {\n  function ASTWalker(visitedTypes) {\n    _classCallCheck(this, ASTWalker);\n\n    this[$visitedTypes] = visitedTypes;\n  }\n  /**\n   * Walk the given set of ASTs, and invoke the provided callback for nodes that\n   * match the filtered set that the ASTWalker was constructed with.\n   */\n\n\n  _createClass(ASTWalker, [{\n    key: \"walk\",\n    value: function walk(ast, callback) {\n      var remaining = ast.slice();\n\n      while (remaining.length) {\n        var next = remaining.shift();\n\n        if (this[$visitedTypes].indexOf(next.type) > -1) {\n          callback(next);\n        }\n\n        switch (next.type) {\n          case 'expression':\n            remaining.unshift.apply(remaining, _toConsumableArray(next.terms));\n            break;\n\n          case 'function':\n            remaining.unshift.apply(remaining, [next.name].concat(_toConsumableArray(next.arguments)));\n            break;\n        }\n      }\n    }\n  }]);\n\n  return ASTWalker;\n}();\n\nvar ZERO = Object.freeze({\n  type: 'number',\n  number: 0,\n  unit: null\n});\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Ensures that a given number is expressed in radians. If the number is already\n * in radians, does nothing. If the value is in degrees, converts it to radians.\n * If the value has no specified unit, the unit is assumed to be radians. If the\n * value is not in radians or degrees, the value is resolved as 0 radians.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\n\nvar degreesToRadians = function degreesToRadians(numberNode) {\n  var fallbackRadianValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var number = numberNode.number,\n      unit = numberNode.unit;\n\n  if (!isFinite(number)) {\n    number = fallbackRadianValue;\n    unit = 'rad';\n  } else if (numberNode.unit === 'rad' || numberNode.unit == null) {\n    return numberNode;\n  }\n\n  var valueIsDegrees = unit === 'deg' && number != null;\n  var value = valueIsDegrees ? number : 0;\n  var radians = value * Math.PI / 180;\n  return {\n    type: 'number',\n    number: radians,\n    unit: 'rad'\n  };\n};\n/**\n * Converts a given length to meters. Currently supported input units are\n * meters, centimeters and millimeters.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\n\n\nvar lengthToBaseMeters = function lengthToBaseMeters(numberNode) {\n  var fallbackMeterValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var number = numberNode.number,\n      unit = numberNode.unit;\n\n  if (!isFinite(number)) {\n    number = fallbackMeterValue;\n    unit = 'm';\n  } else if (numberNode.unit === 'm') {\n    return numberNode;\n  }\n\n  var scale;\n\n  switch (unit) {\n    default:\n      scale = 1;\n      break;\n\n    case 'cm':\n      scale = 1 / 100;\n      break;\n\n    case 'mm':\n      scale = 1 / 1000;\n      break;\n  }\n\n  var value = scale * number;\n  return {\n    type: 'number',\n    number: value,\n    unit: 'm'\n  };\n};\n/**\n * Normalizes the unit of a given input number so that it is expressed in a\n * preferred unit. For length nodes, the return value will be expressed in\n * meters. For angle nodes, the return value will be expressed in radians.\n *\n * Also takes a fallback number that is used when the number value is not a\n * valid number or when the unit of the given number cannot be normalized.\n */\n\n\nvar normalizeUnit = function () {\n  var identity = function identity(node) {\n    return node;\n  };\n\n  var unitNormalizers = {\n    'rad': identity,\n    'deg': degreesToRadians,\n    'm': identity,\n    'mm': lengthToBaseMeters,\n    'cm': lengthToBaseMeters\n  };\n  return function (node) {\n    var fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ZERO;\n\n    if (!isFinite(node.number)) {\n      node.number = fallback.number;\n      node.unit = fallback.unit;\n    }\n\n    var unit = node.unit;\n\n    if (unit == null) {\n      return node;\n    }\n\n    var normalize = unitNormalizers[unit];\n\n    if (normalize == null) {\n      return fallback;\n    }\n\n    return normalize(node);\n  };\n}();\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The Hotspot object is a reference-counted slot. If decrement() returns true,\n * it should be removed from the tree so it can be garbage-collected.\n */\n\n\nvar Hotspot = /*#__PURE__*/function (_CSS2DObject) {\n  _inherits(Hotspot, _CSS2DObject);\n\n  var _super122 = _createSuper(Hotspot);\n\n  function Hotspot(config) {\n    var _this117;\n\n    _classCallCheck(this, Hotspot);\n\n    _this117 = _super122.call(this, document.createElement('div'));\n    _this117.normal = new Vector3(0, 1, 0);\n    _this117.initialized = false;\n    _this117.referenceCount = 1;\n    _this117.pivot = document.createElement('div');\n    _this117.slot = document.createElement('slot');\n\n    _this117.element.classList.add('annotation-wrapper');\n\n    _this117.slot.name = config.name;\n\n    _this117.element.appendChild(_this117.pivot);\n\n    _this117.pivot.appendChild(_this117.slot);\n\n    _this117.updatePosition(config.position);\n\n    _this117.updateNormal(config.normal);\n\n    return _this117;\n  }\n\n  _createClass(Hotspot, [{\n    key: \"facingCamera\",\n    get: function get() {\n      return !this.element.classList.contains('hide');\n    }\n    /**\n     * Sets the hotspot to be in the highly visible foreground state.\n     */\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (!this.facingCamera || !this.initialized) {\n        this.updateVisibility(true);\n      }\n    }\n    /**\n     * Sets the hotspot to be in the diminished background state.\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      if (this.facingCamera || !this.initialized) {\n        this.updateVisibility(false);\n      }\n    }\n    /**\n     * Call this when adding elements to the same slot to keep track.\n     */\n\n  }, {\n    key: \"increment\",\n    value: function increment() {\n      this.referenceCount++;\n    }\n    /**\n     * Call this when removing elements from the slot; returns true when the slot\n     * is unused.\n     */\n\n  }, {\n    key: \"decrement\",\n    value: function decrement() {\n      if (this.referenceCount > 0) {\n        --this.referenceCount;\n      }\n\n      return this.referenceCount === 0;\n    }\n    /**\n     * Change the position of the hotspot to the input string, in the same format\n     * as the data-position attribute.\n     */\n\n  }, {\n    key: \"updatePosition\",\n    value: function updatePosition(position) {\n      if (position == null) return;\n      var positionNodes = parseExpressions(position)[0].terms;\n\n      for (var _i338 = 0; _i338 < 3; ++_i338) {\n        this.position.setComponent(_i338, normalizeUnit(positionNodes[_i338]).number);\n      }\n\n      this.updateMatrixWorld();\n    }\n    /**\n     * Change the hotspot's normal to the input string, in the same format as the\n     * data-normal attribute.\n     */\n\n  }, {\n    key: \"updateNormal\",\n    value: function updateNormal(normal) {\n      if (normal == null) return;\n      var normalNodes = parseExpressions(normal)[0].terms;\n\n      for (var _i339 = 0; _i339 < 3; ++_i339) {\n        this.normal.setComponent(_i339, normalizeUnit(normalNodes[_i339]).number);\n      }\n    }\n  }, {\n    key: \"orient\",\n    value: function orient(radians) {\n      this.pivot.style.transform = \"rotate(\".concat(radians, \"rad)\");\n    }\n  }, {\n    key: \"updateVisibility\",\n    value: function updateVisibility(show) {\n      // NOTE: IE11 doesn't support a second arg for classList.toggle\n      if (show) {\n        this.element.classList.remove('hide');\n      } else {\n        this.element.classList.add('hide');\n      } // NOTE: ShadyDOM doesn't support slot.assignedElements, otherwise we could\n      // use that here.\n\n\n      this.slot.assignedNodes().forEach(function (node) {\n        if (node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n\n        var element = node; // Visibility attribute can be configured per-node in the hotspot:\n\n        var visibilityAttribute = element.dataset.visibilityAttribute;\n\n        if (visibilityAttribute != null) {\n          var attributeName = \"data-\".concat(visibilityAttribute); // NOTE: IE11 doesn't support toggleAttribute\n\n          if (show) {\n            element.setAttribute(attributeName, '');\n          } else {\n            element.removeAttribute(attributeName);\n          }\n        }\n\n        element.dispatchEvent(new CustomEvent('hotspot-visibility', {\n          detail: {\n            visible: show\n          }\n        }));\n      });\n      this.initialized = true;\n    }\n  }]);\n\n  return Hotspot;\n}(CSS2DObject);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Gets a scale value to perform inverse quantization of a vertex value\n * Reference:\n * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n * @param buffer A gltf vertex buffer\n * @returns A scale value based on KHR_mesh_quantization or 1 if the buffer is\n *     not quantized.\n */\n\n\nvar getNormalizedComponentScale = function getNormalizedComponentScale(buffer) {\n  if (!buffer.normalized) {\n    return 1;\n  }\n\n  var array = buffer.array;\n\n  if (array instanceof Int8Array) {\n    return 1 / 127;\n  } else if (array instanceof Uint8Array) {\n    return 1 / 255;\n  } else if (array instanceof Int16Array) {\n    return 1 / 32767;\n  } else if (array instanceof Uint16Array) {\n    return 1 / 65535;\n  }\n\n  return 1;\n};\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\n\n\nvar reduceVertices = function reduceVertices(model, func, initialValue) {\n  var value = initialValue;\n  var vertex = new Vector3();\n  model.traverse(function (object) {\n    var i, l;\n    object.updateWorldMatrix(false, false);\n    var geometry = object.geometry;\n\n    if (geometry !== undefined) {\n      if (geometry.isGeometry) {\n        var vertices = geometry.vertices;\n\n        for (i = 0, l = vertices.length; i < l; i++) {\n          vertex.copy(vertices[i]);\n          vertex.applyMatrix4(object.matrixWorld);\n          value = func(value, vertex);\n        }\n      } else if (geometry.isBufferGeometry) {\n        var position = geometry.attributes.position;\n\n        if (position !== undefined) {\n          var scale = getNormalizedComponentScale(position);\n\n          for (i = 0, l = position.count; i < l; i++) {\n            vertex.fromBufferAttribute(position, i);\n            vertex.multiplyScalar(scale);\n            vertex.applyMatrix4(object.matrixWorld);\n            value = func(value, vertex);\n          }\n        }\n      }\n    }\n  });\n  return value;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Nothing within Offset of the bottom of the scene casts a shadow\n// (this is to avoid having a baked-in shadow plane cast its own shadow).\n\n\nvar OFFSET = 0.002; // The softness [0, 1] of the shadow is mapped to a resolution between\n// 2^LOG_MAX_RESOLUTION and 2^LOG_MIN_RESOLUTION.\n\nvar LOG_MAX_RESOLUTION = 9;\nvar LOG_MIN_RESOLUTION = 6; // Animated models are not in general contained in their bounding box, as this\n// is calculated only for their resting pose. We create a cubic shadow volume\n// for animated models sized to their largest bounding box dimesion multiplied\n// by this scale factor.\n\nvar ANIMATION_SCALING = 2;\n/**\n * The Shadow class creates a shadow that fits a given scene and follows a\n * target. This shadow will follow the scene without any updates needed so long\n * as the shadow and scene are both parented to the same object (call it the\n * scene) and this scene is passed as the target parameter to the shadow's\n * constructor. We also must constrain the scene to motion within the horizontal\n * plane and call the setRotation() method whenever the scene's Y-axis rotation\n * changes. For motion outside of the horizontal plane, this.needsUpdate must be\n * set to true.\n *\n * The softness of the shadow is controlled by changing its resolution, making\n * softer shadows faster, but less precise.\n */\n\nvar Shadow = /*#__PURE__*/function (_DirectionalLight) {\n  _inherits(Shadow, _DirectionalLight);\n\n  var _super123 = _createSuper(Shadow);\n\n  function Shadow(scene, softness, side) {\n    var _this118;\n\n    _classCallCheck(this, Shadow);\n\n    _this118 = _super123.call(this);\n    _this118.shadowMaterial = new ShadowMaterial();\n    _this118.boundingBox = new Box3();\n    _this118.size = new Vector3();\n    _this118.shadowScale = 1;\n    _this118.isAnimated = false;\n    _this118.side = 'bottom';\n    _this118.needsUpdate = false; // We use the light only to cast a shadow, not to light the scene.\n\n    _this118.intensity = 0;\n    _this118.castShadow = true;\n    _this118.frustumCulled = false;\n    _this118.floor = new Mesh(new PlaneGeometry(), _this118.shadowMaterial);\n\n    _this118.floor.rotateX(-Math.PI / 2);\n\n    _this118.floor.receiveShadow = true;\n    _this118.floor.castShadow = false;\n    _this118.floor.frustumCulled = false;\n\n    _this118.add(_this118.floor);\n\n    scene.target.add(_assertThisInitialized(_this118));\n    _this118.target = scene.target;\n\n    _this118.setScene(scene, softness, side);\n\n    return _this118;\n  }\n  /**\n   * Update the shadow's size and position for a new scene. Softness is also\n   * needed, as this controls the shadow's resolution.\n   */\n\n\n  _createClass(Shadow, [{\n    key: \"setScene\",\n    value: function setScene(scene, softness, side) {\n      this.side = side;\n      this.isAnimated = scene.animationNames.length > 0;\n      this.boundingBox.copy(scene.boundingBox);\n      this.size.copy(scene.size);\n\n      if (this.side === 'back') {\n        var _this$boundingBox = this.boundingBox,\n            min = _this$boundingBox.min,\n            max = _this$boundingBox.max;\n        var _ref9 = [min.z, min.y];\n        min.y = _ref9[0];\n        min.z = _ref9[1];\n        var _ref10 = [max.z, max.y];\n        max.y = _ref10[0];\n        max.z = _ref10[1];\n        var _ref11 = [this.size.z, this.size.y];\n        this.size.y = _ref11[0];\n        this.size.z = _ref11[1];\n        this.rotation.x = Math.PI / 2;\n        this.rotation.y = Math.PI;\n      }\n\n      var boundingBox = this.boundingBox,\n          size = this.size;\n\n      if (this.isAnimated) {\n        var maxDimension = Math.max(size.x, size.y, size.z) * ANIMATION_SCALING;\n        size.y = maxDimension;\n        boundingBox.expandByVector(size.subScalar(maxDimension).multiplyScalar(-0.5));\n        boundingBox.max.y = boundingBox.min.y + maxDimension;\n        size.set(maxDimension, maxDimension, maxDimension);\n      }\n\n      boundingBox.getCenter(this.floor.position);\n      var shadowOffset = boundingBox.max.y + size.y * OFFSET;\n\n      if (side === 'bottom') {\n        this.position.y = shadowOffset;\n        this.shadow.camera.up.set(0, 0, 1);\n      } else {\n        this.position.y = 0;\n        this.position.z = shadowOffset;\n        this.shadow.camera.up.set(0, 1, 0);\n      }\n\n      this.setSoftness(softness);\n    }\n    /**\n     * Update the shadow's resolution based on softness (between 0 and 1). Should\n     * not be called frequently, as this results in reallocation.\n     */\n\n  }, {\n    key: \"setSoftness\",\n    value: function setSoftness(softness) {\n      var resolution = Math.pow(2, LOG_MAX_RESOLUTION - softness * (LOG_MAX_RESOLUTION - LOG_MIN_RESOLUTION));\n      this.setMapSize(resolution);\n    }\n    /**\n     * Lower-level version of the above function.\n     */\n\n  }, {\n    key: \"setMapSize\",\n    value: function setMapSize(maxMapSize) {\n      var _this$shadow = this.shadow,\n          camera = _this$shadow.camera,\n          mapSize = _this$shadow.mapSize,\n          map = _this$shadow.map;\n      var size = this.size,\n          boundingBox = this.boundingBox;\n\n      if (map != null) {\n        map.dispose();\n        this.shadow.map = null;\n      }\n\n      if (this.isAnimated) {\n        maxMapSize *= ANIMATION_SCALING;\n      }\n\n      var width = Math.floor(size.x > size.z ? maxMapSize : maxMapSize * size.x / size.z);\n      var height = Math.floor(size.x > size.z ? maxMapSize * size.z / size.x : maxMapSize);\n      mapSize.set(width, height); // These pads account for the softening radius around the shadow.\n\n      var widthPad = 2.5 * size.x / width;\n      var heightPad = 2.5 * size.z / height;\n      camera.left = -boundingBox.max.x - widthPad;\n      camera.right = -boundingBox.min.x + widthPad;\n      camera.bottom = boundingBox.min.z - heightPad;\n      camera.top = boundingBox.max.z + heightPad;\n      this.setScaleAndOffset(this.shadowScale, 0);\n      this.floor.scale.set(size.x + 2 * widthPad, size.z + 2 * heightPad, 1);\n      this.needsUpdate = true;\n    }\n    /**\n     * Set the shadow's intensity (0 to 1), which is just its opacity. Turns off\n     * shadow rendering if zero.\n     */\n\n  }, {\n    key: \"setIntensity\",\n    value: function setIntensity(intensity) {\n      this.shadowMaterial.opacity = intensity;\n\n      if (intensity > 0) {\n        this.visible = true;\n        this.floor.visible = true;\n      } else {\n        this.visible = false;\n        this.floor.visible = false;\n      }\n    }\n  }, {\n    key: \"getIntensity\",\n    value: function getIntensity() {\n      return this.shadowMaterial.opacity;\n    }\n    /**\n     * The shadow does not rotate with its parent transforms, so the rotation must\n     * be manually updated here if it rotates in world space. The input is its\n     * absolute orientation about the Y-axis (other rotations are not supported).\n     */\n\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(radiansY) {\n      if (this.side !== 'bottom') {\n        // We don't support rotation about a horizontal axis yet.\n        this.shadow.updateMatrices(this);\n        return;\n      }\n\n      this.shadow.camera.up.set(Math.sin(radiansY), 0, Math.cos(radiansY));\n      this.shadow.updateMatrices(this);\n    }\n    /**\n     * The scale is also not inherited from parents, so it must be set here in\n     * accordance with any transforms. An offset can also be specified to move the\n     * shadow vertically relative to the bottom of the scene. Positive is up, so\n     * values are generally negative.\n     */\n\n  }, {\n    key: \"setScaleAndOffset\",\n    value: function setScaleAndOffset(scale, offset) {\n      var sizeY = this.size.y;\n      var camera = this.shadow.camera;\n      this.shadowScale = scale;\n      camera.near = 0;\n      camera.far = sizeY - offset / scale;\n      camera.updateProjectionMatrix();\n      camera.scale.setScalar(scale); // Floor plane is up slightly from the bottom of the bounding box to avoid\n      // Z-fighting with baked-in shadows and to stay inside the shadow camera.\n\n      var shadowOffset = sizeY * OFFSET;\n      this.floor.position.y = 2 * shadowOffset - camera.far;\n    }\n  }]);\n\n  return Shadow;\n}(DirectionalLight);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar DEFAULT_FOV_DEG = 45;\nvar DEFAULT_HALF_FOV = DEFAULT_FOV_DEG / 2 * Math.PI / 180;\nvar SAFE_RADIUS_RATIO = Math.sin(DEFAULT_HALF_FOV);\nvar DEFAULT_TAN_FOV = Math.tan(DEFAULT_HALF_FOV);\nvar view = new Vector3();\nvar target = new Vector3();\nvar normalWorld = new Vector3();\nvar raycaster = new Raycaster();\nvar vector3$1 = new Vector3();\n/**\n * A THREE.Scene object that takes a Model and CanvasHTMLElement and\n * constructs a framed scene based off of the canvas dimensions.\n * Provides lights and cameras to be used in a renderer.\n */\n\nvar ModelScene = /*#__PURE__*/function (_Scene) {\n  _inherits(ModelScene, _Scene);\n\n  var _super124 = _createSuper(ModelScene);\n\n  function ModelScene(_ref12) {\n    var _this119;\n\n    var canvas = _ref12.canvas,\n        element = _ref12.element,\n        width = _ref12.width,\n        height = _ref12.height;\n\n    _classCallCheck(this, ModelScene);\n\n    _this119 = _super124.call(this);\n    _this119.context = null;\n    _this119.annotationRenderer = new CSS2DRenderer();\n    _this119.width = 1;\n    _this119.height = 1;\n    _this119.aspect = 1;\n    _this119.isDirty = false;\n    _this119.renderCount = 0;\n    _this119.externalRenderer = null; // These default camera values are never used, as they are reset once the\n    // model is loaded and framing is computed.\n\n    _this119.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n    _this119.xrCamera = null;\n    _this119.url = null;\n    _this119.target = new Object3D();\n    _this119.modelContainer = new Object3D();\n    _this119.animationNames = [];\n    _this119.boundingBox = new Box3();\n    _this119.size = new Vector3();\n    _this119.idealCameraDistance = 0;\n    _this119.fieldOfViewAspect = 0;\n    _this119.framedFieldOfView = DEFAULT_FOV_DEG;\n    _this119.shadow = null;\n    _this119.shadowIntensity = 0;\n    _this119.shadowSoftness = 1;\n    _this119.exposure = 1;\n    _this119.canScale = true;\n    _this119.tightBounds = false;\n    _this119.goalTarget = new Vector3();\n    _this119.targetDamperX = new Damper();\n    _this119.targetDamperY = new Damper();\n    _this119.targetDamperZ = new Damper();\n    _this119._currentGLTF = null;\n    _this119.cancelPendingSourceChange = null;\n    _this119.animationsByName = new Map();\n    _this119.currentAnimationAction = null;\n    _this119.name = 'ModelScene';\n    _this119.element = element;\n    _this119.canvas = canvas; // These default camera values are never used, as they are reset once the\n    // model is loaded and framing is computed.\n\n    _this119.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n    _this119.camera.name = 'MainCamera';\n\n    _this119.add(_this119.target);\n\n    _this119.setSize(width, height);\n\n    _this119.target.name = 'Target';\n    _this119.modelContainer.name = 'ModelContainer';\n\n    _this119.target.add(_this119.modelContainer);\n\n    _this119.mixer = new AnimationMixer(_this119.modelContainer);\n    var domElement = _this119.annotationRenderer.domElement;\n    var style = domElement.style;\n    style.display = 'none';\n    style.pointerEvents = 'none';\n    style.position = 'absolute';\n    style.top = '0';\n\n    _this119.element.shadowRoot.querySelector('.default').appendChild(domElement);\n\n    return _this119;\n  }\n  /**\n   * Function to create the context lazily, as when there is only one\n   * <model-viewer> element, the renderer's 3D context can be displayed\n   * directly. This extra context is necessary to copy the renderings into when\n   * there are more than one.\n   */\n\n\n  _createClass(ModelScene, [{\n    key: \"createContext\",\n    value: function createContext() {\n      this.context = this.canvas.getContext('2d');\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera() {\n      return this.xrCamera != null ? this.xrCamera : this.camera;\n    }\n    /**\n     * Pass in a THREE.Object3D to be controlled\n     * by this model.\n     */\n\n  }, {\n    key: \"setObject\",\n    value: function () {\n      var _setObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(model) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.reset();\n                this.modelContainer.add(model);\n                _context9.next = 4;\n                return this.setupScene();\n\n              case 4:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function setObject(_x20) {\n        return _setObject.apply(this, arguments);\n      }\n\n      return setObject;\n    }()\n    /**\n     * Sets the model via URL.\n     */\n\n  }, {\n    key: \"setSource\",\n    value: function () {\n      var _setSource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(url) {\n        var _this120 = this;\n\n        var progressCallback,\n            framingInfo,\n            gltf,\n            _gltf,\n            animations,\n            animationsByName,\n            animationNames,\n            _iterator12,\n            _step12,\n            _animation,\n            _args10 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                progressCallback = _args10.length > 1 && _args10[1] !== undefined ? _args10[1] : function () {};\n\n                if (!(!url || url === this.url)) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                progressCallback(1);\n                return _context11.abrupt(\"return\");\n\n              case 4:\n                this.reset();\n                this.url = url;\n\n                if (!(this.externalRenderer != null)) {\n                  _context11.next = 15;\n                  break;\n                }\n\n                _context11.next = 9;\n                return this.externalRenderer.load(progressCallback);\n\n              case 9:\n                framingInfo = _context11.sent;\n                this.idealCameraDistance = framingInfo.framedRadius / SAFE_RADIUS_RATIO;\n                this.fieldOfViewAspect = framingInfo.fieldOfViewAspect;\n                this.frameModel();\n                this.dispatchEvent({\n                  type: 'model-load',\n                  url: this.url\n                });\n                return _context11.abrupt(\"return\");\n\n              case 15:\n                // If we have pending work due to a previous source change in progress,\n                // cancel it so that we do not incur a race condition:\n                if (this.cancelPendingSourceChange != null) {\n                  this.cancelPendingSourceChange();\n                  this.cancelPendingSourceChange = null;\n                }\n\n                _context11.prev = 16;\n                _context11.next = 19;\n                return new Promise( /*#__PURE__*/function () {\n                  var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(resolve, reject) {\n                    var result;\n                    return _regeneratorRuntime.wrap(function _callee9$(_context10) {\n                      while (1) {\n                        switch (_context10.prev = _context10.next) {\n                          case 0:\n                            _this120.cancelPendingSourceChange = function () {\n                              return reject();\n                            };\n\n                            _context10.prev = 1;\n                            _context10.next = 4;\n                            return _this120.element[$renderer].loader.load(url, _this120.element, progressCallback);\n\n                          case 4:\n                            result = _context10.sent;\n                            resolve(result);\n                            _context10.next = 11;\n                            break;\n\n                          case 8:\n                            _context10.prev = 8;\n                            _context10.t0 = _context10[\"catch\"](1);\n                            reject(_context10.t0);\n\n                          case 11:\n                          case \"end\":\n                            return _context10.stop();\n                        }\n                      }\n                    }, _callee9, null, [[1, 8]]);\n                  }));\n\n                  return function (_x22, _x23) {\n                    return _ref13.apply(this, arguments);\n                  };\n                }());\n\n              case 19:\n                gltf = _context11.sent;\n                _context11.next = 27;\n                break;\n\n              case 22:\n                _context11.prev = 22;\n                _context11.t0 = _context11[\"catch\"](16);\n\n                if (!(_context11.t0 == null)) {\n                  _context11.next = 26;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\");\n\n              case 26:\n                throw _context11.t0;\n\n              case 27:\n                this.reset();\n                this.url = url;\n                this._currentGLTF = gltf;\n\n                if (gltf != null) {\n                  this.modelContainer.add(gltf.scene);\n                }\n\n                _gltf = gltf, animations = _gltf.animations;\n                animationsByName = new Map();\n                animationNames = [];\n                _iterator12 = _createForOfIteratorHelper(animations);\n\n                try {\n                  for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n                    _animation = _step12.value;\n                    animationsByName.set(_animation.name, _animation);\n                    animationNames.push(_animation.name);\n                  }\n                } catch (err) {\n                  _iterator12.e(err);\n                } finally {\n                  _iterator12.f();\n                }\n\n                this.animations = animations;\n                this.animationsByName = animationsByName;\n                this.animationNames = animationNames;\n                _context11.next = 41;\n                return this.setupScene();\n\n              case 41:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee10, this, [[16, 22]]);\n      }));\n\n      function setSource(_x21) {\n        return _setSource.apply(this, arguments);\n      }\n\n      return setSource;\n    }()\n  }, {\n    key: \"setupScene\",\n    value: function () {\n      var _setupScene = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var target;\n        return _regeneratorRuntime.wrap(function _callee11$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                this.updateBoundingBox();\n                target = null;\n\n                if (!(this.tightBounds === true)) {\n                  _context12.next = 6;\n                  break;\n                }\n\n                _context12.next = 5;\n                return this.element.requestUpdate('cameraTarget');\n\n              case 5:\n                target = this.getTarget();\n\n              case 6:\n                this.updateFraming(target);\n                this.frameModel();\n                this.setShadowIntensity(this.shadowIntensity);\n                this.dispatchEvent({\n                  type: 'model-load',\n                  url: this.url\n                });\n\n              case 10:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function setupScene() {\n        return _setupScene.apply(this, arguments);\n      }\n\n      return setupScene;\n    }()\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.url = null;\n      this.isDirty = true;\n\n      if (this.shadow != null) {\n        this.shadow.setIntensity(0);\n      }\n\n      var gltf = this._currentGLTF; // Remove all current children\n\n      if (gltf != null) {\n        var _iterator13 = _createForOfIteratorHelper(this.modelContainer.children),\n            _step13;\n\n        try {\n          for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n            var child = _step13.value;\n            this.modelContainer.remove(child);\n          }\n        } catch (err) {\n          _iterator13.e(err);\n        } finally {\n          _iterator13.f();\n        }\n\n        gltf.dispose();\n        this._currentGLTF = null;\n      }\n\n      if (this.currentAnimationAction != null) {\n        this.currentAnimationAction.stop();\n        this.currentAnimationAction = null;\n      }\n\n      this.mixer.stopAllAction();\n      this.mixer.uncacheRoot(this);\n    }\n  }, {\n    key: \"currentGLTF\",\n    get: function get() {\n      return this._currentGLTF;\n    }\n    /**\n     * Updates the ModelScene for a new container size in CSS pixels.\n     */\n\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      if (this.width === width && this.height === height) {\n        return;\n      }\n\n      this.width = Math.max(width, 1);\n      this.height = Math.max(height, 1);\n      this.annotationRenderer.setSize(width, height);\n      this.aspect = this.width / this.height;\n      this.frameModel();\n\n      if (this.externalRenderer != null) {\n        var dpr = resolveDpr();\n        this.externalRenderer.resize(width * dpr, height * dpr);\n      }\n\n      this.isDirty = true;\n    }\n  }, {\n    key: \"updateBoundingBox\",\n    value: function updateBoundingBox() {\n      this.target.remove(this.modelContainer);\n\n      if (this.tightBounds === true) {\n        var bound = function bound(box, vertex) {\n          return box.expandByPoint(vertex);\n        };\n\n        this.boundingBox = reduceVertices(this.modelContainer, bound, new Box3());\n      } else {\n        this.boundingBox.setFromObject(this.modelContainer);\n      }\n\n      this.boundingBox.getSize(this.size);\n      this.target.add(this.modelContainer);\n    }\n    /**\n     * Calculates the idealCameraDistance and fieldOfViewAspect that allows the 3D\n     * object to be framed tightly in a 2D window of any aspect ratio without\n     * clipping at any camera orbit. The camera's center target point can be\n     * optionally specified. If no center is specified, it defaults to the center\n     * of the bounding box, which means asymmetric models will tend to be tight on\n     * one side instead of both. Proper choice of center can correct this.\n     */\n\n  }, {\n    key: \"updateFraming\",\n    value: function updateFraming() {\n      var _this121 = this;\n\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      this.target.remove(this.modelContainer);\n\n      if (center == null) {\n        center = this.boundingBox.getCenter(new Vector3());\n      }\n\n      var radiusSquared = function radiusSquared(value, vertex) {\n        return Math.max(value, center.distanceToSquared(vertex));\n      };\n\n      var framedRadius = Math.sqrt(reduceVertices(this.modelContainer, radiusSquared, 0));\n      this.idealCameraDistance = framedRadius / SAFE_RADIUS_RATIO;\n\n      var horizontalFov = function horizontalFov(value, vertex) {\n        vertex.sub(center);\n        var radiusXZ = Math.sqrt(vertex.x * vertex.x + vertex.z * vertex.z);\n        return Math.max(value, radiusXZ / (_this121.idealCameraDistance - Math.abs(vertex.y)));\n      };\n\n      this.fieldOfViewAspect = reduceVertices(this.modelContainer, horizontalFov, 0) / DEFAULT_TAN_FOV;\n      this.target.add(this.modelContainer);\n    }\n    /**\n     * Set's the framedFieldOfView based on the aspect ratio of the window in\n     * order to keep the model fully visible at any camera orientation.\n     */\n\n  }, {\n    key: \"frameModel\",\n    value: function frameModel() {\n      var vertical = DEFAULT_TAN_FOV * Math.max(1, this.fieldOfViewAspect / this.aspect);\n      this.framedFieldOfView = 2 * Math.atan(vertical) * 180 / Math.PI;\n    }\n    /**\n     * Returns the size of the corresponding canvas element.\n     */\n\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return {\n        width: this.width,\n        height: this.height\n      };\n    }\n    /**\n     * Sets the point in model coordinates the model should orbit/pivot around.\n     */\n\n  }, {\n    key: \"setTarget\",\n    value: function setTarget(modelX, modelY, modelZ) {\n      this.goalTarget.set(-modelX, -modelY, -modelZ);\n    }\n    /**\n     * Set the decay time of, affects the speed of target transitions.\n     */\n\n  }, {\n    key: \"setTargetDamperDecayTime\",\n    value: function setTargetDamperDecayTime(decayMilliseconds) {\n      this.targetDamperX.setDecayTime(decayMilliseconds);\n      this.targetDamperY.setDecayTime(decayMilliseconds);\n      this.targetDamperZ.setDecayTime(decayMilliseconds);\n    }\n    /**\n     * Gets the point in model coordinates the model should orbit/pivot around.\n     */\n\n  }, {\n    key: \"getTarget\",\n    value: function getTarget() {\n      return vector3$1.copy(this.goalTarget).multiplyScalar(-1);\n    }\n    /**\n     * Shifts the model to the target point immediately instead of easing in.\n     */\n\n  }, {\n    key: \"jumpToGoal\",\n    value: function jumpToGoal() {\n      this.updateTarget(SETTLING_TIME);\n    }\n    /**\n     * This should be called every frame with the frame delta to cause the target\n     * to transition to its set point.\n     */\n\n  }, {\n    key: \"updateTarget\",\n    value: function updateTarget(delta) {\n      var goal = this.goalTarget;\n      var target = this.target.position;\n\n      if (!goal.equals(target)) {\n        var radius = this.idealCameraDistance;\n        var _x24 = target.x,\n            y = target.y,\n            z = target.z;\n        _x24 = this.targetDamperX.update(_x24, goal.x, delta, radius);\n        y = this.targetDamperY.update(y, goal.y, delta, radius);\n        z = this.targetDamperZ.update(z, goal.z, delta, radius);\n        this.target.position.set(_x24, y, z);\n        this.target.updateMatrixWorld();\n        this.setShadowRotation(this.yaw);\n        this.isDirty = true;\n      }\n    }\n    /**\n     * Yaw the +z (front) of the model toward the indicated world coordinates.\n     */\n\n  }, {\n    key: \"pointTowards\",\n    value: function pointTowards(worldX, worldZ) {\n      var _this$position = this.position,\n          x = _this$position.x,\n          z = _this$position.z;\n      this.yaw = Math.atan2(worldX - x, worldZ - z);\n    }\n    /**\n     * Yaw is the scene's orientation about the y-axis, around the rotation\n     * center.\n     */\n\n  }, {\n    key: \"yaw\",\n    get: function get() {\n      return this.rotation.y;\n    },\n    set: function set(radiansY) {\n      this.rotation.y = radiansY;\n      this.updateMatrixWorld(true);\n      this.setShadowRotation(radiansY);\n      this.isDirty = true;\n    }\n  }, {\n    key: \"animationTime\",\n    get: function get() {\n      if (this.currentAnimationAction != null) {\n        return this.currentAnimationAction.time;\n      }\n\n      return 0;\n    },\n    set: function set(value) {\n      this.mixer.setTime(value);\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      if (this.currentAnimationAction != null && this.currentAnimationAction.getClip()) {\n        return this.currentAnimationAction.getClip().duration;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"hasActiveAnimation\",\n    get: function get() {\n      return this.currentAnimationAction != null;\n    }\n    /**\n     * Plays an animation if there are any associated with the current model.\n     * Accepts an optional string name of an animation to play. If no name is\n     * provided, or if no animation is found by the given name, always falls back\n     * to playing the first animation.\n     */\n\n  }, {\n    key: \"playAnimation\",\n    value: function playAnimation() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var crossfadeTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (this._currentGLTF == null) {\n        return;\n      }\n\n      var animations = this.animations;\n\n      if (animations == null || animations.length === 0) {\n        console.warn(\"Cannot play animation (model does not have any animations)\");\n        return;\n      }\n\n      var animationClip = null;\n\n      if (name != null) {\n        animationClip = this.animationsByName.get(name);\n      }\n\n      if (animationClip == null) {\n        animationClip = animations[0];\n      }\n\n      try {\n        var lastAnimationAction = this.currentAnimationAction;\n        this.currentAnimationAction = this.mixer.clipAction(animationClip, this).play();\n        this.currentAnimationAction.enabled = true;\n\n        if (lastAnimationAction != null && this.currentAnimationAction !== lastAnimationAction) {\n          this.currentAnimationAction.crossFadeFrom(lastAnimationAction, crossfadeTime, false);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, {\n    key: \"stopAnimation\",\n    value: function stopAnimation() {\n      if (this.currentAnimationAction != null) {\n        this.currentAnimationAction.stop();\n        this.currentAnimationAction.reset();\n        this.currentAnimationAction = null;\n      }\n\n      this.mixer.stopAllAction();\n    }\n  }, {\n    key: \"updateAnimation\",\n    value: function updateAnimation(step) {\n      this.mixer.update(step);\n    }\n    /**\n     * Call if the object has been changed in such a way that the shadow's shape\n     * has changed (not a rotation about the Y axis).\n     */\n\n  }, {\n    key: \"updateShadow\",\n    value: function updateShadow() {\n      var shadow = this.shadow;\n\n      if (shadow != null) {\n        var side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n        shadow.setScene(this, this.shadowSoftness, side);\n      }\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n\n  }, {\n    key: \"setShadowIntensity\",\n    value: function setShadowIntensity(shadowIntensity) {\n      this.shadowIntensity = shadowIntensity;\n\n      if (this._currentGLTF == null) {\n        return;\n      }\n\n      var shadow = this.shadow;\n      var side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n\n      if (shadow != null) {\n        shadow.setIntensity(shadowIntensity);\n        shadow.setScene(this, this.shadowSoftness, side);\n      } else if (shadowIntensity > 0) {\n        shadow = new Shadow(this, this.shadowSoftness, side);\n        shadow.setIntensity(shadowIntensity);\n        this.shadow = shadow;\n      }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n\n  }, {\n    key: \"setShadowSoftness\",\n    value: function setShadowSoftness(softness) {\n      this.shadowSoftness = softness;\n      var shadow = this.shadow;\n\n      if (shadow != null) {\n        shadow.setSoftness(softness);\n      }\n    }\n    /**\n     * The shadow must be rotated manually to match any global rotation applied to\n     * this model. The input is the global orientation about the Y axis.\n     */\n\n  }, {\n    key: \"setShadowRotation\",\n    value: function setShadowRotation(radiansY) {\n      var shadow = this.shadow;\n\n      if (shadow != null) {\n        shadow.setRotation(radiansY);\n      }\n    }\n    /**\n     * Call to check if the shadow needs an updated render; returns true if an\n     * update is needed and resets the state.\n     */\n\n  }, {\n    key: \"isShadowDirty\",\n    value: function isShadowDirty() {\n      var shadow = this.shadow;\n\n      if (shadow == null) {\n        return false;\n      } else {\n        var needsUpdate = shadow.needsUpdate;\n        shadow.needsUpdate = false;\n        return needsUpdate;\n      }\n    }\n    /**\n     * Shift the floor vertically from the bottom of the model's bounding box by\n     * offset (should generally be negative).\n     */\n\n  }, {\n    key: \"setShadowScaleAndOffset\",\n    value: function setShadowScaleAndOffset(scale, offset) {\n      var shadow = this.shadow;\n\n      if (shadow != null) {\n        shadow.setScaleAndOffset(scale, offset);\n      }\n    }\n    /**\n     * This method returns the world position and model-space normal of the point\n     * on the mesh corresponding to the input pixel coordinates given relative to\n     * the model-viewer element. If the mesh is not hit, the result is null.\n     */\n\n  }, {\n    key: \"positionAndNormalFromPoint\",\n    value: function positionAndNormalFromPoint(pixelPosition) {\n      var object = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;\n      raycaster.setFromCamera(pixelPosition, this.getCamera());\n      var hits = raycaster.intersectObject(object, true);\n\n      if (hits.length === 0) {\n        return null;\n      }\n\n      var hit = hits[0];\n\n      if (hit.face == null) {\n        return null;\n      }\n\n      hit.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(hit.object.matrixWorld));\n      return {\n        position: hit.point,\n        normal: hit.face.normal\n      };\n    }\n    /**\n     * The following methods are for operating on the set of Hotspot objects\n     * attached to the scene. These come from DOM elements, provided to slots by\n     * the Annotation Mixin.\n     */\n\n  }, {\n    key: \"addHotspot\",\n    value: function addHotspot(hotspot) {\n      this.target.add(hotspot); // This happens automatically in render(), but we do it early so that\n      // the slots appear in the shadow DOM and the elements get attached,\n      // allowing us to dispatch events on them.\n\n      this.annotationRenderer.domElement.appendChild(hotspot.element);\n    }\n  }, {\n    key: \"removeHotspot\",\n    value: function removeHotspot(hotspot) {\n      this.target.remove(hotspot);\n    }\n    /**\n     * Helper method to apply a function to all hotspots.\n     */\n\n  }, {\n    key: \"forHotspots\",\n    value: function forHotspots(func) {\n      var children = this.target.children;\n\n      for (var _i340 = 0, _l85 = children.length; _i340 < _l85; _i340++) {\n        var hotspot = children[_i340];\n\n        if (hotspot instanceof Hotspot) {\n          func(hotspot);\n        }\n      }\n    }\n    /**\n     * Update the CSS visibility of the hotspots based on whether their normals\n     * point toward the camera.\n     */\n\n  }, {\n    key: \"updateHotspots\",\n    value: function updateHotspots(viewerPosition) {\n      var _this122 = this;\n\n      this.forHotspots(function (hotspot) {\n        view.copy(viewerPosition);\n        target.setFromMatrixPosition(hotspot.matrixWorld);\n        view.sub(target);\n        normalWorld.copy(hotspot.normal).transformDirection(_this122.target.matrixWorld);\n\n        if (view.dot(normalWorld) < 0) {\n          hotspot.hide();\n        } else {\n          hotspot.show();\n        }\n      });\n    }\n    /**\n     * Rotate all hotspots to an absolute orientation given by the input number of\n     * radians. Zero returns them to upright.\n     */\n\n  }, {\n    key: \"orientHotspots\",\n    value: function orientHotspots(radians) {\n      this.forHotspots(function (hotspot) {\n        hotspot.orient(radians);\n      });\n    }\n    /**\n     * Set the rendering visibility of all hotspots. This is used to hide them\n     * during transitions and such.\n     */\n\n  }, {\n    key: \"setHotspotsVisibility\",\n    value: function setHotspotsVisibility(visible) {\n      this.forHotspots(function (hotspot) {\n        hotspot.visible = visible;\n      });\n    }\n  }]);\n\n  return ModelScene;\n}(Scene);\n/**\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\n\nvar _mipmapMaterial = _getMipmapMaterial();\n\nvar _mesh = new Mesh(new PlaneGeometry(2, 2), _mipmapMaterial);\n\nvar _flatCamera = new OrthographicCamera(0, 1, 0, 1, 0, 1);\n\nvar _tempTarget = null;\nvar _renderer = null;\n\nvar RoughnessMipmapper = /*#__PURE__*/function () {\n  function RoughnessMipmapper(renderer) {\n    _classCallCheck(this, RoughnessMipmapper);\n\n    _renderer = renderer;\n\n    _renderer.compile(_mesh, _flatCamera);\n  }\n\n  _createClass(RoughnessMipmapper, [{\n    key: \"generateMipmaps\",\n    value: function generateMipmaps(material) {\n      if ('roughnessMap' in material === false) return;\n      var roughnessMap = material.roughnessMap,\n          normalMap = material.normalMap;\n      if (roughnessMap === null || normalMap === null || !roughnessMap.generateMipmaps || material.userData.roughnessUpdated) return;\n      material.userData.roughnessUpdated = true;\n      var width = Math.max(roughnessMap.image.width, normalMap.image.width);\n      var height = Math.max(roughnessMap.image.height, normalMap.image.height);\n      if (!MathUtils.isPowerOfTwo(width) || !MathUtils.isPowerOfTwo(height)) return;\n\n      var oldTarget = _renderer.getRenderTarget();\n\n      var autoClear = _renderer.autoClear;\n      _renderer.autoClear = false;\n\n      if (_tempTarget === null || _tempTarget.width !== width || _tempTarget.height !== height) {\n        if (_tempTarget !== null) _tempTarget.dispose();\n        _tempTarget = new WebGLRenderTarget(width, height, {\n          depthBuffer: false\n        });\n        _tempTarget.scissorTest = true;\n      }\n\n      if (width !== roughnessMap.image.width || height !== roughnessMap.image.height) {\n        var params = {\n          wrapS: roughnessMap.wrapS,\n          wrapT: roughnessMap.wrapT,\n          magFilter: roughnessMap.magFilter,\n          minFilter: roughnessMap.minFilter,\n          depthBuffer: false\n        };\n        var newRoughnessTarget = new WebGLRenderTarget(width, height, params);\n        newRoughnessTarget.texture.generateMipmaps = true; // Setting the render target causes the memory to be allocated.\n\n        _renderer.setRenderTarget(newRoughnessTarget);\n\n        material.roughnessMap = newRoughnessTarget.texture;\n        if (material.metalnessMap == roughnessMap) material.metalnessMap = material.roughnessMap;\n        if (material.aoMap == roughnessMap) material.aoMap = material.roughnessMap; // Copy UV transform parameters\n\n        material.roughnessMap.offset.copy(roughnessMap.offset);\n        material.roughnessMap.repeat.copy(roughnessMap.repeat);\n        material.roughnessMap.center.copy(roughnessMap.center);\n        material.roughnessMap.rotation = roughnessMap.rotation;\n        material.roughnessMap.matrixAutoUpdate = roughnessMap.matrixAutoUpdate;\n        material.roughnessMap.matrix.copy(roughnessMap.matrix);\n      }\n\n      _mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n      _mipmapMaterial.uniforms.normalMap.value = normalMap;\n      var position = new Vector2(0, 0);\n      var texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\n      for (var mip = 0; width >= 1 && height >= 1; ++mip, width /= 2, height /= 2) {\n        // Rendering to a mip level is not allowed in webGL1. Instead we must set\n        // up a secondary texture to write the result to, then copy it back to the\n        // proper mipmap level.\n        texelSize.set(1.0 / width, 1.0 / height);\n        if (mip == 0) texelSize.set(0.0, 0.0);\n\n        _tempTarget.viewport.set(position.x, position.y, width, height);\n\n        _tempTarget.scissor.set(position.x, position.y, width, height);\n\n        _renderer.setRenderTarget(_tempTarget);\n\n        _renderer.render(_mesh, _flatCamera);\n\n        _renderer.copyFramebufferToTexture(position, material.roughnessMap, mip);\n\n        _mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n      }\n\n      if (roughnessMap !== material.roughnessMap) roughnessMap.dispose();\n\n      _renderer.setRenderTarget(oldTarget);\n\n      _renderer.autoClear = autoClear;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _mipmapMaterial.dispose();\n\n      _mesh.geometry.dispose();\n\n      if (_tempTarget != null) _tempTarget.dispose();\n    }\n  }]);\n\n  return RoughnessMipmapper;\n}();\n\nfunction _getMipmapMaterial() {\n  var shaderMaterial = new RawShaderMaterial({\n    uniforms: {\n      roughnessMap: {\n        value: null\n      },\n      normalMap: {\n        value: null\n      },\n      texelSize: {\n        value: new Vector2(1, 1)\n      }\n    },\n    vertexShader:\n    /* glsl */\n    \"\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tattribute vec3 position;\\n\\t\\t\\tattribute vec2 uv;\\n\\n\\t\\t\\tvarying vec2 vUv;\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvUv = uv;\\n\\n\\t\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t\\t}\\n\\t\\t\",\n    fragmentShader:\n    /* glsl */\n    \"\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec2 vUv;\\n\\n\\t\\t\\tuniform sampler2D roughnessMap;\\n\\t\\t\\tuniform sampler2D normalMap;\\n\\t\\t\\tuniform vec2 texelSize;\\n\\n\\t\\t\\t#define ENVMAP_TYPE_CUBE_UV\\n\\n\\t\\t\\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\\n\\n\\t\\t\\t#include <cube_uv_reflection_fragment>\\n\\n\\t\\t\\tfloat roughnessToVariance( float roughness ) {\\n\\n\\t\\t\\t\\tfloat variance = 0.0;\\n\\n\\t\\t\\t\\tif ( roughness >= r1 ) {\\n\\n\\t\\t\\t\\t\\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\\n\\n\\t\\t\\t\\t} else if ( roughness >= r4 ) {\\n\\n\\t\\t\\t\\t\\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\\n\\n\\t\\t\\t\\t} else if ( roughness >= r5 ) {\\n\\n\\t\\t\\t\\t\\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\\n\\n\\t\\t\\t\\t} else {\\n\\n\\t\\t\\t\\t\\tfloat roughness2 = roughness * roughness;\\n\\n\\t\\t\\t\\t\\tvariance = 1.79 * roughness2 * roughness2;\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn variance;\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tfloat varianceToRoughness( float variance ) {\\n\\n\\t\\t\\t\\tfloat roughness = 0.0;\\n\\n\\t\\t\\t\\tif ( variance >= v1 ) {\\n\\n\\t\\t\\t\\t\\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\\n\\n\\t\\t\\t\\t} else if ( variance >= v4 ) {\\n\\n\\t\\t\\t\\t\\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\\n\\n\\t\\t\\t\\t} else if ( variance >= v5 ) {\\n\\n\\t\\t\\t\\t\\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\\n\\n\\t\\t\\t\\t} else {\\n\\n\\t\\t\\t\\t\\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn roughness;\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\\n\\n\\t\\t\\t\\tif ( texelSize.x == 0.0 ) return;\\n\\n\\t\\t\\t\\tfloat roughness = gl_FragColor.g;\\n\\n\\t\\t\\t\\tfloat variance = roughnessToVariance( roughness );\\n\\n\\t\\t\\t\\tvec3 avgNormal;\\n\\n\\t\\t\\t\\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\\n\\n\\t\\t\\t\\t\\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\\n\\n\\t\\t\\t\\t\\t\\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\\n\\n\\t\\t\\t\\t\\t\\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvariance += 1.0 - 0.25 * length( avgNormal );\\n\\n\\t\\t\\t\\tgl_FragColor.g = varianceToRoughness( variance );\\n\\n\\t\\t\\t}\\n\\t\\t\",\n    blending: NoBlending,\n    depthTest: false,\n    depthWrite: false\n  });\n  shaderMaterial.type = 'RoughnessMipmapper';\n  return shaderMaterial;\n}\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar BASE_OPACITY = 0.1;\nvar DEFAULT_SHADOW_INTENSITY = 0.0;\nvar DEFAULT_SHADOW_SOFTNESS = 1.0;\nvar DEFAULT_EXPOSURE = 1.0;\nvar $currentEnvironmentMap = Symbol('currentEnvironmentMap');\nvar $applyEnvironmentMap = Symbol('applyEnvironmentMap');\nvar $updateEnvironment = Symbol('updateEnvironment');\nvar $cancelEnvironmentUpdate = Symbol('cancelEnvironmentUpdate');\nvar $onPreload = Symbol('onPreload');\n\nvar EnvironmentMixin = function EnvironmentMixin(ModelViewerElement) {\n  var _a, _b, _c;\n\n  var EnvironmentModelViewerElement = /*#__PURE__*/function (_ModelViewerElement, _ref14) {\n    _inherits(EnvironmentModelViewerElement, _ModelViewerElement);\n\n    var _super125 = _createSuper(EnvironmentModelViewerElement);\n\n    function EnvironmentModelViewerElement() {\n      var _this123;\n\n      _classCallCheck(this, EnvironmentModelViewerElement);\n\n      _this123 = _super125.apply(this, arguments);\n      _this123.environmentImage = null;\n      _this123.skyboxImage = null;\n      _this123.shadowIntensity = DEFAULT_SHADOW_INTENSITY;\n      _this123.shadowSoftness = DEFAULT_SHADOW_SOFTNESS;\n      _this123.exposure = DEFAULT_EXPOSURE;\n      _this123[_a] = null;\n      _this123[_b] = null;\n\n      _this123[_c] = function (event) {\n        if (event.element === _assertThisInitialized(_this123)) {\n          _this123[$updateEnvironment]();\n        }\n      };\n\n      return _this123;\n    }\n\n    _createClass(EnvironmentModelViewerElement, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(EnvironmentModelViewerElement.prototype), \"connectedCallback\", this).call(this);\n\n        this[$renderer].loader.addEventListener('preload', this[$onPreload]);\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(EnvironmentModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        this[$renderer].loader.removeEventListener('preload', this[$onPreload]);\n      }\n    }, {\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        _get(_getPrototypeOf(EnvironmentModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n        if (changedProperties.has('shadowIntensity')) {\n          this[$scene].setShadowIntensity(this.shadowIntensity * BASE_OPACITY);\n          this[$needsRender]();\n        }\n\n        if (changedProperties.has('shadowSoftness')) {\n          this[$scene].setShadowSoftness(this.shadowSoftness);\n          this[$needsRender]();\n        }\n\n        if (changedProperties.has('exposure')) {\n          this[$scene].exposure = this.exposure;\n          this[$needsRender]();\n        }\n\n        if ((changedProperties.has('environmentImage') || changedProperties.has('skyboxImage')) && this[$shouldAttemptPreload]()) {\n          this[$updateEnvironment]();\n        }\n      }\n    }, {\n      key: _ref14,\n      value: function value() {\n        _get(_getPrototypeOf(EnvironmentModelViewerElement.prototype), $onModelLoad, this).call(this);\n\n        if (this[$currentEnvironmentMap] != null) {\n          this[$applyEnvironmentMap](this[$currentEnvironmentMap]);\n        }\n      }\n    }, {\n      key: $updateEnvironment,\n      value: function () {\n        var _value2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n          var _this124 = this;\n\n          var skyboxImage, environmentImage, textureUtils, _yield$Promise, environmentMap, skybox, environment;\n\n          return _regeneratorRuntime.wrap(function _callee13$(_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  skyboxImage = this.skyboxImage, environmentImage = this.environmentImage;\n\n                  if (this[$cancelEnvironmentUpdate] != null) {\n                    this[$cancelEnvironmentUpdate]();\n                    this[$cancelEnvironmentUpdate] = null;\n                  }\n\n                  textureUtils = this[$renderer].textureUtils;\n\n                  if (!(textureUtils == null)) {\n                    _context14.next = 5;\n                    break;\n                  }\n\n                  return _context14.abrupt(\"return\");\n\n                case 5:\n                  _context14.prev = 5;\n                  _context14.next = 8;\n                  return new Promise( /*#__PURE__*/function () {\n                    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(resolve, reject) {\n                      var texturesLoad;\n                      return _regeneratorRuntime.wrap(function _callee12$(_context13) {\n                        while (1) {\n                          switch (_context13.prev = _context13.next) {\n                            case 0:\n                              texturesLoad = textureUtils.generateEnvironmentMapAndSkybox(deserializeUrl(skyboxImage), environmentImage, {\n                                progressTracker: _this124[$progressTracker]\n                              });\n\n                              _this124[$cancelEnvironmentUpdate] = function () {\n                                return reject(texturesLoad);\n                              };\n\n                              _context13.t0 = resolve;\n                              _context13.next = 5;\n                              return texturesLoad;\n\n                            case 5:\n                              _context13.t1 = _context13.sent;\n                              (0, _context13.t0)(_context13.t1);\n\n                            case 7:\n                            case \"end\":\n                              return _context13.stop();\n                          }\n                        }\n                      }, _callee12);\n                    }));\n\n                    return function (_x25, _x26) {\n                      return _ref15.apply(this, arguments);\n                    };\n                  }());\n\n                case 8:\n                  _yield$Promise = _context14.sent;\n                  environmentMap = _yield$Promise.environmentMap;\n                  skybox = _yield$Promise.skybox;\n                  environment = environmentMap.texture;\n\n                  if (skybox != null) {\n                    // When using the same environment and skybox, use the environment as\n                    // it gives HDR filtering.\n                    this[$scene].background = skybox.userData.url === environment.userData.url ? environment : skybox;\n                  } else {\n                    this[$scene].background = null;\n                  }\n\n                  this[$applyEnvironmentMap](environmentMap.texture);\n                  this[$scene].dispatchEvent({\n                    type: 'envmap-update'\n                  });\n                  _context14.next = 22;\n                  break;\n\n                case 17:\n                  _context14.prev = 17;\n                  _context14.t0 = _context14[\"catch\"](5);\n\n                  if (!(_context14.t0 instanceof Error)) {\n                    _context14.next = 22;\n                    break;\n                  }\n\n                  this[$applyEnvironmentMap](null);\n                  throw _context14.t0;\n\n                case 22:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, _callee13, this, [[5, 17]]);\n        }));\n\n        function value() {\n          return _value2.apply(this, arguments);\n        }\n\n        return value;\n      }()\n      /**\n       * Sets the Model to use the provided environment map,\n       * or `null` if the Model should remove its' environment map.\n       */\n\n    }, {\n      key: $applyEnvironmentMap,\n      value: function value(environmentMap) {\n        this[$currentEnvironmentMap] = environmentMap;\n        this[$scene].environment = this[$currentEnvironmentMap];\n        this.dispatchEvent(new CustomEvent('environment-change'));\n        this[$needsRender]();\n      }\n    }]);\n\n    return EnvironmentModelViewerElement;\n  }(ModelViewerElement, (_a = $currentEnvironmentMap, _b = $cancelEnvironmentUpdate, _c = $onPreload, $onModelLoad));\n\n  __decorate$7([property({\n    type: String,\n    attribute: 'environment-image'\n  })], EnvironmentModelViewerElement.prototype, \"environmentImage\", void 0);\n\n  __decorate$7([property({\n    type: String,\n    attribute: 'skybox-image'\n  })], EnvironmentModelViewerElement.prototype, \"skyboxImage\", void 0);\n\n  __decorate$7([property({\n    type: Number,\n    attribute: 'shadow-intensity'\n  })], EnvironmentModelViewerElement.prototype, \"shadowIntensity\", void 0);\n\n  __decorate$7([property({\n    type: Number,\n    attribute: 'shadow-softness'\n  })], EnvironmentModelViewerElement.prototype, \"shadowSoftness\", void 0);\n\n  __decorate$7([property({\n    type: Number\n  })], EnvironmentModelViewerElement.prototype, \"exposure\", void 0);\n\n  return EnvironmentModelViewerElement;\n};\n\nvar SessionLightProbe = /*#__PURE__*/function () {\n  function SessionLightProbe(xrLight, renderer, lightProbe, environmentEstimation, estimationStartCallback) {\n    var _this125 = this;\n\n    _classCallCheck(this, SessionLightProbe);\n\n    this.xrLight = xrLight;\n    this.renderer = renderer;\n    this.lightProbe = lightProbe;\n    this.xrWebGLBinding = null;\n    this.estimationStartCallback = estimationStartCallback;\n    this.frameCallback = this.onXRFrame.bind(this);\n    var session = renderer.xr.getSession(); // If the XRWebGLBinding class is available then we can also query an\n    // estimated reflection cube map.\n\n    if (environmentEstimation && 'XRWebGLBinding' in window) {\n      // This is the simplest way I know of to initialize a WebGL cubemap in Three.\n      var cubeRenderTarget = new WebGLCubeRenderTarget(16);\n      xrLight.environment = cubeRenderTarget.texture;\n      var gl = renderer.getContext(); // Ensure that we have any extensions needed to use the preferred cube map format.\n\n      switch (session.preferredReflectionFormat) {\n        case 'srgba8':\n          gl.getExtension('EXT_sRGB');\n          break;\n\n        case 'rgba16f':\n          gl.getExtension('OES_texture_half_float');\n          break;\n      }\n\n      this.xrWebGLBinding = new XRWebGLBinding(session, gl);\n      this.lightProbe.addEventListener('reflectionchange', function () {\n        _this125.updateReflection();\n      });\n    } // Start monitoring the XR animation frame loop to look for lighting\n    // estimation changes.\n\n\n    session.requestAnimationFrame(this.frameCallback);\n  }\n\n  _createClass(SessionLightProbe, [{\n    key: \"updateReflection\",\n    value: function updateReflection() {\n      var textureProperties = this.renderer.properties.get(this.xrLight.environment);\n\n      if (textureProperties) {\n        var cubeMap = this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);\n\n        if (cubeMap) {\n          textureProperties.__webglTexture = cubeMap;\n        }\n      }\n    }\n  }, {\n    key: \"onXRFrame\",\n    value: function onXRFrame(time, xrFrame) {\n      // If either this obejct or the XREstimatedLight has been destroyed, stop\n      // running the frame loop.\n      if (!this.xrLight) {\n        return;\n      }\n\n      var session = xrFrame.session;\n      session.requestAnimationFrame(this.frameCallback);\n      var lightEstimate = xrFrame.getLightEstimate(this.lightProbe);\n\n      if (lightEstimate) {\n        // We can copy the estimate's spherical harmonics array directly into the light probe.\n        this.xrLight.lightProbe.sh.fromArray(lightEstimate.sphericalHarmonicsCoefficients);\n        this.xrLight.lightProbe.intensity = 1.0; // For the directional light we have to normalize the color and set the scalar as the\n        // intensity, since WebXR can return color values that exceed 1.0.\n\n        var intensityScalar = Math.max(1.0, Math.max(lightEstimate.primaryLightIntensity.x, Math.max(lightEstimate.primaryLightIntensity.y, lightEstimate.primaryLightIntensity.z)));\n        this.xrLight.directionalLight.color.setRGB(lightEstimate.primaryLightIntensity.x / intensityScalar, lightEstimate.primaryLightIntensity.y / intensityScalar, lightEstimate.primaryLightIntensity.z / intensityScalar);\n        this.xrLight.directionalLight.intensity = intensityScalar;\n        this.xrLight.directionalLight.position.copy(lightEstimate.primaryLightDirection);\n\n        if (this.estimationStartCallback) {\n          this.estimationStartCallback();\n          this.estimationStartCallback = null;\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.xrLight = null;\n      this.renderer = null;\n      this.lightProbe = null;\n      this.xrWebGLBinding = null;\n    }\n  }]);\n\n  return SessionLightProbe;\n}();\n\nvar XREstimatedLight = /*#__PURE__*/function (_Group) {\n  _inherits(XREstimatedLight, _Group);\n\n  var _super126 = _createSuper(XREstimatedLight);\n\n  function XREstimatedLight(renderer) {\n    var _this126;\n\n    var environmentEstimation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    _classCallCheck(this, XREstimatedLight);\n\n    _this126 = _super126.call(this);\n    _this126.lightProbe = new LightProbe();\n    _this126.lightProbe.intensity = 0;\n\n    _this126.add(_this126.lightProbe);\n\n    _this126.directionalLight = new DirectionalLight();\n    _this126.directionalLight.intensity = 0;\n\n    _this126.add(_this126.directionalLight); // Will be set to a cube map in the SessionLightProbe is environment estimation is\n    // available and requested.\n\n\n    _this126.environment = null;\n    var sessionLightProbe = null;\n    var estimationStarted = false;\n    renderer.xr.addEventListener('sessionstart', function () {\n      var session = renderer.xr.getSession();\n\n      if ('requestLightProbe' in session) {\n        session.requestLightProbe({\n          reflectionFormat: session.preferredReflectionFormat\n        }).then(function (probe) {\n          sessionLightProbe = new SessionLightProbe(_assertThisInitialized(_this126), renderer, probe, environmentEstimation, function () {\n            estimationStarted = true; // Fired to indicate that the estimated lighting values are now being updated.\n\n            _this126.dispatchEvent({\n              type: 'estimationstart'\n            });\n          });\n        });\n      }\n    });\n    renderer.xr.addEventListener('sessionend', function () {\n      if (sessionLightProbe) {\n        sessionLightProbe.dispose();\n        sessionLightProbe = null;\n      }\n\n      if (estimationStarted) {\n        // Fired to indicate that the estimated lighting values are no longer being updated.\n        _this126.dispatchEvent({\n          type: 'estimationend'\n        });\n      }\n    }); // Done inline to provide access to sessionLightProbe.\n\n    _this126.dispose = function () {\n      if (sessionLightProbe) {\n        sessionLightProbe.dispose();\n        sessionLightProbe = null;\n      }\n\n      _this126.remove(_this126.lightProbe);\n\n      _this126.lightProbe = null;\n\n      _this126.remove(_this126.directionalLight);\n\n      _this126.directionalLight = null;\n      _this126.environment = null;\n    };\n\n    return _this126;\n  }\n\n  return XREstimatedLight;\n}(Group);\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar RADIUS = 0.2;\nvar LINE_WIDTH = 0.03;\nvar MAX_OPACITY = 0.75;\nvar SEGMENTS = 12;\nvar DELTA_PHI = Math.PI / (2 * SEGMENTS);\nvar vector2 = new Vector2();\n/**\n * Adds a quarter-annulus of vertices to the array, centered on cornerX,\n * cornerY.\n */\n\nvar addCorner = function addCorner(vertices, cornerX, cornerY) {\n  var phi = cornerX > 0 ? cornerY > 0 ? 0 : -Math.PI / 2 : cornerY > 0 ? Math.PI / 2 : Math.PI;\n\n  for (var _i341 = 0; _i341 <= SEGMENTS; ++_i341) {\n    vertices.push(cornerX + (RADIUS - LINE_WIDTH) * Math.cos(phi), cornerY + (RADIUS - LINE_WIDTH) * Math.sin(phi), 0, cornerX + RADIUS * Math.cos(phi), cornerY + RADIUS * Math.sin(phi), 0);\n    phi += DELTA_PHI;\n  }\n};\n/**\n * This class is a set of two coincident planes. The first is just a cute box\n * outline with rounded corners and damped opacity to indicate the floor extents\n * of a scene. It is purposely larger than the scene's bounding box by RADIUS on\n * all sides so that small scenes are still visible / selectable. Its center is\n * actually carved out by vertices to ensure its fragment shader doesn't add\n * much time.\n *\n * The child plane is a simple plane with the same extents for use in hit\n * testing (translation is triggered when the touch hits the plane, rotation\n * otherwise).\n */\n\n\nvar PlacementBox = /*#__PURE__*/function (_Mesh3) {\n  _inherits(PlacementBox, _Mesh3);\n\n  var _super127 = _createSuper(PlacementBox);\n\n  function PlacementBox(scene, side) {\n    var _this127;\n\n    _classCallCheck(this, PlacementBox);\n\n    var geometry = new BufferGeometry();\n    var triangles = [];\n    var vertices = [];\n    var size = scene.size,\n        boundingBox = scene.boundingBox;\n    var x = size.x / 2;\n    var y = (side === 'back' ? size.y : size.z) / 2;\n    addCorner(vertices, x, y);\n    addCorner(vertices, -x, y);\n    addCorner(vertices, -x, -y);\n    addCorner(vertices, x, -y);\n    var numVertices = vertices.length / 3;\n\n    for (var _i342 = 0; _i342 < numVertices - 2; _i342 += 2) {\n      triangles.push(_i342, _i342 + 1, _i342 + 3, _i342, _i342 + 3, _i342 + 2);\n    }\n\n    var i = numVertices - 2;\n    triangles.push(i, i + 1, 1, i, 1, 0);\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    geometry.setIndex(triangles);\n    _this127 = _super127.call(this, geometry);\n    _this127.side = side;\n    var material = _this127.material;\n    material.side = DoubleSide;\n    material.transparent = true;\n    material.opacity = 0;\n    _this127.goalOpacity = 0;\n    _this127.opacityDamper = new Damper();\n    _this127.hitPlane = new Mesh(new PlaneGeometry(2 * (x + RADIUS), 2 * (y + RADIUS)));\n    _this127.hitPlane.visible = false;\n\n    _this127.add(_this127.hitPlane);\n\n    boundingBox.getCenter(_this127.position);\n\n    switch (side) {\n      case 'bottom':\n        _this127.rotateX(-Math.PI / 2);\n\n        _this127.shadowHeight = boundingBox.min.y;\n        _this127.position.y = _this127.shadowHeight;\n        break;\n\n      case 'back':\n        _this127.shadowHeight = boundingBox.min.z;\n        _this127.position.z = _this127.shadowHeight;\n    }\n\n    scene.target.add(_assertThisInitialized(_this127));\n    return _this127;\n  }\n  /**\n   * Get the world hit position if the touch coordinates hit the box, and null\n   * otherwise. Pass the scene in to get access to its raycaster.\n   */\n\n\n  _createClass(PlacementBox, [{\n    key: \"getHit\",\n    value: function getHit(scene, screenX, screenY) {\n      vector2.set(screenX, -screenY);\n      this.hitPlane.visible = true;\n      var hitResult = scene.positionAndNormalFromPoint(vector2, this.hitPlane);\n      this.hitPlane.visible = false;\n      return hitResult == null ? null : hitResult.position;\n    }\n  }, {\n    key: \"getExpandedHit\",\n    value: function getExpandedHit(scene, screenX, screenY) {\n      this.hitPlane.scale.set(1000, 1000, 1000);\n      var hitResult = this.getHit(scene, screenX, screenY);\n      this.hitPlane.scale.set(1, 1, 1);\n      return hitResult;\n    }\n    /**\n     * Offset the height of the box relative to the bottom of the scene. Positive\n     * is up, so generally only negative values are used.\n     */\n\n  }, {\n    key: \"offsetHeight\",\n    get: function get() {\n      if (this.side === 'back') {\n        return this.position.z - this.shadowHeight;\n      } else {\n        return this.position.y - this.shadowHeight;\n      }\n    }\n    /**\n     * Set the box's visibility; it will fade in and out.\n     */\n    ,\n    set: function set(offset) {\n      if (this.side === 'back') {\n        this.position.z = this.shadowHeight + offset;\n      } else {\n        this.position.y = this.shadowHeight + offset;\n      }\n    }\n  }, {\n    key: \"show\",\n    set: function set(visible) {\n      this.goalOpacity = visible ? MAX_OPACITY : 0;\n    }\n    /**\n     * Call on each frame with the frame delta to fade the box.\n     */\n\n  }, {\n    key: \"updateOpacity\",\n    value: function updateOpacity(delta) {\n      var material = this.material;\n      material.opacity = this.opacityDamper.update(material.opacity, this.goalOpacity, delta, 1);\n      this.visible = material.opacity > 0;\n    }\n    /**\n     * Call this to clean up Three's cache when you remove the box.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _a;\n\n      var _this$hitPlane = this.hitPlane,\n          geometry = _this$hitPlane.geometry,\n          material = _this$hitPlane.material;\n      geometry.dispose();\n      material.dispose();\n      this.geometry.dispose();\n      this.material.dispose();\n      (_a = this.parent) === null || _a === void 0 ? void 0 : _a.remove(this);\n    }\n  }]);\n\n  return PlacementBox;\n}(Mesh);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// number of initial null pose XRFrames allowed before we post not-tracking\n\n\nvar INIT_FRAMES = 30; // AR shadow is not user-configurable. This is to pave the way for AR lighting\n// estimation, which will be used once available in WebXR.\n\nvar AR_SHADOW_INTENSITY = 0.3;\nvar ROTATION_RATE = 1.5; // Angle down (towards bottom of screen) from camera center ray to use for hit\n// testing against the floor. This makes placement faster and more intuitive\n// assuming the phone is in portrait mode. This seems to be a reasonable\n// assumption for the start of the session and UI will lack landscape mode to\n// encourage upright use.\n\nvar HIT_ANGLE_DEG = 20;\nvar SCALE_SNAP_HIGH = 1.3;\nvar SCALE_SNAP_LOW = 1 / SCALE_SNAP_HIGH; // For automatic dynamic viewport scaling, don't let the scale drop below this\n// limit.\n\nvar MIN_VIEWPORT_SCALE = 0.25; // Furthest away you can move an object (meters).\n\nvar MAX_DISTANCE = 10;\nvar ARStatus = {\n  NOT_PRESENTING: 'not-presenting',\n  SESSION_STARTED: 'session-started',\n  OBJECT_PLACED: 'object-placed',\n  FAILED: 'failed'\n};\nvar ARTracking = {\n  TRACKING: 'tracking',\n  NOT_TRACKING: 'not-tracking'\n};\nvar vector3 = new Vector3();\nvar matrix4 = new Matrix4();\nvar hitPosition = new Vector3();\nvar camera = new PerspectiveCamera(45, 1, 0.1, 100);\n\nvar ARRenderer = /*#__PURE__*/function (_EventDispatcher9) {\n  _inherits(ARRenderer, _EventDispatcher9);\n\n  var _super128 = _createSuper(ARRenderer);\n\n  function ARRenderer(renderer) {\n    var _this128;\n\n    _classCallCheck(this, ARRenderer);\n\n    _this128 = _super128.call(this);\n    _this128.renderer = renderer;\n    _this128.currentSession = null;\n    _this128.placeOnWall = false;\n    _this128.placementBox = null;\n    _this128.lastTick = null;\n    _this128.turntableRotation = null;\n    _this128.oldShadowIntensity = null;\n    _this128.oldBackground = null;\n    _this128.oldEnvironment = null;\n    _this128.frame = null;\n    _this128.initialHitSource = null;\n    _this128.transientHitTestSource = null;\n    _this128.inputSource = null;\n    _this128._presentedScene = null;\n    _this128.resolveCleanup = null;\n    _this128.exitWebXRButtonContainer = null;\n    _this128.overlay = null;\n    _this128.xrLight = null;\n    _this128.environmentEstimation = false;\n    _this128.tracking = true;\n    _this128.frames = 0;\n    _this128.initialized = false;\n    _this128.oldTarget = new Vector3();\n    _this128.oldFramedFieldOfView = 45;\n    _this128.placementComplete = false;\n    _this128.isTranslating = false;\n    _this128.isRotating = false;\n    _this128.isTwoFingering = false;\n    _this128.lastDragPosition = new Vector3();\n    _this128.firstRatio = 0;\n    _this128.lastAngle = 0;\n    _this128.goalPosition = new Vector3();\n    _this128.goalYaw = 0;\n    _this128.goalScale = 1;\n    _this128.xDamper = new Damper();\n    _this128.yDamper = new Damper();\n    _this128.zDamper = new Damper();\n    _this128.yawDamper = new Damper();\n    _this128.scaleDamper = new Damper();\n\n    _this128.onExitWebXRButtonContainerClick = function () {\n      return _this128.stopPresenting();\n    };\n\n    _this128.onUpdateScene = function () {\n      if (_this128.placementBox != null && _this128.isPresenting) {\n        _this128.placementBox.dispose();\n\n        _this128.placementBox = new PlacementBox(_this128.presentedScene, _this128.placeOnWall ? 'back' : 'bottom');\n      }\n    };\n\n    _this128.onSelectStart = function (event) {\n      var hitSource = _this128.transientHitTestSource;\n\n      if (hitSource == null) {\n        return;\n      }\n\n      var fingers = _this128.frame.getHitTestResultsForTransientInput(hitSource);\n\n      var scene = _this128.presentedScene;\n      var box = _this128.placementBox;\n\n      if (fingers.length === 1) {\n        _this128.inputSource = event.inputSource;\n        var axes = _this128.inputSource.gamepad.axes;\n\n        var _hitPosition = box.getHit(_this128.presentedScene, axes[0], axes[1]);\n\n        box.show = true;\n\n        if (_hitPosition != null) {\n          _this128.isTranslating = true;\n\n          _this128.lastDragPosition.copy(_hitPosition);\n        } else if (_this128.placeOnWall === false) {\n          _this128.isRotating = true;\n          _this128.lastAngle = axes[0] * ROTATION_RATE;\n        }\n      } else if (fingers.length === 2) {\n        box.show = true;\n        _this128.isTwoFingering = true;\n\n        var _this128$fingerPolar = _this128.fingerPolar(fingers),\n            separation = _this128$fingerPolar.separation;\n\n        _this128.firstRatio = separation / scene.scale.x;\n      }\n    };\n\n    _this128.onSelectEnd = function () {\n      _this128.isTranslating = false;\n      _this128.isRotating = false;\n      _this128.isTwoFingering = false;\n      _this128.inputSource = null;\n      _this128.goalPosition.y += _this128.placementBox.offsetHeight * _this128.presentedScene.scale.x;\n      _this128.placementBox.show = false;\n    };\n\n    _this128.threeRenderer = renderer.threeRenderer;\n    _this128.threeRenderer.xr.enabled = true;\n    _this128.xrLight = new XREstimatedLight(_this128.threeRenderer);\n\n    _this128.xrLight.addEventListener('estimationstart', function () {\n      if (!_this128.isPresenting || _this128.xrLight == null) {\n        return;\n      }\n\n      var scene = _this128.presentedScene;\n      scene.add(_this128.xrLight);\n\n      if (_this128.environmentEstimation && _this128.xrLight.environment) {\n        _this128.oldEnvironment = scene.environment;\n        scene.environment = _this128.xrLight.environment;\n      }\n    });\n\n    return _this128;\n  }\n\n  _createClass(ARRenderer, [{\n    key: \"resolveARSession\",\n    value: function () {\n      var _resolveARSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n        var session;\n        return _regeneratorRuntime.wrap(function _callee14$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                assertIsArCandidate();\n                _context15.next = 3;\n                return navigator.xr.requestSession('immersive-ar', {\n                  requiredFeatures: ['hit-test'],\n                  optionalFeatures: ['dom-overlay', 'light-estimation'],\n                  domOverlay: {\n                    root: this.overlay\n                  }\n                });\n\n              case 3:\n                session = _context15.sent;\n                this.threeRenderer.xr.setReferenceSpaceType('local');\n                _context15.next = 7;\n                return this.threeRenderer.xr.setSession(session);\n\n              case 7:\n                this.threeRenderer.xr.cameraAutoUpdate = false;\n                return _context15.abrupt(\"return\", session);\n\n              case 9:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function resolveARSession() {\n        return _resolveARSession.apply(this, arguments);\n      }\n\n      return resolveARSession;\n    }()\n    /**\n     * The currently presented scene, if any\n     */\n\n  }, {\n    key: \"presentedScene\",\n    get: function get() {\n      return this._presentedScene;\n    }\n    /**\n     * Resolves to true if the renderer has detected all the necessary qualities\n     * to support presentation in AR.\n     */\n\n  }, {\n    key: \"supportsPresentation\",\n    value: function () {\n      var _supportsPresentation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n        return _regeneratorRuntime.wrap(function _callee15$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.prev = 0;\n                assertIsArCandidate();\n                _context16.next = 4;\n                return navigator.xr.isSessionSupported('immersive-ar');\n\n              case 4:\n                return _context16.abrupt(\"return\", _context16.sent);\n\n              case 7:\n                _context16.prev = 7;\n                _context16.t0 = _context16[\"catch\"](0);\n                console.warn('Request to present in WebXR denied:');\n                console.warn(_context16.t0);\n                console.warn('Falling back to next ar-mode');\n                return _context16.abrupt(\"return\", false);\n\n              case 13:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee15, null, [[0, 7]]);\n      }));\n\n      function supportsPresentation() {\n        return _supportsPresentation.apply(this, arguments);\n      }\n\n      return supportsPresentation;\n    }()\n    /**\n     * Present a scene in AR\n     */\n\n  }, {\n    key: \"present\",\n    value: function () {\n      var _present = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(scene) {\n        var _this129 = this;\n\n        var environmentEstimation,\n            waitForAnimationFrame,\n            currentSession,\n            exitButton,\n            viewerRefSpace,\n            radians,\n            ray,\n            _args16 = arguments;\n        return _regeneratorRuntime.wrap(function _callee16$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                environmentEstimation = _args16.length > 1 && _args16[1] !== undefined ? _args16[1] : false;\n\n                if (this.isPresenting) {\n                  console.warn('Cannot present while a model is already presenting');\n                }\n\n                waitForAnimationFrame = new Promise(function (resolve, _reject) {\n                  requestAnimationFrame(function () {\n                    return resolve();\n                  });\n                });\n                scene.setHotspotsVisibility(false);\n                scene.isDirty = true; // Render a frame to turn off the hotspots\n\n                _context17.next = 7;\n                return waitForAnimationFrame;\n\n              case 7:\n                // This sets isPresenting to true\n                this._presentedScene = scene;\n                this.overlay = scene.element.shadowRoot.querySelector('div.default');\n                this.environmentEstimation = environmentEstimation;\n                _context17.next = 12;\n                return this.resolveARSession();\n\n              case 12:\n                currentSession = _context17.sent;\n                currentSession.addEventListener('end', function () {\n                  _this129.postSessionCleanup();\n                }, {\n                  once: true\n                });\n                exitButton = scene.element.shadowRoot.querySelector('.slot.exit-webxr-ar-button');\n                exitButton.classList.add('enabled');\n                exitButton.addEventListener('click', this.onExitWebXRButtonContainerClick);\n                this.exitWebXRButtonContainer = exitButton;\n                _context17.next = 20;\n                return currentSession.requestReferenceSpace('viewer');\n\n              case 20:\n                viewerRefSpace = _context17.sent;\n                this.tracking = true;\n                this.frames = 0;\n                this.initialized = false;\n                this.turntableRotation = scene.yaw;\n                this.goalYaw = scene.yaw;\n                this.goalScale = 1;\n                this.oldBackground = scene.background;\n                scene.background = null;\n                this.oldShadowIntensity = scene.shadowIntensity;\n                scene.setShadowIntensity(0);\n                this.oldTarget.copy(scene.getTarget());\n                this.oldFramedFieldOfView = scene.framedFieldOfView;\n                scene.addEventListener('model-load', this.onUpdateScene);\n                radians = HIT_ANGLE_DEG * Math.PI / 180;\n                ray = this.placeOnWall === true ? undefined : new XRRay(new DOMPoint(0, 0, 0), {\n                  x: 0,\n                  y: -Math.sin(radians),\n                  z: -Math.cos(radians)\n                });\n                currentSession.requestHitTestSource({\n                  space: viewerRefSpace,\n                  offsetRay: ray\n                }).then(function (hitTestSource) {\n                  _this129.initialHitSource = hitTestSource;\n                });\n                this.currentSession = currentSession;\n                this.placementBox = new PlacementBox(scene, this.placeOnWall ? 'back' : 'bottom');\n                this.placementComplete = false;\n                this.lastTick = performance.now();\n                this.dispatchEvent({\n                  type: 'status',\n                  status: ARStatus.SESSION_STARTED\n                });\n\n              case 42:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function present(_x27) {\n        return _present.apply(this, arguments);\n      }\n\n      return present;\n    }()\n    /**\n     * If currently presenting a scene in AR, stops presentation and exits AR.\n     */\n\n  }, {\n    key: \"stopPresenting\",\n    value: function () {\n      var _stopPresenting = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17() {\n        var _this130 = this;\n\n        var cleanupPromise;\n        return _regeneratorRuntime.wrap(function _callee17$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                if (this.isPresenting) {\n                  _context18.next = 2;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\");\n\n              case 2:\n                cleanupPromise = new Promise(function (resolve) {\n                  _this130.resolveCleanup = resolve;\n                });\n                _context18.prev = 3;\n                _context18.next = 6;\n                return this.currentSession.end();\n\n              case 6:\n                _context18.next = 8;\n                return cleanupPromise;\n\n              case 8:\n                _context18.next = 15;\n                break;\n\n              case 10:\n                _context18.prev = 10;\n                _context18.t0 = _context18[\"catch\"](3);\n                console.warn('Error while trying to end WebXR AR session');\n                console.warn(_context18.t0);\n                this.postSessionCleanup();\n\n              case 15:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee17, this, [[3, 10]]);\n      }));\n\n      function stopPresenting() {\n        return _stopPresenting.apply(this, arguments);\n      }\n\n      return stopPresenting;\n    }()\n    /**\n     * True if a scene is currently in the process of being presented in AR\n     */\n\n  }, {\n    key: \"isPresenting\",\n    get: function get() {\n      return this.presentedScene != null;\n    }\n  }, {\n    key: \"target\",\n    get: function get() {\n      return this.oldTarget;\n    }\n  }, {\n    key: \"updateTarget\",\n    value: function updateTarget() {\n      var scene = this.presentedScene;\n\n      if (scene != null) {\n        var _target7 = scene.getTarget();\n\n        this.oldTarget.copy(_target7);\n\n        if (this.placeOnWall) {\n          // Move the scene's target to the center of the back of the model's\n          // bounding box.\n          _target7.z = scene.boundingBox.min.z;\n        } else {\n          // Move the scene's target to the model's floor height.\n          _target7.y = scene.boundingBox.min.y;\n        }\n\n        scene.setTarget(_target7.x, _target7.y, _target7.z);\n      }\n    }\n  }, {\n    key: \"postSessionCleanup\",\n    value: function postSessionCleanup() {\n      var session = this.currentSession;\n\n      if (session != null) {\n        session.removeEventListener('selectstart', this.onSelectStart);\n        session.removeEventListener('selectend', this.onSelectEnd);\n        this.currentSession = null;\n      }\n\n      var scene = this.presentedScene;\n\n      if (scene != null) {\n        var element = scene.element;\n\n        if (this.xrLight != null && this.xrLight.parent != null) {\n          scene.remove(this.xrLight);\n\n          if (this.oldEnvironment != null) {\n            scene.environment = this.oldEnvironment;\n            this.oldEnvironment = null;\n          }\n        }\n\n        scene.position.set(0, 0, 0);\n        scene.scale.set(1, 1, 1);\n        scene.setShadowScaleAndOffset(1, 0);\n        var yaw = this.turntableRotation;\n\n        if (yaw != null) {\n          scene.yaw = yaw;\n        }\n\n        var intensity = this.oldShadowIntensity;\n\n        if (intensity != null) {\n          scene.setShadowIntensity(intensity);\n        }\n\n        var background = this.oldBackground;\n\n        if (background != null) {\n          scene.background = background;\n        }\n\n        var point = this.oldTarget;\n        scene.setTarget(point.x, point.y, point.z);\n        scene.framedFieldOfView = this.oldFramedFieldOfView;\n        scene.xrCamera = null;\n        scene.removeEventListener('model-load', this.onUpdateScene);\n        scene.orientHotspots(0);\n        element.requestUpdate('cameraTarget');\n        element.requestUpdate('maxCameraOrbit');\n        element[$onResize](element.getBoundingClientRect());\n      } // Force the Renderer to update its size\n\n\n      this.renderer.height = 0;\n      var exitButton = this.exitWebXRButtonContainer;\n\n      if (exitButton != null) {\n        exitButton.classList.remove('enabled');\n        exitButton.removeEventListener('click', this.onExitWebXRButtonContainerClick);\n        this.exitWebXRButtonContainer = null;\n      }\n\n      var hitSource = this.transientHitTestSource;\n\n      if (hitSource != null) {\n        hitSource.cancel();\n        this.transientHitTestSource = null;\n      }\n\n      var hitSourceInitial = this.initialHitSource;\n\n      if (hitSourceInitial != null) {\n        hitSourceInitial.cancel();\n        this.initialHitSource = null;\n      }\n\n      if (this.placementBox != null) {\n        this.placementBox.dispose();\n        this.placementBox = null;\n      }\n\n      this.lastTick = null;\n      this.turntableRotation = null;\n      this.oldShadowIntensity = null;\n      this.oldBackground = null;\n      this._presentedScene = null;\n      this.frame = null;\n      this.inputSource = null;\n      this.overlay = null;\n\n      if (this.resolveCleanup != null) {\n        this.resolveCleanup();\n      }\n\n      this.dispatchEvent({\n        type: 'status',\n        status: ARStatus.NOT_PRESENTING\n      });\n    }\n  }, {\n    key: \"updateView\",\n    value: function updateView(view) {\n      var scene = this.presentedScene;\n      var xr = this.threeRenderer.xr;\n      xr.updateCamera(camera);\n      scene.xrCamera = xr.getCamera();\n      var elements = scene.getCamera().matrixWorld.elements;\n      scene.orientHotspots(Math.atan2(elements[1], elements[5]));\n\n      if (!this.initialized) {\n        this.placeInitially();\n        this.initialized = true;\n      } // Use automatic dynamic viewport scaling if supported.\n\n\n      if (view.requestViewportScale && view.recommendedViewportScale) {\n        var scale = view.recommendedViewportScale;\n        view.requestViewportScale(Math.max(scale, MIN_VIEWPORT_SCALE));\n      }\n\n      var layer = this.currentSession.renderState.baseLayer;\n      var viewport = layer.getViewport(view);\n      this.threeRenderer.setViewport(viewport.x, viewport.y, viewport.width, viewport.height);\n    }\n  }, {\n    key: \"placeInitially\",\n    value: function placeInitially() {\n      var _this131 = this;\n\n      var scene = this.presentedScene;\n      var position = scene.position,\n          element = scene.element;\n      var xrCamera = scene.getCamera();\n\n      var _this$overlay$getBoun = this.overlay.getBoundingClientRect(),\n          width = _this$overlay$getBoun.width,\n          height = _this$overlay$getBoun.height;\n\n      scene.setSize(width, height);\n      xrCamera.projectionMatrixInverse.copy(xrCamera.projectionMatrix).invert();\n\n      var _element$getCameraOrb = element.getCameraOrbit(),\n          theta = _element$getCameraOrb.theta,\n          radius = _element$getCameraOrb.radius; // Orient model to match the 3D camera view\n\n\n      var cameraDirection = xrCamera.getWorldDirection(vector3);\n      scene.yaw = Math.atan2(-cameraDirection.x, -cameraDirection.z) - theta;\n      this.goalYaw = scene.yaw;\n      position.copy(xrCamera.position).add(cameraDirection.multiplyScalar(radius));\n      this.updateTarget();\n      var target = scene.getTarget();\n      position.add(target).sub(this.oldTarget);\n      this.goalPosition.copy(position);\n      scene.setHotspotsVisibility(true);\n      var session = this.frame.session;\n      session.addEventListener('selectstart', this.onSelectStart);\n      session.addEventListener('selectend', this.onSelectEnd);\n      session.requestHitTestSourceForTransientInput({\n        profile: 'generic-touchscreen'\n      }).then(function (hitTestSource) {\n        _this131.transientHitTestSource = hitTestSource;\n      });\n    }\n  }, {\n    key: \"getTouchLocation\",\n    value: function getTouchLocation() {\n      var axes = this.inputSource.gamepad.axes;\n      var location = this.placementBox.getExpandedHit(this.presentedScene, axes[0], axes[1]);\n\n      if (location != null) {\n        vector3.copy(location).sub(this.presentedScene.getCamera().position);\n        if (vector3.length() > MAX_DISTANCE) return null;\n      }\n\n      return location;\n    }\n  }, {\n    key: \"getHitPoint\",\n    value: function getHitPoint(hitResult) {\n      var refSpace = this.threeRenderer.xr.getReferenceSpace();\n      var pose = hitResult.getPose(refSpace);\n\n      if (pose == null) {\n        return null;\n      }\n\n      var hitMatrix = matrix4.fromArray(pose.transform.matrix);\n\n      if (this.placeOnWall === true) {\n        // Orient the model to the wall's normal vector.\n        this.goalYaw = Math.atan2(hitMatrix.elements[4], hitMatrix.elements[6]);\n      } // Check that the y-coordinate of the normal is large enough that the normal\n      // is pointing up for floor placement; opposite for wall placement.\n\n\n      return hitMatrix.elements[5] > 0.75 !== this.placeOnWall ? hitPosition.setFromMatrixPosition(hitMatrix) : null;\n    }\n  }, {\n    key: \"moveToFloor\",\n    value: function moveToFloor(frame) {\n      var hitSource = this.initialHitSource;\n\n      if (hitSource == null) {\n        return;\n      }\n\n      var hitTestResults = frame.getHitTestResults(hitSource);\n\n      if (hitTestResults.length == 0) {\n        return;\n      }\n\n      var hit = hitTestResults[0];\n      var hitPoint = this.getHitPoint(hit);\n\n      if (hitPoint == null) {\n        return;\n      }\n\n      this.placementBox.show = true; // If the user is translating, let the finger hit-ray take precedence and\n      // ignore this hit result.\n\n      if (!this.isTranslating) {\n        if (this.placeOnWall) {\n          this.goalPosition.copy(hitPoint);\n        } else {\n          this.goalPosition.y = hitPoint.y;\n        }\n      }\n\n      hitSource.cancel();\n      this.initialHitSource = null;\n      this.dispatchEvent({\n        type: 'status',\n        status: ARStatus.OBJECT_PLACED\n      });\n    }\n  }, {\n    key: \"fingerPolar\",\n    value: function fingerPolar(fingers) {\n      var fingerOne = fingers[0].inputSource.gamepad.axes;\n      var fingerTwo = fingers[1].inputSource.gamepad.axes;\n      var deltaX = fingerTwo[0] - fingerOne[0];\n      var deltaY = fingerTwo[1] - fingerOne[1];\n      var angle = Math.atan2(deltaY, deltaX);\n      var deltaYaw = this.lastAngle - angle;\n\n      if (deltaYaw > Math.PI) {\n        deltaYaw -= 2 * Math.PI;\n      } else if (deltaYaw < -Math.PI) {\n        deltaYaw += 2 * Math.PI;\n      }\n\n      this.lastAngle = angle;\n      return {\n        separation: Math.sqrt(deltaX * deltaX + deltaY * deltaY),\n        deltaYaw: deltaYaw\n      };\n    }\n  }, {\n    key: \"processInput\",\n    value: function processInput(frame) {\n      var _this132 = this;\n\n      var hitSource = this.transientHitTestSource;\n\n      if (hitSource == null) {\n        return;\n      }\n\n      if (!this.isTranslating && !this.isTwoFingering && !this.isRotating) {\n        return;\n      }\n\n      var fingers = frame.getHitTestResultsForTransientInput(hitSource);\n      var scene = this.presentedScene;\n      var scale = scene.scale.x; // Rotating, translating and scaling are mutually exclusive operations; only\n      // one can happen at a time, but we can switch during a gesture.\n\n      if (this.isTwoFingering) {\n        if (fingers.length < 2) {\n          // If we lose the second finger, stop scaling (in fact, stop processing\n          // input altogether until a new gesture starts).\n          this.isTwoFingering = false;\n        } else {\n          var _this$fingerPolar = this.fingerPolar(fingers),\n              separation = _this$fingerPolar.separation,\n              deltaYaw = _this$fingerPolar.deltaYaw;\n\n          if (this.placeOnWall === false) {\n            this.goalYaw += deltaYaw;\n          }\n\n          if (scene.canScale) {\n            var _scale = separation / this.firstRatio;\n\n            this.goalScale = _scale < SCALE_SNAP_HIGH && _scale > SCALE_SNAP_LOW ? 1 : _scale;\n          }\n        }\n\n        return;\n      } else if (fingers.length === 2) {\n        // If we were rotating or translating and we get a second finger, switch\n        // to scaling instead.\n        this.isTranslating = false;\n        this.isRotating = false;\n        this.isTwoFingering = true;\n\n        var _this$fingerPolar2 = this.fingerPolar(fingers),\n            _separation = _this$fingerPolar2.separation;\n\n        this.firstRatio = _separation / scale;\n        return;\n      }\n\n      if (this.isRotating) {\n        var angle = this.inputSource.gamepad.axes[0] * ROTATION_RATE;\n        this.goalYaw += angle - this.lastAngle;\n        this.lastAngle = angle;\n      } else if (this.isTranslating) {\n        fingers.forEach(function (finger) {\n          if (finger.inputSource !== _this132.inputSource) {\n            return;\n          }\n\n          var hit = null;\n\n          if (finger.results.length > 0) {\n            hit = _this132.getHitPoint(finger.results[0]);\n          }\n\n          if (hit == null) {\n            hit = _this132.getTouchLocation();\n          }\n\n          if (hit == null) {\n            return;\n          }\n\n          _this132.goalPosition.sub(_this132.lastDragPosition);\n\n          if (_this132.placeOnWall === false) {\n            var offset = hit.y - _this132.lastDragPosition.y; // When a lower floor is found, keep the model at the same height, but\n            // drop the placement box to the floor. The model falls on select end.\n\n            if (offset < 0) {\n              _this132.placementBox.offsetHeight = offset / scale;\n\n              _this132.presentedScene.setShadowScaleAndOffset(scale, offset); // Interpolate hit ray up to drag plane\n\n\n              var cameraPosition = vector3.copy(scene.getCamera().position);\n              var alpha = -offset / (cameraPosition.y - hit.y);\n              cameraPosition.multiplyScalar(alpha);\n              hit.multiplyScalar(1 - alpha).add(cameraPosition);\n            }\n          }\n\n          _this132.goalPosition.add(hit);\n\n          _this132.lastDragPosition.copy(hit);\n        });\n      }\n    }\n  }, {\n    key: \"moveScene\",\n    value: function moveScene(delta) {\n      var scene = this.presentedScene;\n      var position = scene.position,\n          yaw = scene.yaw,\n          radius = scene.idealCameraDistance;\n      var goal = this.goalPosition;\n      var oldScale = scene.scale.x;\n      var box = this.placementBox;\n\n      if (!goal.equals(position) || this.goalScale !== oldScale) {\n        var _x28 = position.x,\n            y = position.y,\n            z = position.z;\n        _x28 = this.xDamper.update(_x28, goal.x, delta, radius);\n        y = this.yDamper.update(y, goal.y, delta, radius);\n        z = this.zDamper.update(z, goal.z, delta, radius);\n        position.set(_x28, y, z);\n        var newScale = this.scaleDamper.update(oldScale, this.goalScale, delta, 1);\n        scene.scale.set(newScale, newScale, newScale);\n\n        if (!this.isTranslating) {\n          var offset = goal.y - y;\n\n          if (this.placementComplete && this.placeOnWall === false) {\n            box.offsetHeight = offset / newScale;\n            scene.setShadowScaleAndOffset(newScale, offset);\n          } else if (offset === 0) {\n            this.placementComplete = true;\n            box.show = false;\n            scene.setShadowIntensity(AR_SHADOW_INTENSITY);\n          }\n        }\n      }\n\n      box.updateOpacity(delta);\n      scene.updateTarget(delta); // yaw must be updated last, since this also updates the shadow position.\n\n      scene.yaw = this.yawDamper.update(yaw, this.goalYaw, delta, Math.PI);\n    }\n    /**\n     * Only public to make it testable.\n     */\n\n  }, {\n    key: \"onWebXRFrame\",\n    value: function onWebXRFrame(time, frame) {\n      this.frame = frame;\n      ++this.frames;\n      var refSpace = this.threeRenderer.xr.getReferenceSpace();\n      var pose = frame.getViewerPose(refSpace);\n\n      if (pose == null && this.tracking === true && this.frames > INIT_FRAMES) {\n        this.tracking = false;\n        this.dispatchEvent({\n          type: 'tracking',\n          status: ARTracking.NOT_TRACKING\n        });\n      }\n\n      var scene = this.presentedScene;\n\n      if (pose == null || scene == null || !scene.element[$sceneIsReady]()) {\n        this.threeRenderer.clear();\n        return;\n      }\n\n      if (this.tracking === false) {\n        this.tracking = true;\n        this.dispatchEvent({\n          type: 'tracking',\n          status: ARTracking.TRACKING\n        });\n      } // WebXR may return multiple views, i.e. for headset AR. This\n      // isn't really supported at this point, but make a best-effort\n      // attempt to render other views also, using the first view\n      // as the main viewpoint.\n\n\n      var isFirstView = true;\n\n      var _iterator14 = _createForOfIteratorHelper(pose.views),\n          _step14;\n\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _view3 = _step14.value;\n          this.updateView(_view3);\n\n          if (isFirstView) {\n            this.moveToFloor(frame);\n            this.processInput(frame);\n            var delta = time - this.lastTick;\n            this.moveScene(delta);\n            this.renderer.preRender(scene, time, delta);\n            this.lastTick = time;\n          } // TODO: This is a workaround for a Chrome bug, which should be fixed\n          // soon: https://bugs.chromium.org/p/chromium/issues/detail?id=1184085\n\n\n          var gl = this.threeRenderer.getContext();\n          gl.depthMask(false);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n          gl.depthMask(true);\n          this.threeRenderer.render(scene, scene.getCamera());\n          isFirstView = false;\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n    }\n  }]);\n\n  return ARRenderer;\n}(EventDispatcher);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This Debugger exposes internal details of the <model-viewer> rendering\n * substructure so that external tools can more easily inspect and operate on\n * them.\n *\n * It also activates shader debugging on the associated GL context. Shader\n * debugging trades performance for useful error information, so it is not\n * recommended to activate this unless needed.\n */\n\n\nvar Debugger = /*#__PURE__*/function () {\n  function Debugger(renderer) {\n    _classCallCheck(this, Debugger);\n\n    // Force WebGL shader debugging on:\n    renderer.threeRenderer.debug = {\n      checkShaderErrors: true\n    }; // Announce debug details at microtask timing to give the `Renderer`\n    // constructor time to complete its initialization, just to be on the safe\n    // side:\n\n    Promise.resolve().then(function () {\n      self.dispatchEvent(new CustomEvent('model-viewer-renderer-debug', {\n        detail: {\n          renderer: renderer,\n          THREE: {\n            ShaderMaterial: ShaderMaterial,\n            Texture: Texture$1,\n            Mesh: Mesh,\n            Scene: Scene,\n            PlaneBufferGeometry: PlaneGeometry,\n            OrthographicCamera: OrthographicCamera,\n            WebGLRenderTarget: WebGLRenderTarget\n          }\n        }\n      }));\n    });\n  }\n\n  _createClass(Debugger, [{\n    key: \"addScene\",\n    value: function addScene(scene) {\n      self.dispatchEvent(new CustomEvent('model-viewer-scene-added-debug', {\n        detail: {\n          scene: scene\n        }\n      }));\n    }\n  }, {\n    key: \"removeScene\",\n    value: function removeScene(scene) {\n      self.dispatchEvent(new CustomEvent('model-viewer-scene-removed-debug', {\n        detail: {\n          scene: scene\n        }\n      }));\n    }\n  }]);\n\n  return Debugger;\n}();\n\nvar SkeletonUtils = /*#__PURE__*/function () {\n  function SkeletonUtils() {\n    _classCallCheck(this, SkeletonUtils);\n  }\n\n  _createClass(SkeletonUtils, null, [{\n    key: \"retarget\",\n    value: function retarget(target, source) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var pos = new Vector3(),\n          quat = new Quaternion(),\n          scale = new Vector3(),\n          bindBoneMatrix = new Matrix4(),\n          relativeMatrix = new Matrix4(),\n          globalMatrix = new Matrix4();\n      options.preserveMatrix = options.preserveMatrix !== undefined ? options.preserveMatrix : true;\n      options.preservePosition = options.preservePosition !== undefined ? options.preservePosition : true;\n      options.preserveHipPosition = options.preserveHipPosition !== undefined ? options.preserveHipPosition : false;\n      options.useTargetMatrix = options.useTargetMatrix !== undefined ? options.useTargetMatrix : false;\n      options.hip = options.hip !== undefined ? options.hip : 'hip';\n      options.names = options.names || {};\n      var sourceBones = source.isObject3D ? source.skeleton.bones : this.getBones(source),\n          bones = target.isObject3D ? target.skeleton.bones : this.getBones(target);\n      var bindBones, bone, name, boneTo, bonesPosition; // reset bones\n\n      if (target.isObject3D) {\n        target.skeleton.pose();\n      } else {\n        options.useTargetMatrix = true;\n        options.preserveMatrix = false;\n      }\n\n      if (options.preservePosition) {\n        bonesPosition = [];\n\n        for (var _i343 = 0; _i343 < bones.length; _i343++) {\n          bonesPosition.push(bones[_i343].position.clone());\n        }\n      }\n\n      if (options.preserveMatrix) {\n        // reset matrix\n        target.updateMatrixWorld();\n        target.matrixWorld.identity(); // reset children matrix\n\n        for (var _i344 = 0; _i344 < target.children.length; ++_i344) {\n          target.children[_i344].updateMatrixWorld(true);\n        }\n      }\n\n      if (options.offsets) {\n        bindBones = [];\n\n        for (var _i345 = 0; _i345 < bones.length; ++_i345) {\n          bone = bones[_i345];\n          name = options.names[bone.name] || bone.name;\n\n          if (options.offsets && options.offsets[name]) {\n            bone.matrix.multiply(options.offsets[name]);\n            bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n            bone.updateMatrixWorld();\n          }\n\n          bindBones.push(bone.matrixWorld.clone());\n        }\n      }\n\n      for (var _i346 = 0; _i346 < bones.length; ++_i346) {\n        bone = bones[_i346];\n        name = options.names[bone.name] || bone.name;\n        boneTo = this.getBoneByName(name, sourceBones);\n        globalMatrix.copy(bone.matrixWorld);\n\n        if (boneTo) {\n          boneTo.updateMatrixWorld();\n\n          if (options.useTargetMatrix) {\n            relativeMatrix.copy(boneTo.matrixWorld);\n          } else {\n            relativeMatrix.copy(target.matrixWorld).invert();\n            relativeMatrix.multiply(boneTo.matrixWorld);\n          } // ignore scale to extract rotation\n\n\n          scale.setFromMatrixScale(relativeMatrix);\n          relativeMatrix.scale(scale.set(1 / scale.x, 1 / scale.y, 1 / scale.z)); // apply to global matrix\n\n          globalMatrix.makeRotationFromQuaternion(quat.setFromRotationMatrix(relativeMatrix));\n\n          if (target.isObject3D) {\n            var boneIndex = bones.indexOf(bone),\n                wBindMatrix = bindBones ? bindBones[boneIndex] : bindBoneMatrix.copy(target.skeleton.boneInverses[boneIndex]).invert();\n            globalMatrix.multiply(wBindMatrix);\n          }\n\n          globalMatrix.copyPosition(relativeMatrix);\n        }\n\n        if (bone.parent && bone.parent.isBone) {\n          bone.matrix.copy(bone.parent.matrixWorld).invert();\n          bone.matrix.multiply(globalMatrix);\n        } else {\n          bone.matrix.copy(globalMatrix);\n        }\n\n        if (options.preserveHipPosition && name === options.hip) {\n          bone.matrix.setPosition(pos.set(0, bone.position.y, 0));\n        }\n\n        bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n        bone.updateMatrixWorld();\n      }\n\n      if (options.preservePosition) {\n        for (var _i347 = 0; _i347 < bones.length; ++_i347) {\n          bone = bones[_i347];\n          name = options.names[bone.name] || bone.name;\n\n          if (name !== options.hip) {\n            bone.position.copy(bonesPosition[_i347]);\n          }\n        }\n      }\n\n      if (options.preserveMatrix) {\n        // restore matrix\n        target.updateMatrixWorld(true);\n      }\n    }\n  }, {\n    key: \"retargetClip\",\n    value: function retargetClip(target, source, clip) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      options.useFirstFramePosition = options.useFirstFramePosition !== undefined ? options.useFirstFramePosition : false;\n      options.fps = options.fps !== undefined ? options.fps : 30;\n      options.names = options.names || [];\n\n      if (!source.isObject3D) {\n        source = this.getHelperFromSkeleton(source);\n      }\n\n      var numFrames = Math.round(clip.duration * (options.fps / 1000) * 1000),\n          delta = 1 / options.fps,\n          convertedTracks = [],\n          mixer = new AnimationMixer(source),\n          bones = this.getBones(target.skeleton),\n          boneDatas = [];\n      var positionOffset, bone, boneTo, boneData, name;\n      mixer.clipAction(clip).play();\n      mixer.update(0);\n      source.updateMatrixWorld();\n\n      for (var _i348 = 0; _i348 < numFrames; ++_i348) {\n        var time = _i348 * delta;\n        this.retarget(target, source, options);\n\n        for (var j = 0; j < bones.length; ++j) {\n          name = options.names[bones[j].name] || bones[j].name;\n          boneTo = this.getBoneByName(name, source.skeleton);\n\n          if (boneTo) {\n            bone = bones[j];\n            boneData = boneDatas[j] = boneDatas[j] || {\n              bone: bone\n            };\n\n            if (options.hip === name) {\n              if (!boneData.pos) {\n                boneData.pos = {\n                  times: new Float32Array(numFrames),\n                  values: new Float32Array(numFrames * 3)\n                };\n              }\n\n              if (options.useFirstFramePosition) {\n                if (_i348 === 0) {\n                  positionOffset = bone.position.clone();\n                }\n\n                bone.position.sub(positionOffset);\n              }\n\n              boneData.pos.times[_i348] = time;\n              bone.position.toArray(boneData.pos.values, _i348 * 3);\n            }\n\n            if (!boneData.quat) {\n              boneData.quat = {\n                times: new Float32Array(numFrames),\n                values: new Float32Array(numFrames * 4)\n              };\n            }\n\n            boneData.quat.times[_i348] = time;\n            bone.quaternion.toArray(boneData.quat.values, _i348 * 4);\n          }\n        }\n\n        mixer.update(delta);\n        source.updateMatrixWorld();\n      }\n\n      for (var _i349 = 0; _i349 < boneDatas.length; ++_i349) {\n        boneData = boneDatas[_i349];\n\n        if (boneData) {\n          if (boneData.pos) {\n            convertedTracks.push(new VectorKeyframeTrack('.bones[' + boneData.bone.name + '].position', boneData.pos.times, boneData.pos.values));\n          }\n\n          convertedTracks.push(new QuaternionKeyframeTrack('.bones[' + boneData.bone.name + '].quaternion', boneData.quat.times, boneData.quat.values));\n        }\n      }\n\n      mixer.uncacheAction(clip);\n      return new AnimationClip(clip.name, -1, convertedTracks);\n    }\n  }, {\n    key: \"getHelperFromSkeleton\",\n    value: function getHelperFromSkeleton(skeleton) {\n      var source = new SkeletonHelper(skeleton.bones[0]);\n      source.skeleton = skeleton;\n      return source;\n    }\n  }, {\n    key: \"getSkeletonOffsets\",\n    value: function getSkeletonOffsets(target, source) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var targetParentPos = new Vector3(),\n          targetPos = new Vector3(),\n          sourceParentPos = new Vector3(),\n          sourcePos = new Vector3(),\n          targetDir = new Vector2(),\n          sourceDir = new Vector2();\n      options.hip = options.hip !== undefined ? options.hip : 'hip';\n      options.names = options.names || {};\n\n      if (!source.isObject3D) {\n        source = this.getHelperFromSkeleton(source);\n      }\n\n      var nameKeys = Object.keys(options.names),\n          nameValues = Object.values(options.names),\n          sourceBones = source.isObject3D ? source.skeleton.bones : this.getBones(source),\n          bones = target.isObject3D ? target.skeleton.bones : this.getBones(target),\n          offsets = [];\n      var bone, boneTo, name, i;\n      target.skeleton.pose();\n\n      for (i = 0; i < bones.length; ++i) {\n        bone = bones[i];\n        name = options.names[bone.name] || bone.name;\n        boneTo = this.getBoneByName(name, sourceBones);\n\n        if (boneTo && name !== options.hip) {\n          var boneParent = this.getNearestBone(bone.parent, nameKeys),\n              boneToParent = this.getNearestBone(boneTo.parent, nameValues);\n          boneParent.updateMatrixWorld();\n          boneToParent.updateMatrixWorld();\n          targetParentPos.setFromMatrixPosition(boneParent.matrixWorld);\n          targetPos.setFromMatrixPosition(bone.matrixWorld);\n          sourceParentPos.setFromMatrixPosition(boneToParent.matrixWorld);\n          sourcePos.setFromMatrixPosition(boneTo.matrixWorld);\n          targetDir.subVectors(new Vector2(targetPos.x, targetPos.y), new Vector2(targetParentPos.x, targetParentPos.y)).normalize();\n          sourceDir.subVectors(new Vector2(sourcePos.x, sourcePos.y), new Vector2(sourceParentPos.x, sourceParentPos.y)).normalize();\n          var laterialAngle = targetDir.angle() - sourceDir.angle();\n          var offset = new Matrix4().makeRotationFromEuler(new Euler(0, 0, laterialAngle));\n          bone.matrix.multiply(offset);\n          bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n          bone.updateMatrixWorld();\n          offsets[name] = offset;\n        }\n      }\n\n      return offsets;\n    }\n  }, {\n    key: \"renameBones\",\n    value: function renameBones(skeleton, names) {\n      var bones = this.getBones(skeleton);\n\n      for (var _i350 = 0; _i350 < bones.length; ++_i350) {\n        var bone = bones[_i350];\n\n        if (names[bone.name]) {\n          bone.name = names[bone.name];\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getBones\",\n    value: function getBones(skeleton) {\n      return Array.isArray(skeleton) ? skeleton : skeleton.bones;\n    }\n  }, {\n    key: \"getBoneByName\",\n    value: function getBoneByName(name, skeleton) {\n      for (var _i351 = 0, bones = this.getBones(skeleton); _i351 < bones.length; _i351++) {\n        if (name === bones[_i351].name) return bones[_i351];\n      }\n    }\n  }, {\n    key: \"getNearestBone\",\n    value: function getNearestBone(bone, names) {\n      while (bone.isBone) {\n        if (names.indexOf(bone.name) !== -1) {\n          return bone;\n        }\n\n        bone = bone.parent;\n      }\n    }\n  }, {\n    key: \"findBoneTrackData\",\n    value: function findBoneTrackData(name, tracks) {\n      var regexp = /\\[(.*)\\]\\.(.*)/,\n          result = {\n        name: name\n      };\n\n      for (var _i352 = 0; _i352 < tracks.length; ++_i352) {\n        // 1 is track name\n        // 2 is track type\n        var trackData = regexp.exec(tracks[_i352].name);\n\n        if (trackData && name === trackData[1]) {\n          result[trackData[2]] = _i352;\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getEqualsBonesNames\",\n    value: function getEqualsBonesNames(skeleton, targetSkeleton) {\n      var sourceBones = this.getBones(skeleton),\n          targetBones = this.getBones(targetSkeleton),\n          bones = [];\n\n      search: for (var _i353 = 0; _i353 < sourceBones.length; _i353++) {\n        var boneName = sourceBones[_i353].name;\n\n        for (var j = 0; j < targetBones.length; j++) {\n          if (boneName === targetBones[j].name) {\n            bones.push(boneName);\n            continue search;\n          }\n        }\n      }\n\n      return bones;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(source) {\n      var sourceLookup = new Map();\n      var cloneLookup = new Map();\n      var clone = source.clone();\n      parallelTraverse(source, clone, function (sourceNode, clonedNode) {\n        sourceLookup.set(clonedNode, sourceNode);\n        cloneLookup.set(sourceNode, clonedNode);\n      });\n      clone.traverse(function (node) {\n        if (!node.isSkinnedMesh) return;\n        var clonedMesh = node;\n        var sourceMesh = sourceLookup.get(node);\n        var sourceBones = sourceMesh.skeleton.bones;\n        clonedMesh.skeleton = sourceMesh.skeleton.clone();\n        clonedMesh.bindMatrix.copy(sourceMesh.bindMatrix);\n        clonedMesh.skeleton.bones = sourceBones.map(function (bone) {\n          return cloneLookup.get(bone);\n        });\n        clonedMesh.bind(clonedMesh.skeleton, clonedMesh.bindMatrix);\n      });\n      return clone;\n    }\n  }]);\n\n  return SkeletonUtils;\n}();\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (var _i354 = 0; _i354 < a.children.length; _i354++) {\n    parallelTraverse(a.children[_i354], b.children[_i354], callback);\n  }\n}\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar $prepared = Symbol('prepared');\nvar $prepare = Symbol('prepare');\nvar $preparedGLTF = Symbol('preparedGLTF');\nvar $clone = Symbol('clone');\n/**\n * Represents the preparation and enhancement of the output of a Three.js\n * GLTFLoader (a Three.js-flavor \"GLTF\"), to make it suitable for optimal,\n * correct viewing in a given presentation context and also make the cloning\n * process more explicit and legible.\n *\n * A GLTFInstance is API-compatible with a Three.js-flavor \"GLTF\", so it should\n * be considered to be interchangeable with the loaded result of a GLTFLoader.\n *\n * This basic implementation only implements trivial preparation and enhancement\n * of a GLTF. These operations are intended to be enhanced by inheriting\n * classes.\n */\n\nvar GLTFInstance = /*#__PURE__*/function () {\n  function GLTFInstance(preparedGLTF) {\n    _classCallCheck(this, GLTFInstance);\n\n    this[$preparedGLTF] = preparedGLTF;\n  }\n  /**\n   * Prepares a given GLTF for presentation and future cloning. A GLTF that is\n   * prepared can safely have this method invoked on it multiple times; it will\n   * only be prepared once, including after being cloned.\n   */\n\n\n  _createClass(GLTFInstance, [{\n    key: \"parser\",\n    get: function get() {\n      return this[$preparedGLTF].parser;\n    }\n  }, {\n    key: \"animations\",\n    get: function get() {\n      return this[$preparedGLTF].animations;\n    }\n  }, {\n    key: \"scene\",\n    get: function get() {\n      return this[$preparedGLTF].scene;\n    }\n  }, {\n    key: \"scenes\",\n    get: function get() {\n      return this[$preparedGLTF].scenes;\n    }\n  }, {\n    key: \"cameras\",\n    get: function get() {\n      return this[$preparedGLTF].cameras;\n    }\n  }, {\n    key: \"asset\",\n    get: function get() {\n      return this[$preparedGLTF].asset;\n    }\n  }, {\n    key: \"userData\",\n    get: function get() {\n      return this[$preparedGLTF].userData;\n    }\n    /**\n     * Creates and returns a copy of this instance.\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var GLTFInstanceConstructor = this.constructor;\n      var clonedGLTF = this[$clone]();\n      return new GLTFInstanceConstructor(clonedGLTF);\n    }\n    /**\n     * Cleans up any retained memory that might not otherwise be released when\n     * this instance is done being used.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scenes.forEach(function (scene) {\n        scene.traverse(function (object) {\n          if (!object.isMesh) {\n            return;\n          }\n\n          var mesh = object;\n          var materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n          materials.forEach(function (material) {\n            // Explicitly dispose any textures assigned to this material\n            for (var propertyName in material) {\n              var propertyValue = material[propertyName];\n\n              if (propertyValue instanceof Texture$1) {\n                propertyValue.dispose();\n              }\n            }\n\n            material.dispose();\n          });\n          mesh.geometry.dispose();\n        });\n      });\n    }\n    /**\n     * Override in an inheriting class to implement specialized cloning strategies\n     */\n\n  }, {\n    key: $clone,\n    value: function value() {\n      var source = this[$preparedGLTF]; // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n      // bother cloning extra scenes for now:\n\n      var scene = SkeletonUtils.clone(this.scene);\n      cloneVariantMaterials(scene, this.scene);\n      var scenes = [scene];\n      var userData = source.userData ? Object.assign({}, source.userData) : {};\n      return Object.assign(Object.assign({}, source), {\n        scene: scene,\n        scenes: scenes,\n        userData: userData\n      });\n    }\n  }], [{\n    key: \"prepare\",\n    value: function prepare(source) {\n      if (source.scene == null) {\n        throw new Error('Model does not have a scene');\n      }\n\n      if (source[$prepared]) {\n        return source;\n      }\n\n      var prepared = this[$prepare](source); // NOTE: ES5 Symbol polyfill is not compatible with spread operator\n      // so {...prepared, [$prepared]: true} does not work\n\n      prepared[$prepared] = true;\n      return prepared;\n    }\n    /**\n     * Override in an inheriting class to apply specialty one-time preparations\n     * for a given input GLTF.\n     */\n\n  }, {\n    key: $prepare,\n    value: function value(source) {\n      // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n      // bother preparing extra scenes for now:\n      var scene = source.scene;\n      var scenes = [scene];\n      return Object.assign(Object.assign({}, source), {\n        scene: scene,\n        scenes: scenes\n      });\n    }\n  }]);\n\n  return GLTFInstance;\n}(); // Variant materials and original material instances are stored under\n// object.userData.variantMaterials/originalMaterial.\n// Three.js Object3D.clone() doesn't clone Three.js objects under\n// .userData so this function is a workaround.\n\n\nvar cloneVariantMaterials = function cloneVariantMaterials(dst, src) {\n  traversePair(dst, src, function (dst, src) {\n    if (src.userData.variantMaterials !== undefined) {\n      dst.userData.variantMaterials = new Map(src.userData.variantMaterials);\n    }\n\n    if (src.userData.originalMaterial !== undefined) {\n      dst.userData.originalMaterial = src.userData.originalMaterial;\n    }\n  });\n};\n\nvar traversePair = function traversePair(obj1, obj2, callback) {\n  callback(obj1, obj2); // Assume obj1 and obj2 have the same tree structure\n\n  for (var _i355 = 0; _i355 < obj1.children.length; _i355++) {\n    traversePair(obj1.children[_i355], obj2.children[_i355], callback);\n  }\n};\n/**\n * @license MIT\n * @see https://github.com/mrdoob/three.js/blob/dev/LICENSE\n */\n\n\nvar alphaChunk =\n/* glsl */\n\"\\n#ifdef ALPHATEST\\n\\n    if ( diffuseColor.a < ALPHATEST ) discard;\\n    diffuseColor.a = 1.0;\\n\\n#endif\\n\";\nvar $threeGLTF = Symbol('threeGLTF');\nvar $gltf = Symbol('gltf');\nvar $gltfElementMap = Symbol('gltfElementMap');\nvar $threeObjectMap = Symbol('threeObjectMap');\nvar $parallelTraverseThreeScene = Symbol('parallelTraverseThreeScene');\nvar $correlateOriginalThreeGLTF = Symbol('correlateOriginalThreeGLTF');\nvar $correlateCloneThreeGLTF = Symbol('correlateCloneThreeGLTF');\n/**\n * The Three.js GLTFLoader provides us with an in-memory representation\n * of a glTF in terms of Three.js constructs. It also provides us with a copy\n * of the deserialized glTF without any Three.js decoration, and a mapping of\n * glTF elements to their corresponding Three.js constructs.\n *\n * A CorrelatedSceneGraph exposes a synchronously available mapping of glTF\n * element references to their corresponding Three.js constructs.\n */\n\nvar CorrelatedSceneGraph = /*#__PURE__*/function () {\n  function CorrelatedSceneGraph(threeGLTF, gltf, threeObjectMap, gltfElementMap) {\n    _classCallCheck(this, CorrelatedSceneGraph);\n\n    this[$threeGLTF] = threeGLTF;\n    this[$gltf] = gltf;\n    this[$gltfElementMap] = gltfElementMap;\n    this[$threeObjectMap] = threeObjectMap;\n  }\n  /**\n   * Produce a CorrelatedSceneGraph from a naturally generated Three.js GLTF.\n   * Such GLTFs are produced by Three.js' GLTFLoader, and contain cached\n   * details that expedite the correlation step.\n   *\n   * If a CorrelatedSceneGraph is provided as the second argument, re-correlates\n   * a cloned Three.js GLTF with a clone of the glTF hierarchy used to produce\n   * the upstream Three.js GLTF that the clone was created from. The result\n   * CorrelatedSceneGraph is representative of the cloned hierarchy.\n   */\n\n\n  _createClass(CorrelatedSceneGraph, [{\n    key: \"threeGLTF\",\n    get:\n    /**\n     * The source Three.js GLTF result given to us by a Three.js GLTFLoader.\n     */\n    function get() {\n      return this[$threeGLTF];\n    }\n    /**\n     * The in-memory deserialized source glTF.\n     */\n\n  }, {\n    key: \"gltf\",\n    get: function get() {\n      return this[$gltf];\n    }\n    /**\n     * A Map of glTF element references to arrays of corresponding Three.js\n     * object references. Three.js objects are kept in arrays to account for\n     * cases where more than one Three.js object corresponds to a single glTF\n     * element.\n     */\n\n  }, {\n    key: \"gltfElementMap\",\n    get: function get() {\n      return this[$gltfElementMap];\n    }\n    /**\n     * A map of individual Three.js objects to corresponding elements in the\n     * source glTF.\n     */\n\n  }, {\n    key: \"threeObjectMap\",\n    get: function get() {\n      return this[$threeObjectMap];\n    }\n  }, {\n    key: \"loadVariant\",\n    value: function () {\n      var _loadVariant = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(variantName) {\n        var _this133 = this;\n\n        var updatedMaterials;\n        return _regeneratorRuntime.wrap(function _callee18$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                updatedMaterials = new Set();\n\n                if (!(!('variants' in this.threeGLTF.userData) || !('functions' in this.threeGLTF.userData) || !('selectVariant' in this.threeGLTF.userData.functions))) {\n                  _context19.next = 3;\n                  break;\n                }\n\n                return _context19.abrupt(\"return\", updatedMaterials);\n\n              case 3:\n                _context19.next = 5;\n                return this.threeGLTF.userData.functions.selectVariant(this.threeGLTF.scene, variantName, true, function (object, _oldMaterial, gltfMaterialIndex) {\n                  updatedMaterials.add(gltfMaterialIndex);\n                  var gltfElement = _this133.gltf.materials[gltfMaterialIndex];\n\n                  var threeObjects = _this133.gltfElementMap.get(gltfElement);\n\n                  if (threeObjects == null) {\n                    threeObjects = new Set();\n\n                    _this133.gltfElementMap.set(gltfElement, threeObjects);\n                  }\n\n                  threeObjects.add(object.material);\n                });\n\n              case 5:\n                return _context19.abrupt(\"return\", updatedMaterials);\n\n              case 6:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function loadVariant(_x29) {\n        return _loadVariant.apply(this, arguments);\n      }\n\n      return loadVariant;\n    }()\n  }], [{\n    key: \"from\",\n    value: function from(threeGLTF, upstreamCorrelatedSceneGraph) {\n      if (upstreamCorrelatedSceneGraph != null) {\n        return this[$correlateCloneThreeGLTF](threeGLTF, upstreamCorrelatedSceneGraph);\n      } else {\n        return this[$correlateOriginalThreeGLTF](threeGLTF);\n      }\n    }\n  }, {\n    key: $correlateOriginalThreeGLTF,\n    value: function value(threeGLTF) {\n      var gltf = threeGLTF.parser.json;\n      var associations = threeGLTF.parser.associations;\n      var gltfElementMap = new Map();\n      var defaultMaterial = {\n        name: 'Default'\n      };\n      var defaultReference = {\n        type: 'materials',\n        index: -1\n      }; // NOTE: IE11 does not have Map iterator methods\n\n      associations.forEach(function (gltfElementReference, threeObject) {\n        // Note: GLTFLoader creates a \"default\" material that has no corresponding\n        // glTF element in the case that no materials are specified in the source\n        // glTF. In this case we append a default material to allow this to be\n        // operated upon.\n        if (gltfElementReference == null) {\n          if (defaultReference.index < 0) {\n            if (gltf.materials == null) {\n              gltf.materials = [];\n            }\n\n            defaultReference.index = gltf.materials.length;\n            gltf.materials.push(defaultMaterial);\n          }\n\n          gltfElementReference = defaultReference;\n        }\n\n        var _gltfElementReference = gltfElementReference,\n            type = _gltfElementReference.type,\n            index = _gltfElementReference.index;\n        var elementArray = gltf[type] || [];\n        var gltfElement = elementArray[index];\n\n        if (gltfElement == null) {\n          // TODO: Maybe throw here...\n          return;\n        }\n\n        var threeObjects = gltfElementMap.get(gltfElement);\n\n        if (threeObjects == null) {\n          threeObjects = new Set();\n          gltfElementMap.set(gltfElement, threeObjects);\n        }\n\n        threeObjects.add(threeObject);\n      });\n      return new CorrelatedSceneGraph(threeGLTF, gltf, associations, gltfElementMap);\n    }\n    /**\n     * Transfers the association between a raw glTF and a Three.js scene graph\n     * to a clone of the Three.js scene graph, resolved as a new\n     * CorrelatedsceneGraph instance.\n     */\n\n  }, {\n    key: $correlateCloneThreeGLTF,\n    value: function value(cloneThreeGLTF, upstreamCorrelatedSceneGraph) {\n      var originalThreeGLTF = upstreamCorrelatedSceneGraph.threeGLTF;\n      var originalGLTF = upstreamCorrelatedSceneGraph.gltf;\n      var cloneGLTF = JSON.parse(JSON.stringify(originalGLTF));\n      var cloneThreeObjectMap = new Map();\n      var cloneGLTFELementMap = new Map();\n      var defaultMaterial = {\n        name: 'Default'\n      };\n      var defaultReference = {\n        type: 'materials',\n        index: -1\n      };\n\n      for (var _i356 = 0; _i356 < originalThreeGLTF.scenes.length; _i356++) {\n        this[$parallelTraverseThreeScene](originalThreeGLTF.scenes[_i356], cloneThreeGLTF.scenes[_i356], function (object, cloneObject) {\n          var elementReference = upstreamCorrelatedSceneGraph.threeObjectMap.get(object);\n\n          if ((object.isMesh || object.isMaterial) && elementReference == null) {\n            // Checks if default material was allready addded to the gltf.\n            if (cloneGLTF.materials && cloneGLTF.materials.length) {\n              var material = cloneGLTF.materials[cloneGLTF.materials.length - 1];\n\n              if (material.name === 'Default') {\n                defaultReference.index = cloneGLTF.materials.length - 1;\n              }\n            } // Adds the defaul material if the default material was not added.\n\n\n            if (defaultReference.index < 0) {\n              if (cloneGLTF.materials == null) {\n                cloneGLTF.materials = [];\n              }\n\n              defaultReference.index = cloneGLTF.materials.length;\n              cloneGLTF.materials.push(defaultMaterial);\n            }\n\n            elementReference = defaultReference;\n          }\n\n          if (elementReference == null) {\n            return;\n          }\n\n          var _elementReference = elementReference,\n              type = _elementReference.type,\n              index = _elementReference.index;\n          var cloneElement = cloneGLTF[type][index];\n          cloneThreeObjectMap.set(cloneObject, {\n            type: type,\n            index: index\n          });\n          var cloneObjects = cloneGLTFELementMap.get(cloneElement) || new Set();\n          cloneObjects.add(cloneObject);\n          cloneGLTFELementMap.set(cloneElement, cloneObjects);\n        });\n      }\n\n      return new CorrelatedSceneGraph(cloneThreeGLTF, cloneGLTF, cloneThreeObjectMap, cloneGLTFELementMap);\n    }\n    /**\n     * Traverses two presumably identical Three.js scenes, and invokes a callback\n     * for each Object3D or Material encountered, including the initial scene.\n     * Adapted from\n     * https://github.com/mrdoob/three.js/blob/7c1424c5819ab622a346dd630ee4e6431388021e/examples/jsm/utils/SkeletonUtils.js#L586-L596\n     */\n\n  }, {\n    key: $parallelTraverseThreeScene,\n    value: function value(sceneOne, sceneTwo, callback) {\n      var isMesh = function isMesh(object) {\n        return object.isMesh;\n      };\n\n      var traverse = function traverse(a, b) {\n        callback(a, b);\n\n        if (a.isObject3D) {\n          if (isMesh(a)) {\n            if (Array.isArray(a.material)) {\n              for (var _i357 = 0; _i357 < a.material.length; ++_i357) {\n                traverse(a.material[_i357], b.material[_i357]);\n              }\n            } else {\n              traverse(a.material, b.material);\n            }\n          }\n\n          for (var _i358 = 0; _i358 < a.children.length; ++_i358) {\n            traverse(a.children[_i358], b.children[_i358]);\n          }\n        }\n      };\n\n      traverse(sceneOne, sceneTwo);\n    }\n  }]);\n\n  return CorrelatedSceneGraph;\n}();\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Provides value assigned to alpha-cutoff when opaque rendering is desired.\n\n\nvar ALPHA_CUTOFF_OPAQUE = -0.5; // Provides value assigned to alpha-cutoff when alpha-blending is desired.\n\nvar ALPHA_CUTOFF_BLEND = 0;\nvar $cloneAndPatchMaterial = Symbol('cloneAndPatchMaterial');\nvar $correlatedSceneGraph = Symbol('correlatedSceneGraph');\n/**\n * This specialization of GLTFInstance collects all of the processing needed\n * to prepare a model and to clone it making special considerations for\n * <model-viewer> use cases.\n */\n\nvar ModelViewerGLTFInstance = /*#__PURE__*/function (_GLTFInstance2) {\n  _inherits(ModelViewerGLTFInstance, _GLTFInstance2);\n\n  var _super129 = _createSuper(ModelViewerGLTFInstance);\n\n  function ModelViewerGLTFInstance() {\n    _classCallCheck(this, ModelViewerGLTFInstance);\n\n    return _super129.apply(this, arguments);\n  }\n\n  _createClass(ModelViewerGLTFInstance, [{\n    key: \"correlatedSceneGraph\",\n    get: function get() {\n      return this[$preparedGLTF][$correlatedSceneGraph];\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: $clone,\n    value: function value() {\n      var _this134 = this;\n\n      var clone = _get(_getPrototypeOf(ModelViewerGLTFInstance.prototype), $clone, this).call(this);\n\n      var sourceUUIDToClonedMaterial = new Map();\n      clone.scene.traverse(function (node) {\n        // Materials aren't cloned when cloning meshes; geometry\n        // and materials are copied by reference. This is necessary\n        // for the same model to be used twice with different\n        // environment maps.\n        if (node.isMesh) {\n          var mesh = node;\n\n          if (Array.isArray(mesh.material)) {\n            mesh.material = mesh.material.map(function (material) {\n              return _this134[$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial);\n            });\n          } else if (mesh.material != null) {\n            mesh.material = _this134[$cloneAndPatchMaterial](mesh.material, sourceUUIDToClonedMaterial);\n          }\n        }\n      }); // Cross-correlate the scene graph by relying on information in the\n      // current scene graph; without this step, relationships between the\n      // Three.js object graph and the glTF scene graph will be lost.\n\n      clone[$correlatedSceneGraph] = CorrelatedSceneGraph.from(clone, this.correlatedSceneGraph);\n      return clone;\n    }\n    /**\n     * Creates a clone of the given material, and applies a patch to the\n     * shader program.\n     */\n\n  }, {\n    key: $cloneAndPatchMaterial,\n    value: function value(material, sourceUUIDToClonedMaterial) {\n      // If we already cloned this material (determined by tracking the UUID of\n      // source materials that have been cloned), then return that previously\n      // cloned instance:\n      if (sourceUUIDToClonedMaterial.has(material.uuid)) {\n        return sourceUUIDToClonedMaterial.get(material.uuid);\n      }\n\n      var clone = material.clone();\n\n      if (material.map != null) {\n        clone.map = material.map.clone();\n        clone.map.needsUpdate = true;\n      }\n\n      if (material.normalMap != null) {\n        clone.normalMap = material.normalMap.clone();\n        clone.normalMap.needsUpdate = true;\n      }\n\n      if (material.emissiveMap != null) {\n        clone.emissiveMap = material.emissiveMap.clone();\n        clone.emissiveMap.needsUpdate = true;\n      } // Clones the roughnessMap if it exists.\n\n\n      var roughnessMap = null;\n\n      if (material.roughnessMap != null) {\n        roughnessMap = material.roughnessMap.clone();\n      } // Assigns the roughnessMap to the cloned material and generates mipmaps.\n\n\n      if (roughnessMap != null) {\n        roughnessMap.needsUpdate = true;\n        clone.roughnessMap = roughnessMap; // Generates mipmaps from the clone of the roughnessMap.\n\n        var _Renderer$singleton = Renderer.singleton,\n            threeRenderer = _Renderer$singleton.threeRenderer,\n            roughnessMipmapper = _Renderer$singleton.roughnessMipmapper; // XR must be disabled while doing offscreen rendering or it will\n        // clobber the camera.\n\n        var enabled = threeRenderer.xr.enabled;\n        threeRenderer.xr.enabled = false;\n        roughnessMipmapper.generateMipmaps(clone);\n        threeRenderer.xr.enabled = enabled;\n      } // Checks if roughnessMap and metalnessMap share the same texture and\n      // either clones or assigns.\n\n\n      if (material.roughnessMap === material.metalnessMap) {\n        clone.metalnessMap = roughnessMap;\n      } else if (material.metalnessMap != null) {\n        clone.metalnessMap = material.metalnessMap.clone();\n        clone.metalnessMap.needsUpdate = true;\n      } // Checks if roughnessMap and aoMap share the same texture and\n      // either clones or assigns.\n\n\n      if (material.roughnessMap === material.aoMap) {\n        clone.aoMap = roughnessMap;\n      } else if (material.aoMap != null) {\n        clone.aoMap = material.aoMap.clone();\n        clone.aoMap.needsUpdate = true;\n      } // This allows us to patch three's materials, on top of patches already\n      // made, for instance GLTFLoader patches SpecularGlossiness materials.\n      // Unfortunately, three's program cache differentiates SpecGloss materials\n      // via onBeforeCompile.toString(), so these two functions do the same\n      // thing but look different in order to force a proper recompile.\n\n\n      var oldOnBeforeCompile = material.onBeforeCompile;\n      clone.onBeforeCompile = material.isGLTFSpecularGlossinessMaterial ? function (shader) {\n        oldOnBeforeCompile(shader, undefined);\n        shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n      } : function (shader) {\n        shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n        oldOnBeforeCompile(shader, undefined);\n      }; // This makes shadows better for non-manifold meshes\n\n      clone.shadowSide = FrontSide; // This improves transparent rendering and can be removed whenever\n      // https://github.com/mrdoob/three.js/pull/18235 finally lands.\n\n      if (clone.transparent) {\n        clone.depthWrite = false;\n      } // This little hack ignores alpha for opaque materials, in order to comply\n      // with the glTF spec.\n\n\n      if (!clone.alphaTest && !clone.transparent) {\n        clone.alphaTest = ALPHA_CUTOFF_OPAQUE;\n      }\n\n      sourceUUIDToClonedMaterial.set(material.uuid, clone);\n      return clone;\n    }\n  }], [{\n    key: $prepare,\n    value:\n    /**\n     * @override\n     */\n    function value(source) {\n      var prepared = _get(_getPrototypeOf(ModelViewerGLTFInstance), $prepare, this).call(this, source);\n\n      if (prepared[$correlatedSceneGraph] == null) {\n        prepared[$correlatedSceneGraph] = CorrelatedSceneGraph.from(prepared);\n      }\n\n      var scene = prepared.scene;\n      scene.traverse(function (node) {\n        // Set a high renderOrder while we're here to ensure the model\n        // always renders on top of the skysphere\n        node.renderOrder = 1000; // Three.js seems to cull some animated models incorrectly. Since we\n        // expect to view our whole scene anyway, we turn off the frustum\n        // culling optimization here.\n\n        node.frustumCulled = false; // Animations for objects without names target their UUID instead. When\n        // objects are cloned, they get new UUIDs which the animation can't\n        // find. To fix this, we assign their UUID as their name.\n\n        if (!node.name) {\n          node.name = node.uuid;\n        }\n\n        if (node.isMesh) {\n          node.castShadow = true;\n        }\n      });\n      return prepared;\n    }\n  }]);\n\n  return ModelViewerGLTFInstance;\n}(GLTFInstance); // https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\n\nvar RGBELoader = /*#__PURE__*/function (_DataTextureLoader) {\n  _inherits(RGBELoader, _DataTextureLoader);\n\n  var _super130 = _createSuper(RGBELoader);\n\n  function RGBELoader(manager) {\n    var _this135;\n\n    _classCallCheck(this, RGBELoader);\n\n    _this135 = _super130.call(this, manager);\n    _this135.type = FloatType;\n    return _this135;\n  } // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\n  _createClass(RGBELoader, [{\n    key: \"parse\",\n    value: function parse(buffer) {\n      var\n      /* return codes for rgbe routines */\n      //RGBE_RETURN_SUCCESS = 0,\n      RGBE_RETURN_FAILURE = -1,\n\n      /* default error routine.  change this to change error handling */\n      rgbe_read_error = 1,\n          rgbe_write_error = 2,\n          rgbe_format_error = 3,\n          rgbe_memory_error = 4,\n          rgbe_error = function rgbe_error(rgbe_error_code, msg) {\n        switch (rgbe_error_code) {\n          case rgbe_read_error:\n            console.error('THREE.RGBELoader Read Error: ' + (msg || ''));\n            break;\n\n          case rgbe_write_error:\n            console.error('THREE.RGBELoader Write Error: ' + (msg || ''));\n            break;\n\n          case rgbe_format_error:\n            console.error('THREE.RGBELoader Bad File Format: ' + (msg || ''));\n            break;\n\n          default:\n          case rgbe_memory_error:\n            console.error('THREE.RGBELoader: Error: ' + (msg || ''));\n        }\n\n        return RGBE_RETURN_FAILURE;\n      },\n\n      /* offsets to red, green, and blue components in a data (float) pixel */\n      //RGBE_DATA_RED = 0,\n      //RGBE_DATA_GREEN = 1,\n      //RGBE_DATA_BLUE = 2,\n\n      /* number of floats per pixel, use 4 since stored in rgba image format */\n      //RGBE_DATA_SIZE = 4,\n\n      /* flags indicating which fields in an rgbe_header_info are valid */\n      RGBE_VALID_PROGRAMTYPE = 1,\n          RGBE_VALID_FORMAT = 2,\n          RGBE_VALID_DIMENSIONS = 4,\n          NEWLINE = '\\n',\n          fgets = function fgets(buffer, lineLimit, consume) {\n        var chunkSize = 128;\n        lineLimit = !lineLimit ? 1024 : lineLimit;\n        var p = buffer.pos,\n            i = -1,\n            len = 0,\n            s = '',\n            chunk = String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)));\n\n        while (0 > (i = chunk.indexOf(NEWLINE)) && len < lineLimit && p < buffer.byteLength) {\n          s += chunk;\n          len += chunk.length;\n          p += chunkSize;\n          chunk += String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)));\n        }\n\n        if (-1 < i) {\n          /*for (i=l-1; i>=0; i--) {\n          \tbyteCode = m.charCodeAt(i);\n          \tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n          \telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n          \tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n          }*/\n          if (false !== consume) buffer.pos += len + i + 1;\n          return s + chunk.slice(0, i);\n        }\n\n        return false;\n      },\n\n      /* minimal header reading.  modify if you want to parse more information */\n      RGBE_ReadHeader = function RGBE_ReadHeader(buffer) {\n        // regexes to parse header info fields\n        var magic_token_re = /^#\\?(\\S+)/,\n            gamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n            exposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n            format_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n            dimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n            // RGBE format header struct\n        header = {\n          valid: 0,\n\n          /* indicate which fields are valid */\n          string: '',\n\n          /* the actual header string */\n          comments: '',\n\n          /* comments found in header */\n          programtype: 'RGBE',\n\n          /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n          format: '',\n\n          /* RGBE format, default 32-bit_rle_rgbe */\n          gamma: 1.0,\n\n          /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n          exposure: 1.0,\n\n          /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n          width: 0,\n          height: 0\n          /* image dimensions, width/height */\n\n        };\n        var line, match;\n\n        if (buffer.pos >= buffer.byteLength || !(line = fgets(buffer))) {\n          return rgbe_error(rgbe_read_error, 'no header found');\n        }\n        /* if you want to require the magic token then uncomment the next line */\n\n\n        if (!(match = line.match(magic_token_re))) {\n          return rgbe_error(rgbe_format_error, 'bad initial token');\n        }\n\n        header.valid |= RGBE_VALID_PROGRAMTYPE;\n        header.programtype = match[1];\n        header.string += line + '\\n';\n\n        while (true) {\n          line = fgets(buffer);\n          if (false === line) break;\n          header.string += line + '\\n';\n\n          if ('#' === line.charAt(0)) {\n            header.comments += line + '\\n';\n            continue; // comment line\n          }\n\n          if (match = line.match(gamma_re)) {\n            header.gamma = parseFloat(match[1], 10);\n          }\n\n          if (match = line.match(exposure_re)) {\n            header.exposure = parseFloat(match[1], 10);\n          }\n\n          if (match = line.match(format_re)) {\n            header.valid |= RGBE_VALID_FORMAT;\n            header.format = match[1]; //'32-bit_rle_rgbe';\n          }\n\n          if (match = line.match(dimensions_re)) {\n            header.valid |= RGBE_VALID_DIMENSIONS;\n            header.height = parseInt(match[1], 10);\n            header.width = parseInt(match[2], 10);\n          }\n\n          if (header.valid & RGBE_VALID_FORMAT && header.valid & RGBE_VALID_DIMENSIONS) break;\n        }\n\n        if (!(header.valid & RGBE_VALID_FORMAT)) {\n          return rgbe_error(rgbe_format_error, 'missing format specifier');\n        }\n\n        if (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n          return rgbe_error(rgbe_format_error, 'missing image size specifier');\n        }\n\n        return header;\n      },\n          RGBE_ReadPixels_RLE = function RGBE_ReadPixels_RLE(buffer, w, h) {\n        var scanline_width = w;\n\n        if ( // run length encoding is not allowed so read flat\n        scanline_width < 8 || scanline_width > 0x7fff || 2 !== buffer[0] || 2 !== buffer[1] || buffer[2] & 0x80) {\n          // return the flat buffer\n          return new Uint8Array(buffer);\n        }\n\n        if (scanline_width !== (buffer[2] << 8 | buffer[3])) {\n          return rgbe_error(rgbe_format_error, 'wrong scanline width');\n        }\n\n        var data_rgba = new Uint8Array(4 * w * h);\n\n        if (!data_rgba.length) {\n          return rgbe_error(rgbe_memory_error, 'unable to allocate buffer space');\n        }\n\n        var offset = 0,\n            pos = 0;\n        var ptr_end = 4 * scanline_width;\n        var rgbeStart = new Uint8Array(4);\n        var scanline_buffer = new Uint8Array(ptr_end);\n        var num_scanlines = h; // read in each successive scanline\n\n        while (num_scanlines > 0 && pos < buffer.byteLength) {\n          if (pos + 4 > buffer.byteLength) {\n            return rgbe_error(rgbe_read_error);\n          }\n\n          rgbeStart[0] = buffer[pos++];\n          rgbeStart[1] = buffer[pos++];\n          rgbeStart[2] = buffer[pos++];\n          rgbeStart[3] = buffer[pos++];\n\n          if (2 != rgbeStart[0] || 2 != rgbeStart[1] || (rgbeStart[2] << 8 | rgbeStart[3]) != scanline_width) {\n            return rgbe_error(rgbe_format_error, 'bad rgbe scanline format');\n          } // read each of the four channels for the scanline into the buffer\n          // first red, then green, then blue, then exponent\n\n\n          var ptr = 0,\n              count = void 0;\n\n          while (ptr < ptr_end && pos < buffer.byteLength) {\n            count = buffer[pos++];\n            var isEncodedRun = count > 128;\n            if (isEncodedRun) count -= 128;\n\n            if (0 === count || ptr + count > ptr_end) {\n              return rgbe_error(rgbe_format_error, 'bad scanline data');\n            }\n\n            if (isEncodedRun) {\n              // a (encoded) run of the same value\n              var byteValue = buffer[pos++];\n\n              for (var _i359 = 0; _i359 < count; _i359++) {\n                scanline_buffer[ptr++] = byteValue;\n              } //ptr += count;\n\n            } else {\n              // a literal-run\n              scanline_buffer.set(buffer.subarray(pos, pos + count), ptr);\n              ptr += count;\n              pos += count;\n            }\n          } // now convert data from buffer into rgba\n          // first red, then green, then blue, then exponent (alpha)\n\n\n          var _l86 = scanline_width; //scanline_buffer.byteLength;\n\n          for (var _i360 = 0; _i360 < _l86; _i360++) {\n            var off = 0;\n            data_rgba[offset] = scanline_buffer[_i360 + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 1] = scanline_buffer[_i360 + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 2] = scanline_buffer[_i360 + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 3] = scanline_buffer[_i360 + off];\n            offset += 4;\n          }\n\n          num_scanlines--;\n        }\n\n        return data_rgba;\n      };\n\n      var RGBEByteToRGBFloat = function RGBEByteToRGBFloat(sourceArray, sourceOffset, destArray, destOffset) {\n        var e = sourceArray[sourceOffset + 3];\n        var scale = Math.pow(2.0, e - 128.0) / 255.0;\n        destArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale;\n        destArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale;\n        destArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale;\n      };\n\n      var RGBEByteToRGBHalf = function RGBEByteToRGBHalf(sourceArray, sourceOffset, destArray, destOffset) {\n        var e = sourceArray[sourceOffset + 3];\n        var scale = Math.pow(2.0, e - 128.0) / 255.0;\n        destArray[destOffset + 0] = DataUtils.toHalfFloat(sourceArray[sourceOffset + 0] * scale);\n        destArray[destOffset + 1] = DataUtils.toHalfFloat(sourceArray[sourceOffset + 1] * scale);\n        destArray[destOffset + 2] = DataUtils.toHalfFloat(sourceArray[sourceOffset + 2] * scale);\n      };\n\n      var byteArray = new Uint8Array(buffer);\n      byteArray.pos = 0;\n      var rgbe_header_info = RGBE_ReadHeader(byteArray);\n\n      if (RGBE_RETURN_FAILURE !== rgbe_header_info) {\n        var w = rgbe_header_info.width,\n            h = rgbe_header_info.height,\n            image_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h);\n\n        if (RGBE_RETURN_FAILURE !== image_rgba_data) {\n          var data, format, type;\n          var numElements;\n\n          switch (this.type) {\n            case UnsignedByteType:\n              data = image_rgba_data;\n              format = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\n              type = UnsignedByteType;\n              break;\n\n            case FloatType:\n              numElements = image_rgba_data.length / 4 * 3;\n              var floatArray = new Float32Array(numElements);\n\n              for (var j = 0; j < numElements; j++) {\n                RGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 3);\n              }\n\n              data = floatArray;\n              format = RGBFormat;\n              type = FloatType;\n              break;\n\n            case HalfFloatType:\n              numElements = image_rgba_data.length / 4 * 3;\n              var halfArray = new Uint16Array(numElements);\n\n              for (var _j13 = 0; _j13 < numElements; _j13++) {\n                RGBEByteToRGBHalf(image_rgba_data, _j13 * 4, halfArray, _j13 * 3);\n              }\n\n              data = halfArray;\n              format = RGBFormat;\n              type = HalfFloatType;\n              break;\n\n            default:\n              console.error('THREE.RGBELoader: unsupported type: ', this.type);\n              break;\n          }\n\n          return {\n            width: w,\n            height: h,\n            data: data,\n            header: rgbe_header_info.string,\n            gamma: rgbe_header_info.gamma,\n            exposure: rgbe_header_info.exposure,\n            format: format,\n            type: type\n          };\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setDataType\",\n    value: function setDataType(value) {\n      this.type = value;\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      function onLoadCallback(texture, texData) {\n        switch (texture.type) {\n          case UnsignedByteType:\n            texture.encoding = RGBEEncoding;\n            texture.minFilter = NearestFilter;\n            texture.magFilter = NearestFilter;\n            texture.generateMipmaps = false;\n            texture.flipY = true;\n            break;\n\n          case FloatType:\n            texture.encoding = LinearEncoding;\n            texture.minFilter = LinearFilter;\n            texture.magFilter = LinearFilter;\n            texture.generateMipmaps = false;\n            texture.flipY = true;\n            break;\n\n          case HalfFloatType:\n            texture.encoding = LinearEncoding;\n            texture.minFilter = LinearFilter;\n            texture.magFilter = LinearFilter;\n            texture.generateMipmaps = false;\n            texture.flipY = true;\n            break;\n        }\n\n        if (onLoad) onLoad(texture, texData);\n      }\n\n      return _get(_getPrototypeOf(RGBELoader.prototype), \"load\", this).call(this, url, onLoadCallback, onProgress, onError);\n    }\n  }]);\n\n  return RGBELoader;\n}(DataTextureLoader);\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar EnvironmentScene = /*#__PURE__*/function (_Scene2) {\n  _inherits(EnvironmentScene, _Scene2);\n\n  var _super131 = _createSuper(EnvironmentScene);\n\n  function EnvironmentScene() {\n    var _this136;\n\n    _classCallCheck(this, EnvironmentScene);\n\n    _this136 = _super131.call(this);\n    _this136.position.y = -3.5;\n    var geometry = new BoxGeometry();\n    geometry.deleteAttribute('uv');\n    var roomMaterial = new MeshStandardMaterial({\n      metalness: 0,\n      side: BackSide\n    });\n    var boxMaterial = new MeshStandardMaterial({\n      metalness: 0\n    });\n    var mainLight = new PointLight(0xffffff, 500.0, 28, 2);\n    mainLight.position.set(0.418, 16.199, 0.300);\n\n    _this136.add(mainLight);\n\n    var room = new Mesh(geometry, roomMaterial);\n    room.position.set(-0.757, 13.219, 0.717);\n    room.scale.set(31.713, 28.305, 28.591);\n\n    _this136.add(room);\n\n    var box1 = new Mesh(geometry, boxMaterial);\n    box1.position.set(-10.906, 2.009, 1.846);\n    box1.rotation.set(0, -0.195, 0);\n    box1.scale.set(2.328, 7.905, 4.651);\n\n    _this136.add(box1);\n\n    var box2 = new Mesh(geometry, boxMaterial);\n    box2.position.set(-5.607, -0.754, -0.758);\n    box2.rotation.set(0, 0.994, 0);\n    box2.scale.set(1.970, 1.534, 3.955);\n\n    _this136.add(box2);\n\n    var box3 = new Mesh(geometry, boxMaterial);\n    box3.position.set(6.167, 0.857, 7.803);\n    box3.rotation.set(0, 0.561, 0);\n    box3.scale.set(3.927, 6.285, 3.687);\n\n    _this136.add(box3);\n\n    var box4 = new Mesh(geometry, boxMaterial);\n    box4.position.set(-2.017, 0.018, 6.124);\n    box4.rotation.set(0, 0.333, 0);\n    box4.scale.set(2.002, 4.566, 2.064);\n\n    _this136.add(box4);\n\n    var box5 = new Mesh(geometry, boxMaterial);\n    box5.position.set(2.291, -0.756, -2.621);\n    box5.rotation.set(0, -0.286, 0);\n    box5.scale.set(1.546, 1.552, 1.496);\n\n    _this136.add(box5);\n\n    var box6 = new Mesh(geometry, boxMaterial);\n    box6.position.set(-2.193, -0.369, -5.547);\n    box6.rotation.set(0, 0.516, 0);\n    box6.scale.set(3.875, 3.487, 2.986);\n\n    _this136.add(box6); // -x right\n\n\n    var light1 = new Mesh(geometry, _this136.createAreaLightMaterial(50));\n    light1.position.set(-16.116, 14.37, 8.208);\n    light1.scale.set(0.1, 2.428, 2.739);\n\n    _this136.add(light1); // -x left\n\n\n    var light2 = new Mesh(geometry, _this136.createAreaLightMaterial(50));\n    light2.position.set(-16.109, 18.021, -8.207);\n    light2.scale.set(0.1, 2.425, 2.751);\n\n    _this136.add(light2); // +x\n\n\n    var light3 = new Mesh(geometry, _this136.createAreaLightMaterial(17));\n    light3.position.set(14.904, 12.198, -1.832);\n    light3.scale.set(0.15, 4.265, 6.331);\n\n    _this136.add(light3); // +z\n\n\n    var light4 = new Mesh(geometry, _this136.createAreaLightMaterial(43));\n    light4.position.set(-0.462, 8.89, 14.520);\n    light4.scale.set(4.38, 5.441, 0.088);\n\n    _this136.add(light4); // -z\n\n\n    var light5 = new Mesh(geometry, _this136.createAreaLightMaterial(20));\n    light5.position.set(3.235, 11.486, -12.541);\n    light5.scale.set(2.5, 2.0, 0.1);\n\n    _this136.add(light5); // +y\n\n\n    var light6 = new Mesh(geometry, _this136.createAreaLightMaterial(100));\n    light6.position.set(0.0, 20.0, 0.0);\n    light6.scale.set(1.0, 0.1, 1.0);\n\n    _this136.add(light6);\n\n    return _this136;\n  }\n\n  _createClass(EnvironmentScene, [{\n    key: \"createAreaLightMaterial\",\n    value: function createAreaLightMaterial(intensity) {\n      var material = new MeshBasicMaterial();\n      material.color.setScalar(intensity);\n      return material;\n    }\n  }]);\n\n  return EnvironmentScene;\n}(Scene);\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar EnvironmentSceneAlt = /*#__PURE__*/function (_Scene3) {\n  _inherits(EnvironmentSceneAlt, _Scene3);\n\n  var _super132 = _createSuper(EnvironmentSceneAlt);\n\n  function EnvironmentSceneAlt() {\n    var _this137;\n\n    _classCallCheck(this, EnvironmentSceneAlt);\n\n    _this137 = _super132.call(this);\n    _this137.position.y = -3.5;\n    var geometry = new BoxGeometry();\n    geometry.deleteAttribute('uv');\n    var roomMaterial = new MeshStandardMaterial({\n      metalness: 0,\n      side: BackSide\n    });\n    var boxMaterial = new MeshStandardMaterial({\n      metalness: 0\n    });\n    var mainLight = new PointLight(0xffffff, 400.0, 28, 2);\n    mainLight.position.set(0.5, 14.0, 0.5);\n\n    _this137.add(mainLight);\n\n    var room = new Mesh(geometry, roomMaterial);\n    room.position.set(0.0, 13.2, 0.0);\n    room.scale.set(31.5, 28.5, 31.5);\n\n    _this137.add(room);\n\n    var box1 = new Mesh(geometry, boxMaterial);\n    box1.position.set(-10.906, -1.0, 1.846);\n    box1.rotation.set(0, -0.195, 0);\n    box1.scale.set(2.328, 7.905, 4.651);\n\n    _this137.add(box1);\n\n    var box2 = new Mesh(geometry, boxMaterial);\n    box2.position.set(-5.607, -0.754, -0.758);\n    box2.rotation.set(0, 0.994, 0);\n    box2.scale.set(1.970, 1.534, 3.955);\n\n    _this137.add(box2);\n\n    var box3 = new Mesh(geometry, boxMaterial);\n    box3.position.set(6.167, -0.16, 7.803);\n    box3.rotation.set(0, 0.561, 0);\n    box3.scale.set(3.927, 6.285, 3.687);\n\n    _this137.add(box3);\n\n    var box4 = new Mesh(geometry, boxMaterial);\n    box4.position.set(-2.017, 0.018, 6.124);\n    box4.rotation.set(0, 0.333, 0);\n    box4.scale.set(2.002, 4.566, 2.064);\n\n    _this137.add(box4);\n\n    var box5 = new Mesh(geometry, boxMaterial);\n    box5.position.set(2.291, -0.756, -2.621);\n    box5.rotation.set(0, -0.286, 0);\n    box5.scale.set(1.546, 1.552, 1.496);\n\n    _this137.add(box5);\n\n    var box6 = new Mesh(geometry, boxMaterial);\n    box6.position.set(-2.193, -0.369, -5.547);\n    box6.rotation.set(0, 0.516, 0);\n    box6.scale.set(3.875, 3.487, 2.986);\n\n    _this137.add(box6); // -x_left\n\n\n    var light1 = new Mesh(geometry, _this137.createAreaLightMaterial(80));\n    light1.position.set(-14.0, 10.0, 8.0);\n    light1.scale.set(0.1, 2.5, 2.5);\n\n    _this137.add(light1); // -x_right\n\n\n    var light2 = new Mesh(geometry, _this137.createAreaLightMaterial(80));\n    light2.position.set(-14.0, 14.0, -4.0);\n    light2.scale.set(0.1, 2.5, 2.5);\n\n    _this137.add(light2); // +x only on light\n\n\n    var light3 = new Mesh(geometry, _this137.createAreaLightMaterial(23));\n    light3.position.set(14.0, 12.0, 0.0);\n    light3.scale.set(0.1, 5.0, 5.0);\n\n    _this137.add(light3); // +z\n\n\n    var light4 = new Mesh(geometry, _this137.createAreaLightMaterial(16));\n    light4.position.set(0.0, 9.0, 14.0);\n    light4.scale.set(5.0, 5.0, 0.1);\n\n    _this137.add(light4); // -z right\n\n\n    var light5 = new Mesh(geometry, _this137.createAreaLightMaterial(80));\n    light5.position.set(7.0, 8.0, -14.0);\n    light5.scale.set(2.5, 2.5, 0.1);\n\n    _this137.add(light5); // -z left\n\n\n    var light6 = new Mesh(geometry, _this137.createAreaLightMaterial(80));\n    light6.position.set(-7.0, 16.0, -14.0);\n    light6.scale.set(2.5, 2.5, 0.1);\n\n    _this137.add(light6); // +y\n\n\n    var light7 = new Mesh(geometry, _this137.createAreaLightMaterial(1));\n    light7.position.set(0.0, 20.0, 0.0);\n    light7.scale.set(0.1, 0.1, 0.1);\n\n    _this137.add(light7);\n\n    return _this137;\n  }\n\n  _createClass(EnvironmentSceneAlt, [{\n    key: \"createAreaLightMaterial\",\n    value: function createAreaLightMaterial(intensity) {\n      var material = new MeshBasicMaterial();\n      material.color.setScalar(intensity);\n      return material;\n    }\n  }]);\n\n  return EnvironmentSceneAlt;\n}(Scene);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar GENERATED_SIGMA = 0.04;\nvar HDR_FILE_RE = /\\.hdr(\\.js)?$/;\nvar ldrLoader = new TextureLoader();\nvar hdrLoader = new RGBELoader();\nhdrLoader.setDataType(UnsignedByteType); // Attach a `userData` object for arbitrary data on textures that\n// originate from TextureUtils, similar to Object3D's userData,\n// for help debugging, providing metadata for tests, and semantically\n// describe the type of texture within the context of this application.\n\nvar userData = {\n  url: null\n};\n\nvar TextureUtils = /*#__PURE__*/function (_EventDispatcher10) {\n  _inherits(TextureUtils, _EventDispatcher10);\n\n  var _super133 = _createSuper(TextureUtils);\n\n  function TextureUtils(threeRenderer) {\n    var _this138;\n\n    _classCallCheck(this, TextureUtils);\n\n    _this138 = _super133.call(this);\n    _this138.generatedEnvironmentMap = null;\n    _this138.generatedEnvironmentMapAlt = null;\n    _this138.skyboxCache = new Map();\n    _this138.environmentMapCache = new Map();\n    _this138.PMREMGenerator = new PMREMGenerator(threeRenderer);\n    return _this138;\n  }\n\n  _createClass(TextureUtils, [{\n    key: \"load\",\n    value: function () {\n      var _load2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19(url) {\n        var progressCallback,\n            isHDR,\n            _loader2,\n            texture,\n            _args19 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee19$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                progressCallback = _args19.length > 1 && _args19[1] !== undefined ? _args19[1] : function () {};\n                _context20.prev = 1;\n                isHDR = HDR_FILE_RE.test(url);\n                _loader2 = isHDR ? hdrLoader : ldrLoader;\n                _context20.next = 6;\n                return new Promise(function (resolve, reject) {\n                  return _loader2.load(url, resolve, function (event) {\n                    progressCallback(event.loaded / event.total * 0.9);\n                  }, reject);\n                });\n\n              case 6:\n                texture = _context20.sent;\n                progressCallback(1.0);\n                this.addMetadata(texture, url);\n                texture.mapping = EquirectangularReflectionMapping;\n\n                if (!isHDR) {\n                  texture.encoding = GammaEncoding;\n                }\n\n                return _context20.abrupt(\"return\", texture);\n\n              case 12:\n                _context20.prev = 12;\n\n                if (progressCallback) {\n                  progressCallback(1);\n                }\n\n                return _context20.finish(12);\n\n              case 15:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee19, this, [[1,, 12, 15]]);\n      }));\n\n      function load(_x30) {\n        return _load2.apply(this, arguments);\n      }\n\n      return load;\n    }()\n    /**\n     * Returns a { skybox, environmentMap } object with the targets/textures\n     * accordingly. `skybox` is a WebGLRenderCubeTarget, and `environmentMap`\n     * is a Texture from a WebGLRenderCubeTarget.\n     */\n\n  }, {\n    key: \"generateEnvironmentMapAndSkybox\",\n    value: function () {\n      var _generateEnvironmentMapAndSkybox = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20() {\n        var skyboxUrl,\n            environmentMap,\n            options,\n            progressTracker,\n            updateGenerationProgress,\n            useAltEnvironment,\n            environmentMapUrl,\n            skyboxLoads,\n            environmentMapLoads,\n            _yield$Promise$all,\n            _yield$Promise$all2,\n            _environmentMap,\n            skybox,\n            _args20 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee20$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                skyboxUrl = _args20.length > 0 && _args20[0] !== undefined ? _args20[0] : null;\n                environmentMap = _args20.length > 1 && _args20[1] !== undefined ? _args20[1] : null;\n                options = _args20.length > 2 && _args20[2] !== undefined ? _args20[2] : {};\n                progressTracker = options.progressTracker;\n                updateGenerationProgress = progressTracker != null ? progressTracker.beginActivity() : function () {};\n                useAltEnvironment = environmentMap === 'neutral';\n\n                if (useAltEnvironment === true) {\n                  environmentMap = null;\n                }\n\n                environmentMapUrl = deserializeUrl(environmentMap);\n                _context21.prev = 8;\n                skyboxLoads = Promise.resolve(null);\n\n                // If we have a skybox URL, attempt to load it as a cubemap\n                if (!!skyboxUrl) {\n                  skyboxLoads = this.loadSkyboxFromUrl(skyboxUrl, progressTracker);\n                }\n\n                if (!!environmentMapUrl) {\n                  // We have an available environment map URL\n                  environmentMapLoads = this.loadEnvironmentMapFromUrl(environmentMapUrl, progressTracker);\n                } else if (!!skyboxUrl) {\n                  // Fallback to deriving the environment map from an available skybox\n                  environmentMapLoads = this.loadEnvironmentMapFromUrl(skyboxUrl, progressTracker);\n                } else {\n                  // Fallback to generating the environment map\n                  environmentMapLoads = useAltEnvironment === true ? this.loadGeneratedEnvironmentMapAlt() : this.loadGeneratedEnvironmentMap();\n                }\n\n                _context21.next = 14;\n                return Promise.all([environmentMapLoads, skyboxLoads]);\n\n              case 14:\n                _yield$Promise$all = _context21.sent;\n                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n                _environmentMap = _yield$Promise$all2[0];\n                skybox = _yield$Promise$all2[1];\n\n                if (!(_environmentMap == null)) {\n                  _context21.next = 20;\n                  break;\n                }\n\n                throw new Error('Failed to load environment map.');\n\n              case 20:\n                return _context21.abrupt(\"return\", {\n                  environmentMap: _environmentMap,\n                  skybox: skybox\n                });\n\n              case 21:\n                _context21.prev = 21;\n                updateGenerationProgress(1.0);\n                return _context21.finish(21);\n\n              case 24:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee20, this, [[8,, 21, 24]]);\n      }));\n\n      function generateEnvironmentMapAndSkybox() {\n        return _generateEnvironmentMapAndSkybox.apply(this, arguments);\n      }\n\n      return generateEnvironmentMapAndSkybox;\n    }()\n  }, {\n    key: \"addMetadata\",\n    value: function addMetadata(texture, url) {\n      if (texture == null) {\n        return;\n      }\n\n      texture.userData = Object.assign(Object.assign({}, userData), {\n        url: url\n      });\n    }\n    /**\n     * Loads an equirect Texture from a given URL, for use as a skybox.\n     */\n\n  }, {\n    key: \"loadSkyboxFromUrl\",\n    value: function loadSkyboxFromUrl(url, progressTracker) {\n      if (!this.skyboxCache.has(url)) {\n        var progressCallback = progressTracker ? progressTracker.beginActivity() : function () {};\n        var skyboxMapLoads = this.load(url, progressCallback);\n        this.skyboxCache.set(url, skyboxMapLoads);\n      }\n\n      return this.skyboxCache.get(url);\n    }\n    /**\n     * Loads a WebGLRenderTarget from a given URL. The render target in this\n     * case will be assumed to be used as an environment map.\n     */\n\n  }, {\n    key: \"loadEnvironmentMapFromUrl\",\n    value: function loadEnvironmentMapFromUrl(url, progressTracker) {\n      var _this139 = this;\n\n      if (!this.environmentMapCache.has(url)) {\n        var environmentMapLoads = this.loadSkyboxFromUrl(url, progressTracker).then(function (equirect) {\n          var cubeUV = _this139.PMREMGenerator.fromEquirectangular(equirect);\n\n          _this139.addMetadata(cubeUV.texture, url);\n\n          return cubeUV;\n        });\n        this.PMREMGenerator.compileEquirectangularShader();\n        this.environmentMapCache.set(url, environmentMapLoads);\n      }\n\n      return this.environmentMapCache.get(url);\n    }\n    /**\n     * Loads a dynamically generated environment map.\n     */\n\n  }, {\n    key: \"loadGeneratedEnvironmentMap\",\n    value: function loadGeneratedEnvironmentMap() {\n      if (this.generatedEnvironmentMap == null) {\n        var defaultScene = new EnvironmentScene();\n        this.generatedEnvironmentMap = this.PMREMGenerator.fromScene(defaultScene, GENERATED_SIGMA);\n        this.addMetadata(this.generatedEnvironmentMap.texture, null);\n      }\n\n      return Promise.resolve(this.generatedEnvironmentMap);\n    }\n    /**\n     * Loads a dynamically generated environment map, designed to be neutral and\n     * color-preserving. Shows less contrast around the different sides of the\n     * object.\n     */\n\n  }, {\n    key: \"loadGeneratedEnvironmentMapAlt\",\n    value: function loadGeneratedEnvironmentMapAlt() {\n      if (this.generatedEnvironmentMapAlt == null) {\n        var defaultScene = new EnvironmentSceneAlt();\n        this.generatedEnvironmentMapAlt = this.PMREMGenerator.fromScene(defaultScene, GENERATED_SIGMA);\n        this.addMetadata(this.generatedEnvironmentMapAlt.texture, null);\n      }\n\n      return Promise.resolve(this.generatedEnvironmentMapAlt);\n    }\n  }, {\n    key: \"dispose\",\n    value: function () {\n      var _dispose = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee21() {\n        var allTargetsLoad, _i361, _allTargetsLoad, targetLoads, _target8;\n\n        return _regeneratorRuntime.wrap(function _callee21$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                allTargetsLoad = []; // NOTE(cdata): We would use for-of iteration on the maps here, but\n                // IE11 doesn't have the necessary iterator-returning methods. So,\n                // disposal of these render targets is kind of convoluted as a result.\n\n                this.environmentMapCache.forEach(function (targetLoads) {\n                  allTargetsLoad.push(targetLoads);\n                });\n                this.environmentMapCache.clear();\n                _i361 = 0, _allTargetsLoad = allTargetsLoad;\n\n              case 4:\n                if (!(_i361 < _allTargetsLoad.length)) {\n                  _context22.next = 18;\n                  break;\n                }\n\n                targetLoads = _allTargetsLoad[_i361];\n                _context22.prev = 6;\n                _context22.next = 9;\n                return targetLoads;\n\n              case 9:\n                _target8 = _context22.sent;\n\n                _target8.dispose();\n\n                _context22.next = 15;\n                break;\n\n              case 13:\n                _context22.prev = 13;\n                _context22.t0 = _context22[\"catch\"](6);\n\n              case 15:\n                _i361++;\n                _context22.next = 4;\n                break;\n\n              case 18:\n                if (this.generatedEnvironmentMap != null) {\n                  this.generatedEnvironmentMap.dispose();\n                  this.generatedEnvironmentMap = null;\n                }\n\n                if (this.generatedEnvironmentMapAlt != null) {\n                  this.generatedEnvironmentMapAlt.dispose();\n                  this.generatedEnvironmentMapAlt = null;\n                }\n\n              case 20:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee21, this, [[6, 13]]);\n      }));\n\n      function dispose() {\n        return _dispose.apply(this, arguments);\n      }\n\n      return dispose;\n    }()\n  }]);\n\n  return TextureUtils;\n}(EventDispatcher);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Between 0 and 1: larger means the average responds faster and is less smooth.\n\n\nvar DURATION_DECAY = 0.2;\nvar LOW_FRAME_DURATION_MS = 18;\nvar HIGH_FRAME_DURATION_MS = 26;\nvar MAX_AVG_CHANGE_MS = 2;\nvar SCALE_STEPS = [1, 0.79, 0.62, 0.5, 0.4, 0.31, 0.25];\nvar DEFAULT_LAST_STEP = 3;\nvar DEFAULT_POWER_PREFERENCE = 'high-performance';\n/**\n * Registers canvases with Canvas2DRenderingContexts and renders them\n * all in the same WebGLRenderingContext, spitting out textures to apply\n * to the canvases. Creates a fullscreen WebGL canvas that is not added\n * to the DOM, and on each frame, renders each registered canvas on a portion\n * of the WebGL canvas, and applies the texture on the registered canvas.\n *\n * In the future, can use ImageBitmapRenderingContext instead of\n * Canvas2DRenderingContext if supported for cheaper transfering of\n * the texture.\n */\n\nvar Renderer = /*#__PURE__*/function (_EventDispatcher11) {\n  _inherits(Renderer, _EventDispatcher11);\n\n  var _super134 = _createSuper(Renderer);\n\n  function Renderer(options) {\n    var _this140;\n\n    _classCallCheck(this, Renderer);\n\n    _this140 = _super134.call(this);\n    _this140.loader = new CachingGLTFLoader(ModelViewerGLTFInstance);\n    _this140.width = 0;\n    _this140.height = 0;\n    _this140.dpr = 1;\n    _this140.debugger = null;\n    _this140.scenes = new Set();\n    _this140.multipleScenesVisible = false;\n    _this140.scaleStep = 0;\n    _this140.lastStep = DEFAULT_LAST_STEP;\n    _this140.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n\n    _this140.onWebGLContextLost = function (event) {\n      _this140.dispatchEvent({\n        type: 'contextlost',\n        sourceEvent: event\n      });\n    };\n\n    _this140.onWebGLContextRestored = function () {\n      var _a;\n\n      (_a = _this140.textureUtils) === null || _a === void 0 ? void 0 : _a.dispose();\n      _this140.textureUtils = new TextureUtils(_this140.threeRenderer);\n      _this140.roughnessMipmapper = new RoughnessMipmapper(_this140.threeRenderer);\n\n      var _iterator15 = _createForOfIteratorHelper(_this140.scenes),\n          _step15;\n\n      try {\n        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n          var scene = _step15.value;\n          scene.element[$updateEnvironment]();\n        }\n      } catch (err) {\n        _iterator15.e(err);\n      } finally {\n        _iterator15.f();\n      }\n\n      _this140.threeRenderer.shadowMap.needsUpdate = true;\n    };\n\n    _this140.dpr = resolveDpr();\n    _this140.canvas3D = document.createElement('canvas');\n    _this140.canvas3D.id = 'webgl-canvas';\n\n    try {\n      _this140.threeRenderer = new WebGLRenderer({\n        canvas: _this140.canvas3D,\n        alpha: true,\n        antialias: true,\n        powerPreference: options.powerPreference,\n        preserveDrawingBuffer: true\n      });\n      _this140.threeRenderer.autoClear = true;\n      _this140.threeRenderer.outputEncoding = GammaEncoding;\n      _this140.threeRenderer.physicallyCorrectLights = true;\n\n      _this140.threeRenderer.setPixelRatio(1); // handle pixel ratio externally\n\n\n      _this140.threeRenderer.shadowMap.enabled = true;\n      _this140.threeRenderer.shadowMap.type = PCFSoftShadowMap;\n      _this140.threeRenderer.shadowMap.autoUpdate = false;\n      _this140.debugger = !!options.debug ? new Debugger(_assertThisInitialized(_this140)) : null;\n      _this140.threeRenderer.debug = {\n        checkShaderErrors: !!_this140.debugger\n      }; // ACESFilmicToneMapping appears to be the most \"saturated\",\n      // and similar to Filament's gltf-viewer.\n\n      _this140.threeRenderer.toneMapping = ACESFilmicToneMapping;\n    } catch (error) {\n      console.warn(error);\n    }\n\n    _this140.arRenderer = new ARRenderer(_assertThisInitialized(_this140));\n    _this140.textureUtils = _this140.canRender ? new TextureUtils(_this140.threeRenderer) : null;\n    _this140.roughnessMipmapper = new RoughnessMipmapper(_this140.threeRenderer);\n    CachingGLTFLoader.initializeKTX2Loader(_this140.threeRenderer);\n\n    _this140.canvas3D.addEventListener('webglcontextlost', _this140.onWebGLContextLost);\n\n    _this140.canvas3D.addEventListener('webglcontextrestored', _this140.onWebGLContextRestored);\n\n    _this140.updateRendererSize();\n\n    _this140.lastTick = performance.now();\n    _this140.avgFrameDuration = 0;\n    return _this140;\n  }\n\n  _createClass(Renderer, [{\n    key: \"canRender\",\n    get: function get() {\n      return this.threeRenderer != null;\n    }\n  }, {\n    key: \"scaleFactor\",\n    get: function get() {\n      return SCALE_STEPS[this.scaleStep];\n    }\n  }, {\n    key: \"minScale\",\n    set: function set(scale) {\n      var i = 1;\n\n      while (i < SCALE_STEPS.length) {\n        if (SCALE_STEPS[i] < scale) {\n          break;\n        }\n\n        ++i;\n      }\n\n      this.lastStep = i - 1;\n    }\n    /**\n     * Updates the renderer's size based on the largest scene and any changes to\n     * device pixel ratio.\n     */\n\n  }, {\n    key: \"updateRendererSize\",\n    value: function updateRendererSize() {\n      var dpr = resolveDpr();\n\n      if (dpr !== this.dpr) {\n        // If the device pixel ratio has changed due to page zoom, elements\n        // specified by % width do not fire a resize event even though their CSS\n        // pixel dimensions change, so we force them to update their size here.\n        var _iterator16 = _createForOfIteratorHelper(this.scenes),\n            _step16;\n\n        try {\n          for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n            var scene = _step16.value;\n            var element = scene.element;\n            element[$updateSize](element.getBoundingClientRect());\n          }\n        } catch (err) {\n          _iterator16.e(err);\n        } finally {\n          _iterator16.f();\n        }\n      } // Make the renderer the size of the largest scene\n\n\n      var width = 0;\n      var height = 0;\n\n      var _iterator17 = _createForOfIteratorHelper(this.scenes),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var _scene = _step17.value;\n          width = Math.max(width, _scene.width);\n          height = Math.max(height, _scene.height);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (width === this.width && height === this.height && dpr === this.dpr) {\n        return;\n      }\n\n      this.width = width;\n      this.height = height;\n      this.dpr = dpr;\n\n      if (this.canRender) {\n        this.threeRenderer.setSize(width * dpr, height * dpr, false);\n      } // Expand the canvas size to make up for shrinking the viewport.\n\n\n      var scale = this.scaleFactor;\n      var widthCSS = width / scale;\n      var heightCSS = height / scale; // The canvas element must by styled outside of three due to the offscreen\n      // canvas not being directly stylable.\n\n      this.canvas3D.style.width = \"\".concat(widthCSS, \"px\");\n      this.canvas3D.style.height = \"\".concat(heightCSS, \"px\"); // Each scene's canvas must match the renderer size. In general they can be\n      // larger than the element that contains them, but the overflow is hidden\n      // and only the portion that is shown is copied over.\n\n      var _iterator18 = _createForOfIteratorHelper(this.scenes),\n          _step18;\n\n      try {\n        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n          var _scene2 = _step18.value;\n          var canvas = _scene2.canvas;\n          canvas.width = Math.round(width * dpr);\n          canvas.height = Math.round(height * dpr);\n          canvas.style.width = \"\".concat(widthCSS, \"px\");\n          canvas.style.height = \"\".concat(heightCSS, \"px\");\n          _scene2.isDirty = true;\n        }\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n    }\n  }, {\n    key: \"updateRendererScale\",\n    value: function updateRendererScale() {\n      var scaleStep = this.scaleStep;\n\n      if (this.avgFrameDuration > HIGH_FRAME_DURATION_MS && this.scaleStep < this.lastStep) {\n        ++this.scaleStep;\n      } else if (this.avgFrameDuration < LOW_FRAME_DURATION_MS && this.scaleStep > 0) {\n        --this.scaleStep;\n      }\n\n      if (scaleStep == this.scaleStep) {\n        return;\n      }\n\n      var scale = this.scaleFactor;\n      this.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n      var width = this.width / scale;\n      var height = this.height / scale;\n      this.canvas3D.style.width = \"\".concat(width, \"px\");\n      this.canvas3D.style.height = \"\".concat(height, \"px\");\n\n      var _iterator19 = _createForOfIteratorHelper(this.scenes),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var scene = _step19.value;\n          var _style2 = scene.canvas.style;\n          _style2.width = \"\".concat(width, \"px\");\n          _style2.height = \"\".concat(height, \"px\");\n          scene.isDirty = true;\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n    }\n  }, {\n    key: \"registerScene\",\n    value: function registerScene(scene) {\n      var _this141 = this;\n\n      this.scenes.add(scene);\n      var canvas = scene.canvas;\n      var scale = this.scaleFactor;\n      canvas.width = Math.round(this.width * this.dpr);\n      canvas.height = Math.round(this.height * this.dpr);\n      canvas.style.width = \"\".concat(this.width / scale, \"px\");\n      canvas.style.height = \"\".concat(this.height / scale, \"px\");\n\n      if (this.multipleScenesVisible) {\n        canvas.classList.add('show');\n      }\n\n      scene.isDirty = true;\n\n      if (this.canRender && this.scenes.size > 0) {\n        this.threeRenderer.setAnimationLoop(function (time, frame) {\n          return _this141.render(time, frame);\n        });\n      }\n\n      if (this.debugger != null) {\n        this.debugger.addScene(scene);\n      }\n    }\n  }, {\n    key: \"unregisterScene\",\n    value: function unregisterScene(scene) {\n      this.scenes.delete(scene);\n\n      if (this.canRender && this.scenes.size === 0) {\n        this.threeRenderer.setAnimationLoop(null);\n      }\n\n      if (this.debugger != null) {\n        this.debugger.removeScene(scene);\n      }\n    }\n  }, {\n    key: \"displayCanvas\",\n    value: function displayCanvas(scene) {\n      return this.multipleScenesVisible ? scene.element[$canvas] : this.canvas3D;\n    }\n    /**\n     * The function enables an optimization, where when there is only a single\n     * <model-viewer> element, we can use the renderer's 3D canvas directly for\n     * display. Otherwise we need to use the element's 2D canvas and copy the\n     * renderer's result into it.\n     */\n\n  }, {\n    key: \"selectCanvas\",\n    value: function selectCanvas() {\n      var visibleScenes = 0;\n      var visibleCanvas = null;\n\n      var _iterator20 = _createForOfIteratorHelper(this.scenes),\n          _step20;\n\n      try {\n        for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n          var scene = _step20.value;\n          var element = scene.element;\n\n          if (element.modelIsVisible && scene.externalRenderer == null) {\n            ++visibleScenes;\n            visibleCanvas = scene.canvas;\n          }\n        }\n      } catch (err) {\n        _iterator20.e(err);\n      } finally {\n        _iterator20.f();\n      }\n\n      if (visibleCanvas == null) {\n        return;\n      }\n\n      var multipleScenesVisible = visibleScenes > 1;\n      var canvas3D = this.canvas3D;\n\n      if (multipleScenesVisible === this.multipleScenesVisible && (multipleScenesVisible || canvas3D.parentElement === visibleCanvas.parentElement)) {\n        return;\n      }\n\n      this.multipleScenesVisible = multipleScenesVisible;\n\n      if (multipleScenesVisible) {\n        canvas3D.classList.remove('show');\n      }\n\n      var _iterator21 = _createForOfIteratorHelper(this.scenes),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _scene3 = _step21.value;\n\n          if (_scene3.externalRenderer != null) {\n            continue;\n          }\n\n          var canvas = _scene3.element[$canvas];\n\n          if (multipleScenesVisible) {\n            canvas.classList.add('show');\n            _scene3.isDirty = true;\n          } else if (_scene3.canvas === visibleCanvas) {\n            _scene3.canvas.parentElement.appendChild(canvas3D);\n\n            canvas3D.classList.add('show');\n            canvas.classList.remove('show');\n            _scene3.isDirty = true;\n          }\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n    }\n    /**\n     * Returns an array version of this.scenes where the non-visible ones are\n     * first. This allows eager scenes to be rendered before they are visible,\n     * without needing the multi-canvas render path.\n     */\n\n  }, {\n    key: \"orderedScenes\",\n    value: function orderedScenes() {\n      var scenes = [];\n\n      for (var _i362 = 0, _arr = [false, true]; _i362 < _arr.length; _i362++) {\n        var visible = _arr[_i362];\n\n        var _iterator22 = _createForOfIteratorHelper(this.scenes),\n            _step22;\n\n        try {\n          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n            var scene = _step22.value;\n\n            if (scene.element.modelIsVisible === visible) {\n              scenes.push(scene);\n            }\n          }\n        } catch (err) {\n          _iterator22.e(err);\n        } finally {\n          _iterator22.f();\n        }\n      }\n\n      return scenes;\n    }\n  }, {\n    key: \"isPresenting\",\n    get: function get() {\n      return this.arRenderer.isPresenting;\n    }\n    /**\n     * This method takes care of updating the element and renderer state based on\n     * the time that has passed since the last rendered frame.\n     */\n\n  }, {\n    key: \"preRender\",\n    value: function preRender(scene, t, delta) {\n      var element = scene.element,\n          exposure = scene.exposure;\n      element[$tick](t, delta);\n      var exposureIsNumber = typeof exposure === 'number' && !self.isNaN(exposure);\n      this.threeRenderer.toneMappingExposure = exposureIsNumber ? exposure : 1.0;\n\n      if (scene.isShadowDirty()) {\n        this.threeRenderer.shadowMap.needsUpdate = true;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(t, frame) {\n      if (frame != null) {\n        this.arRenderer.onWebXRFrame(t, frame);\n        return;\n      }\n\n      var delta = t - this.lastTick;\n      this.lastTick = t;\n\n      if (!this.canRender || this.isPresenting) {\n        return;\n      }\n\n      this.avgFrameDuration += clamp(DURATION_DECAY * (delta - this.avgFrameDuration), -MAX_AVG_CHANGE_MS, MAX_AVG_CHANGE_MS);\n      this.selectCanvas();\n      this.updateRendererSize();\n      this.updateRendererScale();\n      var dpr = this.dpr,\n          scaleFactor = this.scaleFactor;\n\n      var _iterator23 = _createForOfIteratorHelper(this.orderedScenes()),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var scene = _step23.value;\n          var element = scene.element;\n\n          if (!element.modelIsVisible && scene.renderCount > 0) {\n            continue;\n          }\n\n          this.preRender(scene, t, delta);\n\n          if (!scene.isDirty) {\n            continue;\n          }\n\n          if (scene.externalRenderer != null) {\n            var _camera2 = scene.getCamera();\n\n            _camera2.updateMatrix();\n\n            var matrix = _camera2.matrix,\n                projectionMatrix = _camera2.projectionMatrix;\n            var viewMatrix = matrix.elements.slice();\n\n            var _target9 = scene.getTarget();\n\n            viewMatrix[12] += _target9.x;\n            viewMatrix[13] += _target9.y;\n            viewMatrix[14] += _target9.z;\n            scene.externalRenderer.render({\n              viewMatrix: viewMatrix,\n              projectionMatrix: projectionMatrix.elements\n            });\n            continue;\n          }\n\n          if (!element.modelIsVisible && !this.multipleScenesVisible) {\n            // Here we are pre-rendering on the visible canvas, so we must mark the\n            // visible scene dirty to ensure it overwrites us.\n            var _iterator24 = _createForOfIteratorHelper(this.scenes),\n                _step24;\n\n            try {\n              for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n                var visibleScene = _step24.value;\n\n                if (visibleScene.element.modelIsVisible) {\n                  visibleScene.isDirty = true;\n                }\n              }\n            } catch (err) {\n              _iterator24.e(err);\n            } finally {\n              _iterator24.f();\n            }\n          } // We avoid using the Three.js PixelRatio and handle it ourselves here so\n          // that we can do proper rounding and avoid white boundary pixels.\n\n\n          var width = Math.min(Math.ceil(scene.width * scaleFactor * dpr), this.canvas3D.width);\n          var height = Math.min(Math.ceil(scene.height * scaleFactor * dpr), this.canvas3D.height); // Need to set the render target in order to prevent\n          // clearing the depth from a different buffer\n\n          this.threeRenderer.setRenderTarget(null);\n          this.threeRenderer.setViewport(0, Math.floor(this.height * dpr) - height, width, height);\n          this.threeRenderer.render(scene, scene.camera);\n\n          if (this.multipleScenesVisible) {\n            if (scene.context == null) {\n              scene.createContext();\n            }\n\n            var context2D = scene.context;\n            context2D.clearRect(0, 0, width, height);\n            context2D.drawImage(this.canvas3D, 0, 0, width, height, 0, 0, width, height);\n          }\n\n          scene.isDirty = false;\n\n          if (element.loaded) {\n            ++scene.renderCount;\n          }\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.textureUtils != null) {\n        this.textureUtils.dispose();\n      }\n\n      if (this.roughnessMipmapper != null) {\n        this.roughnessMipmapper.dispose();\n      }\n\n      if (this.threeRenderer != null) {\n        this.threeRenderer.dispose();\n      }\n\n      this.textureUtils = null;\n      this.threeRenderer = null;\n      var elements = [];\n\n      var _iterator25 = _createForOfIteratorHelper(this.scenes),\n          _step25;\n\n      try {\n        for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n          var scene = _step25.value;\n          elements.push(scene.element);\n        }\n      } catch (err) {\n        _iterator25.e(err);\n      } finally {\n        _iterator25.f();\n      }\n\n      this.canvas3D.removeEventListener('webglcontextlost', this.onWebGLContextLost);\n      this.canvas3D.removeEventListener('webglcontextrestored', this.onWebGLContextRestored);\n      return elements;\n    }\n  }], [{\n    key: \"singleton\",\n    get: function get() {\n      return this._singleton;\n    }\n  }, {\n    key: \"resetSingleton\",\n    value: function resetSingleton() {\n      var elements = this._singleton.dispose();\n\n      var _iterator26 = _createForOfIteratorHelper(elements),\n          _step26;\n\n      try {\n        for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n          var element = _step26.value;\n          element.disconnectedCallback();\n        }\n      } catch (err) {\n        _iterator26.e(err);\n      } finally {\n        _iterator26.f();\n      }\n\n      this._singleton = new Renderer({\n        powerPreference: (self.ModelViewerElement || {}).powerPreference || DEFAULT_POWER_PREFERENCE,\n        debug: isDebugMode()\n      });\n\n      var _iterator27 = _createForOfIteratorHelper(elements),\n          _step27;\n\n      try {\n        for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n          var _element = _step27.value;\n\n          _element.connectedCallback();\n        }\n      } catch (err) {\n        _iterator27.e(err);\n      } finally {\n        _iterator27.f();\n      }\n    }\n  }]);\n\n  return Renderer;\n}(EventDispatcher);\n\nRenderer._singleton = new Renderer({\n  powerPreference: (self.ModelViewerElement || {}).powerPreference || DEFAULT_POWER_PREFERENCE,\n  debug: isDebugMode()\n});\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Converts a base64 string which represents a data url\n * into a Blob of the same contents.\n */\n\nvar dataUrlToBlob = /*#__PURE__*/function () {\n  var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee22(base64DataUrl) {\n    return _regeneratorRuntime.wrap(function _callee22$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            return _context23.abrupt(\"return\", new Promise(function (resolve, reject) {\n              var sliceSize = 512;\n              var typeMatch = base64DataUrl.match(/data:(.*);/);\n\n              if (!typeMatch) {\n                return reject(new Error(\"\".concat(base64DataUrl, \" is not a valid data Url\")));\n              }\n\n              var type = typeMatch[1];\n              var base64 = base64DataUrl.replace(/data:image\\/\\w+;base64,/, '');\n              var byteCharacters = atob(base64);\n              var byteArrays = [];\n\n              for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n                var slice = byteCharacters.slice(offset, offset + sliceSize);\n                var byteNumbers = new Array(slice.length);\n\n                for (var _i363 = 0; _i363 < slice.length; _i363++) {\n                  byteNumbers[_i363] = slice.charCodeAt(_i363);\n                }\n\n                var byteArray = new Uint8Array(byteNumbers);\n                byteArrays.push(byteArray);\n              }\n\n              resolve(new Blob(byteArrays, {\n                type: type\n              }));\n            }));\n\n          case 1:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, _callee22);\n  }));\n\n  return function dataUrlToBlob(_x31) {\n    return _ref16.apply(this, arguments);\n  };\n}();\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$7, _b$5;\n\nvar $ongoingActivities = Symbol('ongoingActivities');\nvar $announceTotalProgress = Symbol('announceTotalProgress');\nvar $eventDelegate = Symbol('eventDelegate');\nvar ACTIVITY_PROGRESS_WEIGHT = 0.5;\n/**\n * ProgressTracker is an event emitter that helps to track the ongoing progress\n * of many simultaneous actions.\n *\n * ProgressTracker reports progress activity in the form of a progress event.\n * The event.detail.totalProgress value indicates the elapsed progress of all\n * activities being tracked by the ProgressTracker.\n *\n * The value of totalProgress is a number that progresses from 0 to 1. The\n * ProgressTracker allows for the lazy accumulation of tracked actions, so the\n * total progress represents a abstract, non-absolute progress towards the\n * completion of all currently tracked events.\n *\n * When all currently tracked activities are finished, the ProgressTracker\n * emits one final progress event and then resets the list of its currently\n * tracked activities. This means that from an observer's perspective,\n * ongoing activities will accumulate and collectively contribute to the notion\n * of total progress until all currently tracked ongoing activities have\n * completed.\n */\n\nvar ProgressTracker = /*#__PURE__*/function (_ref17) {\n  function ProgressTracker() {\n    var _this142 = this;\n\n    _classCallCheck(this, ProgressTracker);\n\n    // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n    // EventTarget interface without implementing or requiring a full polyfill. We\n    // should remove this once EventTarget is inheritable everywhere.\n    this[_a$7] = document.createDocumentFragment(); // NOTE(cdata): We declare each of these methods independently here so that we\n    // can inherit the correct types from EventTarget's interface. Maybe there is\n    // a better way to do this dynamically so that we don't repeat ourselves?\n\n    this.addEventListener = function () {\n      var _this142$$eventDelega;\n\n      return (_this142$$eventDelega = _this142[$eventDelegate]).addEventListener.apply(_this142$$eventDelega, arguments);\n    };\n\n    this.removeEventListener = function () {\n      var _this142$$eventDelega2;\n\n      return (_this142$$eventDelega2 = _this142[$eventDelegate]).removeEventListener.apply(_this142$$eventDelega2, arguments);\n    };\n\n    this.dispatchEvent = function () {\n      var _this142$$eventDelega3;\n\n      return (_this142$$eventDelega3 = _this142[$eventDelegate]).dispatchEvent.apply(_this142$$eventDelega3, arguments);\n    };\n\n    this[_b$5] = new Set();\n  }\n  /**\n   * The total number of activities currently being tracked.\n   */\n\n\n  _createClass(ProgressTracker, [{\n    key: \"ongoingActivityCount\",\n    get: function get() {\n      return this[$ongoingActivities].size;\n    }\n    /**\n     * Registers a new activity to be tracked by the progress tracker. The method\n     * returns a special callback that should be invoked whenever new progress is\n     * ready to be reported. The progress should be reported as a value between 0\n     * and 1, where 0 would represent the beginning of the action and 1 would\n     * represent its completion.\n     *\n     * There is no built-in notion of a time-out for ongoing activities, so once\n     * an ongoing activity is begun, it is up to the consumer of this API to\n     * update the progress until that activity is no longer ongoing.\n     *\n     * Progress is only allowed to move forward for any given activity. If a lower\n     * progress is reported than the previously reported progress, it will be\n     * ignored.\n     */\n\n  }, {\n    key: \"beginActivity\",\n    value: function beginActivity() {\n      var _this143 = this;\n\n      var activity = {\n        progress: 0\n      };\n      this[$ongoingActivities].add(activity);\n\n      if (this.ongoingActivityCount === 1) {\n        // Announce the first progress event (which should always be 0 / 1\n        // total progress):\n        this[$announceTotalProgress]();\n      }\n\n      return function (progress) {\n        var nextProgress;\n        nextProgress = Math.max(clamp(progress, 0, 1), activity.progress);\n\n        if (nextProgress !== activity.progress) {\n          activity.progress = nextProgress;\n\n          _this143[$announceTotalProgress]();\n        }\n\n        return activity.progress;\n      };\n    }\n  }, {\n    key: _ref17,\n    value: function value() {\n      var totalProgress = 0;\n      var statusCount = 0;\n      var completedActivities = 0;\n\n      var _iterator28 = _createForOfIteratorHelper(this[$ongoingActivities]),\n          _step28;\n\n      try {\n        for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n          var activity = _step28.value;\n          var progress = activity.progress;\n          var compoundWeight = ACTIVITY_PROGRESS_WEIGHT / Math.pow(2, statusCount++);\n          totalProgress += progress * compoundWeight;\n\n          if (progress === 1.0) {\n            completedActivities++;\n          }\n        }\n      } catch (err) {\n        _iterator28.e(err);\n      } finally {\n        _iterator28.f();\n      }\n\n      if (completedActivities === this.ongoingActivityCount) {\n        totalProgress = 1.0;\n        this[$ongoingActivities].clear();\n      }\n\n      this.dispatchEvent(new CustomEvent('progress', {\n        detail: {\n          totalProgress: totalProgress\n        }\n      }));\n    }\n  }]);\n\n  return ProgressTracker;\n}((_a$7 = $eventDelegate, _b$5 = $ongoingActivities, $announceTotalProgress));\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar _a$6, _b$4, _c$2, _d$1, _e, _f, _g, _h, _j, _k;\n\nvar CLEAR_MODEL_TIMEOUT_MS = 1000;\nvar FALLBACK_SIZE_UPDATE_THRESHOLD_MS = 50;\nvar ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD = 0;\nvar UNSIZED_MEDIA_WIDTH = 300;\nvar UNSIZED_MEDIA_HEIGHT = 150;\nvar blobCanvas = document.createElement('canvas');\nvar $template = Symbol('template');\nvar $fallbackResizeHandler = Symbol('fallbackResizeHandler');\nvar $defaultAriaLabel = Symbol('defaultAriaLabel');\nvar $resizeObserver = Symbol('resizeObserver');\nvar $clearModelTimeout = Symbol('clearModelTimeout');\nvar $onContextLost = Symbol('onContextLost');\nvar $loaded = Symbol('loaded');\nvar $updateSize = Symbol('updateSize');\nvar $intersectionObserver = Symbol('intersectionObserver');\nvar $isElementInViewport = Symbol('isElementInViewport');\nvar $announceModelVisibility = Symbol('announceModelVisibility');\nvar $ariaLabel = Symbol('ariaLabel');\nvar $loadedTime = Symbol('loadedTime');\nvar $updateSource = Symbol('updateSource');\nvar $markLoaded = Symbol('markLoaded');\nvar $container = Symbol('container');\nvar $userInputElement = Symbol('input');\nvar $canvas = Symbol('canvas');\nvar $scene = Symbol('scene');\nvar $needsRender = Symbol('needsRender');\nvar $tick = Symbol('tick');\nvar $onModelLoad = Symbol('onModelLoad');\nvar $onResize = Symbol('onResize');\nvar $renderer = Symbol('renderer');\nvar $progressTracker = Symbol('progressTracker');\nvar $getLoaded = Symbol('getLoaded');\nvar $getModelIsVisible = Symbol('getModelIsVisible');\nvar $shouldAttemptPreload = Symbol('shouldAttemptPreload');\nvar $sceneIsReady = Symbol('sceneIsReady');\nvar $hasTransitioned = Symbol('hasTransitioned');\n\nvar toVector3D = function toVector3D(v) {\n  return {\n    x: v.x,\n    y: v.y,\n    z: v.z,\n    toString: function toString() {\n      return \"\".concat(this.x, \"m \").concat(this.y, \"m \").concat(this.z, \"m\");\n    }\n  };\n};\n/**\n * Definition for a basic <model-viewer> element.\n */\n\n\nvar ModelViewerElementBase = /*#__PURE__*/function (_UpdatingElement2, _ref18, _ref19) {\n  _inherits(ModelViewerElementBase, _UpdatingElement2);\n\n  var _super135 = _createSuper(ModelViewerElementBase);\n\n  /**\n   * Creates a new ModelViewerElement.\n   */\n  function ModelViewerElementBase() {\n    var _this144;\n\n    _classCallCheck(this, ModelViewerElementBase);\n\n    _this144 = _super135.call(this);\n    _this144.alt = null;\n    _this144.src = null;\n    _this144[_a$6] = false;\n    _this144[_b$4] = false;\n    _this144[_c$2] = 0;\n    _this144[_d$1] = null;\n    _this144[_e] = debounce(function () {\n      var boundingRect = _this144.getBoundingClientRect();\n\n      _this144[$updateSize](boundingRect);\n    }, FALLBACK_SIZE_UPDATE_THRESHOLD_MS);\n    _this144[_f] = debounce(function (oldVisibility) {\n      var newVisibility = _this144.modelIsVisible;\n\n      if (newVisibility !== oldVisibility) {\n        _this144.dispatchEvent(new CustomEvent('model-visibility', {\n          detail: {\n            visible: newVisibility\n          }\n        }));\n      }\n    }, ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD);\n    _this144[_g] = null;\n    _this144[_h] = null;\n    _this144[_j] = new ProgressTracker();\n\n    _this144[_k] = function (event) {\n      _this144.dispatchEvent(new CustomEvent('error', {\n        detail: {\n          type: 'webglcontextlost',\n          sourceError: event.sourceEvent\n        }\n      }));\n    }; // NOTE(cdata): It is *very important* to access this template first so that\n    // the ShadyCSS template preparation steps happen before element styling in\n    // IE11:\n\n\n    var template = _this144.constructor.template;\n\n    if (window.ShadyCSS) {\n      window.ShadyCSS.styleElement(_assertThisInitialized(_this144), {});\n    } // NOTE(cdata): The canonical ShadyCSS examples suggest that the Shadow Root\n    // should be created after the invocation of ShadyCSS.styleElement\n\n\n    _this144.attachShadow({\n      mode: 'open'\n    });\n\n    var shadowRoot = _this144.shadowRoot;\n    shadowRoot.appendChild(template.content.cloneNode(true));\n    _this144[$container] = shadowRoot.querySelector('.container');\n    _this144[$userInputElement] = shadowRoot.querySelector('.userInput');\n    _this144[$canvas] = shadowRoot.querySelector('canvas');\n    _this144[$defaultAriaLabel] = _this144[$userInputElement].getAttribute('aria-label'); // Because of potential race conditions related to invoking the constructor\n    // we only use the bounding rect to set the initial size if the element is\n    // already connected to the document:\n\n    var width, height;\n\n    if (_this144.isConnected) {\n      var rect = _this144.getBoundingClientRect();\n\n      width = rect.width;\n      height = rect.height;\n    } else {\n      width = UNSIZED_MEDIA_WIDTH;\n      height = UNSIZED_MEDIA_HEIGHT;\n    } // Create the underlying ModelScene.\n\n\n    _this144[$scene] = new ModelScene({\n      canvas: _this144[$canvas],\n      element: _assertThisInitialized(_this144),\n      width: width,\n      height: height\n    });\n\n    _this144[$scene].addEventListener('model-load', /*#__PURE__*/function () {\n      var _ref20 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee23(event) {\n        return _regeneratorRuntime.wrap(function _callee23$(_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                _this144[$markLoaded]();\n\n                _this144[$onModelLoad](); // Give loading async tasks a chance to complete.\n\n\n                _context24.next = 4;\n                return timePasses();\n\n              case 4:\n                _this144.dispatchEvent(new CustomEvent('load', {\n                  detail: {\n                    url: event.url\n                  }\n                }));\n\n              case 5:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee23);\n      }));\n\n      return function (_x32) {\n        return _ref20.apply(this, arguments);\n      };\n    }()); // Update initial size on microtask timing so that subclasses have a\n    // chance to initialize\n\n\n    Promise.resolve().then(function () {\n      _this144[$updateSize](_this144.getBoundingClientRect());\n    });\n\n    if (HAS_RESIZE_OBSERVER) {\n      // Set up a resize observer so we can scale our canvas\n      // if our <model-viewer> changes\n      _this144[$resizeObserver] = new ResizeObserver(function (entries) {\n        // Don't resize anything if in AR mode; otherwise the canvas\n        // scaling to fullscreen on entering AR will clobber the flat/2d\n        // dimensions of the element.\n        if (_this144[$renderer].isPresenting) {\n          return;\n        }\n\n        var _iterator29 = _createForOfIteratorHelper(entries),\n            _step29;\n\n        try {\n          for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n            var entry = _step29.value;\n\n            if (entry.target === _assertThisInitialized(_this144)) {\n              _this144[$updateSize](entry.contentRect);\n            }\n          }\n        } catch (err) {\n          _iterator29.e(err);\n        } finally {\n          _iterator29.f();\n        }\n      });\n    }\n\n    if (HAS_INTERSECTION_OBSERVER) {\n      _this144[$intersectionObserver] = new IntersectionObserver(function (entries) {\n        var _iterator30 = _createForOfIteratorHelper(entries),\n            _step30;\n\n        try {\n          for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n            var entry = _step30.value;\n\n            if (entry.target === _assertThisInitialized(_this144)) {\n              var oldVisibility = _this144.modelIsVisible;\n              _this144[$isElementInViewport] = entry.isIntersecting;\n\n              _this144[$announceModelVisibility](oldVisibility);\n\n              if (_this144[$isElementInViewport] && !_this144[$sceneIsReady]()) {\n                _this144[$updateSource]();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator30.e(err);\n        } finally {\n          _iterator30.f();\n        }\n      }, {\n        root: null,\n        // We used to have margin here, but it was causing animated models below\n        // the fold to steal the frame budget. Weirder still, it would also\n        // cause input events to be swallowed, sometimes for seconds on the\n        // model above the fold, but only when the animated model was completely\n        // below. Setting this margin to zero fixed it.\n        rootMargin: '0px',\n        threshold: 0\n      });\n    } else {\n      // If there is no intersection obsever, then all models should be visible\n      // at all times:\n      _this144[$isElementInViewport] = true;\n    }\n\n    return _this144;\n  }\n\n  _createClass(ModelViewerElementBase, [{\n    key: \"loaded\",\n    get:\n    /** @export */\n    function get() {\n      return this[$getLoaded]();\n    }\n  }, {\n    key: _ref18,\n    get: function get() {\n      return Renderer.singleton;\n    }\n    /** @export */\n\n  }, {\n    key: \"modelIsVisible\",\n    get: function get() {\n      return this[$getModelIsVisible]();\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      _get(_getPrototypeOf(ModelViewerElementBase.prototype), \"connectedCallback\", this) && _get(_getPrototypeOf(ModelViewerElementBase.prototype), \"connectedCallback\", this).call(this);\n\n      if (HAS_RESIZE_OBSERVER) {\n        this[$resizeObserver].observe(this);\n      } else {\n        self.addEventListener('resize', this[$fallbackResizeHandler]);\n      }\n\n      if (HAS_INTERSECTION_OBSERVER) {\n        this[$intersectionObserver].observe(this);\n      }\n\n      var renderer = this[$renderer];\n      renderer.addEventListener('contextlost', this[$onContextLost]);\n      renderer.registerScene(this[$scene]);\n\n      if (this[$clearModelTimeout] != null) {\n        self.clearTimeout(this[$clearModelTimeout]);\n        this[$clearModelTimeout] = null; // Force an update in case the model has been evicted from our GLTF cache\n        // @see https://lit-element.polymer-project.org/guide/lifecycle#requestupdate\n\n        this.requestUpdate('src', null);\n      }\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      var _this145 = this;\n\n      _get(_getPrototypeOf(ModelViewerElementBase.prototype), \"disconnectedCallback\", this) && _get(_getPrototypeOf(ModelViewerElementBase.prototype), \"disconnectedCallback\", this).call(this);\n\n      if (HAS_RESIZE_OBSERVER) {\n        this[$resizeObserver].unobserve(this);\n      } else {\n        self.removeEventListener('resize', this[$fallbackResizeHandler]);\n      }\n\n      if (HAS_INTERSECTION_OBSERVER) {\n        this[$intersectionObserver].unobserve(this);\n      }\n\n      var renderer = this[$renderer];\n      renderer.removeEventListener('contextlost', this[$onContextLost]);\n      renderer.unregisterScene(this[$scene]);\n      this[$clearModelTimeout] = self.setTimeout(function () {\n        _this145[$scene].reset();\n      }, CLEAR_MODEL_TIMEOUT_MS);\n    }\n  }, {\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      _get(_getPrototypeOf(ModelViewerElementBase.prototype), \"updated\", this).call(this, changedProperties); // NOTE(cdata): If a property changes from values A -> B -> A in the space\n      // of a microtask, LitElement/UpdatingElement will notify of a change even\n      // though the value has effectively not changed, so we need to check to make\n      // sure that the value has actually changed before changing the loaded flag.\n\n\n      if (changedProperties.has('src')) {\n        if (this.src == null) {\n          this[$loaded] = false;\n          this[$loadedTime] = 0;\n          this[$scene].reset();\n        } else if (this.src !== this[$scene].url) {\n          this[$loaded] = false;\n          this[$loadedTime] = 0;\n          this[$updateSource]();\n        }\n      }\n\n      if (changedProperties.has('alt')) {\n        var ariaLabel = this.alt == null ? this[$defaultAriaLabel] : this.alt;\n        this[$userInputElement].setAttribute('aria-label', ariaLabel);\n      }\n    }\n    /** @export */\n\n  }, {\n    key: \"toDataURL\",\n    value: function toDataURL(type, encoderOptions) {\n      return this[$renderer].displayCanvas(this[$scene]).toDataURL(type, encoderOptions);\n    }\n    /** @export */\n\n  }, {\n    key: \"toBlob\",\n    value: function () {\n      var _toBlob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee25(options) {\n        var _this146 = this;\n\n        var mimeType, qualityArgument, idealAspect, _this$$scene, width, height, fieldOfViewAspect, aspect, _this$$renderer, dpr, scaleFactor, outputWidth, outputHeight, offsetX, offsetY, oldHeight, oldWidth;\n\n        return _regeneratorRuntime.wrap(function _callee25$(_context26) {\n          while (1) {\n            switch (_context26.prev = _context26.next) {\n              case 0:\n                mimeType = options ? options.mimeType : undefined;\n                qualityArgument = options ? options.qualityArgument : undefined;\n                idealAspect = options ? options.idealAspect : undefined;\n                _this$$scene = this[$scene], width = _this$$scene.width, height = _this$$scene.height, fieldOfViewAspect = _this$$scene.fieldOfViewAspect, aspect = _this$$scene.aspect;\n                _this$$renderer = this[$renderer], dpr = _this$$renderer.dpr, scaleFactor = _this$$renderer.scaleFactor;\n                outputWidth = width * scaleFactor * dpr;\n                outputHeight = height * scaleFactor * dpr;\n                offsetX = 0;\n                offsetY = 0;\n\n                if (idealAspect === true) {\n                  if (fieldOfViewAspect > aspect) {\n                    oldHeight = outputHeight;\n                    outputHeight = Math.round(outputWidth / fieldOfViewAspect);\n                    offsetY = (oldHeight - outputHeight) / 2;\n                  } else {\n                    oldWidth = outputWidth;\n                    outputWidth = Math.round(outputHeight * fieldOfViewAspect);\n                    offsetX = (oldWidth - outputWidth) / 2;\n                  }\n                }\n\n                blobCanvas.width = outputWidth;\n                blobCanvas.height = outputHeight;\n                _context26.prev = 12;\n                return _context26.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee24(resolve, reject) {\n                    return _regeneratorRuntime.wrap(function _callee24$(_context25) {\n                      while (1) {\n                        switch (_context25.prev = _context25.next) {\n                          case 0:\n                            blobCanvas.getContext('2d').drawImage(_this146[$renderer].displayCanvas(_this146[$scene]), offsetX, offsetY, outputWidth, outputHeight, 0, 0, outputWidth, outputHeight);\n\n                            if (!blobCanvas.msToBlob) {\n                              _context25.next = 4;\n                              break;\n                            }\n\n                            if (!(!mimeType || mimeType === 'image/png')) {\n                              _context25.next = 4;\n                              break;\n                            }\n\n                            return _context25.abrupt(\"return\", resolve(blobCanvas.msToBlob()));\n\n                          case 4:\n                            if (blobCanvas.toBlob) {\n                              _context25.next = 10;\n                              break;\n                            }\n\n                            _context25.t0 = resolve;\n                            _context25.next = 8;\n                            return dataUrlToBlob(blobCanvas.toDataURL(mimeType, qualityArgument));\n\n                          case 8:\n                            _context25.t1 = _context25.sent;\n                            return _context25.abrupt(\"return\", (0, _context25.t0)(_context25.t1));\n\n                          case 10:\n                            blobCanvas.toBlob(function (blob) {\n                              if (!blob) {\n                                return reject(new Error('Unable to retrieve canvas blob'));\n                              }\n\n                              resolve(blob);\n                            }, mimeType, qualityArgument);\n\n                          case 11:\n                          case \"end\":\n                            return _context25.stop();\n                        }\n                      }\n                    }, _callee24);\n                  }));\n\n                  return function (_x34, _x35) {\n                    return _ref21.apply(this, arguments);\n                  };\n                }()));\n\n              case 14:\n                _context26.prev = 14;\n                this[$updateSize]({\n                  width: width,\n                  height: height\n                });\n                return _context26.finish(14);\n\n              case 17:\n              case \"end\":\n                return _context26.stop();\n            }\n          }\n        }, _callee25, this, [[12,, 14, 17]]);\n      }));\n\n      function toBlob(_x33) {\n        return _toBlob.apply(this, arguments);\n      }\n\n      return toBlob;\n    }()\n  }, {\n    key: \"registerRenderer\",\n    value: function registerRenderer(renderer) {\n      this[$scene].externalRenderer = renderer;\n    }\n  }, {\n    key: \"unregisterRenderer\",\n    value: function unregisterRenderer() {\n      this[$scene].externalRenderer = null;\n    }\n  }, {\n    key: $ariaLabel,\n    get: function get() {\n      return this.alt == null || this.alt === 'null' ? this[$defaultAriaLabel] : this.alt;\n    } // NOTE(cdata): Although this may seem extremely redundant, it is required in\n    // order to support overloading when TypeScript is compiled to ES5\n    // @see https://github.com/Polymer/lit-element/pull/745\n    // @see https://github.com/microsoft/TypeScript/issues/338\n\n  }, {\n    key: $getLoaded,\n    value: function value() {\n      return this[$loaded];\n    } // @see [$getLoaded]\n\n  }, {\n    key: $getModelIsVisible,\n    value: function value() {\n      return this.loaded && this[$isElementInViewport];\n    }\n  }, {\n    key: $hasTransitioned,\n    value: function value() {\n      return this.modelIsVisible;\n    }\n  }, {\n    key: $shouldAttemptPreload,\n    value: function value() {\n      return !!this.src && this[$isElementInViewport];\n    }\n  }, {\n    key: $sceneIsReady,\n    value: function value() {\n      return this[$loaded];\n    }\n    /**\n     * Called on initialization and when the resize observer fires.\n     */\n\n  }, {\n    key: $updateSize,\n    value: function value(_ref22) {\n      var width = _ref22.width,\n          height = _ref22.height;\n      this[$container].style.width = \"\".concat(width, \"px\");\n      this[$container].style.height = \"\".concat(height, \"px\");\n      this[$onResize]({\n        width: parseFloat(width),\n        height: parseFloat(height)\n      });\n    }\n  }, {\n    key: $tick,\n    value: function value(_time, _delta) {}\n  }, {\n    key: $markLoaded,\n    value: function value() {\n      if (this[$loaded]) {\n        return;\n      }\n\n      this[$loaded] = true;\n      this[$loadedTime] = performance.now();\n    }\n  }, {\n    key: $needsRender,\n    value: function value() {\n      this[$scene].isDirty = true;\n    }\n  }, {\n    key: $onModelLoad,\n    value: function value() {}\n  }, {\n    key: $onResize,\n    value: function value(e) {\n      this[$scene].setSize(e.width, e.height);\n    }\n    /**\n     * Parses the element for an appropriate source URL and\n     * sets the views to use the new model based off of the `preload`\n     * attribute.\n     */\n\n  }, {\n    key: _ref19,\n    value: function () {\n      var _value3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee26() {\n        var updateSourceProgress, source, detail;\n        return _regeneratorRuntime.wrap(function _callee26$(_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                if (!(this.loaded || !this[$shouldAttemptPreload]())) {\n                  _context27.next = 2;\n                  break;\n                }\n\n                return _context27.abrupt(\"return\");\n\n              case 2:\n                updateSourceProgress = this[$progressTracker].beginActivity();\n                source = this.src;\n                _context27.prev = 4;\n                _context27.next = 7;\n                return this[$scene].setSource(source, function (progress) {\n                  return updateSourceProgress(progress * 0.8);\n                });\n\n              case 7:\n                detail = {\n                  url: source\n                };\n                this.dispatchEvent(new CustomEvent('preload', {\n                  detail: detail\n                }));\n                _context27.next = 14;\n                break;\n\n              case 11:\n                _context27.prev = 11;\n                _context27.t0 = _context27[\"catch\"](4);\n                this.dispatchEvent(new CustomEvent('error', {\n                  detail: _context27.t0\n                }));\n\n              case 14:\n                _context27.prev = 14;\n                updateSourceProgress(0.9);\n                requestAnimationFrame(function () {\n                  requestAnimationFrame(function () {\n                    updateSourceProgress(1.0);\n                  });\n                });\n                return _context27.finish(14);\n\n              case 18:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee26, this, [[4, 11, 14, 18]]);\n      }));\n\n      function value() {\n        return _value3.apply(this, arguments);\n      }\n\n      return value;\n    }()\n  }], [{\n    key: \"is\",\n    get: function get() {\n      return 'model-viewer';\n    }\n    /** @nocollapse */\n\n  }, {\n    key: \"template\",\n    get: function get() {\n      if (!this.hasOwnProperty($template)) {\n        this[$template] = makeTemplate(this.is);\n      }\n\n      return this[$template];\n    }\n    /** @export */\n\n  }, {\n    key: \"modelCacheSize\",\n    get:\n    /** @export */\n    function get() {\n      return CachingGLTFLoader[$evictionPolicy].evictionThreshold;\n    }\n    /** @export */\n    ,\n    set: function set(value) {\n      CachingGLTFLoader[$evictionPolicy].evictionThreshold = value;\n    }\n  }, {\n    key: \"minimumRenderScale\",\n    get:\n    /** @export */\n    function get() {\n      return Renderer.singleton.minScale;\n    },\n    set: function set(value) {\n      if (value > 1) {\n        console.warn('<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.');\n      }\n\n      if (value <= 0) {\n        console.warn('<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25.');\n      }\n\n      Renderer.singleton.minScale = value;\n    }\n  }]);\n\n  return ModelViewerElementBase;\n}(UpdatingElement, (_a$6 = $isElementInViewport, _b$4 = $loaded, _c$2 = $loadedTime, _d$1 = $clearModelTimeout, _e = $fallbackResizeHandler, _f = $announceModelVisibility, _g = $resizeObserver, _h = $intersectionObserver, _j = $progressTracker, $renderer), (_k = $onContextLost, $updateSource));\n\n__decorate$6([property({\n  type: String\n})], ModelViewerElementBase.prototype, \"alt\", void 0);\n\n__decorate$6([property({\n  type: String\n})], ModelViewerElementBase.prototype, \"src\", void 0);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar MILLISECONDS_PER_SECOND = 1000.0;\nvar $changeAnimation = Symbol('changeAnimation');\nvar $paused = Symbol('paused');\n\nvar AnimationMixin = function AnimationMixin(ModelViewerElement) {\n  var _a;\n\n  var AnimationModelViewerElement = /*#__PURE__*/function (_ModelViewerElement2, _ref23) {\n    _inherits(AnimationModelViewerElement, _ModelViewerElement2);\n\n    var _super136 = _createSuper(AnimationModelViewerElement);\n\n    function AnimationModelViewerElement() {\n      var _this147;\n\n      _classCallCheck(this, AnimationModelViewerElement);\n\n      _this147 = _super136.apply(this, arguments);\n      _this147.autoplay = false;\n      _this147.animationName = undefined;\n      _this147.animationCrossfadeDuration = 300;\n      _this147[_a] = true;\n      return _this147;\n    }\n    /**\n     * Returns an array\n     */\n\n\n    _createClass(AnimationModelViewerElement, [{\n      key: \"availableAnimations\",\n      get: function get() {\n        if (this.loaded) {\n          return this[$scene].animationNames;\n        }\n\n        return [];\n      }\n    }, {\n      key: \"duration\",\n      get: function get() {\n        return this[$scene].duration;\n      }\n    }, {\n      key: \"paused\",\n      get: function get() {\n        return this[$paused];\n      }\n    }, {\n      key: \"currentTime\",\n      get: function get() {\n        return this[$scene].animationTime;\n      },\n      set: function set(value) {\n        this[$scene].animationTime = value;\n        this[$renderer].threeRenderer.shadowMap.needsUpdate = true;\n        this[$needsRender]();\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        if (this[$paused]) {\n          return;\n        }\n\n        this[$paused] = true;\n        this[$renderer].threeRenderer.shadowMap.autoUpdate = false;\n        this.dispatchEvent(new CustomEvent('pause'));\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        if (this[$paused] && this.availableAnimations.length > 0) {\n          this[$paused] = false;\n          this[$renderer].threeRenderer.shadowMap.autoUpdate = true;\n\n          if (!this[$scene].hasActiveAnimation) {\n            this[$changeAnimation]();\n          }\n\n          this.dispatchEvent(new CustomEvent('play'));\n        }\n      }\n    }, {\n      key: _ref23,\n      value: function value() {\n        _get(_getPrototypeOf(AnimationModelViewerElement.prototype), $onModelLoad, this).call(this);\n\n        this[$paused] = true;\n\n        if (this.autoplay) {\n          this[$changeAnimation]();\n          this.play();\n        }\n      }\n    }, {\n      key: $tick,\n      value: function value(_time, delta) {\n        _get(_getPrototypeOf(AnimationModelViewerElement.prototype), $tick, this).call(this, _time, delta);\n\n        if (this[$paused] || !this[$hasTransitioned]() && !this[$renderer].isPresenting) {\n          return;\n        }\n\n        this[$scene].updateAnimation(delta / MILLISECONDS_PER_SECOND);\n        this[$needsRender]();\n      }\n    }, {\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        _get(_getPrototypeOf(AnimationModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n        if (changedProperties.has('autoplay') && this.autoplay) {\n          this.play();\n        }\n\n        if (changedProperties.has('animationName')) {\n          this[$changeAnimation]();\n        }\n      }\n    }, {\n      key: $updateSource,\n      value: function () {\n        var _value4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee27() {\n          return _regeneratorRuntime.wrap(function _callee27$(_context28) {\n            while (1) {\n              switch (_context28.prev = _context28.next) {\n                case 0:\n                  // If we are loading a new model, we need to stop the animation of\n                  // the current one (if any is playing). Otherwise, we might lose\n                  // the reference to the scene root and running actions start to\n                  // throw exceptions and/or behave in unexpected ways:\n                  this[$scene].stopAnimation();\n                  return _context28.abrupt(\"return\", _get(_getPrototypeOf(AnimationModelViewerElement.prototype), $updateSource, this).call(this));\n\n                case 2:\n                case \"end\":\n                  return _context28.stop();\n              }\n            }\n          }, _callee27, this);\n        }));\n\n        function value() {\n          return _value4.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }, {\n      key: $changeAnimation,\n      value: function value() {\n        this[$scene].playAnimation(this.animationName, this.animationCrossfadeDuration / MILLISECONDS_PER_SECOND); // If we are currently paused, we need to force a render so that\n        // the scene updates to the first frame of the new animation\n\n        if (this[$paused]) {\n          this[$scene].updateAnimation(0);\n          this[$needsRender]();\n        }\n      }\n    }]);\n\n    return AnimationModelViewerElement;\n  }(ModelViewerElement, (_a = $paused, $onModelLoad));\n\n  __decorate$5([property({\n    type: Boolean\n  })], AnimationModelViewerElement.prototype, \"autoplay\", void 0);\n\n  __decorate$5([property({\n    type: String,\n    attribute: 'animation-name'\n  })], AnimationModelViewerElement.prototype, \"animationName\", void 0);\n\n  __decorate$5([property({\n    type: Number,\n    attribute: 'animation-crossfade-duration'\n  })], AnimationModelViewerElement.prototype, \"animationCrossfadeDuration\", void 0);\n\n  return AnimationModelViewerElement;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar $hotspotMap = Symbol('hotspotMap');\nvar $mutationCallback = Symbol('mutationCallback');\nvar $observer = Symbol('observer');\nvar $addHotspot = Symbol('addHotspot');\nvar $removeHotspot = Symbol('removeHotspot'); // Used internally by positionAndNormalFromPoint()\n\nvar pixelPosition = new Vector2();\nvar worldToModel = new Matrix4();\nvar worldToModelNormal = new Matrix3();\n/**\n * AnnotationMixin implements a declarative API to add hotspots and annotations.\n * Child elements of the <model-viewer> element that have a slot name that\n * begins with \"hotspot\" and data-position and data-normal attributes in\n * the format of the camera-target attribute will be added to the scene and\n * track the specified model coordinates.\n */\n\nvar AnnotationMixin = function AnnotationMixin(ModelViewerElement) {\n  var _a, _b, _c;\n\n  var AnnotationModelViewerElement = /*#__PURE__*/function (_ModelViewerElement3, _ref24) {\n    _inherits(AnnotationModelViewerElement, _ModelViewerElement3);\n\n    var _super137 = _createSuper(AnnotationModelViewerElement);\n\n    function AnnotationModelViewerElement() {\n      var _this148;\n\n      _classCallCheck(this, AnnotationModelViewerElement);\n\n      _this148 = _super137.apply(this, arguments);\n      _this148[_a] = new Map();\n\n      _this148[_b] = function (mutations) {\n        mutations.forEach(function (mutation) {\n          // NOTE: Be wary that in ShadyDOM cases, the MutationRecord\n          // only has addedNodes and removedNodes (and no other details).\n          if (!(mutation instanceof MutationRecord) || mutation.type === 'childList') {\n            mutation.addedNodes.forEach(function (node) {\n              _this148[$addHotspot](node);\n            });\n            mutation.removedNodes.forEach(function (node) {\n              _this148[$removeHotspot](node);\n            });\n\n            _this148[$needsRender]();\n          }\n        });\n      };\n\n      _this148[_c] = new MutationObserver(_this148[$mutationCallback]);\n      return _this148;\n    }\n\n    _createClass(AnnotationModelViewerElement, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(AnnotationModelViewerElement.prototype), \"connectedCallback\", this).call(this);\n\n        for (var _i364 = 0; _i364 < this.children.length; ++_i364) {\n          this[$addHotspot](this.children[_i364]);\n        }\n\n        var _self = self,\n            ShadyDOM = _self.ShadyDOM;\n\n        if (ShadyDOM == null) {\n          this[$observer].observe(this, {\n            childList: true\n          });\n        } else {\n          this[$observer] = ShadyDOM.observeChildren(this, this[$mutationCallback]);\n        }\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(AnnotationModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        var _self2 = self,\n            ShadyDOM = _self2.ShadyDOM;\n\n        if (ShadyDOM == null) {\n          this[$observer].disconnect();\n        } else {\n          ShadyDOM.unobserveChildren(this[$observer]);\n        }\n      }\n    }, {\n      key: _ref24,\n      value: function value(time, delta) {\n        _get(_getPrototypeOf(AnnotationModelViewerElement.prototype), $tick, this).call(this, time, delta);\n\n        var scene = this[$scene];\n        var annotationRenderer = scene.annotationRenderer;\n        var camera = scene.getCamera();\n\n        if (scene.isDirty) {\n          scene.updateHotspots(camera.position);\n          annotationRenderer.domElement.style.display = '';\n          annotationRenderer.render(scene, camera);\n        }\n      }\n      /**\n       * Since the data-position and data-normal attributes are not observed, use\n       * this method to move a hotspot. Keep in mind that all hotspots with the\n       * same slot name use a single location and the first definition takes\n       * precedence, until updated with this method.\n       */\n\n    }, {\n      key: \"updateHotspot\",\n      value: function updateHotspot(config) {\n        var hotspot = this[$hotspotMap].get(config.name);\n\n        if (hotspot == null) {\n          return;\n        }\n\n        hotspot.updatePosition(config.position);\n        hotspot.updateNormal(config.normal);\n        this[$needsRender]();\n      }\n      /**\n       * This method returns the model position and normal of the point on the\n       * mesh corresponding to the input pixel coordinates given relative to the\n       * model-viewer element. The position and normal are returned as strings in\n       * the format suitable for putting in a hotspot's data-position and\n       * data-normal attributes. If the mesh is not hit, the result is null.\n       */\n\n    }, {\n      key: \"positionAndNormalFromPoint\",\n      value: function positionAndNormalFromPoint(pixelX, pixelY) {\n        var scene = this[$scene];\n        var width = scene.width,\n            height = scene.height,\n            target = scene.target;\n        pixelPosition.set(pixelX / width, pixelY / height).multiplyScalar(2).subScalar(1);\n        pixelPosition.y *= -1;\n        var hit = scene.positionAndNormalFromPoint(pixelPosition);\n\n        if (hit == null) {\n          return null;\n        }\n\n        worldToModel.copy(target.matrixWorld).invert();\n        var position = toVector3D(hit.position.applyMatrix4(worldToModel));\n        worldToModelNormal.getNormalMatrix(worldToModel);\n        var normal = toVector3D(hit.normal.applyNormalMatrix(worldToModelNormal));\n        return {\n          position: position,\n          normal: normal\n        };\n      }\n    }, {\n      key: $addHotspot,\n      value: function value(node) {\n        if (!(node instanceof HTMLElement && node.slot.indexOf('hotspot') === 0)) {\n          return;\n        }\n\n        var hotspot = this[$hotspotMap].get(node.slot);\n\n        if (hotspot != null) {\n          hotspot.increment();\n        } else {\n          hotspot = new Hotspot({\n            name: node.slot,\n            position: node.dataset.position,\n            normal: node.dataset.normal\n          });\n          this[$hotspotMap].set(node.slot, hotspot);\n          this[$scene].addHotspot(hotspot);\n        }\n\n        this[$scene].isDirty = true;\n      }\n    }, {\n      key: $removeHotspot,\n      value: function value(node) {\n        if (!(node instanceof HTMLElement)) {\n          return;\n        }\n\n        var hotspot = this[$hotspotMap].get(node.slot);\n\n        if (!hotspot) {\n          return;\n        }\n\n        if (hotspot.decrement()) {\n          this[$scene].removeHotspot(hotspot);\n          this[$hotspotMap].delete(node.slot);\n        }\n\n        this[$scene].isDirty = true;\n      }\n    }]);\n\n    return AnnotationModelViewerElement;\n  }(ModelViewerElement, (_a = $hotspotMap, _b = $mutationCallback, _c = $observer, $tick));\n\n  return AnnotationModelViewerElement;\n};\n/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.6.9\n*/\n\n\nvar durl = function durl(c) {\n  return URL.createObjectURL(new Blob([c], {\n    type: 'text/javascript'\n  }));\n};\n\ntry {\n  URL.revokeObjectURL(durl(''));\n} catch (e) {\n  // We're in Deno or a very old browser\n  durl = function durl(c) {\n    return 'data:application/javascript;charset=UTF-8,' + encodeURI(c);\n  };\n} // aliases for shorter compressed code (most minifers don't do this)\n\n\nvar u8 = Uint8Array,\n    u16 = Uint16Array,\n    u32 = Uint32Array; // fixed length extra bits\n\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0,\n/* unused */\n0, 0,\n/* impossible */\n0]); // fixed distance extra bits\n// see fleb note\n\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13,\n/* unused */\n0, 0]); // code length index map\n\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]); // get base, reverse index map from extra bits\n\nvar freb = function freb(eb, start) {\n  var b = new u16(31);\n\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  } // numbers here are at max 18 bits\n\n\n  var r = new u32(b[30]);\n\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n\n  return [b, r];\n};\n\nvar _a$5 = freb(fleb, 2),\n    fl = _a$5[0],\n    revfl = _a$5[1]; // we can ignore the fact that the other numbers are wrong; they never happen anyway\n\n\nfl[28] = 258, revfl[258] = 28;\n\nvar _b$3 = freb(fdeb, 0),\n    revfd = _b$3[1]; // map of value to reverse (assuming 16 bits)\n\n\nvar rev = new u16(32768);\n\nfor (var i = 0; i < 32768; ++i) {\n  // reverse table algorithm from SO\n  var x = (i & 0xAAAA) >>> 1 | (i & 0x5555) << 1;\n  x = (x & 0xCCCC) >>> 2 | (x & 0x3333) << 2;\n  x = (x & 0xF0F0) >>> 4 | (x & 0x0F0F) << 4;\n  rev[i] = ((x & 0xFF00) >>> 8 | (x & 0x00FF) << 8) >>> 1;\n} // create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\n\n\nvar hMap = function hMap(cd, mb, r) {\n  var s = cd.length; // index\n\n  var i = 0; // u16 \"map\": index -> # of codes with bit length = index\n\n  var l = new u16(mb); // length of cd must be 288 (total # of codes)\n\n  for (; i < s; ++i) {\n    ++l[cd[i] - 1];\n  } // u16 \"map\": index -> minimum code for bit length = index\n\n\n  var le = new u16(mb);\n\n  for (i = 0; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n\n  var co;\n\n  if (r) {\n    // u16 \"map\": index -> number of actual bits, symbol for code\n    co = new u16(1 << mb); // bits to remove for reverser\n\n    var rvb = 15 - mb;\n\n    for (i = 0; i < s; ++i) {\n      // ignore 0 lengths\n      if (cd[i]) {\n        // num encoding both symbol and bits read\n        var sv = i << 4 | cd[i]; // free bits\n\n        var r_1 = mb - cd[i]; // start value\n\n        var v = le[cd[i] - 1]++ << r_1; // m is end value\n\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          // every 16 bit value starting with the code yields the same result\n          co[rev[v] >>> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        co[i] = rev[le[cd[i] - 1]++] >>> 15 - cd[i];\n      }\n    }\n  }\n\n  return co;\n}; // fixed length tree\n\n\nvar flt = new u8(288);\n\nfor (var i = 0; i < 144; ++i) {\n  flt[i] = 8;\n}\n\nfor (var i = 144; i < 256; ++i) {\n  flt[i] = 9;\n}\n\nfor (var i = 256; i < 280; ++i) {\n  flt[i] = 7;\n}\n\nfor (var i = 280; i < 288; ++i) {\n  flt[i] = 8;\n} // fixed distance tree\n\n\nvar fdt = new u8(32);\n\nfor (var i = 0; i < 32; ++i) {\n  fdt[i] = 5;\n} // fixed length map\n\n\nvar flm = /*#__PURE__*/hMap(flt, 9, 0); // fixed distance map\n\nvar fdm = /*#__PURE__*/hMap(fdt, 5, 0); // get end of byte\n\nvar shft = function shft(p) {\n  return (p / 8 | 0) + (p & 7 && 1);\n}; // typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\n\n\nvar slc = function slc(v, s, e) {\n  if (s == null || s < 0) s = 0;\n  if (e == null || e > v.length) e = v.length; // can't use .constructor in case user-supplied\n\n  var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n}; // starting at p, write the minimum number of bits that can hold v to d\n\n\nvar wbits = function wbits(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n}; // starting at p, write the minimum number of bits (>8) that can hold v to d\n\n\nvar wbits16 = function wbits16(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n  d[o + 2] |= v >>> 16;\n}; // creates code lengths from a frequency table\n\n\nvar hTree = function hTree(d, mb) {\n  // Need extra info to make a tree\n  var t = [];\n\n  for (var i = 0; i < d.length; ++i) {\n    if (d[i]) t.push({\n      s: i,\n      f: d[i]\n    });\n  }\n\n  var s = t.length;\n  var t2 = t.slice();\n  if (!s) return [et, 0];\n\n  if (s == 1) {\n    var v = new u8(t[0].s + 1);\n    v[t[0].s] = 1;\n    return [v, 1];\n  }\n\n  t.sort(function (a, b) {\n    return a.f - b.f;\n  }); // after i2 reaches last ind, will be stopped\n  // freq must be greater than largest possible number of symbols\n\n  t.push({\n    s: -1,\n    f: 25001\n  });\n  var l = t[0],\n      r = t[1],\n      i0 = 0,\n      i1 = 1,\n      i2 = 2;\n  t[0] = {\n    s: -1,\n    f: l.f + r.f,\n    l: l,\n    r: r\n  }; // efficient algorithm from UZIP.js\n  // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n  // symbols that combined have high freq, will start processing i2 (high-freq,\n  // non-composite) symbols instead\n  // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n\n  while (i1 != s - 1) {\n    l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n    r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n    t[i1++] = {\n      s: -1,\n      f: l.f + r.f,\n      l: l,\n      r: r\n    };\n  }\n\n  var maxSym = t2[0].s;\n\n  for (var i = 1; i < s; ++i) {\n    if (t2[i].s > maxSym) maxSym = t2[i].s;\n  } // code lengths\n\n\n  var tr = new u16(maxSym + 1); // max bits in tree\n\n  var mbt = ln(t[i1 - 1], tr, 0);\n\n  if (mbt > mb) {\n    // more algorithms from UZIP.js\n    // TODO: find out how this code works (debt)\n    //  ind    debt\n    var i = 0,\n        dt = 0; //    left            cost\n\n    var lft = mbt - mb,\n        cst = 1 << lft;\n    t2.sort(function (a, b) {\n      return tr[b.s] - tr[a.s] || a.f - b.f;\n    });\n\n    for (; i < s; ++i) {\n      var i2_1 = t2[i].s;\n\n      if (tr[i2_1] > mb) {\n        dt += cst - (1 << mbt - tr[i2_1]);\n        tr[i2_1] = mb;\n      } else break;\n    }\n\n    dt >>>= lft;\n\n    while (dt > 0) {\n      var i2_2 = t2[i].s;\n      if (tr[i2_2] < mb) dt -= 1 << mb - tr[i2_2]++ - 1;else ++i;\n    }\n\n    for (; i >= 0 && dt; --i) {\n      var i2_3 = t2[i].s;\n\n      if (tr[i2_3] == mb) {\n        --tr[i2_3];\n        ++dt;\n      }\n    }\n\n    mbt = mb;\n  }\n\n  return [new u8(tr), mbt];\n}; // get the max length and assign length codes\n\n\nvar ln = function ln(n, l, d) {\n  return n.s == -1 ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1)) : l[n.s] = d;\n}; // length codes generation\n\n\nvar lc = function lc(c) {\n  var s = c.length; // Note that the semicolon was intentional\n\n  while (s && !c[--s]) {\n    ;\n  }\n\n  var cl = new u16(++s); //  ind      num         streak\n\n  var cli = 0,\n      cln = c[0],\n      cls = 1;\n\n  var w = function w(v) {\n    cl[cli++] = v;\n  };\n\n  for (var i = 1; i <= s; ++i) {\n    if (c[i] == cln && i != s) ++cls;else {\n      if (!cln && cls > 2) {\n        for (; cls > 138; cls -= 138) {\n          w(32754);\n        }\n\n        if (cls > 2) {\n          w(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);\n          cls = 0;\n        }\n      } else if (cls > 3) {\n        w(cln), --cls;\n\n        for (; cls > 6; cls -= 6) {\n          w(8304);\n        }\n\n        if (cls > 2) w(cls - 3 << 5 | 8208), cls = 0;\n      }\n\n      while (cls--) {\n        w(cln);\n      }\n\n      cls = 1;\n      cln = c[i];\n    }\n  }\n\n  return [cl.subarray(0, cli), s];\n}; // calculate the length of output from tree, code lengths\n\n\nvar clen = function clen(cf, cl) {\n  var l = 0;\n\n  for (var i = 0; i < cl.length; ++i) {\n    l += cf[i] * cl[i];\n  }\n\n  return l;\n}; // writes a fixed block\n// returns the new bit pos\n\n\nvar wfblk = function wfblk(out, pos, dat) {\n  // no need to write 00 as type: TypedArray defaults to 0\n  var s = dat.length;\n  var o = shft(pos + 2);\n  out[o] = s & 255;\n  out[o + 1] = s >>> 8;\n  out[o + 2] = out[o] ^ 255;\n  out[o + 3] = out[o + 1] ^ 255;\n\n  for (var i = 0; i < s; ++i) {\n    out[o + i + 4] = dat[i];\n  }\n\n  return (o + 4 + s) * 8;\n}; // writes a block\n\n\nvar wblk = function wblk(dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n  wbits(out, p++, final);\n  ++lf[256];\n\n  var _a = hTree(lf, 15),\n      dlt = _a[0],\n      mlb = _a[1];\n\n  var _b = hTree(df, 15),\n      ddt = _b[0],\n      mdb = _b[1];\n\n  var _c = lc(dlt),\n      lclt = _c[0],\n      nlc = _c[1];\n\n  var _d = lc(ddt),\n      lcdt = _d[0],\n      ndc = _d[1];\n\n  var lcfreq = new u16(19);\n\n  for (var i = 0; i < lclt.length; ++i) {\n    lcfreq[lclt[i] & 31]++;\n  }\n\n  for (var i = 0; i < lcdt.length; ++i) {\n    lcfreq[lcdt[i] & 31]++;\n  }\n\n  var _e = hTree(lcfreq, 7),\n      lct = _e[0],\n      mlcb = _e[1];\n\n  var nlcc = 19;\n\n  for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc) {\n    ;\n  }\n\n  var flen = bl + 5 << 3;\n  var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n  var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n  if (flen <= ftlen && flen <= dtlen) return wfblk(out, p, dat.subarray(bs, bs + bl));\n  var lm, ll, dm, dl;\n  wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n\n  if (dtlen < ftlen) {\n    lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n    var llm = hMap(lct, mlcb, 0);\n    wbits(out, p, nlc - 257);\n    wbits(out, p + 5, ndc - 1);\n    wbits(out, p + 10, nlcc - 4);\n    p += 14;\n\n    for (var i = 0; i < nlcc; ++i) {\n      wbits(out, p + 3 * i, lct[clim[i]]);\n    }\n\n    p += 3 * nlcc;\n    var lcts = [lclt, lcdt];\n\n    for (var it = 0; it < 2; ++it) {\n      var clct = lcts[it];\n\n      for (var i = 0; i < clct.length; ++i) {\n        var len = clct[i] & 31;\n        wbits(out, p, llm[len]), p += lct[len];\n        if (len > 15) wbits(out, p, clct[i] >>> 5 & 127), p += clct[i] >>> 12;\n      }\n    }\n  } else {\n    lm = flm, ll = flt, dm = fdm, dl = fdt;\n  }\n\n  for (var i = 0; i < li; ++i) {\n    if (syms[i] > 255) {\n      var len = syms[i] >>> 18 & 31;\n      wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n      if (len > 7) wbits(out, p, syms[i] >>> 23 & 31), p += fleb[len];\n      var dst = syms[i] & 31;\n      wbits16(out, p, dm[dst]), p += dl[dst];\n      if (dst > 3) wbits16(out, p, syms[i] >>> 5 & 8191), p += fdeb[dst];\n    } else {\n      wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n    }\n  }\n\n  wbits16(out, p, lm[256]);\n  return p + ll[256];\n}; // deflate options (nice << 13) | chain\n\n\nvar deo = /*#__PURE__*/new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]); // empty\n\nvar et = /*#__PURE__*/new u8(0); // compresses data into a raw DEFLATE buffer\n\nvar dflt = function dflt(dat, lvl, plvl, pre, post, lst) {\n  var s = dat.length;\n  var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post); // writing to this writes to the output buffer\n\n  var w = o.subarray(pre, o.length - post);\n  var pos = 0;\n\n  if (!lvl || s < 8) {\n    for (var i = 0; i <= s; i += 65535) {\n      // end\n      var e = i + 65535;\n\n      if (e < s) {\n        // write full block\n        pos = wfblk(w, pos, dat.subarray(i, e));\n      } else {\n        // write final block\n        w[i] = lst;\n        pos = wfblk(w, pos, dat.subarray(i, s));\n      }\n    }\n  } else {\n    var opt = deo[lvl - 1];\n    var n = opt >>> 13,\n        c = opt & 8191;\n    var msk_1 = (1 << plvl) - 1; //    prev 2-byte val map    curr 2-byte val map\n\n    var prev = new u16(32768),\n        head = new u16(msk_1 + 1);\n    var bs1_1 = Math.ceil(plvl / 3),\n        bs2_1 = 2 * bs1_1;\n\n    var hsh = function hsh(i) {\n      return (dat[i] ^ dat[i + 1] << bs1_1 ^ dat[i + 2] << bs2_1) & msk_1;\n    }; // 24576 is an arbitrary number of maximum symbols per block\n    // 424 buffer for last block\n\n\n    var syms = new u32(25000); // length/literal freq   distance freq\n\n    var lf = new u16(288),\n        df = new u16(32); //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n\n    var lc_1 = 0,\n        eb = 0,\n        i = 0,\n        li = 0,\n        wi = 0,\n        bs = 0;\n\n    for (; i < s; ++i) {\n      // hash value\n      // deopt when i > s - 3 - at end, deopt acceptable\n      var hv = hsh(i); // index mod 32768    previous index mod\n\n      var imod = i & 32767,\n          pimod = head[hv];\n      prev[imod] = pimod;\n      head[hv] = imod; // We always should modify head and prev, but only add symbols if\n      // this data is not yet processed (\"wait\" for wait index)\n\n      if (wi <= i) {\n        // bytes remaining\n        var rem = s - i;\n\n        if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n          pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n          li = lc_1 = eb = 0, bs = i;\n\n          for (var j = 0; j < 286; ++j) {\n            lf[j] = 0;\n          }\n\n          for (var j = 0; j < 30; ++j) {\n            df[j] = 0;\n          }\n        } //  len    dist   chain\n\n\n        var l = 2,\n            d = 0,\n            ch_1 = c,\n            dif = imod - pimod & 32767;\n\n        if (rem > 2 && hv == hsh(i - dif)) {\n          var maxn = Math.min(n, rem) - 1;\n          var maxd = Math.min(32767, i); // max possible length\n          // not capped at dif because decompressors implement \"rolling\" index population\n\n          var ml = Math.min(258, rem);\n\n          while (dif <= maxd && --ch_1 && imod != pimod) {\n            if (dat[i + l] == dat[i + l - dif]) {\n              var nl = 0;\n\n              for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl) {\n                ;\n              }\n\n              if (nl > l) {\n                l = nl, d = dif; // break out early when we reach \"nice\" (we are satisfied enough)\n\n                if (nl > maxn) break; // now, find the rarest 2-byte sequence within this\n                // length of literals and search for that instead.\n                // Much faster than just using the start\n\n                var mmd = Math.min(dif, nl - 2);\n                var md = 0;\n\n                for (var j = 0; j < mmd; ++j) {\n                  var ti = i - dif + j + 32768 & 32767;\n                  var pti = prev[ti];\n                  var cd = ti - pti + 32768 & 32767;\n                  if (cd > md) md = cd, pimod = ti;\n                }\n              }\n            } // check the previous match\n\n\n            imod = pimod, pimod = prev[imod];\n            dif += imod - pimod + 32768 & 32767;\n          }\n        } // d will be nonzero only when a match was found\n\n\n        if (d) {\n          // store both dist and len data in one Uint32\n          // Make sure this is recognized as a len/dist with 28th bit (2^28)\n          syms[li++] = 268435456 | revfl[l] << 18 | revfd[d];\n          var lin = revfl[l] & 31,\n              din = revfd[d] & 31;\n          eb += fleb[lin] + fdeb[din];\n          ++lf[257 + lin];\n          ++df[din];\n          wi = i + l;\n          ++lc_1;\n        } else {\n          syms[li++] = dat[i];\n          ++lf[dat[i]];\n        }\n      }\n    }\n\n    pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos); // this is the easiest way to avoid needing to maintain state\n\n    if (!lst && pos & 7) pos = wfblk(w, pos + 1, et);\n  }\n\n  return slc(o, 0, pre + shft(pos) + post);\n}; // CRC32 table\n\n\nvar crct = /*#__PURE__*/function () {\n  var t = new u32(256);\n\n  for (var i = 0; i < 256; ++i) {\n    var c = i,\n        k = 9;\n\n    while (--k) {\n      c = (c & 1 && 0xEDB88320) ^ c >>> 1;\n    }\n\n    t[i] = c;\n  }\n\n  return t;\n}(); // CRC32\n\n\nvar crc = function crc() {\n  var c = -1;\n  return {\n    p: function p(d) {\n      // closures have awful performance\n      var cr = c;\n\n      for (var i = 0; i < d.length; ++i) {\n        cr = crct[cr & 255 ^ d[i]] ^ cr >>> 8;\n      }\n\n      c = cr;\n    },\n    d: function d() {\n      return ~c;\n    }\n  };\n}; // deflate with opts\n\n\nvar dopt = function dopt(dat, opt, pre, post, st) {\n  return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 12 + opt.mem, pre, post, !st);\n}; // Walmart object spread\n\n\nvar mrg = function mrg(a, b) {\n  var o = {};\n\n  for (var k in a) {\n    o[k] = a[k];\n  }\n\n  for (var k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}; // write bytes\n\n\nvar wbytes = function wbytes(d, b, v) {\n  for (; v; ++b) {\n    d[b] = v, v >>>= 8;\n  }\n};\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\n\n\nfunction deflateSync(data, opts) {\n  return dopt(data, opts || {}, 0, 0);\n} // flatten a directory structure\n\n\nvar fltn = function fltn(d, p, t, o) {\n  for (var k in d) {\n    var val = d[k],\n        n = p + k;\n    if (val instanceof u8) t[n] = [val, o];else if (Array.isArray(val)) t[n] = [val[0], mrg(o, val[1])];else fltn(val, n + '/', t, o);\n  }\n}; // text encoder\n\n\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/new TextEncoder(); // text decoder\n\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/new TextDecoder(); // text decoder stream\n\nvar tds = 0;\n\ntry {\n  td.decode(et, {\n    stream: true\n  });\n  tds = 1;\n} catch (e) {}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\n\n\nfunction strToU8(str, latin1) {\n  if (latin1) {\n    var ar_1 = new u8(str.length);\n\n    for (var i = 0; i < str.length; ++i) {\n      ar_1[i] = str.charCodeAt(i);\n    }\n\n    return ar_1;\n  }\n\n  if (te) return te.encode(str);\n  var l = str.length;\n  var ar = new u8(str.length + (str.length >> 1));\n  var ai = 0;\n\n  var w = function w(v) {\n    ar[ai++] = v;\n  };\n\n  for (var i = 0; i < l; ++i) {\n    if (ai + 5 > ar.length) {\n      var n = new u8(ai + 8 + (l - i << 1));\n      n.set(ar);\n      ar = n;\n    }\n\n    var c = str.charCodeAt(i);\n    if (c < 128 || latin1) w(c);else if (c < 2048) w(192 | c >> 6), w(128 | c & 63);else if (c > 55295 && c < 57344) c = 65536 + (c & 1023 << 10) | str.charCodeAt(++i) & 1023, w(240 | c >> 18), w(128 | c >> 12 & 63), w(128 | c >> 6 & 63), w(128 | c & 63);else w(224 | c >> 12), w(128 | c >> 6 & 63), w(128 | c & 63);\n  }\n\n  return slc(ar, 0, ai);\n} // extra field length\n\n\nvar exfl = function exfl(ex) {\n  var le = 0;\n\n  if (ex) {\n    for (var k in ex) {\n      var l = ex[k].length;\n      if (l > 65535) throw 'extra field too long';\n      le += l + 4;\n    }\n  }\n\n  return le;\n}; // write zip header\n\n\nvar wzh = function wzh(d, b, f, fn, u, c, ce, co) {\n  var fl = fn.length,\n      ex = f.extra,\n      col = co && co.length;\n  var exl = exfl(ex);\n  wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n  if (ce != null) d[b++] = 20, d[b++] = f.os;\n  d[b] = 20, b += 2; // spec compliance? what's that?\n\n  d[b++] = f.flag << 1 | (c == null && 8), d[b++] = u && 8;\n  d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n  var dt = new Date(f.mtime == null ? Date.now() : f.mtime),\n      y = dt.getFullYear() - 1980;\n  if (y < 0 || y > 119) throw 'date not in range 1980-2099';\n  wbytes(d, b, y << 25 | dt.getMonth() + 1 << 21 | dt.getDate() << 16 | dt.getHours() << 11 | dt.getMinutes() << 5 | dt.getSeconds() >>> 1), b += 4;\n\n  if (c != null) {\n    wbytes(d, b, f.crc);\n    wbytes(d, b + 4, c);\n    wbytes(d, b + 8, f.size);\n  }\n\n  wbytes(d, b + 12, fl);\n  wbytes(d, b + 14, exl), b += 16;\n\n  if (ce != null) {\n    wbytes(d, b, col);\n    wbytes(d, b + 6, f.attrs);\n    wbytes(d, b + 10, ce), b += 14;\n  }\n\n  d.set(fn, b);\n  b += fl;\n\n  if (exl) {\n    for (var k in ex) {\n      var exf = ex[k],\n          l = exf.length;\n      wbytes(d, b, +k);\n      wbytes(d, b + 2, l);\n      d.set(exf, b + 4), b += 4 + l;\n    }\n  }\n\n  if (col) d.set(co, b), b += col;\n  return b;\n}; // write zip footer (end of central directory)\n\n\nvar wzf = function wzf(o, b, c, d, e) {\n  wbytes(o, b, 0x6054B50); // skip disk\n\n  wbytes(o, b + 8, c);\n  wbytes(o, b + 10, c);\n  wbytes(o, b + 12, d);\n  wbytes(o, b + 16, e);\n};\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\n\n\nfunction zipSync(data, opts) {\n  if (!opts) opts = {};\n  var r = {};\n  var files = [];\n  fltn(data, '', r, opts);\n  var o = 0;\n  var tot = 0;\n\n  for (var fn in r) {\n    var _a = r[fn],\n        file = _a[0],\n        p = _a[1];\n    var compression = p.level == 0 ? 0 : 8;\n    var f = strToU8(fn),\n        s = f.length;\n    var com = p.comment,\n        m = com && strToU8(com),\n        ms = m && m.length;\n    var exl = exfl(p.extra);\n    if (s > 65535) throw 'filename too long';\n    var d = compression ? deflateSync(file, p) : file,\n        l = d.length;\n    var c = crc();\n    c.p(file);\n    files.push(mrg(p, {\n      size: file.length,\n      crc: c.d(),\n      c: d,\n      f: f,\n      m: m,\n      u: s != fn.length || m && com.length != ms,\n      o: o,\n      compression: compression\n    }));\n    o += 30 + s + exl + l;\n    tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n  }\n\n  var out = new u8(tot + 22),\n      oe = o,\n      cdl = tot - o;\n\n  for (var i = 0; i < files.length; ++i) {\n    var f = files[i];\n    wzh(out, f.o, f, f.f, f.u, f.c.length);\n    var badd = 30 + f.f.length + exfl(f.extra);\n    out.set(f.c, f.o + badd);\n    wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n  }\n\n  wzf(out, o, files.length, cdl, oe);\n  return out;\n}\n\nvar USDZExporter = /*#__PURE__*/function () {\n  function USDZExporter() {\n    _classCallCheck(this, USDZExporter);\n  }\n\n  _createClass(USDZExporter, [{\n    key: \"parse\",\n    value: function () {\n      var _parse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee28(scene) {\n        var files, modelFileName, output, materials, textures, _loop4, id, offset, filename, file, headerSize, offsetMod64, padLength, padding;\n\n        return _regeneratorRuntime.wrap(function _callee28$(_context30) {\n          while (1) {\n            switch (_context30.prev = _context30.next) {\n              case 0:\n                files = {};\n                modelFileName = 'model.usda'; // model file should be first in USDZ archive so we init it here\n\n                files[modelFileName] = null;\n                output = buildHeader();\n                materials = {};\n                textures = {};\n                scene.traverseVisible(function (object) {\n                  if (object.isMesh && object.material.isMeshStandardMaterial) {\n                    var geometry = object.geometry;\n                    var material = object.material;\n                    var geometryFileName = 'geometries/Geometry_' + geometry.id + '.usd';\n\n                    if (!(geometryFileName in files)) {\n                      var meshObject = buildMeshObject(geometry);\n                      files[geometryFileName] = buildUSDFileAsString(meshObject);\n                    }\n\n                    if (!(material.uuid in materials)) {\n                      materials[material.uuid] = material;\n                    }\n\n                    output += buildXform(object, geometry, material);\n                  }\n                });\n                output += buildMaterials(materials, textures);\n                files[modelFileName] = strToU8(output);\n                output = null;\n                _loop4 = /*#__PURE__*/_regeneratorRuntime.mark(function _loop4(id) {\n                  var texture, color, isRGBA, canvas, blob;\n                  return _regeneratorRuntime.wrap(function _loop4$(_context29) {\n                    while (1) {\n                      switch (_context29.prev = _context29.next) {\n                        case 0:\n                          texture = textures[id];\n                          color = id.split('_')[1];\n                          isRGBA = texture.format === 1023;\n                          canvas = imageToCanvas(texture.image, color);\n                          _context29.next = 6;\n                          return new Promise(function (resolve) {\n                            return canvas.toBlob(resolve, isRGBA ? 'image/png' : 'image/jpeg', 1);\n                          });\n\n                        case 6:\n                          blob = _context29.sent;\n                          _context29.t0 = Uint8Array;\n                          _context29.next = 10;\n                          return blob.arrayBuffer();\n\n                        case 10:\n                          _context29.t1 = _context29.sent;\n                          files[\"textures/Texture_\".concat(id, \".\").concat(isRGBA ? 'png' : 'jpg')] = new _context29.t0(_context29.t1);\n\n                        case 12:\n                        case \"end\":\n                          return _context29.stop();\n                      }\n                    }\n                  }, _loop4);\n                });\n                _context30.t0 = _regeneratorRuntime.keys(textures);\n\n              case 12:\n                if ((_context30.t1 = _context30.t0()).done) {\n                  _context30.next = 17;\n                  break;\n                }\n\n                id = _context30.t1.value;\n                return _context30.delegateYield(_loop4(id), \"t2\", 15);\n\n              case 15:\n                _context30.next = 12;\n                break;\n\n              case 17:\n                // 64 byte alignment\n                // https://github.com/101arrowz/fflate/issues/39#issuecomment-777263109\n                offset = 0;\n\n                for (filename in files) {\n                  file = files[filename];\n                  headerSize = 34 + filename.length;\n                  offset += headerSize;\n                  offsetMod64 = offset & 63;\n\n                  if (offsetMod64 !== 4) {\n                    padLength = 64 - offsetMod64;\n                    padding = new Uint8Array(padLength);\n                    files[filename] = [file, {\n                      extra: {\n                        12345: padding\n                      }\n                    }];\n                  }\n\n                  offset = file.length;\n                }\n\n                return _context30.abrupt(\"return\", zipSync(files, {\n                  level: 0\n                }));\n\n              case 20:\n              case \"end\":\n                return _context30.stop();\n            }\n          }\n        }, _callee28);\n      }));\n\n      function parse(_x36) {\n        return _parse.apply(this, arguments);\n      }\n\n      return parse;\n    }()\n  }]);\n\n  return USDZExporter;\n}();\n\nfunction imageToCanvas(image, color) {\n  if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    var scale = 1024 / Math.max(image.width, image.height);\n    var canvas = document.createElement('canvas');\n    canvas.width = image.width * Math.min(1, scale);\n    canvas.height = image.height * Math.min(1, scale);\n    var context = canvas.getContext('2d');\n    context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n    if (color !== undefined) {\n      var hex = parseInt(color, 16);\n\n      var _r3 = (hex >> 16 & 255) / 255;\n\n      var g = (hex >> 8 & 255) / 255;\n      var b = (hex & 255) / 255;\n      var imagedata = context.getImageData(0, 0, canvas.width, canvas.height);\n      var data = imagedata.data;\n\n      for (var _i365 = 0; _i365 < data.length; _i365 += 4) {\n        data[_i365 + 0] = data[_i365 + 0] * _r3;\n        data[_i365 + 1] = data[_i365 + 1] * g;\n        data[_i365 + 2] = data[_i365 + 2] * b;\n      }\n\n      context.putImageData(imagedata, 0, 0);\n    }\n\n    return canvas;\n  }\n} //\n\n\nvar PRECISION = 7;\n\nfunction buildHeader() {\n  return \"#usda 1.0\\n(\\n    customLayerData = {\\n        string creator = \\\"Three.js USDZExporter\\\"\\n    }\\n    metersPerUnit = 1\\n    upAxis = \\\"Y\\\"\\n)\\n\\n\";\n}\n\nfunction buildUSDFileAsString(dataToInsert) {\n  var output = buildHeader();\n  output += dataToInsert;\n  return strToU8(output);\n} // Xform\n\n\nfunction buildXform(object, geometry, material) {\n  var name = 'Object_' + object.id;\n  var transform = buildMatrix(object.matrixWorld);\n\n  if (object.matrixWorld.determinant() < 0) {\n    console.warn('THREE.USDZExporter: USDZ does not support negative scales', object);\n  }\n\n  return \"def Xform \\\"\".concat(name, \"\\\" (\\n    prepend references = @./geometries/Geometry_\").concat(geometry.id, \".usd@</Geometry>\\n)\\n{\\n    matrix4d xformOp:transform = \").concat(transform, \"\\n    uniform token[] xformOpOrder = [\\\"xformOp:transform\\\"]\\n\\n    rel material:binding = </Materials/Material_\").concat(material.id, \">\\n}\\n\\n\");\n}\n\nfunction buildMatrix(matrix) {\n  var array = matrix.elements;\n  return \"( \".concat(buildMatrixRow(array, 0), \", \").concat(buildMatrixRow(array, 4), \", \").concat(buildMatrixRow(array, 8), \", \").concat(buildMatrixRow(array, 12), \" )\");\n}\n\nfunction buildMatrixRow(array, offset) {\n  return \"(\".concat(array[offset + 0], \", \").concat(array[offset + 1], \", \").concat(array[offset + 2], \", \").concat(array[offset + 3], \")\");\n} // Mesh\n\n\nfunction buildMeshObject(geometry) {\n  var mesh = buildMesh(geometry);\n  return \"\\ndef \\\"Geometry\\\"\\n{\\n  \".concat(mesh, \"\\n}\\n\");\n}\n\nfunction buildMesh(geometry) {\n  var name = 'Geometry';\n  var attributes = geometry.attributes;\n  var count = attributes.position.count;\n  return \"\\n    def Mesh \\\"\".concat(name, \"\\\"\\n    {\\n        int[] faceVertexCounts = [\").concat(buildMeshVertexCount(geometry), \"]\\n        int[] faceVertexIndices = [\").concat(buildMeshVertexIndices(geometry), \"]\\n        normal3f[] normals = [\").concat(buildVector3Array(attributes.normal, count), \"] (\\n            interpolation = \\\"vertex\\\"\\n        )\\n        point3f[] points = [\").concat(buildVector3Array(attributes.position, count), \"]\\n        float2[] primvars:st = [\").concat(buildVector2Array(attributes.uv, count), \"] (\\n            interpolation = \\\"vertex\\\"\\n        )\\n        uniform token subdivisionScheme = \\\"none\\\"\\n    }\\n\");\n}\n\nfunction buildMeshVertexCount(geometry) {\n  var count = geometry.index !== null ? geometry.index.array.length : geometry.attributes.position.count;\n  return Array(count / 3).fill(3).join(', ');\n}\n\nfunction buildMeshVertexIndices(geometry) {\n  if (geometry.index !== null) {\n    return geometry.index.array.join(', ');\n  }\n\n  var array = [];\n  var length = geometry.attributes.position.count;\n\n  for (var _i366 = 0; _i366 < length; _i366++) {\n    array.push(_i366);\n  }\n\n  return array.join(', ');\n}\n\nfunction buildVector3Array(attribute, count) {\n  if (attribute === undefined) {\n    console.warn('USDZExporter: Normals missing.');\n    return Array(count).fill('(0, 0, 0)').join(', ');\n  }\n\n  var array = [];\n  var data = attribute.array;\n\n  for (var _i367 = 0; _i367 < data.length; _i367 += 3) {\n    array.push(\"(\".concat(data[_i367 + 0].toPrecision(PRECISION), \", \").concat(data[_i367 + 1].toPrecision(PRECISION), \", \").concat(data[_i367 + 2].toPrecision(PRECISION), \")\"));\n  }\n\n  return array.join(', ');\n}\n\nfunction buildVector2Array(attribute, count) {\n  if (attribute === undefined) {\n    console.warn('USDZExporter: UVs missing.');\n    return Array(count).fill('(0, 0)').join(', ');\n  }\n\n  var array = [];\n  var data = attribute.array;\n\n  for (var _i368 = 0; _i368 < data.length; _i368 += 2) {\n    array.push(\"(\".concat(data[_i368 + 0].toPrecision(PRECISION), \", \").concat(1 - data[_i368 + 1].toPrecision(PRECISION), \")\"));\n  }\n\n  return array.join(', ');\n} // Materials\n\n\nfunction buildMaterials(materials, textures) {\n  var array = [];\n\n  for (var uuid in materials) {\n    var material = materials[uuid];\n    array.push(buildMaterial(material, textures));\n  }\n\n  return \"def \\\"Materials\\\"\\n{\\n\".concat(array.join(''), \"\\n}\\n\\n\");\n}\n\nfunction buildMaterial(material, textures) {\n  // https://graphics.pixar.com/usd/docs/UsdPreviewSurface-Proposal.html\n  var pad = '            ';\n  var inputs = [];\n  var samplers = [];\n\n  function buildTexture(texture, mapType, color) {\n    var id = texture.id + (color ? '_' + color.getHexString() : '');\n    var isRGBA = texture.format === 1023;\n    textures[id] = texture;\n    return \"\\n        def Shader \\\"Transform2d_\".concat(mapType, \"\\\" (\\n            sdrMetadata = {\\n                string role = \\\"math\\\"\\n            }\\n        )\\n        {\\n            uniform token info:id = \\\"UsdTransform2d\\\"\\n            float2 inputs:in.connect = </Materials/Material_\").concat(material.id, \"/uvReader_st.outputs:result>\\n            float2 inputs:scale = \").concat(buildVector2(texture.repeat), \"\\n            float2 inputs:translation = \").concat(buildVector2(texture.offset), \"\\n            float2 outputs:result\\n        }\\n\\n        def Shader \\\"Texture_\").concat(texture.id, \"_\").concat(mapType, \"\\\"\\n        {\\n            uniform token info:id = \\\"UsdUVTexture\\\"\\n            asset inputs:file = @textures/Texture_\").concat(id, \".\").concat(isRGBA ? 'png' : 'jpg', \"@\\n            float2 inputs:st.connect = </Materials/Material_\").concat(material.id, \"/Transform2d_\").concat(mapType, \".outputs:result>\\n            token inputs:wrapS = \\\"repeat\\\"\\n            token inputs:wrapT = \\\"repeat\\\"\\n            float outputs:r\\n            float outputs:g\\n            float outputs:b\\n            float3 outputs:rgb\\n        }\");\n  }\n\n  if (material.map !== null) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:diffuseColor.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.map.id, \"_diffuse.outputs:rgb>\"));\n    samplers.push(buildTexture(material.map, 'diffuse', material.color));\n  } else {\n    inputs.push(\"\".concat(pad, \"color3f inputs:diffuseColor = \").concat(buildColor(material.color)));\n  }\n\n  if (material.emissiveMap !== null) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:emissiveColor.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.emissiveMap.id, \"_emissive.outputs:rgb>\"));\n    samplers.push(buildTexture(material.emissiveMap, 'emissive'));\n  } else if (material.emissive.getHex() > 0) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:emissiveColor = \").concat(buildColor(material.emissive)));\n  }\n\n  if (material.normalMap !== null) {\n    inputs.push(\"\".concat(pad, \"normal3f inputs:normal.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.normalMap.id, \"_normal.outputs:rgb>\"));\n    samplers.push(buildTexture(material.normalMap, 'normal'));\n  }\n\n  if (material.aoMap !== null) {\n    inputs.push(\"\".concat(pad, \"float inputs:occlusion.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.aoMap.id, \"_occlusion.outputs:r>\"));\n    samplers.push(buildTexture(material.aoMap, 'occlusion'));\n  }\n\n  if (material.roughnessMap !== null && material.roughness === 1) {\n    inputs.push(\"\".concat(pad, \"float inputs:roughness.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.roughnessMap.id, \"_roughness.outputs:g>\"));\n    samplers.push(buildTexture(material.roughnessMap, 'roughness'));\n  } else {\n    inputs.push(\"\".concat(pad, \"float inputs:roughness = \").concat(material.roughness));\n  }\n\n  if (material.metalnessMap !== null && material.metalness === 1) {\n    inputs.push(\"\".concat(pad, \"float inputs:metallic.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.metalnessMap.id, \"_metallic.outputs:b>\"));\n    samplers.push(buildTexture(material.metalnessMap, 'metallic'));\n  } else {\n    inputs.push(\"\".concat(pad, \"float inputs:metallic = \").concat(material.metalness));\n  }\n\n  inputs.push(\"\".concat(pad, \"float inputs:opacity = \").concat(material.opacity));\n\n  if (material.isMeshPhysicalMaterial) {\n    inputs.push(\"\".concat(pad, \"float inputs:clearcoat = \").concat(material.clearcoat));\n    inputs.push(\"\".concat(pad, \"float inputs:clearcoatRoughness = \").concat(material.clearcoatRoughness));\n    inputs.push(\"\".concat(pad, \"float inputs:ior = \").concat(material.ior));\n  }\n\n  return \"\\n    def Material \\\"Material_\".concat(material.id, \"\\\"\\n    {\\n        def Shader \\\"PreviewSurface\\\"\\n        {\\n            uniform token info:id = \\\"UsdPreviewSurface\\\"\\n\").concat(inputs.join('\\n'), \"\\n            int inputs:useSpecularWorkflow = 0\\n            token outputs:surface\\n        }\\n\\n        token outputs:surface.connect = </Materials/Material_\").concat(material.id, \"/PreviewSurface.outputs:surface>\\n        token inputs:frame:stPrimvarName = \\\"st\\\"\\n\\n        def Shader \\\"uvReader_st\\\"\\n        {\\n            uniform token info:id = \\\"UsdPrimvarReader_float2\\\"\\n            token inputs:varname.connect = </Materials/Material_\").concat(material.id, \".inputs:frame:stPrimvarName>\\n            float2 inputs:fallback = (0.0, 0.0)\\n            float2 outputs:result\\n        }\\n\\n\").concat(samplers.join('\\n'), \"\\n\\n    }\\n\");\n}\n\nfunction buildColor(color) {\n  return \"(\".concat(color.r, \", \").concat(color.g, \", \").concat(color.b, \")\");\n}\n\nfunction buildVector2(vector) {\n  return \"(\".concat(vector.x, \", \").concat(vector.y, \")\");\n}\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * For our purposes, an enumeration is a fixed set of CSS-expression-compatible\n * names. When serialized, a selected subset of the members may be specified as\n * whitespace-separated strings. An enumeration deserializer is a function that\n * parses a serialized subset of an enumeration and returns any members that are\n * found as a Set.\n *\n * The following example will produce a deserializer for the days of the\n * week:\n *\n * const deserializeDaysOfTheWeek = enumerationDeserializer([\n *   'Monday',\n *   'Tuesday',\n *   'Wednesday',\n *   'Thursday',\n *   'Friday',\n *   'Saturday',\n *   'Sunday'\n * ]);\n */\n\n\nvar enumerationDeserializer = function enumerationDeserializer(allowedNames) {\n  return function (valueString) {\n    try {\n      var expressions = parseExpressions(valueString);\n      var names = (expressions.length ? expressions[0].terms : []).filter(function (valueNode) {\n        return valueNode && valueNode.type === 'ident';\n      }).map(function (valueNode) {\n        return valueNode.value;\n      }).filter(function (name) {\n        return allowedNames.indexOf(name) > -1;\n      }); // NOTE(cdata): IE11 does not support constructing a Set directly from\n      // an iterable, so we need to manually add all the items:\n\n      var result = new Set();\n\n      var _iterator31 = _createForOfIteratorHelper(names),\n          _step31;\n\n      try {\n        for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n          var name = _step31.value;\n          result.add(name);\n        }\n      } catch (err) {\n        _iterator31.e(err);\n      } finally {\n        _iterator31.f();\n      }\n\n      return result;\n    } catch (_error) {}\n\n    return new Set();\n  };\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar isWebXRBlocked = false;\nvar isSceneViewerBlocked = false;\nvar noArViewerSigil = '#model-viewer-no-ar-fallback';\nvar deserializeARModes = enumerationDeserializer(['quick-look', 'scene-viewer', 'webxr', 'none']);\nvar DEFAULT_AR_MODES = 'webxr scene-viewer';\nvar ARMode = {\n  QUICK_LOOK: 'quick-look',\n  SCENE_VIEWER: 'scene-viewer',\n  WEBXR: 'webxr',\n  NONE: 'none'\n};\nvar $arButtonContainer = Symbol('arButtonContainer');\nvar $enterARWithWebXR = Symbol('enterARWithWebXR');\nvar $openSceneViewer = Symbol('openSceneViewer');\nvar $openIOSARQuickLook = Symbol('openIOSARQuickLook');\nvar $canActivateAR = Symbol('canActivateAR');\nvar $arMode = Symbol('arMode');\nvar $arModes = Symbol('arModes');\nvar $arAnchor = Symbol('arAnchor');\nvar $preload = Symbol('preload');\nvar $onARButtonContainerClick = Symbol('onARButtonContainerClick');\nvar $onARStatus = Symbol('onARStatus');\nvar $onARTracking = Symbol('onARTracking');\nvar $onARTap = Symbol('onARTap');\nvar $selectARMode = Symbol('selectARMode');\nvar $triggerLoad = Symbol('triggerLoad');\n\nvar ARMixin = function ARMixin(ModelViewerElement) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n  var ARModelViewerElement = /*#__PURE__*/function (_ModelViewerElement4, _ref25) {\n    _inherits(ARModelViewerElement, _ModelViewerElement4);\n\n    var _super138 = _createSuper(ARModelViewerElement);\n\n    function ARModelViewerElement() {\n      var _this149;\n\n      _classCallCheck(this, ARModelViewerElement);\n\n      _this149 = _super138.apply(this, arguments);\n      _this149.ar = false;\n      _this149.arScale = 'auto';\n      _this149.arPlacement = 'floor';\n      _this149.arModes = DEFAULT_AR_MODES;\n      _this149.iosSrc = null;\n      _this149.xrEnvironment = false;\n      _this149[_a] = false; // TODO: Add this to the shadow root as part of this mixin's\n      // implementation:\n\n      _this149[_b] = _this149.shadowRoot.querySelector('.ar-button');\n      _this149[_c] = document.createElement('a');\n      _this149[_d] = new Set();\n      _this149[_e] = ARMode.NONE;\n      _this149[_f] = false;\n\n      _this149[_g] = function (event) {\n        event.preventDefault();\n\n        _this149.activateAR();\n      };\n\n      _this149[_h] = function (_ref26) {\n        var status = _ref26.status;\n\n        if (status === ARStatus.NOT_PRESENTING || _this149[$renderer].arRenderer.presentedScene === _this149[$scene]) {\n          _this149.setAttribute('ar-status', status);\n\n          _this149.dispatchEvent(new CustomEvent('ar-status', {\n            detail: {\n              status: status\n            }\n          }));\n\n          if (status === ARStatus.NOT_PRESENTING) {\n            _this149.removeAttribute('ar-tracking');\n          } else if (status === ARStatus.SESSION_STARTED) {\n            _this149.setAttribute('ar-tracking', ARTracking.TRACKING);\n          }\n        }\n      };\n\n      _this149[_j] = function (_ref27) {\n        var status = _ref27.status;\n\n        _this149.setAttribute('ar-tracking', status);\n\n        _this149.dispatchEvent(new CustomEvent('ar-tracking', {\n          detail: {\n            status: status\n          }\n        }));\n      };\n\n      _this149[_k] = function (event) {\n        if (event.data == '_apple_ar_quicklook_button_tapped') {\n          _this149.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n        }\n      };\n\n      return _this149;\n    }\n\n    _createClass(ARModelViewerElement, [{\n      key: \"canActivateAR\",\n      get: function get() {\n        return this[$arMode] !== ARMode.NONE;\n      }\n    }, {\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(ARModelViewerElement.prototype), \"connectedCallback\", this).call(this);\n\n        this[$renderer].arRenderer.addEventListener('status', this[$onARStatus]);\n        this.setAttribute('ar-status', ARStatus.NOT_PRESENTING);\n        this[$renderer].arRenderer.addEventListener('tracking', this[$onARTracking]);\n        this[$arAnchor].addEventListener('message', this[$onARTap]);\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(ARModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        this[$renderer].arRenderer.removeEventListener('status', this[$onARStatus]);\n        this[$renderer].arRenderer.removeEventListener('tracking', this[$onARTracking]);\n        this[$arAnchor].removeEventListener('message', this[$onARTap]);\n      }\n    }, {\n      key: \"update\",\n      value: function () {\n        var _update2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee29(changedProperties) {\n          return _regeneratorRuntime.wrap(function _callee29$(_context31) {\n            while (1) {\n              switch (_context31.prev = _context31.next) {\n                case 0:\n                  _get(_getPrototypeOf(ARModelViewerElement.prototype), \"update\", this).call(this, changedProperties);\n\n                  if (changedProperties.has('arScale')) {\n                    this[$scene].canScale = this.arScale !== 'fixed';\n                  }\n\n                  if (changedProperties.has('arPlacement')) {\n                    this[$scene].setShadowIntensity(this[$scene].shadowIntensity);\n                    this[$needsRender]();\n                  }\n\n                  if (!(!changedProperties.has('ar') && !changedProperties.has('arModes') && !changedProperties.has('iosSrc'))) {\n                    _context31.next = 5;\n                    break;\n                  }\n\n                  return _context31.abrupt(\"return\");\n\n                case 5:\n                  if (changedProperties.has('arModes')) {\n                    this[$arModes] = deserializeARModes(this.arModes);\n                  }\n\n                  this[$selectARMode]();\n\n                case 7:\n                case \"end\":\n                  return _context31.stop();\n              }\n            }\n          }, _callee29, this);\n        }));\n\n        function update(_x37) {\n          return _update2.apply(this, arguments);\n        }\n\n        return update;\n      }()\n      /**\n       * Activates AR. Note that for any mode that is not WebXR-based, this\n       * method most likely has to be called synchronous from a user\n       * interaction handler. Otherwise, attempts to activate modes that\n       * require user interaction will most likely be ignored.\n       */\n\n    }, {\n      key: \"activateAR\",\n      value: function () {\n        var _activateAR = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee30() {\n          return _regeneratorRuntime.wrap(function _callee30$(_context32) {\n            while (1) {\n              switch (_context32.prev = _context32.next) {\n                case 0:\n                  _context32.t0 = this[$arMode];\n                  _context32.next = _context32.t0 === ARMode.QUICK_LOOK ? 3 : _context32.t0 === ARMode.WEBXR ? 5 : _context32.t0 === ARMode.SCENE_VIEWER ? 8 : 10;\n                  break;\n\n                case 3:\n                  this[$openIOSARQuickLook]();\n                  return _context32.abrupt(\"break\", 12);\n\n                case 5:\n                  _context32.next = 7;\n                  return this[$enterARWithWebXR]();\n\n                case 7:\n                  return _context32.abrupt(\"break\", 12);\n\n                case 8:\n                  this[$openSceneViewer]();\n                  return _context32.abrupt(\"break\", 12);\n\n                case 10:\n                  console.warn('No AR Mode can be activated. This is probably due to missing \\\nconfiguration or device capabilities');\n                  return _context32.abrupt(\"break\", 12);\n\n                case 12:\n                case \"end\":\n                  return _context32.stop();\n              }\n            }\n          }, _callee30, this);\n        }));\n\n        function activateAR() {\n          return _activateAR.apply(this, arguments);\n        }\n\n        return activateAR;\n      }()\n    }, {\n      key: _ref25,\n      value: function () {\n        var _value5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee31() {\n          var _iterator32, _step32, _value6, status;\n\n          return _regeneratorRuntime.wrap(function _callee31$(_context33) {\n            while (1) {\n              switch (_context33.prev = _context33.next) {\n                case 0:\n                  this[$arMode] = ARMode.NONE;\n\n                  if (!this.ar) {\n                    _context33.next = 33;\n                    break;\n                  }\n\n                  if (!(this.src != null)) {\n                    _context33.next = 32;\n                    break;\n                  }\n\n                  _iterator32 = _createForOfIteratorHelper(this[$arModes]);\n                  _context33.prev = 4;\n\n                  _iterator32.s();\n\n                case 6:\n                  if ((_step32 = _iterator32.n()).done) {\n                    _context33.next = 24;\n                    break;\n                  }\n\n                  _value6 = _step32.value;\n                  _context33.t0 = _value6 === 'webxr' && IS_WEBXR_AR_CANDIDATE && !isWebXRBlocked;\n\n                  if (!_context33.t0) {\n                    _context33.next = 13;\n                    break;\n                  }\n\n                  _context33.next = 12;\n                  return this[$renderer].arRenderer.supportsPresentation();\n\n                case 12:\n                  _context33.t0 = _context33.sent;\n\n                case 13:\n                  if (!_context33.t0) {\n                    _context33.next = 16;\n                    break;\n                  }\n\n                  this[$arMode] = ARMode.WEBXR;\n                  return _context33.abrupt(\"break\", 24);\n\n                case 16:\n                  if (!(_value6 === 'scene-viewer' && IS_SCENEVIEWER_CANDIDATE && !isSceneViewerBlocked)) {\n                    _context33.next = 19;\n                    break;\n                  }\n\n                  this[$arMode] = ARMode.SCENE_VIEWER;\n                  return _context33.abrupt(\"break\", 24);\n\n                case 19:\n                  if (!(_value6 === 'quick-look' && IS_AR_QUICKLOOK_CANDIDATE)) {\n                    _context33.next = 22;\n                    break;\n                  }\n\n                  this[$arMode] = ARMode.QUICK_LOOK;\n                  return _context33.abrupt(\"break\", 24);\n\n                case 22:\n                  _context33.next = 6;\n                  break;\n\n                case 24:\n                  _context33.next = 29;\n                  break;\n\n                case 26:\n                  _context33.prev = 26;\n                  _context33.t1 = _context33[\"catch\"](4);\n\n                  _iterator32.e(_context33.t1);\n\n                case 29:\n                  _context33.prev = 29;\n\n                  _iterator32.f();\n\n                  return _context33.finish(29);\n\n                case 32:\n                  // The presence of ios-src overrides the absence of quick-look\n                  // ar-mode.\n                  if (!this.canActivateAR && this.iosSrc != null && IS_AR_QUICKLOOK_CANDIDATE) {\n                    this[$arMode] = ARMode.QUICK_LOOK;\n                  }\n\n                case 33:\n                  if (this.canActivateAR) {\n                    this[$arButtonContainer].classList.add('enabled');\n                    this[$arButtonContainer].addEventListener('click', this[$onARButtonContainerClick]);\n                  } else if (this[$arButtonContainer].classList.contains('enabled')) {\n                    this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                    this[$arButtonContainer].classList.remove('enabled'); // If AR went from working to not, notify the element.\n\n                    status = ARStatus.FAILED;\n                    this.setAttribute('ar-status', status);\n                    this.dispatchEvent(new CustomEvent('ar-status', {\n                      detail: {\n                        status: status\n                      }\n                    }));\n                  }\n\n                case 34:\n                case \"end\":\n                  return _context33.stop();\n              }\n            }\n          }, _callee31, this, [[4, 26, 29, 32]]);\n        }));\n\n        function value() {\n          return _value5.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }, {\n      key: $enterARWithWebXR,\n      value: function () {\n        var _value7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee32() {\n          var arRenderer;\n          return _regeneratorRuntime.wrap(function _callee32$(_context34) {\n            while (1) {\n              switch (_context34.prev = _context34.next) {\n                case 0:\n                  console.log('Attempting to present in AR with WebXR...');\n                  _context34.next = 3;\n                  return this[$triggerLoad]();\n\n                case 3:\n                  _context34.prev = 3;\n                  this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                  arRenderer = this[$renderer].arRenderer;\n                  arRenderer.placeOnWall = this.arPlacement === 'wall';\n                  _context34.next = 9;\n                  return arRenderer.present(this[$scene], this.xrEnvironment);\n\n                case 9:\n                  _context34.next = 22;\n                  break;\n\n                case 11:\n                  _context34.prev = 11;\n                  _context34.t0 = _context34[\"catch\"](3);\n                  console.warn('Error while trying to present in AR with WebXR');\n                  console.error(_context34.t0);\n                  _context34.next = 17;\n                  return this[$renderer].arRenderer.stopPresenting();\n\n                case 17:\n                  isWebXRBlocked = true;\n                  console.warn('Falling back to next ar-mode');\n                  _context34.next = 21;\n                  return this[$selectARMode]();\n\n                case 21:\n                  this.activateAR();\n\n                case 22:\n                  _context34.prev = 22;\n                  this[$selectARMode]();\n                  return _context34.finish(22);\n\n                case 25:\n                case \"end\":\n                  return _context34.stop();\n              }\n            }\n          }, _callee32, this, [[3, 11, 22, 25]]);\n        }));\n\n        function value() {\n          return _value7.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }, {\n      key: $triggerLoad,\n      value: function () {\n        var _value8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee33() {\n          return _regeneratorRuntime.wrap(function _callee33$(_context35) {\n            while (1) {\n              switch (_context35.prev = _context35.next) {\n                case 0:\n                  if (this.loaded) {\n                    _context35.next = 6;\n                    break;\n                  }\n\n                  this[$preload] = true;\n                  this[$updateSource]();\n                  _context35.next = 5;\n                  return waitForEvent(this, 'load');\n\n                case 5:\n                  this[$preload] = false;\n\n                case 6:\n                case \"end\":\n                  return _context35.stop();\n              }\n            }\n          }, _callee33, this);\n        }));\n\n        function value() {\n          return _value8.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }, {\n      key: $shouldAttemptPreload,\n      value: function value() {\n        return _get(_getPrototypeOf(ARModelViewerElement.prototype), $shouldAttemptPreload, this).call(this) || this[$preload];\n      }\n      /**\n       * Takes a URL and a title string, and attempts to launch Scene Viewer on\n       * the current device.\n       */\n\n    }, {\n      key: $openSceneViewer,\n      value: function value() {\n        var _this150 = this;\n\n        var location = self.location.toString();\n        var locationUrl = new URL(location);\n        var modelUrl = new URL(this.src, location);\n        var params = new URLSearchParams(modelUrl.search);\n        locationUrl.hash = noArViewerSigil; // modelUrl can contain title/link/sound etc.\n\n        params.set('mode', 'ar_preferred');\n\n        if (!params.has('disable_occlusion')) {\n          params.set('disable_occlusion', 'true');\n        }\n\n        if (this.arScale === 'fixed') {\n          params.set('resizable', 'false');\n        }\n\n        if (this.arPlacement === 'wall') {\n          params.set('enable_vertical_placement', 'true');\n        }\n\n        if (params.has('sound')) {\n          var soundUrl = new URL(params.get('sound'), location);\n          params.set('sound', soundUrl.toString());\n        }\n\n        if (params.has('link')) {\n          var linkUrl = new URL(params.get('link'), location);\n          params.set('link', linkUrl.toString());\n        }\n\n        var intent = \"intent://arvr.google.com/scene-viewer/1.0?\".concat(params.toString() + '&file=' + encodeURIComponent(modelUrl.toString()), \"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=\").concat(encodeURIComponent(locationUrl.toString()), \";end;\");\n\n        var undoHashChange = function undoHashChange() {\n          if (self.location.hash === noArViewerSigil) {\n            isSceneViewerBlocked = true; // The new history will be the current URL with a new hash.\n            // Go back one step so that we reset to the expected URL.\n            // NOTE(cdata): this should not invoke any browser-level navigation\n            // because hash-only changes modify the URL in-place without\n            // navigating:\n\n            self.history.back();\n            console.warn('Error while trying to present in AR with Scene Viewer');\n            console.warn('Falling back to next ar-mode');\n\n            _this150[$selectARMode](); // Would be nice to activateAR() here, but webXR fails due to not\n            // seeing a user activation.\n\n          }\n        };\n\n        self.addEventListener('hashchange', undoHashChange, {\n          once: true\n        });\n        this[$arAnchor].setAttribute('href', intent);\n        console.log('Attempting to present in AR with Scene Viewer...');\n        this[$arAnchor].click();\n      }\n      /**\n       * Takes a URL to a USDZ file and sets the appropriate fields so that\n       * Safari iOS can intent to their AR Quick Look.\n       */\n\n    }, {\n      key: $openIOSARQuickLook,\n      value: function () {\n        var _value9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee34() {\n          var generateUsdz, objectURL, modelUrl, anchor, img;\n          return _regeneratorRuntime.wrap(function _callee34$(_context36) {\n            while (1) {\n              switch (_context36.prev = _context36.next) {\n                case 0:\n                  generateUsdz = !this.iosSrc;\n                  this[$arButtonContainer].classList.remove('enabled');\n\n                  if (!generateUsdz) {\n                    _context36.next = 8;\n                    break;\n                  }\n\n                  _context36.next = 5;\n                  return this.prepareUSDZ();\n\n                case 5:\n                  _context36.t0 = _context36.sent;\n                  _context36.next = 9;\n                  break;\n\n                case 8:\n                  _context36.t0 = this.iosSrc;\n\n                case 9:\n                  objectURL = _context36.t0;\n                  modelUrl = new URL(objectURL, self.location.toString());\n\n                  if (this.arScale === 'fixed') {\n                    if (modelUrl.hash) {\n                      modelUrl.hash += '&';\n                    }\n\n                    modelUrl.hash += 'allowsContentScaling=0';\n                  }\n\n                  anchor = this[$arAnchor];\n                  anchor.setAttribute('rel', 'ar');\n                  img = document.createElement('img');\n                  anchor.appendChild(img);\n                  anchor.setAttribute('href', modelUrl.toString());\n\n                  if (generateUsdz) {\n                    anchor.setAttribute('download', 'model.usdz');\n                  }\n\n                  console.log('Attempting to present in AR with Quick Look...');\n                  anchor.click();\n                  anchor.removeChild(img);\n\n                  if (generateUsdz) {\n                    URL.revokeObjectURL(objectURL);\n                  }\n\n                  this[$arButtonContainer].classList.add('enabled');\n\n                case 23:\n                case \"end\":\n                  return _context36.stop();\n              }\n            }\n          }, _callee34, this);\n        }));\n\n        function value() {\n          return _value9.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }, {\n      key: \"prepareUSDZ\",\n      value: function () {\n        var _prepareUSDZ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee35() {\n          var updateSourceProgress, scene, shadow, visible, exporter, arraybuffer, blob, url;\n          return _regeneratorRuntime.wrap(function _callee35$(_context37) {\n            while (1) {\n              switch (_context37.prev = _context37.next) {\n                case 0:\n                  updateSourceProgress = this[$progressTracker].beginActivity();\n                  _context37.next = 3;\n                  return this[$triggerLoad]();\n\n                case 3:\n                  scene = this[$scene];\n                  shadow = scene.shadow;\n                  visible = false; // Remove shadow from export\n\n                  if (shadow != null) {\n                    visible = shadow.visible;\n                    shadow.visible = false;\n                  }\n\n                  updateSourceProgress(0.2);\n                  exporter = new USDZExporter();\n                  _context37.next = 11;\n                  return exporter.parse(scene.modelContainer);\n\n                case 11:\n                  arraybuffer = _context37.sent;\n                  blob = new Blob([arraybuffer], {\n                    type: 'model/vnd.usdz+zip'\n                  });\n                  url = URL.createObjectURL(blob);\n                  updateSourceProgress(1);\n\n                  if (shadow != null) {\n                    shadow.visible = visible;\n                  }\n\n                  return _context37.abrupt(\"return\", url);\n\n                case 17:\n                case \"end\":\n                  return _context37.stop();\n              }\n            }\n          }, _callee35, this);\n        }));\n\n        function prepareUSDZ() {\n          return _prepareUSDZ.apply(this, arguments);\n        }\n\n        return prepareUSDZ;\n      }()\n    }]);\n\n    return ARModelViewerElement;\n  }(ModelViewerElement, (_a = $canActivateAR, _b = $arButtonContainer, _c = $arAnchor, _d = $arModes, _e = $arMode, _f = $preload, _g = $onARButtonContainerClick, _h = $onARStatus, _j = $onARTracking, _k = $onARTap, $selectARMode));\n\n  __decorate$4([property({\n    type: Boolean,\n    attribute: 'ar'\n  })], ARModelViewerElement.prototype, \"ar\", void 0);\n\n  __decorate$4([property({\n    type: String,\n    attribute: 'ar-scale'\n  })], ARModelViewerElement.prototype, \"arScale\", void 0);\n\n  __decorate$4([property({\n    type: String,\n    attribute: 'ar-placement'\n  })], ARModelViewerElement.prototype, \"arPlacement\", void 0);\n\n  __decorate$4([property({\n    type: String,\n    attribute: 'ar-modes'\n  })], ARModelViewerElement.prototype, \"arModes\", void 0);\n\n  __decorate$4([property({\n    type: String,\n    attribute: 'ios-src'\n  })], ARModelViewerElement.prototype, \"iosSrc\", void 0);\n\n  __decorate$4([property({\n    type: Boolean,\n    attribute: 'xr-environment'\n  })], ARModelViewerElement.prototype, \"xrEnvironment\", void 0);\n\n  return ARModelViewerElement;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$4, _b$2, _c$1;\n\nvar $evaluate = Symbol('evaluate');\nvar $lastValue = Symbol('lastValue');\n/**\n * An Evaluator is used to derive a computed style from part (or all) of a CSS\n * expression AST. This construct is particularly useful for complex ASTs\n * containing function calls such as calc, var and env. Such styles could be\n * costly to re-evaluate on every frame (and in some cases we may try to do\n * that). The Evaluator construct allows us to mark sub-trees of the AST as\n * constant, so that only the dynamic parts are re-evaluated. It also separates\n * one-time AST preparation work from work that necessarily has to happen upon\n * each evaluation.\n */\n\nvar Evaluator = /*#__PURE__*/function () {\n  function Evaluator() {\n    _classCallCheck(this, Evaluator);\n\n    this[_a$4] = null;\n  }\n  /**\n   * An Evaluatable is a NumberNode or an Evaluator that evaluates a NumberNode\n   * as the result of invoking its evaluate method. This is mainly used to\n   * ensure that CSS function nodes are cast to the corresponding Evaluators\n   * that will resolve the result of the function, but is also used to ensure\n   * that a percentage nested at arbitrary depth in the expression will always\n   * be evaluated against the correct basis.\n   */\n\n\n  _createClass(Evaluator, [{\n    key: \"isConstant\",\n    get:\n    /**\n     * If true, the Evaluator will only evaluate its AST one time. If false, the\n     * Evaluator will re-evaluate the AST each time that the public evaluate\n     * method is invoked.\n     */\n    function get() {\n      return false;\n    }\n    /**\n     * Evaluate the Evaluator and return the result. If the Evaluator is constant,\n     * the corresponding AST will only be evaluated once, and the result of\n     * evaluating it the first time will be returned on all subsequent\n     * evaluations.\n     */\n\n  }, {\n    key: \"evaluate\",\n    value: function evaluate() {\n      if (!this.isConstant || this[$lastValue] == null) {\n        this[$lastValue] = this[$evaluate]();\n      }\n\n      return this[$lastValue];\n    }\n  }], [{\n    key: \"evaluatableFor\",\n    value: function evaluatableFor(node) {\n      var basis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ZERO;\n\n      if (node instanceof Evaluator) {\n        return node;\n      }\n\n      if (node.type === 'number') {\n        if (node.unit === '%') {\n          return new PercentageEvaluator(node, basis);\n        }\n\n        return node;\n      }\n\n      switch (node.name.value) {\n        case 'calc':\n          return new CalcEvaluator(node, basis);\n\n        case 'env':\n          return new EnvEvaluator(node);\n      }\n\n      return ZERO;\n    }\n    /**\n     * If the input is an Evaluator, returns the result of evaluating it.\n     * Otherwise, returns the input.\n     *\n     * This is a helper to aide in resolving a NumberNode without conditionally\n     * checking if the Evaluatable is an Evaluator everywhere.\n     */\n\n  }, {\n    key: \"evaluate\",\n    value: function evaluate(evaluatable) {\n      if (evaluatable instanceof Evaluator) {\n        return evaluatable.evaluate();\n      }\n\n      return evaluatable;\n    }\n    /**\n     * If the input is an Evaluator, returns the value of its isConstant property.\n     * Returns true for all other input values.\n     */\n\n  }, {\n    key: \"isConstant\",\n    value: function isConstant(evaluatable) {\n      if (evaluatable instanceof Evaluator) {\n        return evaluatable.isConstant;\n      }\n\n      return true;\n    }\n    /**\n     * This method applies a set of structured intrinsic metadata to an evaluated\n     * result from a parsed CSS-like string of expressions. Intrinsics provide\n     * sufficient metadata (e.g., basis values, analogs for keywords) such that\n     * omitted values in the input string can be backfilled, and keywords can be\n     * converted to concrete numbers.\n     *\n     * The result of applying intrinsics is a tuple of NumberNode values whose\n     * units match the units used by the basis of the intrinsics.\n     *\n     * The following is a high-level description of how intrinsics are applied:\n     *\n     *  1. Determine the value of 'auto' for the current term\n     *  2. If there is no corresponding input value for this term, substitute the\n     *     'auto' value.\n     *  3. If the term is an IdentNode, treat it as a keyword and perform the\n     *     appropriate substitution.\n     *  4. If the term is still null, fallback to the 'auto' value\n     *  5. If the term is a percentage, apply it to the basis and return that\n     *     value\n     *  6. Normalize the unit of the term\n     *  7. If the term's unit does not match the basis unit, return the basis\n     *     value\n     *  8. Return the term as is\n     */\n\n  }, {\n    key: \"applyIntrinsics\",\n    value: function applyIntrinsics(evaluated, intrinsics) {\n      var basis = intrinsics.basis,\n          keywords = intrinsics.keywords;\n      var auto = keywords.auto;\n      return basis.map(function (basisNode, index) {\n        // Use an auto value if we have it, otherwise the auto value is the basis:\n        var autoSubstituteNode = auto[index] == null ? basisNode : auto[index]; // If the evaluated nodes do not have a node at the current\n        // index, fallback to the \"auto\" substitute right away:\n\n        var evaluatedNode = evaluated[index] ? evaluated[index] : autoSubstituteNode; // Any ident node is considered a keyword:\n\n        if (evaluatedNode.type === 'ident') {\n          var keyword = evaluatedNode.value; // Substitute any keywords for concrete values first:\n\n          if (keyword in keywords) {\n            evaluatedNode = keywords[keyword][index];\n          }\n        } // If we don't have a NumberNode at this point, fall back to whatever\n        // is specified for auto:\n\n\n        if (evaluatedNode == null || evaluatedNode.type === 'ident') {\n          evaluatedNode = autoSubstituteNode;\n        } // For percentages, we always apply the percentage to the basis value:\n\n\n        if (evaluatedNode.unit === '%') {\n          return numberNode(evaluatedNode.number / 100 * basisNode.number, basisNode.unit);\n        } // Otherwise, normalize whatever we have:\n\n\n        evaluatedNode = normalizeUnit(evaluatedNode, basisNode); // If the normalized units do not match, return the basis as a fallback:\n\n        if (evaluatedNode.unit !== basisNode.unit) {\n          return basisNode;\n        } // Finally, return the evaluated node with intrinsics applied:\n\n\n        return evaluatedNode;\n      });\n    }\n  }]);\n\n  return Evaluator;\n}();\n\n_a$4 = $lastValue;\nvar $percentage = Symbol('percentage');\nvar $basis = Symbol('basis');\n/**\n * A PercentageEvaluator scales a given basis value by a given percentage value.\n * The evaluated result is always considered to be constant.\n */\n\nvar PercentageEvaluator = /*#__PURE__*/function (_Evaluator) {\n  _inherits(PercentageEvaluator, _Evaluator);\n\n  var _super139 = _createSuper(PercentageEvaluator);\n\n  function PercentageEvaluator(percentage, basis) {\n    var _this151;\n\n    _classCallCheck(this, PercentageEvaluator);\n\n    _this151 = _super139.call(this);\n    _this151[$percentage] = percentage;\n    _this151[$basis] = basis;\n    return _this151;\n  }\n\n  _createClass(PercentageEvaluator, [{\n    key: \"isConstant\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: $evaluate,\n    value: function value() {\n      return numberNode(this[$percentage].number / 100 * this[$basis].number, this[$basis].unit);\n    }\n  }]);\n\n  return PercentageEvaluator;\n}(Evaluator);\n\nvar $identNode = Symbol('identNode');\n/**\n * Evaluator for CSS-like env() functions. Currently, only one environment\n * variable is accepted as an argument for such functions: window-scroll-y.\n *\n * The env() Evaluator is explicitly dynamic because it always refers to\n * external state that changes as the user scrolls, so it should always be\n * re-evaluated to ensure we get the most recent value.\n *\n * Some important notes about this feature include:\n *\n *  - There is no such thing as a \"window-scroll-y\" CSS environment variable in\n *    any stable browser at the time that this comment is being written.\n *  - The actual CSS env() function accepts a second argument as a fallback for\n *    the case that the specified first argument isn't set; our syntax does not\n *    support this second argument.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/env\n */\n\nvar EnvEvaluator = /*#__PURE__*/function (_Evaluator2, _ref28) {\n  _inherits(EnvEvaluator, _Evaluator2);\n\n  var _super140 = _createSuper(EnvEvaluator);\n\n  function EnvEvaluator(envFunction) {\n    var _this152;\n\n    _classCallCheck(this, EnvEvaluator);\n\n    _this152 = _super140.call(this);\n    _this152[_b$2] = null;\n    var identNode = envFunction.arguments.length ? envFunction.arguments[0].terms[0] : null;\n\n    if (identNode != null && identNode.type === 'ident') {\n      _this152[$identNode] = identNode;\n    }\n\n    return _this152;\n  }\n\n  _createClass(EnvEvaluator, [{\n    key: \"isConstant\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: _ref28,\n    value: function value() {\n      if (this[$identNode] != null) {\n        switch (this[$identNode].value) {\n          case 'window-scroll-y':\n            var verticalScrollPosition = window.pageYOffset;\n            var verticalScrollMax = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n            var scrollY = verticalScrollPosition / (verticalScrollMax - window.innerHeight) || 0;\n            return {\n              type: 'number',\n              number: scrollY,\n              unit: null\n            };\n        }\n      }\n\n      return ZERO;\n    }\n  }]);\n\n  return EnvEvaluator;\n}(Evaluator, (_b$2 = $identNode, $evaluate));\n\nvar IS_MULTIPLICATION_RE = /[\\*\\/]/;\nvar $evaluator = Symbol('evalutor');\n/**\n * Evaluator for CSS-like calc() functions. Our implementation of calc()\n * evaluation currently support nested function calls, an unlimited number of\n * terms, and all four algebraic operators (+, -, * and /).\n *\n * The Evaluator is marked as constant unless the calc expression contains an\n * internal env expression at any depth, in which case it will be marked as\n * dynamic.\n *\n * @see https://www.w3.org/TR/css-values-3/#calc-syntax\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\n\nvar CalcEvaluator = /*#__PURE__*/function (_Evaluator3, _ref29) {\n  _inherits(CalcEvaluator, _Evaluator3);\n\n  var _super141 = _createSuper(CalcEvaluator);\n\n  function CalcEvaluator(calcFunction) {\n    var _this153;\n\n    var basis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ZERO;\n\n    _classCallCheck(this, CalcEvaluator);\n\n    _this153 = _super141.call(this);\n    _this153[_c$1] = null;\n\n    if (calcFunction.arguments.length !== 1) {\n      return _possibleConstructorReturn(_this153);\n    }\n\n    var terms = calcFunction.arguments[0].terms.slice();\n    var secondOrderTerms = [];\n\n    while (terms.length) {\n      var term = terms.shift();\n\n      if (secondOrderTerms.length > 0) {\n        var previousTerm = secondOrderTerms[secondOrderTerms.length - 1];\n\n        if (previousTerm.type === 'operator' && IS_MULTIPLICATION_RE.test(previousTerm.value)) {\n          var operator = secondOrderTerms.pop();\n          var leftValue = secondOrderTerms.pop();\n\n          if (leftValue == null) {\n            return _possibleConstructorReturn(_this153);\n          }\n\n          secondOrderTerms.push(new OperatorEvaluator(operator, Evaluator.evaluatableFor(leftValue, basis), Evaluator.evaluatableFor(term, basis)));\n          continue;\n        }\n      }\n\n      secondOrderTerms.push(term.type === 'operator' ? term : Evaluator.evaluatableFor(term, basis));\n    }\n\n    while (secondOrderTerms.length > 2) {\n      var _secondOrderTerms$spl = secondOrderTerms.splice(0, 3),\n          _secondOrderTerms$spl2 = _slicedToArray(_secondOrderTerms$spl, 3),\n          left = _secondOrderTerms$spl2[0],\n          _operator = _secondOrderTerms$spl2[1],\n          right = _secondOrderTerms$spl2[2];\n\n      if (_operator.type !== 'operator') {\n        return _possibleConstructorReturn(_this153);\n      }\n\n      secondOrderTerms.unshift(new OperatorEvaluator(_operator, Evaluator.evaluatableFor(left, basis), Evaluator.evaluatableFor(right, basis)));\n    } // There should only be one combined evaluator at this point:\n\n\n    if (secondOrderTerms.length === 1) {\n      _this153[$evaluator] = secondOrderTerms[0];\n    }\n\n    return _this153;\n  }\n\n  _createClass(CalcEvaluator, [{\n    key: \"isConstant\",\n    get: function get() {\n      return this[$evaluator] == null || Evaluator.isConstant(this[$evaluator]);\n    }\n  }, {\n    key: _ref29,\n    value: function value() {\n      return this[$evaluator] != null ? Evaluator.evaluate(this[$evaluator]) : ZERO;\n    }\n  }]);\n\n  return CalcEvaluator;\n}(Evaluator, (_c$1 = $evaluator, $evaluate));\n\nvar $operator = Symbol('operator');\nvar $left = Symbol('left');\nvar $right = Symbol('right');\n/**\n * An Evaluator for the operators found inside CSS calc() functions.\n * The evaluator accepts an operator and left/right operands. The operands can\n * be any valid expression term typically allowed inside a CSS calc function.\n *\n * As detail of this implementation, the only supported unit types are angles\n * expressed as radians or degrees, and lengths expressed as meters, centimeters\n * or millimeters.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\n\nvar OperatorEvaluator = /*#__PURE__*/function (_Evaluator4) {\n  _inherits(OperatorEvaluator, _Evaluator4);\n\n  var _super142 = _createSuper(OperatorEvaluator);\n\n  function OperatorEvaluator(operator, left, right) {\n    var _this154;\n\n    _classCallCheck(this, OperatorEvaluator);\n\n    _this154 = _super142.call(this);\n    _this154[$operator] = operator;\n    _this154[$left] = left;\n    _this154[$right] = right;\n    return _this154;\n  }\n\n  _createClass(OperatorEvaluator, [{\n    key: \"isConstant\",\n    get: function get() {\n      return Evaluator.isConstant(this[$left]) && Evaluator.isConstant(this[$right]);\n    }\n  }, {\n    key: $evaluate,\n    value: function value() {\n      var leftNode = normalizeUnit(Evaluator.evaluate(this[$left]));\n      var rightNode = normalizeUnit(Evaluator.evaluate(this[$right]));\n      var leftValue = leftNode.number,\n          leftUnit = leftNode.unit;\n      var rightValue = rightNode.number,\n          rightUnit = rightNode.unit; // Disallow operations for mismatched normalized units e.g., m and rad:\n\n      if (rightUnit != null && leftUnit != null && rightUnit != leftUnit) {\n        return ZERO;\n      } // NOTE(cdata): rules for calc type checking are defined here\n      // https://drafts.csswg.org/css-values-3/#calc-type-checking\n      // This is a simplification and may not hold up once we begin to support\n      // additional unit types:\n\n\n      var unit = leftUnit || rightUnit;\n      var value;\n\n      switch (this[$operator].value) {\n        case '+':\n          value = leftValue + rightValue;\n          break;\n\n        case '-':\n          value = leftValue - rightValue;\n          break;\n\n        case '/':\n          value = leftValue / rightValue;\n          break;\n\n        case '*':\n          value = leftValue * rightValue;\n          break;\n\n        default:\n          return ZERO;\n      }\n\n      return {\n        type: 'number',\n        number: value,\n        unit: unit\n      };\n    }\n  }]);\n\n  return OperatorEvaluator;\n}(Evaluator);\n\nvar $evaluatables = Symbol('evaluatables');\nvar $intrinsics = Symbol('intrinsics');\n/**\n * A VectorEvaluator evaluates a series of numeric terms that usually represent\n * a data structure such as a multi-dimensional vector or a spherical\n *\n * The form of the evaluator's result is determined by the Intrinsics that are\n * given to it when it is constructed. For example, spherical intrinsics would\n * establish two angle terms and a length term, so the result of evaluating the\n * evaluator that is configured with spherical intrinsics is a three element\n * array where the first two elements represent angles in radians and the third\n * element representing a length in meters.\n */\n\nvar StyleEvaluator = /*#__PURE__*/function (_Evaluator5) {\n  _inherits(StyleEvaluator, _Evaluator5);\n\n  var _super143 = _createSuper(StyleEvaluator);\n\n  function StyleEvaluator(expressions, intrinsics) {\n    var _this155;\n\n    _classCallCheck(this, StyleEvaluator);\n\n    _this155 = _super143.call(this);\n    _this155[$intrinsics] = intrinsics;\n    var firstExpression = expressions[0];\n    var terms = firstExpression != null ? firstExpression.terms : [];\n    _this155[$evaluatables] = intrinsics.basis.map(function (basisNode, index) {\n      var term = terms[index];\n\n      if (term == null) {\n        return {\n          type: 'ident',\n          value: 'auto'\n        };\n      }\n\n      if (term.type === 'ident') {\n        return term;\n      }\n\n      return Evaluator.evaluatableFor(term, basisNode);\n    });\n    return _this155;\n  }\n\n  _createClass(StyleEvaluator, [{\n    key: \"isConstant\",\n    get: function get() {\n      var _iterator33 = _createForOfIteratorHelper(this[$evaluatables]),\n          _step33;\n\n      try {\n        for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n          var evaluatable = _step33.value;\n\n          if (!Evaluator.isConstant(evaluatable)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator33.e(err);\n      } finally {\n        _iterator33.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: $evaluate,\n    value: function value() {\n      var evaluated = this[$evaluatables].map(function (evaluatable) {\n        return Evaluator.evaluate(evaluatable);\n      });\n      return Evaluator.applyIntrinsics(evaluated, this[$intrinsics]).map(function (numberNode) {\n        return numberNode.number;\n      });\n    }\n  }]);\n\n  return StyleEvaluator;\n}(Evaluator);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$3, _b$1, _c, _d;\n\nvar $instances = Symbol('instances');\nvar $activateListener = Symbol('activateListener');\nvar $deactivateListener = Symbol('deactivateListener');\nvar $notifyInstances = Symbol('notifyInstances');\nvar $notify = Symbol('notify');\nvar $scrollCallback = Symbol('callback');\n/**\n * This internal helper is intended to work as a reference-counting manager of\n * scroll event listeners. Only one scroll listener is ever registered for all\n * instances of the class, and when the last ScrollObserver \"disconnects\", that\n * event listener is removed. This spares us from thrashing\n * the {add,remove}EventListener API (the binding cost of these methods has been\n * known to show up in performance anlyses) as well as potential memory leaks.\n */\n\nvar ScrollObserver = /*#__PURE__*/function (_ref30) {\n  function ScrollObserver(callback) {\n    _classCallCheck(this, ScrollObserver);\n\n    this[$scrollCallback] = callback;\n  }\n\n  _createClass(ScrollObserver, [{\n    key: \"observe\",\n    value:\n    /**\n     * Listen for scroll events. The configured callback (passed to the\n     * constructor) will be invoked for subsequent global scroll events.\n     */\n    function observe() {\n      if (ScrollObserver[$instances].size === 0) {\n        ScrollObserver[$activateListener]();\n      }\n\n      ScrollObserver[$instances].add(this);\n    }\n    /**\n     * Stop listening for scroll events.\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      ScrollObserver[$instances].delete(this);\n\n      if (ScrollObserver[$instances].size === 0) {\n        ScrollObserver[$deactivateListener]();\n      }\n    }\n  }, {\n    key: $notify,\n    value: function value() {\n      this[$scrollCallback]();\n    }\n  }], [{\n    key: $notifyInstances,\n    value: function value() {\n      var _iterator34 = _createForOfIteratorHelper(ScrollObserver[$instances]),\n          _step34;\n\n      try {\n        for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n          var _instance2 = _step34.value;\n\n          _instance2[$notify]();\n        }\n      } catch (err) {\n        _iterator34.e(err);\n      } finally {\n        _iterator34.f();\n      }\n    }\n  }, {\n    key: _ref30,\n    value: function value() {\n      window.addEventListener('scroll', this[$notifyInstances], {\n        passive: true\n      });\n    }\n  }, {\n    key: $deactivateListener,\n    value: function value() {\n      window.removeEventListener('scroll', this[$notifyInstances]);\n    }\n  }]);\n\n  return ScrollObserver;\n}((_a$3 = $instances, $activateListener));\n\nScrollObserver[_a$3] = new Set();\nvar $computeStyleCallback = Symbol('computeStyleCallback');\nvar $astWalker = Symbol('astWalker');\nvar $dependencies = Symbol('dependencies');\nvar $onScroll = Symbol('onScroll');\n/**\n * The StyleEffector is configured with a callback that will be invoked at the\n * optimal time that some array of CSS expression ASTs ought to be evaluated.\n *\n * For example, our CSS-like expression syntax supports usage of the env()\n * function to incorporate the current top-level scroll position into a CSS\n * expression: env(window-scroll-y).\n *\n * This \"environment variable\" will change dynamically as the user scrolls the\n * page. If an AST contains such a usage of env(), we would have to evaluate the\n * AST on every frame in order to be sure that the computed style stays up to\n * date.\n *\n * The StyleEffector spares us from evaluating the expressions on every frame by\n * correlating specific parts of an AST with observers of the external effects\n * that they refer to (if any). So, if the AST contains env(window-scroll-y),\n * the StyleEffector manages the lifetime of a global scroll event listener and\n * notifies the user at the optimal time to evaluate the computed style.\n */\n\nvar StyleEffector = /*#__PURE__*/function () {\n  function StyleEffector(callback) {\n    var _this156 = this;\n\n    _classCallCheck(this, StyleEffector);\n\n    this[_b$1] = {};\n    this[_c] = new ASTWalker(['function']);\n\n    this[_d] = function () {\n      _this156[$computeStyleCallback]({\n        relatedState: 'window-scroll'\n      });\n    };\n\n    this[$computeStyleCallback] = callback;\n  }\n  /**\n   * Sets the expressions that govern when the StyleEffector callback will be\n   * invoked.\n   */\n\n\n  _createClass(StyleEffector, [{\n    key: \"observeEffectsFor\",\n    value: function observeEffectsFor(ast) {\n      var _this157 = this;\n\n      var newDependencies = {};\n      var oldDependencies = this[$dependencies];\n      this[$astWalker].walk(ast, function (functionNode) {\n        var name = functionNode.name;\n        var firstArgument = functionNode.arguments[0];\n        var firstTerm = firstArgument.terms[0];\n\n        if (name.value !== 'env' || firstTerm == null || firstTerm.type !== 'ident') {\n          return;\n        }\n\n        switch (firstTerm.value) {\n          case 'window-scroll-y':\n            if (newDependencies['window-scroll'] == null) {\n              var observer = 'window-scroll' in oldDependencies ? oldDependencies['window-scroll'] : new ScrollObserver(_this157[$onScroll]);\n              observer.observe();\n              delete oldDependencies['window-scroll'];\n              newDependencies['window-scroll'] = observer;\n            }\n\n            break;\n        }\n      });\n\n      for (var environmentState in oldDependencies) {\n        var observer = oldDependencies[environmentState];\n        observer.disconnect();\n      }\n\n      this[$dependencies] = newDependencies;\n    }\n    /**\n     * Disposes of the StyleEffector by disconnecting all observers of external\n     * effects.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      for (var environmentState in this[$dependencies]) {\n        var observer = this[$dependencies][environmentState];\n        observer.disconnect();\n      }\n    }\n  }]);\n\n  return StyleEffector;\n}();\n\n_b$1 = $dependencies, _c = $astWalker, _d = $onScroll;\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The @style decorator is responsible for coordinating the conversion of a\n * CSS-like string property value into numbers that can be applied to\n * lower-level constructs. It also can optionally manage the lifecycle of a\n * StyleEffector which allows automatic updates for styles that use env() or\n * var() functions.\n *\n * The decorator is configured with Intrinsics and the property key for a\n * method that handles updates. The named update handler is invoked with the\n * result of parsing and evaluating the raw property string value. The format of\n * the evaluated result is derived from the basis of the configured Intrinsics,\n * and is always an array of numbers of fixed length.\n *\n * NOTE: This decorator depends on the property updating mechanism defined by\n * UpdatingElement as exported by the lit-element module. That means it *must*\n * be used in conjunction with the @property decorator, or equivalent\n * JavaScript.\n *\n * Supported configurations are:\n *\n *  - `intrinsics`: An Intrinsics struct that describes how to interpret a\n * serialized style attribute. For more detail on intrinsics see\n * ./styles/evaluators.ts\n *  - `updateHandler`: A string or Symbol that is the key of a method to be\n * invoked with the result of parsing and evaluating a serialized style string.\n *  - `observeEffects`: Optional, if set to true then styles that use env() will\n * cause their update handlers to be invoked every time the corresponding\n * environment variable changes (even if the style attribute itself remains\n * static).\n */\n\nvar style = function style(config) {\n  var observeEffects = config.observeEffects || false;\n  var getIntrinsics = config.intrinsics instanceof Function ? config.intrinsics : function () {\n    return config.intrinsics;\n  };\n  return function (proto, propertyName) {\n    var _Object$definePropert;\n\n    var originalUpdated = proto.updated;\n    var originalConnectedCallback = proto.connectedCallback;\n    var originalDisconnectedCallback = proto.disconnectedCallback;\n    var $styleEffector = Symbol(\"\".concat(propertyName, \"StyleEffector\"));\n    var $styleEvaluator = Symbol(\"\".concat(propertyName, \"StyleEvaluator\"));\n    var $updateEvaluator = Symbol(\"\".concat(propertyName, \"UpdateEvaluator\"));\n    var $evaluateAndSync = Symbol(\"\".concat(propertyName, \"EvaluateAndSync\"));\n    Object.defineProperties(proto, (_Object$definePropert = {}, _defineProperty(_Object$definePropert, $styleEffector, {\n      value: null,\n      writable: true\n    }), _defineProperty(_Object$definePropert, $styleEvaluator, {\n      value: null,\n      writable: true\n    }), _defineProperty(_Object$definePropert, $updateEvaluator, {\n      value: function value() {\n        var _this158 = this;\n\n        var ast = parseExpressions(this[propertyName]);\n        this[$styleEvaluator] = new StyleEvaluator(ast, getIntrinsics(this));\n\n        if (this[$styleEffector] == null && observeEffects) {\n          this[$styleEffector] = new StyleEffector(function () {\n            return _this158[$evaluateAndSync]();\n          });\n        }\n\n        if (this[$styleEffector] != null) {\n          this[$styleEffector].observeEffectsFor(ast);\n        }\n      }\n    }), _defineProperty(_Object$definePropert, $evaluateAndSync, {\n      value: function value() {\n        if (this[$styleEvaluator] == null) {\n          return;\n        }\n\n        var result = this[$styleEvaluator].evaluate(); // @see https://github.com/microsoft/TypeScript/pull/30769\n        // @see https://github.com/Microsoft/TypeScript/issues/1863\n\n        this[config.updateHandler](result);\n      }\n    }), _defineProperty(_Object$definePropert, \"updated\", {\n      value: function value(changedProperties) {\n        // Always invoke updates to styles first. This gives a class that\n        // uses this decorator the opportunity to override the effect, or\n        // respond to it, in its own implementation of `updated`.\n        if (changedProperties.has(propertyName)) {\n          this[$updateEvaluator]();\n          this[$evaluateAndSync]();\n        }\n\n        originalUpdated.call(this, changedProperties);\n      }\n    }), _defineProperty(_Object$definePropert, \"connectedCallback\", {\n      value: function value() {\n        originalConnectedCallback.call(this);\n        this.requestUpdate(propertyName, this[propertyName]);\n      }\n    }), _defineProperty(_Object$definePropert, \"disconnectedCallback\", {\n      value: function value() {\n        originalDisconnectedCallback.call(this);\n\n        if (this[$styleEffector] != null) {\n          this[$styleEffector].dispose();\n          this[$styleEffector] = null;\n        }\n      }\n    }), _Object$definePropert));\n  };\n};\n/* @license\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar DEFAULT_OPTIONS = Object.freeze({\n  minimumRadius: 0,\n  maximumRadius: Infinity,\n  minimumPolarAngle: Math.PI / 8,\n  maximumPolarAngle: Math.PI - Math.PI / 8,\n  minimumAzimuthalAngle: -Infinity,\n  maximumAzimuthalAngle: Infinity,\n  minimumFieldOfView: 10,\n  maximumFieldOfView: 45,\n  interactionPolicy: 'always-allow',\n  touchAction: 'pan-y'\n}); // Constants\n\nvar TOUCH_EVENT_RE = /^touch(start|end|move)$/;\nvar KEYBOARD_ORBIT_INCREMENT = Math.PI / 8;\nvar ZOOM_SENSITIVITY = 0.04;\nvar KeyCode = {\n  PAGE_UP: 33,\n  PAGE_DOWN: 34,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\nvar ChangeSource = {\n  USER_INTERACTION: 'user-interaction',\n  NONE: 'none'\n};\n/**\n * SmoothControls is a Three.js helper for adding delightful pointer and\n * keyboard-based input to a staged Three.js scene. Its API is very similar to\n * OrbitControls, but it offers more opinionated (subjectively more delightful)\n * defaults, easy extensibility and subjectively better out-of-the-box keyboard\n * support.\n *\n * One important change compared to OrbitControls is that the `update` method\n * of SmoothControls must be invoked on every frame, otherwise the controls\n * will not have an effect.\n *\n * Another notable difference compared to OrbitControls is that SmoothControls\n * does not currently support panning (but probably will in a future revision).\n *\n * Like OrbitControls, SmoothControls assumes that the orientation of the camera\n * has been set in terms of position, rotation and scale, so it is important to\n * ensure that the camera's matrixWorld is in sync before using SmoothControls.\n */\n\nvar SmoothControls = /*#__PURE__*/function (_EventDispatcher12) {\n  _inherits(SmoothControls, _EventDispatcher12);\n\n  var _super144 = _createSuper(SmoothControls);\n\n  function SmoothControls(camera, element) {\n    var _this159;\n\n    _classCallCheck(this, SmoothControls);\n\n    _this159 = _super144.call(this);\n    _this159.camera = camera;\n    _this159.element = element;\n    _this159.sensitivity = 1;\n    _this159._interactionEnabled = false;\n    _this159._disableZoom = false;\n    _this159.isUserChange = false;\n    _this159.isUserPointing = false; // Internal orbital position state\n\n    _this159.spherical = new Spherical();\n    _this159.goalSpherical = new Spherical();\n    _this159.thetaDamper = new Damper();\n    _this159.phiDamper = new Damper();\n    _this159.radiusDamper = new Damper();\n    _this159.logFov = Math.log(DEFAULT_OPTIONS.maximumFieldOfView);\n    _this159.goalLogFov = _this159.logFov;\n    _this159.fovDamper = new Damper(); // Pointer state\n\n    _this159.pointerIsDown = false;\n    _this159.lastPointerPosition = {\n      clientX: 0,\n      clientY: 0\n    };\n    _this159.touchMode = 'rotate';\n    _this159.touchDecided = false;\n\n    _this159.onPointerMove = function (event) {\n      if (!_this159.pointerIsDown || !_this159.canInteract) {\n        return;\n      } // NOTE(cdata): We test event.type as some browsers do not have a global\n      // TouchEvent contructor.\n\n\n      if (TOUCH_EVENT_RE.test(event.type)) {\n        var touches = event.touches;\n\n        switch (_this159.touchMode) {\n          case 'zoom':\n            if (_this159.lastTouches.length > 1 && touches.length > 1) {\n              var lastTouchDistance = _this159.twoTouchDistance(_this159.lastTouches[0], _this159.lastTouches[1]);\n\n              var touchDistance = _this159.twoTouchDistance(touches[0], touches[1]);\n\n              var deltaZoom = ZOOM_SENSITIVITY * (lastTouchDistance - touchDistance) / 10.0;\n\n              _this159.userAdjustOrbit(0, 0, deltaZoom);\n            }\n\n            break;\n\n          case 'rotate':\n            var touchAction = _this159._options.touchAction;\n\n            if (!_this159.touchDecided && touchAction !== 'none') {\n              _this159.touchDecided = true;\n              var _touches$ = touches[0],\n                  clientX = _touches$.clientX,\n                  clientY = _touches$.clientY;\n              var dx = Math.abs(clientX - _this159.lastPointerPosition.clientX);\n              var dy = Math.abs(clientY - _this159.lastPointerPosition.clientY); // If motion is mostly vertical, assume scrolling is the intent.\n\n              if (touchAction === 'pan-y' && dy > dx || touchAction === 'pan-x' && dx > dy) {\n                _this159.touchMode = 'scroll';\n                return;\n              }\n            }\n\n            _this159.handleSinglePointerMove(touches[0]);\n\n            break;\n\n          case 'scroll':\n            return;\n        }\n\n        _this159.lastTouches = touches;\n      } else {\n        _this159.handleSinglePointerMove(event);\n      }\n\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n    };\n\n    _this159.onPointerDown = function (event) {\n      _this159.pointerIsDown = true;\n      _this159.isUserPointing = false;\n\n      if (TOUCH_EVENT_RE.test(event.type)) {\n        var touches = event.touches;\n        _this159.touchDecided = false;\n\n        switch (touches.length) {\n          default:\n          case 1:\n            _this159.touchMode = 'rotate';\n\n            _this159.handleSinglePointerDown(touches[0]);\n\n            break;\n\n          case 2:\n            _this159.touchMode = _this159._disableZoom ? 'scroll' : 'zoom';\n            break;\n        }\n\n        _this159.lastTouches = touches;\n      } else {\n        _this159.handleSinglePointerDown(event);\n      }\n    };\n\n    _this159.onPointerUp = function (_event) {\n      _this159.element.style.cursor = 'grab';\n      _this159.pointerIsDown = false;\n\n      if (_this159.isUserPointing) {\n        _this159.dispatchEvent({\n          type: 'pointer-change-end',\n          pointer: Object.assign({}, _this159.lastPointerPosition)\n        });\n      }\n    };\n\n    _this159.onWheel = function (event) {\n      if (!_this159.canInteract) {\n        return;\n      }\n\n      var deltaZoom = event.deltaY * (event.deltaMode == 1 ? 18 : 1) * ZOOM_SENSITIVITY / 30;\n\n      _this159.userAdjustOrbit(0, 0, deltaZoom);\n\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n    };\n\n    _this159.onKeyDown = function (event) {\n      // We track if the key is actually one we respond to, so as not to\n      // accidentally clober unrelated key inputs when the <model-viewer> has\n      // focus.\n      var relevantKey = false;\n\n      switch (event.keyCode) {\n        case KeyCode.PAGE_UP:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(0, 0, ZOOM_SENSITIVITY);\n\n          break;\n\n        case KeyCode.PAGE_DOWN:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(0, 0, -1 * ZOOM_SENSITIVITY);\n\n          break;\n\n        case KeyCode.UP:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(0, -KEYBOARD_ORBIT_INCREMENT, 0);\n\n          break;\n\n        case KeyCode.DOWN:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(0, KEYBOARD_ORBIT_INCREMENT, 0);\n\n          break;\n\n        case KeyCode.LEFT:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT, 0, 0);\n\n          break;\n\n        case KeyCode.RIGHT:\n          relevantKey = true;\n\n          _this159.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT, 0, 0);\n\n          break;\n      }\n\n      if (relevantKey && event.cancelable) {\n        event.preventDefault();\n      }\n    };\n\n    _this159._options = Object.assign({}, DEFAULT_OPTIONS);\n\n    _this159.setOrbit(0, Math.PI / 2, 1);\n\n    _this159.setFieldOfView(100);\n\n    _this159.jumpToGoal();\n\n    return _this159;\n  }\n\n  _createClass(SmoothControls, [{\n    key: \"interactionEnabled\",\n    get: function get() {\n      return this._interactionEnabled;\n    }\n  }, {\n    key: \"enableInteraction\",\n    value: function enableInteraction() {\n      if (this._interactionEnabled === false) {\n        var element = this.element;\n        element.addEventListener('mousemove', this.onPointerMove);\n        element.addEventListener('mousedown', this.onPointerDown);\n\n        if (!this._disableZoom) {\n          element.addEventListener('wheel', this.onWheel);\n        }\n\n        element.addEventListener('keydown', this.onKeyDown);\n        element.addEventListener('touchstart', this.onPointerDown, {\n          passive: true\n        });\n        element.addEventListener('touchmove', this.onPointerMove);\n        self.addEventListener('mouseup', this.onPointerUp);\n        self.addEventListener('touchend', this.onPointerUp);\n        this.element.style.cursor = 'grab';\n        this._interactionEnabled = true;\n      }\n    }\n  }, {\n    key: \"disableInteraction\",\n    value: function disableInteraction() {\n      if (this._interactionEnabled === true) {\n        var element = this.element;\n        element.removeEventListener('mousemove', this.onPointerMove);\n        element.removeEventListener('mousedown', this.onPointerDown);\n\n        if (!this._disableZoom) {\n          element.removeEventListener('wheel', this.onWheel);\n        }\n\n        element.removeEventListener('keydown', this.onKeyDown);\n        element.removeEventListener('touchstart', this.onPointerDown);\n        element.removeEventListener('touchmove', this.onPointerMove);\n        self.removeEventListener('mouseup', this.onPointerUp);\n        self.removeEventListener('touchend', this.onPointerUp);\n        element.style.cursor = '';\n        this._interactionEnabled = false;\n      }\n    }\n    /**\n     * The options that are currently configured for the controls instance.\n     */\n\n  }, {\n    key: \"options\",\n    get: function get() {\n      return this._options;\n    }\n  }, {\n    key: \"disableZoom\",\n    set: function set(disable) {\n      if (this._disableZoom != disable) {\n        this._disableZoom = disable;\n\n        if (disable === true) {\n          this.element.removeEventListener('wheel', this.onWheel);\n        } else {\n          this.element.addEventListener('wheel', this.onWheel);\n        }\n      }\n    }\n    /**\n     * Copy the spherical values that represent the current camera orbital\n     * position relative to the configured target into a provided Spherical\n     * instance. If no Spherical is provided, a new Spherical will be allocated\n     * to copy the values into. The Spherical that values are copied into is\n     * returned.\n     */\n\n  }, {\n    key: \"getCameraSpherical\",\n    value: function getCameraSpherical() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Spherical();\n      return target.copy(this.spherical);\n    }\n    /**\n     * Returns the camera's current vertical field of view in degrees.\n     */\n\n  }, {\n    key: \"getFieldOfView\",\n    value: function getFieldOfView() {\n      return this.camera.fov;\n    }\n    /**\n     * Configure the _options of the controls. Configured _options will be\n     * merged with whatever _options have already been configured for this\n     * controls instance.\n     */\n\n  }, {\n    key: \"applyOptions\",\n    value: function applyOptions(_options) {\n      Object.assign(this._options, _options); // Re-evaluates clamping based on potentially new values for min/max\n      // polar, azimuth and radius:\n\n      this.setOrbit();\n      this.setFieldOfView(Math.exp(this.goalLogFov));\n    }\n    /**\n     * Sets the near and far planes of the camera.\n     */\n\n  }, {\n    key: \"updateNearFar\",\n    value: function updateNearFar(nearPlane, farPlane) {\n      this.camera.near = Math.max(nearPlane, farPlane / 1000);\n      this.camera.far = farPlane;\n      this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Sets the aspect ratio of the camera\n     */\n\n  }, {\n    key: \"updateAspect\",\n    value: function updateAspect(aspect) {\n      this.camera.aspect = aspect;\n      this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Set the absolute orbital goal of the camera. The change will be\n     * applied over a number of frames depending on configured acceleration and\n     * dampening _options.\n     *\n     * Returns true if invoking the method will result in the camera changing\n     * position and/or rotation, otherwise false.\n     */\n\n  }, {\n    key: \"setOrbit\",\n    value: function setOrbit() {\n      var goalTheta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.goalSpherical.theta;\n      var goalPhi = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.goalSpherical.phi;\n      var goalRadius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.goalSpherical.radius;\n      var _this$_options = this._options,\n          minimumAzimuthalAngle = _this$_options.minimumAzimuthalAngle,\n          maximumAzimuthalAngle = _this$_options.maximumAzimuthalAngle,\n          minimumPolarAngle = _this$_options.minimumPolarAngle,\n          maximumPolarAngle = _this$_options.maximumPolarAngle,\n          minimumRadius = _this$_options.minimumRadius,\n          maximumRadius = _this$_options.maximumRadius;\n      var _this$goalSpherical = this.goalSpherical,\n          theta = _this$goalSpherical.theta,\n          phi = _this$goalSpherical.phi,\n          radius = _this$goalSpherical.radius;\n      var nextTheta = clamp(goalTheta, minimumAzimuthalAngle, maximumAzimuthalAngle);\n\n      if (!isFinite(minimumAzimuthalAngle) && !isFinite(maximumAzimuthalAngle)) {\n        this.spherical.theta = this.wrapAngle(this.spherical.theta - nextTheta) + nextTheta;\n      }\n\n      var nextPhi = clamp(goalPhi, minimumPolarAngle, maximumPolarAngle);\n      var nextRadius = clamp(goalRadius, minimumRadius, maximumRadius);\n\n      if (nextTheta === theta && nextPhi === phi && nextRadius === radius) {\n        return false;\n      }\n\n      this.goalSpherical.theta = nextTheta;\n      this.goalSpherical.phi = nextPhi;\n      this.goalSpherical.radius = nextRadius;\n      this.goalSpherical.makeSafe();\n      this.isUserChange = false;\n      return true;\n    }\n    /**\n     * Subset of setOrbit() above, which only sets the camera's radius.\n     */\n\n  }, {\n    key: \"setRadius\",\n    value: function setRadius(radius) {\n      this.goalSpherical.radius = radius;\n      this.setOrbit();\n    }\n    /**\n     * Sets the goal field of view for the camera\n     */\n\n  }, {\n    key: \"setFieldOfView\",\n    value: function setFieldOfView(fov) {\n      var _this$_options2 = this._options,\n          minimumFieldOfView = _this$_options2.minimumFieldOfView,\n          maximumFieldOfView = _this$_options2.maximumFieldOfView;\n      fov = clamp(fov, minimumFieldOfView, maximumFieldOfView);\n      this.goalLogFov = Math.log(fov);\n    }\n    /**\n     * Sets the smoothing decay time.\n     */\n\n  }, {\n    key: \"setDamperDecayTime\",\n    value: function setDamperDecayTime(decayMilliseconds) {\n      this.thetaDamper.setDecayTime(decayMilliseconds);\n      this.phiDamper.setDecayTime(decayMilliseconds);\n      this.radiusDamper.setDecayTime(decayMilliseconds);\n      this.fovDamper.setDecayTime(decayMilliseconds);\n    }\n    /**\n     * Adjust the orbital position of the camera relative to its current orbital\n     * position. Does not let the theta goal get more than pi ahead of the current\n     * theta, which ensures interpolation continues in the direction of the delta.\n     * The deltaZoom parameter adjusts both the field of view and the orbit radius\n     * such that they progress across their allowed ranges in sync.\n     */\n\n  }, {\n    key: \"adjustOrbit\",\n    value: function adjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n      var _this$goalSpherical2 = this.goalSpherical,\n          theta = _this$goalSpherical2.theta,\n          phi = _this$goalSpherical2.phi,\n          radius = _this$goalSpherical2.radius;\n      var _this$_options3 = this._options,\n          minimumRadius = _this$_options3.minimumRadius,\n          maximumRadius = _this$_options3.maximumRadius,\n          minimumFieldOfView = _this$_options3.minimumFieldOfView,\n          maximumFieldOfView = _this$_options3.maximumFieldOfView;\n      var dTheta = this.spherical.theta - theta;\n      var dThetaLimit = Math.PI - 0.001;\n      var goalTheta = theta - clamp(deltaTheta, -dThetaLimit - dTheta, dThetaLimit - dTheta);\n      var goalPhi = phi - deltaPhi;\n      var deltaRatio = deltaZoom === 0 ? 0 : ((deltaZoom > 0 ? maximumRadius : minimumRadius) - radius) / (Math.log(deltaZoom > 0 ? maximumFieldOfView : minimumFieldOfView) - this.goalLogFov);\n      var goalRadius = radius + deltaZoom * Math.min(isFinite(deltaRatio) ? deltaRatio : Infinity, maximumRadius - minimumRadius);\n      this.setOrbit(goalTheta, goalPhi, goalRadius);\n\n      if (deltaZoom !== 0) {\n        var goalLogFov = this.goalLogFov + deltaZoom;\n        this.setFieldOfView(Math.exp(goalLogFov));\n      }\n    }\n    /**\n     * Move the camera instantly instead of accelerating toward the goal\n     * parameters.\n     */\n\n  }, {\n    key: \"jumpToGoal\",\n    value: function jumpToGoal() {\n      this.update(0, SETTLING_TIME);\n    }\n    /**\n     * Update controls. In most cases, this will result in the camera\n     * interpolating its position and rotation until it lines up with the\n     * designated goal orbital position.\n     *\n     * Time and delta are measured in milliseconds.\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(_time, delta) {\n      if (this.isStationary()) {\n        return;\n      }\n\n      var _this$_options4 = this._options,\n          maximumPolarAngle = _this$_options4.maximumPolarAngle,\n          maximumRadius = _this$_options4.maximumRadius;\n      var dTheta = this.spherical.theta - this.goalSpherical.theta;\n\n      if (Math.abs(dTheta) > Math.PI && !isFinite(this._options.minimumAzimuthalAngle) && !isFinite(this._options.maximumAzimuthalAngle)) {\n        this.spherical.theta -= Math.sign(dTheta) * 2 * Math.PI;\n      }\n\n      this.spherical.theta = this.thetaDamper.update(this.spherical.theta, this.goalSpherical.theta, delta, Math.PI);\n      this.spherical.phi = this.phiDamper.update(this.spherical.phi, this.goalSpherical.phi, delta, maximumPolarAngle);\n      this.spherical.radius = this.radiusDamper.update(this.spherical.radius, this.goalSpherical.radius, delta, maximumRadius);\n      this.logFov = this.fovDamper.update(this.logFov, this.goalLogFov, delta, 1);\n      this.moveCamera();\n    }\n  }, {\n    key: \"isStationary\",\n    value: function isStationary() {\n      return this.goalSpherical.theta === this.spherical.theta && this.goalSpherical.phi === this.spherical.phi && this.goalSpherical.radius === this.spherical.radius && this.goalLogFov === this.logFov;\n    }\n  }, {\n    key: \"moveCamera\",\n    value: function moveCamera() {\n      // Derive the new camera position from the updated spherical:\n      this.spherical.makeSafe();\n      this.camera.position.setFromSpherical(this.spherical);\n      this.camera.setRotationFromEuler(new Euler(this.spherical.phi - Math.PI / 2, this.spherical.theta, 0, 'YXZ'));\n\n      if (this.camera.fov !== Math.exp(this.logFov)) {\n        this.camera.fov = Math.exp(this.logFov);\n        this.camera.updateProjectionMatrix();\n      }\n\n      var source = this.isUserChange ? ChangeSource.USER_INTERACTION : ChangeSource.NONE;\n      this.dispatchEvent({\n        type: 'change',\n        source: source\n      });\n    }\n  }, {\n    key: \"canInteract\",\n    get: function get() {\n      if (this._options.interactionPolicy == 'allow-when-focused') {\n        var rootNode = this.element.getRootNode();\n        return rootNode.activeElement === this.element;\n      }\n\n      return this._options.interactionPolicy === 'always-allow';\n    }\n  }, {\n    key: \"userAdjustOrbit\",\n    value: function userAdjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n      this.adjustOrbit(deltaTheta * this.sensitivity, deltaPhi * this.sensitivity, deltaZoom);\n      this.isUserChange = true; // Always make sure that an initial event is triggered in case there is\n      // contention between user interaction and imperative changes. This initial\n      // event will give external observers that chance to observe that\n      // interaction occurred at all:\n\n      this.dispatchEvent({\n        type: 'change',\n        source: ChangeSource.USER_INTERACTION\n      });\n    } // Wraps to bewteen -pi and pi\n\n  }, {\n    key: \"wrapAngle\",\n    value: function wrapAngle(radians) {\n      var normalized = (radians + Math.PI) / (2 * Math.PI);\n      var wrapped = normalized - Math.floor(normalized);\n      return wrapped * 2 * Math.PI - Math.PI;\n    }\n  }, {\n    key: \"pixelLengthToSphericalAngle\",\n    value: function pixelLengthToSphericalAngle(pixelLength) {\n      return 2 * Math.PI * pixelLength / this.element.clientHeight;\n    }\n  }, {\n    key: \"twoTouchDistance\",\n    value: function twoTouchDistance(touchOne, touchTwo) {\n      var xOne = touchOne.clientX,\n          yOne = touchOne.clientY;\n      var xTwo = touchTwo.clientX,\n          yTwo = touchTwo.clientY;\n      var xDelta = xTwo - xOne;\n      var yDelta = yTwo - yOne;\n      return Math.sqrt(xDelta * xDelta + yDelta * yDelta);\n    }\n  }, {\n    key: \"handleSinglePointerMove\",\n    value: function handleSinglePointerMove(pointer) {\n      var clientX = pointer.clientX,\n          clientY = pointer.clientY;\n      var deltaTheta = this.pixelLengthToSphericalAngle(clientX - this.lastPointerPosition.clientX);\n      var deltaPhi = this.pixelLengthToSphericalAngle(clientY - this.lastPointerPosition.clientY);\n      this.lastPointerPosition.clientX = clientX;\n      this.lastPointerPosition.clientY = clientY;\n\n      if (this.isUserPointing === false) {\n        this.isUserPointing = true;\n        this.dispatchEvent({\n          type: 'pointer-change-start',\n          pointer: Object.assign({}, pointer)\n        });\n      }\n\n      this.userAdjustOrbit(deltaTheta, deltaPhi, 0);\n    }\n  }, {\n    key: \"handleSinglePointerDown\",\n    value: function handleSinglePointerDown(pointer) {\n      this.lastPointerPosition.clientX = pointer.clientX;\n      this.lastPointerPosition.clientY = pointer.clientY;\n      this.element.style.cursor = 'grabbing';\n    }\n  }]);\n\n  return SmoothControls;\n}(EventDispatcher);\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Adapted from https://gist.github.com/gre/1650294\n\n\nvar easeInOutQuad = function easeInOutQuad(t) {\n  return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n/**\n * Creates a TimingFunction that uses a given ease to interpolate between\n * two configured number values.\n */\n\n\nvar interpolate = function interpolate(start, end) {\n  var ease = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : easeInOutQuad;\n  return function (time) {\n    return start + (end - start) * ease(time);\n  };\n};\n/**\n * Creates a TimingFunction that interpolates through a weighted list\n * of other TimingFunctions (\"tracks\"). Tracks are interpolated in order, and\n * allocated a percentage of the total time based on their relative weight.\n */\n\n\nvar sequence = function sequence(tracks, weights) {\n  var totalWeight = weights.reduce(function (total, weight) {\n    return total + weight;\n  }, 0);\n  var ratios = weights.map(function (weight) {\n    return weight / totalWeight;\n  });\n  return function (time) {\n    var start = 0;\n    var ratio = Infinity;\n\n    var track = function track() {\n      return 0;\n    };\n\n    for (var _i369 = 0; _i369 < ratios.length; ++_i369) {\n      ratio = ratios[_i369];\n      track = tracks[_i369];\n\n      if (time <= start + ratio) {\n        break;\n      }\n\n      start += ratio;\n    }\n\n    return track((time - start) / ratio);\n  };\n};\n/**\n * Creates a \"timeline\" TimingFunction out of an initial value and a series of\n * Keyframes. The timeline function accepts value from 0-1 and returns the\n * current value based on keyframe interpolation across the total number of\n * frames. Frames are only used to indicate the relative length of each keyframe\n * transition, so interpolated values will be computed for fractional frames.\n */\n\n\nvar timeline = function timeline(initialValue, keyframes) {\n  var tracks = [];\n  var weights = [];\n  var lastValue = initialValue;\n\n  for (var _i370 = 0; _i370 < keyframes.length; ++_i370) {\n    var keyframe = keyframes[_i370];\n    var value = keyframe.value,\n        frames = keyframe.frames;\n    var ease = keyframe.ease || easeInOutQuad;\n    var track = interpolate(lastValue, value, ease);\n    tracks.push(track);\n    weights.push(frames);\n    lastValue = value;\n  }\n\n  return sequence(tracks, weights);\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // NOTE(cdata): The following \"animation\" timing functions are deliberately\n// being used in favor of CSS animations. In Safari 12.1 and 13, CSS animations\n// would cause the interaction prompt to glitch unexpectedly\n// @see https://github.com/google/model-viewer/issues/839\n\n\nvar PROMPT_ANIMATION_TIME = 5000; // For timing purposes, a \"frame\" is a timing agnostic relative unit of time\n// and a \"value\" is a target value for the keyframe.\n\nvar wiggle = timeline(0, [{\n  frames: 5,\n  value: -1\n}, {\n  frames: 1,\n  value: -1\n}, {\n  frames: 8,\n  value: 1\n}, {\n  frames: 1,\n  value: 1\n}, {\n  frames: 5,\n  value: 0\n}, {\n  frames: 18,\n  value: 0\n}]);\nvar fade = timeline(0, [{\n  frames: 1,\n  value: 1\n}, {\n  frames: 5,\n  value: 1\n}, {\n  frames: 1,\n  value: 0\n}, {\n  frames: 6,\n  value: 0\n}]);\nvar DEFAULT_CAMERA_ORBIT = '0deg 75deg 105%';\nvar DEFAULT_CAMERA_TARGET = 'auto auto auto';\nvar DEFAULT_FIELD_OF_VIEW = 'auto';\nvar MINIMUM_RADIUS_RATIO = 1.1 * SAFE_RADIUS_RATIO;\nvar AZIMUTHAL_QUADRANT_LABELS = ['front', 'right', 'back', 'left'];\nvar POLAR_TRIENT_LABELS = ['upper-', '', 'lower-'];\nvar DEFAULT_INTERACTION_PROMPT_THRESHOLD = 3000;\nvar INTERACTION_PROMPT = 'Use mouse, touch or arrow keys to control the camera!';\nvar InteractionPromptStrategy = {\n  AUTO: 'auto',\n  WHEN_FOCUSED: 'when-focused',\n  NONE: 'none'\n};\nvar InteractionPromptStyle = {\n  BASIC: 'basic',\n  WIGGLE: 'wiggle'\n};\nvar InteractionPolicy = {\n  ALWAYS_ALLOW: 'always-allow',\n  WHEN_FOCUSED: 'allow-when-focused'\n};\nvar TouchAction = {\n  PAN_Y: 'pan-y',\n  PAN_X: 'pan-x',\n  NONE: 'none'\n};\n\nvar fieldOfViewIntrinsics = function fieldOfViewIntrinsics(element) {\n  return {\n    basis: [numberNode(element[$zoomAdjustedFieldOfView] * Math.PI / 180, 'rad')],\n    keywords: {\n      auto: [null]\n    }\n  };\n};\n\nvar minFieldOfViewIntrinsics = {\n  basis: [degreesToRadians(numberNode(25, 'deg'))],\n  keywords: {\n    auto: [null]\n  }\n};\n\nvar maxFieldOfViewIntrinsics = function maxFieldOfViewIntrinsics(element) {\n  var scene = element[$scene];\n  return {\n    basis: [degreesToRadians(numberNode(45, 'deg'))],\n    keywords: {\n      auto: [numberNode(scene.framedFieldOfView, 'deg')]\n    }\n  };\n};\n\nvar cameraOrbitIntrinsics = function () {\n  var defaultTerms = parseExpressions(DEFAULT_CAMERA_ORBIT)[0].terms;\n  var theta = normalizeUnit(defaultTerms[0]);\n  var phi = normalizeUnit(defaultTerms[1]);\n  return function (element) {\n    var radius = element[$scene].idealCameraDistance;\n    return {\n      basis: [theta, phi, numberNode(radius, 'm')],\n      keywords: {\n        auto: [null, null, numberNode(105, '%')]\n      }\n    };\n  };\n}();\n\nvar minCameraOrbitIntrinsics = function minCameraOrbitIntrinsics(element) {\n  var radius = MINIMUM_RADIUS_RATIO * element[$scene].idealCameraDistance;\n  return {\n    basis: [numberNode(-Infinity, 'rad'), numberNode(Math.PI / 8, 'rad'), numberNode(radius, 'm')],\n    keywords: {\n      auto: [null, null, null]\n    }\n  };\n};\n\nvar maxCameraOrbitIntrinsics = function maxCameraOrbitIntrinsics(element) {\n  var orbitIntrinsics = cameraOrbitIntrinsics(element);\n  var evaluator = new StyleEvaluator([], orbitIntrinsics);\n  var defaultRadius = evaluator.evaluate()[2];\n  return {\n    basis: [numberNode(Infinity, 'rad'), numberNode(Math.PI - Math.PI / 8, 'rad'), numberNode(defaultRadius, 'm')],\n    keywords: {\n      auto: [null, null, null]\n    }\n  };\n};\n\nvar cameraTargetIntrinsics = function cameraTargetIntrinsics(element) {\n  var center = element[$scene].boundingBox.getCenter(new Vector3());\n  return {\n    basis: [numberNode(center.x, 'm'), numberNode(center.y, 'm'), numberNode(center.z, 'm')],\n    keywords: {\n      auto: [null, null, null]\n    }\n  };\n};\n\nvar HALF_PI = Math.PI / 2.0;\nvar THIRD_PI = Math.PI / 3.0;\nvar QUARTER_PI = HALF_PI / 2.0;\nvar TAU = 2.0 * Math.PI;\nvar $controls = Symbol('controls');\nvar $promptElement = Symbol('promptElement');\nvar $promptAnimatedContainer = Symbol('promptAnimatedContainer');\nvar $deferInteractionPrompt = Symbol('deferInteractionPrompt');\nvar $updateAria = Symbol('updateAria');\nvar $updateCameraForRadius = Symbol('updateCameraForRadius');\nvar $onBlur = Symbol('onBlur');\nvar $onFocus = Symbol('onFocus');\nvar $onChange = Symbol('onChange');\nvar $onPointerChange = Symbol('onPointerChange');\nvar $waitingToPromptUser = Symbol('waitingToPromptUser');\nvar $userHasInteracted = Symbol('userHasInteracted');\nvar $promptElementVisibleTime = Symbol('promptElementVisibleTime');\nvar $lastPromptOffset = Symbol('lastPromptOffset');\nvar $focusedTime = Symbol('focusedTime');\nvar $zoomAdjustedFieldOfView = Symbol('zoomAdjustedFieldOfView');\nvar $lastSpherical = Symbol('lastSpherical');\nvar $jumpCamera = Symbol('jumpCamera');\nvar $initialized = Symbol('initialized');\nvar $maintainThetaPhi = Symbol('maintainThetaPhi');\nvar $syncCameraOrbit = Symbol('syncCameraOrbit');\nvar $syncFieldOfView = Symbol('syncFieldOfView');\nvar $syncCameraTarget = Symbol('syncCameraTarget');\nvar $syncMinCameraOrbit = Symbol('syncMinCameraOrbit');\nvar $syncMaxCameraOrbit = Symbol('syncMaxCameraOrbit');\nvar $syncMinFieldOfView = Symbol('syncMinFieldOfView');\nvar $syncMaxFieldOfView = Symbol('syncMaxFieldOfView');\n\nvar ControlsMixin = function ControlsMixin(ModelViewerElement) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n\n  var ControlsModelViewerElement = /*#__PURE__*/function (_ModelViewerElement5, _ref31) {\n    _inherits(ControlsModelViewerElement, _ModelViewerElement5);\n\n    var _super145 = _createSuper(ControlsModelViewerElement);\n\n    function ControlsModelViewerElement() {\n      var _this160;\n\n      _classCallCheck(this, ControlsModelViewerElement);\n\n      _this160 = _super145.apply(this, arguments);\n      _this160.cameraControls = false;\n      _this160.cameraOrbit = DEFAULT_CAMERA_ORBIT;\n      _this160.cameraTarget = DEFAULT_CAMERA_TARGET;\n      _this160.fieldOfView = DEFAULT_FIELD_OF_VIEW;\n      _this160.minCameraOrbit = 'auto';\n      _this160.maxCameraOrbit = 'auto';\n      _this160.minFieldOfView = 'auto';\n      _this160.maxFieldOfView = 'auto';\n      _this160.interactionPromptThreshold = DEFAULT_INTERACTION_PROMPT_THRESHOLD;\n      _this160.interactionPromptStyle = InteractionPromptStyle.WIGGLE;\n      _this160.interactionPrompt = InteractionPromptStrategy.AUTO;\n      _this160.interactionPolicy = InteractionPolicy.ALWAYS_ALLOW;\n      _this160.orbitSensitivity = 1;\n      _this160.touchAction = TouchAction.PAN_Y;\n      _this160.disableZoom = false;\n      _this160.interpolationDecay = DECAY_MILLISECONDS;\n      _this160.bounds = 'legacy';\n      _this160[_a] = _this160.shadowRoot.querySelector('.interaction-prompt');\n      _this160[_b] = _this160.shadowRoot.querySelector('.interaction-prompt > .animated-container');\n      _this160[_c] = Infinity;\n      _this160[_d] = 0;\n      _this160[_e] = Infinity;\n      _this160[_f] = false;\n      _this160[_g] = false;\n      _this160[_h] = new SmoothControls(_this160[$scene].camera, _this160[$userInputElement]);\n      _this160[_j] = 0;\n      _this160[_k] = new Spherical();\n      _this160[_l] = false;\n      _this160[_m] = false;\n      _this160[_o] = false;\n\n      _this160[_p] = function () {\n        var input = _this160[$userInputElement];\n\n        if (!isFinite(_this160[$focusedTime])) {\n          _this160[$focusedTime] = performance.now();\n        } // NOTE(cdata): On every re-focus, we switch the aria-label back to\n        // the original, non-prompt label if appropriate. If the user has\n        // already interacted, they no longer need to hear the prompt.\n        // Otherwise, they will hear it again after the idle prompt threshold\n        // has been crossed.\n\n\n        var ariaLabel = _this160[$ariaLabel];\n\n        if (input.getAttribute('aria-label') !== ariaLabel) {\n          input.setAttribute('aria-label', ariaLabel);\n        }\n\n        if (_this160.interactionPrompt === InteractionPromptStrategy.WHEN_FOCUSED && !_this160[$userHasInteracted]) {\n          _this160[$waitingToPromptUser] = true;\n        }\n      };\n\n      _this160[_q] = function () {\n        if (_this160.interactionPrompt !== InteractionPromptStrategy.WHEN_FOCUSED) {\n          return;\n        }\n\n        _this160[$waitingToPromptUser] = false;\n\n        _this160[$promptElement].classList.remove('visible');\n\n        _this160[$promptElementVisibleTime] = Infinity;\n        _this160[$focusedTime] = Infinity;\n      };\n\n      _this160[_r] = function (_ref32) {\n        var source = _ref32.source;\n\n        _this160[$updateAria]();\n\n        _this160[$needsRender]();\n\n        if (source === ChangeSource.USER_INTERACTION) {\n          _this160[$userHasInteracted] = true;\n\n          _this160[$deferInteractionPrompt]();\n        }\n\n        _this160.dispatchEvent(new CustomEvent('camera-change', {\n          detail: {\n            source: source\n          }\n        }));\n      };\n\n      _this160[_s] = function (event) {\n        if (event.type === 'pointer-change-start') {\n          _this160[$container].classList.add('pointer-tumbling');\n        } else {\n          _this160[$container].classList.remove('pointer-tumbling');\n        }\n      };\n\n      return _this160;\n    }\n\n    _createClass(ControlsModelViewerElement, [{\n      key: \"getCameraOrbit\",\n      value: function getCameraOrbit() {\n        var _this$$lastSpherical = this[$lastSpherical],\n            theta = _this$$lastSpherical.theta,\n            phi = _this$$lastSpherical.phi,\n            radius = _this$$lastSpherical.radius;\n        return {\n          theta: theta,\n          phi: phi,\n          radius: radius,\n          toString: function toString() {\n            return \"\".concat(this.theta, \"rad \").concat(this.phi, \"rad \").concat(this.radius, \"m\");\n          }\n        };\n      }\n    }, {\n      key: \"getCameraTarget\",\n      value: function getCameraTarget() {\n        return toVector3D(this[$renderer].isPresenting ? this[$renderer].arRenderer.target : this[$scene].getTarget());\n      }\n    }, {\n      key: \"getFieldOfView\",\n      value: function getFieldOfView() {\n        return this[$controls].getFieldOfView();\n      } // Provided so user code does not have to parse these from attributes.\n\n    }, {\n      key: \"getMinimumFieldOfView\",\n      value: function getMinimumFieldOfView() {\n        return this[$controls].options.minimumFieldOfView;\n      }\n    }, {\n      key: \"getMaximumFieldOfView\",\n      value: function getMaximumFieldOfView() {\n        return this[$controls].options.maximumFieldOfView;\n      }\n    }, {\n      key: \"jumpCameraToGoal\",\n      value: function jumpCameraToGoal() {\n        this[$jumpCamera] = true;\n        this.requestUpdate($jumpCamera, false);\n      }\n    }, {\n      key: \"resetInteractionPrompt\",\n      value: function resetInteractionPrompt() {\n        this[$lastPromptOffset] = 0;\n        this[$promptElementVisibleTime] = Infinity;\n        this[$userHasInteracted] = false;\n        this[$waitingToPromptUser] = this.interactionPrompt === InteractionPromptStrategy.AUTO && this.cameraControls;\n      }\n    }, {\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), \"connectedCallback\", this).call(this);\n\n        this[$controls].addEventListener('change', this[$onChange]);\n        this[$controls].addEventListener('pointer-change-start', this[$onPointerChange]);\n        this[$controls].addEventListener('pointer-change-end', this[$onPointerChange]);\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        this[$controls].removeEventListener('change', this[$onChange]);\n        this[$controls].removeEventListener('pointer-change-start', this[$onPointerChange]);\n        this[$controls].removeEventListener('pointer-change-end', this[$onPointerChange]);\n      }\n    }, {\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        var _this161 = this;\n\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n        var controls = this[$controls];\n        var input = this[$userInputElement];\n\n        if (changedProperties.has('cameraControls')) {\n          if (this.cameraControls) {\n            controls.enableInteraction();\n\n            if (this.interactionPrompt === InteractionPromptStrategy.AUTO) {\n              this[$waitingToPromptUser] = true;\n            }\n\n            input.addEventListener('focus', this[$onFocus]);\n            input.addEventListener('blur', this[$onBlur]);\n          } else {\n            input.removeEventListener('focus', this[$onFocus]);\n            input.removeEventListener('blur', this[$onBlur]);\n            controls.disableInteraction();\n            this[$deferInteractionPrompt]();\n          }\n        }\n\n        if (changedProperties.has('disableZoom')) {\n          controls.disableZoom = this.disableZoom;\n        }\n\n        if (changedProperties.has('bounds')) {\n          this[$scene].tightBounds = this.bounds === 'tight';\n        }\n\n        if (changedProperties.has('interactionPrompt') || changedProperties.has('cameraControls') || changedProperties.has('src')) {\n          if (this.interactionPrompt === InteractionPromptStrategy.AUTO && this.cameraControls && !this[$userHasInteracted]) {\n            this[$waitingToPromptUser] = true;\n          } else {\n            this[$deferInteractionPrompt]();\n          }\n        }\n\n        if (changedProperties.has('interactionPromptStyle')) {\n          this[$promptElement].classList.toggle('wiggle', this.interactionPromptStyle === InteractionPromptStyle.WIGGLE);\n        }\n\n        if (changedProperties.has('interactionPolicy')) {\n          var interactionPolicy = this.interactionPolicy;\n          controls.applyOptions({\n            interactionPolicy: interactionPolicy\n          });\n        }\n\n        if (changedProperties.has('touchAction')) {\n          var touchAction = this.touchAction;\n          controls.applyOptions({\n            touchAction: touchAction\n          });\n        }\n\n        if (changedProperties.has('orbitSensitivity')) {\n          controls.sensitivity = this.orbitSensitivity;\n        }\n\n        if (changedProperties.has('interpolationDecay')) {\n          controls.setDamperDecayTime(this.interpolationDecay);\n          this[$scene].setTargetDamperDecayTime(this.interpolationDecay);\n        }\n\n        if (this[$jumpCamera] === true) {\n          Promise.resolve().then(function () {\n            controls.jumpToGoal();\n\n            _this161[$scene].jumpToGoal();\n\n            _this161[$jumpCamera] = false;\n          });\n        }\n      }\n    }, {\n      key: \"updateFraming\",\n      value: function () {\n        var _updateFraming = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee36() {\n          var scene, oldFramedFieldOfView, newFramedFieldOfView, zoom;\n          return _regeneratorRuntime.wrap(function _callee36$(_context38) {\n            while (1) {\n              switch (_context38.prev = _context38.next) {\n                case 0:\n                  scene = this[$scene];\n                  oldFramedFieldOfView = scene.framedFieldOfView;\n                  _context38.next = 4;\n                  return this.requestUpdate('cameraTarget');\n\n                case 4:\n                  scene.updateFraming(this.bounds === 'tight' ? scene.getTarget() : undefined);\n                  scene.frameModel();\n                  newFramedFieldOfView = scene.framedFieldOfView;\n                  zoom = this[$controls].getFieldOfView() / oldFramedFieldOfView;\n                  this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n                  this[$maintainThetaPhi] = true;\n                  this.requestUpdate('maxFieldOfView');\n                  this.requestUpdate('fieldOfView');\n                  this.requestUpdate('minCameraOrbit');\n                  this.requestUpdate('maxCameraOrbit');\n                  _context38.next = 16;\n                  return this.requestUpdate('cameraOrbit');\n\n                case 16:\n                case \"end\":\n                  return _context38.stop();\n              }\n            }\n          }, _callee36, this);\n        }));\n\n        function updateFraming() {\n          return _updateFraming.apply(this, arguments);\n        }\n\n        return updateFraming;\n      }()\n    }, {\n      key: _ref31,\n      value: function value(style) {\n        this[$controls].setFieldOfView(style[0] * 180 / Math.PI);\n      }\n    }, {\n      key: $syncCameraOrbit,\n      value: function value(style) {\n        if (this[$maintainThetaPhi]) {\n          var _this$getCameraOrbit = this.getCameraOrbit(),\n              theta = _this$getCameraOrbit.theta,\n              phi = _this$getCameraOrbit.phi;\n\n          style[0] = theta;\n          style[1] = phi;\n          this[$maintainThetaPhi] = false;\n        }\n\n        this[$controls].setOrbit(style[0], style[1], style[2]);\n      }\n    }, {\n      key: $syncMinCameraOrbit,\n      value: function value(style) {\n        this[$controls].applyOptions({\n          minimumAzimuthalAngle: style[0],\n          minimumPolarAngle: style[1],\n          minimumRadius: style[2]\n        });\n        this.jumpCameraToGoal();\n      }\n    }, {\n      key: $syncMaxCameraOrbit,\n      value: function value(style) {\n        this[$controls].applyOptions({\n          maximumAzimuthalAngle: style[0],\n          maximumPolarAngle: style[1],\n          maximumRadius: style[2]\n        });\n        this[$updateCameraForRadius](style[2]);\n        this.jumpCameraToGoal();\n      }\n    }, {\n      key: $syncMinFieldOfView,\n      value: function value(style) {\n        this[$controls].applyOptions({\n          minimumFieldOfView: style[0] * 180 / Math.PI\n        });\n        this.jumpCameraToGoal();\n      }\n    }, {\n      key: $syncMaxFieldOfView,\n      value: function value(style) {\n        this[$controls].applyOptions({\n          maximumFieldOfView: style[0] * 180 / Math.PI\n        });\n        this.jumpCameraToGoal();\n      }\n    }, {\n      key: $syncCameraTarget,\n      value: function value(style) {\n        var _style3 = _slicedToArray(style, 3),\n            x = _style3[0],\n            y = _style3[1],\n            z = _style3[2];\n\n        this[$scene].setTarget(x, y, z);\n        this[$renderer].arRenderer.updateTarget();\n      }\n    }, {\n      key: $tick,\n      value: function value(time, delta) {\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), $tick, this).call(this, time, delta);\n\n        if (this[$renderer].isPresenting || !this[$hasTransitioned]()) {\n          return;\n        }\n\n        var now = performance.now();\n\n        if (this[$waitingToPromptUser]) {\n          var thresholdTime = this.interactionPrompt === InteractionPromptStrategy.AUTO ? this[$loadedTime] : this[$focusedTime];\n\n          if (this.loaded && now > thresholdTime + this.interactionPromptThreshold) {\n            this[$userInputElement].setAttribute('aria-label', INTERACTION_PROMPT);\n            this[$waitingToPromptUser] = false;\n            this[$promptElementVisibleTime] = now;\n            this[$promptElement].classList.add('visible');\n          }\n        }\n\n        if (isFinite(this[$promptElementVisibleTime]) && this.interactionPromptStyle === InteractionPromptStyle.WIGGLE) {\n          var scene = this[$scene];\n          var animationTime = (now - this[$promptElementVisibleTime]) / PROMPT_ANIMATION_TIME % 1;\n          var offset = wiggle(animationTime);\n          var opacity = fade(animationTime);\n          this[$promptAnimatedContainer].style.opacity = \"\".concat(opacity);\n\n          if (offset !== this[$lastPromptOffset]) {\n            var xOffset = offset * scene.width * 0.05;\n            var deltaTheta = (offset - this[$lastPromptOffset]) * Math.PI / 16;\n            this[$promptAnimatedContainer].style.transform = \"translateX(\".concat(xOffset, \"px)\");\n            this[$controls].adjustOrbit(deltaTheta, 0, 0);\n            this[$lastPromptOffset] = offset;\n          }\n        }\n\n        this[$controls].update(time, delta);\n        this[$scene].updateTarget(delta);\n      }\n    }, {\n      key: $deferInteractionPrompt,\n      value: function value() {\n        // Effectively cancel the timer waiting for user interaction:\n        this[$waitingToPromptUser] = false;\n        this[$promptElement].classList.remove('visible');\n        this[$promptElementVisibleTime] = Infinity;\n      }\n      /**\n       * Updates the camera's near and far planes to enclose the scene when\n       * orbiting at the supplied radius.\n       */\n\n    }, {\n      key: $updateCameraForRadius,\n      value: function value(radius) {\n        var idealCameraDistance = this[$scene].idealCameraDistance;\n        var maximumRadius = Math.max(idealCameraDistance, radius);\n        var near = 0;\n        var far = 2 * maximumRadius;\n        this[$controls].updateNearFar(near, far);\n      }\n    }, {\n      key: $updateAria,\n      value: function value() {\n        // NOTE(cdata): It is possible that we might want to record the\n        // last spherical when the label actually changed. Right now, the\n        // side-effect the current implementation is that we will only\n        // announce the first view change that occurs after the element\n        // becomes focused.\n        var _this$$lastSpherical2 = this[$lastSpherical],\n            lastTheta = _this$$lastSpherical2.theta,\n            lastPhi = _this$$lastSpherical2.phi;\n\n        var _this$$controls$getCa = this[$controls].getCameraSpherical(this[$lastSpherical]),\n            theta = _this$$controls$getCa.theta,\n            phi = _this$$controls$getCa.phi;\n\n        var rootNode = this.getRootNode(); // Only change the aria-label if <model-viewer> is currently focused:\n\n        if (rootNode != null && rootNode.activeElement === this) {\n          var lastAzimuthalQuadrant = (4 + Math.floor((lastTheta % TAU + QUARTER_PI) / HALF_PI)) % 4;\n          var azimuthalQuadrant = (4 + Math.floor((theta % TAU + QUARTER_PI) / HALF_PI)) % 4;\n          var lastPolarTrient = Math.floor(lastPhi / THIRD_PI);\n          var polarTrient = Math.floor(phi / THIRD_PI);\n\n          if (azimuthalQuadrant !== lastAzimuthalQuadrant || polarTrient !== lastPolarTrient) {\n            var azimuthalQuadrantLabel = AZIMUTHAL_QUADRANT_LABELS[azimuthalQuadrant];\n            var polarTrientLabel = POLAR_TRIENT_LABELS[polarTrient];\n            var ariaLabel = \"View from stage \".concat(polarTrientLabel).concat(azimuthalQuadrantLabel);\n            this[$userInputElement].setAttribute('aria-label', ariaLabel);\n          }\n        }\n      }\n    }, {\n      key: $onResize,\n      value: function value(event) {\n        var controls = this[$controls];\n        var oldFramedFieldOfView = this[$scene].framedFieldOfView; // The super of $onResize will update the scene's framedFieldOfView, so we\n        // compare the before and after to calculate the proper zoom.\n\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), $onResize, this).call(this, event);\n\n        var newFramedFieldOfView = this[$scene].framedFieldOfView;\n        var zoom = controls.getFieldOfView() / oldFramedFieldOfView;\n        this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n        controls.updateAspect(this[$scene].aspect);\n        this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n        this.requestUpdate('fieldOfView', this.fieldOfView);\n        this.jumpCameraToGoal();\n      }\n    }, {\n      key: $onModelLoad,\n      value: function value() {\n        _get(_getPrototypeOf(ControlsModelViewerElement.prototype), $onModelLoad, this).call(this);\n\n        var framedFieldOfView = this[$scene].framedFieldOfView;\n        this[$zoomAdjustedFieldOfView] = framedFieldOfView;\n\n        if (this[$initialized]) {\n          this[$maintainThetaPhi] = true;\n        } else {\n          this[$initialized] = true;\n        }\n\n        this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n        this.requestUpdate('fieldOfView', this.fieldOfView);\n        this.requestUpdate('minCameraOrbit', this.minCameraOrbit);\n        this.requestUpdate('maxCameraOrbit', this.maxCameraOrbit);\n        this.requestUpdate('cameraOrbit', this.cameraOrbit);\n        this.requestUpdate('cameraTarget', this.cameraTarget);\n        this.jumpCameraToGoal();\n      }\n    }]);\n\n    return ControlsModelViewerElement;\n  }(ModelViewerElement, (_a = $promptElement, _b = $promptAnimatedContainer, _c = $focusedTime, _d = $lastPromptOffset, _e = $promptElementVisibleTime, _f = $userHasInteracted, _g = $waitingToPromptUser, _h = $controls, _j = $zoomAdjustedFieldOfView, _k = $lastSpherical, _l = $jumpCamera, _m = $initialized, _o = $maintainThetaPhi, $syncFieldOfView));\n\n  _p = $onFocus, _q = $onBlur, _r = $onChange, _s = $onPointerChange;\n\n  __decorate$3([property({\n    type: Boolean,\n    attribute: 'camera-controls'\n  })], ControlsModelViewerElement.prototype, \"cameraControls\", void 0);\n\n  __decorate$3([style({\n    intrinsics: cameraOrbitIntrinsics,\n    observeEffects: true,\n    updateHandler: $syncCameraOrbit\n  }), property({\n    type: String,\n    attribute: 'camera-orbit',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"cameraOrbit\", void 0);\n\n  __decorate$3([style({\n    intrinsics: cameraTargetIntrinsics,\n    observeEffects: true,\n    updateHandler: $syncCameraTarget\n  }), property({\n    type: String,\n    attribute: 'camera-target',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"cameraTarget\", void 0);\n\n  __decorate$3([style({\n    intrinsics: fieldOfViewIntrinsics,\n    observeEffects: true,\n    updateHandler: $syncFieldOfView\n  }), property({\n    type: String,\n    attribute: 'field-of-view',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"fieldOfView\", void 0);\n\n  __decorate$3([style({\n    intrinsics: minCameraOrbitIntrinsics,\n    updateHandler: $syncMinCameraOrbit\n  }), property({\n    type: String,\n    attribute: 'min-camera-orbit',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"minCameraOrbit\", void 0);\n\n  __decorate$3([style({\n    intrinsics: maxCameraOrbitIntrinsics,\n    updateHandler: $syncMaxCameraOrbit\n  }), property({\n    type: String,\n    attribute: 'max-camera-orbit',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"maxCameraOrbit\", void 0);\n\n  __decorate$3([style({\n    intrinsics: minFieldOfViewIntrinsics,\n    updateHandler: $syncMinFieldOfView\n  }), property({\n    type: String,\n    attribute: 'min-field-of-view',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"minFieldOfView\", void 0);\n\n  __decorate$3([style({\n    intrinsics: maxFieldOfViewIntrinsics,\n    updateHandler: $syncMaxFieldOfView\n  }), property({\n    type: String,\n    attribute: 'max-field-of-view',\n    hasChanged: function hasChanged() {\n      return true;\n    }\n  })], ControlsModelViewerElement.prototype, \"maxFieldOfView\", void 0);\n\n  __decorate$3([property({\n    type: Number,\n    attribute: 'interaction-prompt-threshold'\n  })], ControlsModelViewerElement.prototype, \"interactionPromptThreshold\", void 0);\n\n  __decorate$3([property({\n    type: String,\n    attribute: 'interaction-prompt-style'\n  })], ControlsModelViewerElement.prototype, \"interactionPromptStyle\", void 0);\n\n  __decorate$3([property({\n    type: String,\n    attribute: 'interaction-prompt'\n  })], ControlsModelViewerElement.prototype, \"interactionPrompt\", void 0);\n\n  __decorate$3([property({\n    type: String,\n    attribute: 'interaction-policy'\n  })], ControlsModelViewerElement.prototype, \"interactionPolicy\", void 0);\n\n  __decorate$3([property({\n    type: Number,\n    attribute: 'orbit-sensitivity'\n  })], ControlsModelViewerElement.prototype, \"orbitSensitivity\", void 0);\n\n  __decorate$3([property({\n    type: String,\n    attribute: 'touch-action'\n  })], ControlsModelViewerElement.prototype, \"touchAction\", void 0);\n\n  __decorate$3([property({\n    type: Boolean,\n    attribute: 'disable-zoom'\n  })], ControlsModelViewerElement.prototype, \"disableZoom\", void 0);\n\n  __decorate$3([property({\n    type: Number,\n    attribute: 'interpolation-decay'\n  })], ControlsModelViewerElement.prototype, \"interpolationDecay\", void 0);\n\n  __decorate$3([property({\n    type: String,\n    attribute: 'bounds'\n  })], ControlsModelViewerElement.prototype, \"bounds\", void 0);\n\n  return ControlsModelViewerElement;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$2, _b;\n\nvar INITIAL_STATUS_ANNOUNCEMENT = 'This page includes one or more 3D models that are loading';\nvar FINISHED_LOADING_ANNOUNCEMENT = 'All 3D models in the page have loaded';\nvar UPDATE_STATUS_DEBOUNCE_MS = 100;\nvar $modelViewerStatusInstance = Symbol('modelViewerStatusInstance');\nvar $updateStatus = Symbol('updateStatus');\n/**\n * The LoadingStatusAnnouncer manages announcements of loading status across\n * all <model-viewer> elements in the document at any given time. As new\n * <model-viewer> elements are connected to the document, they are registered\n * with a LoadingStatusAnnouncer singleton. As they are disconnected, the are\n * also unregistered. Announcements are made to indicate the following\n * conditions:\n *\n *  1. There are <model-viewer> elements that have yet to finish loading\n *  2. All <model-viewer> elements in the page have finished attempting to load\n */\n\nvar LoadingStatusAnnouncer = /*#__PURE__*/function (_EventDispatcher13) {\n  _inherits(LoadingStatusAnnouncer, _EventDispatcher13);\n\n  var _super146 = _createSuper(LoadingStatusAnnouncer);\n\n  function LoadingStatusAnnouncer() {\n    var _this162;\n\n    _classCallCheck(this, LoadingStatusAnnouncer);\n\n    _this162 = _super146.call(this);\n    /**\n     * The \"status\" instance is the <model-viewer> instance currently designated\n     * to announce the loading status of all <model-viewer> elements in the\n     * document at any given time. It might change as <model-viewer> elements are\n     * attached or detached over time.\n     */\n\n    _this162[_a$2] = null;\n    _this162.registeredInstanceStatuses = new Map();\n    _this162.loadingPromises = [];\n    /**\n     * This element is a node that floats around the document as the status\n     * instance changes (see above). It is a singleton that represents the loading\n     * status for all <model-viewer> elements currently in the page. It has its\n     * role attribute set to \"status\", which causes screen readers to announce\n     * any changes to its text content.\n     *\n     * @see https://www.w3.org/TR/wai-aria-1.1/#status\n     */\n\n    _this162.statusElement = document.createElement('p');\n    _this162.statusUpdateInProgress = false;\n    _this162[_b] = debounce(function () {\n      return _this162.updateStatus();\n    }, UPDATE_STATUS_DEBOUNCE_MS);\n\n    var _assertThisInitialize = _assertThisInitialized(_this162),\n        statusElement = _assertThisInitialize.statusElement;\n\n    var style = statusElement.style;\n    statusElement.setAttribute('role', 'status');\n    statusElement.classList.add('screen-reader-only');\n    style.top = style.left = '0';\n    style.pointerEvents = 'none';\n    return _this162;\n  }\n  /**\n   * Register a <model-viewer> element with the announcer. If it is not yet\n   * loaded, its loading status will be tracked by the announcer.\n   */\n\n\n  _createClass(LoadingStatusAnnouncer, [{\n    key: \"registerInstance\",\n    value: function registerInstance(modelViewer) {\n      if (this.registeredInstanceStatuses.has(modelViewer)) {\n        return;\n      }\n\n      var onUnregistered = function onUnregistered() {};\n\n      var loadShouldBeMeasured = modelViewer.loaded === false && !!modelViewer.src;\n      var loadAttemptCompletes = new Promise(function (resolve) {\n        if (!loadShouldBeMeasured) {\n          resolve();\n          return;\n        }\n\n        var resolveHandler = function resolveHandler() {\n          resolve();\n          modelViewer.removeEventListener('load', resolveHandler);\n          modelViewer.removeEventListener('error', resolveHandler);\n        };\n\n        modelViewer.addEventListener('load', resolveHandler);\n        modelViewer.addEventListener('error', resolveHandler);\n        onUnregistered = resolveHandler;\n      });\n      this.registeredInstanceStatuses.set(modelViewer, {\n        onUnregistered: onUnregistered\n      });\n      this.loadingPromises.push(loadAttemptCompletes);\n\n      if (this.modelViewerStatusInstance == null) {\n        this.modelViewerStatusInstance = modelViewer;\n      }\n    }\n    /**\n     * Unregister a <model-viewer> element with the announcer. Its loading status\n     * will no longer be tracked by the announcer.\n     */\n\n  }, {\n    key: \"unregisterInstance\",\n    value: function unregisterInstance(modelViewer) {\n      if (!this.registeredInstanceStatuses.has(modelViewer)) {\n        return;\n      }\n\n      var statuses = this.registeredInstanceStatuses;\n      var instanceStatus = statuses.get(modelViewer);\n      statuses.delete(modelViewer);\n      instanceStatus.onUnregistered();\n\n      if (this.modelViewerStatusInstance === modelViewer) {\n        this.modelViewerStatusInstance = statuses.size > 0 ? getFirstMapKey(statuses) : null;\n      }\n    }\n  }, {\n    key: \"modelViewerStatusInstance\",\n    get: function get() {\n      return this[$modelViewerStatusInstance];\n    },\n    set: function set(value) {\n      var currentInstance = this[$modelViewerStatusInstance];\n\n      if (currentInstance === value) {\n        return;\n      }\n\n      var statusElement = this.statusElement;\n\n      if (value != null && value.shadowRoot != null) {\n        value.shadowRoot.appendChild(statusElement);\n      } else if (statusElement.parentNode != null) {\n        statusElement.parentNode.removeChild(statusElement);\n      }\n\n      this[$modelViewerStatusInstance] = value;\n      this[$updateStatus]();\n    }\n  }, {\n    key: \"updateStatus\",\n    value: function () {\n      var _updateStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee37() {\n        var loadingPromises;\n        return _regeneratorRuntime.wrap(function _callee37$(_context39) {\n          while (1) {\n            switch (_context39.prev = _context39.next) {\n              case 0:\n                if (!(this.statusUpdateInProgress || this.loadingPromises.length === 0)) {\n                  _context39.next = 2;\n                  break;\n                }\n\n                return _context39.abrupt(\"return\");\n\n              case 2:\n                this.statusElement.textContent = INITIAL_STATUS_ANNOUNCEMENT;\n                this.statusUpdateInProgress = true;\n                this.dispatchEvent({\n                  type: 'initial-status-announced'\n                });\n\n              case 5:\n                if (!this.loadingPromises.length) {\n                  _context39.next = 12;\n                  break;\n                }\n\n                loadingPromises = this.loadingPromises;\n                this.loadingPromises = [];\n                _context39.next = 10;\n                return Promise.all(loadingPromises);\n\n              case 10:\n                _context39.next = 5;\n                break;\n\n              case 12:\n                this.statusElement.textContent = FINISHED_LOADING_ANNOUNCEMENT;\n                this.statusUpdateInProgress = false;\n                this.dispatchEvent({\n                  type: 'finished-loading-announced'\n                });\n\n              case 15:\n              case \"end\":\n                return _context39.stop();\n            }\n          }\n        }, _callee37, this);\n      }));\n\n      function updateStatus() {\n        return _updateStatus.apply(this, arguments);\n      }\n\n      return updateStatus;\n    }()\n  }]);\n\n  return LoadingStatusAnnouncer;\n}(EventDispatcher);\n\n_a$2 = $modelViewerStatusInstance, _b = $updateStatus;\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar PROGRESS_BAR_UPDATE_THRESHOLD = 100;\nvar PROGRESS_MASK_BASE_OPACITY = 0.2;\nvar DEFAULT_DRACO_DECODER_LOCATION = 'https://www.gstatic.com/draco/versioned/decoders/1.3.6/';\nvar DEFAULT_KTX2_TRANSCODER_LOCATION = 'https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/';\nvar SPACE_KEY = 32;\nvar ENTER_KEY = 13;\nvar RevealStrategy = {\n  AUTO: 'auto',\n  INTERACTION: 'interaction',\n  MANUAL: 'manual'\n};\nvar LoadingStrategy = {\n  AUTO: 'auto',\n  LAZY: 'lazy',\n  EAGER: 'eager'\n};\nvar PosterDismissalSource = {\n  INTERACTION: 'interaction'\n};\nvar loadingStatusAnnouncer = new LoadingStatusAnnouncer();\nvar $defaultProgressBarElement = Symbol('defaultProgressBarElement');\nvar $defaultProgressMaskElement = Symbol('defaultProgressMaskElement');\nvar $posterContainerElement = Symbol('posterContainerElement');\nvar $defaultPosterElement = Symbol('defaultPosterElement');\nvar $posterDismissalSource = Symbol('posterDismissalSource');\nvar $hidePoster = Symbol('hidePoster');\nvar $modelIsRevealed = Symbol('modelIsRevealed');\nvar $updateProgressBar = Symbol('updateProgressBar');\nvar $lastReportedProgress = Symbol('lastReportedProgress');\nvar $transitioned = Symbol('transitioned');\nvar $ariaLabelCallToAction = Symbol('ariaLabelCallToAction');\nvar $onClick = Symbol('onClick');\nvar $onKeydown = Symbol('onKeydown');\nvar $onProgress = Symbol('onProgress');\n/**\n * LoadingMixin implements features related to lazy loading, as well as\n * presentation details related to the pre-load / pre-render presentation of a\n * <model-viewer>\n *\n * This mixin implements support for models with DRACO-compressed meshes.\n * The DRACO decoder will be loaded on-demand if a glTF that uses the DRACO mesh\n * compression extension is encountered.\n *\n * By default, the DRACO decoder will be loaded from a Google CDN. It is\n * possible to customize where the decoder is loaded from by defining a global\n * configuration option for `<model-viewer>` like so:\n *\n * ```html\n * <script>\n * ModelViewerElement = self.ModelViewerElement || {};\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration strategy must be performed *before* the\n * first `<model-viewer>` element is created in the browser. The configuration\n * can be done anywhere, but the easiest way to ensure it is done at the right\n * time is to do it in the `<head>` of the HTML document. This is the\n * recommended way to set the location because it is most compatible with\n * scenarios where the `<model-viewer>` library is lazily loaded.\n *\n * If you absolutely have to set the DRACO decoder location *after* the first\n * `<model-viewer>` element is created, you can do it this way:\n *\n * ```html\n * <script>\n * const ModelViewerElement = customElements.get('model-viewer');\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration approach will not work until *after*\n * `<model-viewer>` is defined in the browser. Also note that this configuration\n * *must* be set *before* the first DRACO model is fully loaded.\n *\n * It is recommended that users who intend to take advantage of DRACO mesh\n * compression consider whether or not it is acceptable for their use case to\n * have code side-loaded from a Google CDN. If it is not acceptable, then the\n * location must be customized before loading any DRACO models in order to cause\n * the decoder to be loaded from an alternative, acceptable location.\n */\n\nvar LoadingMixin = function LoadingMixin(ModelViewerElement) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n\n  var LoadingModelViewerElement = /*#__PURE__*/function (_ModelViewerElement6, _ref33) {\n    _inherits(LoadingModelViewerElement, _ModelViewerElement6);\n\n    var _super147 = _createSuper(LoadingModelViewerElement);\n\n    function LoadingModelViewerElement() {\n      var _this163;\n\n      _classCallCheck(this, LoadingModelViewerElement);\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key4 = 0; _key4 < _len2; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      _this163 = _super147.call.apply(_super147, [this].concat(args));\n      /**\n       * A URL pointing to the image to use as a poster in scenarios where the\n       * <model-viewer> is not ready to reveal a rendered model to the viewer.\n       */\n\n      _this163.poster = null;\n      /**\n       * An enumerable attribute describing under what conditions the\n       * <model-viewer> should reveal a model to the viewer.\n       *\n       * The default value is \"auto\". The only supported alternative values are\n       * \"interaction\" and \"manual\".\n       */\n\n      _this163.reveal = RevealStrategy.AUTO;\n      /**\n       * An enumerable attribute describing under what conditions the\n       * <model-viewer> should preload a model.\n       *\n       * The default value is \"auto\". The only supported alternative values are\n       * \"lazy\" and \"eager\". Auto is equivalent to lazy, which loads the model\n       * when it is near the viewport for reveal = \"auto\", and when interacted\n       * with for reveal = \"interaction\". Eager loads the model immediately.\n       */\n\n      _this163.loading = LoadingStrategy.AUTO;\n      _this163[_a] = false;\n      _this163[_b] = false;\n      _this163[_c] = 0;\n      _this163[_d] = null; // TODO: Add this to the shadow root as part of this mixin's\n      // implementation:\n\n      _this163[_e] = _this163.shadowRoot.querySelector('.slot.poster');\n      _this163[_f] = _this163.shadowRoot.querySelector('#default-poster');\n      _this163[_g] = _this163.shadowRoot.querySelector('#default-progress-bar > .bar');\n      _this163[_h] = _this163.shadowRoot.querySelector('#default-progress-bar > .mask');\n      _this163[_j] = _this163[$defaultPosterElement].getAttribute('aria-label');\n      _this163[_k] = throttle(function (progress) {\n        var parentNode = _this163[$defaultProgressBarElement].parentNode;\n        requestAnimationFrame(function () {\n          _this163[$defaultProgressMaskElement].style.opacity = \"\".concat((1.0 - progress) * PROGRESS_MASK_BASE_OPACITY);\n          _this163[$defaultProgressBarElement].style.transform = \"scaleX(\".concat(progress, \")\");\n\n          if (progress === 0) {\n            // NOTE(cdata): We remove and re-append the progress bar in this\n            // condition so that the progress bar does not appear to\n            // transition backwards from the right when we reset to 0 (or\n            // otherwise <1) progress after having already reached 1 progress\n            // previously.\n            parentNode.removeChild(_this163[$defaultProgressBarElement]);\n            parentNode.appendChild(_this163[$defaultProgressBarElement]);\n          } // NOTE(cdata): IE11 does not properly respect the second parameter\n          // of classList.toggle, which this implementation originally used.\n          // @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11865865/\n\n\n          if (progress === 1.0) {\n            _this163[$defaultProgressBarElement].classList.add('hide');\n          } else {\n            _this163[$defaultProgressBarElement].classList.remove('hide');\n          }\n        });\n      }, PROGRESS_BAR_UPDATE_THRESHOLD);\n\n      _this163[_l] = function () {\n        if (_this163.reveal === RevealStrategy.MANUAL) {\n          return;\n        }\n\n        _this163.dismissPoster();\n      };\n\n      _this163[_m] = function (event) {\n        if (_this163.reveal === RevealStrategy.MANUAL) {\n          return;\n        }\n\n        switch (event.keyCode) {\n          // NOTE(cdata): Links and buttons can typically be activated with\n          // both spacebar and enter to produce a synthetic click action\n          case SPACE_KEY:\n          case ENTER_KEY:\n            _this163.dismissPoster();\n\n            break;\n        }\n      };\n\n      _this163[_o] = function (event) {\n        var progress = event.detail.totalProgress;\n        _this163[$lastReportedProgress] = Math.max(progress, _this163[$lastReportedProgress]);\n\n        if (progress === 1.0) {\n          _this163[$updateProgressBar].flush();\n\n          if (_this163[$sceneIsReady]() && (_this163[$posterDismissalSource] != null || _this163.reveal === RevealStrategy.AUTO)) {\n            _this163[$hidePoster]();\n          }\n        }\n\n        _this163[$updateProgressBar](progress);\n\n        _this163.dispatchEvent(new CustomEvent('progress', {\n          detail: {\n            totalProgress: progress\n          }\n        }));\n      };\n\n      var ModelViewerElement = self.ModelViewerElement || {};\n      var dracoDecoderLocation = ModelViewerElement.dracoDecoderLocation || DEFAULT_DRACO_DECODER_LOCATION;\n      CachingGLTFLoader.setDRACODecoderLocation(dracoDecoderLocation);\n      var ktx2TranscoderLocation = ModelViewerElement.ktx2TranscoderLocation || DEFAULT_KTX2_TRANSCODER_LOCATION;\n      CachingGLTFLoader.setKTX2TranscoderLocation(ktx2TranscoderLocation);\n      return _this163;\n    }\n\n    _createClass(LoadingModelViewerElement, [{\n      key: \"dismissPoster\",\n      value:\n      /**\n       * Dismisses the poster, causing the model to load and render if\n       * necessary. This is currently effectively the same as interacting with\n       * the poster via user input.\n       */\n      function dismissPoster() {\n        if (this[$sceneIsReady]()) {\n          this[$hidePoster]();\n        } else {\n          this[$posterDismissalSource] = PosterDismissalSource.INTERACTION;\n          this[$updateSource]();\n        }\n      }\n      /**\n       * Displays the poster, hiding the 3D model. If this is called after the 3D\n       * model has been revealed, then it will behave as though\n       * reveal='interaction', being dismissed either by a user click or a call to\n       * dismissPoster().\n       */\n\n    }, {\n      key: \"showPoster\",\n      value: function showPoster() {\n        var posterContainerElement = this[$posterContainerElement];\n        var defaultPosterElement = this[$defaultPosterElement];\n        defaultPosterElement.removeAttribute('tabindex');\n        defaultPosterElement.removeAttribute('aria-hidden');\n        posterContainerElement.classList.add('show');\n        var oldVisibility = this.modelIsVisible;\n        this[$modelIsRevealed] = false;\n        this[$announceModelVisibility](oldVisibility);\n        this[$transitioned] = false;\n      }\n      /**\n       * Returns the model's bounding box dimensions in meters, independent of\n       * turntable rotation.\n       */\n\n    }, {\n      key: \"getDimensions\",\n      value: function getDimensions() {\n        return toVector3D(this[$scene].size);\n      }\n    }, {\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(LoadingModelViewerElement.prototype), \"connectedCallback\", this).call(this); // Fired when a user first clicks the model element. Used to\n        // change the visibility of a poster image, or start loading\n        // a model.\n\n\n        this[$posterContainerElement].addEventListener('click', this[$onClick]);\n        this[$posterContainerElement].addEventListener('keydown', this[$onKeydown]);\n        this[$progressTracker].addEventListener('progress', this[$onProgress]);\n        loadingStatusAnnouncer.registerInstance(this);\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(LoadingModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        this[$posterContainerElement].removeEventListener('click', this[$onClick]);\n        this[$posterContainerElement].removeEventListener('keydown', this[$onKeydown]);\n        this[$progressTracker].removeEventListener('progress', this[$onProgress]);\n        loadingStatusAnnouncer.unregisterInstance(this);\n      }\n    }, {\n      key: \"updated\",\n      value: function () {\n        var _updated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee38(changedProperties) {\n          return _regeneratorRuntime.wrap(function _callee38$(_context40) {\n            while (1) {\n              switch (_context40.prev = _context40.next) {\n                case 0:\n                  _get(_getPrototypeOf(LoadingModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n                  if (changedProperties.has('poster') && this.poster != null) {\n                    this[$defaultPosterElement].style.backgroundImage = \"url(\".concat(this.poster, \")\");\n                  }\n\n                  if (changedProperties.has('alt')) {\n                    this[$defaultPosterElement].setAttribute('aria-label', \"\".concat(this[$ariaLabel], \". \").concat(this[$ariaLabelCallToAction]));\n                  }\n\n                  if (changedProperties.has('reveal') || changedProperties.has('loading')) {\n                    this[$updateSource]();\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context40.stop();\n              }\n            }\n          }, _callee38, this);\n        }));\n\n        function updated(_x38) {\n          return _updated.apply(this, arguments);\n        }\n\n        return updated;\n      }()\n    }, {\n      key: _ref33,\n      value: function value() {\n        return !!this.src && (this[$posterDismissalSource] != null || this.loading === LoadingStrategy.EAGER || this.reveal === RevealStrategy.AUTO && this[$isElementInViewport]);\n      }\n    }, {\n      key: $sceneIsReady,\n      value: function value() {\n        var src = this.src;\n        return !!src && _get(_getPrototypeOf(LoadingModelViewerElement.prototype), $sceneIsReady, this).call(this) && this[$lastReportedProgress] === 1.0;\n      }\n    }, {\n      key: $hidePoster,\n      value: function value() {\n        var _this164 = this;\n\n        this[$posterDismissalSource] = null;\n        var posterContainerElement = this[$posterContainerElement];\n        var defaultPosterElement = this[$defaultPosterElement];\n\n        if (posterContainerElement.classList.contains('show')) {\n          posterContainerElement.classList.remove('show');\n          var oldVisibility = this.modelIsVisible;\n          this[$modelIsRevealed] = true;\n          this[$announceModelVisibility](oldVisibility); // We might need to forward focus to our internal canvas, but that\n          // cannot happen until the poster has completely transitioned away\n\n          posterContainerElement.addEventListener('transitionend', function () {\n            requestAnimationFrame(function () {\n              _this164[$transitioned] = true;\n\n              var root = _this164.getRootNode(); // If the <model-viewer> is still focused, forward the focus to\n              // the canvas that has just been revealed\n\n\n              if (root && root.activeElement === _this164) {\n                _this164[$userInputElement].focus();\n              } // Ensure that the poster is no longer focusable or visible to\n              // screen readers\n\n\n              defaultPosterElement.setAttribute('aria-hidden', 'true');\n              defaultPosterElement.tabIndex = -1;\n\n              _this164.dispatchEvent(new CustomEvent('poster-dismissed'));\n            });\n          }, {\n            once: true\n          });\n        }\n      }\n    }, {\n      key: $getModelIsVisible,\n      value: function value() {\n        return _get(_getPrototypeOf(LoadingModelViewerElement.prototype), $getModelIsVisible, this).call(this) && this[$modelIsRevealed];\n      }\n    }, {\n      key: $hasTransitioned,\n      value: function value() {\n        return _get(_getPrototypeOf(LoadingModelViewerElement.prototype), $hasTransitioned, this).call(this) && this[$transitioned];\n      }\n    }, {\n      key: $updateSource,\n      value: function () {\n        var _value10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee39() {\n          return _regeneratorRuntime.wrap(function _callee39$(_context41) {\n            while (1) {\n              switch (_context41.prev = _context41.next) {\n                case 0:\n                  this[$lastReportedProgress] = 0;\n\n                  if (this[$scene].currentGLTF == null || this.src == null || !this[$shouldAttemptPreload]()) {\n                    // Don't show the poster when switching models.\n                    this.showPoster();\n                  }\n\n                  _context41.next = 4;\n                  return _get(_getPrototypeOf(LoadingModelViewerElement.prototype), $updateSource, this).call(this);\n\n                case 4:\n                case \"end\":\n                  return _context41.stop();\n              }\n            }\n          }, _callee39, this);\n        }));\n\n        function value() {\n          return _value10.apply(this, arguments);\n        }\n\n        return value;\n      }()\n    }], [{\n      key: \"dracoDecoderLocation\",\n      get: function get() {\n        return CachingGLTFLoader.getDRACODecoderLocation();\n      },\n      set: function set(value) {\n        CachingGLTFLoader.setDRACODecoderLocation(value);\n      }\n    }, {\n      key: \"ktx2TranscoderLocation\",\n      get: function get() {\n        return CachingGLTFLoader.getKTX2TranscoderLocation();\n      }\n      /**\n       * If provided, the callback will be passed each resource URL before a\n       * request is sent. The callback may return the original URL, or a new URL\n       * to override loading behavior. This behavior can be used to load assets\n       * from .ZIP files, drag-and-drop APIs, and Data URIs.\n       */\n      ,\n      set: function set(value) {\n        CachingGLTFLoader.setKTX2TranscoderLocation(value);\n      }\n    }, {\n      key: \"mapURLs\",\n      value: function mapURLs(callback) {\n        Renderer.singleton.loader[$loader].manager.setURLModifier(callback);\n      }\n    }]);\n\n    return LoadingModelViewerElement;\n  }(ModelViewerElement, (_a = $modelIsRevealed, _b = $transitioned, _c = $lastReportedProgress, _d = $posterDismissalSource, _e = $posterContainerElement, _f = $defaultPosterElement, _g = $defaultProgressBarElement, _h = $defaultProgressMaskElement, _j = $ariaLabelCallToAction, _k = $updateProgressBar, _l = $onClick, _m = $onKeydown, _o = $onProgress, $shouldAttemptPreload));\n\n  __decorate$2([property({\n    type: String\n  })], LoadingModelViewerElement.prototype, \"poster\", void 0);\n\n  __decorate$2([property({\n    type: String\n  })], LoadingModelViewerElement.prototype, \"reveal\", void 0);\n\n  __decorate$2([property({\n    type: String\n  })], LoadingModelViewerElement.prototype, \"loading\", void 0);\n\n  return LoadingModelViewerElement;\n};\n\nvar GLTFExporter = /*#__PURE__*/function () {\n  function GLTFExporter() {\n    _classCallCheck(this, GLTFExporter);\n\n    this.pluginCallbacks = [];\n    this.register(function (writer) {\n      return new GLTFLightExtension(writer);\n    });\n    this.register(function (writer) {\n      return new GLTFMaterialsUnlitExtension(writer);\n    });\n    this.register(function (writer) {\n      return new GLTFMaterialsPBRSpecularGlossiness(writer);\n    });\n    this.register(function (writer) {\n      return new GLTFMaterialsTransmissionExtension(writer);\n    });\n    this.register(function (writer) {\n      return new GLTFMaterialsVolumeExtension(writer);\n    });\n  }\n\n  _createClass(GLTFExporter, [{\n    key: \"register\",\n    value: function register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n      }\n\n      return this;\n    }\n    /**\n     * Parse scenes and generate GLTF output\n     * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n     * @param  {Function} onDone  Callback on completed\n     * @param  {Object} options options\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(input, onDone, options) {\n      var writer = new GLTFWriter();\n      var plugins = [];\n\n      for (var _i371 = 0, il = this.pluginCallbacks.length; _i371 < il; _i371++) {\n        plugins.push(this.pluginCallbacks[_i371](writer));\n      }\n\n      writer.setPlugins(plugins);\n      writer.write(input, onDone, options);\n    }\n  }]);\n\n  return GLTFExporter;\n}(); //------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\n\n\nvar WEBGL_CONSTANTS = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006,\n  UNSIGNED_BYTE: 0x1401,\n  UNSIGNED_SHORT: 0x1403,\n  FLOAT: 0x1406,\n  UNSIGNED_INT: 0x1405,\n  ARRAY_BUFFER: 0x8892,\n  ELEMENT_ARRAY_BUFFER: 0x8893,\n  NEAREST: 0x2600,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_NEAREST: 0x2700,\n  LINEAR_MIPMAP_NEAREST: 0x2701,\n  NEAREST_MIPMAP_LINEAR: 0x2702,\n  LINEAR_MIPMAP_LINEAR: 0x2703,\n  CLAMP_TO_EDGE: 33071,\n  MIRRORED_REPEAT: 33648,\n  REPEAT: 10497\n};\nvar THREE_TO_WEBGL = {};\nTHREE_TO_WEBGL[NearestFilter] = WEBGL_CONSTANTS.NEAREST;\nTHREE_TO_WEBGL[NearestMipmapNearestFilter] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[NearestMipmapLinearFilter] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[LinearFilter] = WEBGL_CONSTANTS.LINEAR;\nTHREE_TO_WEBGL[LinearMipmapNearestFilter] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[LinearMipmapLinearFilter] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ClampToEdgeWrapping] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[RepeatWrapping] = WEBGL_CONSTANTS.REPEAT;\nTHREE_TO_WEBGL[MirroredRepeatWrapping] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\nvar PATH_PROPERTIES = {\n  scale: 'scale',\n  position: 'translation',\n  quaternion: 'rotation',\n  morphTargetInfluences: 'weights'\n}; // GLB constants\n// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\nvar GLB_HEADER_BYTES = 12;\nvar GLB_HEADER_MAGIC = 0x46546C67;\nvar GLB_VERSION = 2;\nvar GLB_CHUNK_PREFIX_BYTES = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\nvar GLB_CHUNK_TYPE_BIN = 0x004E4942; //------------------------------------------------------------------------------\n// Utility functions\n//------------------------------------------------------------------------------\n\n/**\n * Compare two arrays\n * @param  {Array} array1 Array 1 to compare\n * @param  {Array} array2 Array 2 to compare\n * @return {Boolean}        Returns true if both arrays are equal\n */\n\nfunction equalArray(array1, array2) {\n  return array1.length === array2.length && array1.every(function (element, index) {\n    return element === array2[index];\n  });\n}\n/**\n * Converts a string to an ArrayBuffer.\n * @param  {string} text\n * @return {ArrayBuffer}\n */\n\n\nfunction stringToArrayBuffer(text) {\n  if (window.TextEncoder !== undefined) {\n    return new TextEncoder().encode(text).buffer;\n  }\n\n  var array = new Uint8Array(new ArrayBuffer(text.length));\n\n  for (var _i372 = 0, il = text.length; _i372 < il; _i372++) {\n    var value = text.charCodeAt(_i372); // Replacing multi-byte character with space(0x20).\n\n    array[_i372] = value > 0xFF ? 0x20 : value;\n  }\n\n  return array.buffer;\n}\n/**\n * Is identity matrix\n *\n * @param {Matrix4} matrix\n * @returns {Boolean} Returns true, if parameter is identity matrix\n */\n\n\nfunction isIdentityMatrix(matrix) {\n  return equalArray(matrix.elements, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n}\n/**\n * Get the min and max vectors from the given attribute\n * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n * @param  {Integer} start\n * @param  {Integer} count\n * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n */\n\n\nfunction getMinMax(attribute, start, count) {\n  var output = {\n    min: new Array(attribute.itemSize).fill(Number.POSITIVE_INFINITY),\n    max: new Array(attribute.itemSize).fill(Number.NEGATIVE_INFINITY)\n  };\n\n  for (var _i373 = start; _i373 < start + count; _i373++) {\n    for (var _a15 = 0; _a15 < attribute.itemSize; _a15++) {\n      var value = void 0;\n\n      if (attribute.itemSize > 4) {\n        // no support for interleaved data for itemSize > 4\n        value = attribute.array[_i373 * attribute.itemSize + _a15];\n      } else {\n        if (_a15 === 0) value = attribute.getX(_i373);else if (_a15 === 1) value = attribute.getY(_i373);else if (_a15 === 2) value = attribute.getZ(_i373);else if (_a15 === 3) value = attribute.getW(_i373);\n      }\n\n      output.min[_a15] = Math.min(output.min[_a15], value);\n      output.max[_a15] = Math.max(output.max[_a15], value);\n    }\n  }\n\n  return output;\n}\n/**\n * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n *\n * @param {Integer} bufferSize The size the original buffer.\n * @returns {Integer} new buffer size with required padding.\n *\n */\n\n\nfunction getPaddedBufferSize(bufferSize) {\n  return Math.ceil(bufferSize / 4) * 4;\n}\n/**\n * Returns a buffer aligned to 4-byte boundary.\n *\n * @param {ArrayBuffer} arrayBuffer Buffer to pad\n * @param {Integer} paddingByte (Optional)\n * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n */\n\n\nfunction getPaddedArrayBuffer(arrayBuffer) {\n  var paddingByte = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var paddedLength = getPaddedBufferSize(arrayBuffer.byteLength);\n\n  if (paddedLength !== arrayBuffer.byteLength) {\n    var array = new Uint8Array(paddedLength);\n    array.set(new Uint8Array(arrayBuffer));\n\n    if (paddingByte !== 0) {\n      for (var _i374 = arrayBuffer.byteLength; _i374 < paddedLength; _i374++) {\n        array[_i374] = paddingByte;\n      }\n    }\n\n    return array.buffer;\n  }\n\n  return arrayBuffer;\n}\n\nvar cachedCanvas = null;\n/**\n * Writer\n */\n\nvar GLTFWriter = /*#__PURE__*/function () {\n  function GLTFWriter() {\n    _classCallCheck(this, GLTFWriter);\n\n    this.plugins = [];\n    this.options = {};\n    this.pending = [];\n    this.buffers = [];\n    this.byteOffset = 0;\n    this.buffers = [];\n    this.nodeMap = new Map();\n    this.skins = [];\n    this.extensionsUsed = {};\n    this.uids = new Map();\n    this.uid = 0;\n    this.json = {\n      asset: {\n        version: '2.0',\n        generator: 'THREE.GLTFExporter'\n      }\n    };\n    this.cache = {\n      meshes: new Map(),\n      attributes: new Map(),\n      attributesNormalized: new Map(),\n      materials: new Map(),\n      textures: new Map(),\n      images: new Map()\n    };\n  }\n\n  _createClass(GLTFWriter, [{\n    key: \"setPlugins\",\n    value: function setPlugins(plugins) {\n      this.plugins = plugins;\n    }\n    /**\n     * Parse scenes and generate GLTF output\n     * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n     * @param  {Function} onDone  Callback on completed\n     * @param  {Object} options options\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(input, onDone, options) {\n      this.options = Object.assign({}, {\n        // default options\n        binary: false,\n        trs: false,\n        onlyVisible: true,\n        truncateDrawRange: true,\n        embedImages: true,\n        maxTextureSize: Infinity,\n        animations: [],\n        includeCustomExtensions: false\n      }, options);\n\n      if (this.options.animations.length > 0) {\n        // Only TRS properties, and not matrices, may be targeted by animation.\n        this.options.trs = true;\n      }\n\n      this.processInput(input);\n      var writer = this;\n      Promise.all(this.pending).then(function () {\n        var buffers = writer.buffers;\n        var json = writer.json;\n        var options = writer.options;\n        var extensionsUsed = writer.extensionsUsed; // Merge buffers.\n\n        var blob = new Blob(buffers, {\n          type: 'application/octet-stream'\n        }); // Declare extensions.\n\n        var extensionsUsedList = Object.keys(extensionsUsed);\n        if (extensionsUsedList.length > 0) json.extensionsUsed = extensionsUsedList; // Update bytelength of the single buffer.\n\n        if (json.buffers && json.buffers.length > 0) json.buffers[0].byteLength = blob.size;\n\n        if (options.binary === true) {\n          // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n          var reader = new window.FileReader();\n          reader.readAsArrayBuffer(blob);\n\n          reader.onloadend = function () {\n            // Binary chunk.\n            var binaryChunk = getPaddedArrayBuffer(reader.result);\n            var binaryChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n            binaryChunkPrefix.setUint32(0, binaryChunk.byteLength, true);\n            binaryChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_BIN, true); // JSON chunk.\n\n            var jsonChunk = getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(json)), 0x20);\n            var jsonChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n            jsonChunkPrefix.setUint32(0, jsonChunk.byteLength, true);\n            jsonChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_JSON, true); // GLB header.\n\n            var header = new ArrayBuffer(GLB_HEADER_BYTES);\n            var headerView = new DataView(header);\n            headerView.setUint32(0, GLB_HEADER_MAGIC, true);\n            headerView.setUint32(4, GLB_VERSION, true);\n            var totalByteLength = GLB_HEADER_BYTES + jsonChunkPrefix.byteLength + jsonChunk.byteLength + binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n            headerView.setUint32(8, totalByteLength, true);\n            var glbBlob = new Blob([header, jsonChunkPrefix, jsonChunk, binaryChunkPrefix, binaryChunk], {\n              type: 'application/octet-stream'\n            });\n            var glbReader = new window.FileReader();\n            glbReader.readAsArrayBuffer(glbBlob);\n\n            glbReader.onloadend = function () {\n              onDone(glbReader.result);\n            };\n          };\n        } else {\n          if (json.buffers && json.buffers.length > 0) {\n            var _reader = new window.FileReader();\n\n            _reader.readAsDataURL(blob);\n\n            _reader.onloadend = function () {\n              var base64data = _reader.result;\n              json.buffers[0].uri = base64data;\n              onDone(json);\n            };\n          } else {\n            onDone(json);\n          }\n        }\n      });\n    }\n    /**\n     * Serializes a userData.\n     *\n     * @param {THREE.Object3D|THREE.Material} object\n     * @param {Object} objectDef\n     */\n\n  }, {\n    key: \"serializeUserData\",\n    value: function serializeUserData(object, objectDef) {\n      if (Object.keys(object.userData).length === 0) return;\n      var options = this.options;\n      var extensionsUsed = this.extensionsUsed;\n\n      try {\n        var json = JSON.parse(JSON.stringify(object.userData));\n\n        if (options.includeCustomExtensions && json.gltfExtensions) {\n          if (objectDef.extensions === undefined) objectDef.extensions = {};\n\n          for (var extensionName in json.gltfExtensions) {\n            objectDef.extensions[extensionName] = json.gltfExtensions[extensionName];\n            extensionsUsed[extensionName] = true;\n          }\n\n          delete json.gltfExtensions;\n        }\n\n        if (Object.keys(json).length > 0) objectDef.extras = json;\n      } catch (error) {\n        console.warn('THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' + 'won\\'t be serialized because of JSON.stringify error - ' + error.message);\n      }\n    }\n    /**\n     * Assign and return a temporal unique id for an object\n     * especially which doesn't have .uuid\n     * @param  {Object} object\n     * @return {Integer}\n     */\n\n  }, {\n    key: \"getUID\",\n    value: function getUID(object) {\n      if (!this.uids.has(object)) this.uids.set(object, this.uid++);\n      return this.uids.get(object);\n    }\n    /**\n     * Checks if normal attribute values are normalized.\n     *\n     * @param {BufferAttribute} normal\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isNormalizedNormalAttribute\",\n    value: function isNormalizedNormalAttribute(normal) {\n      var cache = this.cache;\n      if (cache.attributesNormalized.has(normal)) return false;\n      var v = new Vector3();\n\n      for (var _i375 = 0, il = normal.count; _i375 < il; _i375++) {\n        // 0.0005 is from glTF-validator\n        if (Math.abs(v.fromBufferAttribute(normal, _i375).length() - 1.0) > 0.0005) return false;\n      }\n\n      return true;\n    }\n    /**\n     * Creates normalized normal buffer attribute.\n     *\n     * @param {BufferAttribute} normal\n     * @returns {BufferAttribute}\n     *\n     */\n\n  }, {\n    key: \"createNormalizedNormalAttribute\",\n    value: function createNormalizedNormalAttribute(normal) {\n      var cache = this.cache;\n      if (cache.attributesNormalized.has(normal)) return cache.attributesNormalized.get(normal);\n      var attribute = normal.clone();\n      var v = new Vector3();\n\n      for (var _i376 = 0, il = attribute.count; _i376 < il; _i376++) {\n        v.fromBufferAttribute(attribute, _i376);\n\n        if (v.x === 0 && v.y === 0 && v.z === 0) {\n          // if values can't be normalized set (1, 0, 0)\n          v.setX(1.0);\n        } else {\n          v.normalize();\n        }\n\n        attribute.setXYZ(_i376, v.x, v.y, v.z);\n      }\n\n      cache.attributesNormalized.set(normal, attribute);\n      return attribute;\n    }\n    /**\n     * Applies a texture transform, if present, to the map definition. Requires\n     * the KHR_texture_transform extension.\n     *\n     * @param {Object} mapDef\n     * @param {THREE.Texture} texture\n     */\n\n  }, {\n    key: \"applyTextureTransform\",\n    value: function applyTextureTransform(mapDef, texture) {\n      var didTransform = false;\n      var transformDef = {};\n\n      if (texture.offset.x !== 0 || texture.offset.y !== 0) {\n        transformDef.offset = texture.offset.toArray();\n        didTransform = true;\n      }\n\n      if (texture.rotation !== 0) {\n        transformDef.rotation = texture.rotation;\n        didTransform = true;\n      }\n\n      if (texture.repeat.x !== 1 || texture.repeat.y !== 1) {\n        transformDef.scale = texture.repeat.toArray();\n        didTransform = true;\n      }\n\n      if (didTransform) {\n        mapDef.extensions = mapDef.extensions || {};\n        mapDef.extensions['KHR_texture_transform'] = transformDef;\n        this.extensionsUsed['KHR_texture_transform'] = true;\n      }\n    }\n    /**\n     * Process a buffer to append to the default one.\n     * @param  {ArrayBuffer} buffer\n     * @return {Integer}\n     */\n\n  }, {\n    key: \"processBuffer\",\n    value: function processBuffer(buffer) {\n      var json = this.json;\n      var buffers = this.buffers;\n      if (!json.buffers) json.buffers = [{\n        byteLength: 0\n      }]; // All buffers are merged before export.\n\n      buffers.push(buffer);\n      return 0;\n    }\n    /**\n     * Process and generate a BufferView\n     * @param  {BufferAttribute} attribute\n     * @param  {number} componentType\n     * @param  {number} start\n     * @param  {number} count\n     * @param  {number} target (Optional) Target usage of the BufferView\n     * @return {Object}\n     */\n\n  }, {\n    key: \"processBufferView\",\n    value: function processBufferView(attribute, componentType, start, count, target) {\n      var json = this.json;\n      if (!json.bufferViews) json.bufferViews = []; // Create a new dataview and dump the attribute's array into it\n\n      var componentSize;\n\n      if (componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE) {\n        componentSize = 1;\n      } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT) {\n        componentSize = 2;\n      } else {\n        componentSize = 4;\n      }\n\n      var byteLength = getPaddedBufferSize(count * attribute.itemSize * componentSize);\n      var dataView = new DataView(new ArrayBuffer(byteLength));\n      var offset = 0;\n\n      for (var _i377 = start; _i377 < start + count; _i377++) {\n        for (var _a16 = 0; _a16 < attribute.itemSize; _a16++) {\n          var value = void 0;\n\n          if (attribute.itemSize > 4) {\n            // no support for interleaved data for itemSize > 4\n            value = attribute.array[_i377 * attribute.itemSize + _a16];\n          } else {\n            if (_a16 === 0) value = attribute.getX(_i377);else if (_a16 === 1) value = attribute.getY(_i377);else if (_a16 === 2) value = attribute.getZ(_i377);else if (_a16 === 3) value = attribute.getW(_i377);\n          }\n\n          if (componentType === WEBGL_CONSTANTS.FLOAT) {\n            dataView.setFloat32(offset, value, true);\n          } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_INT) {\n            dataView.setUint32(offset, value, true);\n          } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT) {\n            dataView.setUint16(offset, value, true);\n          } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE) {\n            dataView.setUint8(offset, value);\n          }\n\n          offset += componentSize;\n        }\n      }\n\n      var bufferViewDef = {\n        buffer: this.processBuffer(dataView.buffer),\n        byteOffset: this.byteOffset,\n        byteLength: byteLength\n      };\n      if (target !== undefined) bufferViewDef.target = target;\n\n      if (target === WEBGL_CONSTANTS.ARRAY_BUFFER) {\n        // Only define byteStride for vertex attributes.\n        bufferViewDef.byteStride = attribute.itemSize * componentSize;\n      }\n\n      this.byteOffset += byteLength;\n      json.bufferViews.push(bufferViewDef); // @TODO Merge bufferViews where possible.\n\n      var output = {\n        id: json.bufferViews.length - 1,\n        byteLength: 0\n      };\n      return output;\n    }\n    /**\n     * Process and generate a BufferView from an image Blob.\n     * @param {Blob} blob\n     * @return {Promise<Integer>}\n     */\n\n  }, {\n    key: \"processBufferViewImage\",\n    value: function processBufferViewImage(blob) {\n      var writer = this;\n      var json = writer.json;\n      if (!json.bufferViews) json.bufferViews = [];\n      return new Promise(function (resolve) {\n        var reader = new window.FileReader();\n        reader.readAsArrayBuffer(blob);\n\n        reader.onloadend = function () {\n          var buffer = getPaddedArrayBuffer(reader.result);\n          var bufferViewDef = {\n            buffer: writer.processBuffer(buffer),\n            byteOffset: writer.byteOffset,\n            byteLength: buffer.byteLength\n          };\n          writer.byteOffset += buffer.byteLength;\n          resolve(json.bufferViews.push(bufferViewDef) - 1);\n        };\n      });\n    }\n    /**\n     * Process attribute to generate an accessor\n     * @param  {BufferAttribute} attribute Attribute to process\n     * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n     * @param  {Integer} start (Optional)\n     * @param  {Integer} count (Optional)\n     * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\n     */\n\n  }, {\n    key: \"processAccessor\",\n    value: function processAccessor(attribute, geometry, start, count) {\n      var options = this.options;\n      var json = this.json;\n      var types = {\n        1: 'SCALAR',\n        2: 'VEC2',\n        3: 'VEC3',\n        4: 'VEC4',\n        16: 'MAT4'\n      };\n      var componentType; // Detect the component type of the attribute array (float, uint or ushort)\n\n      if (attribute.array.constructor === Float32Array) {\n        componentType = WEBGL_CONSTANTS.FLOAT;\n      } else if (attribute.array.constructor === Uint32Array) {\n        componentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n      } else if (attribute.array.constructor === Uint16Array) {\n        componentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n      } else if (attribute.array.constructor === Uint8Array) {\n        componentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n      } else {\n        throw new Error('THREE.GLTFExporter: Unsupported bufferAttribute component type.');\n      }\n\n      if (start === undefined) start = 0;\n      if (count === undefined) count = attribute.count; // @TODO Indexed buffer geometry with drawRange not supported yet\n\n      if (options.truncateDrawRange && geometry !== undefined && geometry.index === null) {\n        var end = start + count;\n        var end2 = geometry.drawRange.count === Infinity ? attribute.count : geometry.drawRange.start + geometry.drawRange.count;\n        start = Math.max(start, geometry.drawRange.start);\n        count = Math.min(end, end2) - start;\n        if (count < 0) count = 0;\n      } // Skip creating an accessor if the attribute doesn't have data to export\n\n\n      if (count === 0) return null;\n      var minMax = getMinMax(attribute, start, count);\n      var bufferViewTarget; // If geometry isn't provided, don't infer the target usage of the bufferView. For\n      // animation samplers, target must not be set.\n\n      if (geometry !== undefined) {\n        bufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n      }\n\n      var bufferView = this.processBufferView(attribute, componentType, start, count, bufferViewTarget);\n      var accessorDef = {\n        bufferView: bufferView.id,\n        byteOffset: bufferView.byteOffset,\n        componentType: componentType,\n        count: count,\n        max: minMax.max,\n        min: minMax.min,\n        type: types[attribute.itemSize]\n      };\n      if (attribute.normalized === true) accessorDef.normalized = true;\n      if (!json.accessors) json.accessors = [];\n      return json.accessors.push(accessorDef) - 1;\n    }\n    /**\n     * Process image\n     * @param  {Image} image to process\n     * @param  {Integer} format of the image (e.g. RGBFormat, RGBAFormat etc)\n     * @param  {Boolean} flipY before writing out the image\n     * @return {Integer}     Index of the processed texture in the \"images\" array\n     */\n\n  }, {\n    key: \"processImage\",\n    value: function processImage(image, format, flipY) {\n      var writer = this;\n      var cache = writer.cache;\n      var json = writer.json;\n      var options = writer.options;\n      var pending = writer.pending;\n      if (!cache.images.has(image)) cache.images.set(image, {});\n      var cachedImages = cache.images.get(image);\n      var mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n      var key = mimeType + ':flipY/' + flipY.toString();\n      if (cachedImages[key] !== undefined) return cachedImages[key];\n      if (!json.images) json.images = [];\n      var imageDef = {\n        mimeType: mimeType\n      };\n\n      if (options.embedImages) {\n        var canvas = cachedCanvas = cachedCanvas || document.createElement('canvas');\n        canvas.width = Math.min(image.width, options.maxTextureSize);\n        canvas.height = Math.min(image.height, options.maxTextureSize);\n        var ctx = canvas.getContext('2d');\n\n        if (flipY === true) {\n          ctx.translate(0, canvas.height);\n          ctx.scale(1, -1);\n        }\n\n        if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n          ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        } else {\n          if (format !== RGBAFormat && format !== RGBFormat) {\n            console.error('GLTFExporter: Only RGB and RGBA formats are supported.');\n          }\n\n          if (image.width > options.maxTextureSize || image.height > options.maxTextureSize) {\n            console.warn('GLTFExporter: Image size is bigger than maxTextureSize', image);\n          }\n\n          var data = new Uint8ClampedArray(image.height * image.width * 4);\n\n          if (format === RGBAFormat) {\n            for (var _i378 = 0; _i378 < data.length; _i378 += 4) {\n              data[_i378 + 0] = image.data[_i378 + 0];\n              data[_i378 + 1] = image.data[_i378 + 1];\n              data[_i378 + 2] = image.data[_i378 + 2];\n              data[_i378 + 3] = image.data[_i378 + 3];\n            }\n          } else {\n            for (var _i379 = 0, j = 0; _i379 < data.length; _i379 += 4, j += 3) {\n              data[_i379 + 0] = image.data[j + 0];\n              data[_i379 + 1] = image.data[j + 1];\n              data[_i379 + 2] = image.data[j + 2];\n              data[_i379 + 3] = 255;\n            }\n          }\n\n          ctx.putImageData(new ImageData(data, image.width, image.height), 0, 0);\n        }\n\n        if (options.binary === true) {\n          pending.push(new Promise(function (resolve) {\n            canvas.toBlob(function (blob) {\n              writer.processBufferViewImage(blob).then(function (bufferViewIndex) {\n                imageDef.bufferView = bufferViewIndex;\n                resolve();\n              });\n            }, mimeType);\n          }));\n        } else {\n          imageDef.uri = canvas.toDataURL(mimeType);\n        }\n      } else {\n        imageDef.uri = image.src;\n      }\n\n      var index = json.images.push(imageDef) - 1;\n      cachedImages[key] = index;\n      return index;\n    }\n    /**\n     * Process sampler\n     * @param  {Texture} map Texture to process\n     * @return {Integer}     Index of the processed texture in the \"samplers\" array\n     */\n\n  }, {\n    key: \"processSampler\",\n    value: function processSampler(map) {\n      var json = this.json;\n      if (!json.samplers) json.samplers = [];\n      var samplerDef = {\n        magFilter: THREE_TO_WEBGL[map.magFilter],\n        minFilter: THREE_TO_WEBGL[map.minFilter],\n        wrapS: THREE_TO_WEBGL[map.wrapS],\n        wrapT: THREE_TO_WEBGL[map.wrapT]\n      };\n      return json.samplers.push(samplerDef) - 1;\n    }\n    /**\n     * Process texture\n     * @param  {Texture} map Map to process\n     * @return {Integer} Index of the processed texture in the \"textures\" array\n     */\n\n  }, {\n    key: \"processTexture\",\n    value: function processTexture(map) {\n      var cache = this.cache;\n      var json = this.json;\n      if (cache.textures.has(map)) return cache.textures.get(map);\n      if (!json.textures) json.textures = [];\n      var textureDef = {\n        sampler: this.processSampler(map),\n        source: this.processImage(map.image, map.format, map.flipY)\n      };\n      if (map.name) textureDef.name = map.name;\n\n      this._invokeAll(function (ext) {\n        ext.writeTexture && ext.writeTexture(map, textureDef);\n      });\n\n      var index = json.textures.push(textureDef) - 1;\n      cache.textures.set(map, index);\n      return index;\n    }\n    /**\n     * Process material\n     * @param  {THREE.Material} material Material to process\n     * @return {Integer|null} Index of the processed material in the \"materials\" array\n     */\n\n  }, {\n    key: \"processMaterial\",\n    value: function processMaterial(material) {\n      var cache = this.cache;\n      var json = this.json;\n      if (cache.materials.has(material)) return cache.materials.get(material);\n\n      if (material.isShaderMaterial) {\n        console.warn('GLTFExporter: THREE.ShaderMaterial not supported.');\n        return null;\n      }\n\n      if (!json.materials) json.materials = []; // @QUESTION Should we avoid including any attribute that has the default value?\n\n      var materialDef = {\n        pbrMetallicRoughness: {}\n      };\n\n      if (material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true) {\n        console.warn('GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.');\n      } // pbrMetallicRoughness.baseColorFactor\n\n\n      var color = material.color.toArray().concat([material.opacity]);\n\n      if (!equalArray(color, [1, 1, 1, 1])) {\n        materialDef.pbrMetallicRoughness.baseColorFactor = color;\n      }\n\n      if (material.isMeshStandardMaterial) {\n        materialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\n        materialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\n      } else {\n        materialDef.pbrMetallicRoughness.metallicFactor = 0.5;\n        materialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\n      } // pbrMetallicRoughness.metallicRoughnessTexture\n\n\n      if (material.metalnessMap || material.roughnessMap) {\n        if (material.metalnessMap === material.roughnessMap) {\n          var metalRoughMapDef = {\n            index: this.processTexture(material.metalnessMap)\n          };\n          this.applyTextureTransform(metalRoughMapDef, material.metalnessMap);\n          materialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n        } else {\n          console.warn('THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.');\n        }\n      } // pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\n\n      if (material.map) {\n        var baseColorMapDef = {\n          index: this.processTexture(material.map)\n        };\n        this.applyTextureTransform(baseColorMapDef, material.map);\n        materialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n      }\n\n      if (material.emissive) {\n        // note: emissive components are limited to stay within the 0 - 1 range to accommodate glTF spec. see #21849 and #22000.\n        var emissive = material.emissive.clone().multiplyScalar(material.emissiveIntensity);\n        var maxEmissiveComponent = Math.max(emissive.r, emissive.g, emissive.b);\n\n        if (maxEmissiveComponent > 1) {\n          emissive.multiplyScalar(1 / maxEmissiveComponent);\n          console.warn('THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited');\n        }\n\n        if (maxEmissiveComponent > 0) {\n          materialDef.emissiveFactor = emissive.toArray();\n        } // emissiveTexture\n\n\n        if (material.emissiveMap) {\n          var emissiveMapDef = {\n            index: this.processTexture(material.emissiveMap)\n          };\n          this.applyTextureTransform(emissiveMapDef, material.emissiveMap);\n          materialDef.emissiveTexture = emissiveMapDef;\n        }\n      } // normalTexture\n\n\n      if (material.normalMap) {\n        var normalMapDef = {\n          index: this.processTexture(material.normalMap)\n        };\n\n        if (material.normalScale && material.normalScale.x !== 1) {\n          // glTF normal scale is univariate. Ignore `y`, which may be flipped.\n          // Context: https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n          normalMapDef.scale = material.normalScale.x;\n        }\n\n        this.applyTextureTransform(normalMapDef, material.normalMap);\n        materialDef.normalTexture = normalMapDef;\n      } // occlusionTexture\n\n\n      if (material.aoMap) {\n        var occlusionMapDef = {\n          index: this.processTexture(material.aoMap),\n          texCoord: 1\n        };\n\n        if (material.aoMapIntensity !== 1.0) {\n          occlusionMapDef.strength = material.aoMapIntensity;\n        }\n\n        this.applyTextureTransform(occlusionMapDef, material.aoMap);\n        materialDef.occlusionTexture = occlusionMapDef;\n      } // alphaMode\n\n\n      if (material.transparent) {\n        materialDef.alphaMode = 'BLEND';\n      } else {\n        if (material.alphaTest > 0.0) {\n          materialDef.alphaMode = 'MASK';\n          materialDef.alphaCutoff = material.alphaTest;\n        }\n      } // doubleSided\n\n\n      if (material.side === DoubleSide) materialDef.doubleSided = true;\n      if (material.name !== '') materialDef.name = material.name;\n      this.serializeUserData(material, materialDef);\n\n      this._invokeAll(function (ext) {\n        ext.writeMaterial && ext.writeMaterial(material, materialDef);\n      });\n\n      var index = json.materials.push(materialDef) - 1;\n      cache.materials.set(material, index);\n      return index;\n    }\n    /**\n     * Process mesh\n     * @param  {THREE.Mesh} mesh Mesh to process\n     * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\n     */\n\n  }, {\n    key: \"processMesh\",\n    value: function processMesh(mesh) {\n      var cache = this.cache;\n      var json = this.json;\n      var meshCacheKeyParts = [mesh.geometry.uuid];\n\n      if (Array.isArray(mesh.material)) {\n        for (var _i380 = 0, _l87 = mesh.material.length; _i380 < _l87; _i380++) {\n          meshCacheKeyParts.push(mesh.material[_i380].uuid);\n        }\n      } else {\n        meshCacheKeyParts.push(mesh.material.uuid);\n      }\n\n      var meshCacheKey = meshCacheKeyParts.join(':');\n      if (cache.meshes.has(meshCacheKey)) return cache.meshes.get(meshCacheKey);\n      var geometry = mesh.geometry;\n      var mode; // Use the correct mode\n\n      if (mesh.isLineSegments) {\n        mode = WEBGL_CONSTANTS.LINES;\n      } else if (mesh.isLineLoop) {\n        mode = WEBGL_CONSTANTS.LINE_LOOP;\n      } else if (mesh.isLine) {\n        mode = WEBGL_CONSTANTS.LINE_STRIP;\n      } else if (mesh.isPoints) {\n        mode = WEBGL_CONSTANTS.POINTS;\n      } else {\n        mode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n      }\n\n      if (geometry.isBufferGeometry !== true) {\n        throw new Error('THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.');\n      }\n\n      var meshDef = {};\n      var attributes = {};\n      var primitives = [];\n      var targets = []; // Conversion between attributes names in threejs and gltf spec\n\n      var nameConversion = {\n        uv: 'TEXCOORD_0',\n        uv2: 'TEXCOORD_1',\n        color: 'COLOR_0',\n        skinWeight: 'WEIGHTS_0',\n        skinIndex: 'JOINTS_0'\n      };\n      var originalNormal = geometry.getAttribute('normal');\n\n      if (originalNormal !== undefined && !this.isNormalizedNormalAttribute(originalNormal)) {\n        console.warn('THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.');\n        geometry.setAttribute('normal', this.createNormalizedNormalAttribute(originalNormal));\n      } // @QUESTION Detect if .vertexColors = true?\n      // For every attribute create an accessor\n\n\n      var modifiedAttribute = null;\n\n      for (var attributeName in geometry.attributes) {\n        // Ignore morph target attributes, which are exported later.\n        if (attributeName.substr(0, 5) === 'morph') continue;\n        var attribute = geometry.attributes[attributeName];\n        attributeName = nameConversion[attributeName] || attributeName.toUpperCase(); // Prefix all geometry attributes except the ones specifically\n        // listed in the spec; non-spec attributes are considered custom.\n\n        var validVertexAttributes = /^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n        if (!validVertexAttributes.test(attributeName)) attributeName = '_' + attributeName;\n\n        if (cache.attributes.has(this.getUID(attribute))) {\n          attributes[attributeName] = cache.attributes.get(this.getUID(attribute));\n          continue;\n        } // JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\n\n        modifiedAttribute = null;\n        var array = attribute.array;\n\n        if (attributeName === 'JOINTS_0' && !(array instanceof Uint16Array) && !(array instanceof Uint8Array)) {\n          console.warn('GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.');\n          modifiedAttribute = new BufferAttribute(new Uint16Array(array), attribute.itemSize, attribute.normalized);\n        }\n\n        var accessor = this.processAccessor(modifiedAttribute || attribute, geometry);\n\n        if (accessor !== null) {\n          attributes[attributeName] = accessor;\n          cache.attributes.set(this.getUID(attribute), accessor);\n        }\n      }\n\n      if (originalNormal !== undefined) geometry.setAttribute('normal', originalNormal); // Skip if no exportable attributes found\n\n      if (Object.keys(attributes).length === 0) return null; // Morph targets\n\n      if (mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0) {\n        var weights = [];\n        var targetNames = [];\n        var reverseDictionary = {};\n\n        if (mesh.morphTargetDictionary !== undefined) {\n          for (var key in mesh.morphTargetDictionary) {\n            reverseDictionary[mesh.morphTargetDictionary[key]] = key;\n          }\n        }\n\n        for (var _i381 = 0; _i381 < mesh.morphTargetInfluences.length; ++_i381) {\n          var _target10 = {};\n          var warned = false;\n\n          for (var _attributeName3 in geometry.morphAttributes) {\n            // glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n            // Three.js doesn't support TANGENT yet.\n            if (_attributeName3 !== 'position' && _attributeName3 !== 'normal') {\n              if (!warned) {\n                console.warn('GLTFExporter: Only POSITION and NORMAL morph are supported.');\n                warned = true;\n              }\n\n              continue;\n            }\n\n            var _attribute5 = geometry.morphAttributes[_attributeName3][_i381];\n\n            var gltfAttributeName = _attributeName3.toUpperCase(); // Three.js morph attribute has absolute values while the one of glTF has relative values.\n            //\n            // glTF 2.0 Specification:\n            // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\n            var baseAttribute = geometry.attributes[_attributeName3];\n\n            if (cache.attributes.has(this.getUID(_attribute5))) {\n              _target10[gltfAttributeName] = cache.attributes.get(this.getUID(_attribute5));\n              continue;\n            } // Clones attribute not to override\n\n\n            var relativeAttribute = _attribute5.clone();\n\n            if (!geometry.morphTargetsRelative) {\n              for (var j = 0, jl = _attribute5.count; j < jl; j++) {\n                relativeAttribute.setXYZ(j, _attribute5.getX(j) - baseAttribute.getX(j), _attribute5.getY(j) - baseAttribute.getY(j), _attribute5.getZ(j) - baseAttribute.getZ(j));\n              }\n            }\n\n            _target10[gltfAttributeName] = this.processAccessor(relativeAttribute, geometry);\n            cache.attributes.set(this.getUID(baseAttribute), _target10[gltfAttributeName]);\n          }\n\n          targets.push(_target10);\n          weights.push(mesh.morphTargetInfluences[_i381]);\n          if (mesh.morphTargetDictionary !== undefined) targetNames.push(reverseDictionary[_i381]);\n        }\n\n        meshDef.weights = weights;\n\n        if (targetNames.length > 0) {\n          meshDef.extras = {};\n          meshDef.extras.targetNames = targetNames;\n        }\n      }\n\n      var isMultiMaterial = Array.isArray(mesh.material);\n      if (isMultiMaterial && geometry.groups.length === 0) return null;\n      var materials = isMultiMaterial ? mesh.material : [mesh.material];\n      var groups = isMultiMaterial ? geometry.groups : [{\n        materialIndex: 0,\n        start: undefined,\n        count: undefined\n      }];\n\n      for (var _i382 = 0, il = groups.length; _i382 < il; _i382++) {\n        var primitive = {\n          mode: mode,\n          attributes: attributes\n        };\n        this.serializeUserData(geometry, primitive);\n        if (targets.length > 0) primitive.targets = targets;\n\n        if (geometry.index !== null) {\n          var cacheKey = this.getUID(geometry.index);\n\n          if (groups[_i382].start !== undefined || groups[_i382].count !== undefined) {\n            cacheKey += ':' + groups[_i382].start + ':' + groups[_i382].count;\n          }\n\n          if (cache.attributes.has(cacheKey)) {\n            primitive.indices = cache.attributes.get(cacheKey);\n          } else {\n            primitive.indices = this.processAccessor(geometry.index, geometry, groups[_i382].start, groups[_i382].count);\n            cache.attributes.set(cacheKey, primitive.indices);\n          }\n\n          if (primitive.indices === null) delete primitive.indices;\n        }\n\n        var material = this.processMaterial(materials[groups[_i382].materialIndex]);\n        if (material !== null) primitive.material = material;\n        primitives.push(primitive);\n      }\n\n      meshDef.primitives = primitives;\n      if (!json.meshes) json.meshes = [];\n\n      this._invokeAll(function (ext) {\n        ext.writeMesh && ext.writeMesh(mesh, meshDef);\n      });\n\n      var index = json.meshes.push(meshDef) - 1;\n      cache.meshes.set(meshCacheKey, index);\n      return index;\n    }\n    /**\n     * Process camera\n     * @param  {THREE.Camera} camera Camera to process\n     * @return {Integer}      Index of the processed mesh in the \"camera\" array\n     */\n\n  }, {\n    key: \"processCamera\",\n    value: function processCamera(camera) {\n      var json = this.json;\n      if (!json.cameras) json.cameras = [];\n      var isOrtho = camera.isOrthographicCamera;\n      var cameraDef = {\n        type: isOrtho ? 'orthographic' : 'perspective'\n      };\n\n      if (isOrtho) {\n        cameraDef.orthographic = {\n          xmag: camera.right * 2,\n          ymag: camera.top * 2,\n          zfar: camera.far <= 0 ? 0.001 : camera.far,\n          znear: camera.near < 0 ? 0 : camera.near\n        };\n      } else {\n        cameraDef.perspective = {\n          aspectRatio: camera.aspect,\n          yfov: MathUtils.degToRad(camera.fov),\n          zfar: camera.far <= 0 ? 0.001 : camera.far,\n          znear: camera.near < 0 ? 0 : camera.near\n        };\n      } // Question: Is saving \"type\" as name intentional?\n\n\n      if (camera.name !== '') cameraDef.name = camera.type;\n      return json.cameras.push(cameraDef) - 1;\n    }\n    /**\n     * Creates glTF animation entry from AnimationClip object.\n     *\n     * Status:\n     * - Only properties listed in PATH_PROPERTIES may be animated.\n     *\n     * @param {THREE.AnimationClip} clip\n     * @param {THREE.Object3D} root\n     * @return {number|null}\n     */\n\n  }, {\n    key: \"processAnimation\",\n    value: function processAnimation(clip, root) {\n      var json = this.json;\n      var nodeMap = this.nodeMap;\n      if (!json.animations) json.animations = [];\n      clip = GLTFExporter.Utils.mergeMorphTargetTracks(clip.clone(), root);\n      var tracks = clip.tracks;\n      var channels = [];\n      var samplers = [];\n\n      for (var _i383 = 0; _i383 < tracks.length; ++_i383) {\n        var track = tracks[_i383];\n        var trackBinding = PropertyBinding.parseTrackName(track.name);\n        var trackNode = PropertyBinding.findNode(root, trackBinding.nodeName);\n        var trackProperty = PATH_PROPERTIES[trackBinding.propertyName];\n\n        if (trackBinding.objectName === 'bones') {\n          if (trackNode.isSkinnedMesh === true) {\n            trackNode = trackNode.skeleton.getBoneByName(trackBinding.objectIndex);\n          } else {\n            trackNode = undefined;\n          }\n        }\n\n        if (!trackNode || !trackProperty) {\n          console.warn('THREE.GLTFExporter: Could not export animation track \"%s\".', track.name);\n          return null;\n        }\n\n        var inputItemSize = 1;\n        var outputItemSize = track.values.length / track.times.length;\n\n        if (trackProperty === PATH_PROPERTIES.morphTargetInfluences) {\n          outputItemSize /= trackNode.morphTargetInfluences.length;\n        }\n\n        var interpolation = void 0; // @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n        // Detecting glTF cubic spline interpolant by checking factory method's special property\n        // GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n        // valid value from .getInterpolation().\n\n        if (track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true) {\n          interpolation = 'CUBICSPLINE'; // itemSize of CUBICSPLINE keyframe is 9\n          // (VEC3 * 3: inTangent, splineVertex, and outTangent)\n          // but needs to be stored as VEC3 so dividing by 3 here.\n\n          outputItemSize /= 3;\n        } else if (track.getInterpolation() === InterpolateDiscrete) {\n          interpolation = 'STEP';\n        } else {\n          interpolation = 'LINEAR';\n        }\n\n        samplers.push({\n          input: this.processAccessor(new BufferAttribute(track.times, inputItemSize)),\n          output: this.processAccessor(new BufferAttribute(track.values, outputItemSize)),\n          interpolation: interpolation\n        });\n        channels.push({\n          sampler: samplers.length - 1,\n          target: {\n            node: nodeMap.get(trackNode),\n            path: trackProperty\n          }\n        });\n      }\n\n      json.animations.push({\n        name: clip.name || 'clip_' + json.animations.length,\n        samplers: samplers,\n        channels: channels\n      });\n      return json.animations.length - 1;\n    }\n    /**\n     * @param {THREE.Object3D} object\n     * @return {number|null}\n     */\n\n  }, {\n    key: \"processSkin\",\n    value: function processSkin(object) {\n      var json = this.json;\n      var nodeMap = this.nodeMap;\n      var node = json.nodes[nodeMap.get(object)];\n      var skeleton = object.skeleton;\n      if (skeleton === undefined) return null;\n      var rootJoint = object.skeleton.bones[0];\n      if (rootJoint === undefined) return null;\n      var joints = [];\n      var inverseBindMatrices = new Float32Array(skeleton.bones.length * 16);\n      var temporaryBoneInverse = new Matrix4();\n\n      for (var _i384 = 0; _i384 < skeleton.bones.length; ++_i384) {\n        joints.push(nodeMap.get(skeleton.bones[_i384]));\n        temporaryBoneInverse.copy(skeleton.boneInverses[_i384]);\n        temporaryBoneInverse.multiply(object.bindMatrix).toArray(inverseBindMatrices, _i384 * 16);\n      }\n\n      if (json.skins === undefined) json.skins = [];\n      json.skins.push({\n        inverseBindMatrices: this.processAccessor(new BufferAttribute(inverseBindMatrices, 16)),\n        joints: joints,\n        skeleton: nodeMap.get(rootJoint)\n      });\n      var skinIndex = node.skin = json.skins.length - 1;\n      return skinIndex;\n    }\n    /**\n     * Process Object3D node\n     * @param  {THREE.Object3D} node Object3D to processNode\n     * @return {Integer} Index of the node in the nodes list\n     */\n\n  }, {\n    key: \"processNode\",\n    value: function processNode(object) {\n      var json = this.json;\n      var options = this.options;\n      var nodeMap = this.nodeMap;\n      if (!json.nodes) json.nodes = [];\n      var nodeDef = {};\n\n      if (options.trs) {\n        var rotation = object.quaternion.toArray();\n        var position = object.position.toArray();\n        var scale = object.scale.toArray();\n\n        if (!equalArray(rotation, [0, 0, 0, 1])) {\n          nodeDef.rotation = rotation;\n        }\n\n        if (!equalArray(position, [0, 0, 0])) {\n          nodeDef.translation = position;\n        }\n\n        if (!equalArray(scale, [1, 1, 1])) {\n          nodeDef.scale = scale;\n        }\n      } else {\n        if (object.matrixAutoUpdate) {\n          object.updateMatrix();\n        }\n\n        if (isIdentityMatrix(object.matrix) === false) {\n          nodeDef.matrix = object.matrix.elements;\n        }\n      } // We don't export empty strings name because it represents no-name in Three.js.\n\n\n      if (object.name !== '') nodeDef.name = String(object.name);\n      this.serializeUserData(object, nodeDef);\n\n      if (object.isMesh || object.isLine || object.isPoints) {\n        var meshIndex = this.processMesh(object);\n        if (meshIndex !== null) nodeDef.mesh = meshIndex;\n      } else if (object.isCamera) {\n        nodeDef.camera = this.processCamera(object);\n      }\n\n      if (object.isSkinnedMesh) this.skins.push(object);\n\n      if (object.children.length > 0) {\n        var children = [];\n\n        for (var _i385 = 0, _l88 = object.children.length; _i385 < _l88; _i385++) {\n          var child = object.children[_i385];\n\n          if (child.visible || options.onlyVisible === false) {\n            var _nodeIndex = this.processNode(child);\n\n            if (_nodeIndex !== null) children.push(_nodeIndex);\n          }\n        }\n\n        if (children.length > 0) nodeDef.children = children;\n      }\n\n      this._invokeAll(function (ext) {\n        ext.writeNode && ext.writeNode(object, nodeDef);\n      });\n\n      var nodeIndex = json.nodes.push(nodeDef) - 1;\n      nodeMap.set(object, nodeIndex);\n      return nodeIndex;\n    }\n    /**\n     * Process Scene\n     * @param  {Scene} node Scene to process\n     */\n\n  }, {\n    key: \"processScene\",\n    value: function processScene(scene) {\n      var json = this.json;\n      var options = this.options;\n\n      if (!json.scenes) {\n        json.scenes = [];\n        json.scene = 0;\n      }\n\n      var sceneDef = {};\n      if (scene.name !== '') sceneDef.name = scene.name;\n      json.scenes.push(sceneDef);\n      var nodes = [];\n\n      for (var _i386 = 0, _l89 = scene.children.length; _i386 < _l89; _i386++) {\n        var child = scene.children[_i386];\n\n        if (child.visible || options.onlyVisible === false) {\n          var nodeIndex = this.processNode(child);\n          if (nodeIndex !== null) nodes.push(nodeIndex);\n        }\n      }\n\n      if (nodes.length > 0) sceneDef.nodes = nodes;\n      this.serializeUserData(scene, sceneDef);\n    }\n    /**\n     * Creates a Scene to hold a list of objects and parse it\n     * @param  {Array} objects List of objects to process\n     */\n\n  }, {\n    key: \"processObjects\",\n    value: function processObjects(objects) {\n      var scene = new Scene();\n      scene.name = 'AuxScene';\n\n      for (var _i387 = 0; _i387 < objects.length; _i387++) {\n        // We push directly to children instead of calling `add` to prevent\n        // modify the .parent and break its original scene and hierarchy\n        scene.children.push(objects[_i387]);\n      }\n\n      this.processScene(scene);\n    }\n    /**\n     * @param {THREE.Object3D|Array<THREE.Object3D>} input\n     */\n\n  }, {\n    key: \"processInput\",\n    value: function processInput(input) {\n      var options = this.options;\n      input = input instanceof Array ? input : [input];\n\n      this._invokeAll(function (ext) {\n        ext.beforeParse && ext.beforeParse(input);\n      });\n\n      var objectsWithoutScene = [];\n\n      for (var _i388 = 0; _i388 < input.length; _i388++) {\n        if (input[_i388] instanceof Scene) {\n          this.processScene(input[_i388]);\n        } else {\n          objectsWithoutScene.push(input[_i388]);\n        }\n      }\n\n      if (objectsWithoutScene.length > 0) this.processObjects(objectsWithoutScene);\n\n      for (var _i389 = 0; _i389 < this.skins.length; ++_i389) {\n        this.processSkin(this.skins[_i389]);\n      }\n\n      for (var _i390 = 0; _i390 < options.animations.length; ++_i390) {\n        this.processAnimation(options.animations[_i390], input[0]);\n      }\n\n      this._invokeAll(function (ext) {\n        ext.afterParse && ext.afterParse(input);\n      });\n    }\n  }, {\n    key: \"_invokeAll\",\n    value: function _invokeAll(func) {\n      for (var _i391 = 0, il = this.plugins.length; _i391 < il; _i391++) {\n        func(this.plugins[_i391]);\n      }\n    }\n  }]);\n\n  return GLTFWriter;\n}();\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\n\n\nvar GLTFLightExtension = /*#__PURE__*/function () {\n  function GLTFLightExtension(writer) {\n    _classCallCheck(this, GLTFLightExtension);\n\n    this.writer = writer;\n    this.name = 'KHR_lights_punctual';\n  }\n\n  _createClass(GLTFLightExtension, [{\n    key: \"writeNode\",\n    value: function writeNode(light, nodeDef) {\n      if (!light.isLight) return;\n\n      if (!light.isDirectionalLight && !light.isPointLight && !light.isSpotLight) {\n        console.warn('THREE.GLTFExporter: Only directional, point, and spot lights are supported.', light);\n        return;\n      }\n\n      var writer = this.writer;\n      var json = writer.json;\n      var extensionsUsed = writer.extensionsUsed;\n      var lightDef = {};\n      if (light.name) lightDef.name = light.name;\n      lightDef.color = light.color.toArray();\n      lightDef.intensity = light.intensity;\n\n      if (light.isDirectionalLight) {\n        lightDef.type = 'directional';\n      } else if (light.isPointLight) {\n        lightDef.type = 'point';\n        if (light.distance > 0) lightDef.range = light.distance;\n      } else if (light.isSpotLight) {\n        lightDef.type = 'spot';\n        if (light.distance > 0) lightDef.range = light.distance;\n        lightDef.spot = {};\n        lightDef.spot.innerConeAngle = (light.penumbra - 1.0) * light.angle * -1.0;\n        lightDef.spot.outerConeAngle = light.angle;\n      }\n\n      if (light.decay !== undefined && light.decay !== 2) {\n        console.warn('THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, ' + 'and expects light.decay=2.');\n      }\n\n      if (light.target && (light.target.parent !== light || light.target.position.x !== 0 || light.target.position.y !== 0 || light.target.position.z !== -1)) {\n        console.warn('THREE.GLTFExporter: Light direction may be lost. For best results, ' + 'make light.target a child of the light with position 0,0,-1.');\n      }\n\n      if (!extensionsUsed[this.name]) {\n        json.extensions = json.extensions || {};\n        json.extensions[this.name] = {\n          lights: []\n        };\n        extensionsUsed[this.name] = true;\n      }\n\n      var lights = json.extensions[this.name].lights;\n      lights.push(lightDef);\n      nodeDef.extensions = nodeDef.extensions || {};\n      nodeDef.extensions[this.name] = {\n        light: lights.length - 1\n      };\n    }\n  }]);\n\n  return GLTFLightExtension;\n}();\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\n\n\nvar GLTFMaterialsUnlitExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsUnlitExtension(writer) {\n    _classCallCheck(this, GLTFMaterialsUnlitExtension);\n\n    this.writer = writer;\n    this.name = 'KHR_materials_unlit';\n  }\n\n  _createClass(GLTFMaterialsUnlitExtension, [{\n    key: \"writeMaterial\",\n    value: function writeMaterial(material, materialDef) {\n      if (!material.isMeshBasicMaterial) return;\n      var writer = this.writer;\n      var extensionsUsed = writer.extensionsUsed;\n      materialDef.extensions = materialDef.extensions || {};\n      materialDef.extensions[this.name] = {};\n      extensionsUsed[this.name] = true;\n      materialDef.pbrMetallicRoughness.metallicFactor = 0.0;\n      materialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\n    }\n  }]);\n\n  return GLTFMaterialsUnlitExtension;\n}();\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n */\n\n\nvar GLTFMaterialsPBRSpecularGlossiness = /*#__PURE__*/function () {\n  function GLTFMaterialsPBRSpecularGlossiness(writer) {\n    _classCallCheck(this, GLTFMaterialsPBRSpecularGlossiness);\n\n    this.writer = writer;\n    this.name = 'KHR_materials_pbrSpecularGlossiness';\n  }\n\n  _createClass(GLTFMaterialsPBRSpecularGlossiness, [{\n    key: \"writeMaterial\",\n    value: function writeMaterial(material, materialDef) {\n      if (!material.isGLTFSpecularGlossinessMaterial) return;\n      var writer = this.writer;\n      var extensionsUsed = writer.extensionsUsed;\n      var extensionDef = {};\n\n      if (materialDef.pbrMetallicRoughness.baseColorFactor) {\n        extensionDef.diffuseFactor = materialDef.pbrMetallicRoughness.baseColorFactor;\n      }\n\n      var specularFactor = [1, 1, 1];\n      material.specular.toArray(specularFactor, 0);\n      extensionDef.specularFactor = specularFactor;\n      extensionDef.glossinessFactor = material.glossiness;\n\n      if (materialDef.pbrMetallicRoughness.baseColorTexture) {\n        extensionDef.diffuseTexture = materialDef.pbrMetallicRoughness.baseColorTexture;\n      }\n\n      if (material.specularMap) {\n        var specularMapDef = {\n          index: writer.processTexture(material.specularMap)\n        };\n        writer.applyTextureTransform(specularMapDef, material.specularMap);\n        extensionDef.specularGlossinessTexture = specularMapDef;\n      }\n\n      materialDef.extensions = materialDef.extensions || {};\n      materialDef.extensions[this.name] = extensionDef;\n      extensionsUsed[this.name] = true;\n    }\n  }]);\n\n  return GLTFMaterialsPBRSpecularGlossiness;\n}();\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n */\n\n\nvar GLTFMaterialsTransmissionExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsTransmissionExtension(writer) {\n    _classCallCheck(this, GLTFMaterialsTransmissionExtension);\n\n    this.writer = writer;\n    this.name = 'KHR_materials_transmission';\n  }\n\n  _createClass(GLTFMaterialsTransmissionExtension, [{\n    key: \"writeMaterial\",\n    value: function writeMaterial(material, materialDef) {\n      if (!material.isMeshPhysicalMaterial || material.transmission === 0) return;\n      var writer = this.writer;\n      var extensionsUsed = writer.extensionsUsed;\n      var extensionDef = {};\n      extensionDef.transmissionFactor = material.transmission;\n\n      if (material.transmissionMap) {\n        var transmissionMapDef = {\n          index: writer.processTexture(material.transmissionMap)\n        };\n        writer.applyTextureTransform(transmissionMapDef, material.transmissionMap);\n        extensionDef.transmissionTexture = transmissionMapDef;\n      }\n\n      materialDef.extensions = materialDef.extensions || {};\n      materialDef.extensions[this.name] = extensionDef;\n      extensionsUsed[this.name] = true;\n    }\n  }]);\n\n  return GLTFMaterialsTransmissionExtension;\n}();\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\n\n\nvar GLTFMaterialsVolumeExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsVolumeExtension(writer) {\n    _classCallCheck(this, GLTFMaterialsVolumeExtension);\n\n    this.writer = writer;\n    this.name = 'KHR_materials_volume';\n  }\n\n  _createClass(GLTFMaterialsVolumeExtension, [{\n    key: \"writeMaterial\",\n    value: function writeMaterial(material, materialDef) {\n      if (!material.isMeshPhysicalMaterial || material.thickness === 0) return;\n      var writer = this.writer;\n      var extensionsUsed = writer.extensionsUsed;\n      var extensionDef = {};\n      extensionDef.thicknessFactor = material.thickness;\n\n      if (material.thicknessMap) {\n        var thicknessMapDef = {\n          index: writer.processTexture(material.thicknessMap)\n        };\n        writer.applyTextureTransform(thicknessMapDef, material.thicknessMap);\n        extensionDef.thicknessTexture = thicknessMapDef;\n      }\n\n      extensionDef.attenuationDistance = material.attenuationDistance;\n      extensionDef.attenuationColor = material.attenuationTint.toArray();\n      materialDef.extensions = materialDef.extensions || {};\n      materialDef.extensions[this.name] = extensionDef;\n      extensionsUsed[this.name] = true;\n    }\n  }]);\n\n  return GLTFMaterialsVolumeExtension;\n}();\n/**\n * Static utility functions\n */\n\n\nGLTFExporter.Utils = {\n  insertKeyframe: function insertKeyframe(track, time) {\n    var tolerance = 0.001; // 1ms\n\n    var valueSize = track.getValueSize();\n    var times = new track.TimeBufferType(track.times.length + 1);\n    var values = new track.ValueBufferType(track.values.length + valueSize);\n    var interpolant = track.createInterpolant(new track.ValueBufferType(valueSize));\n    var index;\n\n    if (track.times.length === 0) {\n      times[0] = time;\n\n      for (var _i392 = 0; _i392 < valueSize; _i392++) {\n        values[_i392] = 0;\n      }\n\n      index = 0;\n    } else if (time < track.times[0]) {\n      if (Math.abs(track.times[0] - time) < tolerance) return 0;\n      times[0] = time;\n      times.set(track.times, 1);\n      values.set(interpolant.evaluate(time), 0);\n      values.set(track.values, valueSize);\n      index = 0;\n    } else if (time > track.times[track.times.length - 1]) {\n      if (Math.abs(track.times[track.times.length - 1] - time) < tolerance) {\n        return track.times.length - 1;\n      }\n\n      times[times.length - 1] = time;\n      times.set(track.times, 0);\n      values.set(track.values, 0);\n      values.set(interpolant.evaluate(time), track.values.length);\n      index = times.length - 1;\n    } else {\n      for (var _i393 = 0; _i393 < track.times.length; _i393++) {\n        if (Math.abs(track.times[_i393] - time) < tolerance) return _i393;\n\n        if (track.times[_i393] < time && track.times[_i393 + 1] > time) {\n          times.set(track.times.slice(0, _i393 + 1), 0);\n          times[_i393 + 1] = time;\n          times.set(track.times.slice(_i393 + 1), _i393 + 2);\n          values.set(track.values.slice(0, (_i393 + 1) * valueSize), 0);\n          values.set(interpolant.evaluate(time), (_i393 + 1) * valueSize);\n          values.set(track.values.slice((_i393 + 1) * valueSize), (_i393 + 2) * valueSize);\n          index = _i393 + 1;\n          break;\n        }\n      }\n    }\n\n    track.times = times;\n    track.values = values;\n    return index;\n  },\n  mergeMorphTargetTracks: function mergeMorphTargetTracks(clip, root) {\n    var tracks = [];\n    var mergedTracks = {};\n    var sourceTracks = clip.tracks;\n\n    for (var _i394 = 0; _i394 < sourceTracks.length; ++_i394) {\n      var sourceTrack = sourceTracks[_i394];\n      var sourceTrackBinding = PropertyBinding.parseTrackName(sourceTrack.name);\n      var sourceTrackNode = PropertyBinding.findNode(root, sourceTrackBinding.nodeName);\n\n      if (sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined) {\n        // Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n        tracks.push(sourceTrack);\n        continue;\n      }\n\n      if (sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete && sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear) {\n        if (sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) {\n          // This should never happen, because glTF morph target animations\n          // affect all targets already.\n          throw new Error('THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.');\n        }\n\n        console.warn('THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.');\n        sourceTrack = sourceTrack.clone();\n        sourceTrack.setInterpolation(InterpolateLinear);\n      }\n\n      var targetCount = sourceTrackNode.morphTargetInfluences.length;\n      var targetIndex = sourceTrackNode.morphTargetDictionary[sourceTrackBinding.propertyIndex];\n\n      if (targetIndex === undefined) {\n        throw new Error('THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex);\n      }\n\n      var mergedTrack = void 0; // If this is the first time we've seen this object, create a new\n      // track to store merged keyframe data for each morph target.\n\n      if (mergedTracks[sourceTrackNode.uuid] === undefined) {\n        mergedTrack = sourceTrack.clone();\n        var values = new mergedTrack.ValueBufferType(targetCount * mergedTrack.times.length);\n\n        for (var j = 0; j < mergedTrack.times.length; j++) {\n          values[j * targetCount + targetIndex] = mergedTrack.values[j];\n        } // We need to take into consideration the intended target node\n        // of our original un-merged morphTarget animation.\n\n\n        mergedTrack.name = (sourceTrackBinding.nodeName || '') + '.morphTargetInfluences';\n        mergedTrack.values = values;\n        mergedTracks[sourceTrackNode.uuid] = mergedTrack;\n        tracks.push(mergedTrack);\n        continue;\n      }\n\n      var sourceInterpolant = sourceTrack.createInterpolant(new sourceTrack.ValueBufferType(1));\n      mergedTrack = mergedTracks[sourceTrackNode.uuid]; // For every existing keyframe of the merged track, write a (possibly\n      // interpolated) value from the source track.\n\n      for (var _j14 = 0; _j14 < mergedTrack.times.length; _j14++) {\n        mergedTrack.values[_j14 * targetCount + targetIndex] = sourceInterpolant.evaluate(mergedTrack.times[_j14]);\n      } // For every existing keyframe of the source track, write a (possibly\n      // new) keyframe to the merged track. Values from the previous loop may\n      // be written again, but keyframes are de-duplicated.\n\n\n      for (var _j15 = 0; _j15 < sourceTrack.times.length; _j15++) {\n        var keyframeIndex = this.insertKeyframe(mergedTrack, sourceTrack.times[_j15]);\n        mergedTrack.values[keyframeIndex * targetCount + targetIndex] = sourceTrack.values[_j15];\n      }\n    }\n\n    clip.tracks = tracks;\n    return clip;\n  }\n};\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param object {THREE.Object3D}\n * @return {boolean}\n */\n\nvar compatibleObject = function compatibleObject(object) {\n  // @TODO: Need properer variantMaterials format validation?\n  return object.material !== undefined && // easier than (!object.isMesh && !object.isLine &&\n  // !object.isPoints)\n  object.userData && // just in case\n  object.userData.variantMaterials && // Is this line costly?\n  !!Array.from(object.userData.variantMaterials.values()).filter(function (m) {\n    return compatibleMaterial(m.material);\n  });\n};\n/**\n * @param material {THREE.Material}\n * @return {boolean}\n */\n\n\nvar compatibleMaterial = function compatibleMaterial(material) {\n  // @TODO: support multi materials?\n  return material && material.isMaterial && !Array.isArray(material);\n};\n\nvar GLTFExporterMaterialsVariantsExtension = /*#__PURE__*/function () {\n  function GLTFExporterMaterialsVariantsExtension(writer) {\n    _classCallCheck(this, GLTFExporterMaterialsVariantsExtension);\n\n    this.writer = writer;\n    this.name = 'KHR_materials_variants';\n    this.variantNames = [];\n  }\n\n  _createClass(GLTFExporterMaterialsVariantsExtension, [{\n    key: \"beforeParse\",\n    value: function beforeParse(objects) {\n      var _this165 = this;\n\n      // Find all variant names and store them to the table\n      var variantNameSet = new Set();\n\n      var _iterator35 = _createForOfIteratorHelper(objects),\n          _step35;\n\n      try {\n        for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n          var object = _step35.value;\n          object.traverse(function (o) {\n            if (!compatibleObject(o)) {\n              return;\n            }\n\n            var variantMaterials = o.userData.variantMaterials;\n\n            var _iterator36 = _createForOfIteratorHelper(variantMaterials.keys()),\n                _step36;\n\n            try {\n              for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n                var variantName = _step36.value;\n                var variantMaterial = variantMaterials.get(variantName); // Ignore unloaded variant materials\n\n                if (compatibleMaterial(variantMaterial.material)) {\n                  variantNameSet.add(variantName);\n                }\n              }\n            } catch (err) {\n              _iterator36.e(err);\n            } finally {\n              _iterator36.f();\n            }\n          });\n        } // We may want to sort?\n\n      } catch (err) {\n        _iterator35.e(err);\n      } finally {\n        _iterator35.f();\n      }\n\n      variantNameSet.forEach(function (name) {\n        return _this165.variantNames.push(name);\n      });\n    }\n  }, {\n    key: \"writeMesh\",\n    value: function writeMesh(mesh, meshDef) {\n      if (!compatibleObject(mesh)) {\n        return;\n      }\n\n      var userData = mesh.userData;\n      var variantMaterials = userData.variantMaterials;\n      var mappingTable = new Map();\n\n      var _iterator37 = _createForOfIteratorHelper(variantMaterials.keys()),\n          _step37;\n\n      try {\n        for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n          var variantName = _step37.value;\n          var variantMaterialInstance = variantMaterials.get(variantName).material;\n\n          if (!compatibleMaterial(variantMaterialInstance)) {\n            continue;\n          }\n\n          var variantIndex = this.variantNames.indexOf(variantName); // Shouldn't be -1\n\n          var materialIndex = this.writer.processMaterial(variantMaterialInstance);\n\n          if (!mappingTable.has(materialIndex)) {\n            mappingTable.set(materialIndex, {\n              material: materialIndex,\n              variants: []\n            });\n          }\n\n          mappingTable.get(materialIndex).variants.push(variantIndex);\n        }\n      } catch (err) {\n        _iterator37.e(err);\n      } finally {\n        _iterator37.f();\n      }\n\n      var mappingsDef = Array.from(mappingTable.values()).map(function (m) {\n        return m.variants.sort(function (a, b) {\n          return a - b;\n        }) && m;\n      }).sort(function (a, b) {\n        return a.material - b.material;\n      });\n\n      if (mappingsDef.length === 0) {\n        return;\n      }\n\n      var originalMaterialIndex = compatibleMaterial(userData.originalMaterial) ? this.writer.processMaterial(userData.originalMaterial) : -1;\n\n      var _iterator38 = _createForOfIteratorHelper(meshDef.primitives),\n          _step38;\n\n      try {\n        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n          var primitiveDef = _step38.value;\n\n          // Override primitiveDef.material with original material.\n          if (originalMaterialIndex >= 0) {\n            primitiveDef.material = originalMaterialIndex;\n          }\n\n          primitiveDef.extensions = primitiveDef.extensions || {};\n          primitiveDef.extensions[this.name] = {\n            mappings: mappingsDef\n          };\n        }\n      } catch (err) {\n        _iterator38.e(err);\n      } finally {\n        _iterator38.f();\n      }\n    }\n  }, {\n    key: \"afterParse\",\n    value: function afterParse() {\n      if (this.variantNames.length === 0) {\n        return;\n      }\n\n      var root = this.writer.json;\n      root.extensions = root.extensions || {};\n      var variantsDef = this.variantNames.map(function (n) {\n        return {\n          name: n\n        };\n      });\n      root.extensions[this.name] = {\n        variants: variantsDef\n      };\n      this.writer.extensionsUsed[this.name] = true;\n    }\n  }]);\n\n  return GLTFExporterMaterialsVariantsExtension;\n}();\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar $correlatedObjects = Symbol('correlatedObjects');\nvar $sourceObject = Symbol('sourceObject');\nvar $onUpdate = Symbol('onUpdate');\n/**\n * A SerializableThreeDOMElement is the common primitive of all scene graph\n * elements that have been facaded in the host execution context. It adds\n * a common interface to these elements in support of convenient\n * serializability.\n */\n\nvar ThreeDOMElement = function ThreeDOMElement(onUpdate, element) {\n  var correlatedObjects = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  _classCallCheck(this, ThreeDOMElement);\n\n  this[$onUpdate] = onUpdate;\n  this[$sourceObject] = element;\n  this[$correlatedObjects] = correlatedObjects;\n};\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar loader = new ImageLoader();\nvar quadMaterial = new MeshBasicMaterial();\nvar quad = new PlaneGeometry(2, 2);\nvar $threeTexture = Symbol('threeTexture');\n/**\n * Image facade implementation for Three.js textures\n */\n\nvar Image$1 = /*#__PURE__*/function (_ThreeDOMElement) {\n  _inherits(Image$1, _ThreeDOMElement);\n\n  var _super148 = _createSuper(Image$1);\n\n  function Image$1(onUpdate, texture, gltfImage) {\n    _classCallCheck(this, Image$1);\n\n    gltfImage = gltfImage !== null && gltfImage !== void 0 ? gltfImage : {\n      name: 'adhoc_image',\n      uri: texture && texture.image ? texture.image.src : 'adhoc_image'\n    };\n    return _super148.call(this, onUpdate, gltfImage, new Set(texture ? [texture] : []));\n  }\n\n  _createClass(Image$1, [{\n    key: $threeTexture,\n    get: function get() {\n      var _a;\n\n      console.assert(this[$correlatedObjects] != null && this[$correlatedObjects].size > 0, 'Image correlated object is undefined');\n      return (_a = this[$correlatedObjects]) === null || _a === void 0 ? void 0 : _a.values().next().value;\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this[$sourceObject].name || '';\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      return this[$sourceObject].uri;\n    }\n  }, {\n    key: \"bufferView\",\n    get: function get() {\n      return this[$sourceObject].bufferView;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.uri != null ? 'external' : 'embedded';\n    }\n  }, {\n    key: \"setURI\",\n    value: function () {\n      var _setURI = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee40(uri) {\n        var image, texture;\n        return _regeneratorRuntime.wrap(function _callee40$(_context42) {\n          while (1) {\n            switch (_context42.prev = _context42.next) {\n              case 0:\n                this[$sourceObject].uri = uri;\n                _context42.next = 3;\n                return new Promise(function (resolve, reject) {\n                  loader.load(uri, resolve, undefined, reject);\n                });\n\n              case 3:\n                image = _context42.sent;\n                texture = this[$threeTexture];\n                texture.image = image;\n                texture.needsUpdate = true;\n                this[$onUpdate]();\n\n              case 8:\n              case \"end\":\n                return _context42.stop();\n            }\n          }\n        }, _callee40, this);\n      }));\n\n      function setURI(_x39) {\n        return _setURI.apply(this, arguments);\n      }\n\n      return setURI;\n    }()\n  }, {\n    key: \"createThumbnail\",\n    value: function () {\n      var _createThumbnail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee42(width, height) {\n        var scene, mesh, camera, threeRenderer, renderTarget, buffer, blobContext, imageData;\n        return _regeneratorRuntime.wrap(function _callee42$(_context44) {\n          while (1) {\n            switch (_context44.prev = _context44.next) {\n              case 0:\n                scene = new Scene();\n                quadMaterial.map = this[$threeTexture];\n                mesh = new Mesh(quad, quadMaterial);\n                scene.add(mesh);\n                camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n                threeRenderer = Renderer.singleton.threeRenderer;\n                renderTarget = new WebGLRenderTarget(width, height);\n                threeRenderer.setRenderTarget(renderTarget);\n                threeRenderer.render(scene, camera);\n                threeRenderer.setRenderTarget(null);\n                buffer = new Uint8Array(width * height * 4);\n                threeRenderer.readRenderTargetPixels(renderTarget, 0, 0, width, height, buffer);\n                blobCanvas.width = width;\n                blobCanvas.height = height;\n                blobContext = blobCanvas.getContext('2d');\n                imageData = blobContext.createImageData(width, height);\n                imageData.data.set(buffer);\n                blobContext.putImageData(imageData, 0, 0);\n                return _context44.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref34 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee41(resolve, reject) {\n                    return _regeneratorRuntime.wrap(function _callee41$(_context43) {\n                      while (1) {\n                        switch (_context43.prev = _context43.next) {\n                          case 0:\n                            blobCanvas.toBlob(function (blob) {\n                              if (!blob) {\n                                return reject('Failed to capture thumbnail.');\n                              }\n\n                              resolve(URL.createObjectURL(blob));\n                            }, 'image/png');\n\n                          case 1:\n                          case \"end\":\n                            return _context43.stop();\n                        }\n                      }\n                    }, _callee41);\n                  }));\n\n                  return function (_x42, _x43) {\n                    return _ref34.apply(this, arguments);\n                  };\n                }()));\n\n              case 19:\n              case \"end\":\n                return _context44.stop();\n            }\n          }\n        }, _callee42, this);\n      }));\n\n      function createThumbnail(_x40, _x41) {\n        return _createThumbnail.apply(this, arguments);\n      }\n\n      return createThumbnail;\n    }()\n  }]);\n\n  return Image$1;\n}(ThreeDOMElement);\n\nvar Filter;\n\n(function (Filter) {\n  Filter[Filter[\"Nearest\"] = 9728] = \"Nearest\";\n  Filter[Filter[\"Linear\"] = 9729] = \"Linear\";\n  Filter[Filter[\"NearestMipmapNearest\"] = 9984] = \"NearestMipmapNearest\";\n  Filter[Filter[\"LinearMipmapNearest\"] = 9985] = \"LinearMipmapNearest\";\n  Filter[Filter[\"NearestMipmapLinear\"] = 9986] = \"NearestMipmapLinear\";\n  Filter[Filter[\"LinearMipmapLinear\"] = 9987] = \"LinearMipmapLinear\";\n})(Filter || (Filter = {}));\n\nvar Wrap;\n\n(function (Wrap) {\n  Wrap[Wrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\n  Wrap[Wrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\n  Wrap[Wrap[\"Repeat\"] = 10497] = \"Repeat\";\n})(Wrap || (Wrap = {}));\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar isMinFilter = function () {\n  var minFilterValues = [Filter.Nearest, Filter.Linear, Filter.NearestMipmapNearest, Filter.LinearMipmapLinear, Filter.NearestMipmapLinear, Filter.LinearMipmapLinear];\n  return function (value) {\n    return minFilterValues.indexOf(value) > -1;\n  };\n}();\n\nvar isMagFilter = function () {\n  var magFilterValues = [Filter.Nearest, Filter.Linear];\n  return function (value) {\n    return magFilterValues.indexOf(value) > -1;\n  };\n}();\n\nvar isWrapMode = function () {\n  var wrapModes = [Wrap.ClampToEdge, Wrap.MirroredRepeat, Wrap.Repeat];\n  return function (value) {\n    return wrapModes.indexOf(value) > -1;\n  };\n}();\n\nvar isValidSamplerValue = function isValidSamplerValue(property, value) {\n  switch (property) {\n    case 'minFilter':\n      return isMinFilter(value);\n\n    case 'magFilter':\n      return isMagFilter(value);\n\n    case 'wrapS':\n    case 'wrapT':\n      return isWrapMode(value);\n\n    default:\n      throw new Error(\"Cannot configure property \\\"\".concat(property, \"\\\" on Sampler\"));\n  }\n};\n\nvar $threeTextures = Symbol('threeTextures');\nvar $setProperty = Symbol('setProperty');\nvar $sourceSampler = Symbol('sourceSampler');\n/**\n * Sampler facade implementation for Three.js textures\n */\n\nvar Sampler = /*#__PURE__*/function (_ThreeDOMElement2) {\n  _inherits(Sampler, _ThreeDOMElement2);\n\n  var _super149 = _createSuper(Sampler);\n\n  function Sampler(onUpdate, texture, gltfSampler) {\n    _classCallCheck(this, Sampler);\n\n    gltfSampler = gltfSampler !== null && gltfSampler !== void 0 ? gltfSampler : {}; // These defaults represent a convergence of glTF defaults for wrap mode and\n    // Three.js defaults for filters. Per glTF 2.0 spec, a renderer may choose\n    // its own defaults for filters.\n    // @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#reference-sampler\n    // @see https://threejs.org/docs/#api/en/textures/Texture\n\n    if (gltfSampler.minFilter == null) {\n      gltfSampler.minFilter = texture ? texture.minFilter : Filter.LinearMipmapLinear;\n    }\n\n    if (gltfSampler.magFilter == null) {\n      gltfSampler.magFilter = texture ? texture.magFilter : Filter.Linear;\n    }\n\n    if (gltfSampler.wrapS == null) {\n      gltfSampler.wrapS = texture ? texture.wrapS : Wrap.Repeat;\n    }\n\n    if (gltfSampler.wrapT == null) {\n      gltfSampler.wrapT = texture ? texture.wrapT : Wrap.Repeat;\n    }\n\n    return _super149.call(this, onUpdate, gltfSampler, new Set(texture ? [texture] : []));\n  }\n\n  _createClass(Sampler, [{\n    key: $threeTextures,\n    get: function get() {\n      console.assert(this[$correlatedObjects] != null && this[$correlatedObjects].size > 0, 'Sampler correlated object is undefined');\n      return this[$correlatedObjects];\n    }\n  }, {\n    key: $sourceSampler,\n    get: function get() {\n      console.assert(this[$sourceObject] != null, 'Sampler source is undefined');\n      return this[$sourceObject];\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this[$sourceObject].name || '';\n    }\n  }, {\n    key: \"minFilter\",\n    get: function get() {\n      return this[$sourceSampler].minFilter;\n    }\n  }, {\n    key: \"magFilter\",\n    get: function get() {\n      return this[$sourceSampler].magFilter;\n    }\n  }, {\n    key: \"wrapS\",\n    get: function get() {\n      return this[$sourceSampler].wrapS;\n    }\n  }, {\n    key: \"wrapT\",\n    get: function get() {\n      return this[$sourceSampler].wrapT;\n    }\n  }, {\n    key: \"setMinFilter\",\n    value: function setMinFilter(filter) {\n      this[$setProperty]('minFilter', filter);\n    }\n  }, {\n    key: \"setMagFilter\",\n    value: function setMagFilter(filter) {\n      this[$setProperty]('magFilter', filter);\n    }\n  }, {\n    key: \"setWrapS\",\n    value: function setWrapS(mode) {\n      this[$setProperty]('wrapS', mode);\n    }\n  }, {\n    key: \"setWrapT\",\n    value: function setWrapT(mode) {\n      this[$setProperty]('wrapT', mode);\n    }\n  }, {\n    key: $setProperty,\n    value: function value(property, _value11) {\n      var sampler = this[$sourceSampler];\n\n      if (sampler != null) {\n        if (isValidSamplerValue(property, _value11)) {\n          sampler[property] = _value11;\n\n          var _iterator39 = _createForOfIteratorHelper(this[$threeTextures]),\n              _step39;\n\n          try {\n            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n              var texture = _step39.value;\n              texture[property] = _value11;\n              texture.needsUpdate = true;\n            }\n          } catch (err) {\n            _iterator39.e(err);\n          } finally {\n            _iterator39.f();\n          }\n        }\n\n        this[$onUpdate]();\n      }\n    }\n  }]);\n\n  return Sampler;\n}(ThreeDOMElement);\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar $image = Symbol('image');\nvar $sampler = Symbol('sampler');\n/**\n * Material facade implementation for Three.js materials\n */\n\nvar Texture = /*#__PURE__*/function (_ThreeDOMElement3) {\n  _inherits(Texture, _ThreeDOMElement3);\n\n  var _super150 = _createSuper(Texture);\n\n  function Texture(onUpdate, threeTexture) {\n    var _this166;\n\n    var gltfTexture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var gltfSampler = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var gltfImage = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, Texture);\n\n    _this166 = _super150.call(this, onUpdate, gltfTexture ? gltfTexture : {}, new Set(threeTexture ? [threeTexture] : []));\n    _this166[$sampler] = new Sampler(onUpdate, threeTexture, gltfSampler);\n    _this166[$image] = new Image$1(onUpdate, threeTexture, gltfImage);\n    return _this166;\n  }\n\n  _createClass(Texture, [{\n    key: \"name\",\n    get: function get() {\n      return this[$sourceObject].name || '';\n    }\n  }, {\n    key: \"sampler\",\n    get: function get() {\n      return this[$sampler];\n    }\n  }, {\n    key: \"source\",\n    get: function get() {\n      return this[$image];\n    }\n  }]);\n\n  return Texture;\n}(ThreeDOMElement);\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a$1;\n\nvar $texture = Symbol('texture');\nvar $materials$1 = Symbol('materials');\nvar $usage = Symbol('usage'); // Defines what a texture will be used for.\n\nvar TextureUsage;\n\n(function (TextureUsage) {\n  TextureUsage[TextureUsage[\"Base\"] = 0] = \"Base\";\n  TextureUsage[TextureUsage[\"MetallicRoughness\"] = 1] = \"MetallicRoughness\";\n  TextureUsage[TextureUsage[\"Normal\"] = 2] = \"Normal\";\n  TextureUsage[TextureUsage[\"Occlusion\"] = 3] = \"Occlusion\";\n  TextureUsage[TextureUsage[\"Emissive\"] = 4] = \"Emissive\";\n})(TextureUsage || (TextureUsage = {}));\n/**\n * TextureInfo facade implementation for Three.js materials\n */\n\n\nvar TextureInfo = /*#__PURE__*/function () {\n  function TextureInfo(onUpdate, usage, threeTexture, material, gltf, gltfTextureInfo) {\n    _classCallCheck(this, TextureInfo);\n\n    this[_a$1] = null; // Creates image, sampler, and texture if valid texture info is provided.\n\n    if (gltfTextureInfo) {\n      var gltfTexture = gltf.textures ? gltf.textures[gltfTextureInfo.index] : null;\n      var sampler = gltfTexture ? gltf.samplers ? gltf.samplers[gltfTexture.sampler] : null : null;\n      var image = gltfTexture ? gltf.images ? gltf.images[gltfTexture.source] : null : null;\n      this[$texture] = new Texture(onUpdate, threeTexture, gltfTexture, sampler, image);\n    }\n\n    this.onUpdate = onUpdate;\n    this[$materials$1] = material;\n    this[$usage] = usage;\n  }\n\n  _createClass(TextureInfo, [{\n    key: \"texture\",\n    get: function get() {\n      return this[$texture];\n    }\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(texture) {\n      var threeTexture = texture != null ? texture.source[$threeTexture] : null;\n      var encoding = sRGBEncoding;\n      this[$texture] = texture;\n\n      if (this[$materials$1]) {\n        var _iterator40 = _createForOfIteratorHelper(this[$materials$1]),\n            _step40;\n\n        try {\n          for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n            var material = _step40.value;\n\n            switch (this[$usage]) {\n              case TextureUsage.Base:\n                material.map = threeTexture;\n                break;\n\n              case TextureUsage.MetallicRoughness:\n                encoding = LinearEncoding;\n                material.metalnessMap = threeTexture;\n                material.roughnessMap = threeTexture;\n                break;\n\n              case TextureUsage.Normal:\n                encoding = LinearEncoding;\n                material.normalMap = threeTexture;\n                break;\n\n              case TextureUsage.Occlusion:\n                encoding = LinearEncoding;\n                material.aoMap = threeTexture;\n                break;\n\n              case TextureUsage.Emissive:\n                material.emissiveMap = threeTexture;\n                break;\n            }\n\n            material.needsUpdate = true;\n          }\n        } catch (err) {\n          _iterator40.e(err);\n        } finally {\n          _iterator40.f();\n        }\n      }\n\n      if (threeTexture) {\n        // Updates the encoding for the texture, affects all references.\n        threeTexture.encoding = encoding;\n      }\n\n      this.onUpdate();\n    }\n  }]);\n\n  return TextureInfo;\n}();\n\n_a$1 = $texture;\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar $threeMaterials = Symbol('threeMaterials');\nvar $baseColorTexture = Symbol('baseColorTexture');\nvar $metallicRoughnessTexture = Symbol('metallicRoughnessTexture');\n/**\n * PBR material properties facade implementation for Three.js materials\n */\n\nvar PBRMetallicRoughness = /*#__PURE__*/function (_ThreeDOMElement4) {\n  _inherits(PBRMetallicRoughness, _ThreeDOMElement4);\n\n  var _super151 = _createSuper(PBRMetallicRoughness);\n\n  function PBRMetallicRoughness(onUpdate, gltf, pbrMetallicRoughness, correlatedMaterials) {\n    var _this167;\n\n    _classCallCheck(this, PBRMetallicRoughness);\n\n    _this167 = _super151.call(this, onUpdate, pbrMetallicRoughness, correlatedMaterials); // Assign glTF default values\n\n    if (pbrMetallicRoughness.baseColorFactor == null) {\n      pbrMetallicRoughness.baseColorFactor = [1, 1, 1, 1];\n    }\n\n    if (pbrMetallicRoughness.roughnessFactor == null) {\n      pbrMetallicRoughness.roughnessFactor = 1;\n    }\n\n    if (pbrMetallicRoughness.metallicFactor == null) {\n      pbrMetallicRoughness.metallicFactor = 1;\n    }\n\n    var gltfBaseColorTexture = pbrMetallicRoughness.baseColorTexture,\n        gltfMetallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;\n    var _correlatedMaterials$ = correlatedMaterials.values().next().value,\n        map = _correlatedMaterials$.map,\n        metalnessMap = _correlatedMaterials$.metalnessMap;\n    _this167[$baseColorTexture] = new TextureInfo(onUpdate, TextureUsage.Base, map, correlatedMaterials, gltf, gltfBaseColorTexture ? gltfBaseColorTexture : null);\n    _this167[$metallicRoughnessTexture] = new TextureInfo(onUpdate, TextureUsage.MetallicRoughness, metalnessMap, correlatedMaterials, gltf, gltfMetallicRoughnessTexture ? gltfMetallicRoughnessTexture : null);\n    return _this167;\n  }\n\n  _createClass(PBRMetallicRoughness, [{\n    key: $threeMaterials,\n    get: function get() {\n      return this[$correlatedObjects];\n    }\n  }, {\n    key: \"baseColorFactor\",\n    get: function get() {\n      return this[$sourceObject].baseColorFactor;\n    }\n  }, {\n    key: \"metallicFactor\",\n    get: function get() {\n      return this[$sourceObject].metallicFactor;\n    }\n  }, {\n    key: \"roughnessFactor\",\n    get: function get() {\n      return this[$sourceObject].roughnessFactor;\n    }\n  }, {\n    key: \"baseColorTexture\",\n    get: function get() {\n      return this[$baseColorTexture];\n    }\n  }, {\n    key: \"metallicRoughnessTexture\",\n    get: function get() {\n      return this[$metallicRoughnessTexture];\n    }\n  }, {\n    key: \"setBaseColorFactor\",\n    value: function setBaseColorFactor(rgba) {\n      var _iterator41 = _createForOfIteratorHelper(this[$threeMaterials]),\n          _step41;\n\n      try {\n        for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n          var material = _step41.value;\n          material.color.fromArray(rgba);\n          material.opacity = rgba[3];\n        }\n      } catch (err) {\n        _iterator41.e(err);\n      } finally {\n        _iterator41.f();\n      }\n\n      var pbrMetallicRoughness = this[$sourceObject];\n      pbrMetallicRoughness.baseColorFactor = rgba;\n      this[$onUpdate]();\n    }\n  }, {\n    key: \"setMetallicFactor\",\n    value: function setMetallicFactor(value) {\n      var _iterator42 = _createForOfIteratorHelper(this[$threeMaterials]),\n          _step42;\n\n      try {\n        for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n          var material = _step42.value;\n          material.metalness = value;\n        }\n      } catch (err) {\n        _iterator42.e(err);\n      } finally {\n        _iterator42.f();\n      }\n\n      var pbrMetallicRoughness = this[$sourceObject];\n      pbrMetallicRoughness.metallicFactor = value;\n      this[$onUpdate]();\n    }\n  }, {\n    key: \"setRoughnessFactor\",\n    value: function setRoughnessFactor(value) {\n      var _iterator43 = _createForOfIteratorHelper(this[$threeMaterials]),\n          _step43;\n\n      try {\n        for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n          var material = _step43.value;\n          material.roughness = value;\n        }\n      } catch (err) {\n        _iterator43.e(err);\n      } finally {\n        _iterator43.f();\n      }\n\n      var pbrMetallicRoughness = this[$sourceObject];\n      pbrMetallicRoughness.roughnessFactor = value;\n      this[$onUpdate]();\n    }\n  }]);\n\n  return PBRMetallicRoughness;\n}(ThreeDOMElement);\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar $pbrMetallicRoughness = Symbol('pbrMetallicRoughness');\nvar $normalTexture = Symbol('normalTexture');\nvar $occlusionTexture = Symbol('occlusionTexture');\nvar $emissiveTexture = Symbol('emissiveTexture');\nvar $backingThreeMaterial = Symbol('backingThreeMaterial');\nvar $applyAlphaCutoff = Symbol('applyAlphaCutoff');\n/**\n * Material facade implementation for Three.js materials\n */\n\nvar Material = /*#__PURE__*/function (_ThreeDOMElement5) {\n  _inherits(Material, _ThreeDOMElement5);\n\n  var _super152 = _createSuper(Material);\n\n  function Material(onUpdate, gltf, gltfMaterial, correlatedMaterials) {\n    var _this168;\n\n    _classCallCheck(this, Material);\n\n    _this168 = _super152.call(this, onUpdate, gltfMaterial, correlatedMaterials);\n\n    if (correlatedMaterials == null) {\n      return _possibleConstructorReturn(_this168);\n    }\n\n    if (gltfMaterial.extensions && gltfMaterial.extensions['KHR_materials_pbrSpecularGlossiness']) {\n      console.warn(\"Material \".concat(gltfMaterial.name, \" uses a deprecated extension\\n          \\\"KHR_materials_pbrSpecularGlossiness\\\", please use\\n          \\\"pbrMetallicRoughness\\\" instead. Specular Glossiness materials are\\n          currently supported for rendering, but not for our scene-graph API,\\n          nor for auto-generation of USDZ for Quick Look.\"));\n    }\n\n    if (gltfMaterial.pbrMetallicRoughness == null) {\n      gltfMaterial.pbrMetallicRoughness = {};\n    }\n\n    _this168[$pbrMetallicRoughness] = new PBRMetallicRoughness(onUpdate, gltf, gltfMaterial.pbrMetallicRoughness, correlatedMaterials);\n\n    if (gltfMaterial.emissiveFactor == null) {\n      gltfMaterial.emissiveFactor = [0, 0, 0];\n    }\n\n    if (gltfMaterial.doubleSided == null) {\n      gltfMaterial.doubleSided = false;\n    }\n\n    if (gltfMaterial.alphaMode == null) {\n      gltfMaterial.alphaMode = 'OPAQUE';\n    }\n\n    if (gltfMaterial.alphaCutoff == null) {\n      gltfMaterial.alphaCutoff = 0.5;\n    }\n\n    var gltfNormalTexture = gltfMaterial.normalTexture,\n        gltfOcculsionTexture = gltfMaterial.occlusionTexture,\n        gltfEmissiveTexture = gltfMaterial.emissiveTexture;\n    var _correlatedMaterials$2 = correlatedMaterials.values().next().value,\n        normalMap = _correlatedMaterials$2.normalMap,\n        aoMap = _correlatedMaterials$2.aoMap,\n        emissiveMap = _correlatedMaterials$2.emissiveMap;\n    _this168[$normalTexture] = new TextureInfo(onUpdate, TextureUsage.Normal, normalMap, correlatedMaterials, gltf, gltfNormalTexture ? gltfNormalTexture : null);\n    _this168[$occlusionTexture] = new TextureInfo(onUpdate, TextureUsage.Occlusion, aoMap, correlatedMaterials, gltf, gltfOcculsionTexture ? gltfOcculsionTexture : null);\n    _this168[$emissiveTexture] = new TextureInfo(onUpdate, TextureUsage.Emissive, emissiveMap, correlatedMaterials, gltf, gltfEmissiveTexture ? gltfEmissiveTexture : null);\n    return _this168;\n  }\n\n  _createClass(Material, [{\n    key: $backingThreeMaterial,\n    get: function get() {\n      return this[$correlatedObjects].values().next().value;\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this[$sourceObject].name || '';\n    }\n  }, {\n    key: \"pbrMetallicRoughness\",\n    get: function get() {\n      return this[$pbrMetallicRoughness];\n    }\n  }, {\n    key: \"normalTexture\",\n    get: function get() {\n      return this[$normalTexture];\n    }\n  }, {\n    key: \"occlusionTexture\",\n    get: function get() {\n      return this[$occlusionTexture];\n    }\n  }, {\n    key: \"emissiveTexture\",\n    get: function get() {\n      return this[$emissiveTexture];\n    }\n  }, {\n    key: \"emissiveFactor\",\n    get: function get() {\n      return this[$sourceObject].emissiveFactor;\n    }\n  }, {\n    key: \"setEmissiveFactor\",\n    value: function setEmissiveFactor(rgb) {\n      var _iterator44 = _createForOfIteratorHelper(this[$correlatedObjects]),\n          _step44;\n\n      try {\n        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n          var material = _step44.value;\n          material.emissive.fromArray(rgb);\n        }\n      } catch (err) {\n        _iterator44.e(err);\n      } finally {\n        _iterator44.f();\n      }\n\n      this[$sourceObject].emissiveFactor = rgb;\n      this[$onUpdate]();\n    }\n  }, {\n    key: $applyAlphaCutoff,\n    value: function value() {\n      var gltfMaterial = this[$sourceObject]; // 0.0001 is the minimum in order to keep from using zero, which disables\n      // masking in three.js. It's also small enough to be less than the smallest\n      // normalized 8-bit value.\n\n      var cutoff = gltfMaterial.alphaMode === 'OPAQUE' ? ALPHA_CUTOFF_OPAQUE : gltfMaterial.alphaMode === 'BLEND' ? ALPHA_CUTOFF_BLEND : Math.max(0.0001, Math.min(1.0, gltfMaterial.alphaCutoff));\n\n      var _iterator45 = _createForOfIteratorHelper(this[$correlatedObjects]),\n          _step45;\n\n      try {\n        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n          var material = _step45.value;\n          material.alphaTest = cutoff;\n          material.needsUpdate = true;\n        }\n      } catch (err) {\n        _iterator45.e(err);\n      } finally {\n        _iterator45.f();\n      }\n    }\n  }, {\n    key: \"setAlphaCutoff\",\n    value: function setAlphaCutoff(cutoff) {\n      this[$sourceObject].alphaCutoff = cutoff;\n      this[$applyAlphaCutoff]();\n      this[$onUpdate]();\n    }\n  }, {\n    key: \"getAlphaCutoff\",\n    value: function getAlphaCutoff() {\n      return this[$sourceObject].alphaCutoff;\n    }\n  }, {\n    key: \"setDoubleSided\",\n    value: function setDoubleSided(doubleSided) {\n      var _iterator46 = _createForOfIteratorHelper(this[$correlatedObjects]),\n          _step46;\n\n      try {\n        for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n          var material = _step46.value;\n          // When double-sided is disabled gltf spec dictates that Back-Face culling\n          // must be disabled, in three.js parlance that would mean FrontSide\n          // rendering only.\n          // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#double-sided\n          material.side = doubleSided ? DoubleSide : FrontSide;\n          material.needsUpdate = true;\n        }\n      } catch (err) {\n        _iterator46.e(err);\n      } finally {\n        _iterator46.f();\n      }\n\n      this[$sourceObject].doubleSided = doubleSided;\n      this[$onUpdate]();\n    }\n  }, {\n    key: \"getDoubleSided\",\n    value: function getDoubleSided() {\n      return this[$sourceObject].doubleSided;\n    }\n  }, {\n    key: \"setAlphaMode\",\n    value: function setAlphaMode(alphaMode) {\n      var enableTransparency = function enableTransparency(material, enabled) {\n        material.transparent = enabled;\n        material.depthWrite = !enabled;\n      };\n\n      this[$sourceObject].alphaMode = alphaMode;\n\n      var _iterator47 = _createForOfIteratorHelper(this[$correlatedObjects]),\n          _step47;\n\n      try {\n        for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n          var material = _step47.value;\n          enableTransparency(material, alphaMode !== 'OPAQUE');\n          this[$applyAlphaCutoff]();\n          material.needsUpdate = true;\n        }\n      } catch (err) {\n        _iterator47.e(err);\n      } finally {\n        _iterator47.f();\n      }\n\n      this[$onUpdate]();\n    }\n  }, {\n    key: \"getAlphaMode\",\n    value: function getAlphaMode() {\n      return this[$sourceObject].alphaMode;\n    }\n  }]);\n\n  return Material;\n}(ThreeDOMElement);\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar _a;\n\nvar $materials = Symbol('materials');\n/**\n * A Model facades the top-level GLTF object returned by Three.js' GLTFLoader.\n * Currently, the model only bothers itself with the materials in the Three.js\n * scene graph.\n */\n\nvar Model = /*#__PURE__*/function () {\n  function Model(correlatedSceneGraph) {\n    var _this169 = this;\n\n    var onUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n    _classCallCheck(this, Model);\n\n    this[_a] = [];\n    var gltf = correlatedSceneGraph.gltf,\n        gltfElementMap = correlatedSceneGraph.gltfElementMap;\n    gltf.materials.forEach(function (material) {\n      _this169[$materials].push(new Material(onUpdate, gltf, material, gltfElementMap.get(material)));\n    });\n  }\n  /**\n   * Materials are listed in the order of the GLTF materials array, plus a\n   * default material at the end if one is used.\n   *\n   * TODO(#1003): How do we handle non-active scenes?\n   */\n\n\n  _createClass(Model, [{\n    key: \"materials\",\n    get: function get() {\n      return this[$materials];\n    }\n  }]);\n\n  return Model;\n}();\n\n_a = $materials;\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar $currentGLTF = Symbol('currentGLTF');\nvar $model = Symbol('model');\nvar $variants = Symbol('variants');\nvar $getOnUpdateMethod = Symbol('getOnUpdateMethod');\nvar $textureLoader = Symbol('textureLoader');\nvar $originalGltfJson = Symbol('originalGltfJson');\n/**\n * SceneGraphMixin manages exposes a model API in order to support operations on\n * the <model-viewer> scene graph.\n */\n\nvar SceneGraphMixin = function SceneGraphMixin(ModelViewerElement) {\n  var _a, _b, _c, _d, _e;\n\n  var SceneGraphModelViewerElement = /*#__PURE__*/function (_ModelViewerElement7, _ref35) {\n    _inherits(SceneGraphModelViewerElement, _ModelViewerElement7);\n\n    var _super153 = _createSuper(SceneGraphModelViewerElement);\n\n    function SceneGraphModelViewerElement() {\n      var _this170;\n\n      _classCallCheck(this, SceneGraphModelViewerElement);\n\n      _this170 = _super153.apply(this, arguments);\n      _this170[_a] = undefined;\n      _this170[_b] = null;\n      _this170[_c] = [];\n      _this170[_d] = new TextureLoader();\n      _this170[_e] = null;\n      _this170.variantName = undefined;\n      _this170.orientation = '0 0 0';\n      _this170.scale = '1 1 1';\n      return _this170;\n    } // Scene-graph API:\n\n    /** @export */\n\n\n    _createClass(SceneGraphModelViewerElement, [{\n      key: \"model\",\n      get: function get() {\n        return this[$model];\n      }\n    }, {\n      key: \"availableVariants\",\n      get: function get() {\n        return this[$variants];\n      }\n      /**\n       * Returns a deep copy of the gltf JSON as loaded. It will not reflect\n       * changes to the scene-graph, nor will editing it have any effect.\n       */\n\n    }, {\n      key: \"originalGltfJson\",\n      get: function get() {\n        return this[$originalGltfJson];\n      }\n    }, {\n      key: _ref35,\n      value: function value() {\n        var _this171 = this;\n\n        return function () {\n          _this171[$needsRender]();\n        };\n      }\n    }, {\n      key: \"createTexture\",\n      value: function () {\n        var _createTexture2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee43(uri) {\n          var _this172 = this;\n\n          var type,\n              currentGLTF,\n              texture,\n              _args44 = arguments;\n          return _regeneratorRuntime.wrap(function _callee43$(_context45) {\n            while (1) {\n              switch (_context45.prev = _context45.next) {\n                case 0:\n                  type = _args44.length > 1 && _args44[1] !== undefined ? _args44[1] : 'image/png';\n                  currentGLTF = this[$currentGLTF];\n                  _context45.next = 4;\n                  return new Promise(function (resolve) {\n                    return _this172[$textureLoader].load(uri, resolve);\n                  });\n\n                case 4:\n                  texture = _context45.sent;\n\n                  if (!(!currentGLTF || !texture)) {\n                    _context45.next = 7;\n                    break;\n                  }\n\n                  return _context45.abrupt(\"return\", null);\n\n                case 7:\n                  // Applies default settings.\n                  texture.encoding = sRGBEncoding;\n                  texture.wrapS = RepeatWrapping;\n                  texture.wrapT = RepeatWrapping;\n                  texture.flipY = false; // This hack is because GLTFExporter checks if format is RGB vs RGBA to\n                  // decide if it should save as JPEG vs PNG. However, TextureLoader sets\n                  // format based on if the url ends in .jpg, which does not work for an\n                  // ObjectURL like we're passing here. So, to keep from inflating all JPEGs\n                  // to PNGs, we allow the user of the API to specify the type.\n\n                  if (type === 'image/jpeg') {\n                    texture.format = RGBFormat;\n                  }\n\n                  return _context45.abrupt(\"return\", new Texture(this[$getOnUpdateMethod](), texture));\n\n                case 13:\n                case \"end\":\n                  return _context45.stop();\n              }\n            }\n          }, _callee43, this);\n        }));\n\n        function createTexture(_x44) {\n          return _createTexture2.apply(this, arguments);\n        }\n\n        return createTexture;\n      }()\n    }, {\n      key: \"updated\",\n      value: function () {\n        var _updated2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee44(changedProperties) {\n          var threeGLTF, variantName, updatedMaterials, _threeGLTF$correlated, gltf, gltfElementMap, _iterator48, _step48, index, material, modelContainer, orientation, roll, pitch, yaw, scale;\n\n          return _regeneratorRuntime.wrap(function _callee44$(_context46) {\n            while (1) {\n              switch (_context46.prev = _context46.next) {\n                case 0:\n                  _get(_getPrototypeOf(SceneGraphModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n                  if (!changedProperties.has('variantName')) {\n                    _context46.next = 13;\n                    break;\n                  }\n\n                  threeGLTF = this[$currentGLTF];\n                  variantName = this.variantName;\n\n                  if (!(threeGLTF == null)) {\n                    _context46.next = 6;\n                    break;\n                  }\n\n                  return _context46.abrupt(\"return\");\n\n                case 6:\n                  _context46.next = 8;\n                  return threeGLTF.correlatedSceneGraph.loadVariant(variantName);\n\n                case 8:\n                  updatedMaterials = _context46.sent;\n                  _threeGLTF$correlated = threeGLTF.correlatedSceneGraph, gltf = _threeGLTF$correlated.gltf, gltfElementMap = _threeGLTF$correlated.gltfElementMap;\n                  _iterator48 = _createForOfIteratorHelper(updatedMaterials);\n\n                  try {\n                    for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n                      index = _step48.value;\n                      material = gltf.materials[index];\n                      this[$model].materials[index] = new Material(this[$getOnUpdateMethod](), gltf, material, gltfElementMap.get(material));\n                    }\n                  } catch (err) {\n                    _iterator48.e(err);\n                  } finally {\n                    _iterator48.f();\n                  }\n\n                  this[$needsRender]();\n\n                case 13:\n                  if (changedProperties.has('orientation') || changedProperties.has('scale')) {\n                    modelContainer = this[$scene].modelContainer;\n                    orientation = parseExpressions(this.orientation)[0].terms;\n                    roll = normalizeUnit(orientation[0]).number;\n                    pitch = normalizeUnit(orientation[1]).number;\n                    yaw = normalizeUnit(orientation[2]).number;\n                    modelContainer.quaternion.setFromEuler(new Euler(pitch, yaw, roll, 'YXZ'));\n                    scale = parseExpressions(this.scale)[0].terms;\n                    modelContainer.scale.set(scale[0].number, scale[1].number, scale[2].number);\n                    this[$scene].updateBoundingBox();\n                    this[$scene].updateShadow();\n                    this[$renderer].arRenderer.onUpdateScene();\n                    this[$needsRender]();\n                  }\n\n                case 14:\n                case \"end\":\n                  return _context46.stop();\n              }\n            }\n          }, _callee44, this);\n        }));\n\n        function updated(_x45) {\n          return _updated2.apply(this, arguments);\n        }\n\n        return updated;\n      }()\n    }, {\n      key: $onModelLoad,\n      value: function value() {\n        _get(_getPrototypeOf(SceneGraphModelViewerElement.prototype), $onModelLoad, this).call(this);\n\n        this[$variants] = [];\n        var currentGLTF = this[$scene].currentGLTF;\n\n        if (currentGLTF != null) {\n          var correlatedSceneGraph = currentGLTF.correlatedSceneGraph;\n\n          if (correlatedSceneGraph != null && currentGLTF !== this[$currentGLTF]) {\n            this[$model] = new Model(correlatedSceneGraph, this[$getOnUpdateMethod]());\n            this[$originalGltfJson] = JSON.parse(JSON.stringify(correlatedSceneGraph.gltf));\n          } // KHR_materials_variants extension spec:\n          // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_variants\n\n\n          if ('variants' in currentGLTF.userData) {\n            this[$variants] = currentGLTF.userData.variants.slice();\n            this.requestUpdate('variantName');\n          }\n        }\n\n        this[$currentGLTF] = currentGLTF; // TODO: remove this event, as it is synonymous with the load event.\n\n        this.dispatchEvent(new CustomEvent('scene-graph-ready'));\n      }\n      /** @export */\n\n    }, {\n      key: \"exportScene\",\n      value: function () {\n        var _exportScene = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee46(options) {\n          var _this173 = this;\n\n          var scene;\n          return _regeneratorRuntime.wrap(function _callee46$(_context48) {\n            while (1) {\n              switch (_context48.prev = _context48.next) {\n                case 0:\n                  scene = this[$scene];\n                  return _context48.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                    var _ref36 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee45(resolve) {\n                      var opts, shadow, visible, currentGLTF, exporter;\n                      return _regeneratorRuntime.wrap(function _callee45$(_context47) {\n                        while (1) {\n                          switch (_context47.prev = _context47.next) {\n                            case 0:\n                              // Defaults\n                              opts = {\n                                binary: true,\n                                onlyVisible: true,\n                                maxTextureSize: Infinity,\n                                forcePowerOfTwoTextures: false,\n                                includeCustomExtensions: false,\n                                embedImages: true\n                              };\n                              Object.assign(opts, options); // Not configurable\n\n                              // Not configurable\n                              opts.animations = scene.animations;\n                              opts.truncateDrawRange = true;\n                              shadow = scene.shadow;\n                              visible = false; // Remove shadow from export\n\n                              // Remove shadow from export\n                              if (shadow != null) {\n                                visible = shadow.visible;\n                                shadow.visible = false;\n                              }\n\n                              currentGLTF = _this173[$currentGLTF];\n\n                              if (!(currentGLTF != null && 'functions' in currentGLTF.userData && 'ensureLoadVariants' in currentGLTF.userData.functions)) {\n                                _context47.next = 11;\n                                break;\n                              }\n\n                              _context47.next = 11;\n                              return currentGLTF.userData.functions.ensureLoadVariants(scene);\n\n                            case 11:\n                              exporter = new GLTFExporter().register(function (writer) {\n                                return new GLTFExporterMaterialsVariantsExtension(writer);\n                              });\n                              exporter.parse(scene.modelContainer.children[0], function (gltf) {\n                                return resolve(new Blob([opts.binary ? gltf : JSON.stringify(gltf)], {\n                                  type: opts.binary ? 'application/octet-stream' : 'application/json'\n                                }));\n                              }, opts);\n\n                              if (shadow != null) {\n                                shadow.visible = visible;\n                              }\n\n                            case 14:\n                            case \"end\":\n                              return _context47.stop();\n                          }\n                        }\n                      }, _callee45);\n                    }));\n\n                    return function (_x47) {\n                      return _ref36.apply(this, arguments);\n                    };\n                  }()));\n\n                case 2:\n                case \"end\":\n                  return _context48.stop();\n              }\n            }\n          }, _callee46, this);\n        }));\n\n        function exportScene(_x46) {\n          return _exportScene.apply(this, arguments);\n        }\n\n        return exportScene;\n      }()\n    }]);\n\n    return SceneGraphModelViewerElement;\n  }(ModelViewerElement, (_a = $model, _b = $currentGLTF, _c = $variants, _d = $textureLoader, _e = $originalGltfJson, $getOnUpdateMethod));\n\n  __decorate$1([property({\n    type: String,\n    attribute: 'variant-name'\n  })], SceneGraphModelViewerElement.prototype, \"variantName\", void 0);\n\n  __decorate$1([property({\n    type: String,\n    attribute: 'orientation'\n  })], SceneGraphModelViewerElement.prototype, \"orientation\", void 0);\n\n  __decorate$1([property({\n    type: String,\n    attribute: 'scale'\n  })], SceneGraphModelViewerElement.prototype, \"scale\", void 0);\n\n  return SceneGraphModelViewerElement;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // How much the model will rotate per\n// second in radians:\n\n\nvar DEFAULT_ROTATION_SPEED = Math.PI / 32;\nvar AUTO_ROTATE_DELAY_DEFAULT = 3000;\nvar rotationRateIntrinsics = {\n  basis: [degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED, 'rad'))],\n  keywords: {\n    auto: [null]\n  }\n};\nvar $autoRotateStartTime = Symbol('autoRotateStartTime');\nvar $radiansPerSecond = Symbol('radiansPerSecond');\nvar $syncRotationRate = Symbol('syncRotationRate');\nvar $onCameraChange = Symbol('onCameraChange');\n\nvar StagingMixin = function StagingMixin(ModelViewerElement) {\n  var _a, _b, _c;\n\n  var StagingModelViewerElement = /*#__PURE__*/function (_ModelViewerElement8, _ref37) {\n    _inherits(StagingModelViewerElement, _ModelViewerElement8);\n\n    var _super154 = _createSuper(StagingModelViewerElement);\n\n    function StagingModelViewerElement() {\n      var _this174;\n\n      _classCallCheck(this, StagingModelViewerElement);\n\n      _this174 = _super154.apply(this, arguments);\n      _this174.autoRotate = false;\n      _this174.autoRotateDelay = AUTO_ROTATE_DELAY_DEFAULT;\n      _this174.rotationPerSecond = 'auto';\n      _this174[_a] = performance.now();\n      _this174[_b] = 0;\n\n      _this174[_c] = function (event) {\n        if (!_this174.autoRotate) {\n          return;\n        }\n\n        if (event.detail.source === 'user-interaction') {\n          _this174[$autoRotateStartTime] = performance.now();\n        }\n      };\n\n      return _this174;\n    }\n\n    _createClass(StagingModelViewerElement, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(StagingModelViewerElement.prototype), \"connectedCallback\", this).call(this);\n\n        this.addEventListener('camera-change', this[$onCameraChange]);\n        this[$autoRotateStartTime] = performance.now();\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(StagingModelViewerElement.prototype), \"disconnectedCallback\", this).call(this);\n\n        this.removeEventListener('camera-change', this[$onCameraChange]);\n        this[$autoRotateStartTime] = performance.now();\n      }\n    }, {\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        _get(_getPrototypeOf(StagingModelViewerElement.prototype), \"updated\", this).call(this, changedProperties);\n\n        if (changedProperties.has('autoRotate')) {\n          this[$autoRotateStartTime] = performance.now();\n        }\n      }\n    }, {\n      key: _ref37,\n      value: function value(style) {\n        this[$radiansPerSecond] = style[0];\n      }\n    }, {\n      key: $tick,\n      value: function value(time, delta) {\n        _get(_getPrototypeOf(StagingModelViewerElement.prototype), $tick, this).call(this, time, delta);\n\n        if (!this.autoRotate || !this[$hasTransitioned]() || this[$renderer].isPresenting) {\n          return;\n        }\n\n        var rotationDelta = Math.min(delta, time - this[$autoRotateStartTime] - this.autoRotateDelay);\n\n        if (rotationDelta > 0) {\n          this[$scene].yaw = this.turntableRotation + this[$radiansPerSecond] * rotationDelta * 0.001;\n        }\n      }\n    }, {\n      key: \"turntableRotation\",\n      get: function get() {\n        return this[$scene].yaw;\n      }\n    }, {\n      key: \"resetTurntableRotation\",\n      value: function resetTurntableRotation() {\n        var theta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        this[$scene].yaw = theta;\n      }\n    }]);\n\n    return StagingModelViewerElement;\n  }(ModelViewerElement, (_a = $autoRotateStartTime, _b = $radiansPerSecond, $syncRotationRate));\n\n  _c = $onCameraChange;\n\n  __decorate([property({\n    type: Boolean,\n    attribute: 'auto-rotate'\n  })], StagingModelViewerElement.prototype, \"autoRotate\", void 0);\n\n  __decorate([property({\n    type: Number,\n    attribute: 'auto-rotate-delay'\n  })], StagingModelViewerElement.prototype, \"autoRotateDelay\", void 0);\n\n  __decorate([style({\n    intrinsics: rotationRateIntrinsics,\n    updateHandler: $syncRotationRate\n  }), property({\n    type: String,\n    attribute: 'rotation-per-second'\n  })], StagingModelViewerElement.prototype, \"rotationPerSecond\", void 0);\n\n  return StagingModelViewerElement;\n};\n/**\n * This mixin function is designed to be applied to a class that inherits\n * from HTMLElement. It makes it easy for a custom element to coordinate with\n * the :focus-visible polyfill.\n *\n * NOTE(cdata): The code here was adapted from an example proposed with the\n * introduction of ShadowDOM support in the :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196\n * @param {Function} SuperClass The base class implementation to decorate with\n * implementation that coordinates with the :focus-visible polyfill\n */\n\n\nvar FocusVisiblePolyfillMixin = function FocusVisiblePolyfillMixin(SuperClass) {\n  var _a;\n\n  var coordinateWithPolyfill = function coordinateWithPolyfill(instance) {\n    // If there is no shadow root, there is no need to coordinate with\n    // the polyfill. If we already coordinated with the polyfill, we can\n    // skip subsequent invokcations:\n    if (instance.shadowRoot == null || instance.hasAttribute('data-js-focus-visible')) {\n      return function () {};\n    } // The polyfill might already be loaded. If so, we can apply it to\n    // the shadow root immediately:\n\n\n    if (self.applyFocusVisiblePolyfill) {\n      self.applyFocusVisiblePolyfill(instance.shadowRoot);\n    } else {\n      var coordinationHandler = function coordinationHandler() {\n        self.applyFocusVisiblePolyfill(instance.shadowRoot);\n      }; // Otherwise, wait for the polyfill to be loaded lazily. It might\n      // never be loaded, but if it is then we can apply it to the\n      // shadow root at the appropriate time by waiting for the ready\n      // event:\n\n\n      self.addEventListener('focus-visible-polyfill-ready', coordinationHandler, {\n        once: true\n      });\n      return function () {\n        self.removeEventListener('focus-visible-polyfill-ready', coordinationHandler);\n      };\n    }\n\n    return function () {};\n  };\n\n  var $endPolyfillCoordination = Symbol('endPolyfillCoordination'); // IE11 doesn't natively support custom elements or JavaScript class\n  // syntax The mixin implementation assumes that the user will take the\n  // appropriate steps to support both:\n\n  var FocusVisibleCoordinator = /*#__PURE__*/function (_SuperClass) {\n    _inherits(FocusVisibleCoordinator, _SuperClass);\n\n    var _super155 = _createSuper(FocusVisibleCoordinator);\n\n    function FocusVisibleCoordinator() {\n      var _this175;\n\n      _classCallCheck(this, FocusVisibleCoordinator);\n\n      _this175 = _super155.apply(this, arguments);\n      _this175[_a] = null;\n      return _this175;\n    } // Attempt to coordinate with the polyfill when connected to the\n    // document:\n\n\n    _createClass(FocusVisibleCoordinator, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(FocusVisibleCoordinator.prototype), \"connectedCallback\", this) && _get(_getPrototypeOf(FocusVisibleCoordinator.prototype), \"connectedCallback\", this).call(this);\n\n        if (this[$endPolyfillCoordination] == null) {\n          this[$endPolyfillCoordination] = coordinateWithPolyfill(this);\n        }\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(FocusVisibleCoordinator.prototype), \"disconnectedCallback\", this) && _get(_getPrototypeOf(FocusVisibleCoordinator.prototype), \"disconnectedCallback\", this).call(this); // It's important to remove the polyfill event listener when we\n        // disconnect, otherwise we will leak the whole element via window:\n\n        if (this[$endPolyfillCoordination] != null) {\n          this[$endPolyfillCoordination]();\n          this[$endPolyfillCoordination] = null;\n        }\n      }\n    }]);\n\n    return FocusVisibleCoordinator;\n  }(SuperClass);\n\n  _a = $endPolyfillCoordination;\n  return FocusVisibleCoordinator;\n};\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Uncomment these lines to export PMREM textures in Glitch:\n// export {default as TextureUtils} from './three-components/TextureUtils';\n// export * from 'three';\n\n\nvar ModelViewerElement = AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));\ncustomElements.define('model-viewer', ModelViewerElement);\nexport { ModelViewerElement };"],"names":["_ENCODINGS","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","F","s","done","value","_e6","f","TypeError","err","normalCompletion","didErr","step","next","_e7","return","arr","len","arr2","isCEPolyfill","window","customElements","undefined","polyfillWrapFlushCallback","removeNodes","container","start","end","_n","nextSibling","removeChild","marker","concat","String","Math","random","nodeMarker","markerRegex","RegExp","boundAttributeSuffix","Template","element","parts","nodesToRemove","stack","walker","document","createTreeWalker","content","lastPartIndex","index","partIndex","strings","values","node","nextNode","nodeType","hasAttributes","attributes","_length","count","_i","endsWith","stringForPart","lastAttributeNameRegex","exec","attributeLookupName","toLowerCase","attributeValue","getAttribute","removeAttribute","statics","split","type","tagName","currentNode","data","indexOf","parent","parentNode","_strings","lastIndex","_i2","insert","_s2","createMarker","match","createTextNode","insertBefore","_parent","previousSibling","_i3","pop","_i4","_nodesToRemove","_n2","str","suffix","isTemplatePartActive","part","createComment","walkerNodeFilter","removeNodesFromTemplate","template","nextActiveIndexInTemplateParts","nodeIndex","removeCount","nodesToRemoveInTemplate","currentRemovingNode","has","countNodes","startIndex","_i5","directives","WeakMap","isDirective","noChange","nothing","TemplateInstance","processor","options","__parts","_step","_iterator","setValue","_step2","_iterator2","_part","commit","fragment","cloneNode","importNode","nodeName","_part2","handleTextExpression","insertAfterNode","_this$__parts","handleAttributeExpressions","adoptNode","upgrade","policy","trustedTypes","createPolicy","createHTML","commentMarker","TemplateResult","l","html","isCommentBinding","_i6","_s3","commentOpen","lastIndexOf","attributeMatch","substr","createElement","getHTML","innerHTML","NodePart","__pendingValue","startNode","appendChild","endNode","ref","__insert","directive","isPrimitive","__commitTemplateResult","Node","__commitNode","isIterable","clear","__commitText","__commitIterable","valueAsString","templateFactory","update","_instance","_clone","itemPart","_step3","itemParts","_iterator3","item","appendIntoPart","insertAfterPart","templateCache","templateCaches","get","stringsArray","keyString","Map","set","join","getTemplateElement","addEventListener","removeEventListener","_e","getTemplateCacheKey","scopeName","compatibleShadyCSSVersion","ShadyCSS","prepareTemplateDom","console","warn","shadyTemplateFactory","cacheKey","TEMPLATE_TYPES","shadyRenderSet","Set","prepareTemplateStyles","renderedDOM","add","templateElement","styles","querySelectorAll","condensedStyle","_i7","_style","textContent","templates","removeStylesFromLitTemplates","refNode","insertCount","walkerIndex","insertNodeIntoTemplate","firstChild","style","querySelector","nativeShadow","removes","JSCompiler_renameProperty","prop","_obj","defaultConverter","toAttribute","JSON","stringify","fromAttribute","Number","parse","notEqual","old","defaultPropertyDeclaration","attribute","converter","reflect","hasChanged","finalized","UpdatingElement","_HTMLElement","_enqueueUpdate2","_super","_this2","initialize","_this3","_updateState","_updatePromise","Promise","res","_enableUpdatingResolver","_changedProperties","_saveInstanceProperties","requestUpdateInternal","_this4","_classProperties","_v","p","hasOwnProperty","_instanceProperties","_this5","v","enableUpdating","_attributeToProperty","ctor","attr","_attributeNameForProperty","attrValue","_propertyValueToAttribute","setAttribute","propName","_attributeToPropertyMap","getPropertyOptions","_propertyValueFromAttribute","oldValue","shouldRequestUpdate","_valueHasChanged","_reflectingProperties","_hasRequestedUpdate","_enqueueUpdate","updateComplete","_callee","_context2","prev","t0","performUpdate","abrupt","stop","_applyInstanceProperties","shouldUpdate","changedProperties","_markUpdated","firstUpdated","updated","_getUpdateComplete","getUpdateComplete","_this6","size","k","_propertyToAttribute","_this7","finalize","_this8","superProperties","getPrototypeOf","_ensureClassProperties","noAccessor","descriptor","getPropertyDescriptor","configurable","superCtor","_step4","props","properties","_iterator4","getOwnPropertyNames","_p2","createProperty","HTMLElement","property","protoOrDescriptor","proto","legacyProperty","kind","assign","finisher","clazz","placement","initializer","standardProperty","supportsAdoptingStyleSheets","ShadowRoot","Document","CSSStyleSheet","constructionToken","CSSResult","cssText","safeToken","Error","_styleSheet","replaceSync","renderNotImplemented","LitElement","_UpdatingElement","_super2","_getUniqueStyles","renderRoot","createRenderRoot","adoptStyles","attachShadow","shadowRootOptions","_styles","adoptedStyleSheets","map","styleSheet","_needsShimAdoptedStyleSheets","ScopingShim","prepareAdoptedCssText","localName","hasUpdated","styleElement","_this9","templateResult","render","eventContext","userStyles","getStyles","addStyles","reduceRight","unshift","cssRules","reduce","css","rule","hasRendered","needsScoping","host","firstScopeRender","renderContainer","createDocumentFragment","appendInto","render$1","delete","_template","mode","userAgent","HAS_WEBXR_DEVICE_API","navigator","xr","self","XRSession","isSessionSupported","HAS_WEBXR_HIT_TEST_API","requestHitTestSource","HAS_RESIZE_OBSERVER","ResizeObserver","HAS_INTERSECTION_OBSERVER","IntersectionObserver","IS_WEBXR_AR_CANDIDATE","vendor","opera","tempAnchor","IS_ANDROID","IS_IOS","MSStream","platform","maxTouchPoints","IS_AR_QUICKLOOK_CANDIDATE","relList","supports","IS_FIREFOX","IS_OCULUS","IS_SCENEVIEWER_CANDIDATE","AddEquation","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","CubeUVReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","UnsignedByteType","UnsignedShortType","UnsignedIntType","FloatType","HalfFloatType","UnsignedInt248Type","RGBFormat","RGBAFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","KeepStencilOp","StaticDrawUsage","DynamicDrawUsage","GLSL3","EventDispatcher","listener","_listeners","listeners","listenerArray","splice","event","array","_i8","_l2","_lut","_i9","_seed","DEG2RAD","PI","RAD2DEG","generateUUID","d0","d1","d2","d3","toUpperCase","clamp$1","min","max","euclideanModulo","m","lerp","x","y","t","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","floor","MathUtils","freeze","__proto__","clamp","mapLinear","a1","a2","b1","b2","inverseLerp","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","scalar","w","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","round","sqrt","angle","atan2","distanceToSquared","dx","dy","normalize","alpha","v1","v2","offset","getX","getY","center","isVector2","_canvas","Matrix3","error","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","g","h","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","r","tx","ty","sx","sy","rotation","cx","cy","theta","matrix","_i10","_i11","fromArray","isMatrix3","ImageUtils","image","src","HTMLCanvasElement","canvas","createElementNS","width","height","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture$1","_EventDispatcher","_super3","_this10","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","uuid","mipmaps","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","isRenderTargetTexture","setUvTransform","copy","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","_i12","_l3","isDataTexture","serializeImage","dispatchEvent","uv","applyMatrix3","HTMLImageElement","ImageBitmap","getDataURL","isTexture","Vector4","z","acos","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","isVector4","WebGLRenderTarget","_EventDispatcher2","_super4","_this11","depth","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","dispose","clone","isWebGLRenderTarget","_WebGLRenderTarget","WebGLMultipleRenderTargets","_super5","_this12","_i13","_i14","il","_i15","isWebGLMultipleRenderTargets","WebGLMultisampleRenderTarget","_WebGLRenderTarget2","_super6","_this13","samples","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","_onChangeCallback","quaternion","euler","isEuler","_order","c1","c3","s1","s3","axis","halfAngle","trace","_s4","_s5","_s6","_s7","vFrom","vTo","dot","EPSILON","angleTo","slerp","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","_s8","sinHalfTheta","halfTheta","ratioA","ratioB","qa","callback","qm","slerpQuaternions","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","_s9","dir","sqrSin","tDir","_f3","isQuaternion","Vector3","multiplyVectors","applyQuaternion","_quaternion$4","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector$c","projectOnVector","sub","normal","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","isVector3","Box3","Infinity","minX","minY","minZ","maxX","maxY","maxZ","_i16","_l4","_x2","_i17","_l5","_x3","points","makeEmpty","_i18","expandByPoint","halfSize","_vector$b","expandByObject","box","isEmpty","point","vector","addScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","_box$3","union","children","_i19","_l6","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0$2","_v1$7","_v2$3","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","getSize","_points","setFromPoints","equals","isBox3","_testAxis","v0","extents","_i20","j","_r2","p0","p1","p2","_box$2","_v1$6","_toFarthestPoint","_toPoint","Sphere","optionalCenter","maxRadiusSq","_i21","distanceTo","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","missingRadiusHalf","_vector$a","_segCenter","_segDir","_diff","_edge1","_edge2","_normal$1","Ray","origin","direction","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","tca","radius2","thc","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$5","scaleY","scaleZ","af","bf","ce","cf","de","df","_ce","_cf","_de","_df","_ae","_af","_be","_bf","ac","ad","bc","bd","_ac","_ad","_bc","_bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","position","scale","x2","y2","z2","wx","wy","wz","determinant","_m1$2","invSX","invSY","invSZ","setFromRotationMatrix","left","right","top","bottom","near","far","_i22","_i23","isMatrix4","_matrix$1","_quaternion$3","Euler","DefaultOrder","asin","makeRotationFromQuaternion","newOrder","setFromQuaternion","optionalResult","RotationOrders","Layers","mask","channel","layers","_object3DId","_v1$4","_q1","_m1$1","_target","_position$3","_scale$2","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","_EventDispatcher3","_super7","_this14","DefaultUp","_onChange","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","userData","updateMatrix","premultiply","decompose","multiply","rotateOnAxis","distance","translateOnAxis","setFromMatrixPosition","isCamera","isLight","lookAt","extractRotation","_i24","isObject3D","remove","_i25","_i26","id","getObjectByProperty","_i27","_l7","_i28","_l8","traverse","_i29","_l9","traverseVisible","traverseAncestors","force","_i30","_l10","updateMatrixWorld","updateParents","updateChildren","_i31","_l11","geometries","materials","shapes","skeletons","serialize","library","toJSON","toArray","isInstancedMesh","instanceMatrix","instanceColor","isScene","background","isColor","environment","isMesh","isLine","isPoints","parameters","_i32","_l12","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","_i33","_l13","_i34","_i35","animation","extractFromCache","_shapes","cache","recursive","_i36","child","_v0$1","_v1$3","_v2$2","_v3$1","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","i0","i1","i2","getNormal","setFromCoplanarPoints","getBarycoord","uv1","uv2","uv3","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","addScaledVector","d5","d6","vb","va","denom","targetLengthSq","dot00","dot01","dot02","dot11","dot12","invDenom","u","p3","materialId","Material$1","_EventDispatcher4","_super8","_this15","fog","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","alphaToCoverage","premultipliedAlpha","toneMapped","onBeforeCompile","newValue","currentValue","flatShading","isRoot","_data","color","getHex","roughness","metalness","sheen","emissive","emissiveIntensity","specular","specularIntensity","specularTint","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularTintMap","envMap","combine","envMapIntensity","reflectivity","refractionRatio","gradientMap","transmission","transmissionMap","thickness","thicknessMap","attenuationDistance","attenuationTint","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","srcPlanes","dstPlanes","_n3","_i37","isMaterial","_colorKeywords","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","Color","setRGB","setHex","setStyle","hex","_p3","handleAlpha","string","parseFloat","components","parseInt","_s10","_l14","setHSL","charAt","setColorName","gammaFactor","safeInverse","copyGammaToLinear","copyLinearToGamma","copySRGBToLinear","copyLinearToSRGB","hue","saturation","lightness","delta","getHSL","color1","color2","normalized","NAMES","MeshBasicMaterial","_Material$","_super9","_this16","setValues","isMeshBasicMaterial","_vector$9","_vector2$1","BufferAttribute","itemSize","usage","updateRange","index1","index2","_i38","_l15","colors","_i39","_l16","vectors","_i40","_l17","_i41","_l18","_i42","_l19","_i43","_l20","fromBufferAttribute","setXY","_i44","_l21","setXYZ","_i45","_l22","_i46","_l23","applyNormalMatrix","_i47","_l24","onUploadCallback","isBufferAttribute","Uint16BufferAttribute","_BufferAttribute","_super10","Uint16Array","Uint32BufferAttribute","_BufferAttribute2","_super11","Uint32Array","_BufferAttribute3","Float16BufferAttribute","_super12","isFloat16BufferAttribute","Float32BufferAttribute","_BufferAttribute4","_super13","Float32Array","arrayMax","_i48","_l25","_id","_m1","_offset","_box$1","_boxMorphTargets","_vector$8","BufferGeometry","_EventDispatcher5","_super14","_this17","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","materialIndex","needsUpdate","getNormalMatrix","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","negate","translate","_i49","_l26","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","_i50","morphAttribute","isNaN","_i51","_i52","_il","_i53","_il2","_morphAttribute","jl","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","_i54","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","_i55","group","handleTriangle","tmp2","n2","_i56","_il3","_group","_start2","_j2","_jl","handleVertex","isFinite","positionAttribute","normalAttribute","_i57","pA","pB","pC","nA","nB","nC","cb","ab","_i58","_il4","_i59","_il5","normalizeNormals","isBufferGeometry","attributeArray1","attribute2","attributeArray2","attributeOffset","_i60","_i61","convertBufferAttribute","array2","_i62","_l27","isInterleavedBufferAttribute","stride","geometry2","newAttribute","_name","morphArray","_i63","_newAttribute","_i64","_l28","addGroup","_key","hasMorphAttributes","_key2","attributeArray","_i65","_attribute2","setIndex","_name2","_i66","_l29","_i67","_l30","_inverseMatrix$2","_ray$2","_sphere$3","_vA$1","_vB$1","_vC$1","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA$1","_uvB$1","_uvC$1","_intersectionPoint","_intersectionPointWorld","Mesh","_Object3D","_super15","_this18","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","morphTargets","raycaster","intersects","intersection","intersectsBox","morphPosition","_i68","groupMaterial","_a2","_c2","checkBufferGeometryIntersection","faceIndex","face","_i69","_il6","_a3","_b2","_c3","_i70","_il7","_group2","_groupMaterial","_j3","_jl2","_i71","_il8","isGeometry","morphInfluences","_i72","influence","boneTransform","intersectTriangle","checkIntersection","BoxGeometry","_BufferGeometry","_super16","_this19","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","_x4","_iy","_ix","_a6","_c6","cloneUniforms","_p4","_property","mergeUniforms","uniforms","merged","_tmp","_p5","UniformsUtils","merge","ShaderMaterial","_Material$2","_super17","_this20","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","isShaderMaterial","Camera","_Object3D2","_super18","_this21","PerspectiveCamera","_Camera","_super19","_this22","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","focalLength","vExtentSlope","getFilmHeight","atan","tan","fullWidth","fullHeight","enabled","offsetX","offsetY","skew","getFilmWidth","makePerspective","isPerspectiveCamera","CubeCamera","_Object3D3","_super20","renderTarget","_this23","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","_this$children","currentXrEnabled","currentRenderTarget","getRenderTarget","setRenderTarget","CubeTexture","_Texture$","_super21","_this24","isCubeTexture","WebGLCubeRenderTarget","_WebGLRenderTarget3","_super22","dummy","_this25","isInteger","_needsFlipEnvMap","shader","tEquirect","mesh","currentMinFilter","stencil","_i73","_vector1","_vector2","_normalMatrix","Plane","setFromNormalAndCoplanarPoint","inverseNormalLength","line","startSign","endSign","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","isPlane","_sphere$2","_vector$7","Frustum","p4","p5","planes","frustum","_i74","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","_i75","_i76","_i77","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","deleteBuffer","buffer","bufferType","cached","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","Float64Array","Int16Array","Int32Array","Int8Array","Uint8Array","Uint8ClampedArray","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","PlaneGeometry","_BufferGeometry2","_super23","_this26","width_half","height_half","segment_width","segment_height","_x5","_iy2","_ix2","_a7","_c7","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","state","objects","planeMesh","boxMesh","clearColor","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","deleteAttribute","onBeforeRender","copyPosition","toneMapping","WebGLBindingStates","maxVertexAttributes","getParameter","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","_i78","program","initAttributes","_i79","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","_i80","disableVertexAttribArray","vertexAttribPointer","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","_attribute3","_buffer","_type","_attribute4","_buffer2","_type2","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","_i82","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","_i81","WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","fromEquirectangularTexture","physical","transmissionSamplerSize","transmissionSamplerMap","OrthographicCamera","_Camera2","_super24","_this27","scaleW","scaleH","makeOrthographic","isOrthographicCamera","RawShaderMaterial","_ShaderMaterial","_super25","_this28","isRawShaderMaterial","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","MAX_SAMPLES","ENCODINGS","backgroundMaterial","backgroundBox","_flatCamera$1","_createPlanes2","_createPlanes","_lodPlanes","_sizeLods","_sigmas","_clearColor","_oldTarget","PHI","INV_PHI","_axisDirections","convertLinearToRGBE","maxComponent","fExp","log2","PMREMGenerator","weights","poleAxis","_renderer","_pingPongRenderTarget","_blurMaterial","_equirectShader","_cubemapShader","_compileMaterial","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapShader","_getEquirectShader","_i83","outputTarget","_setViewport","_textureToCubeUV","params","_isLDR","_createRenderTarget","tmpMesh","compile","cubeCamera","upSign","forwardSign","originalAutoClear","outputEncoding","useSolidColor","convertSRGBToLinear","_alpha2","_i84","col","_i85","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","sum","_i86","_x6","weight","_i87","outputSize","lod","_i88","sizeLod","texelSize","positionSize","uvSize","faceIndexSize","_x7","coordinates","fill","WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","cubemapUV","isEquirectMap","isCubeMap","_i89","isCubeTextureComplete","fromEquirectangular","fromCubemap","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","_i91","_l32","_a8","_c8","_array","_i92","_l33","_a9","_b5","_c9","previousAttribute","_name3","_i90","_l31","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","_i93","objectInfluences","influences","_i94","_i95","sort","_i96","MAX_SAFE_INTEGER","morphNormals","morphInfluencesSum","_i97","_influence","hasAttribute","morphBaseInfluence","getUniforms","WebGLObjects","updateMap","onInstancedMeshDispose","instancedMesh","buffergeometry","hasEventListener","DataTexture2DArray","_Texture$2","_super26","_this29","wrapR","isDataTexture2DArray","DataTexture3D","_Texture$3","_super27","_this30","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","_i98","arraysEqual","_i99","_l34","copyArray","_i100","_l35","allocTexUnits","_i101","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueV1i","uniform1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV2ui","uniform2uiv","setValueV3ui","uniform3uiv","setValueV4ui","uniform4uiv","setValueT1","unit","safeSetTexture2D","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueT2DArray1","setTexture2DArray","setValueV1fArray","uniform1fv","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV1uiArray","uniform1uiv","setValueV2uiArray","setValueV3uiArray","setValueV4uiArray","setValueT1Array","units","_i102","setValueT6Array","_i103","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","_i104","_n4","RePathPart","addUniform","uniformObject","parseUniform","path","pathLength","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","_i105","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","_i106","_n5","seqWithValue","_i107","_n6","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","_i108","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","_i110","generatePrecision","precisionstring","WebGLProgram","prefixVertex","prefixFragment","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","generateExtensions","customDefines","chunks","generateDefines","createProgram","versionString","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexAlphas","vertexUvs","uvsVertexOnly","skinning","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","specularTintMapEncoding","lightMapEncoding","depthPacking","cachedUniforms","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","_i109","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","cubeuvmaps","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","getParameters","shadows","isMeshStandardMaterial","bones","nVertexUniforms","nVertexMatrices","getMaxBones","isFogExp2","directional","spot","rectArea","hemi","shadowMap","customProgramCacheKey","getProgramCacheKey","_i111","acquireProgram","_p6","pl","preexistingProgram","releaseProgram","_i112","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","transmissive","defaultProgram","getNextRenderItem","renderItem","finish","_i113","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","renderCallDepth","list","UniformsCache","light","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","_i114","vector3","matrix42","_i115","_i116","_l36","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","_uniforms","penumbra","_shadow","_shadowUniforms","isRectAreaLight","_uniforms2","isPointLight","_uniforms3","_shadow2","_shadowUniforms2","isHemisphereLight","_uniforms4","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","_i117","_l37","_uniforms5","_uniforms6","identity","_uniforms7","_uniforms8","WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","_Material$3","_super28","_this31","isMeshDepthMaterial","_Material$4","_super29","_this32","isMeshDistanceMaterial","WebGLShadowMap","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","mapPass","renderBufferDirect","getDepthMaterial","customMaterial","customDistanceMaterial","customDepthMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","intersectsObject","kl","depthMaterial","_depthMaterial2","_i119","_l38","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","_i118","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","_pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","_equationToGL","_factorToGL","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","enable","disable","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","enabledCapabilities","xrFramebuffer","currentBoundFramebuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","scissorParam","viewportParam","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","_i120","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","factor","activeTexture","webglSlot","bindFramebuffer","framebuffer","bindXRFramebuffer","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","_wrappingToGL","_filterToGL","_videoTextures","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","isPowerOfTwo$1","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTargetProperties","_i121","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","_i122","attachmentProperties","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","_i126","convert","glInternalFormat","setTextureParameters","_i127","mipmap","_i128","_j4","mipmapImage","_j5","_mipmap2","uploadCubeTexture","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","textureNeedsPowerOfTwo","isDepthTexture","_i123","_i124","_il9","_i125","_il10","setupFrameBufferTexture","attachment","textureTarget","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","_samples","_glInternalFormat","_samples2","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","_i129","createRenderbuffer","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isMultipleRenderTargets","isRenderTarget3D","_i130","createFramebuffer","_i131","_i132","_textures","_i133","_il11","_attachmentProperties","glTextureType","updateRenderTargetMipmap","_i134","_target2","updateMultisampleRenderTarget","blitFramebuffer","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","_PerspectiveCamera","_super30","_this33","cameras","isArrayCamera","Group","_Object3D4","_super31","_this34","isGroup","_moveEvent","WebXRController","_targetRay","_grip","_hand","joints","inputState","pinching","hasLinearVelocity","linearVelocity","hasAngularVelocity","angularVelocity","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","getPose","targetRaySpace","transform","_step5","_iterator5","inputjoint","jointPose","getJointPose","jointName","_joint","joint","jointRadius","indexTip","thumbTip","distanceToPinch","handedness","gripSpace","WebXRManager","_EventDispatcher6","_super32","_this35","framebufferScaleFactor","referenceSpaceType","pose","glBinding","glFramebuffer","glProjLayer","glBaseLayer","controllers","inputSourcesMap","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","onSessionEnd","disconnect","isPresenting","onInputSourcesChange","inputSources","_i135","_i136","removed","_i137","added","_inputSource","_controller","cameraAutoUpdate","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","_ref","_callee2","layerInit","depthFormat","_layerInit","projectionlayerInit","_context3","getContextAttributes","xrCompatible","makeXRCompatible","antialias","XRWebGLLayer","updateRenderState","baseLayer","colorFormat","scaleFactor","XRWebGLBinding","createProjectionLayer","requestReferenceSpace","sent","_x8","cameraLPos","cameraRPos","updateCamera","depthNear","depthFar","_i138","_i139","_l39","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","translateX","translateZ","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","getCamera","getFoveation","fixedFoveation","setFoveation","foveation","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","_i140","_view","glSubImage","getViewSubImage","depthStencilTexture","colorTexture","_camera","_i141","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshUniformsStandard","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","createCanvasElement","display","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","renderListStack","renderStateStack","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_currentDrawBuffers","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","_i142","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","message","initGLContext","preventDefault","infoAutoReset","shadowMapAutoUpdate","shadowMapNeedsUpdate","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReferences","renderObjectImmediate","renderBufferImmediate","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","setSize","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","onXRSessionStart","onXRSessionEnd","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","_i143","getProgram","projectObject","isLOD","intersectsSprite","isImmediateRenderObject","_geometry2","_material","_i144","_l40","_i145","_l41","renderTransmissiveObjects","opaqueObjects","transmissiveObjects","needsAntialias","currentToneMapping","renderObjects","_i146","_l42","camera2","_j6","_jl3","_renderItem","onAfterRender","lightsStateVersion","programCacheKey","updateCommonMaterialProperties","onBuild","needsLights","materialNeedsLights","progUniforms","uniformsList","needsProgramChange","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","computeBoneTexture","boneTextureSize","markUniformsLightsNeedsUpdate","setFromProjectionMatrix","transparentObjects","framebufferBound","_textures2","_i147","drawBuffersWEBGL","_textureProperties","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","textureFormat","halfFloatSupportedByExt","checkFramebufferStatus","readPixels","_framebuffer","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","texSubImage3D","compressedTexSubImage3D","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","_WebGLRenderer","WebGL1Renderer","_super33","Scene","_Object3D5","_super34","_this36","InterleavedBuffer","_i148","_l43","arrayBuffers","_uuid","ib","setUsage","isInterleavedBuffer","_vector$6","InterleavedBufferAttribute","interleavedBuffer","_i149","_l44","_i150","_l45","_i151","_l46","_i152","interleavedBuffers","_i153","_geometry","_Material$5","_super35","_this37","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA","_vB","_vC","_uvA","_uvB","_uvC","transformVertex","vertexPosition","mvPosition","_Object3D6","Sprite","_super36","_this38","float32Array","setFromMatrixScale","intersect","_basePosition","_skinIndex","_skinWeight","_vector$5","_matrix","SkinnedMesh","_Mesh","_super37","_this39","bindMatrixInverse","calculateInverses","skinWeight","_i154","_l47","manhattanLength","setXYZW","skinIndex","_i155","getComponent","boneIndex","boneInverses","Bone","_Object3D7","_super38","_this40","isBone","DataTexture","_Texture$4","_super39","_this41","_offsetMatrix","_identityMatrix","Skeleton","boneMatrices","_i156","_i157","inverse","_i158","bone","_i159","_il12","_bone","_i160","_i161","json","_i162","_l48","_i163","_l49","boneInverse","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh$1","_Mesh2","InstancedMesh","_super40","_this42","raycastTimes","instanceId","getMatrixAt","raycast","_i164","_l50","_Material$6","_super41","_this43","linecap","linejoin","_start$1","_end$1","_inverseMatrix$1","_ray$1","_sphere$1","Line","_Object3D8","_super42","_this44","lineDistances","_i165","_l51","threshold","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","_i166","_l52","_a10","distanceSqToSegment","_i167","_l53","_distance","_start","_end","LineSegments","_Line","_super43","_this45","_i168","_l54","LineLoop","_Line2","_super44","_this46","_Material$7","_super45","_this47","_inverseMatrix","_ray","_sphere","_position$2","Points","_Object3D9","_super46","_this48","_i169","_a11","testPoint","_i170","_l55","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","_Texture$5","VideoTexture","_super47","video","_this49","requestVideoFrameCallback","updateVideo","readyState","HAVE_CURRENT_DATA","CompressedTexture","_Texture$6","_super48","_this50","_Texture$7","CanvasTexture","_super49","_this51","isCanvasTexture","_Texture$8","DepthTexture","_super50","_this52","Curve","arcLengthDivisions","optionalTarget","getUtoTmapping","getPoint","divisions","getPointAt","lengths","getLengths","cacheArcLengths","current","last","_p7","targetArcLength","arcLengths","comparison","lengthBefore","t2","pt1","pt2","getTangent","segments","closed","binormals","vec","mat","_i171","getTangentAt","MAX_VALUE","tz","_i172","makeRotationAxis","_theta","_i173","EllipseCurve","_Curve","_super51","_this53","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","twoPi","deltaAngle","samePoints","isEllipseCurve","ArcCurve","_EllipseCurve","_super52","aRadius","_this54","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","isArcCurve","px","py","pz","CatmullRomCurve3","_Curve2","_super53","_this55","curveType","intPoint","_i174","_l56","_i175","_l57","_i176","_l58","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","isCatmullRomCurve3","CubicBezierCurve","_Curve3","_super54","_this56","v3","isCubicBezierCurve","CubicBezierCurve3","_Curve4","_super55","_this57","isCubicBezierCurve3","LineCurve","_Curve5","_super56","_this58","isLineCurve","LineCurve3","_Curve6","_super57","_this59","isLineCurve3","QuadraticBezierCurve","_Curve7","_super58","_this60","isQuadraticBezierCurve","QuadraticBezierCurve3","_Curve8","_super59","_this61","isQuadraticBezierCurve3","SplineCurve","_Curve9","_super60","_this62","_i177","_l59","_i178","_l60","_i179","_l61","isSplineCurve","Curves","Earcut","holeIndices","invSize","dim","hasHoles","outerLen","outerNode","linkedList","eliminateHoles","_i180","earcutLinked","clockwise","_i181","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","_a12","locallyInside","isValidDiagonal","_c10","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","hx","hy","_x9","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","intersectsPolygon","inside","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","Node$1","an","bp","ShapeUtils","contour","_p8","pts","holes","faces","removeDupEndPts","addContour","holeIndex","_i182","_i183","_i184","ExtrudeGeometry","_BufferGeometry3","_super61","_this63","verticesArray","_i185","_l62","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","extrudeByPath","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","isClockWise","reverse","hl","ahole","triangulateShape","_h2","_hl","_ahole","scalePt2","pt","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","_i186","oneHoleMovements","holesMovements","verticesMovements","_h3","_hl2","_ahole2","_i187","_il13","_j7","_k2","_bs","_i188","_il14","vert","_h4","_hl3","_ahole3","_i189","_il15","_vert","bs","_i190","_vert2","_s11","_i191","_vert3","_b6","_t","_z2","_bs2","_i192","_il16","_vert4","_h5","_hl4","_ahole4","_i193","_il17","_vert5","sidewalls","layeroffset","_j8","_k3","_s12","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","_i194","_i195","_face","_i196","_face2","_i197","_face3","buildLidFaces","_h6","_hl5","_ahole5","buildSideFaces","computeVertexNormals","_i198","_l63","toJSON$1","geometryShapes","fromJSON","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","ShapeGeometry","_BufferGeometry4","_super62","_this64","_i199","indexOffset","shapeVertices","shapeHoles","_i200","_l64","shapeHole","_i201","_l65","_shapeHole","_i202","_l66","vertex","_i203","_l67","_a14","_c12","_i204","_l68","_toJSON","_Material$8","_super63","_this65","_Material$9","_super64","_this66","_MeshStandardMaterial","_super65","_this67","ior","_Material$10","_super66","_this68","_Material$11","_super67","_this69","_Material$12","_super68","_this70","_Material$13","_super69","_this71","_Material$14","_super70","_this72","_LineBasicMaterial","_super71","_this73","AnimationUtils","arraySlice","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","_i205","sortedArray","nValues","_i206","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","_i207","track","valueSize","getValueSize","minStartTime","_i208","_i209","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","_loop","_i210","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","endIndex","_startIndex","_endIndex","interpolant","_startIndex2","_endIndex2","evaluate","resultBuffer","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","settings","DefaultSettings_","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","_giveUpAt","beforeStart_","mid","intervalChanged_","interpolate_","_i211","copySampleValue_","CubicInterpolant","_Interpolant","_super72","_this74","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","getSettings_","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","_i212","LinearInterpolant","_Interpolant2","_super73","offset1","offset0","weight1","weight0","_i213","DiscreteInterpolant","_Interpolant3","_super74","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","factoryMethod","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","timeOffset","_i214","_n7","timeScale","_i215","_n8","startTime","endTime","nKeys","valid","prevTime","_i216","currTime","_i217","_n9","smoothInterpolation","getInterpolation","writeIndex","_i218","keep","offsetP","offsetN","readOffset","writeOffset","_j9","_readOffset","_writeOffset","_j10","TypedKeyframeTrack","trackType","BooleanKeyframeTrack","_KeyframeTrack","_super75","ColorKeyframeTrack","_KeyframeTrack2","_super76","NumberKeyframeTrack","_KeyframeTrack3","_super77","QuaternionLinearInterpolant","_Interpolant4","_super78","slerpFlat","QuaternionKeyframeTrack","_KeyframeTrack4","_super79","StringKeyframeTrack","_KeyframeTrack5","_super80","VectorKeyframeTrack","_KeyframeTrack6","_super81","AnimationClip","duration","_i219","_n10","_i220","_i221","validate","_i222","optimize","_i223","jsonTracks","frameTime","_i224","_n11","parseKeyframeTrack","clipTracks","_i225","_n12","morphTargetSequence","noLoop","numMorphTargets","_i226","objectOrClipArray","clipArray","_o2","_i227","animationToMorphTargets","pattern","_i228","morphTarget","_parts","animationMorphTargets","clips","_name4","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","_m2","animationKey","boneName","typeName","getTrackTypeForValueTypeName","Cache","files","file","DefaultLoadingManager","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","_i229","_l69","_loader","global","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","resolve","reject","load","loading","FileLoader","_Loader","_super82","setTimeout","request","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","_view2","_i230","charCodeAt","Blob","parser","DOMParser","parseFromString","header","XMLHttpRequest","open","callbacks","_i231","_i232","_il18","_callback","_i233","_i234","_i235","overrideMimeType","setRequestHeader","send","CompressedTextureLoader","_Loader2","_super83","setPath","setResponseType","setWithCredentials","loaded","loadTexture","texDatas","mipmapCount","_i236","isCubemap","_f4","_i237","ImageLoader","_Loader3","_super84","onImageLoad","onImageError","CubeTextureLoader","_Loader4","_super85","urls","setCrossOrigin","_i238","DataTextureLoader","_Loader5","_super86","texData","TextureLoader","_Loader6","_super87","isJPEG","search","Path","_CurvePath","_super89","_this76","currentPoint","moveTo","_i245","_l74","lineTo","curve","curves","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","npts","absarc","absellipse","firstPoint","lastPoint","_Curve10","CurvePath","_super88","_this75","autoClose","startPoint","endPoint","getLength","curveLengths","getCurveLengths","diff","segmentLength","lens","cacheLengths","sums","_i239","_l70","_i240","_i241","getPoints","_i242","_l71","_i243","_l72","_i244","_l73","Shape","_Path","_super90","_this77","holesPts","_i246","_l75","getPointsHoles","_i247","_l76","_i248","_l77","_i249","_l78","Light","_Object3D10","_super91","_this78","_Light","HemisphereLight","_super92","_this79","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","SpotLightShadow","_LightShadow","_super93","_this80","isSpotLightShadow","SpotLight","_Light2","_super94","_this81","power","_lightPositionWorld","_lookTarget","PointLightShadow","_LightShadow2","_super95","_this82","_cubeDirections","_cubeUps","PointLight","_Light3","_super96","_this83","DirectionalLightShadow","_LightShadow3","_super97","isDirectionalLightShadow","DirectionalLight","_Light4","_super98","_this84","_Light5","AmbientLight","_super99","_this85","_Light6","RectAreaLight","_super100","_this86","SphericalHarmonics3","_i250","_i251","_i252","coeff","_i253","_i254","_i255","_i256","_i257","_i258","_i259","shBasis","isSphericalHarmonics3","LightProbe","_Light7","_super101","_this87","LoaderUtils","TextDecoder","decode","_i260","fromCharCode","escape","_BufferGeometry5","InstancedBufferGeometry","_super102","_this88","_BufferAttribute5","InstancedBufferAttribute","_super103","_this89","ImageBitmapLoader","_Loader7","_super104","_this90","createImageBitmap","fetch","fetchOptions","credentials","headers","then","blob","colorSpaceConversion","imageBitmap","catch","isImageBitmapLoader","AudioContext","webkitAudioContext","AudioLoader","_Loader8","_super105","bufferCopy","decodeAudioData","audioBuffer","_LightProbe","HemisphereLightProbe","_super106","_this91","sky","ground","isHemisphereLightProbe","_LightProbe2","AmbientLightProbe","_super107","_this92","isAmbientLightProbe","Audio","_Object3D11","_super108","_this93","gain","createGain","connect","getInput","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","delay","currentTime","createBufferSource","onended","onEnded","bind","setDetune","setPlaybackRate","_i261","_l79","getOutput","_i262","_l80","setTargetAtTime","getFilters","setFilters","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","_i263","mix","weightAdditive","originalValueOffset","_i264","_e2","getValue","_i265","_e3","_i266","targetIndex","_i267","_i268","workOffset","_i269","_i270","_RESERVED_CHARS_RE","_reservedRe","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","_i271","_n13","_i272","_n14","_i273","_n15","unbind","rootNode","findNode","_getValue_unbound","_setValue_unbound","resolvedProperty","_i274","_n16","propertyIndex","targetObject","dest","_i275","_n17","_i276","_n18","_i277","_n19","targetArray","sourceArray","objectName","_getValue_unavailable","_setValue_unavailable","objectIndex","_i278","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","root","isAnimationObjectGroup","matches","results","lastDot","substring","getBoneByName","subTreeNode","searchNodeSubtree","_i279","childNode","_getValue_direct","_getValue_array","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_i280","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","action","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","accumulateAdditive","_j11","_m3","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_EventDispatcher7","_super109","_this94","_initMemoryManager","_accuIndex","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_i281","_addInactiveBinding","create","clipUuid","actionsForClip","_actionsByClip","_bindAction","knownActions","_addInactiveAction","_i282","_n20","_lendBinding","saveOriginalState","_lendAction","_i283","_n21","restoreOriginalState","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","stats","actions","controlInterpolants","actionsByClip","actionByRoot","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_i284","_n22","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","optionalRoot","clipObject","findByName","existingAction","newAction","_i285","nActions","_i286","_update","nBindings","_i287","timeInSeconds","_i288","actionsToRemove","_i289","_n23","_removeInactiveAction","_InterleavedBuffer","InstancedInterleavedBuffer","_super110","_this95","Raycaster","LOD","coords","unproject","_intersectObject","ascSort","_i290","_l81","_i291","_l82","Spherical","other","EPS","setFromCartesianCoords","_Object3D12","ImmediateRenderObject","_super111","_this96","_vector$2","_boneMatrix","_matrixWorldInv","SkeletonHelper","_LineSegments","_super112","_this97","getBoneList","_i292","isSkeletonHelper","_i293","boneList","_i294","GridHelper","_LineSegments2","_super113","_this98","_i295","_floatView","_int32View","DataUtils","val","fromPoints","setColors","extractUrlBase","Handlers","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","getInverse","extractPosition","getPosition","setRotationFromQuaternion","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateX","rotateY","rotateZ","rotateByAxis","makeFrustum","isIntersectionLine","intersectsLine","isIntersectionPlane","getArea","barycoordFromPoint","midpoint","getMidpoint","prototypenormal","getPlane","extractAllPoints","extrude","makeGeometry","distanceToManhattan","manhattanDistanceTo","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","getChildByName","getObjectByName","renderDepth","getWorldRotation","applyMatrix","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","setFocalLength","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","clearGroups","computeOffsets","drawcalls","offsets","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","shading","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","initMaterial","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","setBuffer","updateCubeMap","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","revision","__THREE__","_taskCache$1","DRACOLoader","_Loader9","_super114","_this99","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","config","_this100","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","_this101","worker","taskKey","cachedTask","promise","byteLength","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","_createGeometry","_releaseTask","geometryData","_i296","_initDecoder","_this102","useJS","WebAssembly","librariesPending","_loadLibrary","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","body","URL","createObjectURL","_this103","_worker2","Worker","_taskCosts","_taskLoad","onmessage","_i297","terminate","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","module","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numIndices","num_faces","GetTrianglesUInt32Array","decodeIndex","GLTFLoader","_Loader10","_super115","_this104","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension$1","GLTFMaterialsVolumeExtension$1","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFLightsExtension","GLTFMeshoptCompression","_onError","gltf","plugins","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","_i298","plugin","extensionsUsed","_i299","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension$1","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","GLTFRegistry","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","refs","uses","nodeDefs","nodes","nodeLength","nodeDef","_addNodeRef","lightIndex","dependency","lightNode","lightDef","innerConeAngle","outerConeAngle","createUniqueName","_loadLight","_getNodeRef","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","transmissionFactor","transmissionTexture","thicknessFactor","thicknessTexture","attenuationColor","specularFactor","specularTexture","specularColorFactor","specularColorTexture","textureIndex","textureDef","loadTextureImage","isSupported","textureLoader","uri","handler","detectSupport","Image","onload","onerror","bufferView","bufferViews","extensionDef","getDependency","supported","ready","byteOffset","byteStride","decodeGltfBuffer","BINARY_EXTENSION_CHUNK_TYPES","headerView","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","_attributeName","_threeAttributeName","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","decodeDracoFile","_attributeName2","texCoord","GLTFMeshStandardSGMaterial","_MeshStandardMaterial2","_super116","_this105","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","glossiness","glossinessMap","_extraUniforms","uniformName","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularGlossinessTexture","specGlossMapDef","GLTFCubicSplineInterpolant","_Interpolant5","_super117","_i300","stride2","stride3","td","_i301","m0","m1","WEBGL_CONSTANTS$1","WEBGL_FILTERS","WEBGL_WRAPPINGS","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES$1","translation","INTERPOLATION","CUBICSPLINE","LINEAR","STEP","ALPHA_MODES","createDefaultMaterial","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","meshDef","_i304","targetNames","_i305","_il20","createAttributesKey","attributesKey","_i306","getNormalizedComponentScale$1","associations","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scenes","afterRoot","skinDefs","skins","meshDefs","meshes","skinLength","_i307","skin","func","_i308","_i309","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","itemBytes","ibSlice","ibCacheKey","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","_i310","setX","setY","setZ","setW","sampler","webkitURL","sourceURI","isObjectURL","hasAlpha","colorType","getUint8","revokeObjectURL","samplers","mapName","mapDef","gltfReference","extendTexture","useVertexTangents","useVertexColors","useFlatShading","pointsMaterial","_cacheKey","lineMaterial","_cacheKey2","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","sanitizeNodeName","_i311","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","primitiveDef","dracoExtension","_i312","geometryPromise","meshIndex","_i313","loadGeometries","_i314","_il21","_material3","normalizeSkinWeights","toTrianglesDrawMode","assignFinalMaterial","_i315","_il22","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","_i316","channels","_target5","input","inputAccessors","outputAccessors","targets","_loop2","_i317","_il23","inputAccessor","outputAccessor","targetName","outputArray","scaled","_j12","_jl4","_i318","meshPromise","createNodeMesh","createNodeAttachment","_i319","sceneIndex","sceneDef","nodeIds","_i320","buildNodeHierachy","nodeId","parentObject","pendingJoints","_i321","jointNodes","jointNode","_i322","assignAttributeAccessor","gltfAttributeName","boxScale","maxDisplacement","_i323","_target6","_accessor","_min","_max","_boxScale","expandByVector","computeBounds","hasMorphPosition","hasMorphNormal","_i302","_target3","pendingPositionAccessors","pendingNormalAccessors","_i303","_il19","_target4","pendingAccessor","_pendingAccessor","morphPositions","addMorphTargets","getIndex","_i324","numberOfTriangles","newIndices","_i325","_i326","newGeometry","i$1","NONE","BASISLZ","ZSTD","ZLIB","BASICFORMAT","UNSPECIFIED","ETC1S","UASTC","SRGB","ITU","NTSC","SLOG","SLOG2","ALPHA_STRAIGHT","ALPHA_PREMULTIPLIED","RGB","RRR","GGG","AAA","RGBA","RRRG","U","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","levels","dataFormatDescriptor","vendorId","descriptorType","versionNumber","descriptorBlockSize","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","keyValue","globalData","_dataView","_littleEndian","getUint16","_","Buffer","_init","instance","heap","_taskCache","BasisTextureLoader","_Loader11","_super118","_this106","transcoderPath","transcoderBinary","transcoderPending","workerConfig","astcSupported","etc1Supported","etc2Supported","dxtSupported","bptcSupported","pvrtcSupported","_this107","_createTexture","_texture","_i327","lowLevel","_this108","_i328","texturePending","_allocateWorker","_this109","jsLoader","binaryLoader","binaryContent","_ref2","_ref3","BasisWorker","EngineFormat","TranscoderFormat","BasisFormat","_this110","_initTranscoder","_worker3","_i329","UASTC_4x4","ETC1","ETC2","BC1","BC3","BC4","BC5","BC7_M6_OPAQUE_ONLY","BC7_M5","PVRTC1_4_RGB","PVRTC1_4_RGBA","ASTC_4x4","ATC_RGB","ATC_RGBA_INTERPOLATED_ALPHA","RGBA32","RGB565","BGR565","RGBA4444","RGBA_ASTC_4x4_Format","RGBA_BPTC_Format","RGB_ETC1_Format","BasisModule","_EngineFormat","_TranscoderFormat","_BasisFormat","onRuntimeInitialized","BASIS","initializeBasis","_ref4","basisFormat","_getTranscoderFormat","getTranscoderFormat","transcoderFormat","engineFormat","blockByteLength","getBytesPerBlockOrPixel","assert","isFormatSupported","transcoder","LowLevelETC1SImageTranscoder","_taskConfig$globalDat","endpointCount","endpointsData","selectorCount","selectorsData","tablesData","decodePalettes","decodeTables","_i331","imageDesc","imageDescs","dstByteLength","getTranscodedImageByteLength","transcodeImage","getWidthInBlocks","getHeightInBlocks","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","imageFlags","_i332","_level","_dstByteLength","_dst","transcodeUASTCImage","transcodeLowLevel","basisFile","BasisFile","isUASTC","getImageWidth","getImageHeight","getNumLevels","getHasAlpha","cleanup","close","_getTranscoderFormat2","startTranscoding","mip","mipWidth","mipHeight","getImageTranscodedSizeInBytes","transcode","_i330","FORMAT_OPTIONS","if","priorityETC1S","priorityUASTC","ETC1S_OPTIONS","UASTC_OPTIONS","_i333","opt","includes","getFormatBlockWidth","getFormatBlockHeight","formatIsUncompressed","paddedWidth","paddedHeight","_createLevels","_a$a","_b$8","_a$9","_b$7","dracoDecoderLocation","ktx2TranscoderLocation","importObject","env","emscripten_notify_memory_growth","exports","ZSTDDecoder","wasm","arrayBuffer","instantiate","uncompressedSize","compressedSize","compressedPtr","malloc","ZSTD_findDecompressedSize","uncompressedPtr","actualSize","ZSTD_decompress","dec","free","KTX2Loader","_CompressedTextureLoa","_super119","_this111","basisLoader","zstd","MSC_TRANSCODER","setTranscoderPath","setWorkerLimit","ktx","_nextUint32","_nextUint64","_e4","levelData","uncompressedByteLength","_skip","_nextUint16","_nextUint8","D","_t2","bitOffset","bitLength","channelID","samplePosition","sampleLower","sampleUpper","_t3","_e5","_scan","_n24","_s13","B","A","S","L","I","_t4","R","E","T","O","P","C","G","extendedData","dfd","KTX2Utils","getBasicDFD","createLevels","parseConfig","getAlpha","parseInternalAsync","getPremultiplyAlpha","_callee3","levelIndex","levelWidth","levelHeight","_context4","_x10","_x11","$retainerCount","$recentlyUsed","$evict","$evictionThreshold","$cache","CacheEvictionPolicy","_ref5","evictionThreshold","recentlyUsedIndex","_i334","mappingsArrayToTable","variantNames","_step7","table","_iterator7","mappings","_step8","_iterator8","variants","variant","gltfMaterialIndex","compatibleObject$1","variantMaterials","GLTFMaterialsVariantsExtension","_this112","_step9","_step6","uniqueNames","knownNames","_iterator6","uniqueName","ensureUniqueNames","_iterator9","association","primitivesDef","_i335","extensionsDef","functions","switchMaterial","_ref6","_callee4","variantName","oldMaterial","variantMaterialParam","_context5","originalMaterial","_x12","_x13","_x14","ensureLoadVariants","_step10","currentMaterial","_iterator10","_loop3","variantMaterial","selectVariant","doTraverse","loadWithLoader","progressCallback","fraction","total","preloaded","$loader","$evictionPolicy","$GLTFInstance","CachingGLTFLoader","_EventDispatcher8","_ref7","_delete2","_load","_preload","_super120","GLTFInstance","_this113","setDRACOLoader","setKTX2Loader","_callee5","rawGLTFLoads","_GLTFInstance","gltfInstanceLoads","_args5","_context6","progress","rawGLTF","prepare","preparedGLTF","_x15","_x16","_callee6","_this114","_args6","_context7","retain","originalDispose","disposed","release","_x17","_x18","setDecoderPath","_this115","_value","_callee7","gltfLoads","_context8","_x19","CSS2DObject","_Object3D13","_super121","_this116","userSelect","Element","isCSS2DObject","HAS_META_VIEWPORT_TAG","debugQueryParameter","IS_IDENT_RE","IS_OPERATOR_RE","IS_EXPRESSION_END_RE","NOT_IDENT_RE","VALUE_RE","UNIT_RE","ALLOWED_UNITS","HEX_RE","unitNormalizers","shaderMaterial","_vector","_viewMatrix","_viewProjectionMatrix","_a$8","_b$6","CSS2DRenderer","_widthHalf","_heightHalf","objectData","distanceToCameraSquared","getDistanceToSquared","_i336","_l83","object1","object2","overflow","sorted","filterAndFlatten","zMax","_i337","_l84","zIndex","deserializeUrl","toFullUrl","assertIsArCandidate","missingApis","partialUrl","location","throttle","ms","timer","throttled","flush","clearTimeout","debounce","_len","args","_key3","lowerLimit","upperLimit","resolveDpr","_step11","_iterator11","head","devicePixelRatio","isDebugMode","ModelViewerElement","debugMode","timePasses","waitForEvent","eventName","predicate","Damper","decayMilliseconds","velocity","naturalFrequency","setDecayTime","xGoal","timeStepMilliseconds","xNormalization","nilSpeed","deltaX","intermediateVelocity","intermediateX","newVelocity","acceleration","numberNode","number","parseExpressions","inputString","expressions","parseIterations","expressionParseResult","parseExpression","expression","terms","remainingInput","_parseFunctionArgumen","parseFunctionArguments","identParseResult","parseIdent","identNode","_parseFunctionArgumen2","_nodes","_remainingInput","_ref8","parseHex","parseNumber","_nodes2","_remainingInput2","valueMatch","unitMatch","hexMatch","expressionNodes","$visitedTypes","ASTWalker","visitedTypes","ast","remaining","ZERO","degreesToRadians","fallbackRadianValue","valueIsDegrees","lengthToBaseMeters","fallbackMeterValue","normalizeUnit","fallback","Hotspot","_CSS2DObject","_super122","_this117","initialized","pivot","classList","updatePosition","updateNormal","contains","facingCamera","updateVisibility","positionNodes","_i338","setComponent","normalNodes","_i339","show","assignedNodes","ELEMENT_NODE","visibilityAttribute","dataset","reduceVertices","model","initialValue","getNormalizedComponentScale","Shadow","_DirectionalLight","_super123","softness","_this118","shadowMaterial","shadowScale","isAnimated","setScene","animationNames","_this$boundingBox","_ref9","_ref10","_ref11","maxDimension","subScalar","shadowOffset","setSoftness","setMapSize","maxMapSize","_this$shadow","widthPad","heightPad","setScaleAndOffset","radiansY","sizeY","setScalar","DEFAULT_HALF_FOV","DEFAULT_FOV_DEG","SAFE_RADIUS_RATIO","DEFAULT_TAN_FOV","normalWorld","vector3$1","ModelScene","_Scene","_setupScene","_setSource","_setObject","_super124","_ref12","_this119","annotationRenderer","isDirty","renderCount","externalRenderer","xrCamera","modelContainer","idealCameraDistance","fieldOfViewAspect","framedFieldOfView","shadowIntensity","shadowSoftness","exposure","canScale","tightBounds","goalTarget","targetDamperX","targetDamperY","targetDamperZ","_currentGLTF","cancelPendingSourceChange","animationsByName","currentAnimationAction","pointerEvents","shadowRoot","_callee8","_context9","setupScene","_x20","_callee10","framingInfo","_iterator12","_step12","_animation","_this120","_args10","_context11","framedRadius","frameModel","_ref13","_callee9","_context10","$renderer","_x22","_x23","_x21","_callee11","_context12","updateBoundingBox","requestUpdate","getTarget","updateFraming","setShadowIntensity","setIntensity","_step13","_iterator13","stopAllAction","uncacheRoot","dpr","resize","setFromObject","_this121","radiusSquared","horizontalFov","radiusXZ","vertical","modelX","modelY","modelZ","updateTarget","goal","_x24","setShadowRotation","yaw","worldX","worldZ","_this$position","setTime","getClip","crossfadeTime","animationClip","lastAnimationAction","clipAction","arPlacement","setRotation","pixelPosition","setFromCamera","hits","intersectObject","hit","hotspot","_i340","_l85","viewerPosition","_this122","forHotspots","hide","orient","_mipmapMaterial","_mesh","_flatCamera","_tempTarget","RoughnessMipmapper","roughnessUpdated","oldTarget","newRoughnessTarget","__decorate$7","decorators","desc","$currentEnvironmentMap","$applyEnvironmentMap","$updateEnvironment","$cancelEnvironmentUpdate","$onPreload","SessionLightProbe","xrLight","environmentEstimation","estimationStartCallback","_this125","xrWebGLBinding","frameCallback","onXRFrame","cubeRenderTarget","preferredReflectionFormat","updateReflection","cubeMap","getReflectionCubeMap","xrFrame","lightEstimate","getLightEstimate","sphericalHarmonicsCoefficients","intensityScalar","primaryLightIntensity","directionalLight","primaryLightDirection","XREstimatedLight","_Group","_super126","_this126","sessionLightProbe","estimationStarted","requestLightProbe","reflectionFormat","RADIUS","DELTA_PHI","addCorner","cornerX","cornerY","_i341","PlacementBox","_Mesh3","_super127","_this127","numVertices","_i342","goalOpacity","opacityDamper","hitPlane","shadowHeight","screenX","screenY","hitResult","positionAndNormalFromPoint","getHit","_a","_this$hitPlane","ARStatus","ARTracking","hitPosition","ARRenderer","_EventDispatcher9","_stopPresenting","_present","_supportsPresentation","_resolveARSession","_super128","_this128","currentSession","placeOnWall","placementBox","lastTick","turntableRotation","oldShadowIntensity","oldBackground","oldEnvironment","initialHitSource","transientHitTestSource","_presentedScene","resolveCleanup","exitWebXRButtonContainer","overlay","tracking","frames","oldFramedFieldOfView","placementComplete","isTranslating","isRotating","isTwoFingering","lastDragPosition","firstRatio","lastAngle","goalPosition","goalYaw","goalScale","xDamper","yDamper","zDamper","yawDamper","scaleDamper","onExitWebXRButtonContainerClick","stopPresenting","onUpdateScene","presentedScene","onSelectStart","hitSource","fingers","getHitTestResultsForTransientInput","gamepad","_hitPosition","separation","fingerPolar","onSelectEnd","offsetHeight","threeRenderer","_callee14","_context15","requestSession","requiredFeatures","optionalFeatures","domOverlay","_callee15","_context16","_callee16","waitForAnimationFrame","exitButton","viewerRefSpace","_this129","_args16","_context17","_reject","setHotspotsVisibility","resolveARSession","postSessionCleanup","once","XRRay","DOMPoint","space","offsetRay","hitTestSource","performance","_x27","_callee17","cleanupPromise","_this130","_context18","_target7","setTarget","setShadowScaleAndOffset","orientHotspots","$onResize","getBoundingClientRect","cancel","hitSourceInitial","placeInitially","requestViewportScale","recommendedViewportScale","_this131","_this$overlay$getBoun","_element$getCameraOrb","getCameraOrbit","cameraDirection","getWorldDirection","requestHitTestSourceForTransientInput","profile","getExpandedHit","refSpace","hitMatrix","hitTestResults","getHitTestResults","hitPoint","getHitPoint","fingerOne","fingerTwo","deltaY","deltaYaw","_this132","_this$fingerPolar","_scale","finger","getTouchLocation","_separation","oldScale","_x28","newScale","updateOpacity","$sceneIsReady","_step14","isFirstView","_iterator14","_view3","updateView","moveToFloor","processInput","moveScene","preRender","DEPTH_BUFFER_BIT","Debugger","THREE","Texture","PlaneBufferGeometry","SkeletonUtils","pos","quat","bindBoneMatrix","relativeMatrix","globalMatrix","preserveMatrix","preservePosition","preserveHipPosition","useTargetMatrix","hip","names","bindBones","boneTo","bonesPosition","sourceBones","getBones","_i343","_i344","_i345","_i346","wBindMatrix","setPosition","_i347","useFirstFramePosition","getHelperFromSkeleton","positionOffset","boneData","numFrames","convertedTracks","boneDatas","_i348","retarget","_i349","uncacheAction","targetParentPos","targetPos","sourceParentPos","sourcePos","targetDir","sourceDir","nameKeys","nameValues","boneParent","getNearestBone","boneToParent","laterialAngle","makeRotationFromEuler","_i350","_i351","regexp","_i352","trackData","targetSkeleton","targetBones","_i353","sourceLookup","cloneLookup","parallelTraverse","sourceNode","clonedNode","clonedMesh","sourceMesh","_i354","$prepared","$prepare","$preparedGLTF","$clone","GLTFInstanceConstructor","propertyValue","cloneVariantMaterials","prepared","traversePair","obj1","obj2","_i355","alphaChunk","$threeGLTF","$gltf","$gltfElementMap","$threeObjectMap","$parallelTraverseThreeScene","$correlateOriginalThreeGLTF","$correlateCloneThreeGLTF","CorrelatedSceneGraph","threeGLTF","threeObjectMap","gltfElementMap","_loadVariant","_callee18","updatedMaterials","_this133","_context19","_oldMaterial","gltfElement","threeObjects","_x29","upstreamCorrelatedSceneGraph","defaultMaterial","defaultReference","gltfElementReference","threeObject","_gltfElementReference","cloneThreeGLTF","originalThreeGLTF","originalGLTF","cloneGLTF","cloneThreeObjectMap","cloneGLTFELementMap","_i356","cloneObject","elementReference","_elementReference","cloneElement","cloneObjects","sceneOne","sceneTwo","_i357","_i358","$cloneAndPatchMaterial","$correlatedSceneGraph","ModelViewerGLTFInstance","_GLTFInstance2","_super129","_this134","sourceUUIDToClonedMaterial","correlatedSceneGraph","_Renderer$singleton","Renderer","singleton","roughnessMipmapper","oldOnBeforeCompile","RGBELoader","_DataTextureLoader","_super130","_this135","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","chunk","RGBEByteToRGBFloat","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","toHalfFloat","byteArray","rgbe_header_info","gamma_re","exposure_re","format_re","dimensions_re","comments","programtype","gamma","RGBE_ReadHeader","image_rgba_data","scanline_width","data_rgba","ptr_end","rgbeStart","scanline_buffer","num_scanlines","isEncodedRun","byteValue","_i359","_l86","_i360","off","RGBE_ReadPixels_RLE","numElements","floatArray","halfArray","_j13","EnvironmentScene","_Scene2","_super131","_this136","roomMaterial","boxMaterial","mainLight","room","box1","box2","box3","box4","box5","box6","light1","createAreaLightMaterial","light2","light3","light4","light5","light6","EnvironmentSceneAlt","_Scene3","_super132","_this137","light7","HDR_FILE_RE","ldrLoader","hdrLoader","setDataType","TextureUtils","_EventDispatcher10","_dispose","_generateEnvironmentMapAndSkybox","_load2","_super133","_this138","generatedEnvironmentMap","generatedEnvironmentMapAlt","skyboxCache","environmentMapCache","_callee19","isHDR","_loader2","_args19","_context20","addMetadata","_x30","_callee20","skyboxUrl","environmentMap","progressTracker","updateGenerationProgress","useAltEnvironment","environmentMapUrl","skyboxLoads","environmentMapLoads","_yield$Promise$all","_yield$Promise$all2","_environmentMap","skybox","_args20","_context21","beginActivity","loadSkyboxFromUrl","loadEnvironmentMapFromUrl","loadGeneratedEnvironmentMapAlt","loadGeneratedEnvironmentMap","skyboxMapLoads","_this139","cubeUV","compileEquirectangularShader","defaultScene","fromScene","_callee21","allTargetsLoad","_i361","_allTargetsLoad","targetLoads","_context22","SCALE_STEPS","DEFAULT_POWER_PREFERENCE","_EventDispatcher11","_super134","_this140","debugger","multipleScenesVisible","scaleStep","lastStep","avgFrameDuration","onWebGLContextLost","sourceEvent","onWebGLContextRestored","textureUtils","_step15","_iterator15","canvas3D","arRenderer","canRender","initializeKTX2Loader","updateRendererSize","_step16","_iterator16","$updateSize","_step17","_iterator17","_scene","widthCSS","heightCSS","_step18","_iterator18","_scene2","_step19","_iterator19","_style2","_this141","addScene","removeScene","$canvas","_step20","visibleScenes","visibleCanvas","_iterator20","modelIsVisible","parentElement","_step21","_iterator21","_scene3","_i362","_arr","_step22","_iterator22","$tick","exposureIsNumber","isShadowDirty","selectCanvas","updateRendererScale","_step23","_iterator23","orderedScenes","_step24","_iterator24","visibleScene","createContext","context2D","clearRect","_camera2","_target9","onWebXRFrame","_step25","_iterator25","_singleton","_step26","_iterator26","disconnectedCallback","_step27","_iterator27","connectedCallback","_a$7","_b$5","_a$6","_b$4","_c$2","_d$1","_f","_g","_h","_j","_k","dataUrlToBlob","_ref16","_callee22","base64DataUrl","_context23","typeMatch","base64","byteCharacters","byteArrays","byteNumbers","_i363","_x31","$ongoingActivities","$announceTotalProgress","$eventDelegate","ProgressTracker","_ref17","_this142","_this142$$eventDelega","_this142$$eventDelega2","_this142$$eventDelega3","_this143","activity","ongoingActivityCount","nextProgress","_step28","totalProgress","statusCount","completedActivities","_iterator28","__decorate$6","blobCanvas","$template","$fallbackResizeHandler","$defaultAriaLabel","$resizeObserver","$clearModelTimeout","$onContextLost","$loaded","$intersectionObserver","$isElementInViewport","$announceModelVisibility","$ariaLabel","$loadedTime","$updateSource","$markLoaded","$container","$userInputElement","$scene","$needsRender","$onModelLoad","$progressTracker","$getLoaded","$getModelIsVisible","$shouldAttemptPreload","$hasTransitioned","toVector3D","ModelViewerElementBase","_UpdatingElement2","_ref18","_ref19","_value3","_toBlob","_super135","_this144","alt","boundingRect","oldVisibility","newVisibility","sourceError","isConnected","rect","_ref20","_callee23","_context24","_x32","entries","_step29","_iterator29","entry","contentRect","_step30","_iterator30","isIntersecting","rootMargin","observe","registerScene","_this145","unobserve","unregisterScene","ariaLabel","encoderOptions","displayCanvas","_callee25","qualityArgument","idealAspect","_this$$scene","_this$$renderer","outputWidth","outputHeight","oldHeight","oldWidth","_this146","_context26","_ref21","_callee24","_context25","msToBlob","toBlob","_x34","_x35","_x33","_ref22","_time","_delta","_callee26","updateSourceProgress","_context27","setSource","is","prepareTemplate","minScale","__decorate$5","$changeAnimation","$paused","$hotspotMap","$mutationCallback","$observer","$addHotspot","$removeHotspot","worldToModel","worldToModelNormal","durl","encodeURI","u8","u16","u32","fleb","fdeb","clim","freb","eb","_a$5","fl","revfl","revfd","rev","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","flm","fdm","shft","slc","wbits","wbits16","hTree","et","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","wfblk","out","dat","wblk","final","syms","lf","li","bl","dlt","mlb","_b","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","lct","mlcb","nlcc","lm","ll","dm","dl","ftlen","dtlen","llm","lcts","clct","deo","crct","crc","cr","dopt","pre","post","st","lvl","plvl","lst","msk_1","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","nl","mmd","md","ti","lin","din","dflt","mem","mrg","wbytes","deflateSync","opts","fltn","TextEncoder","stream","strToU8","latin1","ar_1","encode","ar","ai","exfl","ex","wzh","extra","exl","os","flag","compression","Date","mtime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","attrs","exf","zipSync","tot","com","comment","oe","cdl","badd","wzf","USDZExporter","_parse","_callee28","_loop4","filename","headerSize","offsetMod64","padding","_context30","modelFileName","geometryFileName","meshObject","buildMeshObject","buildUSDFileAsString","buildXform","buildMaterials","isRGBA","_context29","imageToCanvas","delegateYield","_x36","_r3","imagedata","getImageData","_i365","dataToInsert","buildMatrixRow","buildMeshVertexCount","_i366","buildMeshVertexIndices","buildVector3Array","_i368","toPrecision","buildVector2Array","buildMesh","_i367","buildMaterial","pad","inputs","buildTexture","mapType","getHexString","buildVector2","buildColor","allowedNames","_a$4","_b$2","_c$1","__decorate$4","isWebXRBlocked","isSceneViewerBlocked","noArViewerSigil","deserializeARModes","valueString","_step31","valueNode","_iterator31","_error","DEFAULT_AR_MODES","ARMode","$arButtonContainer","$enterARWithWebXR","$openSceneViewer","$openIOSARQuickLook","$canActivateAR","$arMode","$arModes","$arAnchor","$preload","$onARButtonContainerClick","$onARStatus","$onARTracking","$onARTap","$selectARMode","$triggerLoad","$evaluate","$lastValue","Evaluator","isConstant","basis","PercentageEvaluator","CalcEvaluator","EnvEvaluator","evaluatable","evaluated","intrinsics","keywords","auto","basisNode","autoSubstituteNode","evaluatedNode","keyword","_a$3","_b$1","$percentage","$basis","_Evaluator","_super139","percentage","_this151","$identNode","_Evaluator2","_ref28","_super140","envFunction","_this152","pageYOffset","scrollHeight","documentElement","clientHeight","innerHeight","IS_MULTIPLICATION_RE","$evaluator","_Evaluator3","_ref29","_super141","calcFunction","_this153","secondOrderTerms","term","previousTerm","operator","leftValue","OperatorEvaluator","evaluatableFor","_secondOrderTerms$spl","_secondOrderTerms$spl2","_operator","$operator","$left","$right","_Evaluator4","_super142","_this154","leftNode","rightNode","leftUnit","rightValue","rightUnit","$evaluatables","$intrinsics","StyleEvaluator","_Evaluator5","_super143","_this155","firstExpression","_step33","_iterator33","applyIntrinsics","$instances","$activateListener","$deactivateListener","$notifyInstances","$notify","$scrollCallback","ScrollObserver","_ref30","_step34","_iterator34","passive","$computeStyleCallback","$astWalker","$dependencies","$onScroll","StyleEffector","_this156","relatedState","_this157","newDependencies","oldDependencies","environmentState","walk","functionNode","firstTerm","observer","defaultTerms","_a$2","observeEffects","getIntrinsics","Function","_Object$definePropert","originalUpdated","originalConnectedCallback","originalDisconnectedCallback","$styleEffector","$styleEvaluator","$updateEvaluator","$evaluateAndSync","writable","_this158","observeEffectsFor","updateHandler","DEFAULT_OPTIONS","minimumRadius","maximumRadius","minimumPolarAngle","maximumPolarAngle","minimumAzimuthalAngle","maximumAzimuthalAngle","minimumFieldOfView","maximumFieldOfView","interactionPolicy","touchAction","TOUCH_EVENT_RE","KEYBOARD_ORBIT_INCREMENT","ZOOM_SENSITIVITY","KeyCode","ChangeSource","SmoothControls","_EventDispatcher12","_super144","_this159","sensitivity","_interactionEnabled","_disableZoom","isUserChange","isUserPointing","spherical","goalSpherical","thetaDamper","phiDamper","radiusDamper","logFov","goalLogFov","fovDamper","pointerIsDown","lastPointerPosition","clientX","clientY","touchMode","touchDecided","onPointerMove","canInteract","touches","lastTouches","lastTouchDistance","twoTouchDistance","touchDistance","deltaZoom","userAdjustOrbit","_options","_touches$","handleSinglePointerMove","cancelable","onPointerDown","handleSinglePointerDown","onPointerUp","_event","cursor","pointer","onWheel","deltaMode","onKeyDown","relevantKey","keyCode","setOrbit","setFieldOfView","jumpToGoal","nearPlane","farPlane","goalTheta","goalPhi","goalRadius","_this$_options","_this$goalSpherical","nextTheta","wrapAngle","nextPhi","nextRadius","makeSafe","_this$_options2","deltaTheta","deltaPhi","_this$goalSpherical2","_this$_options3","dTheta","dThetaLimit","deltaRatio","isStationary","_this$_options4","moveCamera","setFromSpherical","setRotationFromEuler","getRootNode","activeElement","adjustOrbit","pixelLength","touchOne","touchTwo","xOne","yOne","xDelta","yDelta","pixelLengthToSphericalAngle","easeInOutQuad","interpolate","ease","timeline","keyframes","lastValue","_i370","keyframe","totalWeight","ratios","ratio","_i369","sequence","__decorate$3","wiggle","fade","DEFAULT_CAMERA_ORBIT","DEFAULT_CAMERA_TARGET","DEFAULT_FIELD_OF_VIEW","MINIMUM_RADIUS_RATIO","AZIMUTHAL_QUADRANT_LABELS","POLAR_TRIENT_LABELS","InteractionPromptStrategy","InteractionPromptStyle","InteractionPolicy","TouchAction","fieldOfViewIntrinsics","$zoomAdjustedFieldOfView","minFieldOfViewIntrinsics","maxFieldOfViewIntrinsics","cameraOrbitIntrinsics","minCameraOrbitIntrinsics","maxCameraOrbitIntrinsics","orbitIntrinsics","defaultRadius","cameraTargetIntrinsics","HALF_PI","THIRD_PI","QUARTER_PI","TAU","$controls","$promptElement","$promptAnimatedContainer","$deferInteractionPrompt","$updateAria","$updateCameraForRadius","$onBlur","$onFocus","$onChange","$onPointerChange","$waitingToPromptUser","$userHasInteracted","$promptElementVisibleTime","$lastPromptOffset","$focusedTime","$lastSpherical","$jumpCamera","$initialized","$maintainThetaPhi","$syncCameraOrbit","$syncFieldOfView","$syncCameraTarget","$syncMinCameraOrbit","$syncMaxCameraOrbit","$syncMinFieldOfView","$syncMaxFieldOfView","$modelViewerStatusInstance","$updateStatus","LoadingStatusAnnouncer","_EventDispatcher13","_updateStatus","_super146","_this162","registeredInstanceStatuses","loadingPromises","statusElement","statusUpdateInProgress","updateStatus","modelViewer","onUnregistered","loadShouldBeMeasured","loadAttemptCompletes","resolveHandler","modelViewerStatusInstance","statuses","instanceStatus","firstKey","_map","getFirstMapKey","_callee37","_context39","__decorate$2","DEFAULT_DRACO_DECODER_LOCATION","DEFAULT_KTX2_TRANSCODER_LOCATION","RevealStrategy","LoadingStrategy","PosterDismissalSource","loadingStatusAnnouncer","$defaultProgressBarElement","$defaultProgressMaskElement","$posterContainerElement","$defaultPosterElement","$posterDismissalSource","$hidePoster","$modelIsRevealed","$updateProgressBar","$lastReportedProgress","$transitioned","$ariaLabelCallToAction","$onClick","$onKeydown","$onProgress","GLTFExporter","writer","GLTFLightExtension","GLTFMaterialsUnlitExtension","GLTFMaterialsPBRSpecularGlossiness","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","onDone","GLTFWriter","_i371","write","WEBGL_CONSTANTS","THREE_TO_WEBGL","PATH_PROPERTIES","equalArray","array1","every","getPaddedBufferSize","bufferSize","getPaddedArrayBuffer","paddingByte","paddedLength","_i374","cachedCanvas","nodeMap","uids","uid","attributesNormalized","binary","trs","onlyVisible","truncateDrawRange","embedImages","includeCustomExtensions","extensionsUsedList","reader","FileReader","readAsArrayBuffer","onloadend","binaryChunk","binaryChunkPrefix","setUint32","jsonChunk","text","_i372","stringToArrayBuffer","jsonChunkPrefix","totalByteLength","glbBlob","glbReader","_reader","readAsDataURL","base64data","_i375","_i376","didTransform","transformDef","componentSize","dataView","_i377","_a16","setFloat32","setUint16","setUint8","processBuffer","end2","bufferViewTarget","minMax","POSITIVE_INFINITY","NEGATIVE_INFINITY","_i373","_a15","getMinMax","processBufferView","cachedImages","imageDef","ctx","_i378","_i379","processBufferViewImage","samplerDef","processSampler","processImage","writeTexture","metalRoughMapDef","processTexture","applyTextureTransform","baseColorMapDef","maxEmissiveComponent","emissiveMapDef","normalMapDef","occlusionMapDef","serializeUserData","writeMaterial","meshCacheKeyParts","_i380","_l87","meshCacheKey","nameConversion","originalNormal","isNormalizedNormalAttribute","createNormalizedNormalAttribute","modifiedAttribute","getUID","processAccessor","reverseDictionary","_i381","_target10","warned","_attributeName3","_attribute5","baseAttribute","relativeAttribute","isMultiMaterial","_i382","processMaterial","writeMesh","isOrtho","orthographic","perspective","Utils","mergeMorphTargetTracks","_i383","trackBinding","trackNode","trackProperty","outputItemSize","rootJoint","temporaryBoneInverse","_i384","processMesh","processCamera","_i385","_l88","_nodeIndex","processNode","writeNode","_i386","_l89","_i387","processScene","beforeParse","objectsWithoutScene","_i388","processObjects","_i389","processSkin","_i390","processAnimation","afterParse","_i391","specularMapDef","transmissionMapDef","thicknessMapDef","insertKeyframe","tolerance","_i392","_i393","mergedTracks","sourceTracks","_i394","sourceTrack","sourceTrackBinding","sourceTrackNode","targetCount","mergedTrack","sourceInterpolant","_j14","_j15","keyframeIndex","Filter","Wrap","compatibleObject","compatibleMaterial","GLTFExporterMaterialsVariantsExtension","_step35","_this165","variantNameSet","_iterator35","_step36","_iterator36","_step37","mappingTable","_iterator37","variantMaterialInstance","variantIndex","mappingsDef","_step38","originalMaterialIndex","_iterator38","variantsDef","$correlatedObjects","$sourceObject","$onUpdate","ThreeDOMElement","correlatedObjects","quadMaterial","quad","$threeTexture","Image$1","_ThreeDOMElement","_createThumbnail","_setURI","_super148","gltfImage","_callee40","_context42","_x39","_callee42","blobContext","imageData","_context44","createImageData","_ref34","_callee41","_context43","_x42","_x43","_x40","_x41","minFilterValues","magFilterValues","wrapModes","_a$1","TextureUsage","isMinFilter","Nearest","Linear","NearestMipmapNearest","LinearMipmapLinear","NearestMipmapLinear","isMagFilter","isWrapMode","ClampToEdge","MirroredRepeat","Repeat","$threeTextures","$setProperty","$sourceSampler","Sampler","_ThreeDOMElement2","_super149","gltfSampler","_value11","isValidSamplerValue","_step39","_iterator39","$image","$sampler","_ThreeDOMElement3","_super150","threeTexture","_this166","gltfTexture","$texture","$materials$1","$usage","TextureInfo","gltfTextureInfo","_step40","_iterator40","Base","MetallicRoughness","Normal","Occlusion","Emissive","$threeMaterials","$baseColorTexture","$metallicRoughnessTexture","PBRMetallicRoughness","_ThreeDOMElement4","_super151","correlatedMaterials","_this167","gltfBaseColorTexture","gltfMetallicRoughnessTexture","_correlatedMaterials$","rgba","_step41","_iterator41","_step42","_iterator42","_step43","_iterator43","$pbrMetallicRoughness","$normalTexture","$occlusionTexture","$emissiveTexture","$backingThreeMaterial","$applyAlphaCutoff","Material","_ThreeDOMElement5","_super152","gltfMaterial","_this168","gltfNormalTexture","gltfOcculsionTexture","gltfEmissiveTexture","_correlatedMaterials$2","rgb","_step44","_iterator44","_step45","cutoff","_iterator45","_step46","_iterator46","enableTransparency","_step47","_iterator47","$materials","Model","_this169","__decorate$1","$currentGLTF","$model","$variants","$getOnUpdateMethod","$textureLoader","$originalGltfJson","__decorate","DEFAULT_ROTATION_SPEED","rotationRateIntrinsics","$autoRotateStartTime","$radiansPerSecond","$syncRotationRate","$onCameraChange","_ModelViewerElement3","_ref24","AnnotationModelViewerElement","_super137","_this148","mutations","mutation","MutationRecord","addedNodes","removedNodes","MutationObserver","_i364","ShadyDOM","childList","observeChildren","unobserveChildren","updateHotspots","pixelX","pixelY","increment","addHotspot","decrement","removeHotspot","AnnotationMixin","SceneGraphModelViewerElement","_ModelViewerElement7","_ref35","_exportScene","_updated2","_createTexture2","_super153","_this170","orientation","_this171","_callee43","currentGLTF","_this172","_args44","_context45","_x44","_callee44","_threeGLTF$correlated","_iterator48","_step48","roll","pitch","_context46","loadVariant","updateShadow","_x45","_callee46","_this173","_context48","_ref36","_callee45","_context47","forcePowerOfTwoTextures","_x47","_x46","SceneGraphMixin","StagingModelViewerElement","_ModelViewerElement8","_ref37","_super154","_this174","autoRotate","autoRotateDelay","rotationPerSecond","rotationDelta","StagingMixin","EnvironmentModelViewerElement","_ModelViewerElement","_ref14","_value2","_super125","_this123","environmentImage","skyboxImage","setShadowSoftness","_callee13","_yield$Promise","_this124","_context14","_ref15","_callee12","texturesLoad","_context13","generateEnvironmentMapAndSkybox","_x25","_x26","EnvironmentMixin","_l","_m","_o","_p","_q","_r","_s","ControlsModelViewerElement","_ModelViewerElement5","_ref31","_updateFraming","_super145","_this160","cameraControls","cameraOrbit","cameraTarget","fieldOfView","minCameraOrbit","maxCameraOrbit","minFieldOfView","maxFieldOfView","interactionPromptThreshold","interactionPromptStyle","interactionPrompt","orbitSensitivity","disableZoom","interpolationDecay","bounds","_ref32","_this$$lastSpherical","getFieldOfView","_this161","controls","enableInteraction","disableInteraction","toggle","applyOptions","setDamperDecayTime","setTargetDamperDecayTime","_callee36","newFramedFieldOfView","_context38","_this$getCameraOrbit","jumpCameraToGoal","_style3","thresholdTime","animationTime","updateNearFar","_this$$lastSpherical2","lastTheta","lastPhi","_this$$controls$getCa","getCameraSpherical","lastAzimuthalQuadrant","azimuthalQuadrant","lastPolarTrient","polarTrient","azimuthalQuadrantLabel","updateAspect","ControlsMixin","ARModelViewerElement","_ModelViewerElement4","_ref25","_prepareUSDZ","_value9","_value8","_value7","_value5","_activateAR","_update2","_super138","_this149","arScale","arModes","iosSrc","xrEnvironment","activateAR","_ref26","_ref27","_callee29","_context31","_x37","_callee30","_context32","_callee31","_iterator32","_step32","_value6","_context33","supportsPresentation","canActivateAR","_callee32","_context34","present","_callee33","_context35","_this150","locationUrl","modelUrl","URLSearchParams","soundUrl","linkUrl","intent","encodeURIComponent","history","back","click","_callee34","generateUsdz","objectURL","anchor","img","_context36","prepareUSDZ","_callee35","exporter","arraybuffer","_context37","ARMixin","LoadingModelViewerElement","_ModelViewerElement6","_ref33","_value10","_updated","_super147","_this163","_len2","_key4","poster","reveal","dismissPoster","setDRACODecoderLocation","setKTX2TranscoderLocation","posterContainerElement","defaultPosterElement","registerInstance","unregisterInstance","_callee38","_context40","backgroundImage","_x38","_this164","tabIndex","_callee39","_context41","showPoster","getDRACODecoderLocation","getKTX2TranscoderLocation","LoadingMixin","AnimationModelViewerElement","_ModelViewerElement2","_ref23","_value4","_super136","_this147","animationName","animationCrossfadeDuration","availableAnimations","hasActiveAnimation","updateAnimation","_callee27","_context28","stopAnimation","playAnimation","AnimationMixin","SuperClass","$endPolyfillCoordination","FocusVisibleCoordinator","_SuperClass","_super155","_this175","applyFocusVisiblePolyfill","coordinationHandler","coordinateWithPolyfill","FocusVisiblePolyfillMixin","define"],"sourceRoot":""}